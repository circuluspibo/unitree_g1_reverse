!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function t(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}System.register(["../../assets/index-legacy-CBobRbIX.js"],(function(e,o){"use strict";var n,i,s,a,l,c,u,d,p,h,f,g,m,_,E,v,y,b,T,N,R,O,w,x,P,C,S,I,k,A,M,L,F,D,U,B,j,V,$,G,Y,W,z,X,H,J,K,q,Z,Q,ee,te,re,oe,ne,ie,se,ae,le,ce,ue,de,pe,he,fe,ge,me,_e,Ee,ve,ye,be,Te,Ne,Re,Oe,we,xe;return{setters:[e=>{n=e.d,i=e.t,s=e.s,a=e.u,l=e.w,c=e.c,u=e.o,d=e.a,p=e.n,h=e.b,f=e.e,g=e.f,m=e.P,_=e.g,E=e.B,v=e._,y=e.p,b=e.h,T=e.i,N=e.r,e.j,R=e.k,O=e.R,w=e.S,x=e.l,P=e.m,C=e.q,S=e.v,I=e.x,k=e.y,A=e.z,M=e.A,L=e.C,F=e.D,D=e.E,U=e.F,B=e.V,j=e.Q,V=e.G,$=e.H,G=e.I,Y=e.J,W=e.K,z=e.L,X=e.M,H=e.N,J=e.O,K=e.T,q=e.U,Z=e.W,Q=e.X,ee=e.Y,te=e.Z,re=e.$,oe=e.a0,ne=e.a1,ie=e.a2,se=e.a3,ae=e.a4,le=e.a5,ce=e.a6,ue=e.a7,de=e.a8,pe=e.a9,he=e.aa,fe=e.ab,ge=e.ac,me=e.ad,_e=e.ae,Ee=e.af,ve=e.ag,ye=e.ah,be=e.ai,Te=e.aj,Ne=e.ak,Re=e.al,Oe=e.am,we=e.an,xe=e.ao}],execute:function(){var Pe=document.createElement("style");Pe.textContent=".programming_top_bar_wrapper[data-v-6828c464]{width:100%;height:24px;position:absolute;top:20px;left:0;z-index:100;-webkit-overflow-scrolling:touch;pointer-events:none;user-select:none;-webkit-user-select:none}.programming_top_bar_wrapper[data-v-6828c464]:before{content:\"\";background:transparent;opacity:.56;width:100%;height:30px;position:absolute;top:-20px;left:0;z-index:1;pointer-events:all}.programming_top_bar_wrapper[data-v-6828c464]:after{content:\"\";background:linear-gradient(180deg,#000,rgba(0,0,0,0));opacity:.56;width:100%;height:84px;position:absolute;top:-20px;left:0;pointer-events:none}.programming_top_bar_wrapper .top_bar_cont[data-v-6828c464]{width:100%;height:100%;position:relative;z-index:1;padding-right:30px;box-sizing:border-box;display:flex;justify-content:space-between}.programming_top_bar_wrapper .top_bar_cont .left[data-v-6828c464]{height:100%;display:flex;align-items:center;pointer-events:all}.programming_top_bar_wrapper .top_bar_cont .left .btn-back[data-v-6828c464]{width:55px;height:100%;display:flex;align-items:center;padding-left:25px;box-sizing:border-box}.programming_top_bar_wrapper .top_bar_cont .left .title[data-v-6828c464]{font-size:16px;font-family:AlibabaPuHuiTiM;color:#fff;line-height:22px;margin-left:9px}.programming_top_bar_wrapper .top_bar_cont .right[data-v-6828c464]{height:100%;display:flex;align-items:center}.programming_top_bar_wrapper .top_bar_cont .right .video_enter[data-v-6828c464]{width:28px;height:28px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:14px;margin-right:12px;display:flex;justify-content:center;align-items:center;pointer-events:all}.programming_top_bar_wrapper .top_bar_cont .right .video_enter>svg[data-v-6828c464]{width:16px;height:13px;margin-left:1px}.blockly_field_wrapper[data-v-357fd1e1]{position:absolute;width:100vw;height:100vh;background-color:rgba(0,0,0,.5);z-index:99999;top:0;left:0;display:flex;justify-content:center;align-items:center}.blockly_field_wrapper .modal_body[data-v-357fd1e1]{width:300px;background-color:#4a4a5b;box-shadow:0 0 2px #3d3d3d;border-radius:10px}.blockly_field_wrapper .modal_body .modal_title[data-v-357fd1e1]{font-size:16px;color:#fff;width:100%;height:40px;line-height:40px;text-align:center;border-bottom:1px solid rgba(151,151,151,.18)}.blockly_field_wrapper .modal_body .modal_content[data-v-357fd1e1]{min-height:100px}.blockly_field_wrapper .modal_body .modal_footer[data-v-357fd1e1]{width:100%;border-top:1px solid rgba(151,151,151,.18);height:40px;display:flex}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-357fd1e1]{flex:1;text-align:center;line-height:40px}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-357fd1e1]:first-of-type{border-right:1px solid rgba(151,151,151,.18);color:#ec5e5e}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-357fd1e1]:last-of-type{color:#7483e4}.blockly_field_wrapper[data-v-cb2afe87]{position:absolute;width:100vw;height:100vh;background-color:rgba(0,0,0,.5);z-index:99999;top:0;left:0;display:flex;justify-content:center;align-items:center}.blockly_field_wrapper .modal_body[data-v-cb2afe87]{width:300px;background-color:#4a4a5b;box-shadow:0 0 2px #3d3d3d;border-radius:10px}.blockly_field_wrapper .modal_body .modal_title[data-v-cb2afe87]{font-size:16px;color:#fff;width:100%;height:40px;line-height:40px;text-align:center;border-bottom:1px solid rgba(151,151,151,.18)}.blockly_field_wrapper .modal_body .modal_content[data-v-cb2afe87]{padding:24px;position:relative}.blockly_field_wrapper .modal_body .modal_content .input_style[data-v-cb2afe87]{width:100%;outline:none;font-size:14px;height:24px;background-color:#757587;border:none;color:#d9d9d9;padding:0 4px;box-sizing:border-box;margin-top:0}.blockly_field_wrapper .modal_body .modal_content .modal_content_tip[data-v-cb2afe87]{width:100%;position:absolute;bottom:4px;top:52px;left:0;font-size:12px;color:rgba(255,0,0,.8);padding:0 24px;box-sizing:border-box;line-height:1}.blockly_field_wrapper .modal_body .modal_footer[data-v-cb2afe87]{width:100%;border-top:1px solid rgba(151,151,151,.18);height:40px;display:flex}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-cb2afe87]{flex:1;text-align:center;line-height:40px}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-cb2afe87]:first-of-type{border-right:1px solid rgba(151,151,151,.18);color:#ec5e5e}.blockly_field_wrapper .modal_body .modal_footer .footer_opera_item[data-v-cb2afe87]:last-of-type{color:#7483e4}.blocklyTreeLabel{color:#fff}.blocklyToolboxContents{padding:.5em}.blocklyTreeRow{padding:0;margin-bottom:0}.customIcon{color:#fff}.blocklyToolboxDiv{max-width:140px;min-width:120px;background:#101017!important;padding-top:60px;box-sizing:border-box;z-index:71}.blocklyToolboxDiv.deleting:after{content:\"\";background-color:#e53131;width:120px;height:100%;top:0;left:0;position:fixed}.blocklyToolboxCategory{width:100%}.blocklyTreeRowContentContainer{padding-left:25px}.blocklyToolboxContents{padding:0}.blocklyTreeRowContentContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;height:74px}.blocklyTreeRow{height:initial}.blocklyTreeLabel{font-size:12px;margin-top:4px}.blocklyFlyout{background-color:#242430;max-width:340px;padding-top:60px;z-index:71}.blocklyFlyoutBackground{fill-opacity:0}.custom-label-style>.blocklyFlyoutLabelText{font: 9pt sans-serif!important;fill:#a3a3aa!important}.custom-label-style.opacity>.blocklyFlyoutLabelText{fill:transparent!important;fill-opacity:0}.custom-trash-icon{position:fixed;top:50%;left:40px;transform:translate3d(-50%,-50%,0);width:48px;height:48px;z-index:100;display:none;transition:all .3s;transform-origin:35px 9px}.blockly-custom-flyout-btn{fill:transparent}.blockly-custom-flyout-btn>.blocklyFlyoutButtonShadow{fill:transparent}.blockly-custom-flyout-btn>.blocklyFlyoutButtonBackground{stroke:#6879e4!important;stroke-width:2px!important}.blocklyWidgetDiv>.blocklyHtmlInput{pointer-events:none}.programme-wrapper[data-v-d30cdd6b]{width:var(--6d03539a);height:var(--516e21a3);position:relative;top:0;left:0;position:fixed;overflow:hidden;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.programme-wrapper[data-v-d30cdd6b]:before{content:\"\";background:transparent;opacity:.56;width:100%;height:30px;position:absolute;bottom:0;left:0;z-index:70;pointer-events:all}.programme-wrapper #blocklyDiv[data-v-d30cdd6b]{width:100vw;height:100vh}.programme-wrapper #blocklyDiv[data-v-d30cdd6b] .blocklyMainBackground{stroke-width:0}.programme-wrapper .operation-content[data-v-d30cdd6b]{position:absolute;right:0;bottom:50px;user-select:none}.programme-wrapper .operation-content .preview-window[data-v-d30cdd6b]{width:276px;height:190px;border-radius:4px;background-image:url(\"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='796px'%20height='547px'%20viewBox='0%200%20796%20547'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e编组%203%3c/title%3e%3cdefs%3e%3clinearGradient%20x1='23.2070581%25'%20y1='26.3590846%25'%20x2='50%25'%20y2='73.6409154%25'%20id='linearGradient-1'%3e%3cstop%20stop-color='%234C4C62'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23404058'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-2'%3e%3cstop%20stop-color='%23767692'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23414159'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-5'%20transform='translate(-1640.000000,%20-168.000000)'%20fill='url(%23linearGradient-1)'%20stroke='url(%23linearGradient-2)'%20stroke-width='3.4671'%3e%3cg%20id='编组-11'%20transform='translate(1640.000000,%20168.000000)'%3e%3cg%20id='编组-5'%20transform='translate(0.500000,%200.000000)'%3e%3crect%20id='矩形'%20x='1.73355'%20y='1.73355'%20width='792.0329'%20height='543.5329'%20rx='21'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\");background-size:100% 100%;background-position:center;background-repeat:no-repeat;position:absolute;right:-276px;top:-220px;padding:10px;box-sizing:border-box;transition:all .3s;user-select:none}.programme-wrapper .operation-content .preview-window.show[data-v-d30cdd6b]{right:0}.programme-wrapper .operation-content .preview-window.show>.preview-switch-btn[data-v-d30cdd6b]{transform:translate(-10px,-50%) rotate(0)}.programme-wrapper .operation-content .preview-window .preview-cont[data-v-d30cdd6b]{width:100%;height:100%;border-radius:8px;background-color:gray;margin:auto}.programme-wrapper .operation-content .preview-window .preview-switch-btn[data-v-d30cdd6b]{width:16px;height:60px;background-color:transparent;background-image:url(\"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='47px'%20height='174px'%20viewBox='0%200%2047%20174'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e编组%206%3c/title%3e%3cdefs%3e%3clinearGradient%20x1='48.0390495%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-1'%3e%3cstop%20stop-color='%234C4C62'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23404058'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-2'%3e%3cstop%20stop-color='%23767692'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23414159'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3cfilter%20color-interpolation-filters='auto'%20id='filter-3'%3e%3cfeColorMatrix%20in='SourceGraphic'%20type='matrix'%20values='0%200%200%200%201.000000%200%200%200%200%201.000000%200%200%200%200%201.000000%200%200%200%201.000000%200'%3e%3c/feColorMatrix%3e%3c/filter%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-5'%20transform='translate(-1641.000000,%20-359.000000)'%3e%3cg%20id='编组-6'%20transform='translate(1640.500000,%20358.539488)'%3e%3cpath%20d='M2.04527085,2.3178942%20L20.0561472,7.63377908%20C27.5525072,9.84631924%2033.8733461,14.3942809%2038.3200949,20.3431218%20C42.7668438,26.2919626%2045.3395026,33.6416827%2045.3395026,41.4577398%20L45.3395026,41.4577398%20L45.3395026,132.014244%20C45.3395026,139.706218%2042.8464808,146.954423%2038.5198188,152.859003%20C34.1931567,158.763583%2028.0328543,163.324537%2020.6982931,165.642011%20L20.6982931,165.642011%20L1.73785078,171.632872%20L2.04527085,2.3178942%20Z'%20id='矩形'%20stroke='url(%23linearGradient-2)'%20stroke-width='3.4671'%20fill='url(%23linearGradient-1)'%3e%3c/path%3e%3cg%20filter='url(%23filter-3)'%20id='向左1'%3e%3cg%20transform='translate(24.000000,%2086.960512)%20scale(-1,%201)%20translate(-24.000000,%20-86.960512)%20translate(17.500000,%2075.460512)'%3e%3cpath%20d='M11.6074932,23%20C11.2509144,23%2010.8942857,22.8656703%2010.6222215,22.5961205%20L0.408133697,12.4764316%20C-0.136044566,11.9382223%20-0.136044566,11.0641393%200.408133697,10.5249903%20L10.6222215,0.404361713%20C11.1663998,-0.134787238%2012.047688,-0.134787238%2012.5918663,0.404361713%20C13.1360446,0.942570943%2013.1360446,1.81665403%2012.5918663,2.35580299%20L3.36305016,11.5002164%20L12.5918663,20.6437395%20C13.1360445,21.1828885%2013.1360445,22.0560318%2012.5918663,22.5951808%20C12.3207007,22.8656703%2011.964072,23%2011.6074932,23%20Z'%20id='路径'%20fill='%23575B66'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\");background-size:100% 100%;background-position:center;background-repeat:no-repeat;position:absolute;top:50%;transform:translate(-25px,-50%) rotate(180deg);z-index:70;transition:all .5s;-webkit-tap-highlight-color:transparent}.programme-wrapper .operation-content .opera-bar[data-v-d30cdd6b]{display:flex;justify-content:flex-end;padding-right:25px;box-sizing:border-box}.programme-wrapper .operation-content .opera-bar .opera-1[data-v-d30cdd6b]{width:180px;height:40px;background-image:url(\"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='184px'%20height='40px'%20viewBox='0%200%20184%2040'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e矩形备份%204%3c/title%3e%3cdefs%3e%3clinearGradient%20x1='23.2070581%25'%20y1='47.637051%25'%20x2='50%25'%20y2='52.362949%25'%20id='linearGradient-1'%3e%3cstop%20stop-color='%234C4C62'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23404058'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20x1='50%25'%20y1='0%25'%20x2='50%25'%20y2='100%25'%20id='linearGradient-2'%3e%3cstop%20stop-color='%23767692'%20offset='0%25'%3e%3c/stop%3e%3cstop%20stop-color='%23414159'%20offset='100%25'%3e%3c/stop%3e%3c/linearGradient%3e%3crect%20id='path-3'%20x='0'%20y='0'%20width='184'%20height='40'%20rx='20'%3e%3c/rect%3e%3cfilter%20x='-45.7%25'%20y='-210.0%25'%20width='191.3%25'%20height='520.0%25'%20filterUnits='objectBoundingBox'%20id='filter-4'%3e%3cfeOffset%20dx='0'%20dy='0'%20in='SourceAlpha'%20result='shadowOffsetOuter1'%3e%3c/feOffset%3e%3cfeGaussianBlur%20stdDeviation='28'%20in='shadowOffsetOuter1'%20result='shadowBlurOuter1'%3e%3c/feGaussianBlur%3e%3cfeComposite%20in='shadowBlurOuter1'%20in2='SourceAlpha'%20operator='out'%20result='shadowBlurOuter1'%3e%3c/feComposite%3e%3cfeColorMatrix%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.0618444056%200'%20type='matrix'%20in='shadowBlurOuter1'%3e%3c/feColorMatrix%3e%3c/filter%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='矩形备份-4'%3e%3cuse%20fill='black'%20fill-opacity='1'%20filter='url(%23filter-4)'%20xlink:href='%23path-3'%3e%3c/use%3e%3crect%20stroke='url(%23linearGradient-2)'%20stroke-width='2'%20stroke-linejoin='square'%20fill='url(%23linearGradient-1)'%20fill-rule='evenodd'%20x='1'%20y='1'%20width='182'%20height='38'%20rx='19'%3e%3c/rect%3e%3c/g%3e%3c/g%3e%3c/svg%3e\");background-size:100% 100%;background-position:center;background-repeat:no-repeat;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box}.programme-wrapper .operation-content .opera-bar .opera-1 .opera-item[data-v-d30cdd6b]{flex:1;height:70%;display:flex;align-items:center;justify-content:center;position:relative}.programme-wrapper .operation-content .opera-bar .opera-1 .opera-item .opera-item-label[data-v-d30cdd6b]{position:absolute;top:45px;font-size:12px;color:#fff;opacity:.4}.programme-wrapper .operation-content .opera-bar .opera-1 .opera-item-line[data-v-d30cdd6b]{width:1px;height:18px;background-color:#767692;opacity:.65}.programme-wrapper .operation-content .opera-bar .opera-2[data-v-d30cdd6b]{width:40px;height:40px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:100%;margin-left:8px;display:flex;align-items:center;justify-content:center;position:relative}.programme-wrapper .operation-content .opera-bar .opera-2 .opera-2-label[data-v-d30cdd6b]{position:absolute;top:52px;font-size:12px;color:#fff;opacity:.4}.custom-field-modal-wrapper[data-v-d30cdd6b]{position:absolute;top:0;left:0}\n/*$vite$:1*/",document.head.appendChild(Pe);const Ce={class:"programming_top_bar_wrapper"},Se={class:"left"},Ie=[(e=>(y("data-v-6828c464"),e=e(),b(),e))((()=>d("img",{class:"icon-back",src:v,style:{width:"9px",height:"17px"}},null,-1)))],ke={class:"title"},Ae={class:"right"},Me=n({__name:"TopBar",props:{name:{default:i("Blockly.programming")}},emits:["back"],setup(e,{emit:t}){const{topLeft:r}=s(a()),o=()=>{_("backToApp",""),t("back"),E.DropDownDiv.clearContent(),E.DropDownDiv.hide()};return l((()=>r.value),(()=>{(()=>{const e=document.getElementsByClassName("blocklyTreeRowContentContainer");for(let t=0;t<e.length;t++)e[t].style.paddingLeft=`${r}px`})()}),{immediate:!0}),(e,t)=>(u(),c("div",Ce,[d("div",{class:"top_bar_cont",style:p({paddingLeft:`${Math.max(h(r),0)}px`})},[d("div",Se,[d("div",{class:"btn-back",onClick:o},Ie),d("span",ke,f(e.name),1)]),d("div",Ae,[g(m)])],4)]))}}),Le=T(Me,[["__scopeId","data-v-6828c464"]]);var Fe,De={exports:{}},Ue={exports:{}};function Be(){return Fe||(Fe=1,function(e,t){e.exports=function(e){var t,r,o=e.__namespace__,n=function(e,r){return[r.quote_(e.getFieldValue("COLOUR")),t.ATOMIC]},i=function(e,r){return r.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",t.FUNCTION_CALL]},s=function(e,r){return[r.provideFunction_("colour_rgb",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):\n  r = round(min(100, max(0, r)) * 2.55)\n  g = round(min(100, max(0, g)) * 2.55)\n  b = round(min(100, max(0, b)) * 2.55)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(r.valueToCode(e,"RED",t.NONE)||0)+", "+(r.valueToCode(e,"GREEN",t.NONE)||0)+", "+(e=r.valueToCode(e,"BLUE",t.NONE)||0)+")",t.FUNCTION_CALL]},a=function(e,r){return[r.provideFunction_("colour_blend",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):\n  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)\n  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)\n  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)\n  ratio = min(1, max(0, ratio))\n  r = round(r1 * (1 - ratio) + r2 * ratio)\n  g = round(g1 * (1 - ratio) + g2 * ratio)\n  b = round(b1 * (1 - ratio) + b2 * ratio)\n  return '#%02x%02x%02x' % (r, g, b)\n`)+"("+(r.valueToCode(e,"COLOUR1",t.NONE)||"'#000000'")+", "+(r.valueToCode(e,"COLOUR2",t.NONE)||"'#000000'")+", "+(e=r.valueToCode(e,"RATIO",t.NONE)||0)+")",t.FUNCTION_CALL]},l=function(e,r){return["[]",t.ATOMIC]},c=function(e,r){const o=Array(e.itemCount_);for(let n=0;n<e.itemCount_;n++)o[n]=r.valueToCode(e,"ADD"+n,t.NONE)||"None";return["["+o.join(", ")+"]",t.ATOMIC]},u=function(e,r){return["["+(r.valueToCode(e,"ITEM",t.NONE)||"None")+"] * "+(e=r.valueToCode(e,"NUM",t.MULTIPLICATIVE)||"0"),t.MULTIPLICATIVE]},d=function(e,r){return["len("+(r.valueToCode(e,"VALUE",t.NONE)||"[]")+")",t.FUNCTION_CALL]},p=function(e,r){return["not len("+(r.valueToCode(e,"VALUE",t.NONE)||"[]")+")",t.LOGICAL_NOT]},h=function(e,r){const o=r.valueToCode(e,"FIND",t.NONE)||"[]",n=r.valueToCode(e,"VALUE",t.NONE)||"''";let i=" -1",s="",a=" - 1";return e.workspace.options.oneBasedIndex&&(i=" 0",s=" + 1",a=""),[("FIRST"===e.getFieldValue("END")?r.provideFunction_("first_index",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = my_list.index(elem)${s}\n  except: index =${i}\n  return index\n`):r.provideFunction_("last_index",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):\n  try: index = len(my_list) - my_list[::-1].index(elem)${a}\n  except: index =${i}\n  return index\n`))+"("+n+", "+o+")",t.FUNCTION_CALL]},f=function(e,r){const o=e.getFieldValue("MODE")||"GET",n=e.getFieldValue("WHERE")||"FROM_START";var i=r.valueToCode(e,"VALUE","RANDOM"===n?t.NONE:t.MEMBER)||"[]";switch(n){case"FIRST":if("GET"===o)return[i+"[0]",t.MEMBER];if("GET_REMOVE"===o)return[i+".pop(0)",t.FUNCTION_CALL];if("REMOVE"===o)return i+".pop(0)\n";break;case"LAST":if("GET"===o)return[i+"[-1]",t.MEMBER];if("GET_REMOVE"===o)return[i+".pop()",t.FUNCTION_CALL];if("REMOVE"===o)return i+".pop()\n";break;case"FROM_START":if(e=r.getAdjustedInt(e,"AT"),"GET"===o)return[i+"["+e+"]",t.MEMBER];if("GET_REMOVE"===o)return[i+".pop("+e+")",t.FUNCTION_CALL];if("REMOVE"===o)return i+".pop("+e+")\n";break;case"FROM_END":if(e=r.getAdjustedInt(e,"AT",1,!0),"GET"===o)return[i+"["+e+"]",t.MEMBER];if("GET_REMOVE"===o)return[i+".pop("+e+")",t.FUNCTION_CALL];if("REMOVE"===o)return i+".pop("+e+")\n";break;case"RANDOM":if(r.definitions_.import_random="import random","GET"===o)return["random.choice("+i+")",t.FUNCTION_CALL];if(i=r.provideFunction_("lists_remove_random_item",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  x = int(random.random() * len(myList))\n  return myList.pop(x)\n`)+"("+i+")","GET_REMOVE"===o)return[i,t.FUNCTION_CALL];if("REMOVE"===o)return i+"\n"}throw Error("Unhandled combination (lists_getIndex).")},g=function(e,r){let n=r.valueToCode(e,"LIST",t.MEMBER)||"[]";const i=e.getFieldValue("MODE")||"GET";var s=e.getFieldValue("WHERE")||"FROM_START";const a=r.valueToCode(e,"TO",t.NONE)||"None";switch(s){case"FIRST":if("SET"===i)return n+"[0] = "+a+"\n";if("INSERT"===i)return n+".insert(0, "+a+")\n";break;case"LAST":if("SET"===i)return n+"[-1] = "+a+"\n";if("INSERT"===i)return n+".append("+a+")\n";break;case"FROM_START":if(r=r.getAdjustedInt(e,"AT"),"SET"===i)return n+"["+r+"] = "+a+"\n";if("INSERT"===i)return n+".insert("+r+", "+a+")\n";break;case"FROM_END":if(r=r.getAdjustedInt(e,"AT",1,!0),"SET"===i)return n+"["+r+"] = "+a+"\n";if("INSERT"===i)return n+".insert("+r+", "+a+")\n";break;case"RANDOM":if(r.definitions_.import_random="import random",n.match(/^\w+$/)?e="":(s=(e=r.nameDB_.getDistinctName("tmp_list",o.NameType$$module$build$src$core$names.VARIABLE))+" = "+n+"\n",n=e,e=s),e+=(r=r.nameDB_.getDistinctName("tmp_x",o.NameType$$module$build$src$core$names.VARIABLE))+" = int(random.random() * len("+n+"))\n","SET"===i)return e+(n+"[")+r+"] = "+a+"\n";if("INSERT"===i)return e+(n+".insert(")+r+", "+a+")\n"}throw Error("Unhandled combination (lists_setIndex).")},m=function(e,r){const n=r.valueToCode(e,"LIST",t.MEMBER)||"[]";var i=e.getFieldValue("WHERE1");const s=e.getFieldValue("WHERE2");switch(i){case"FROM_START":0===(i=r.getAdjustedInt(e,"AT1"))&&(i="");break;case"FROM_END":i=r.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":i="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(s){case"FROM_START":e=r.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=r.getAdjustedInt(e,"AT2",0,!0),o.isNumber$$module$build$src$core$utils$string(String(e))?0===e&&(e=""):(r.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[n+"["+i+" : "+e+"]",t.MEMBER]},_=function(e,r){const o=r.valueToCode(e,"LIST",t.NONE)||"[]",n=e.getFieldValue("TYPE");return e="1"===e.getFieldValue("DIRECTION")?"False":"True",[r.provideFunction_("lists_sort",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):\n  def try_float(s):\n    try:\n      return float(s)\n    except:\n      return 0\n  key_funcs = {\n    "NUMERIC": try_float,\n    "TEXT": str,\n    "IGNORE_CASE": lambda s: str(s).lower()\n  }\n  key_func = key_funcs[type]\n  list_cpy = list(my_list)\n  return sorted(list_cpy, key=key_func, reverse=reverse)\n`)+"("+o+', "'+n+'", '+e+")",t.FUNCTION_CALL]},E=function(e,r){var o=e.getFieldValue("MODE");if("SPLIT"===o)e=(o=r.valueToCode(e,"INPUT",t.MEMBER)||"''")+".split("+(e=r.valueToCode(e,"DELIM",t.NONE))+")";else{if("JOIN"!==o)throw Error("Unknown mode: "+o);o=r.valueToCode(e,"INPUT",t.NONE)||"[]",e=(r.valueToCode(e,"DELIM",t.MEMBER)||"''")+".join("+o+")"}return[e,t.FUNCTION_CALL]},v=function(e,r){return["list(reversed("+(r.valueToCode(e,"LIST",t.NONE)||"[]")+"))",t.FUNCTION_CALL]},y=function(e,r){let o,n,i=0,s="";r.STATEMENT_PREFIX&&(s+=r.injectId(r.STATEMENT_PREFIX,e));do{n=r.valueToCode(e,"IF"+i,t.NONE)||"False",o=r.statementToCode(e,"DO"+i)||r.PASS,r.STATEMENT_SUFFIX&&(o=r.prefixLines(r.injectId(r.STATEMENT_SUFFIX,e),r.INDENT)+o),s+=(0===i?"if ":"elif ")+n+":\n"+o,i++}while(e.getInput("IF"+i));return(e.getInput("ELSE")||r.STATEMENT_SUFFIX)&&(o=r.statementToCode(e,"ELSE")||r.PASS,r.STATEMENT_SUFFIX&&(o=r.prefixLines(r.injectId(r.STATEMENT_SUFFIX,e),r.INDENT)+o),s+="else:\n"+o),s},b=function(e,r){const o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],n=t.RELATIONAL;return[(r.valueToCode(e,"A",n)||"0")+" "+o+" "+(e=r.valueToCode(e,"B",n)||"0"),n]},T=function(e,r){const o="AND"===e.getFieldValue("OP")?"and":"or",n="and"===o?t.LOGICAL_AND:t.LOGICAL_OR;let i=r.valueToCode(e,"A",n);return e=r.valueToCode(e,"B",n),i||e?(r="and"===o?"True":"False",i||(i=r),e||(e=r)):e=i="False",[i+" "+o+" "+e,n]},N=function(e,r){return["not "+(r.valueToCode(e,"BOOL",t.LOGICAL_NOT)||"True"),t.LOGICAL_NOT]},R=function(e,r){return["TRUE"===e.getFieldValue("BOOL")?"True":"False",t.ATOMIC]},O=function(e,r){return["None",t.ATOMIC]},w=function(e,r){const o=r.valueToCode(e,"IF",t.CONDITIONAL)||"False";return[(r.valueToCode(e,"THEN",t.CONDITIONAL)||"None")+" if "+o+" else "+(e=r.valueToCode(e,"ELSE",t.CONDITIONAL)||"None"),t.CONDITIONAL]},x=function(e,r){let n;n=e.getField("TIMES")?String(parseInt(e.getFieldValue("TIMES"),10)):r.valueToCode(e,"TIMES",t.NONE)||"0",n=o.isNumber$$module$build$src$core$utils$string(n)?parseInt(n,10):"int("+n+")";let i=r.statementToCode(e,"DO");return i=r.addLoopTrap(i,e)||r.PASS,"for "+r.nameDB_.getDistinctName("count",o.NameType$$module$build$src$core$names.VARIABLE)+" in range("+n+"):\n"+i},P=function(e,r){const o="UNTIL"===e.getFieldValue("MODE");let n=r.valueToCode(e,"BOOL",o?t.LOGICAL_NOT:t.NONE)||"False",i=r.statementToCode(e,"DO");return i=r.addLoopTrap(i,e)||r.PASS,o&&(n="not "+n),"while "+n+":\n"+i},C=function(e,r){const n=r.getVariableName(e.getFieldValue("VAR"));var i=r.valueToCode(e,"FROM",t.NONE)||"0",s=r.valueToCode(e,"TO",t.NONE)||"0",a=r.valueToCode(e,"BY",t.NONE)||"1";let l=r.statementToCode(e,"DO");l=r.addLoopTrap(l,e)||r.PASS;let c="";e=function(){return r.provideFunction_("upRange",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start <= stop:\n    yield start\n    start += abs(step)\n`)};const u=function(){return r.provideFunction_("downRange",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):\n  while start >= stop:\n    yield start\n    start -= abs(step)\n`)};if(o.isNumber$$module$build$src$core$utils$string(i)&&o.isNumber$$module$build$src$core$utils$string(s)&&o.isNumber$$module$build$src$core$utils$string(a))i=Number(i),s=Number(s),a=Math.abs(Number(a)),0==i%1&&0==s%1&&0==a%1?(i<=s?(s++,e=0===i&&1===a?s:i+", "+s,1!==a&&(e+=", "+a)):e=i+", "+--s+", -"+a,e="range("+e+")"):(e=i<s?e():u(),e+="("+i+", "+s+", "+a+")");else{const t=function(e,t){return o.isNumber$$module$build$src$core$utils$string(e)?e=String(Number(e)):e.match(/^\w+$/)||(t=r.nameDB_.getDistinctName(n+t,o.NameType$$module$build$src$core$names.VARIABLE),c+=t+" = "+e+"\n",e=t),e};i=t(i,"_start"),s=t(s,"_end"),a=t(a,"_inc"),"number"==typeof i&&"number"==typeof s?(e=i<s?e():u(),e+="("+i+", "+s+", "+a+")"):e="("+i+" <= "+s+") and "+e()+"("+i+", "+s+", "+a+") or "+u()+"("+i+", "+s+", "+a+")"}return c+="for "+n+" in "+e+":\n"+l},S=function(e,r){const o=r.getVariableName(e.getFieldValue("VAR")),n=r.valueToCode(e,"LIST",t.RELATIONAL)||"[]";let i=r.statementToCode(e,"DO");return i=r.addLoopTrap(i,e)||r.PASS,"for "+o+" in "+n+":\n"+i},I=function(e,t){let r="";if(t.STATEMENT_PREFIX&&(r+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(r+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX){const o=e.getSurroundLoop();o&&!o.suppressPrefixSuffix&&(r+=t.injectId(t.STATEMENT_PREFIX,o))}switch(e.getFieldValue("FLOW")){case"BREAK":return r+"break\n";case"CONTINUE":return r+"continue\n"}throw Error("Unknown flow statement.")},k=function(e,r){return 1/0===(e=Number(e.getFieldValue("NUM")))?['float("inf")',t.FUNCTION_CALL]:-1/0===e?['-float("inf")',t.UNARY_SIGN]:[String(e),0>e?t.UNARY_SIGN:t.ATOMIC]},A=function(e,r){var o={ADD:[" + ",t.ADDITIVE],MINUS:[" - ",t.ADDITIVE],MULTIPLY:[" * ",t.MULTIPLICATIVE],DIVIDE:[" / ",t.MULTIPLICATIVE],POWER:[" ** ",t.EXPONENTIATION]}[e.getFieldValue("OP")];const n=o[0];return o=o[1],[(r.valueToCode(e,"A",o)||"0")+n+(e=r.valueToCode(e,"B",o)||"0"),o]},M=function(e,r){const o=e.getFieldValue("OP");let n;if("NEG"===o)return n=r.valueToCode(e,"NUM",t.UNARY_SIGN)||"0",["-"+n,t.UNARY_SIGN];switch(r.definitions_.import_math="import math",e="SIN"===o||"COS"===o||"TAN"===o?r.valueToCode(e,"NUM",t.MULTIPLICATIVE)||"0":r.valueToCode(e,"NUM",t.NONE)||"0",o){case"ABS":n="math.fabs("+e+")";break;case"ROOT":n="math.sqrt("+e+")";break;case"LN":n="math.log("+e+")";break;case"LOG10":n="math.log10("+e+")";break;case"EXP":n="math.exp("+e+")";break;case"POW10":n="math.pow(10,"+e+")";break;case"ROUND":n="round("+e+")";break;case"ROUNDUP":n="math.ceil("+e+")";break;case"ROUNDDOWN":n="math.floor("+e+")";break;case"SIN":n="math.sin("+e+" / 180.0 * math.pi)";break;case"COS":n="math.cos("+e+" / 180.0 * math.pi)";break;case"TAN":n="math.tan("+e+" / 180.0 * math.pi)"}if(n)return[n,t.FUNCTION_CALL];switch(o){case"ASIN":n="math.asin("+e+") / math.pi * 180";break;case"ACOS":n="math.acos("+e+") / math.pi * 180";break;case"ATAN":n="math.atan("+e+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+o)}return[n,t.MULTIPLICATIVE]},L=function(e,r){const o={PI:["math.pi",t.MEMBER],E:["math.e",t.MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",t.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",t.MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",t.MEMBER],INFINITY:["float('inf')",t.ATOMIC]};return"INFINITY"!==(e=e.getFieldValue("CONSTANT"))&&(r.definitions_.import_math="import math"),o[e]},F=function(e,r){var o={EVEN:[" % 2 == 0",t.MULTIPLICATIVE,t.RELATIONAL],ODD:[" % 2 == 1",t.MULTIPLICATIVE,t.RELATIONAL],WHOLE:[" % 1 == 0",t.MULTIPLICATIVE,t.RELATIONAL],POSITIVE:[" > 0",t.RELATIONAL,t.RELATIONAL],NEGATIVE:[" < 0",t.RELATIONAL,t.RELATIONAL],DIVISIBLE_BY:[null,t.MULTIPLICATIVE,t.RELATIONAL],PRIME:[null,t.NONE,t.FUNCTION_CALL]};const n=e.getFieldValue("PROPERTY"),[i,s,a]=o[n];if(o=r.valueToCode(e,"NUMBER_TO_CHECK",s)||"0","PRIME"===n)r.definitions_.import_math="import math",r.definitions_.from_numbers_import_Number="from numbers import Number",e=r.provideFunction_("math_isPrime",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(n):\n  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  # If n is not a number but a string, try parsing it.\n  if not isinstance(n, Number):\n    try:\n      n = float(n)\n    except:\n      return False\n  if n == 2 or n == 3:\n    return True\n  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.\n  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:\n    return False\n  # Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for x in range(6, int(math.sqrt(n)) + 2, 6):\n    if n % (x - 1) == 0 or n % (x + 1) == 0:\n      return False\n  return True\n`)+"("+o+")";else if("DIVISIBLE_BY"===n){if("0"===(e=r.valueToCode(e,"DIVISOR",t.MULTIPLICATIVE)||"0"))return["False",t.ATOMIC];e=o+" % "+e+" == 0"}else e=o+i;return[e,a]},D=function(e,r){r.definitions_.from_numbers_import_Number="from numbers import Number";const o=r.valueToCode(e,"DELTA",t.ADDITIVE)||"0";return(e=r.getVariableName(e.getFieldValue("VAR")))+" = ("+e+" if isinstance("+e+", Number) else 0) + "+o+"\n"},U=function(e,r){const o=e.getFieldValue("OP");switch(e=r.valueToCode(e,"LIST",t.NONE)||"[]",o){case"SUM":r="sum("+e+")";break;case"MIN":r="min("+e+")";break;case"MAX":r="max("+e+")";break;case"AVERAGE":r.definitions_.from_numbers_import_Number="from numbers import Number",r=r.provideFunction_("math_mean",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = [e for e in myList if isinstance(e, Number)]\n  if not localList: return\n  return float(sum(localList)) / len(localList)\n`)+"("+e+")";break;case"MEDIAN":r.definitions_.from_numbers_import_Number="from numbers import Number",r=r.provideFunction_("math_median",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(myList):\n  localList = sorted([e for e in myList if isinstance(e, Number)])\n  if not localList: return\n  if len(localList) % 2 == 0:\n    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0\n  else:\n    return localList[(len(localList) - 1) // 2]\n`)+"("+e+")";break;case"MODE":r=r.provideFunction_("math_modes",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(some_list):\n  modes = []\n  # Using a lists of [item, count] to keep count rather than dict\n  # to avoid "unhashable" errors when the counted item is itself a list or dict.\n  counts = []\n  maxCount = 1\n  for item in some_list:\n    found = False\n    for count in counts:\n      if count[0] == item:\n        count[1] += 1\n        maxCount = max(maxCount, count[1])\n        found = True\n    if not found:\n      counts.append([item, 1])\n  for counted_item, item_count in counts:\n    if item_count == maxCount:\n      modes.append(counted_item)\n  return modes\n`)+"("+e+")";break;case"STD_DEV":r.definitions_.import_math="import math",r=r.provideFunction_("math_standard_deviation",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(numbers):\n  n = len(numbers)\n  if n == 0: return\n  mean = float(sum(numbers)) / n\n  variance = sum((x - mean) ** 2 for x in numbers) / n\n  return math.sqrt(variance)\n`)+"("+e+")";break;case"RANDOM":r.definitions_.import_random="import random",r="random.choice("+e+")";break;default:throw Error("Unknown operator: "+o)}return[r,t.FUNCTION_CALL]},B=function(e,r){return[(r.valueToCode(e,"DIVIDEND",t.MULTIPLICATIVE)||"0")+" % "+(e=r.valueToCode(e,"DIVISOR",t.MULTIPLICATIVE)||"0"),t.MULTIPLICATIVE]},j=function(e,r){return["min(max("+(r.valueToCode(e,"VALUE",t.NONE)||"0")+", "+(r.valueToCode(e,"LOW",t.NONE)||"0")+"), "+(e=r.valueToCode(e,"HIGH",t.NONE)||"float('inf')")+")",t.FUNCTION_CALL]},V=function(e,r){return r.definitions_.import_random="import random",["random.randint("+(r.valueToCode(e,"FROM",t.NONE)||"0")+", "+(e=r.valueToCode(e,"TO",t.NONE)||"0")+")",t.FUNCTION_CALL]},$=function(e,r){return r.definitions_.import_random="import random",["random.random()",t.FUNCTION_CALL]},G=function(e,r){r.definitions_.import_math="import math";const o=r.valueToCode(e,"X",t.NONE)||"0";return["math.atan2("+(r.valueToCode(e,"Y",t.NONE)||"0")+", "+o+") / math.pi * 180",t.MULTIPLICATIVE]},Y=function(e,r){var n=[],i=e.workspace,s=o.allUsedVarModels$$module$build$src$core$variables(i)||[];for(var a of s)s=a.name,-1===e.getVars().indexOf(s)&&n.push(r.getVariableName(s));for(i=o.allDeveloperVariables$$module$build$src$core$variables(i),a=0;a<i.length;a++)n.push(r.nameDB_.getName(i[a],o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));i=n.length?r.INDENT+"global "+n.join(", ")+"\n":"",n=r.getProcedureName(e.getFieldValue("NAME")),a="",r.STATEMENT_PREFIX&&(a+=r.injectId(r.STATEMENT_PREFIX,e)),r.STATEMENT_SUFFIX&&(a+=r.injectId(r.STATEMENT_SUFFIX,e)),a&&(a=r.prefixLines(a,r.INDENT)),s="",r.INFINITE_LOOP_TRAP&&(s=r.prefixLines(r.injectId(r.INFINITE_LOOP_TRAP,e),r.INDENT));let l=r.statementToCode(e,"STACK"),c=r.valueToCode(e,"RETURN",t.NONE)||"",u="";l&&c&&(u=a),c?c=r.INDENT+"return "+c+"\n":l||(l=r.PASS);const d=[],p=e.getVars();for(let t=0;t<p.length;t++)d[t]=r.getVariableName(p[t]);return i="def "+n+"("+d.join(", ")+"):\n"+i+a+s+l+u+c,i=r.scrub_(e,i),r.definitions_["%"+n]=i,null},W=function(e,r){const o=r.getProcedureName(e.getFieldValue("NAME")),n=[],i=e.getVars();for(let s=0;s<i.length;s++)n[s]=r.valueToCode(e,"ARG"+s,t.NONE)||"None";return[o+"("+n.join(", ")+")",t.FUNCTION_CALL]},z=function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+"\n"},X=function(e,r){let o="if "+(r.valueToCode(e,"CONDITION",t.NONE)||"False")+":\n";return r.STATEMENT_SUFFIX&&(o+=r.prefixLines(r.injectId(r.STATEMENT_SUFFIX,e),r.INDENT)),e.hasReturnValue_?(e=r.valueToCode(e,"VALUE",t.NONE)||"None",o+=r.INDENT+"return "+e+"\n"):o+=r.INDENT+"return\n",o},H=function(e,r){return[r.quote_(e.getFieldValue("TEXT")),t.ATOMIC]},J=function(e,r){return e=r.multiline_quote_(e.getFieldValue("TEXT")),r=-1!==e.indexOf("+")?t.ADDITIVE:t.ATOMIC,[e,r]},K=function(e,r){switch(e.itemCount_){case 0:return["''",t.ATOMIC];case 1:return e=r.valueToCode(e,"ADD0",t.NONE)||"''",ye(e);case 2:var n=r.valueToCode(e,"ADD0",t.NONE)||"''";return e=r.valueToCode(e,"ADD1",t.NONE)||"''",[ye(n)[0]+" + "+ye(e)[0],t.ADDITIVE];default:n=[];for(let o=0;o<e.itemCount_;o++)n[o]=r.valueToCode(e,"ADD"+o,t.NONE)||"''";return["''.join([str("+(e=r.nameDB_.getDistinctName("x",o.NameType$$module$build$src$core$names.VARIABLE))+") for "+e+" in ["+n.join(", ")+"]])",t.FUNCTION_CALL]}},q=function(e,r){const o=r.getVariableName(e.getFieldValue("VAR"));return e=r.valueToCode(e,"TEXT",t.NONE)||"''",o+" = str("+o+") + "+ye(e)[0]+"\n"},Z=function(e,r){return["len("+(r.valueToCode(e,"VALUE",t.NONE)||"''")+")",t.FUNCTION_CALL]},Q=function(e,r){return["not len("+(r.valueToCode(e,"VALUE",t.NONE)||"''")+")",t.LOGICAL_NOT]},ee=function(e,r){const o="FIRST"===e.getFieldValue("END")?"find":"rfind",n=r.valueToCode(e,"FIND",t.NONE)||"''";return r=(r.valueToCode(e,"VALUE",t.MEMBER)||"''")+"."+o+"("+n+")",e.workspace.options.oneBasedIndex?[r+" + 1",t.ADDITIVE]:[r,t.FUNCTION_CALL]},te=function(e,r){const o=e.getFieldValue("WHERE")||"FROM_START",n=r.valueToCode(e,"VALUE","RANDOM"===o?t.NONE:t.MEMBER)||"''";switch(o){case"FIRST":return[n+"[0]",t.MEMBER];case"LAST":return[n+"[-1]",t.MEMBER];case"FROM_START":return[n+"["+(e=r.getAdjustedInt(e,"AT"))+"]",t.MEMBER];case"FROM_END":return[n+"["+(e=r.getAdjustedInt(e,"AT",1,!0))+"]",t.MEMBER];case"RANDOM":return r.definitions_.import_random="import random",[r.provideFunction_("text_random_letter",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(text):\n  x = int(random.random() * len(text))\n  return text[x]\n`)+"("+n+")",t.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},re=function(e,r){var n=e.getFieldValue("WHERE1");const i=e.getFieldValue("WHERE2"),s=r.valueToCode(e,"STRING",t.MEMBER)||"''";switch(n){case"FROM_START":0===(n=r.getAdjustedInt(e,"AT1"))&&(n="");break;case"FROM_END":n=r.getAdjustedInt(e,"AT1",1,!0);break;case"FIRST":n="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(i){case"FROM_START":e=r.getAdjustedInt(e,"AT2",1);break;case"FROM_END":e=r.getAdjustedInt(e,"AT2",0,!0),o.isNumber$$module$build$src$core$utils$string(String(e))?0===e&&(e=""):(r.definitions_.import_sys="import sys",e+=" or sys.maxsize");break;case"LAST":e="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[s+"["+n+" : "+e+"]",t.MEMBER]},oe=function(e,r){const o={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[e.getFieldValue("CASE")];return[(r.valueToCode(e,"TEXT",t.MEMBER)||"''")+o,t.FUNCTION_CALL]},ne=function(e,r){const o={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[e.getFieldValue("MODE")];return[(r.valueToCode(e,"TEXT",t.MEMBER)||"''")+o,t.FUNCTION_CALL]},ie=function(e,r){return"print("+(r.valueToCode(e,"TEXT",t.NONE)||"''")+")\n"},se=function(e,r){var o=r.provideFunction_("text_prompt",`\ndef ${r.FUNCTION_NAME_PLACEHOLDER_}(msg):\n  try:\n    return raw_input(msg)\n  except NameError:\n    return input(msg)\n`);return o=o+"("+(r=e.getField("TEXT")?r.quote_(e.getFieldValue("TEXT")):r.valueToCode(e,"TEXT",t.NONE)||"''")+")","NUMBER"===e.getFieldValue("TYPE")&&(o="float("+o+")"),[o,t.FUNCTION_CALL]},ae=function(e,r){return[(r.valueToCode(e,"TEXT",t.MEMBER)||"''")+".count("+(e=r.valueToCode(e,"SUB",t.NONE)||"''")+")",t.FUNCTION_CALL]},le=function(e,r){return[(r.valueToCode(e,"TEXT",t.MEMBER)||"''")+".replace("+(r.valueToCode(e,"FROM",t.NONE)||"''")+", "+(e=r.valueToCode(e,"TO",t.NONE)||"''")+")",t.MEMBER]},ce=function(e,r){return[(r.valueToCode(e,"TEXT",t.MEMBER)||"''")+"[::-1]",t.MEMBER]},ue=function(e,r){return[r.getVariableName(e.getFieldValue("VAR")),t.ATOMIC]},de=function(e,r){const o=r.valueToCode(e,"VALUE",t.NONE)||"0";return r.getVariableName(e.getFieldValue("VAR"))+" = "+o+"\n"};(r=t||(t={}))[r.ATOMIC=0]="ATOMIC",r[r.COLLECTION=1]="COLLECTION",r[r.STRING_CONVERSION=1]="STRING_CONVERSION",r[r.MEMBER=2.1]="MEMBER",r[r.FUNCTION_CALL=2.2]="FUNCTION_CALL",r[r.EXPONENTIATION=3]="EXPONENTIATION",r[r.UNARY_SIGN=4]="UNARY_SIGN",r[r.BITWISE_NOT=4]="BITWISE_NOT",r[r.MULTIPLICATIVE=5]="MULTIPLICATIVE",r[r.ADDITIVE=6]="ADDITIVE",r[r.BITWISE_SHIFT=7]="BITWISE_SHIFT",r[r.BITWISE_AND=8]="BITWISE_AND",r[r.BITWISE_XOR=9]="BITWISE_XOR",r[r.BITWISE_OR=10]="BITWISE_OR",r[r.RELATIONAL=11]="RELATIONAL",r[r.LOGICAL_NOT=12]="LOGICAL_NOT",r[r.LOGICAL_AND=13]="LOGICAL_AND",r[r.LOGICAL_OR=14]="LOGICAL_OR",r[r.CONDITIONAL=15]="CONDITIONAL",r[r.LAMBDA=16]="LAMBDA",r[r.NONE=99]="NONE";var pe=class extends o.CodeGenerator$$module$build$src$core$generator{constructor(e="Python"){super(e),this.ORDER_OVERRIDES=[[t.FUNCTION_CALL,t.MEMBER],[t.FUNCTION_CALL,t.FUNCTION_CALL],[t.MEMBER,t.MEMBER],[t.MEMBER,t.FUNCTION_CALL],[t.LOGICAL_NOT,t.LOGICAL_NOT],[t.LOGICAL_AND,t.LOGICAL_AND],[t.LOGICAL_OR,t.LOGICAL_OR]],this.PASS="",this.isInitialized=!1;for(const r in t)"string"!=typeof(e=t[r])&&(this["ORDER_"+r]=e);this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip")}init(e){super.init(e),this.PASS=this.INDENT+"pass\n",this.nameDB_?this.nameDB_.reset():this.nameDB_=new o.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const t=[];var r=o.allDeveloperVariables$$module$build$src$core$variables(e);for(let n=0;n<r.length;n++)t.push(this.nameDB_.getName(r[n],o.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE)+" = None");for(e=o.allUsedVarModels$$module$build$src$core$variables(e),r=0;r<e.length;r++)t.push(this.getVariableName(e[r].getId())+" = None");this.definitions_.variables=t.join("\n"),this.isInitialized=!0}finish(e){const t=[],r=[];for(let o in this.definitions_){const e=this.definitions_[o];e.match(/^(from\s+\S+\s+)?import\s+\S+/)?t.push(e):r.push(e)}return e=super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),(t.join("\n")+"\n\n"+r.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+e}scrubNakedValue(e){return e+"\n"}quote_(e){let t="'";return-1!==(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===e.indexOf('"')?t='"':e=e.replace(/'/g,"\\'")),t+e+t}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' + \n")}scrub_(e,t,r=!1){let n="";if(!e.outputConnection||!e.outputConnection.targetConnection){var i=e.getCommentText();i&&(i=o.wrap$$module$build$src$core$utils$string(i,this.COMMENT_WRAP-3),n+=this.prefixLines(i+"\n","# "));for(let t=0;t<e.inputList.length;t++)e.inputList[t].type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(i=e.inputList[t].connection.targetBlock())&&(i=this.allNestedComments(i))&&(n+=this.prefixLines(i,"# "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),n+t+(r=r?"":this.blockToCode(e))}getAdjustedInt(e,r,n=0,i=!1){e.workspace.options.oneBasedIndex&&n--;const s=e.workspace.options.oneBasedIndex?"1":"0";return e=this.valueToCode(e,r,n?t.ADDITIVE:t.NONE)||s,o.isNumber$$module$build$src$core$utils$string(e)?(e=parseInt(e,10)+n,i&&(e=-e)):(e=0<n?"int("+e+" + "+n+")":0>n?"int("+e+" - "+-n+")":"int("+e+")",i&&(e="-"+e)),e}},he={};he.colour_blend=a,he.colour_picker=n,he.colour_random=i,he.colour_rgb=s;var fe={};fe.lists_create_empty=l,fe.lists_create_with=c,fe.lists_getIndex=f,fe.lists_getSublist=m,fe.lists_indexOf=h,fe.lists_isEmpty=p,fe.lists_length=d,fe.lists_repeat=u,fe.lists_reverse=v,fe.lists_setIndex=g,fe.lists_sort=_,fe.lists_split=E;var ge={};ge.controls_if=y,ge.controls_ifelse=y,ge.logic_boolean=R,ge.logic_compare=b,ge.logic_negate=N,ge.logic_null=O,ge.logic_operation=T,ge.logic_ternary=w;var me={};me.controls_flow_statements=I,me.controls_for=C,me.controls_forEach=S,me.controls_repeat=x,me.controls_repeat_ext=x,me.controls_whileUntil=P;var _e={};_e.math_arithmetic=A,_e.math_atan2=G,_e.math_change=D,_e.math_constant=L,_e.math_constrain=j,_e.math_modulo=B,_e.math_number=k,_e.math_number_property=F,_e.math_on_list=U,_e.math_random_float=$,_e.math_random_int=V,_e.math_round=M,_e.math_single=M,_e.math_trig=M;var Ee={};Ee.procedures_callnoreturn=z,Ee.procedures_callreturn=W,Ee.procedures_defnoreturn=Y,Ee.procedures_defreturn=Y,Ee.procedures_ifreturn=X;var ve=/^\s*'([^']|\\')*'\s*$/,ye=function(e){return ve.test(e)?[e,t.ATOMIC]:["str("+e+")",t.FUNCTION_CALL]},be={};be.text=H,be.text_append=q,be.text_changeCase=oe,be.text_charAt=te,be.text_count=ae,be.text_getSubstring=re,be.text_indexOf=ee,be.text_isEmpty=Q,be.text_join=K,be.text_length=Z,be.text_multiline=J,be.text_print=ie,be.text_prompt=se,be.text_prompt_ext=se,be.text_replace=le,be.text_reverse=ce,be.text_trim=ne;var Te={};Te.variables_get=ue,Te.variables_set=de;var Ne={};Ne.variables_get_dynamic=ue,Ne.variables_set_dynamic=de;var Re=new pe;Re.addReservedWords("math,random,Number");var Oe=Object.assign({},he,fe,ge,me,_e,Ee,be,Te,Ne);for(const xe in Oe)Re.forBlock[xe]=Oe[xe];var we={};return we.Order=t,we.PythonGenerator=pe,we.pythonGenerator=Re,we.__namespace__=o,we}(N())}(Ue)),Ue.exports}!function(e,t){e.exports=Be()}(De);var je=De.exports;const Ve=()=>[{type:"light_color",message0:`%1 ${E.Msg.headlight_color}: %2 %3`,args0:[{type:"field_image",src:new URL("/imageBlockly/lightbulb-solid.png",o.meta.url).href,width:12,height:15},{type:"field_colour",name:"lightColor",colour:"#ff0000",colourOptions:["#ff0000","#ffff00","#5555ff","#00ff00","#8800ff","#ffffff"],colourTitles:["红","黄","蓝","绿","紫","白"],columns:3},{type:"input_dummy"}],colour:"#3C8CE6",previousStatement:null,nextStatement:null,code:function(e){return`setColor('${e.getFieldValue("lightColor")}');`}},{type:"light_close",message0:E.Msg.restore_default_headlight,colour:"#3C8CE6",previousStatement:null,nextStatement:null,code:function(){return"setColor('0xffffff');"}}],$e=Ve,Ge=()=>{const e=Ve().map((e=>({kind:"block",type:e.type})));return e.push({kind:"label",text:"-","web-class":"custom-label-style opacity"}),e},Ye=()=>[{type:"pose_command",message0:E.Msg.pose_cmd,message1:E.Msg.pose_cmd1,message2:E.Msg.pose_cmd2,args0:[{type:"field_image",src:new URL("/imageBlockly/clock-solid-long.png",o.meta.url).href,width:90,height:15},{type:"field_slider",name:"seconds",min:.5,max:3,precision:.5,value:.5}],args1:[{type:"field_slider",name:"roll",min:-18,max:18,precision:1},{type:"field_slider",name:"pitch",min:-18,max:18,precision:1}],args2:[{type:"field_slider",name:"yaw",min:-18,max:18,precision:1},{type:"field_slider",name:"height",min:-.1,max:.03,value:0,precision:.01}],inputsInLine:!0,previousStatement:null,nextStatement:null,colour:"#675BF4",tooltip:"",helpUrl:"",code:function(e){const t=e.getFieldValue("roll"),r=e.getFieldValue("pitch"),o=e.getFieldValue("yaw"),n=e.getFieldValue("height"),i=e.getFieldValue("seconds"),s=Math.PI/180;return`pose('${t*s}', '${r*s}', '${o*s}', '${n}', '${i}');`}},{type:"pose_dynamic_command",message0:E.Msg.pose_dynamic_cmd,message1:E.Msg.pose_dynamic_cmd1,message2:E.Msg.pose_dynamic_cmd2,message3:E.Msg.pose_dynamic_cmd3,message4:E.Msg.pose_dynamic_cmd4,args0:[{type:"field_image",src:new URL("/imageBlockly/clock-solid-long.png",o.meta.url).href,width:90,height:15},{type:"field_slider",name:"seconds",min:.4,max:4,precision:.2,value:.4}],args1:[{type:"field_slider",name:"roll",min:-18,max:18,precision:1},{type:"field_dropdown",name:"roll_method",options:[[E.Msg.pose_dynamic_linear,"linear"],[E.Msg.pose_dynamic_ease,"ease"],[E.Msg.pose_dynamic_easein,"ease-in"],[E.Msg.pose_dynamic_easeout,"ease-out"],[E.Msg.pose_dynamic_step,"step"]]}],args2:[{type:"field_slider",name:"pitch",min:-18,max:18,precision:1},{type:"field_dropdown",name:"pitch_method",options:[[E.Msg.pose_dynamic_linear,"linear"],[E.Msg.pose_dynamic_ease,"ease"],[E.Msg.pose_dynamic_easein,"ease-in"],[E.Msg.pose_dynamic_easeout,"ease-out"],[E.Msg.pose_dynamic_step,"step"]]}],args3:[{type:"field_slider",name:"yaw",min:-18,max:18,precision:1},{type:"field_dropdown",name:"yaw_method",options:[[E.Msg.pose_dynamic_linear,"linear"],[E.Msg.pose_dynamic_ease,"ease"],[E.Msg.pose_dynamic_easein,"ease-in"],[E.Msg.pose_dynamic_easeout,"ease-out"],[E.Msg.pose_dynamic_step,"step"]]}],args4:[{type:"field_slider",name:"height",min:-.1,max:.03,value:0,precision:.01},{type:"field_dropdown",name:"height_method",options:[[E.Msg.pose_dynamic_linear,"linear"],[E.Msg.pose_dynamic_ease,"ease"],[E.Msg.pose_dynamic_easein,"ease-in"],[E.Msg.pose_dynamic_easeout,"ease-out"],[E.Msg.pose_dynamic_step,"step"]]}],inputsInLine:!0,previousStatement:null,nextStatement:null,colour:"#675BF4",tooltip:"",helpUrl:"",code:function(e){const t=e.getFieldValue("roll"),r=e.getFieldValue("roll_method"),o=e.getFieldValue("pitch"),n=e.getFieldValue("pitch_method"),i=e.getFieldValue("yaw"),s=e.getFieldValue("yaw_method"),a=e.getFieldValue("height"),l=e.getFieldValue("height_method"),c=e.getFieldValue("seconds"),u=Math.PI/180;return`poseDynamic('${t*u}','${r}', '${o*u}', '${n}', \n      '${i*u}', '${s}', '${a}','${l}', '${c}');`}},{type:"stretch_command",message0:E.Msg.stretch,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Stretch}, '');`}},{type:"shakeHands_command",message0:E.Msg.shakeHands,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Hello}, '');`}},{type:"jumpForward_command",message0:E.Msg.jumpForward,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.FrontJump}, '');`}},{type:"dance1_command",message0:E.Msg.dance1,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Dance1}, '');`}},{type:"dance2_command",message0:E.Msg.dance2,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Dance2}, '');`}},{type:"wallow_command",message0:E.Msg.wallow,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Wallow}, '');`}},{type:"frontPounce_command",message0:E.Msg.frontPounce,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.FrontPounce}, '');`}},{type:"happy_command",message0:E.Msg.showHeart,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.FingerHeart}, '');`}},{type:"scrape_command",message0:E.Msg.newYear,colour:"#675BF4",previousStatement:null,nextStatement:null,code:function(){return`processAction('${O.SPORT_MOD}', ${w.Scrape}, '');`}}],We=Ye,ze=()=>[{type:"move_command",message0:E.Msg.move_cmd,args0:[{type:"field_dropdown",name:"direction",options:[[E.Msg.forward,"front"],[E.Msg.back,"back"],[E.Msg.left,"left"],[E.Msg.right,"right"]]},{type:"field_slider",name:"value",min:0,max:3,precision:.1}],inputsInLine:!0,previousStatement:null,nextStatement:null,colour:"#F2754D",tooltip:"",helpUrl:"",code:function(e){const t=e.getFieldValue("direction"),r=e.getFieldValue("value");console.log(t,r);const o={x:0,y:0,yawAngle:0};"front"===t?o.x=r:"back"===t?o.x=-r:o.y="left"===t?r:-r;return`move('${o.x}', '${o.y}', '${o.yawAngle}');`}},{type:"move_deg_command",message0:E.Msg.move_cmd2,args0:[{type:"field_angle",name:"angle",value:0,mode:"compass"},{type:"field_slider",name:"value",min:0,max:3,precision:.1}],inputsInLine:!0,previousStatement:null,nextStatement:null,colour:"#F2754D",tooltip:"",helpUrl:"",code:function(e){const t=e.getFieldValue("angle")*(Math.PI/180),r=e.getFieldValue("value");return`move('${r*Math.cos(t)}', '${-r*Math.sin(t)}', '${0}');`}},{type:"rotate_deg_command",message0:E.Msg.rotate_cmd,args0:[{type:"field_angle",name:"angle",value:0,mode:"compass"}],inputsInLine:!0,previousStatement:null,nextStatement:null,colour:"#F2754D",tooltip:"",helpUrl:"",code:function(e){const t=e.getFieldValue("angle"),r={x:0,yawAngle:0};r.yawAngle=-t*(Math.PI/180);return`move('${r.x}', '${r.x}', '${r.yawAngle}');`}},{type:"step_on_command",message0:E.Msg.step_cmd,colour:"#F2754D",previousStatement:null,nextStatement:null,args0:[{type:"field_slider",name:"value",min:0,max:10,precision:1}],code:function(e){return`stepSeconds('${e.getFieldValue("value")}');`}}],Xe=ze,He=()=>{const e=ze().map((e=>({kind:"block",type:e.type})));return e.push({kind:"label",text:"-","web-class":"custom-label-style opacity"}),e},Je=()=>[{type:"wait_seconds",message0:E.Msg.waiting,args0:[{type:"field_slider",name:"SECONDS",min:0,max:5,precision:.1}],previousStatement:null,nextStatement:null,colour:"#5ba55b",code:function(e){return"waitForSeconds("+Number(e.getFieldValue("SECONDS"))+");\n"}}],Ke=Je,qe=()=>{const e=Je().map((e=>({kind:"block",type:e.type})));return e.unshift({kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"type_num_slider",fields:{NUM:1}}}}}),e.push({kind:"label",text:"-","web-class":"custom-label-style opacity"}),e},Ze=()=>[{type:"mode_recover_stand",message0:E.Msg.resume_standing,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`sendCmd('${O.SPORT_MOD}', ${w.RecoveryStand}, '');`}},{type:"mode_damp_command",message0:E.Msg.damping,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.Damp}, '',7);`}},{type:"mode_run_command",message0:E.Msg.runMode,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.SwitchGait}, '{"data":2}',0);`}},{type:"mode_walk_command",message0:E.Msg.walkMode,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.SwitchGait}, '{"data":1}',0);`}},{type:"mode_lock_command",message0:E.Msg.lock_joints,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.StandUp}, '',6);`}},{type:"mode_lock_down",message0:E.Msg.lock_down,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.StandDown}, '',6);`}},{type:"mode_sit_command",message0:E.Msg.sit_down,colour:"#EB5050",previousStatement:null,nextStatement:null,code:function(){return`processMode('${O.SPORT_MOD}', ${w.Sit}, '',10);`}}],Qe=Ze,et=()=>[{type:"photo_command",message0:`%1 ${E.Msg.photo}`,args0:[{type:"field_image",src:new URL("/imageBlockly/photo.png",o.meta.url).href,width:15,height:15}],colour:"#3CCD9D",previousStatement:null,nextStatement:null,code:function(){return`sendCmd('${O.FRONT_PHOTO_REQ}', 1001, '{}');`}},{type:"video_command",message0:`%1 ${E.Msg.video} %2 ${E.Msg.seconds}`,args0:[{type:"field_image",src:new URL("/imageBlockly/video.png",o.meta.url).href,width:15,height:15},{type:"field_slider",name:"value",value:3,min:3,max:15}],colour:"#3CCD9D",previousStatement:null,nextStatement:null,code:function(e){const t=e.getFieldValue("value");return`sendCmd('${O.FRONT_PHOTO_REQ}', 9999, '${JSON.stringify({time:t})}');`}}],tt=et;var rt={exports:{}};/*! For license information please see index.js.LICENSE.txt */!function(e,t){!function(t,r){e.exports=r(R)}(0,(e=>(()=>{var t={573:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.r(n),o.d(n,{ObservableParameterModel:()=>a,ObservableProcedureModel:()=>g,ProcedureBase:()=>t,ProcedureChangeReturn:()=>l,ProcedureCreate:()=>c,ProcedureDelete:()=>u,ProcedureParameterBase:()=>r,ProcedureParameterCreate:()=>p,ProcedureParameterDelete:()=>h,ProcedureParameterRename:()=>i,ProcedureRename:()=>f,blocks:()=>m,isProcedureBlock:()=>O,registerProcedureSerializer:()=>x,triggerProceduresUpdate:()=>s,unregisterProcedureBlocks:()=>w});var e=o(573);class t extends e.Events.Abstract{constructor(e,r){super(),this.procedure=r,this.type=t.TYPE,this.isBlank=!1,this.workspaceId=e.id}toJson(){const e=super.toJson();return e.procedureId=this.procedure.getId(),e}}t.TYPE="procedure_base";class r extends t{constructor(e,t,o){super(e,t),this.parameter=o,this.type=r.TYPE,this.recordUndo=!1}static findMatchingParameter(e,t,r){const o=e.getProcedureMap().get(t);if(!o)return{procedure:void 0,parameter:void 0};const n=o.getParameters().find((e=>e.getId()===r));return n?{procedure:o,parameter:n}:{procedure:o,parameter:void 0}}toJson(){const e=super.toJson();return e.parameterId=this.parameter.getId(),e}}r.TYPE="procedure_parameter_base";class i extends r{constructor(e,t,r,o,n,s){super(e,t,r),this.oldName=o,this.type=i.TYPE,this.newName=null!=n?n:r.getName(),this.newVarId=null!=s?s:r.getVariableModel().getId()}run(e){const{parameter:t}=r.findMatchingParameter(this.getEventWorkspace_(),this.procedure.getId(),this.parameter.getId());if(e){if(t.getName()!==this.oldName)return;t.setName(this.newName,this.newVarId)}else{if(t.getName()!==this.newName)return;t.setName(this.oldName)}}toJson(){const e=super.toJson();return e.newName=this.newName,e.newVarId=this.newVarId,e.oldName=this.oldName,e}static fromJson(e,t){const{procedure:o,parameter:n}=r.findMatchingParameter(t,e.procedureId,e.parameterId);if(!n)throw new Error("Cannot delete a non existant parameter");return new i(t,o,n,e.oldName,e.newName,e.newVarId)}}function s(t){if(!t.isClearing)for(const r of t.getAllBlocks(!1))e.procedures.isProcedureBlock(r)&&r.doProcedureUpdate()}i.TYPE="procedure_parameter_rename",e.registry.register(e.registry.Type.EVENT,i.TYPE,i);class a{constructor(t,r,o,n){this.workspace=t,this.shouldFireEvents=!1,this.procedureModel=null,this.id=null!=o?o:e.utils.idGenerator.genUid(),this.variable=this.createBackingVariable(r,n)}setName(t,r){var o;if(t===this.variable.name)return this;const n=this.variable.name;return this.variable=null!==(o=this.workspace.getVariable(t))&&void 0!==o?o:this.workspace.createVariable(t,"",r),s(this.workspace),this.shouldFireEvents&&e.Events.fire(new i(this.workspace,this.procedureModel,this,n)),this}createBackingVariable(e,t){var r;return this.variable=null!==(r=this.workspace.getVariable(e))&&void 0!==r?r:this.workspace.createVariable(e,"",t),this.variable}setTypes(e){throw new Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(e){return this.procedureModel=e,this}}class l extends t{constructor(e,t,r){super(e,t),this.oldTypes=r,this.type=l.TYPE,this.newTypes=t.getReturnTypes()}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.procedure.getId());if(!t)throw new Error("Cannot change the type of a procedure that does not exist in the procedure map");e?t.setReturnTypes(this.newTypes):t.setReturnTypes(this.oldTypes)}toJson(){const e=super.toJson();return e.oldTypes=this.oldTypes,e}static fromJson(e,t){const r=t.getProcedureMap().get(e.procedureId);if(!r)throw new Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new l(t,r,e.oldTypes)}}l.TYPE="procedure_change",e.registry.register(e.registry.Type.EVENT,l.TYPE,l);class c extends t{constructor(){super(...arguments),this.type=c.TYPE}run(e){const t=this.getEventWorkspace_().getProcedureMap();if(e){if(t.get(this.procedure.getId()))return;t.add(this.procedure)}else{if(!t.get(this.procedure.getId()))return;t.delete(this.procedure.getId())}}toJson(){const t=super.toJson();return t.procedure=e.serialization.procedures.saveProcedure(this.procedure),t}static fromJson(t,r){return new c(r,e.serialization.procedures.loadProcedure(g,a,t.procedure,r))}}c.TYPE="procedure_create",e.registry.register(e.registry.Type.EVENT,c.TYPE,c);class u extends t{constructor(){super(...arguments),this.type=u.TYPE}run(e){const t=this.getEventWorkspace_().getProcedureMap();if(e){if(!t.get(this.procedure.getId()))return;t.delete(this.procedure.getId())}else{if(t.get(this.procedure.getId()))return;t.add(this.procedure)}}toJson(){return super.toJson()}static fromJson(e,t){const r=t.getProcedureMap().get(e.procedureId);if(!r)throw new Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new u(t,r)}}u.TYPE="procedure_delete",e.registry.register(e.registry.Type.EVENT,u.TYPE,u);class d extends t{constructor(e,t,r){super(e,t),this.type=d.TYPE,void 0===r?(this.oldState=!t.getEnabled(),this.newState=t.getEnabled()):(this.oldState=!r,this.newState=r)}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.procedure.getId());if(!t)throw new Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");e?t.setEnabled(this.newState):t.setEnabled(this.oldState)}toJson(){const e=super.toJson();return e.newState=this.newState,e}static fromJson(e,t){const r=t.getProcedureMap().get(e.procedureId);if(!r)throw new Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new d(t,r,e.newState)}}d.TYPE="procedure_enable",e.registry.register(e.registry.Type.EVENT,d.TYPE,d);class p extends r{constructor(e,t,r,o){super(e,t,r),this.index=o,this.type=p.TYPE}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.procedure.getId());if(!t)throw new Error("Cannot add a parameter to a procedure that does not exist in the procedure map");e?t.insertParameter(this.parameter,this.index):t.deleteParameter(this.index)}toJson(){const e=super.toJson();return e.name=this.parameter.getName(),e.id=this.parameter.getId(),e.varId=this.parameter.getVariableModel().getId(),e.index=this.index,e}static fromJson(e,t){const r=t.getProcedureMap().get(e.procedureId);if(!r)throw new Error("Cannot deserialize parameter create event because the target procedure does not exist");return new p(t,r,new a(t,e.name,e.id,e.varId),e.index)}}p.TYPE="procedure_parameter_create",e.registry.register(e.registry.Type.EVENT,p.TYPE,p);class h extends r{constructor(e,t,r,o){super(e,t,r),this.index=o,this.type=h.TYPE}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.procedure.getId());if(!t)throw new Error("Cannot add a parameter to a procedure that does not exist in the procedure map");e?t.deleteParameter(this.index):t.insertParameter(this.parameter,this.index)}toJson(){const e=super.toJson();return e.index=this.index,e}static fromJson(e,t){const{procedure:o,parameter:n}=r.findMatchingParameter(t,e.procedureId,e.parameterId);if(!n)throw new Error("Cannot delete a non existant parameter");return new h(t,o,n,e.index)}}h.TYPE="procedure_parameter_delete",e.registry.register(e.registry.Type.EVENT,h.TYPE,h);class f extends t{constructor(e,t,r,o){super(e,t),this.oldName=r,this.type=f.TYPE,this.newName=null!=o?o:t.getName()}run(e){const t=this.getEventWorkspace_().getProcedureMap().get(this.procedure.getId());if(!t)throw new Error("Cannot change the type of a procedure that does not exist in the procedure map");if(e){if(t.getName()!==this.oldName)return;t.setName(this.newName)}else{if(t.getName()!==this.newName)return;t.setName(this.oldName)}}toJson(){const e=super.toJson();return e.newName=this.newName,e.oldName=this.oldName,e}static fromJson(e,t){const r=t.getProcedureMap().get(e.procedureId);if(!r)throw new Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new f(t,r,e.oldName,e.newName)}}f.TYPE="procedure_rename",e.registry.register(e.registry.Type.EVENT,f.TYPE,f);class g{constructor(t,r,o){this.workspace=t,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.shouldTriggerUpdates=!0,this.id=null!=o?o:e.utils.idGenerator.genUid(),this.name=r}setName(t){if(t===this.name)return this;const r=this.name;return this.name=t,this.shouldTriggerUpdates&&s(this.workspace),this.shouldFireEvents&&e.Events.fire(new f(this.workspace,this,r)),this}insertParameter(t,r){return this.parameters[r]&&this.parameters[r].getId()===t.getId()||(this.parameters.splice(r,0,t),t.setProcedureModel(this),e.isObservable(t)&&(this.shouldFireEvents?t.startPublishing():t.stopPublishing()),this.shouldTriggerUpdates&&s(this.workspace),this.shouldFireEvents&&e.Events.fire(new p(this.workspace,this,t,r))),this}deleteParameter(t){if(!this.parameters[t])return this;const r=this.parameters[t];return this.parameters.splice(t,1),this.shouldTriggerUpdates&&s(this.workspace),e.isObservable(r)&&r.stopPublishing(),this.shouldFireEvents&&e.Events.fire(new h(this.workspace,this,r,t)),this}setReturnTypes(t){if(t&&t.length)throw new Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!t==!!this.returnTypes)return this;const r=this.returnTypes;return this.returnTypes=t,this.shouldTriggerUpdates&&s(this.workspace),this.shouldFireEvents&&e.Events.fire(new l(this.workspace,this,r)),this}setEnabled(t){return t===this.enabled||(this.enabled=t,this.shouldTriggerUpdates&&s(this.workspace),this.shouldFireEvents&&e.Events.fire(new d(this.workspace,this))),this}startBulkUpdate(){this.shouldTriggerUpdates=!1}endBulkUpdate(){this.shouldTriggerUpdates=!0,s(this.workspace)}getId(){return this.id}getName(){return this.name}getParameter(e){return this.parameters[e]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0,e.Events.fire(new c(this.workspace,this));for(const t of this.parameters)e.isObservable(t)&&t.startPublishing()}stopPublishing(){s(this.workspace),e.Events.fire(new u(this.workspace,this)),this.shouldFireEvents=!1;for(const t of this.parameters)e.isObservable(t)&&t.stopPublishing()}}const m=e.common.createBlockDefinitionsFromJsonArray([{type:"procedures_defnoreturn",message0:"%{BKY_PROCEDURES_DEFNORETURN_TITLE} %1 %2 %3",message1:"%{BKY_PROCEDURES_DEFNORETURN_DO} %1",args0:[{type:"field_input",name:"NAME",text:"",spellcheck:!1},{type:"field_label",name:"PARAMS",text:""},{type:"input_dummy",name:"TOP"}],args1:[{type:"input_statement",name:"STACK"}],style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_DEFNORETURN_HELPURL}",tooltip:"%{BKY_PROCEDURES_DEFNORETURN_TOOLTIP}",extensions:["procedure_def_get_def_mixin","procedure_def_var_mixin","procedure_def_update_shape_mixin","procedure_def_context_menu_mixin","procedure_def_onchange_mixin","procedure_def_validator_helper","procedure_defnoreturn_get_caller_block_mixin","procedure_defnoreturn_set_comment_helper","procedure_def_set_no_return_helper"],mutator:"procedure_def_mutator"},{type:"procedures_callnoreturn",message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:"%{BKY_UNNAMED_KEY}"},{type:"input_dummy",name:"TOPROW"}],nextStatement:null,previousStatement:null,style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_CALLNORETURN_HELPURL}",extensions:["procedure_caller_get_def_mixin","procedure_caller_var_mixin","procedure_caller_update_shape_mixin","procedure_caller_context_menu_mixin","procedure_caller_onchange_mixin","procedure_callernoreturn_get_def_block_mixin"],mutator:"procedure_caller_mutator"},{type:"procedures_defreturn",message0:"%{BKY_PROCEDURES_DEFRETURN_TITLE} %1 %2 %3",message1:"%{BKY_PROCEDURES_DEFRETURN_DO} %1",message2:"%{BKY_PROCEDURES_DEFRETURN_RETURN} %1",args0:[{type:"field_input",name:"NAME",text:"",spellcheck:!1},{type:"field_label",name:"PARAMS",text:""},{type:"input_dummy",name:"TOP"}],args1:[{type:"input_statement",name:"STACK"}],args2:[{type:"input_value",align:"right",name:"RETURN"}],style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_DEFRETURN_HELPURL}",tooltip:"%{BKY_PROCEDURES_DEFRETURN_TOOLTIP}",extensions:["procedure_def_get_def_mixin","procedure_def_var_mixin","procedure_def_update_shape_mixin","procedure_def_context_menu_mixin","procedure_def_onchange_mixin","procedure_def_validator_helper","procedure_defreturn_get_caller_block_mixin","procedure_defreturn_set_comment_helper","procedure_def_set_return_helper"],mutator:"procedure_def_mutator"},{type:"procedures_callreturn",message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:"%{BKY_UNNAMED_KEY}"},{type:"input_dummy",name:"TOPROW"}],output:null,style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_CALLRETURN_HELPURL}",extensions:["procedure_caller_get_def_mixin","procedure_caller_var_mixin","procedure_caller_update_shape_mixin","procedure_caller_context_menu_mixin","procedure_caller_onchange_mixin","procedure_callerreturn_get_def_block_mixin"],mutator:"procedure_caller_mutator"}]);e.Extensions.register("procedure_def_get_def_mixin",(function(){const t={model_:null,getProcedureModel(){return this.model_},isProcedureDef:()=>!0,getVars:function(){return this.getProcedureModel().getParameters().map((e=>e.getVariableModel().name))},getVarModels:function(){return this.getProcedureModel().getParameters().map((e=>e.getVariableModel()))},destroy:function(){this.workspace.getProcedureMap().delete(this.getProcedureModel().getId())}};t.model_=new g(this.workspace,e.Procedures.findLegalName(this.getFieldValue("NAME"),this)),e.Events.disable(),this.workspace.getProcedureMap().add(t.getProcedureModel()),e.Events.enable(),this.mixin(t,!0)})),e.Extensions.register("procedure_def_var_mixin",(function(){this.mixin({renameVarById:function(e,t){const r=this.workspace.getVariableById(e),o=this.getProcedureModel(),n=o.getParameters().findIndex((e=>e.getVariableModel()===r));if(-1===n)return;const i=this.workspace.getVariableById(t);o.getParameter(n).setName(i.name)},updateVarName:function(e){this.getProcedureModel().getParameters().some((t=>t.getVariableModel()===e))&&this.doProcedureUpdate()}},!0)}));const _={doProcedureUpdate:function(){this.setFieldValue(this.getProcedureModel().getName(),"NAME"),this.setEnabled(this.getProcedureModel().getEnabled()),this.updateParameters_(),this.updateMutator_()},updateParameters_:function(){const t=this.getProcedureModel().getParameters().map((e=>e.getName())),r=t.length?`${e.Msg.PROCEDURES_BEFORE_PARAMS} ${t.join(", ")}`:"";e.Events.disable();try{this.setFieldValue(r,"PARAMS")}finally{e.Events.enable()}},updateMutator_:function(){const t=this.getIcon(e.icons.MutatorIcon.TYPE);if(!(null==t?void 0:t.bubbleIsVisible()))return;const r=this.mutator.getWorkspace();for(const e of this.getProcedureModel().getParameters()){const t=r.getBlockById(e.getId());t&&t.getFieldValue("NAME")!==e.getName()&&t.setFieldValue(e.getName(),"NAME")}},setStatements_:function(t){var r;if(this.hasStatements_!==t){if(t)this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN"),null===(r=this.statementConnection_)||void 0===r||r.call(this,this,"STACK"),this.statementConnection_=null;else{const e=this.getInput("STACK").connection;if(this.statementConnection_=e.targetConnection,this.statementConnection_){const t=e.targetBlock();t.unplug(),t.bumpNeighbours()}this.removeInput("STACK",!0)}this.hasStatements_=t}}};e.Extensions.registerMixin("procedure_def_update_shape_mixin",_),e.Extensions.register("procedure_def_validator_helper",(function(){const t=this.getField("NAME");t.setValue(e.Procedures.findLegalName("",this)),t.setValidator(e.Procedures.rename)}));const E={hasStatements_:!0,mutationToDom:function(){const t=e.utils.xml.createElement("mutation"),r=this.getProcedureModel().getParameters();for(let o=0;o<r.length;o++){const n=e.utils.xml.createElement("arg"),i=r[o].getVariableModel();n.setAttribute("name",i.name),n.setAttribute("varid",i.getId()),t.appendChild(n)}return this.hasStatements_||t.setAttribute("statements","false"),t},domToMutation:function(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if("arg"!==r.nodeName.toLowerCase())continue;const o=r.getAttribute("varid");this.getProcedureModel().insertParameter(new a(this.workspace,r.getAttribute("name"),void 0,o),t)}this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(e){const t=Object.create(null);if(t.procedureId=this.getProcedureModel().getId(),e){t.fullSerialization=!0;const e=this.getProcedureModel().getParameters();e.length&&(t.params=e.map((e=>({name:e.getName(),id:e.getVariableModel().getId(),paramId:e.getId()}))))}return this.hasStatements_||(t.hasStatements=!1),t},loadExtraState:function(e){var t;const r=this.workspace.getProcedureMap(),o=e.procedureId;r.has(o)&&!e.fullSerialization&&(r.has(this.model_.getId())&&r.delete(this.model_.getId()),this.model_=r.get(o));const n=this.getProcedureModel(),i=null!==(t=e.params)&&void 0!==t?t:[],s=new Set(i.map((e=>e.id))),l=n.getParameters();if(e.fullSerialization)for(let a=l.length-1;a>=0;a--)s.has(l[a].getId)||n.deleteParameter(a);for(let c=0;c<i.length;c++){const{name:t,id:r,paramId:o}=e.params[c];this.getProcedureModel().insertParameter(new a(this.workspace,t,o,r),c)}this.doProcedureUpdate(),this.setStatements_(!1!==e.hasStatements)},decompose:function(t){const r={type:"procedures_mutatorcontainer",inputs:{STACK:{}}};let o=r.inputs.STACK;for(const e of this.getProcedureModel().getParameters())o.block={type:"procedures_mutatorarg",id:e.getId(),fields:{NAME:e.getName()},next:{}},o=o.block.next;const n=e.serialization.blocks.append(r,t,{recordUndo:!1});return"procedures_defreturn"===this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),n},compose:function(e){this.deleteParamsFromModel_(e),this.renameParamsInModel_(e),this.addParamsToModel_(e);const t=e.getFieldValue("STATEMENTS");null!==t&&this.setStatements_("TRUE"===t)},deleteParamsFromModel_:function(e){const t=new Set(e.getDescendants().map((e=>e.id))),r=this.getProcedureModel();for(let o=r.getParameters().length-1;o>=0;o--)t.has(r.getParameter(o).getId())||r.deleteParameter(o)},renameParamsInModel_:function(e){const t=this.getProcedureModel();let r=0,o=e.getInputTargetBlock("STACK");for(;o&&!o.isInsertionMarker();){const e=t.getParameter(r);e&&e.getId()===o.id&&e.getName()!==o.getFieldValue("NAME")&&e.setName(o.getFieldValue("NAME")),o=o.nextConnection&&o.nextConnection.targetBlock(),r++}},addParamsToModel_:function(e){const t=this.getProcedureModel();let r=0,o=e.getInputTargetBlock("STACK");for(;o&&!o.isInsertionMarker();)t.getParameter(r)&&t.getParameter(r).getId()===o.id||t.insertParameter(new a(this.workspace,o.getFieldValue("NAME"),o.id),r),o=o.nextConnection&&o.nextConnection.targetBlock(),r++}};e.Extensions.registerMutator("procedure_def_mutator",E,void 0,["procedures_mutatorarg"]);const v={customContextMenu:function(t){if(this.isInFlyout)return;const r=e.utils.xml.createElement("mutation");r.setAttribute("name",this.getFieldValue("NAME"));const o=this.getProcedureModel().getParameters();for(const i of o){const t=e.utils.xml.createElement("arg");t.setAttribute("name",i.getName()),r.appendChild(t)}const n=e.utils.xml.createElement("block");if(n.setAttribute("type",this.callType_),n.appendChild(r),t.push({enabled:!0,text:e.Msg.PROCEDURES_CREATE_DO.replace("%1",this.getFieldValue("NAME")),callback:e.ContextMenu.callbackFactory(this,n)}),!this.isCollapsed())for(const i of o){const r=i.getVariableModel(),o=e.Variables.generateVariableFieldDom(r),n=e.utils.xml.createElement("block");n.setAttribute("type","variables_get"),n.appendChild(o),t.push({enabled:!0,text:e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",r.name),callback:e.ContextMenu.callbackFactory(this,n)})}}};e.Extensions.registerMixin("procedure_def_context_menu_mixin",v);const y={onchange:function(t){t.type===e.Events.BLOCK_CREATE&&t.blockId===this.id&&e.Events.fire(new c(this.workspace,this.getProcedureModel())),t.type===e.Events.BLOCK_CHANGE&&t.blockId===this.id&&"disabled"===t.element&&this.getProcedureModel().setEnabled(!t.newValue)}};e.Extensions.registerMixin("procedure_def_onchange_mixin",y),e.Extensions.register("procedure_defnoreturn_set_comment_helper",(function(){(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT)})),e.Extensions.register("procedure_defreturn_set_comment_helper",(function(){(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT)})),e.Extensions.registerMixin("procedure_defnoreturn_get_caller_block_mixin",{callType_:"procedures_callnoreturn"}),e.Extensions.registerMixin("procedure_defreturn_get_caller_block_mixin",{callType_:"procedures_callreturn"}),e.Extensions.register("procedure_def_set_no_return_helper",(function(){this.getProcedureModel().setReturnTypes(null)})),e.Extensions.register("procedure_def_set_return_helper",(function(){this.getProcedureModel().setReturnTypes([])})),e.Extensions.register("procedure_caller_get_def_mixin",(function(){const e={model_:null,prevParams_:[],argsMap_:new Map,getProcedureModel(){return this.model_},findProcedureModel_(e,t=[]){const r=this.getTargetWorkspace_().getProcedureMap().getProcedures().find((t=>t.getName()===e));if(!r)return null;const o=r.getReturnTypes();return(this.hasReturn_?o:!o)&&r.getParameters().every(((e,r)=>e.getName()===t[r]))?r:null},getTargetWorkspace_(){return this.workspace.isFlyout?this.workspace.targetWorkspace:this.workspace},isProcedureDef:()=>!1,getVars:function(){return this.getProcedureModel().getParameters().map((e=>e.getVariableModel().name))},getVarModels:function(){return this.getProcedureModel().getParameters().map((e=>e.getVariableModel()))}};this.mixin(e,!0)})),e.Extensions.register("procedure_caller_var_mixin",(function(){this.mixin({updateVarName:function(e){this.getProcedureModel().getParameters().some((t=>t.getVariableModel()===e))&&this.doProcedureUpdate()}},!0)}));const b={previousEnabledState_:!0,paramsFromSerializedState_:[],mutationToDom:function(){const t=e.utils.xml.createElement("mutation"),r=this.getProcedureModel();if(!r)return t;t.setAttribute("name",r.getName());for(const o of r.getParameters()){const r=e.utils.xml.createElement("arg");r.setAttribute("name",o.getName()),t.appendChild(r)}return t},domToMutation:function(e){const t=e.getAttribute("name"),r=[];for(const o of e.childNodes)"arg"===o.nodeName.toLowerCase()&&r.push(o.getAttribute("name"));this.deserialize_(t,r)},saveExtraState:function(){const e=Object.create(null),t=this.getProcedureModel();return t?(e.name=t.getName(),t.getParameters().length&&(e.params=t.getParameters().map((e=>e.getName()))),e):(e.name=this.getFieldValue("NAME"),e.params=this.paramsFromSerializedState_,e)},loadExtraState:function(e){this.deserialize_(e.name,e.params||[])},deserialize_:function(e,t){this.setFieldValue(e,"NAME"),this.model_||(this.model_=this.findProcedureModel_(e,t)),this.getProcedureModel()?this.initBlockWithProcedureModel_():this.createArgInputs_(t),this.paramsFromSerializedState_=t}};e.Extensions.registerMutator("procedure_caller_mutator",b);const T={initBlockWithProcedureModel_(){this.prevParams_=[...this.getProcedureModel().getParameters()],this.doProcedureUpdate()},doProcedureUpdate:function(){if(!this.getProcedureModel())return;const e=this.getProcedureModel().getId();this.getTargetWorkspace_().getProcedureMap().has(e)?(this.updateName_(),this.updateEnabled_(),this.updateParameters_()):this.dispose(!0)},updateName_:function(){const t=this.getProcedureModel().getName();this.setFieldValue(t,"NAME");const r=this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP;this.setTooltip(r.replace("%1",t))},updateEnabled_:function(){this.getProcedureModel().getEnabled()?this.setEnabled(this.previousEnabledState_):(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1))},updateParameters_:function(){this.syncArgsMap_(),this.deleteAllArgInputs_(),this.addParametersLabel__(),this.createArgInputs_(),this.reattachBlocks_(),this.prevParams_=[...this.getProcedureModel().getParameters()]},syncArgsMap_:function(){for(const[e,t]of this.prevParams_.entries()){const r=this.getInputTargetBlock(`ARG${e}`);r&&this.argsMap_.set(t.getId(),r)}},updateArgsMap_:function(){for(const[e,t]of this.getProcedureModel().getParameters().entries()){const r=this.getInputTargetBlock(`ARG${e}`);r?this.argsMap_.set(t.getId(),r):this.argsMap_.delete(t.getId())}},deleteAllArgInputs_:function(){let e=0;for(;this.getInput(`ARG${e}`);)this.removeInput(`ARG${e}`),e++},addParametersLabel__:function(){const t=this.getInput("TOPROW");this.getProcedureModel().getParameters().length?this.getField("WITH")||(t.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),t.init()):this.getField("WITH")&&t.removeField("WITH")},createArgInputs_:function(t=null){t||(t=this.getProcedureModel().getParameters().map((e=>e.getName())));for(const[r,o]of t.entries())this.appendValueInput(`ARG${r}`).appendField(new e.FieldLabel(o),`ARGNAME${r}`).setAlign(e.Input.Align.RIGHT)},reattachBlocks_:function(){const e=this.getProcedureModel().getParameters();for(const[t,r]of e.entries())this.argsMap_.has(r.getId())&&this.getInput(`ARG${t}`).connection.connect(this.argsMap_.get(r.getId()).outputConnection)},renameProcedure:function(t,r){if(e.Names.equals(t,this.getFieldValue("NAME"))){this.setFieldValue(r,"NAME");const t=this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP;this.setTooltip(t.replace("%1",r))}}};e.Extensions.registerMixin("procedure_caller_update_shape_mixin",T);const N={onchange:function(t){if(this.disposed||this.workspace.isFlyout)return;if(t.type===e.Events.BLOCK_MOVE&&this.updateArgsMap_(!0),t.type!==e.Events.FINISHED_LOADING&&!this.eventIsCreatingThisBlockDuringPaste_(t))return;if(this.getProcedureModel())return;const r=this.getFieldValue("NAME");let o=e.Procedures.getDefinition(r,this.workspace);this.defMatches_(o)||(o=null),o||(e.Events.setGroup(t.group),this.model_=this.createDef_(this.getFieldValue("NAME"),this.paramsFromSerializedState_),e.Events.setGroup(!1)),this.getProcedureModel()||(this.model_=this.findProcedureModel_(this.getFieldValue("NAME"),this.paramsFromSerializedState_)),this.initBlockWithProcedureModel_()},eventIsCreatingThisBlockDuringPaste_(t){return t.type===e.Events.BLOCK_CREATE&&(t.blockId===this.id||-1!==t.ids.indexOf(this.id))&&t.recordUndo},defMatches_(e){return e&&e.type===this.defType_&&JSON.stringify(e.getVars())===JSON.stringify(this.paramsFromSerializedState_)},createDef_(t,r=[]){const o=this.getRelativeToSurfaceXY(),n=e.Procedures.findLegalName(t,this);this.renameProcedure(t,n);const i={type:this.defType_,x:o.x+e.config.snapRadius*(this.RTL?-1:1),y:o.y+2*e.config.snapRadius,extraState:{params:r.map((e=>({name:e})))},fields:{NAME:n}};return e.serialization.blocks.append(i,this.getTargetWorkspace_(),{recordUndo:!0}).getProcedureModel()}};e.Extensions.registerMixin("procedure_caller_onchange_mixin",N);const R={customContextMenu:function(t){if(!this.workspace.isMovable())return;const r=this.getFieldValue("NAME"),o=this.workspace;t.push({enabled:!0,text:e.Msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const t=e.Procedures.getDefinition(r,o);t&&t instanceof e.BlockSvg&&(o.centerOnBlock(t.id),t.select())}})}};function O(e){return void 0!==e.getProcedureModel&&void 0!==e.doProcedureUpdate&&void 0!==e.isProcedureDef}function w(){delete e.Blocks.procedures_defnoreturn,delete e.Blocks.procedures_callnoreturn,delete e.Blocks.procedures_defreturn,delete e.Blocks.procedures_callreturn}function x(){e.serialization.registry.unregister("procedures"),e.serialization.registry.register("procedures",new e.serialization.procedures.ProcedureSerializer(g,a))}e.Extensions.registerMixin("procedure_caller_context_menu_mixin",R),e.Extensions.registerMixin("procedure_callernoreturn_get_def_block_mixin",{hasReturn_:!1,defType_:"procedures_defnoreturn"}),e.Extensions.registerMixin("procedure_callerreturn_get_def_block_mixin",{hasReturn_:!0,defType_:"procedures_defreturn"})})(),n})()))}(rt);var ot=rt.exports;const nt={registerCustomFlyout:function(e){e.registerToolboxCategoryCallback("CUSTOM_PROCEDURE",(function(t){const r=[];r.push({kind:"block",type:"my_procedure_def"});for(const n of e.getProcedureMap().getProcedures())r.push({kind:"block",type:"my_procedure_call",extraState:{procedureId:n.getId(),name:n.getName()}});let o=0;for(;o<2;)r.push({kind:"label",text:"-","web-class":"custom-label-style opacity"}),o++;return r}))}};R.Blocks.my_procedure_def={init:function(){let e="function",t=R.getMainWorkspace().getProcedureMap().getProcedures().length;for(e=`function${t>0?t:""}`;;){if(!R.getMainWorkspace().getProcedureMap().getProcedures().find((t=>t.getName()==e)))break;t++,e=`function${t}`}this.model=new ot.ObservableProcedureModel(this.workspace,e),this.workspace.getProcedureMap().add(this.model),this.jsonInit({message0:`${R.Msg.defFunction} %1`,args0:[{type:"input_field_modal_component",name:"PROCEDURE_NAME",value:e}],message1:"%1",args1:[{type:"input_statement",name:"DO"}],colour:"#90539D",tooltip:"自定义函数块",helpUrl:""})},getProcedureModel(){return this.model},doProcedureUpdate(){this.setFieldValue(this.model.getName(),"PROCEDURE_NAME")},saveExtraState(){return{procedureId:this.model.getId(),name:this.model.getName(),parameters:this.model.getParameters().map((e=>({name:e.getName(),id:e.getId()}))),returnTypes:this.model.getReturnTypes()}},loadExtraState(e){const t=e.procedureId,r=this.workspace.getProcedureMap();if(t&&this.model.getId()!=t&&r.has(t)&&(this.isInsertionMarker()||this.noBlockHasClaimedModel_(t)))return this.workspace.getProcedureMap().delete(this.model.getId()),this.model=this.workspace.getProcedureMap().get(e.procedureId),void this.doProcedureUpdate();this.model.setName(e.name).setReturnTypes(e.returnTypes);for(const[o,n]of e.parameters.entries())this.model.insertParameter(o,new ot.ObservableParameterModel(this.workspace,n.name,n.id))},noBlockHasClaimedModel_(e){const t=this.workspace.getProcedureMap().get(e);return this.workspace.getAllBlocks(!1).every((e=>!ot.isProcedureBlock(e)||!e.isProcedureDef()||e.getProcedureModel()!==t))},destroy:function(){this.isInsertionMarker()||this.workspace.getProcedureMap().delete(this.model.getId())},onchange(e){e.type===R.Events.BLOCK_CREATE&&e.blockId===this.id&&R.Events.fire(new ot.ProcedureCreate(this.workspace,this.getProcedureModel())),e.type===R.Events.BLOCK_CHANGE&&e.blockId===this.id&&(this.getProcedureModel().setName(this.getFieldValue("PROCEDURE_NAME")),"disabled"===e.element&&this.getProcedureModel().setEnabled(!e.newValue))}},x.javascriptGenerator.forBlock.my_procedure_def=function(e){return`function fn_${e.getFieldValue("PROCEDURE_NAME")}() {\n${x.javascriptGenerator.statementToCode(e,"DO")}\n}`},R.Blocks.my_procedure_call={init:function(){this.jsonInit({type:"custom_function",message0:`${R.Msg.function} %1`,args0:[{type:"field_label",name:"NAME",text:"%{BKY_UNNAMED_KEY}"}],colour:"#90539D",helpUrl:"",previousStatement:null,nextStatement:null})},getProcedureModel(){return this.model},isProcedureDef:()=>!1,getVarModels:()=>[],getTargetWorkspace_(){return this.workspace.isFlyout?this.workspace.targetWorkspace:this.workspace},findProcedureModel_(e){const t=this.getTargetWorkspace_();let r=t.getProcedureMap().getProcedures().find((t=>t.getId()===e));if(!r){const e=this.getFieldValue("NAME");r=t.getProcedureMap().getProcedures().find((t=>t.getName()===e))}if(!r)return null;const o=r.getReturnTypes();return(this.hasReturn_?o:!o)?r:null},saveExtraState(){const e=Object.create(null);let t=this.getProcedureModel();if(!t){const e=this.getFieldValue("NAME"),r=R.getMainWorkspace().getProcedureMap().getProcedures().find((t=>t.getName()===e));if(!r)return;t=r}return e.name=t.getName(),e.procedureId=t.getId(),t.getParameters().length&&(e.params=t.getParameters().map((e=>e.getName()))),e},loadExtraState(e){const t=e.name,r=e.procedureId;this.setFieldValue(t,"NAME"),this.model||(this.model=this.findProcedureModel_(r)),this.doProcedureUpdate()},doProcedureUpdate(){if(!this.getProcedureModel())return;const e=this.getProcedureModel().getId();if(!this.getTargetWorkspace_().getProcedureMap().has(e))return console.log("删除了",this.id),void this.dispose();this.updateName_()},updateName_:function(){if(this.disposed)return;const e=this.getProcedureModel().getName();this.setFieldValue(e,"NAME")},onchange(e){e.type===R.Events.BLOCK_CREATE&&e.blockId===this.id&&(this.model||this.dispose())}},x.javascriptGenerator.forBlock.my_procedure_call=function(e){var t;const r=e.getFieldValue("NAME"),o=R.getMainWorkspace().getProcedureMap().getProcedures().filter((e=>e.getName()===r));return null!=o&&null!==(t=o[0])&&void 0!==t&&t.getEnabled()?`fn_${r}();\n`:""};["highlightBlock","waitForSeconds","move","stepSeconds","setColor","tickDifference","log_data"].forEach((e=>{x.javascriptGenerator.addReservedWords(e)})),x.javascriptGenerator.STATEMENT_PREFIX="highlightBlock(%1);\n",x.javascriptGenerator.forBlock.start_program=function(e){return"{\n"+x.javascriptGenerator.statementToCode(e,"ACTION")+"}"},je.pythonGenerator.forBlock.start_program=function(e){return`\nfrom utils import *\n\ndef main():\n    processAction("rt/api/sport/request", 1016, "")\n    ${je.pythonGenerator.statementToCode(e,"ACTION")}\n\nif __name__=="__main__":\n    main()\n`},x.javascriptGenerator.forBlock.type_num_slider=function(e){return[e.getFieldValue("value"),x.Order.MEMBER]},je.pythonGenerator.forBlock.type_num_slider=function(e){return[e.getFieldValue("value"),x.Order.MEMBER]},[...Xe(),...Qe(),...We(),...Ke(),...tt(),...$e()].forEach((e=>{x.javascriptGenerator.forBlock[e.type]=e.code||function(){}})),E.registry.hasItem("theme","defaultTheme")&&E.registry.unregister("theme","defaultTheme");const it=E.Theme.defineTheme("defaultTheme",{name:"defaultTheme",base:E.Themes.Classic,startHats:!0,componentStyles:{workspaceBackgroundColour:"#2E2E3D",toolboxBackgroundColour:"#4A4A5B",toolboxForegroundColour:"#C9C9C9",flyoutBackgroundColour:"#1F1F29",flyoutForegroundColour:"#fff",scrollbarOpacity:.001}}),st=e=>(y("data-v-357fd1e1"),e=e(),b(),e),at={class:"blockly_field_wrapper"},lt=st((()=>d("div",{class:"modal_title"},"选择录音文件",-1))),ct=st((()=>d("div",{class:"modal_content"},null,-1))),ut=n({name:"ModalFields"}),dt=n(t(t({},ut),{},{props:{defaultValue:{},ok:{type:Function},cancel:{type:Function}},setup(e){const t=e,r=()=>{t.ok&&t.ok(),t.cancel&&t.cancel()},o=()=>{t.cancel&&t.cancel()};return(e,t)=>(u(),c("div",at,[d("div",{class:"modal_body"},[lt,ct,d("div",{class:"modal_footer"},[d("div",{class:"footer_opera_item",onClick:o},"取消"),d("div",{class:"footer_opera_item",onClick:r},"确定")])])]))}})),pt=T(dt,[["__scopeId","data-v-357fd1e1"]]);let ht=class extends E.Field{constructor(e,t){super(e,t),r(this,"SERIALIZABLE",!0),this.SERIALIZABLE=!0}static fromJson(e){return new this(E.utils.parsing.replaceMessageReferences(e.value))}showEditor_(){const e=P(this.render(Math.random().toString())),t=document.getElementById("custom_field_modal_wrapper");t&&C(e,t)}doClassValidation_(e){return"string"!=typeof e?null:e}modalOk(){this.setValue("改变")}modalCancel(){const e=document.getElementById("custom_field_modal_wrapper");e&&Array.from(e.children).forEach((e=>{e.className.includes("blockly_field_wrapper")&&e.remove()}))}render(e){return g(pt,{key:e,ok:this.modalOk.bind(this),cancel:this.modalCancel,defaultValue:this.value_},null)}};E.fieldRegistry.register("field_modal_component",ht);const ft={class:"blockly_field_wrapper"},gt={class:"modal_body"},mt={class:"modal_title"},_t={class:"modal_content"},Et={key:0,class:"modal_content_tip"},vt={class:"modal_footer"},yt=n({name:"ModalFields"}),bt=n(t(t({},yt),{},{props:{defaultValue:{},ok:{type:Function},cancel:{type:Function},allProcedure:{}},setup(e){const t=e,[r,o]=S(!1),n=I(i("Blockly.modal_1")),s=I(t.defaultValue||""),a=()=>i("Blockly.modal_1"),l=()=>i("sure"),p=()=>i("cancel"),g=()=>{return s.value?(e=s.value,/^[a-zA-Z0-9_]*$/.test(e)?t.allProcedure.has(s.value)?(o(!0),void(n.value=i("Blockly.tip_2"))):(t.ok&&t.ok(s.value),void(t.cancel&&t.cancel())):(o(!0),void(n.value=i("Blockly.tip_1")))):(o(!0),void(n.value=i("Blockly.modal_1")));var e},m=()=>{r&&o(!1)},_=()=>{t.cancel&&t.cancel()};return(e,t)=>(u(),c("div",ft,[d("div",gt,[d("div",mt,f(null==a?void 0:a()),1),d("div",_t,[k(d("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>L(s)?s.value=e:null),placeholder:"函数名称",class:"input_style",type:"text",onInput:m},null,544),[[M,h(s)]]),h(r)?(u(),c("span",Et,f(h(n)),1)):A("",!0)]),d("div",vt,[d("div",{class:"footer_opera_item",onClick:_},f(null==p?void 0:p()),1),d("div",{class:"footer_opera_item",onClick:g},f(null==l?void 0:l()),1)])])]))}})),Tt=T(bt,[["__scopeId","data-v-cb2afe87"]]);class Nt extends E.Field{constructor(e,t){super(e,t),r(this,"SERIALIZABLE",!0),this.SERIALIZABLE=!0}static fromJson(e){return new this(E.utils.parsing.replaceMessageReferences(e.value))}showEditor_(){const e=P(this.render(Math.random().toString())),t=document.getElementById("custom_field_modal_wrapper");t&&C(e,t)}doClassValidation_(e){return"string"!=typeof e?null:e}modalOk(e){this.setValue(e,!0),this.isDirty_=!0}modalCancel(){const e=document.getElementById("custom_field_modal_wrapper");e&&Array.from(e.children).forEach((e=>{e.className.includes("blockly_field_wrapper")&&e.remove()}))}render(e){const t=this.getValue(),r=new Set;return E.getMainWorkspace().getProcedureMap().forEach((e=>{t!==e.getName()&&r.add(e.getName())})),g(Tt,{key:e,ok:this.modalOk.bind(this),cancel:this.modalCancel,defaultValue:this.value_,allProcedure:r},null)}}E.fieldRegistry.register("input_field_modal_component",Nt);class Rt extends R.ToolboxCategory{constructor(e,t,r){super(e,t,r)}addColourBorder_(){this.rowDiv_&&(this.rowDiv_.style.backgroundColor="transparent")}setSelected(e){this.rowDiv_&&(this.rowDiv_.style.backgroundColor=e?"#242430":"transparent",this.htmlDiv_&&R.utils.aria.setState(this.htmlDiv_,R.utils.aria.State.SELECTED,e))}createIconDom_(){const e=document.createElement("div");return e.innerHTML=`<svg aria-hidden="true" style="width: 100%; height: 100%"><use xlink:href="#icon/programming-category/${this.cssConfig_.icon}" fill="currentColor"  /></svg>`,e.style.width="26px",e.style.height="26px",e}}R.registry.register(R.registry.Type.TOOLBOX_ITEM,R.ToolboxCategory.registrationName,Rt,!0);class Ot extends R.blockRendering.ConstantProvider{constructor(){super(),this.NOTCH_WIDTH=20,this.NOTCH_HEIGHT=5,this.STATEMENT_INPUT_PADDING_LEFT=10,this.START_HAT_HEIGHT=10,this.TAB_HEIGHT=10,this.TOP_ROW_MIN_HEIGHT=0,this.BOTTOM_ROW_MIN_HEIGHT=0,this.CORNER_RADIUS=4}}class wt extends R.blockRendering.Renderer{constructor(){super("custom_renderer")}makeConstants_(){return new Ot}}R.blockRendering.register("custom_renderer",wt);/*! For license information please see index.js.LICENSE.txt */!function(e,t){var r;r=e=>(()=>{var t={573:t=>{t.exports=e}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{o.r(n),o.d(n,{FieldSlider:()=>t});var e=o(573);class t extends e.FieldNumber{constructor(e,t,r,o,n,i){super(e,t,r,o,n,i),this.boundEvents=[],this.sliderInput=null}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}showEditor_(t,r){super.showEditor_(t,!0);const o=this.dropdownCreate_();e.DropDownDiv.getContentDiv().appendChild(o);const n=this.getSourceBlock();if(n instanceof e.BlockSvg){const t=n.getColour()||"",r=n.getColourTertiary()||"";e.DropDownDiv.setColour(t,r)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),r||o.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}dropdownCreate_(){const t=document.createElement("div");t.className="fieldSliderContainer";const r=document.createElement("input");return r.setAttribute("type","range"),r.setAttribute("min",`${this.min_}`),r.setAttribute("max",`${this.max_}`),r.setAttribute("step",`${this.precision_}`),r.setAttribute("value",`${this.getValue()}`),r.setAttribute("tabindex","0"),r.className="fieldSlider",t.appendChild(r),this.sliderInput=r,this.boundEvents.push(e.browserEvents.conditionalBind(r,"input",this,this.onSliderChange_)),t}dropdownDispose_(){for(const t of this.boundEvents)e.browserEvents.unbind(t);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const r=this.value_;this.setEditorValue_(null===(t=this.sliderInput)||void 0===t?void 0:t.value,!1),this.getSourceBlock()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,r,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}e.fieldRegistry.register("field_slider",t),e.Css.register("\n.fieldSliderContainer {\n  align-items: center;\n  display: flex;\n  height: 32px;\n  justify-content: center;\n  width: 150px;\n}\n.fieldSlider {\n  -webkit-appearance: none;\n  background: transparent; /* override white in chrome */\n  margin: 4px;\n  padding: 0;\n  width: 100%;\n}\n.fieldSlider:focus {\n  outline: none;\n}\n/* Webkit */\n.fieldSlider::-webkit-slider-runnable-track {\n  background: #ddd;\n  border-radius: 5px;\n  height: 10px;\n}\n.fieldSlider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background: #fff;\n  border-radius: 50%;\n  box-shadow: 0 0 0 4px rgba(255,255,255,.15);\n  cursor: pointer;\n  height: 24px;\n  margin-top: -7px;\n  width: 24px;\n}\n/* Firefox */\n.fieldSlider::-moz-range-track {\n  background: #ddd;\n  border-radius: 5px;\n  height: 10px;\n}\n.fieldSlider::-moz-range-thumb {\n  background: #fff;\n  border: none;\n  border-radius: 50%;\n  box-shadow: 0 0 0 4px rgba(255,255,255,.15);\n  cursor: pointer;\n  height: 24px;\n  width: 24px;\n}\n.fieldSlider::-moz-focus-outer {\n  /* override the focus border style */\n  border: 0;\n}\n/* IE */\n.fieldSlider::-ms-track {\n  /* IE wont let the thumb overflow the track, so fake it */\n  background: transparent;\n  border-color: transparent;\n  border-width: 15px 0;\n  /* remove default tick marks */\n  color: transparent;\n  height: 10px;\n  width: 100%;\n  margin: -4px 0;\n}\n.fieldSlider::-ms-fill-lower  {\n  background: #ddd;\n  border-radius: 5px;\n}\n.fieldSlider::-ms-fill-upper  {\n  background: #ddd;\n  border-radius: 5px;\n}\n.fieldSlider::-ms-thumb {\n  background: #fff;\n  border: none;\n  border-radius: 50%;\n  box-shadow: 0 0 0 4px rgba(255,255,255,.15);\n  cursor: pointer;\n  height: 24px;\n  width: 24px;\n}\n")})(),n})(),e.exports=r(R)}({exports:{}});const xt=e=>(R.defineBlocksWithJsonArray([{type:"start_program",message0:`${R.Msg.startProgram} %1 %2`,args0:[{type:"input_dummy"},{type:"input_statement",name:"ACTION"}],colour:230,tooltip:"",helpUrl:"",deletable:!0},{type:"type_num_slider",message0:"%1",args0:[{type:"field_slider",name:"value",min:1,max:30,value:1}],output:"Number",colour:160},...We(),...Xe(),...Qe(),...Ke(),...tt(),...$e()]),nt.registerCustomFlyout(e),{kind:"categoryToolbox",contents:[{kind:"category",name:E.Msg.soldier_menu_1,colour:"#F2754D",cssConfig:{icon:"blockly_category_icon_1"},contents:He()},{kind:"category",name:E.Msg.soldier_menu_5,colour:"#408FE7",cssConfig:{icon:"blockly_category_icon_4"},contents:Ge()},{kind:"category",name:E.Msg.soldier_menu_6,colour:"#F55E5E",cssConfig:{icon:"blockly_category_icon_5"},contents:qe()},{kind:"category",name:E.Msg.soldier_menu_7,colour:"#90539D",cssConfig:{icon:"blockly_category_icon_8"},custom:"CUSTOM_PROCEDURE"}]});var Pt={exports:{}};!function(e,t){var r;r=()=>(()=>{var e={"./original-repo/interpreter.js":
/*!**************************************!*\
      	  !*** ./original-repo/interpreter.js ***!
      	  \**************************************/function(e,t,r){
/**
      	 * @license
      	 * Copyright 2013 Google LLC
      	 * SPDX-License-Identifier: Apache-2.0
      	 */
var o=function(e,t){"string"==typeof e&&(e=this.parse_(e,"code"));var r=e.constructor;this.newNode=function(){return new r({options:{}})};var n=this.newNode();for(var i in e)n[i]="body"===i?e[i].slice():e[i];this.ast=n,this.tasks=[],this.initFunc_=t,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var s,a=/^step([A-Z]\w*)$/;for(var l in this)"function"==typeof this[l]&&(s=l.match(a))&&(this.stepFunctions_[s[1]]=this[l].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join("\n"),"polyfills"),this.polyfills_=void 0,o.stripLocations_(this.ast,void 0,void 0);var c=new o.State(this.ast,this.globalScope);c.done=!1,this.stateStack=[c],this.run(),this.value=void 0,this.ast=n,(c=new o.State(this.ast,this.globalScope)).done=!1,this.stateStack.length=0,this.stateStack[0]=c};o.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},o.PARSE_OPTIONS={locations:!0,ecmaVersion:5},o.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},o.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},o.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},o.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},o.STEP_ERROR={STEP_ERROR:!0},o.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},o.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},o.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},o.toStringCycles_=[],o.vm=null,o.currentInterpreter_=null,o.nativeGlobal="undefined"==typeof globalThis?this:globalThis,o.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],o.legalArrayLength=function(e){var t=e>>>0;return t===Number(e)?t:NaN},o.legalArrayIndex=function(e){var t=e>>>0;return String(t)===String(e)&&4294967295!==t?t:NaN},o.stripLocations_=function(e,t,r){for(var n in t?e.start=t:delete e.start,r?e.end=r:delete e.end,e)if("loc"!==n&&e.hasOwnProperty(n)){var i=e[n];i&&"object"==typeof i&&o.stripLocations_(i,t,r)}},o.prototype.REGEXP_MODE=2,o.prototype.REGEXP_THREAD_TIMEOUT=1e3,o.prototype.POLYFILL_TIMEOUT=1e3,o.prototype.getterStep_=!1,o.prototype.setterStep_=!1,o.prototype.appendCodeNumber_=0,o.prototype.taskCodeNumber_=0,o.prototype.parse_=function(e,t){var r={};for(var n in o.PARSE_OPTIONS)r[n]=o.PARSE_OPTIONS[n];return r.sourceFile=t,o.nativeGlobal.acorn.parse(e,r)},o.prototype.appendCode=function(e){var t=this.stateStack[0];if(!t||"Program"!==t.node.type)throw Error("Expecting original AST to start with a Program node");if("string"==typeof e&&(e=this.parse_(e,"appendCode"+this.appendCodeNumber_++)),!e||"Program"!==e.type)throw Error("Expecting new AST to start with a Program node");this.populateScope_(e,t.scope),Array.prototype.push.apply(t.node.body,e.body),t.node.body.variableCache_=null,t.done=!1},o.prototype.step=function(){var e,t=this.stateStack;do{var r=t[t.length-1];if(this.paused_)return!0;if(!r||"Program"===r.node.type&&r.done){if(!this.tasks.length)return!1;if(!(r=this.nextTask_()))return!0}var n=r.node,i=o.currentInterpreter_;o.currentInterpreter_=this;try{var s=this.stepFunctions_[n.type](t,r,n)}catch(a){if(a!==o.STEP_ERROR)throw this.value!==a&&(this.value=void 0),a}finally{o.currentInterpreter_=i}if(s&&t.push(s),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");e||n.end||(e=Date.now()+this.POLYFILL_TIMEOUT)}while(!n.end&&e>Date.now());return!0},o.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},o.prototype.initGlobal=function(e){this.setProperty(e,"NaN",NaN,o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"Infinity",1/0,o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"undefined",void 0,o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"window",e,o.READONLY_DESCRIPTOR),this.setProperty(e,"this",e,o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"self",e),this.OBJECT_PROTO=new o.Object(null),this.FUNCTION_PROTO=new o.Object(this.OBJECT_PROTO),this.initFunction(e),this.initObject(e),e.proto=this.OBJECT_PROTO,this.setProperty(e,"constructor",this.OBJECT,o.NONENUMERABLE_DESCRIPTOR),this.initArray(e),this.initString(e),this.initBoolean(e),this.initNumber(e),this.initDate(e),this.initRegExp(e),this.initError(e),this.initMath(e),this.initJSON(e);var t,r=this,n=this.createNativeFunction((function(e){throw EvalError("Can't happen")}),!1);n.eval=!0,this.setProperty(e,"eval",n,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"parseInt",this.createNativeFunction(parseInt,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"parseFloat",this.createNativeFunction(parseFloat,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"isNaN",this.createNativeFunction(isNaN,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"isFinite",this.createNativeFunction(isFinite,!1),o.NONENUMERABLE_DESCRIPTOR);for(var i=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],s=0;s<i.length;s++)t=function(e){return function(t){try{return e(t)}catch(o){r.throwException(r.URI_ERROR,o.message)}}}(i[s][0]),this.setProperty(e,i[s][1],this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR);t=function(e){return r.createTask_(!1,arguments)},this.setProperty(e,"setTimeout",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return r.createTask_(!0,arguments)},this.setProperty(e,"setInterval",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){r.deleteTask_(e)},this.setProperty(e,"clearTimeout",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){r.deleteTask_(e)},this.setProperty(e,"clearInterval",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,e)},o.prototype.functionCodeNumber_=0,o.prototype.initFunction=function(e){var t,r=this,n=/^[A-Za-z_$][\w$]*$/;t=function(e){if(arguments.length)var t=String(arguments[arguments.length-1]);else t="";var o=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(o){for(var i=o.split(/\s*,\s*/),s=0;s<i.length;s++){var a=i[s];n.test(a)||r.throwException(r.SYNTAX_ERROR,"Invalid function argument: "+a)}o=i.join(", ")}try{var l=r.parse_("(function("+o+") {"+t+"})","function"+r.functionCodeNumber_++)}catch(u){r.throwException(r.SYNTAX_ERROR,"Invalid code: "+u.message)}1!==l.body.length&&r.throwException(r.SYNTAX_ERROR,"Invalid code in function body");var c=l.body[0].expression;return r.createFunction(c,r.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(t,!0),this.setProperty(e,"Function",this.FUNCTION,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,o.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",t=function(e,t){var n=r.stateStack[r.stateStack.length-1];n.func_=this,n.funcThis_=e,n.arguments_=[],null!=t&&(t instanceof o.Object?n.arguments_=r.arrayPseudoToNative(t):r.throwException(r.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),n.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",t),t=function(e){var t=r.stateStack[r.stateStack.length-1];t.func_=this,t.funcThis_=e,t.arguments_=[];for(var o=1;o<arguments.length;o++)t.arguments_.push(arguments[o]);t.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",t),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),t=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",t),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",t),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR)},o.prototype.initObject=function(e){var t,r=this;t=function(e){if(null==e)return r.calledWithNew()?this:r.createObjectProto(r.OBJECT_PROTO);if(!(e instanceof o.Object)){var t=r.createObjectProto(r.getPrototype(e));return t.data=e,t}return e},this.OBJECT=this.createNativeFunction(t,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"Object",this.OBJECT,o.NONENUMERABLE_DESCRIPTOR);var n=function(e){null==e&&r.throwException(r.TYPE_ERROR,"Cannot convert '"+e+"' to object")};t=function(e){n(e);var t=e instanceof o.Object?e.properties:e;return r.arrayNativeToPseudo(Object.getOwnPropertyNames(t))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return n(e),e instanceof o.Object&&(e=e.properties),r.arrayNativeToPseudo(Object.keys(e))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return null===e?r.createObjectProto(null):(e instanceof o.Object||r.throwException(r.TYPE_ERROR,"Object prototype may only be an Object or null, not "+e),r.createObjectProto(e))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),t=function(e,t,n){return t=String(t),e instanceof o.Object||r.throwException(r.TYPE_ERROR,"Object.defineProperty called on non-object: "+e),n instanceof o.Object||r.throwException(r.TYPE_ERROR,"Property description must be an object"),e.preventExtensions&&!(t in e.properties)&&r.throwException(r.TYPE_ERROR,"Can't define property '"+t+"', object is not extensible"),r.setProperty(e,t,o.VALUE_IN_DESCRIPTOR,n.properties),e},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),t=function(e,t){if(e instanceof o.Object||r.throwException(r.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+e),(t=String(t))in e.properties){var n=Object.getOwnPropertyDescriptor(e.properties,t),i=e.getter[t],s=e.setter[t],a=r.createObjectProto(r.OBJECT_PROTO);return i||s?(r.setProperty(a,"get",i),r.setProperty(a,"set",s)):(r.setProperty(a,"value",n.value),r.setProperty(a,"writable",n.writable)),r.setProperty(a,"configurable",n.configurable),r.setProperty(a,"enumerable",n.enumerable),a}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return n(e),r.getPrototype(e)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return Boolean(e)&&!e.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),t=function(e){return e instanceof o.Object&&(e.preventExtensions=!0),e},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",o.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",o.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",o.Object.prototype.valueOf),t=function(e){return n(this),this instanceof o.Object?String(e)in this.properties:this.hasOwnProperty(e)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",t),t=function(e){return n(this),this instanceof o.Object?Object.prototype.propertyIsEnumerable.call(this.properties,e):this.propertyIsEnumerable(e)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",t),t=function(e){for(;;){if(!(e=r.getPrototype(e)))return!1;if(e===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",t)},o.prototype.initArray=function(e){var t,r=this;t=function(e){if(r.calledWithNew())var t=this;else t=r.createArray();var n=arguments[0];if(1===arguments.length&&"number"==typeof n)isNaN(o.legalArrayLength(n))&&r.throwException(r.RANGE_ERROR,"Invalid array length: "+n),t.properties.length=n;else{for(var i=0;i<arguments.length;i++)t.properties[i]=arguments[i];t.properties.length=i}return t},this.ARRAY=this.createNativeFunction(t,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(e,"Array",this.ARRAY,o.NONENUMERABLE_DESCRIPTOR),t=function(e){return e&&"Array"===e.class},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(t,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},o.prototype.initString=function(e){var t,r=this;t=function(e){return e=arguments.length?o.nativeGlobal.String(e):"",r.calledWithNew()?(this.data=e,this):e},this.STRING=this.createNativeFunction(t,!0),this.setProperty(e,"String",this.STRING,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),o.NONENUMERABLE_DESCRIPTOR);for(var n=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],i=0;i<n.length;i++)this.setNativeFunctionPrototype(this.STRING,n[i],String.prototype[n[i]]);t=function(e,t,o){t=r.pseudoToNative(t),o=r.pseudoToNative(o);try{return String(this).localeCompare(e,t,o)}catch(n){r.throwException(r.ERROR,"localeCompare: "+n.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",t),t=function(e,t,n){var i=String(this);if(t=t?Number(t):void 0,r.isa(e,r.REGEXP)&&(e=e.data,r.maybeThrowRegExp(e,n),2===r.REGEXP_MODE))if(o.vm){var s={string:i,separator:e,limit:t};(c=r.vmCall("string.split(separator, limit)",s,e,n))!==o.REGEXP_TIMEOUT&&n(r.arrayNativeToPseudo(c))}else{var a=r.createWorker(),l=r.regExpTimeout(e,a,n);a.onmessage=function(e){clearTimeout(l),n(r.arrayNativeToPseudo(e.data))},a.postMessage(["split",i,e,t])}else{var c=i.split(e,t);n(r.arrayNativeToPseudo(c))}},this.setAsyncFunctionPrototype(this.STRING,"split",t),t=function(e,t){var n=String(this);if(e=r.isa(e,r.REGEXP)?e.data:new RegExp(e),r.maybeThrowRegExp(e,t),2!==r.REGEXP_MODE)i=n.match(e),t(i&&r.arrayNativeToPseudo(i));else if(o.vm){var i,s={string:n,regexp:e};(i=r.vmCall("string.match(regexp)",s,e,t))!==o.REGEXP_TIMEOUT&&t(i&&r.arrayNativeToPseudo(i))}else{var a=r.createWorker(),l=r.regExpTimeout(e,a,t);a.onmessage=function(e){clearTimeout(l),t(e.data&&r.arrayNativeToPseudo(e.data))},a.postMessage(["match",n,e])}},this.setAsyncFunctionPrototype(this.STRING,"match",t),t=function(e,t){var n=String(this);if(e=r.isa(e,r.REGEXP)?e.data:new RegExp(e),r.maybeThrowRegExp(e,t),2!==r.REGEXP_MODE)t(n.search(e));else if(o.vm){var i={string:n,regexp:e},s=r.vmCall("string.search(regexp)",i,e,t);s!==o.REGEXP_TIMEOUT&&t(s)}else{var a=r.createWorker(),l=r.regExpTimeout(e,a,t);a.onmessage=function(e){clearTimeout(l),t(e.data)},a.postMessage(["search",n,e])}},this.setAsyncFunctionPrototype(this.STRING,"search",t),t=function(e,t,n){var i=String(this);if(t=String(t),r.isa(e,r.REGEXP)&&(e=e.data,r.maybeThrowRegExp(e,n),2===r.REGEXP_MODE))if(o.vm){var s={string:i,substr:e,newSubstr:t},a=r.vmCall("string.replace(substr, newSubstr)",s,e,n);a!==o.REGEXP_TIMEOUT&&n(a)}else{var l=r.createWorker(),c=r.regExpTimeout(e,l,n);l.onmessage=function(e){clearTimeout(c),n(e.data)},l.postMessage(["replace",i,e,t])}else n(i.replace(e,t))},this.setAsyncFunctionPrototype(this.STRING,"replace",t),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},o.prototype.initBoolean=function(e){var t,r=this;t=function(e){return e=o.nativeGlobal.Boolean(e),r.calledWithNew()?(this.data=e,this):e},this.BOOLEAN=this.createNativeFunction(t,!0),this.setProperty(e,"Boolean",this.BOOLEAN,o.NONENUMERABLE_DESCRIPTOR)},o.prototype.initNumber=function(e){var t,r=this;t=function(e){return e=arguments.length?o.nativeGlobal.Number(e):0,r.calledWithNew()?(this.data=e,this):e},this.NUMBER=this.createNativeFunction(t,!0),this.setProperty(e,"Number",this.NUMBER,o.NONENUMERABLE_DESCRIPTOR);for(var n=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],i=0;i<n.length;i++)this.setProperty(this.NUMBER,n[i],Number[n[i]],o.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);t=function(e){try{return Number(this).toExponential(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",t),t=function(e){try{return Number(this).toFixed(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",t),t=function(e){try{return Number(this).toPrecision(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",t),t=function(e){try{return Number(this).toString(e)}catch(t){r.throwException(r.ERROR,t.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",t),t=function(e,t){e=e?r.pseudoToNative(e):void 0,t=t?r.pseudoToNative(t):void 0;try{return Number(this).toLocaleString(e,t)}catch(o){r.throwException(r.ERROR,"toLocaleString: "+o.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",t)},o.prototype.initDate=function(e){var t,r=this;t=function(e,t){if(!r.calledWithNew())return o.nativeGlobal.Date();var n=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(o.nativeGlobal.Date,n)),this},this.DATE=this.createNativeFunction(t,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(e,"Date",this.DATE,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),o.NONENUMERABLE_DESCRIPTOR);for(var n=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],i=0;i<n.length;i++)t=function(e){return function(t){var o=this.data;o instanceof Date||r.throwException(r.TYPE_ERROR,e+" not called on a Date");for(var n=[],i=0;i<arguments.length;i++)n[i]=r.pseudoToNative(arguments[i]);return o[e].apply(o,n)}}(n[i]),this.setNativeFunctionPrototype(this.DATE,n[i],t)},o.prototype.initRegExp=function(e){var t,r=this;t=function(e,t){if(r.calledWithNew())var n=this;else{if(void 0===t&&r.isa(e,r.REGEXP))return e;n=r.createObjectProto(r.REGEXP_PROTO)}e=void 0===e?"":String(e),t=t?String(t):"",/^[gmi]*$/.test(t)||r.throwException(r.SYNTAX_ERROR,"Invalid regexp flag: "+t);try{var i=new o.nativeGlobal.RegExp(e,t)}catch(s){r.throwException(r.SYNTAX_ERROR,s.message)}return r.populateRegExp(n,i),n},this.REGEXP=this.createNativeFunction(t,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(e,"RegExp",this.REGEXP,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",o.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),t=function(e,t){var n=this.data;if(e=String(e),n.lastIndex=Number(r.getProperty(this,"lastIndex")),r.maybeThrowRegExp(n,t),2!==r.REGEXP_MODE)i=n.exec(e),r.setProperty(this,"lastIndex",n.lastIndex),t(u(i));else if(o.vm){var i,s={string:e,regexp:n};(i=r.vmCall("regexp.exec(string)",s,n,t))!==o.REGEXP_TIMEOUT&&(r.setProperty(this,"lastIndex",n.lastIndex),t(u(i)))}else{var a=r.createWorker(),l=r.regExpTimeout(n,a,t),c=this;a.onmessage=function(e){clearTimeout(l),r.setProperty(c,"lastIndex",e.data[1]),t(u(e.data[0]))},a.postMessage(["exec",n,n.lastIndex,e])}function u(e){if(e){var t=r.arrayNativeToPseudo(e);return r.setProperty(t,"index",e.index),r.setProperty(t,"input",e.input),t}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",t)},o.prototype.initError=function(e){var t=this;this.ERROR=this.createNativeFunction((function(e){if(t.calledWithNew())var r=this;else r=t.createObject(t.ERROR);return t.populateError(r,e),r}),!0),this.setProperty(e,"Error",this.ERROR,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",o.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",o.NONENUMERABLE_DESCRIPTOR);var r=function(r){var n=t.createNativeFunction((function(e){if(t.calledWithNew())var r=this;else r=t.createObject(n);return t.populateError(r,e),r}),!0);return t.setProperty(n,"prototype",t.createObject(t.ERROR),o.NONENUMERABLE_DESCRIPTOR),t.setProperty(n.properties.prototype,"name",r,o.NONENUMERABLE_DESCRIPTOR),t.setProperty(e,r,n,o.NONENUMERABLE_DESCRIPTOR),n};this.EVAL_ERROR=r("EvalError"),this.RANGE_ERROR=r("RangeError"),this.REFERENCE_ERROR=r("ReferenceError"),this.SYNTAX_ERROR=r("SyntaxError"),this.TYPE_ERROR=r("TypeError"),this.URI_ERROR=r("URIError")},o.prototype.initMath=function(e){var t=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"Math",t,o.NONENUMERABLE_DESCRIPTOR);for(var r=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],n=0;n<r.length;n++)this.setProperty(t,r[n],Math[r[n]],o.READONLY_NONENUMERABLE_DESCRIPTOR);var i=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"];for(n=0;n<i.length;n++)this.setProperty(t,i[n],this.createNativeFunction(Math[i[n]],!1),o.NONENUMERABLE_DESCRIPTOR)},o.prototype.initJSON=function(e){var t,r=this,n=r.createObjectProto(this.OBJECT_PROTO);this.setProperty(e,"JSON",n,o.NONENUMERABLE_DESCRIPTOR),t=function(e){try{var t=JSON.parse(String(e))}catch(o){r.throwException(r.SYNTAX_ERROR,o.message)}return r.nativeToPseudo(t)},this.setProperty(n,"parse",this.createNativeFunction(t,!1)),t=function(e,t,o){t&&"Function"===t.class?r.throwException(r.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):t=t&&"Array"===t.class?(t=r.arrayPseudoToNative(t)).filter((function(e){return"string"==typeof e||"number"==typeof e})):null,"string"!=typeof o&&"number"!=typeof o&&(o=void 0);var n=r.pseudoToNative(e);try{var i=JSON.stringify(n,t,o)}catch(s){r.throwException(r.TYPE_ERROR,s.message)}return i},this.setProperty(n,"stringify",this.createNativeFunction(t,!1))},o.prototype.isa=function(e,t){if(null==e||!t)return!1;var r=t.properties.prototype;if(e===r)return!0;for(e=this.getPrototype(e);e;){if(e===r)return!0;e=e.proto}return!1},o.prototype.populateRegExp=function(e,t){e.data=new RegExp(t.source,t.flags),this.setProperty(e,"lastIndex",t.lastIndex,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"source",t.source,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"global",t.global,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"ignoreCase",t.ignoreCase,o.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(e,"multiline",t.multiline,o.READONLY_NONENUMERABLE_DESCRIPTOR)},o.prototype.populateError=function(e,t){t&&this.setProperty(e,"message",String(t),o.NONENUMERABLE_DESCRIPTOR);for(var r=[],n=this.stateStack.length-1;n>=0;n--){var i=this.stateStack[n],s=i.node;if("CallExpression"===s.type){var a=i.func_;a&&r.length&&(r[r.length-1].datumName=this.getProperty(a,"name"))}!s.loc||r.length&&"CallExpression"!==s.type||r.push({datumLoc:s.loc})}var l=String(this.getProperty(e,"name"))+": "+String(this.getProperty(e,"message"))+"\n";for(n=0;n<r.length;n++){var c=r[n].datumLoc,u=r[n].datumName,d=c.source+":"+c.start.line+":"+c.start.column;l+=u?"  at "+u+" ("+d+")\n":"  at "+d+"\n"}this.setProperty(e,"stack",l.trim(),o.NONENUMERABLE_DESCRIPTOR)},o.prototype.createWorker=function(){var e=this.createWorker.blob_;return e||(e=new Blob([o.WORKER_CODE.join("\n")],{type:"application/javascript"}),this.createWorker.blob_=e),new Worker(URL.createObjectURL(e))},o.prototype.vmCall=function(e,t,r,n){var i={timeout:this.REGEXP_THREAD_TIMEOUT};try{return o.vm.runInNewContext(e,t,i)}catch(s){n(null),this.throwException(this.ERROR,"RegExp Timeout: "+r)}return o.REGEXP_TIMEOUT},o.prototype.maybeThrowRegExp=function(e,t){var n;if(0===this.REGEXP_MODE)n=!1;else if(1===this.REGEXP_MODE)n=!0;else if(o.vm)n=!0;else if("function"==typeof Worker&&"function"==typeof URL)n=!0;else{try{o.vm=r(/*! vm */"vm")}catch(i){}n=!!o.vm}n||(t(null),this.throwException(this.ERROR,"Regular expressions not supported: "+e))},o.prototype.regExpTimeout=function(e,t,r){var o=this;return setTimeout((function(){t.terminate(),r(null);try{o.throwException(o.ERROR,"RegExp Timeout: "+e)}catch(n){}}),this.REGEXP_THREAD_TIMEOUT)},o.prototype.createObject=function(e){return this.createObjectProto(e&&e.properties.prototype)},o.prototype.createObjectProto=function(e){if("object"!=typeof e)throw Error("Non object prototype");var t=new o.Object(e);return this.isa(t,this.ERROR)&&(t.class="Error"),t},o.prototype.createArray=function(){var e=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(e,"length",0,{configurable:!1,enumerable:!1,writable:!0}),e.class="Array",e},o.prototype.createFunctionBase_=function(e,t){var r=this.createObjectProto(this.FUNCTION_PROTO);if(t){var n=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(r,"prototype",n,o.NONENUMERABLE_DESCRIPTOR),this.setProperty(n,"constructor",r,o.NONENUMERABLE_DESCRIPTOR)}else r.illegalConstructor=!0;return this.setProperty(r,"length",e,o.READONLY_NONENUMERABLE_DESCRIPTOR),r.class="Function",r},o.prototype.createFunction=function(e,t,r){var n=this.createFunctionBase_(e.params.length,!0);n.parentScope=t,n.node=e;var i=e.id?String(e.id.name):r||"";return this.setProperty(n,"name",i,o.READONLY_NONENUMERABLE_DESCRIPTOR),n},o.prototype.createNativeFunction=function(e,t){var r=this.createFunctionBase_(e.length,t);return r.nativeFunc=e,e.id=this.functionCounter_++,this.setProperty(r,"name",e.name,o.READONLY_NONENUMERABLE_DESCRIPTOR),r},o.prototype.createAsyncFunction=function(e){var t=this.createFunctionBase_(e.length,!0);return t.asyncFunc=e,e.id=this.functionCounter_++,this.setProperty(t,"name",e.name,o.READONLY_NONENUMERABLE_DESCRIPTOR),t},o.prototype.nativeToPseudo=function(e){if(e instanceof o.Object)throw Error("Object is already pseudo");if(null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e)return e;if(e instanceof RegExp){var t=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(t,e),t}if(e instanceof Date){var r=this.createObjectProto(this.DATE_PROTO);return r.data=new Date(e.valueOf()),r}if("function"==typeof e){var n=this,i=Object.getOwnPropertyDescriptor(e,"prototype");return this.createNativeFunction((function(){var t=Array.prototype.slice.call(arguments).map((function(e){return n.pseudoToNative(e)})),r=e.apply(n,t);return n.nativeToPseudo(r)}),!!i)}if(Array.isArray(e)){for(var s=this.createArray(),a=0;a<e.length;a++)a in e&&this.setProperty(s,a,this.nativeToPseudo(e[a]));return s}var l=this.createObjectProto(this.OBJECT_PROTO);for(var c in e)this.setProperty(l,c,this.nativeToPseudo(e[c]));return l},o.prototype.pseudoToNative=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)return e;if(!(e instanceof o.Object))throw Error("Object is not pseudo");if(this.isa(e,this.REGEXP)){var r=new RegExp(e.data.source,e.data.flags);return r.lastIndex=e.data.lastIndex,r}if(this.isa(e,this.DATE))return new Date(e.data.valueOf());var n,i=t||{pseudo:[],native:[]},s=i.pseudo.indexOf(e);if(-1!==s)return i.native[s];if(i.pseudo.push(e),this.isa(e,this.ARRAY)){n=[],i.native.push(n);for(var a=this.getProperty(e,"length"),l=0;l<a;l++)this.hasProperty(e,l)&&(n[l]=this.pseudoToNative(this.getProperty(e,l),i))}else{var c;for(var u in n={},i.native.push(n),e.properties)c=this.pseudoToNative(e.properties[u],i),Object.defineProperty(n,u,{value:c,writable:!0,enumerable:!0,configurable:!0})}return i.pseudo.pop(),i.native.pop(),n},o.prototype.arrayNativeToPseudo=function(e){for(var t=this.createArray(),r=Object.getOwnPropertyNames(e),o=0;o<r.length;o++)this.setProperty(t,r[o],e[r[o]]);return t},o.prototype.arrayPseudoToNative=function(e){var t=[];for(var r in e.properties)t[r]=this.getProperty(e,r);return t.length=o.legalArrayLength(this.getProperty(e,"length"))||0,t},o.prototype.getPrototype=function(e){switch(typeof e){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return e?e.proto:null},o.prototype.getProperty=function(e,t){if(this.getterStep_)throw Error("Getter not supported in that context");if(t=String(t),null==e&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+t+"' of "+e),"object"==typeof e&&!(e instanceof o.Object))throw TypeError("Expecting native value or pseudo object");if("length"===t){if(this.isa(e,this.STRING))return String(e).length}else if(t.charCodeAt(0)<64&&this.isa(e,this.STRING)){var r=o.legalArrayIndex(t);if(!isNaN(r)&&r<String(e).length)return String(e)[r]}do{if(e.properties&&t in e.properties){var n=e.getter[t];return n?(this.getterStep_=!0,n):e.properties[t]}}while(e=this.getPrototype(e))},o.prototype.hasProperty=function(e,t){if(!(e instanceof o.Object))throw TypeError("Primitive data type has no properties");if("length"===(t=String(t))&&this.isa(e,this.STRING))return!0;if(this.isa(e,this.STRING)){var r=o.legalArrayIndex(t);if(!isNaN(r)&&r<String(e).length)return!0}do{if(e.properties&&t in e.properties)return!0}while(e=this.getPrototype(e));return!1},o.prototype.setProperty=function(e,t,r,n){if(this.setterStep_)throw Error("Setter not supported in that context");if(t=String(t),null==e&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+t+"' of "+e),"object"==typeof e&&!(e instanceof o.Object))throw TypeError("Expecting native value or pseudo object");n&&("get"in n||"set"in n)&&("value"in n||"writable"in n)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var i=!this.stateStack||this.getScope().strict;if(e instanceof o.Object){if(this.isa(e,this.STRING)){var s=o.legalArrayIndex(t);if("length"===t||!isNaN(s)&&s<String(e).length)return void(i&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+t+"' of String '"+e.data+"'"))}if("Array"===e.class){var a,l=e.properties.length;if("length"===t){if(n){if(!("value"in n))return;r=n.value}if(r=o.legalArrayLength(r),isNaN(r)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),r<l)for(a in e.properties)a=o.legalArrayIndex(a),!isNaN(a)&&r<=a&&delete e.properties[a]}else isNaN(a=o.legalArrayIndex(t))||(e.properties.length=Math.max(l,a+1))}if(!e.preventExtensions||t in e.properties)if(n){var c={};"get"in n&&n.get&&(e.getter[t]=n.get,c.get=this.setProperty.placeholderGet_),"set"in n&&n.set&&(e.setter[t]=n.set,c.set=this.setProperty.placeholderSet_),"configurable"in n&&(c.configurable=n.configurable),"enumerable"in n&&(c.enumerable=n.enumerable),"writable"in n&&(c.writable=n.writable,delete e.getter[t],delete e.setter[t]),"value"in n?(c.value=n.value,delete e.getter[t],delete e.setter[t]):r!==o.VALUE_IN_DESCRIPTOR&&(c.value=r,delete e.getter[t],delete e.setter[t]);try{Object.defineProperty(e.properties,t,c)}catch(d){this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+t)}"get"in n&&!n.get&&delete e.getter[t],"set"in n&&!n.set&&delete e.setter[t]}else{if(r===o.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var u=e;!(t in u.properties);)if(!(u=this.getPrototype(u))){u=e;break}if(u.setter&&u.setter[t])return this.setterStep_=!0,u.setter[t];if(u.getter&&u.getter[t])i&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+t+"' of object '"+e+"' which only has a getter");else try{e.properties[t]=r}catch(p){i&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+t+"' of object '"+e+"'")}}else i&&this.throwException(this.TYPE_ERROR,"Can't add property '"+t+"', object is not extensible")}else i&&this.throwException(this.TYPE_ERROR,"Can't create property '"+t+"' on '"+e+"'")},o.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},o.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},o.prototype.setNativeFunctionPrototype=function(e,t,r){this.setProperty(e.properties.prototype,t,this.createNativeFunction(r,!1),o.NONENUMERABLE_DESCRIPTOR)},o.prototype.setAsyncFunctionPrototype=function(e,t,r){this.setProperty(e.properties.prototype,t,this.createAsyncFunction(r),o.NONENUMERABLE_DESCRIPTOR)},o.prototype.getScope=function(){var e=this.stateStack[this.stateStack.length-1].scope;if(!e)throw Error("No scope found");return e},o.prototype.createScope=function(e,t){var r=!1;if(t&&t.strict)r=!0;else{var n=e.body&&e.body[0];n&&n.expression&&"Literal"===n.expression.type&&"use strict"===n.expression.value&&(r=!0)}var i=this.createObjectProto(null),s=new o.Scope(t,r,i);return t||this.initGlobal(s.object),this.populateScope_(e,s),s},o.prototype.createSpecialScope=function(e,t){if(!e)throw Error("parentScope required");var r=t||this.createObjectProto(null);return new o.Scope(e,e.strict,r)},o.prototype.getValueFromScope=function(e){for(var t=this.getScope();t&&t!==this.globalScope;){if(e in t.object.properties)return t.object.properties[e];t=t.parentScope}if(t===this.globalScope&&this.hasProperty(t.object,e))return this.getProperty(t.object,e);var r=this.stateStack[this.stateStack.length-1].node;"UnaryExpression"===r.type&&"typeof"===r.operator||this.throwException(this.REFERENCE_ERROR,e+" is not defined")},o.prototype.setValueToScope=function(e,t){for(var r=this.getScope(),o=r.strict;r&&r!==this.globalScope;){if(e in r.object.properties){try{r.object.properties[e]=t}catch(n){o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+e+"'")}return}r=r.parentScope}if(r===this.globalScope&&(!o||this.hasProperty(r.object,e)))return this.setProperty(r.object,e,t);this.throwException(this.REFERENCE_ERROR,e+" is not defined")},o.prototype.populateScope_=function(e,t){var r;if(e.variableCache_)r=e.variableCache_;else{switch(r=Object.create(null),e.type){case"VariableDeclaration":for(var n=0;n<e.declarations.length;n++)r[e.declarations[n].id.name]=!0;break;case"FunctionDeclaration":r[e.id.name]=e;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var i=e.constructor;for(var s in e)if("loc"!==s){var a,l=e[s];if(l&&"object"==typeof l)if(Array.isArray(l)){for(n=0;n<l.length;n++)if(l[n]&&l[n].constructor===i)for(var s in a=this.populateScope_(l[n],t))r[s]=a[s]}else if(l.constructor===i)for(var s in a=this.populateScope_(l,t))r[s]=a[s]}}e.variableCache_=r}for(var s in r)!0===r[s]?this.setProperty(t.object,s,void 0,o.VARIABLE_DESCRIPTOR):this.setProperty(t.object,s,this.createFunction(r[s],t),o.VARIABLE_DESCRIPTOR);return r},o.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},o.prototype.getValue=function(e){return e[0]===o.SCOPE_REFERENCE?this.getValueFromScope(e[1]):this.getProperty(e[0],e[1])},o.prototype.setValue=function(e,t){return e[0]===o.SCOPE_REFERENCE?this.setValueToScope(e[1],t):this.setProperty(e[0],e[1],t)},o.prototype.throwException=function(e,t){if(!this.globalScope)throw void 0===t?e:t;if(void 0!==t&&e instanceof o.Object)r=this.createObject(e),this.populateError(r,t);else var r=e;throw this.unwind(o.Completion.THROW,r,void 0),o.STEP_ERROR},o.prototype.unwind=function(e,t,r){if(e===o.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var n=this.stateStack;n.length>0;n.pop()){var i=n[n.length-1];switch(i.node.type){case"TryStatement":return void(i.cv={type:e,value:t,label:r});case"CallExpression":case"NewExpression":if(e===o.Completion.RETURN)return void(i.value=t);if(e!==o.Completion.THROW)throw Error("Unsynatctic break/continue not rejected by Acorn");break;case"Program":i.done=!0;break e}if(e===o.Completion.BREAK){if(r?i.labels&&-1!==i.labels.indexOf(r):i.isLoop||i.isSwitch)return void n.pop()}else if(e===o.Completion.CONTINUE&&(r?i.labels&&-1!==i.labels.indexOf(r):i.isLoop))return}var s;if(this.isa(t,this.ERROR)){var a={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},l=String(this.getProperty(t,"name")),c=this.getProperty(t,"message").valueOf();(s=(a[l]||Error)(c)).stack=String(this.getProperty(t,"stack"))}else s=String(t);throw this.value=s,s},o.prototype.nodeSummary=function(e){switch(e.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(e.left)+" "+e.operator+" "+this.nodeSummary(e.right);case"CallExpression":return this.nodeSummary(e.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(e.test)+" ? "+this.nodeSummary(e.consequent)+" : "+this.nodeSummary(e.alternate);case"Identifier":return e.name;case"Literal":return e.raw;case"MemberExpression":var t=this.nodeSummary(e.object),r=this.nodeSummary(e.property);return e.computed?t+"["+r+"]":t+"."+r;case"NewExpression":return"new "+this.nodeSummary(e.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return e.operator+" "+this.nodeSummary(e.argument);case"UpdateExpression":var o=this.nodeSummary(e.argument);return e.prefix?e.operator+o:o+e.operator}return"???"},o.prototype.createTask_=function(e,t){var r,n,i,s=this.stateStack[this.stateStack.length-1],a=Array.from(t),l=a.shift(),c=Math.max(Number(a.shift()||0),0),u=this.newNode();if(l instanceof o.Object&&"Function"===l.class)n=l,u.type="CallExpression",r=s.scope;else{try{i=this.parse_(String(l),"taskCode"+this.taskCodeNumber_++)}catch(g){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+g.message)}u.type="EvalProgram_",u.body=i.body;var d=s.node.arguments[0],p=d?d.start:void 0,h=d?d.end:void 0;o.stripLocations_(u,p,h),r=this.globalScope,a.length=0}var f=new o.Task(n,a,r,u,e?c:-1);return this.scheduleTask_(f,c),f.pid},o.prototype.scheduleTask_=function(e,t){e.time=Date.now()+t,this.tasks.push(e),this.tasks.sort((function(e,t){return e.time-t.time}))},o.prototype.deleteTask_=function(e){for(var t=0;t<this.tasks.length;t++)if(this.tasks[t].pid==e){this.tasks.splice(t,1);break}},o.prototype.nextTask_=function(){var e=this.tasks[0];if(!e||e.time>Date.now())return null;this.tasks.shift(),e.interval>=0&&this.scheduleTask_(e,e.interval);var t=new o.State(e.node,e.scope);return e.functionRef&&(t.doneCallee_=2,t.funcThis_=this.globalObject,t.func_=e.functionRef,t.doneArgs_=!0,t.arguments_=e.argsArray),t},o.prototype.createGetter_=function(e,t){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var r=Array.isArray(t)?t[0]:t,n=this.newNode();n.type="CallExpression";var i=new o.State(n,this.stateStack[this.stateStack.length-1].scope);return i.doneCallee_=2,i.funcThis_=r,i.func_=e,i.doneArgs_=!0,i.arguments_=[],i},o.prototype.createSetter_=function(e,t,r){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var n=Array.isArray(t)?t[0]:this.globalObject,i=this.newNode();i.type="CallExpression";var s=new o.State(i,this.stateStack[this.stateStack.length-1].scope);return s.doneCallee_=2,s.funcThis_=n,s.func_=e,s.doneArgs_=!0,s.arguments_=[r],s},o.prototype.boxThis_=function(e){if(null==e)return this.globalObject;if(!(e instanceof o.Object)){var t=this.createObjectProto(this.getPrototype(e));return t.data=e,t}return e},o.prototype.getGlobalScope=function(){return this.globalScope},o.prototype.getStateStack=function(){return this.stateStack},o.prototype.setStateStack=function(e){this.stateStack=e},o.Value,o.State=function(e,t){this.node=e,this.scope=t},o.Scope=function(e,t,r){this.parentScope=e,this.strict=t,this.object=r},o.Object=function(e){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=e},o.Object.prototype.proto=null,o.Object.prototype.class="Object",o.Object.prototype.data=null,o.Object.prototype.toString=function(){if(!o.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof o.Object))return String(this);if("Array"===this.class){(s=o.toStringCycles_).push(this);try{var e=[],t=this.properties.length,r=!1;t>1024&&(t=1e3,r=!0);for(var n=0;n<t;n++){var i=this.properties[n];e[n]=i instanceof o.Object&&-1!==s.indexOf(i)?"...":i}r&&e.push("...")}finally{s.pop()}return e.join(",")}if("Error"===this.class){var s,a,l;if(-1!==(s=o.toStringCycles_).indexOf(this))return"[object Error]";var c=this;do{if("name"in c.properties){a=c.properties.name;break}}while(c=c.proto);c=this;do{if("message"in c.properties){l=c.properties.message;break}}while(c=c.proto);s.push(this);try{a=a&&String(a),l=l&&String(l)}finally{s.pop()}return l?a+": "+l:String(a)}return null!==this.data?String(this.data):"[object "+this.class+"]"},o.Object.prototype.valueOf=function(){return o.currentInterpreter_?void 0===this.data||null===this.data||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},o.Task=function(e,t,r,n,i){this.functionRef=e,this.argsArray=t,this.scope=r,this.node=n,this.interval=i,this.pid=++o.Task.pid,this.time=0},o.Task.pid=0,o.prototype.stepArrayExpression=function(e,t,r){var n=r.elements,i=t.n_||0;for(t.array_?(this.setProperty(t.array_,i,t.value),i++):(t.array_=this.createArray(),t.array_.properties.length=n.length);i<n.length;){if(n[i])return t.n_=i,new o.State(n[i],t.scope);i++}e.pop(),e[e.length-1].value=t.array_},o.prototype.stepAssignmentExpression=function(e,t,r){if(!t.doneLeft_){t.doneLeft_=!0;var n=new o.State(r.left,t.scope);return n.components=!0,n}if(!t.doneRight_){if(t.leftReference_||(t.leftReference_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_&&"="!==r.operator){var i=this.getValue(t.leftReference_);if(t.leftValue_=i,this.getterStep_){t.doneGetter_=!0;var s=i;return this.createGetter_(s,t.leftReference_)}}return t.doneRight_=!0,"="===r.operator&&"Identifier"===r.left.type&&(t.destinationName=r.left.name),new o.State(r.right,t.scope)}if(t.doneSetter_)return e.pop(),void(e[e.length-1].value=t.setterValue_);var a=t.leftValue_,l=t.value;switch(r.operator){case"=":a=l;break;case"+=":a+=l;break;case"-=":a-=l;break;case"*=":a*=l;break;case"/=":a/=l;break;case"%=":a%=l;break;case"<<=":a<<=l;break;case">>=":a>>=l;break;case">>>=":a>>>=l;break;case"&=":a&=l;break;case"^=":a^=l;break;case"|=":a|=l;break;default:throw SyntaxError("Unknown assignment expression: "+r.operator)}var c=this.setValue(t.leftReference_,a);if(c)return t.doneSetter_=!0,t.setterValue_=a,this.createSetter_(c,t.leftReference_,a);e.pop(),e[e.length-1].value=a},o.prototype.stepBinaryExpression=function(e,t,r){if(!t.doneLeft_)return t.doneLeft_=!0,new o.State(r.left,t.scope);if(!t.doneRight_)return t.doneRight_=!0,t.leftValue_=t.value,new o.State(r.right,t.scope);e.pop();var n,i=t.leftValue_,s=t.value;switch(r.operator){case"==":n=i==s;break;case"!=":n=i!=s;break;case"===":n=i===s;break;case"!==":n=i!==s;break;case">":n=i>s;break;case">=":n=i>=s;break;case"<":n=i<s;break;case"<=":n=i<=s;break;case"+":n=i+s;break;case"-":n=i-s;break;case"*":n=i*s;break;case"/":n=i/s;break;case"%":n=i%s;break;case"&":n=i&s;break;case"|":n=i|s;break;case"^":n=i^s;break;case"<<":n=i<<s;break;case">>":n=i>>s;break;case">>>":n=i>>>s;break;case"in":s instanceof o.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+s+"'"),n=this.hasProperty(s,i);break;case"instanceof":this.isa(s,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+s+"'"),n=i instanceof o.Object&&this.isa(i,s);break;default:throw SyntaxError("Unknown binary operator: "+r.operator)}e[e.length-1].value=n},o.prototype.stepBlockStatement=function(e,t,r){var n=t.n_||0,i=r.body[n];if(i)return t.n_=n+1,new o.State(i,t.scope);e.pop()},o.prototype.stepBreakStatement=function(e,t,r){var n=r.label&&r.label.name;this.unwind(o.Completion.BREAK,void 0,n)},o.prototype.evalCodeNumber_=0,o.prototype.stepCallExpression=function(e,t,r){if(!t.doneCallee_){t.doneCallee_=1;var n=new o.State(r.callee,t.scope);return n.components=!0,n}if(1===t.doneCallee_){t.doneCallee_=2;var i=t.value;if(Array.isArray(i)){if(t.func_=this.getValue(i),i[0]===o.SCOPE_REFERENCE?t.directEval_="eval"===i[1]:t.funcThis_=i[0],i=t.func_,this.getterStep_)return t.doneCallee_=1,this.createGetter_(i,t.value)}else t.func_=i;t.arguments_=[],t.n_=0}if(i=t.func_,!t.doneArgs_){if(0!==t.n_&&t.arguments_.push(t.value),r.arguments[t.n_])return new o.State(r.arguments[t.n_++],t.scope);if("NewExpression"===r.type){if(i instanceof o.Object&&!i.illegalConstructor||this.throwException(this.TYPE_ERROR,this.nodeSummary(r.callee)+" is not a constructor"),i===this.ARRAY)t.funcThis_=this.createArray();else{var s=i.properties.prototype;"object"==typeof s&&null!==s||(s=this.OBJECT_PROTO),t.funcThis_=this.createObjectProto(s)}t.isConstructor=!0}t.doneArgs_=!0}if(t.doneExec_)e.pop(),t.isConstructor&&"object"!=typeof t.value?e[e.length-1].value=t.funcThis_:e[e.length-1].value=t.value;else{t.doneExec_=!0,i instanceof o.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(r.callee)+" is not a function");var a=i.node;if(a){for(var l=this.createScope(a.body,i.parentScope),c=this.createArray(),u=0;u<t.arguments_.length;u++)this.setProperty(c,u,t.arguments_[u]);for(this.setProperty(l.object,"arguments",c),u=0;u<a.params.length;u++){var d=a.params[u].name,p=t.arguments_.length>u?t.arguments_[u]:void 0;this.setProperty(l.object,d,p)}return l.strict||(t.funcThis_=this.boxThis_(t.funcThis_)),this.setProperty(l.object,"this",t.funcThis_,o.READONLY_DESCRIPTOR),t.value=void 0,new o.State(a.body,l)}if(i.eval){var h=t.arguments_[0];if("string"==typeof h){try{var f=this.parse_(String(h),"eval"+this.evalCodeNumber_++)}catch(v){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+v.message)}var g=this.newNode();return g.type="EvalProgram_",g.body=f.body,o.stripLocations_(g,r.start,r.end),(l=t.directEval_?t.scope:this.globalScope).strict?l=this.createScope(f,l):this.populateScope_(f,l),this.value=void 0,new o.State(g,l)}t.value=h}else if(i.nativeFunc)t.scope.strict||(t.funcThis_=this.boxThis_(t.funcThis_)),t.value=i.nativeFunc.apply(t.funcThis_,t.arguments_);else{if(i.asyncFunc){var m=this,_=i.asyncFunc.length-1,E=t.arguments_.concat(new Array(_)).slice(0,_);return E.push((function(e){t.value=e,m.paused_=!1})),this.paused_=!0,t.scope.strict||(t.funcThis_=this.boxThis_(t.funcThis_)),void i.asyncFunc.apply(t.funcThis_,E)}this.throwException(this.TYPE_ERROR,this.nodeSummary(r.callee)+" is not callable")}}},o.prototype.stepConditionalExpression=function(e,t,r){var n=t.mode_||0;if(0===n)return t.mode_=1,new o.State(r.test,t.scope);if(1===n){t.mode_=2;var i=Boolean(t.value);if(i&&r.consequent)return new o.State(r.consequent,t.scope);if(!i&&r.alternate)return new o.State(r.alternate,t.scope);this.value=void 0}e.pop(),"ConditionalExpression"===r.type&&(e[e.length-1].value=t.value)},o.prototype.stepContinueStatement=function(e,t,r){var n=r.label&&r.label.name;this.unwind(o.Completion.CONTINUE,void 0,n)},o.prototype.stepDebuggerStatement=function(e,t,r){e.pop()},o.prototype.stepDoWhileStatement=function(e,t,r){if("DoWhileStatement"===r.type&&void 0===t.test_&&(t.value=!0,t.test_=!0),!t.test_)return t.test_=!0,new o.State(r.test,t.scope);if(t.value){if(r.body)return t.test_=!1,t.isLoop=!0,new o.State(r.body,t.scope)}else e.pop()},o.prototype.stepEmptyStatement=function(e,t,r){e.pop()},o.prototype.stepEvalProgram_=function(e,t,r){var n=t.n_||0,i=r.body[n];if(i)return t.n_=n+1,new o.State(i,t.scope);e.pop(),e[e.length-1].value=this.value},o.prototype.stepExpressionStatement=function(e,t,r){if(!t.done_)return this.value=void 0,t.done_=!0,new o.State(r.expression,t.scope);e.pop(),this.value=t.value},o.prototype.stepForInStatement=function(e,t,r){if(!t.doneInit_&&(t.doneInit_=!0,r.left.declarations&&r.left.declarations[0].init))return t.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new o.State(r.left,t.scope);if(!t.doneObject_)return t.doneObject_=!0,t.variable_||(t.variable_=t.value),new o.State(r.right,t.scope);if(t.isLoop||(t.isLoop=!0,t.object_=t.value,t.visited_=Object.create(null)),void 0===t.name_)e:for(;;){if(t.object_ instanceof o.Object){for(t.props_||(t.props_=Object.getOwnPropertyNames(t.object_.properties));void 0!==(n=t.props_.shift());)if(Object.prototype.hasOwnProperty.call(t.object_.properties,n)&&!t.visited_[n]&&(t.visited_[n]=!0,Object.prototype.propertyIsEnumerable.call(t.object_.properties,n))){t.name_=n;break e}}else if(null!==t.object_&&void 0!==t.object_)for(t.props_||(t.props_=Object.getOwnPropertyNames(t.object_));;){var n;if(void 0===(n=t.props_.shift()))break;if(t.visited_[n]=!0,Object.prototype.propertyIsEnumerable.call(t.object_,n)){t.name_=n;break e}}if(t.object_=this.getPrototype(t.object_),t.props_=null,null===t.object_)return void e.pop()}if(!t.doneVariable_){t.doneVariable_=!0;var i=r.left;if("VariableDeclaration"!==i.type){t.variable_=null;var s=new o.State(i,t.scope);return s.components=!0,s}t.variable_=[o.SCOPE_REFERENCE,i.declarations[0].id.name]}if(t.variable_||(t.variable_=t.value),!t.doneSetter_){t.doneSetter_=!0;var a=t.name_,l=this.setValue(t.variable_,a);if(l)return this.createSetter_(l,t.variable_,a)}return t.name_=void 0,t.doneVariable_=!1,t.doneSetter_=!1,r.body?new o.State(r.body,t.scope):void 0},o.prototype.stepForStatement=function(e,t,r){switch(t.mode_){default:if(t.mode_=1,r.init)return new o.State(r.init,t.scope);break;case 1:if(t.mode_=2,r.test)return new o.State(r.test,t.scope);break;case 2:if(t.mode_=3,!r.test||t.value)return t.isLoop=!0,new o.State(r.body,t.scope);e.pop();break;case 3:if(t.mode_=1,r.update)return new o.State(r.update,t.scope)}},o.prototype.stepFunctionDeclaration=function(e,t,r){e.pop()},o.prototype.stepFunctionExpression=function(e,t,r){e.pop();var n=(t=e[e.length-1]).scope;r.id&&(n=this.createSpecialScope(n)),t.value=this.createFunction(r,n,t.destinationName),r.id&&this.setProperty(n.object,r.id.name,t.value,o.READONLY_DESCRIPTOR)},o.prototype.stepIdentifier=function(e,t,r){if(e.pop(),t.components)e[e.length-1].value=[o.SCOPE_REFERENCE,r.name];else{var n=this.getValueFromScope(r.name);if(this.getterStep_){var i=n;return this.createGetter_(i,this.globalObject)}e[e.length-1].value=n}},o.prototype.stepIfStatement=o.prototype.stepConditionalExpression,o.prototype.stepLabeledStatement=function(e,t,r){e.pop();var n=t.labels||[];n.push(r.label.name);var i=new o.State(r.body,t.scope);return i.labels=n,i},o.prototype.stepLiteral=function(e,t,r){e.pop();var o=r.value;if(o instanceof RegExp){var n=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(n,o),o=n}e[e.length-1].value=o},o.prototype.stepLogicalExpression=function(e,t,r){if("&&"!==r.operator&&"||"!==r.operator)throw SyntaxError("Unknown logical operator: "+r.operator);if(!t.doneLeft_)return t.doneLeft_=!0,new o.State(r.left,t.scope);if(t.doneRight_)e.pop(),e[e.length-1].value=t.value;else{if(!("&&"===r.operator&&!t.value||"||"===r.operator&&t.value))return t.doneRight_=!0,new o.State(r.right,t.scope);e.pop(),e[e.length-1].value=t.value}},o.prototype.stepMemberExpression=function(e,t,r){if(!t.doneObject_)return t.doneObject_=!0,new o.State(r.object,t.scope);var n;if(r.computed){if(!t.doneProperty_)return t.object_=t.value,t.doneProperty_=!0,new o.State(r.property,t.scope);n=t.value}else t.object_=t.value,n=r.property.name;if(e.pop(),t.components)e[e.length-1].value=[t.object_,n];else{var i=this.getProperty(t.object_,n);if(this.getterStep_){var s=i;return this.createGetter_(s,t.object_)}e[e.length-1].value=i}},o.prototype.stepNewExpression=o.prototype.stepCallExpression,o.prototype.stepObjectExpression=function(e,t,r){var n=t.n_||0,i=r.properties[n];if(t.object_){var s=t.destinationName;t.properties_[s]||(t.properties_[s]={}),t.properties_[s][i.kind]=t.value,t.n_=++n,i=r.properties[n]}else t.object_=this.createObjectProto(this.OBJECT_PROTO),t.properties_=Object.create(null);if(i){if("Identifier"===(a=i.key).type)s=a.name;else{if("Literal"!==a.type)throw SyntaxError("Unknown object structure: "+a.type);s=a.value}return t.destinationName=s,new o.State(i.value,t.scope)}for(var a in t.properties_){var l=t.properties_[a];if("get"in l||"set"in l){var c={configurable:!0,enumerable:!0,get:l.get,set:l.set};this.setProperty(t.object_,a,o.VALUE_IN_DESCRIPTOR,c)}else this.setProperty(t.object_,a,l.init)}e.pop(),e[e.length-1].value=t.object_},o.prototype.stepProgram=function(e,t,r){var n=r.body.shift();if(n)return t.done=!1,new o.State(n,t.scope);t.done=!0},o.prototype.stepReturnStatement=function(e,t,r){if(r.argument&&!t.done_)return t.done_=!0,new o.State(r.argument,t.scope);this.unwind(o.Completion.RETURN,t.value,void 0)},o.prototype.stepSequenceExpression=function(e,t,r){var n=t.n_||0,i=r.expressions[n];if(i)return t.n_=n+1,new o.State(i,t.scope);e.pop(),e[e.length-1].value=t.value},o.prototype.stepSwitchStatement=function(e,t,r){if(!t.test_)return t.test_=1,new o.State(r.discriminant,t.scope);for(1===t.test_&&(t.test_=2,t.switchValue_=t.value,t.defaultCase_=-1);;){var n=t.index_||0,i=r.cases[n];if(t.matched_||!i||i.test)if(i||t.matched_||-1===t.defaultCase_){if(!i)return void e.pop();if(!t.matched_&&!t.tested_&&i.test)return t.tested_=!0,new o.State(i.test,t.scope);if(t.matched_||t.value===t.switchValue_){t.matched_=!0;var s=t.n_||0;if(i.consequent[s])return t.isSwitch=!0,t.n_=s+1,new o.State(i.consequent[s],t.scope)}t.tested_=!1,t.n_=0,t.index_=n+1}else t.matched_=!0,t.index_=t.defaultCase_;else t.defaultCase_=n,t.index_=n+1}},o.prototype.stepThisExpression=function(e,t,r){e.pop(),e[e.length-1].value=this.getValueFromScope("this")},o.prototype.stepThrowStatement=function(e,t,r){if(!t.done_)return t.done_=!0,new o.State(r.argument,t.scope);this.throwException(t.value)},o.prototype.stepTryStatement=function(e,t,r){if(!t.doneBlock_)return t.doneBlock_=!0,new o.State(r.block,t.scope);if(t.cv&&t.cv.type===o.Completion.THROW&&!t.doneHandler_&&r.handler){t.doneHandler_=!0;var n=this.createSpecialScope(t.scope);return this.setProperty(n.object,r.handler.param.name,t.cv.value),t.cv=void 0,new o.State(r.handler.body,n)}if(!t.doneFinalizer_&&r.finalizer)return t.doneFinalizer_=!0,new o.State(r.finalizer,t.scope);e.pop(),t.cv&&this.unwind(t.cv.type,t.cv.value,t.cv.label)},o.prototype.stepUnaryExpression=function(e,t,r){if(!t.done_){t.done_=!0;var n=new o.State(r.argument,t.scope);return n.components="delete"===r.operator,n}e.pop();var i=t.value;switch(r.operator){case"-":i=-i;break;case"+":i=+i;break;case"!":i=!i;break;case"~":i=~i;break;case"delete":var s=!0;if(Array.isArray(i)){var a=i[0];a===o.SCOPE_REFERENCE&&(a=t.scope);var l=String(i[1]);try{delete a.properties[l]}catch(c){t.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+l+"' of '"+a+"'"):s=!1}}i=s;break;case"typeof":i=i&&"Function"===i.class?"function":typeof i;break;case"void":i=void 0;break;default:throw SyntaxError("Unknown unary operator: "+r.operator)}e[e.length-1].value=i},o.prototype.stepUpdateExpression=function(e,t,r){if(!t.doneLeft_){t.doneLeft_=!0;var n=new o.State(r.argument,t.scope);return n.components=!0,n}if(t.leftSide_||(t.leftSide_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_){var i=this.getValue(t.leftSide_);if(t.leftValue_=i,this.getterStep_){t.doneGetter_=!0;var s=i;return this.createGetter_(s,t.leftSide_)}}if(t.doneSetter_)return e.pop(),void(e[e.length-1].value=t.setterValue_);var a;if(i=Number(t.leftValue_),"++"===r.operator)a=i+1;else{if("--"!==r.operator)throw SyntaxError("Unknown update expression: "+r.operator);a=i-1}var l=r.prefix?a:i,c=this.setValue(t.leftSide_,a);if(c)return t.doneSetter_=!0,t.setterValue_=l,this.createSetter_(c,t.leftSide_,a);e.pop(),e[e.length-1].value=l},o.prototype.stepVariableDeclaration=function(e,t,r){var n=r.declarations,i=t.n_||0,s=n[i];for(t.init_&&s&&(this.setValueToScope(s.id.name,t.value),t.init_=!1,s=n[++i]);s;){if(s.init)return t.n_=i,t.init_=!0,t.destinationName=s.id.name,new o.State(s.init,t.scope);s=n[++i]}e.pop()},o.prototype.stepWithStatement=function(e,t,r){if(!t.doneObject_)return t.doneObject_=!0,new o.State(r.object,t.scope);e.pop();var n=this.createSpecialScope(t.scope,t.value);return new o.State(r.body,n)},o.prototype.stepWhileStatement=o.prototype.stepDoWhileStatement,o.nativeGlobal.Interpreter=o,o.prototype.step=o.prototype.step,o.prototype.run=o.prototype.run,o.prototype.appendCode=o.prototype.appendCode,o.prototype.createObject=o.prototype.createObject,o.prototype.createObjectProto=o.prototype.createObjectProto,o.prototype.createAsyncFunction=o.prototype.createAsyncFunction,o.prototype.createNativeFunction=o.prototype.createNativeFunction,o.prototype.getProperty=o.prototype.getProperty,o.prototype.setProperty=o.prototype.setProperty,o.prototype.nativeToPseudo=o.prototype.nativeToPseudo,o.prototype.pseudoToNative=o.prototype.pseudoToNative,o.prototype.getGlobalScope=o.prototype.getGlobalScope,o.prototype.getStateStack=o.prototype.getStateStack,o.prototype.setStateStack=o.prototype.setStateStack,o.VALUE_IN_DESCRIPTOR=o.VALUE_IN_DESCRIPTOR,e.exports={Interpreter:o}},"./original-repo/acorn.js":
/*!********************************!*\
      	  !*** ./original-repo/acorn.js ***!
      	  \********************************/function(e,t){!function(e){var t;e.version="0.5.0";var r,o,n="";e.parse=function(e,o){return n=String(e),r=n.length,s(o),We(),Ct(t.program)};var i={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(e){for(var r in t=e||{},i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r]);o=t.sourceFile}var a,l,c,u,d,p,h,f,g,m,_,E=function(e,t){for(var r=1,o=0;;){Ve.lastIndex=o;var n=Ve.exec(e);if(!(n&&n.index<t))break;++r,o=n.index+n[0].length}return{line:r,column:t-o}},v=0,y=0,b=0,T=0,N=0;function R(e,t){var r=E(n,e);t+=" ("+r.line+":"+r.column+")";var o=new SyntaxError(t);throw o.pos=e,o.loc=r,o.raisedAt=v,o}var O=[],w={type:"num"},x={type:"regexp"},P={type:"string"},C={type:"name"},S={type:"eof"},I={keyword:"break"},k={keyword:"case",beforeExpr:!0},A={keyword:"catch"},M={keyword:"continue"},L={keyword:"debugger"},F={keyword:"default"},D={keyword:"do",isLoop:!0},U={keyword:"else",beforeExpr:!0},B={keyword:"finally"},j={keyword:"for",isLoop:!0},V={keyword:"function"},$={keyword:"if"},G={keyword:"return",beforeExpr:!0},Y={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},z={keyword:"try"},X={keyword:"var"},H={keyword:"while",isLoop:!0},J={keyword:"with"},K={keyword:"new",beforeExpr:!0},q={keyword:"this"},Z={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},re={break:I,case:k,catch:A,continue:M,debugger:L,default:F,do:D,else:U,finally:B,for:j,function:V,if:$,return:G,switch:Y,throw:W,try:z,var:X,while:H,with:J,null:Z,true:Q,false:ee,new:K,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:q,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},oe={type:"[",beforeExpr:!0},ne={type:"]"},ie={type:"{",beforeExpr:!0},se={type:"}"},ae={type:"(",beforeExpr:!0},le={type:")"},ce={type:",",beforeExpr:!0},ue={type:";",beforeExpr:!0},de={type:":",beforeExpr:!0},pe={type:"."},he={type:"?",beforeExpr:!0},fe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},_e={postfix:!0,prefix:!0,isUpdate:!0},Ee={prefix:!0,beforeExpr:!0},ve={binop:1,beforeExpr:!0},ye={binop:2,beforeExpr:!0},be={binop:3,beforeExpr:!0},Te={binop:4,beforeExpr:!0},Ne={binop:5,beforeExpr:!0},Re={binop:6,beforeExpr:!0},Oe={binop:7,beforeExpr:!0},we={binop:8,beforeExpr:!0},xe={binop:9,prefix:!0,beforeExpr:!0},Pe={binop:10,beforeExpr:!0};function Ce(e){for(var t=e.split(" "),r=Object.create(null),o=0;o<t.length;o++)r[t[o]]=!0;return function(e){return r[e]||!1}}var Se,Ie=Ce("class enum extends super const export import"),ke=Ce("implements interface let package private protected public static yield"),Ae=Ce("eval arguments"),Me=Ce("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Le=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Fe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",De="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Ue=new RegExp("["+Fe+"]"),Be=new RegExp("["+Fe+De+"]"),je=/[\n\r\u2028\u2029]/,Ve=/\r\n|[\n\r\u2028\u2029]/g,$e=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&Ue.test(String.fromCharCode(e)))},Ge=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Be.test(String.fromCharCode(e))))};function Ye(){this.line=p,this.column=v-h}function We(){p=1,v=h=0,d=!0,Je()}function ze(e,r){b=v,t.locations&&(l=new Ye),c=e,Je(),u=r,d=e.beforeExpr}function Xe(){var e,r=t.onComment&&t.locations&&new Ye,o=v,i=n.indexOf("*/",v+=2);if(-1===i&&R(v-2,"Unterminated comment"),v=i+2,t.locations)for(Ve.lastIndex=o;(e=Ve.exec(n))&&e.index<v;)++p,h=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(o+2,i),o,v,r,t.locations&&new Ye)}function He(){for(var e=v,o=t.onComment&&t.locations&&new Ye,i=n.charCodeAt(v+=2);v<r&&10!==i&&13!==i&&8232!==i&&8233!==i;)++v,i=n.charCodeAt(v);t.onComment&&t.onComment(!1,n.slice(e+2,v),e,v,o,t.locations&&new Ye)}function Je(){for(;v<r;){var e=n.charCodeAt(v);if(32===e)++v;else if(13===e)++v,10===(o=n.charCodeAt(v))&&++v,t.locations&&(++p,h=v);else if(10===e||8232===e||8233===e)++v,t.locations&&(++p,h=v);else if(e>8&&e<14)++v;else if(47===e){var o;if(42===(o=n.charCodeAt(v+1)))Xe();else{if(47!==o)break;He()}}else if(160===e)++v;else{if(!(e>=5760&&Le.test(String.fromCharCode(e))))break;++v}}}function Ke(){var e=n.charCodeAt(v+1);e>=48&&e<=57?ut(!0):(++v,ze(pe))}function qe(){var e=n.charCodeAt(v+1);d?(++v,at()):61===e?st(me,2):st(fe,1)}function Ze(){61===n.charCodeAt(v+1)?st(me,2):st(Pe,1)}function Qe(e){var t=n.charCodeAt(v+1);t===e?st(124===e?ve:ye,2):61===t?st(me,2):st(124===e?be:Ne,1)}function et(){61===n.charCodeAt(v+1)?st(me,2):st(Te,1)}function tt(e){var t=n.charCodeAt(v+1);if(t===e){if(45===t&&62===n.charCodeAt(v+2)&&je.test(n.slice(N,v)))return v+=3,He(),Je(),void it();st(_e,2)}else 61===t?st(me,2):st(xe,1)}function rt(e){var t=n.charCodeAt(v+1),r=1;return t===e?(r=62===e&&62===n.charCodeAt(v+2)?3:2,void(61===n.charCodeAt(v+r)?st(me,r+1):st(we,r))):33===t&&60===e&&45===n.charCodeAt(v+2)&&45===n.charCodeAt(v+3)?(v+=4,He(),Je(),void it()):(61===t&&(r=61===n.charCodeAt(v+2)?3:2),void st(Oe,r))}function ot(e){61===n.charCodeAt(v+1)?st(Re,61===n.charCodeAt(v+2)?3:2):st(61===e?ge:Ee,1)}function nt(e){switch(e){case 46:return Ke();case 40:return++v,ze(ae);case 41:return++v,ze(le);case 59:return++v,ze(ue);case 44:return++v,ze(ce);case 91:return++v,ze(oe);case 93:return++v,ze(ne);case 123:return++v,ze(ie);case 125:return++v,ze(se);case 58:return++v,ze(de);case 63:return++v,ze(he);case 48:var t=n.charCodeAt(v+1);if(120===t||88===t)return ct();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ut(!1);case 34:case 39:return dt(e);case 47:return qe();case 37:case 42:return Ze();case 124:case 38:return Qe(e);case 94:return et();case 43:case 45:return tt(e);case 60:case 62:return rt(e);case 61:case 33:return ot(e);case 126:return st(Ee,1)}return!1}function it(e){if(e?v=y+1:y=v,t.locations&&(a=new Ye),e)return at();if(v>=r)return ze(S);var o=n.charCodeAt(v);if($e(o)||92===o)return ft();if(!1===nt(o)){var i=String.fromCharCode(o);if("\\"===i||Ue.test(i))return ft();R(v,"Unexpected character '"+i+"'")}}function st(e,t){var r=n.slice(v,v+t);v+=t,ze(e,r)}function at(){for(var e,t,o=v;;){v>=r&&R(o,"Unterminated regexp");var i=n.charAt(v);if(je.test(i)&&R(o,"Unterminated regexp"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++v}var s=n.slice(o,v);++v;var a=ht();a&&!/^[gmi]*$/.test(a)&&R(o,"Invalid regexp flag");try{var l=new RegExp(s,a)}catch(c){throw c instanceof SyntaxError&&R(o,c.message),c}ze(x,l)}function lt(e,t){for(var r=v,o=0,i=void 0===t?1/0:t,s=0;s<i;++s){var a,l=n.charCodeAt(v);if((a=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=e)break;++v,o=o*e+a}return v===r||void 0!==t&&v-r!==t?null:o}function ct(){v+=2;var e=lt(16);null===e&&R(y+2,"Expected hexadecimal number"),$e(n.charCodeAt(v))&&R(v,"Identifier directly after number"),ze(w,e)}function ut(e){var t=v,r=!1,o=48===n.charCodeAt(v);e||null!==lt(10)||R(t,"Invalid number"),46===n.charCodeAt(v)&&(++v,lt(10),r=!0);var i=n.charCodeAt(v);69!==i&&101!==i||(43!==(i=n.charCodeAt(++v))&&45!==i||++v,null===lt(10)&&R(t,"Invalid number"),r=!0),$e(n.charCodeAt(v))&&R(v,"Identifier directly after number");var s,a=n.slice(t,v);r?s=parseFloat(a):o&&1!==a.length?/[89]/.test(a)||_?R(t,"Invalid number"):s=parseInt(a,8):s=parseInt(a,10),ze(w,s)}function dt(e){v++;for(var o="";;){v>=r&&R(y,"Unterminated string constant");var i=n.charCodeAt(v);if(i===e)return++v,void ze(P,o);if(92===i){i=n.charCodeAt(++v);var s=/^[0-7]+/.exec(n.slice(v,v+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++v,s)_&&R(v-2,"Octal literal in strict mode"),o+=String.fromCharCode(parseInt(s,8)),v+=s.length-1;else switch(i){case 110:o+="\n";break;case 114:o+="\r";break;case 120:o+=String.fromCharCode(pt(2));break;case 117:o+=String.fromCharCode(pt(4));break;case 85:o+=String.fromCharCode(pt(8));break;case 116:o+="\t";break;case 98:o+="\b";break;case 118:o+="\v";break;case 102:o+="\f";break;case 48:o+="\0";break;case 13:10===n.charCodeAt(v)&&++v;case 10:t.locations&&(h=v,++p);break;default:o+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||R(y,"Unterminated string constant"),o+=String.fromCharCode(i),++v}}function pt(e){var t=lt(16,e);return null===t&&R(y,"Bad character escape sequence"),t}function ht(){var e;Se=!1;for(var t=!0,r=v;;){var o=n.charCodeAt(v);if(Ge(o))Se&&(e+=n.charAt(v)),++v;else{if(92!==o)break;Se||(e=n.slice(r,v)),Se=!0,117!==n.charCodeAt(++v)&&R(v,"Expecting Unicode escape sequence \\uXXXX"),++v;var i=pt(4),s=String.fromCharCode(i);s||R(v-1,"Invalid Unicode escape"),(t?$e(i):Ge(i))||R(v-4,"Invalid Unicode escape"),e+=s}t=!1}return Se?e:n.slice(r,v)}function ft(){var e=ht(),t=C;!Se&&Me(e)&&(t=re[e]),ze(t,e)}function gt(){T=y,N=b,f=l,it()}function mt(e){if(_=e,v=y,t.locations)for(;v<h;)h=n.lastIndexOf("\n",h-2)+1,--p;Je(),it()}function _t(){this.type=null,this.start=y,this.end=null}function Et(){this.start=a,this.end=null,o&&(this.source=o)}function vt(){var e=new _t;return t.locations&&(e.loc=new Et),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[y,0]),e}function yt(e){var r=new _t;return r.start=e.start,t.locations&&(r.loc=new Et,r.loc.start=e.loc.start),t.ranges&&(r.range=[e.range[0],0]),r}function bt(e,r){return e.type=r,e.end=N,t.locations&&(e.loc.end=f),t.ranges&&(e.range[1]=N),e}function Tt(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function Nt(e){return c===e&&(gt(),!0)}function Rt(){return!t.strictSemicolons&&(c===S||c===se||je.test(n.slice(N,y)))}function Ot(){Nt(ue)||Rt()||xt()}function wt(e){c===e?gt():xt()}function xt(){R(y,"Unexpected token")}function Pt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&R(e.start,"Assigning to rvalue"),_&&"Identifier"===e.type&&Ae(e.name)&&R(e.start,"Assigning to "+e.name+" in strict mode")}function Ct(e){T=N=v,t.locations&&(f=new Ye),g=_=!1,m=[],it();var r=e||vt(),o=!0;for(e||(r.body=[]);c!==S;){var n=kt();r.body.push(n),o&&Tt(n)&&mt(!0),o=!1}return bt(r,"Program")}var St={kind:"loop"},It={kind:"switch"};function kt(){(c===fe||c===me&&"/="===u)&&it(!0);var e=c,r=vt();switch(e){case I:case M:gt();var o=e===I;Nt(ue)||Rt()?r.label=null:c!==C?xt():(r.label=Zt(),Ot());for(var i=0;i<m.length;++i){var s=m[i];if(null===r.label||s.name===r.label.name){if(null!==s.kind&&(o||"loop"===s.kind))break;if(r.label&&o)break}}return i===m.length&&R(r.start,"Unsyntactic "+e.keyword),bt(r,o?"BreakStatement":"ContinueStatement");case L:return gt(),Ot(),bt(r,"DebuggerStatement");case D:return gt(),m.push(St),r.body=kt(),m.pop(),wt(H),r.test=At(),Ot(),bt(r,"DoWhileStatement");case j:if(gt(),m.push(St),wt(ae),c===ue)return Lt(r,null);if(c===X){var a=vt();return gt(),Dt(a,!0),bt(a,"VariableDeclaration"),1===a.declarations.length&&Nt(te)?Ft(r,a):Lt(r,a)}return a=Ut(!1,!0),Nt(te)?(Pt(a),Ft(r,a)):Lt(r,a);case V:return gt(),Kt(r,!0);case $:return gt(),r.test=At(),r.consequent=kt(),r.alternate=Nt(U)?kt():null,bt(r,"IfStatement");case G:return g||t.allowReturnOutsideFunction||R(y,"'return' outside of function"),gt(),Nt(ue)||Rt()?r.argument=null:(r.argument=Ut(),Ot()),bt(r,"ReturnStatement");case Y:gt(),r.discriminant=At(),r.cases=[],wt(ie),m.push(It);for(var l,d;c!==se;)if(c===k||c===F){var p=c===k;l&&bt(l,"SwitchCase"),r.cases.push(l=vt()),l.consequent=[],gt(),p?l.test=Ut():(d&&R(T,"Multiple default clauses"),d=!0,l.test=null),wt(de)}else l||xt(),l.consequent.push(kt());return l&&bt(l,"SwitchCase"),gt(),m.pop(),bt(r,"SwitchStatement");case W:return gt(),je.test(n.slice(N,y))&&R(N,"Illegal newline after throw"),r.argument=Ut(),Ot(),bt(r,"ThrowStatement");case z:if(gt(),r.block=Mt(),r.handler=null,c===A){var h=vt();gt(),wt(ae),h.param=Zt(),_&&Ae(h.param.name)&&R(h.param.start,"Binding "+h.param.name+" in strict mode"),wt(le),h.body=Mt(),r.handler=bt(h,"CatchClause")}return r.finalizer=Nt(B)?Mt():null,r.handler||r.finalizer||R(r.start,"Missing catch or finally clause"),bt(r,"TryStatement");case X:return gt(),Dt(r),Ot(),bt(r,"VariableDeclaration");case H:return gt(),r.test=At(),m.push(St),r.body=kt(),m.pop(),bt(r,"WhileStatement");case J:return _&&R(y,"'with' in strict mode"),gt(),r.object=At(),r.body=kt(),bt(r,"WithStatement");case ie:return Mt();case ue:return gt(),bt(r,"EmptyStatement");default:var f=u,E=Ut();if(e===C&&"Identifier"===E.type&&Nt(de)){for(i=0;i<m.length;++i)m[i].name===f&&R(E.start,"Label '"+f+"' is already declared");var v=c.isLoop?"loop":c===Y?"switch":null;return m.push({name:f,kind:v}),r.body=kt(),m.pop(),r.label=E,bt(r,"LabeledStatement")}return r.expression=E,Ot(),bt(r,"ExpressionStatement")}}function At(){wt(ae);var e=Ut();return wt(le),e}function Mt(e){var t,r=vt(),o=!0,n=!1;for(r.body=[],wt(ie);!Nt(se);){var i=kt();r.body.push(i),o&&e&&Tt(i)&&(t=n,mt(n=!0)),o=!1}return n&&!t&&mt(!1),bt(r,"BlockStatement")}function Lt(e,t){return e.init=t,wt(ue),e.test=c===ue?null:Ut(),wt(ue),e.update=c===le?null:Ut(),wt(le),e.body=kt(),m.pop(),bt(e,"ForStatement")}function Ft(e,t){return e.left=t,e.right=Ut(),wt(le),e.body=kt(),m.pop(),bt(e,"ForInStatement")}function Dt(e,t){for(e.declarations=[],e.kind="var";;){var r=vt();if(r.id=Zt(),_&&Ae(r.id.name)&&R(r.id.start,"Binding "+r.id.name+" in strict mode"),r.init=Nt(ge)?Ut(!0,t):null,e.declarations.push(bt(r,"VariableDeclarator")),!Nt(ce))break}}function Ut(e,t){var r=Bt(t);if(!e&&c===ce){var o=yt(r);for(o.expressions=[r];Nt(ce);)o.expressions.push(Bt(t));return bt(o,"SequenceExpression")}return r}function Bt(e){var t=jt(e);if(c.isAssign){var r=yt(t);return r.operator=u,r.left=t,gt(),r.right=Bt(e),Pt(t),bt(r,"AssignmentExpression")}return t}function jt(e){var t=Vt(e);if(Nt(he)){var r=yt(t);return r.test=t,r.consequent=Ut(!0),wt(de),r.alternate=Ut(!0,e),bt(r,"ConditionalExpression")}return t}function Vt(e){return $t(Gt(),-1,e)}function $t(e,t,r){var o=c.binop;if(null!==o&&(!r||c!==te)&&o>t){var n=yt(e);n.left=e,n.operator=u;var i=c;return gt(),n.right=$t(Gt(),o,r),$t(bt(n,i===ve||i===ye?"LogicalExpression":"BinaryExpression"),t,r)}return e}function Gt(){if(c.prefix){var e=vt(),t=c.isUpdate;return e.operator=u,e.prefix=!0,d=!0,gt(),e.argument=Gt(),t?Pt(e.argument):_&&"delete"===e.operator&&"Identifier"===e.argument.type&&R(e.start,"Deleting local variable in strict mode"),bt(e,t?"UpdateExpression":"UnaryExpression")}for(var r=Yt();c.postfix&&!Rt();)(e=yt(r)).operator=u,e.prefix=!1,e.argument=r,Pt(r),gt(),r=bt(e,"UpdateExpression");return r}function Yt(){return Wt(zt())}function Wt(e,t){var r;return Nt(pe)?((r=yt(e)).object=e,r.property=Zt(!0),r.computed=!1,Wt(bt(r,"MemberExpression"),t)):Nt(oe)?((r=yt(e)).object=e,r.property=Ut(),r.computed=!0,wt(ne),Wt(bt(r,"MemberExpression"),t)):!t&&Nt(ae)?((r=yt(e)).callee=e,r.arguments=qt(le,!1),Wt(bt(r,"CallExpression"),t)):e}function zt(){var e;switch(c){case q:return e=vt(),gt(),bt(e,"ThisExpression");case C:return Zt();case w:case P:case x:return(e=vt()).value=u,e.raw=n.slice(y,b),gt(),bt(e,"Literal");case Z:case Q:case ee:return(e=vt()).value=c.atomValue,e.raw=c.keyword,gt(),bt(e,"Literal");case ae:var r=a,o=y;gt();var i=Ut();return i.start=o,i.end=b,t.locations&&(i.loc.start=r,i.loc.end=l),t.ranges&&(i.range=[o,b]),wt(le),i;case oe:return e=vt(),gt(),e.elements=qt(ne,!0,!0),bt(e,"ArrayExpression");case ie:return Ht();case V:return e=vt(),gt(),Kt(e,!1);case K:return Xt()}xt()}function Xt(){var e=vt();return gt(),e.callee=Wt(zt(),!0),e.arguments=Nt(ae)?qt(le,!1):O,bt(e,"NewExpression")}function Ht(){var e=vt(),r=!0,o=!1;for(e.properties=[],gt();!Nt(se);){if(r)r=!1;else if(wt(ce),t.allowTrailingCommas&&Nt(se))break;var n,i={key:Jt()},s=!1;if(Nt(de)?(i.value=Ut(!0),n=i.kind="init"):"Identifier"!==i.key.type||"get"!==i.key.name&&"set"!==i.key.name?xt():(s=o=!0,n=i.kind=i.key.name,i.key=Jt(),c!==ae&&xt(),i.value=Kt(vt(),!1)),"Identifier"===i.key.type&&(_||o))for(var a=0;a<e.properties.length;++a){var l=e.properties[a];if(l.key.name===i.key.name){var u=n===l.kind||s&&"init"===l.kind||"init"===n&&("get"===l.kind||"set"===l.kind);u&&!_&&"init"===n&&"init"===l.kind&&(u=!1),u&&R(i.key.start,"Redefinition of property")}}e.properties.push(i)}return bt(e,"ObjectExpression")}function Jt(){return c===w||c===P?zt():Zt(!0)}function Kt(e,t){c===C?e.id=Zt():t?xt():e.id=null,e.params=[];var r=!0;for(wt(ae);!Nt(le);)r?r=!1:wt(ce),e.params.push(Zt());var o=g,n=m;if(g=!0,m=[],e.body=Mt(!0),g=o,m=n,_||e.body.body.length&&Tt(e.body.body[0]))for(var i=e.id?-1:0;i<e.params.length;++i){var s=i<0?e.id:e.params[i];if((ke(s.name)||Ae(s.name))&&R(s.start,"Defining '"+s.name+"' in strict mode"),i>=0)for(var a=0;a<i;++a)s.name===e.params[a].name&&R(s.start,"Argument name clash in strict mode")}return bt(e,t?"FunctionDeclaration":"FunctionExpression")}function qt(e,r,o){for(var n=[],i=!0;!Nt(e);){if(i)i=!1;else if(wt(ce),r&&t.allowTrailingCommas&&Nt(e))break;n.push(o&&c===ce?null:Ut(!0))}return n}function Zt(e){var r=vt();return e&&"everywhere"===t.forbidReserved&&(e=!1),c===C?(!e&&(t.forbidReserved&&Ie(u)||_&&ke(u))&&-1===n.slice(y,b).indexOf("\\")&&R(y,"The keyword '"+u+"' is reserved"),r.name=u):e&&c.keyword?r.name=c.keyword:xt(),d=!1,gt(),bt(r,"Identifier")}}(t)},vm:
/*!*********************!*\
      	  !*** external "vm" ***!
      	  \*********************/e=>{e.exports=D}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{
/*!*******************************!*\
      	  !*** ./src/js-interpreter.js ***!
      	  \*******************************/
r.r(o),r.d(o,{default:()=>n});const e=r(/*! ../original-repo/acorn */"./original-repo/acorn.js");globalThis.acorn=e;const{Interpreter:t}=r(/*! ../original-repo/interpreter */"./original-repo/interpreter.js"),n=t})(),o=o.default})(),e.exports=r()}(Pt);const Ct=F(Pt.exports);var St=(e=>(e[e.ZeroTorque=0]="ZeroTorque",e[e.Damp=1]="Damp",e[e.PositionalSquat=2]="PositionalSquat",e[e.PositionalSit=3]="PositionalSit",e[e.PrepareAndLock=4]="PrepareAndLock",e[e.R2XWalk=200]="R2XWalk",e[e.Stair=201]="Stair",e[e.Run=202]="Run",e[e.R2YTwist=203]="R2YTwist",e[e.R2AShoot=204]="R2AShoot",e[e.G1TaiMei=301]="G1TaiMei",e[e.R1XWalk=500]="R1XWalk",e[e.R1YWalk=501]="R1YWalk",e[e.L1XLieUp=702]="L1XLieUp",e[e.L1YSquatUp=706]="L1YSquatUp",e[e.JumpForward=708]="JumpForward",e[e.JumpUp=709]="JumpUp",e))(St||{}),It=(e=>(e[e.Idle=0]="Idle",e[e.Busy=1]="Busy",e))(It||{}),kt=(e=>(e[e.Wave=0]="Wave",e[e.TurnAndWave=1]="TurnAndWave",e[e.ReachOut=2]="ReachOut",e[e.DrawBack=3]="DrawBack",e[e.Invalid=4]="Invalid",e))(kt||{}),At=(e=>(e[e.Stand=0]="Stand",e[e.Stepping=1]="Stepping",e[e.StandStill=2]="StandStill",e))(At||{});V.FieldAngle.WRAP=180,V.FieldAngle.OFFSET=90;class Mt{constructor(e,t,o,n,i){r(this,"workspace",void 0),r(this,"jsGenerator",void 0),r(this,"interpreter",void 0),r(this,"highlightPause",void 0),r(this,"isRunning",void 0),r(this,"asyncBusy",void 0),r(this,"currentCode",void 0),r(this,"g1View",void 0),r(this,"poseResetTimeout",void 0),r(this,"stopCallback",void 0),r(this,"sportState",void 0),r(this,"robotOdom",void 0),r(this,"webRTC",void 0),r(this,"tickingInterval",void 0),r(this,"isReal",void 0),r(this,"isVideoPlaying",void 0);const{sportState:l,robotOdom:c}=s(a());this.sportState=l,this.robotOdom=c,this.workspace=e,this.jsGenerator=t,this.interpreter=null,this.highlightPause=!1,this.isRunning=!1,this.asyncBusy=!1,this.currentCode=null,this.g1View=o,this.poseResetTimeout=0,this.stopCallback=n,this.webRTC=i,this.tickingInterval=0,this.isReal=!1,this.isVideoPlaying=!1}setNewWorkspace(e){this.workspace=e}sendRequest(e){return this.isReal?new Promise((()=>{})):this.g1View.manager.handleRequest(e)}getState(){return this.g1View.robot.sportState}getSpeed(){return this.g1View.robot.velocity}getOdom(){return this.isReal?{currentPos:new B(this.robotOdom.value.position.x,this.robotOdom.value.position.y,this.robotOdom.value.position.z),currentEuler:(new U).setFromQuaternion(new j(this.robotOdom.value.orientation.x,this.robotOdom.value.orientation.y,this.robotOdom.value.orientation.z,this.robotOdom.value.orientation.w),"ZYX")}:{currentPos:this.g1View.robot.urdfRoot.position.clone(),currentEuler:(new U).setFromQuaternion(this.g1View.robot.urdfRoot.quaternion)}}move(e,t,r,o){let n=null,i=0,s=parseFloat(r);this.asyncBusy=!0,window.clearInterval(this.tickingInterval),this.tickingInterval=window.setInterval((()=>{if(null===n){const r=this.getOdom().currentPos,o=this.getOdom().currentEuler;r.setZ(0),o.x=0,o.y=0;const s=new B(parseFloat(e),parseFloat(t),0);n=r.clone().add(s.applyEuler(o)),i=o.z}const{currentPos:r,currentEuler:a}=this.getOdom(),l=this.getSpeed();r.setZ(0);const c=(u=a.z-i+Math.PI,d=2*Math.PI,u-Math.floor(u/d)*d-Math.PI);var u,d;i=a.z,s-=c,a.x=0,a.y=0;const p=a.clone();p.z=-a.z;const h=n.clone().sub(r).applyEuler(p);h.length()<.07&&Math.abs(s)<.1&&l.length()<.1&&(window.clearInterval(this.tickingInterval),o(),this.asyncBusy=!1),h.z=0;const f=h.length();f>.2?h.normalize().multiplyScalar(.5):h.normalize().multiplyScalar(2.5*f);const g=h.x,m=h.y,_=Math.sign(s)*Math.min(1,Math.abs(s/.6));this.g1View.manager.getStateController().setMove(g,m,_)}),100)}stepSeconds(e,t){this.asyncBusy=!0;let r=1e3*parseFloat(e);window.clearInterval(this.tickingInterval),this.tickingInterval=window.setInterval((()=>{const e=this.getState();r>0?(e.balance===At.Stand&&(console.log("change"),e.balance=At.Stepping),r-=100):(e.balance=At.Stand,window.clearInterval(this.tickingInterval),t(),this.asyncBusy=!1)}),100)}setColor(e){const t=e.replace(/^#/,""),r=parseInt(t.slice(0,2),16)<<16|parseInt(t.slice(2,4),16)<<8|parseInt(t.slice(4,6),16);this.g1View.manager.robot.setLightColor(r)}resetLight(){}sendCmd(e,t,r,o){this.asyncBusy=!0,this.sendRequest({topic:e,api_id:t,parameter:r}).then((e=>{0===e.code?(this.asyncBusy=!1,o()):(this.stop(),console.error("err"))}))}initApi(e,t){e.setProperty(t,"move",e.createAsyncFunction(this.move.bind(this))),e.setProperty(t,"stepSeconds",e.createAsyncFunction(this.stepSeconds.bind(this))),e.setProperty(t,"highlightBlock",e.createNativeFunction(this.highlightBlock.bind(this))),e.setProperty(t,"log_data",e.createNativeFunction(this.logData)),e.setProperty(t,"setColor",e.createNativeFunction(this.setColor.bind(this))),e.setProperty(t,"sendCmd",e.createAsyncFunction(this.sendCmd.bind(this))),e.setProperty(t,"waitForSeconds",e.createAsyncFunction(this.waitForSeconds.bind(this)))}stop(){this.isRunning=!1,this.interpreter=null,this.highlightPause=!1,this.asyncBusy=!1,this.workspace.highlightBlock(null),this.currentCode=null,window.clearInterval(this.tickingInterval),this.g1View.manager.robot.setLightColor(65535),this.stopCallback()}waitForSeconds(e,t){this.asyncBusy=!0,setTimeout((()=>{this.asyncBusy=!1,t()}),1e3*e)}pause(){this.isRunning=!1}highlightBlock(e){e=String(e||"");const t=this.workspace.getBlockById(e);"my_procedure_def"!==(null==t?void 0:t.type)&&(this.workspace.highlightBlock(e),this.highlightPause=!0)}logData(e){console.log(e)}runCode(e){e&&(this.isRunning=!0,this.stepCode(e))}stepCode(e){if(e&&(this.currentCode||this.interpreter||(this.currentCode=e,this.interpreter=new Ct(e,this.initApi.bind(this))),this.currentCode===e?this.highlightPause=!1:this.stop()),this.interpreter&&(this.isRunning||!this.highlightPause)){this.interpreter.step()?this.asyncBusy?setTimeout(this.stepCode.bind(this),10):this.stepCode():(console.log("结束"),this.stop())}}}class Lt{constructor(e,t,o,n,i){r(this,"robot",void 0),r(this,"action",void 0),r(this,"autoQuit",void 0),r(this,"from",void 0),r(this,"to",void 0),this.robot=e,this.action=t,this.autoQuit=o,this.from=n,this.to=i}}function Ft(e,t,r,o){const n=t-e;return Math.abs(n)<r*o?t:e+r*o*Math.sign(n)}function Dt(e,t){return void 0===t||Math.abs(e-t)<.02?e:t+.02*Math.sign(e-t)}function Ut(e,t,r){if(e.t.length!==e.v.length||e.t.length<2)return 0;const o=e.t.findIndex((e=>e>=t));let n=0;return n=o<0?e.v[e.v.length-1]:0===o?e.v[0]:e.v[o-1]+(e.v[o]-e.v[o-1])*(t-e.t[o-1])/(e.t[o]-e.t[o-1]),Dt(n,r)}new B(0,.11,0),new B(0,-.11,0);class Bt extends Lt{constructor(e,t,o,n,i,s){super(e,t,o,n,i),r(this,"t",void 0),r(this,"startPosition",void 0),r(this,"startEuler",void 0),r(this,"curves",void 0),this.startPosition=new B,this.startEuler=new U(0,0,0),this.t=0,this.curves=s}enter(){this.t=0}handleStick(e,t,r,o){}handleRequest(e,t){}setMove(e,t,r){}run(e){this.t=this.t+e;const t={},r=this.curves;if(Object.entries(r.joints).forEach((e=>{if("left_shoulder_pitch_joint"===e[0]||"right_shoulder_pitch_joint"===e[0]){const r=this.robot.urdfRoot.joints[e[0]].angle;t[e[0]]=Ut(e[1],this.t,r)}else t[e[0]]=Ut(e[1],this.t)})),this.robot.urdfRoot.setJointValues(t),r.body){const e=r.body.eulerX?Ut(r.body.eulerX,this.t):0,t=r.body.eulerY?Ut(r.body.eulerY,this.t):0,o=r.body.eulerZ?Ut(r.body.eulerZ,this.t):0,n=r.body.posX?Ut(r.body.posX,this.t):0,i=r.body.posY?Ut(r.body.posY,this.t):0,s=r.body.posZ?Ut(r.body.posZ,this.t):.75,a=new U(0,0,this.robot.mapPP.z),l=new B(n,i,s).applyEuler(a).add(this.robot.mapPP.clone().setZ(0));r.useFeetIK?(this.robot.ikRoot.setEuler(e,t,this.robot.mapPP.z+o),this.robot.ikRoot.setPosition(l.x,l.y,l.z),this.robot.solveIK()):(this.robot.urdfRoot.position.set(l.x,l.y,l.z),this.robot.urdfRoot.quaternion.setFromEuler(new U(e,t,this.robot.mapPP.z+o)))}}}const jt={joints:{right_elbow_joint:{t:[0,1,2],v:[1,.5,.5]},right_shoulder_pitch_joint:{t:[0,1,2],v:[.2,-.2,-.4]},left_shoulder_pitch_joint:{t:[0,2],v:[.2,.7]},left_elbow_joint:{t:[0,2],v:[1,.7]}},duration:2},Vt={joints:{right_elbow_joint:{t:[0,2],v:[.5,1]},right_shoulder_pitch_joint:{t:[0,2],v:[-.4,.2]},left_shoulder_pitch_joint:{t:[0,2],v:[.7,.2]},left_elbow_joint:{t:[0,2],v:[.7,1]}},duration:2},$t={useFeetIK:!0,body:{eulerY:{t:[0,2],v:[0,.5]},posX:{t:[0,2],v:[0,-.05]},posZ:{t:[0,2],v:[.75,.4]}},joints:{},duration:2},Gt={useFeetIK:!0,body:{eulerY:{t:[0,2],v:[.5,0]},posX:{t:[0,2],v:[-.05,0]},posZ:{t:[0,2],v:[.4,.75]}},joints:{},duration:2},Yt={joints:{waist_yaw_joint:{t:[0,5,10],v:[0,6,0]},left_shoulder_pitch_joint:{t:[0,3,7,10],v:[.2,-2.6,-2.6,.2]},left_shoulder_roll_joint:{t:[0,2,3,4,5,6,7,8,10],v:[.15,1,1.5,.5,1.5,.5,1.5,1,.15]},left_shoulder_yaw_joint:{t:[0,2,8,10],v:[0,-1,-1,0]},left_elbow_joint:{t:[0,3,4,5,6,7,10],v:[1,1.2,.8,1.2,.8,1.2,1]}},duration:10};class Wt extends Lt{constructor(e,t,r,o,n){super(e,t,r,o,n)}enter(){this.robot.sportState.upperMotion=kt.Invalid}handleStick(e,t,r,o){}handleRequest(e,t){}setMove(e,t,r){}run(e){const t=0===this.robot.stanceIndex?this.robot.armSwing:-this.robot.armSwing,r=0===this.robot.swingIndex?this.robot.armSwing:-this.robot.armSwing;this.robot.urdfRoot.setJointValues({left_shoulder_pitch_joint:Dt(.2+t,this.robot.urdfRoot.joints.left_shoulder_pitch_joint.angle),right_shoulder_pitch_joint:Dt(.2+r,this.robot.urdfRoot.joints.right_shoulder_pitch_joint.angle),waist_yaw_joint:Dt(.2*this.robot.velocity.z,this.robot.urdfRoot.joints.waist_yaw_joint.angle)})}}const zt=[new B(0,.11,0),new B(0,-.11,0)];class Xt extends Lt{constructor(e,t,o,n,i){super(e,t,o,n,i),r(this,"footStartPP",void 0),r(this,"footTargetPP",void 0),r(this,"velocityTarget",void 0),r(this,"t",void 0),r(this,"duration",void 0),r(this,"bodyHeight",void 0),this.velocityTarget={velocity:new B(0,0,0),tic:0},this.duration=0,this.t=0,this.footStartPP=zt.map((e=>e.clone())),this.footTargetPP=this.footStartPP.map((e=>e.clone())),this.bodyHeight=.75}enter(){this.duration=.5,this.t=0,this.bodyHeight=.745,this.robot.sportState.balance=At.Stand,this.robot.sportState.fsmId=St.R1XWalk,this.robot.sportState.fsmMode=It.Busy,this.robot.mapPP=this.robot.urdfRoot.position.clone().setZ((new U).setFromQuaternion(this.robot.urdfRoot.quaternion,"ZYX").z);const e=new U(0,0,this.robot.mapPP.z);this.footStartPP=zt.map((t=>t.clone().applyEuler(e).add(this.robot.mapPP))),this.footTargetPP=this.footStartPP.map((e=>e.clone())),this.robot.ikRoot.setEuler(0,0,this.robot.mapPP.z),this.robot.ikRoot.setPosition(...this.robot.mapPP.clone().setZ(this.bodyHeight).toArray()),this.robot.ikFootGoals.forEach(((e,t)=>{e.setEuler(0,0,this.footStartPP[t].z),e.setPosition(...this.footStartPP[t].clone().setZ(0).toArray())})),this.robot.solveIK(),this.velocityTarget.velocity.set(0,0,0),this.robot.velocity.set(0,0,0),this.robot.urdfRoot.setJointValues({waist_yaw_joint:0,left_shoulder_pitch_joint:.2,left_shoulder_roll_joint:.15,left_shoulder_yaw_joint:0,left_elbow_joint:1,left_wrist_roll_joint:0,right_shoulder_pitch_joint:.2,right_shoulder_roll_joint:-.15,right_shoulder_yaw_joint:0,right_elbow_joint:1,right_wrist_roll_joint:0}),this.robot.swingIndex=0,this.robot.stanceIndex=1,this.robot.armSwing=0}handleStick(e,t,r,o){}setMove(e,t,r){this.velocityTarget.tic=.5,this.velocityTarget.velocity.set(e,t,r)}handleRequest(e,t){}run(e){if(this.t=this.t+e,this.t>this.duration){this.t=this.t-this.duration;const e=.5/this.robot.velocity.clone().setZ(.05*this.robot.velocity.z).length();this.duration=e>.5?.5:e;const t=this.robot.swingIndex;this.robot.swingIndex=this.robot.stanceIndex,this.robot.stanceIndex=t,this.footStartPP[this.robot.stanceIndex]=this.footTargetPP[this.robot.stanceIndex]}const t=this.robot.velocity.clone().setZ(.5*this.robot.velocity.z).length()*this.duration,r=this.robot.velocity.x>0?.2:.3;this.bodyHeight=Math.sqrt(.555025-t**2*r),this.velocityTarget.tic-=e,this.velocityTarget.tic<0&&this.velocityTarget.velocity.set(0,0,0);const o=new U(0,0,this.robot.mapPP.z);this.robot.mapPP.add(this.robot.velocity.clone().multiplyScalar(e).applyEuler(o));const n=this.t/this.duration,i=1.5*this.duration-this.t;this.footTargetPP[this.robot.swingIndex]=this.robot.mapPP.clone().add(this.robot.velocity.clone().multiplyScalar(i).applyEuler(o)).add(zt[this.robot.swingIndex].clone().applyEuler(o));let s=Math.min(this.footTargetPP[this.robot.swingIndex].distanceTo(this.footStartPP[this.robot.swingIndex])**.3,1);this.robot.sportState.balance===At.Stepping&&(s=Math.max(s,.5));const a=this.robot.velocity.x>0?new B(-.135,0,.04):new B(.0675,0,.04),l=this.footTargetPP[this.robot.swingIndex].clone().multiplyScalar(n).add(this.footStartPP[this.robot.swingIndex].clone().multiplyScalar(1-n)),c=this.robot.velocity.x>0?.6*this.robot.velocity.x:.3*this.robot.velocity.x;let u=new B(0,0,0),d=0;if(n<.5){const e=this.footStartPP[this.robot.swingIndex].z;d=2*c*(.5-n),u=a.clone().applyEuler(new U(0,c,0)).sub(a).applyEuler(new U(0,0,e)).multiplyScalar(2*(.5-n))}else{const e=this.footStartPP[this.robot.stanceIndex].clone(),t=2*c*(n-.5),r=a.clone().applyEuler(new U(0,t,0)).sub(a).applyEuler(new U(0,0,e.z)).multiplyScalar(2*(n-.5)),o=e.clone().setZ(0).add(r);this.robot.ikFootGoals[this.robot.stanceIndex].setEuler(0,t,e.z),this.robot.ikFootGoals[this.robot.stanceIndex].setPosition(...o.toArray())}const p=l.clone().setZ(.05*Math.sin(n*Math.PI)*s).add(u);this.robot.ikFootGoals[this.robot.swingIndex].setEuler(0,.2*Math.sin(n*Math.PI*2)*this.robot.velocity.x+d,l.z),this.robot.ikFootGoals[this.robot.swingIndex].setPosition(...p.toArray());const h=this.robot.mapPP.clone().setZ(.01*Math.sin(n*Math.PI)*s+this.bodyHeight);this.robot.ikRoot.setEuler(-.01*this.robot.velocity.z*Math.abs(this.robot.velocity.x),.05*this.robot.velocity.x,this.robot.mapPP.z);const f=this.robot.velocity.x>0?.1*this.robot.velocity.x:.05*this.robot.velocity.x;this.robot.ikRoot.setPosition(...h.clone().add(new B(f,.05*this.robot.velocity.y-.01*this.robot.velocity.z*Math.abs(this.robot.velocity.x),0).applyEuler(o)).toArray()),this.robot.armSwing=.2*this.robot.velocity.x*Math.cos(this.t/this.duration*Math.PI),this.robot.solveIK(),this.robot.velocity.x=Ft(this.robot.velocity.x,this.velocityTarget.velocity.x,.8,e),this.robot.velocity.y=Ft(this.robot.velocity.y,this.velocityTarget.velocity.y,.4,e),this.robot.velocity.z=Ft(this.robot.velocity.z,this.velocityTarget.velocity.z,.5,e),this.robot.sportState.fsmMode=0===s?It.Idle:It.Busy}}const Ht=["walk","squatOn","squatOff"];class Jt{constructor(e){r(this,"robot",void 0),r(this,"controllerDict",void 0),r(this,"stateKey",void 0),r(this,"upperKey",void 0),this.robot=e,this.controllerDict=new Map,this.stateKey="walk",this.upperKey="armSwing",this.controllerDict.set("walk",new Xt(this.robot,"walk",!1,"","")),this.controllerDict.set("squatOn",new Bt(this.robot,"squatOn",!1,"","squatOff",$t)),this.controllerDict.set("squatOff",new Bt(this.robot,"squatOff",!0,"squatOn","",Gt)),this.controllerDict.set("armSwing",new Wt(this.robot,"armSwing",!1,"","")),this.controllerDict.set("handShakeOn",new Bt(this.robot,"handShakeOn",!1,"","handShakeOff",jt)),this.controllerDict.set("handShakeOff",new Bt(this.robot,"handShakeOff",!0,"handShakeOn","none",Vt)),this.controllerDict.set("turnAndWave",new Bt(this.robot,"turnAndWave",!0,"","",Yt)),this.controllerDict.get(this.stateKey).enter(),this.controllerDict.get(this.upperKey).enter()}run(e){const t=this.getStateController();this.robot.sportState.fsmMode===It.Idle&&t.autoQuit&&(this.stateKey="walk",this.getStateController().enter()),this.getStateController().run(e),"walk"===this.stateKey&&this.getUpperController().run(e)}getStateController(){return this.controllerDict.get(this.stateKey)}getUpperController(){return this.controllerDict.get(this.upperKey)}changeStateController(e){if(Ht.indexOf(e)>-1){const t=this.getStateController(),r=this.controllerDict.get(e);return e===this.stateKey||(this.robot.sportState.fsmMode!==It.Idle||e!==t.to&&""!==t.to||""!==r.from&&r.from!==t.action?(console.warn("failed:"+this.stateKey+"=>"+e+" | idle:"+this.robot.sportState.fsmMode==It.Idle+" | next:"+t.to),!1):(console.info("success:"+this.stateKey+"=>"+e),this.stateKey=e,r.enter(),!0))}return!1}handleRequest(e){return new Promise((e=>{}))}handleRobotRequest(e,t,r){}hexToRGB(e){e=e.replace(/^#/,"");return parseInt(e.slice(0,2),16)<<16|parseInt(e.slice(2,4),16)<<8|parseInt(e.slice(4,6),16)}}const Kt=["right_hip_pitch_joint","right_hip_roll_joint","right_hip_yaw_joint","right_knee_joint","right_ankle_pitch_joint","right_ankle_roll_joint","left_hip_pitch_joint","left_hip_roll_joint","left_hip_roll_joint","left_knee_joint","left_ankle_pitch_joint","left_ankle_roll_joint"];class qt{constructor(e,t,o=!1){r(this,"scene",void 0),r(this,"sportState",void 0),r(this,"validLegJoints",void 0),r(this,"urdfRoot",void 0),r(this,"ikRoot",void 0),r(this,"ikHelper",void 0),r(this,"ikFootGoals",void 0),r(this,"footLinks",void 0),r(this,"ikSolvers",void 0),r(this,"velocity",void 0),r(this,"mapPP",void 0),r(this,"lightMaterial",void 0),r(this,"stanceIndex",void 0),r(this,"swingIndex",void 0),r(this,"armSwing",void 0),this.scene=e,this.sportState={fsmId:St.R1XWalk,fsmMode:It.Idle,balance:At.Stand,upperMotion:kt.Invalid},this.swingIndex=0,this.stanceIndex=1,this.armSwing=0,this.urdfRoot=t,this.velocity=new B(0,0,0),this.ikRoot=$(t,!1),this.ikRoot.setDoF(),this.mapPP=new B(0,0,0),this.validLegJoints=[-.7,0,0,1.4,0,0,-.7,0,0,1.4,0,0],this.setLegJoints(this.validLegJoints),G(this.ikRoot,this.urdfRoot),o&&(this.ikHelper=new Y([this.ikRoot]),this.ikHelper.setColor(16746496),this.ikHelper.setDrawThrough(!0),this.ikHelper.setJointScale(.2),this.scene.add(this.ikHelper)),this.ikFootGoals=[],this.ikSolvers=[],this.footLinks=[this.urdfRoot.links.left_ankle_roll_link,this.urdfRoot.links.right_ankle_roll_link];[this.ikRoot.find((e=>"left_ankle_roll_link"===e.name)),this.ikRoot.find((e=>"right_ankle_roll_link"===e.name))].forEach((e=>{const t=new W;t.setPosition(0,0,0),t.setGoalDoF(z.X,z.Y,z.Z,z.EX,z.EY,z.EZ),t.makeClosure(e);const r=new X([this.ikRoot,t]);this.ikFootGoals.push(t),this.ikSolvers.push(r)}))}setLightColor(e){if(this.lightMaterial){const t=(((16711680&e)>>16)+2*(255&e)+(255&e))/1024;this.lightMaterial.emissive.set(e),this.lightMaterial.color.set(e),this.lightMaterial.emissiveIntensity=10-2*t}}setLegJoints(e){Kt.forEach(((t,r)=>{this.urdfRoot.joints[t].setJointValue(e[r])}))}getLegJoints(e){Kt.forEach(((t,r)=>{e[r]=this.urdfRoot.joints[t].angle}))}solveIK(){G(this.ikRoot,this.urdfRoot);let e=!0;if(this.ikSolvers.forEach((t=>{t.maxIterations=5;0!==t.solve()[0]&&(e=!1)})),!e){const e=new Array(12).fill(0);this.getLegJoints(e),this.setLegJoints(this.validLegJoints),G(this.ikRoot,this.urdfRoot),this.setLegJoints(e)}e&&H(this.urdfRoot,this.ikRoot)}}he.DEFAULT_UP=new B(0,0,1);class Zt{constructor(){r(this,"renderDiv",void 0),r(this,"scene",void 0),r(this,"camera",void 0),r(this,"renderer",void 0),r(this,"effectComposer",void 0),r(this,"orbitControl",void 0),r(this,"gridHelper",void 0),r(this,"currCameraPosition",void 0),r(this,"robot",void 0),r(this,"clock",void 0),r(this,"animationFrameHandle",void 0),r(this,"speed",void 0),r(this,"manager",void 0),this.speed=.6,this.renderDiv=null,this.scene=new J,this.scene.fog=new K(3355443,8,16),this.scene.background=new q(3355443),this.currCameraPosition=new B(-1.5,0,1.5),this.camera=new Z(75,1,.1,500),this.camera.position.copy(this.currCameraPosition),this.camera.fov=50,this.renderer=new Q({antialias:!0}),this.renderer.toneMapping=ee,this.renderer.toneMappingExposure=1,this.renderer.setPixelRatio(window.devicePixelRatio);const e=new te(16777215);e.intensity=2,this.scene.add(e),this.gridHelper=new re(30,30,8947848),this.gridHelper.rotateX(Math.PI/2),this.gridHelper.position.z=-.05,this.scene.add(this.gridHelper),this.animationFrameHandle=0;const t=new oe(this.scene,this.camera),o=new ne(new ie(window.innerWidth,window.innerHeight),.3,1.1,1.5),n=new se;this.effectComposer=new ae(this.renderer),this.effectComposer.addPass(t),this.effectComposer.addPass(o),this.effectComposer.addPass(n),this.orbitControl=new le(this.camera,this.renderer.domElement),this.orbitControl.addEventListener("change",(()=>{if(!this.robot)return;const e=this.robot.urdfRoot.position.clone();e.setZ(.55);const t=this.camera.position.clone().sub(e);this.currCameraPosition=t}));(new ce).load("models/venice_sunset_1k.hdr",(e=>{e.mapping=ue,this.scene.environment=e})),this.clock=new de}init(e){this.renderDiv=e,this.renderDiv.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",this.resize.bind(this))}dispose(){this.animationFrameHandle&&cancelAnimationFrame(this.animationFrameHandle),this.renderDiv&&this.renderDiv.removeChild(this.renderer.domElement),this.renderer.dispose(),window.removeEventListener("resize",this.resize.bind(this))}load(){(new pe).loadCompressedAsync("g1_23dof.urdf","/g1_description.tar.xz").then((e=>{this.robot=new qt(this.scene,e,!1),console.log(this.robot.urdfRoot),this.manager=new Jt(this.robot),this.scene.add(e),this.scene.traverse((e=>{e.material&&"EyeLight"===e.material.name&&(this.robot.lightMaterial=e.material,this.robot.setLightColor(65535))}))}))}resize(){const{renderDiv:e,renderer:t,camera:r,effectComposer:o}=this;e&&(t.setSize(e.clientWidth,e.clientHeight),o.setSize(e.clientWidth,e.clientHeight),r.aspect=e.clientWidth/e.clientHeight,r.updateProjectionMatrix())}cameraActive(){const{camera:e,orbitControl:t,robot:r}=this;if(!r)return;const o=r.urdfRoot.position.clone();o.setZ(.55),t.target=o;const n=this.currCameraPosition,i=o.clone().add(n);e.position.copy(i),e.lookAt(o),this.gridHelper.position.x=Math.floor(o.x),this.gridHelper.position.y=Math.floor(o.y)}run(){var e;this.animationFrameHandle=requestAnimationFrame(this.run.bind(this));let t=this.clock.getDelta();t=t>.05?.05:t,this.clock.getElapsedTime(),this.cameraActive(),null===(e=this.orbitControl)||void 0===e||e.update(),this.effectComposer.render(),this.manager&&this.manager.run(t)}}function Qt(){const e=fe(),t=I(null);let r=0;const[o,n]=S(!1),[a,c]=S(!1);let u=null,d=null;const p=new Zt,[h,f]=S(!0),[g,m]=S("stop"),[v,y]=S(i("Blockly.programming")),{webRtc:b,windowWidth:T,windowHeight:N,webIsInView:R,language:O,programData:w}=s(ge()),P=me((()=>`${(null==T?void 0:T.value)||0}px`)),C=me((()=>`${(null==N?void 0:N.value)||0}px`));let k=null==b?void 0:b.value;ye("webRTC",k);const A=I(null),M=I(null);let L=null;const F=()=>{var e,t;null===(e=d)||void 0===e||e.stop(),null===(t=d)||void 0===t||t.resetLight()},D=()=>{F(),u&&V(!1)};let U=!1;const B=e=>{u=E.inject("blocklyDiv",{theme:it,toolbox:{kind:"categoryToolbox",contents:[]},renderer:"custom_renderer",move:{scrollbars:{horizontal:!0,vertical:!0},drag:!0,wheel:!1},zoom:{controls:!1,wheel:!0,startScale:1,maxScale:2,minScale:.5,scaleSpeed:1.2,pinch:!0}}),u.addChangeListener(E.Events.disableOrphans),u.addChangeListener((e=>{if(e.type,E.Events.TOOLBOX_ITEM_SELECT,e.type==E.Events.BLOCK_DRAG){const t=u.getBlockById(e.blockId);A.value=t;const r=null==t?void 0:t.getRelativeToSurfaceXY();if(M.value={x:(null==r?void 0:r.x)||0,y:(null==r?void 0:r.y)||0},e.isStart){if(null==t||!t.isDeletable())return;$(!0)}else if(t){if(null==t||!t.isDeletable())return;$(!1)}else $(!1)}})),A.value=null,Ee((e=>k=e),k),d?d.setNewWorkspace(u):d=new Mt(u,x.javascriptGenerator,p,(()=>{m("stop")}),k),ve((()=>{var o;const n=document.getElementsByClassName("blocklyToolboxDiv")[0];if(u&&(u.updateToolbox(xt(u)),function(){const e=document.getElementsByClassName("blocklyToolboxDiv")[0],t=document.createElement("img");t.src="/imageBlockly/img_trash_1.svg",t.className="custom-trash-icon",e.appendChild(t);const r=document.createElement("img");r.src="/imageBlockly/img_trash_2.svg",r.className="custom-trash-icon",e.appendChild(r)}(),r=n.clientWidth,null===(o=u.trashcan)||void 0===o||o.dispose(),e?E.Xml.domToWorkspace(e,u):j(),!U)){if(!t.value)return;p.init(t.value),p.load(),p.run(),setTimeout((()=>{var e;null===(e=p.manager)||void 0===e||null===(e=e.getStateController())||void 0===e||e.setMove(1,0,0)}),5e3),U=!0}}))};function j(){var e,t;if(!u)return;const r=u.newBlock("start_program");r.setDeletable(!1),r.moveBy(100,100),null===(e=u.getBlockById(r.id))||void 0===e||e.initSvg(),null===(t=u.getBlockById(r.id))||void 0===t||t.render()}function V(e){if(console.logPurple("刷新工作区"),u){const t=e?E.Xml.workspaceToDom(u):void 0;console.logRed("是否保存",e),u.clear(),u.dispose(),ve((()=>{B(t)}))}}function $(e){if(e){const e=document.getElementsByClassName("blocklyToolboxDiv")[0];e.className=`${e.className.replace("deleting","").trim()} deleting`,G(!0),n(!0),c(!1),Y(!1)}else{const e=document.getElementsByClassName("blocklyToolboxDiv")[0];e.className=`${e.className.replace("deleting","").trim()}`,G(!1),n(!1)}}function G(e){const t=document.getElementsByClassName("blocklyToolboxDiv")[0].getElementsByClassName("custom-trash-icon");for(let r=0;r<t.length;r++)t[r].style.display=e?"block":"none"}function Y(e){const t=document.getElementsByClassName("blocklyToolboxDiv")[0].getElementsByClassName("custom-trash-icon")[0];t&&(t.style.transform=`translate3d(-50%, -50%, 0) rotate(${e?30:0}deg)`)}function W(){u?V(!0):window.setTimeout((()=>W()),500)}function z(e){if(u){if(!e)return;null!=e&&e.data?window.setTimeout((()=>{const t=JSON.parse(e.data),r=t.blocks.blocks.reduce(((e,t)=>("my_procedure_def"===t.type?e.unshift(t):e.push(t),e)),[]);t.blocks.blocks=r,E.serialization.workspaces.load(t,u)}),1e3):(u.clear(),j()),console.log(`%c 1111-${null==e?void 0:e.name}`,"color: red"),y(null!=e&&e.name?decodeURIComponent(null==e?void 0:e.name):"")}else window.setTimeout((()=>z(e)),500)}document.addEventListener("pointermove",(e=>{o.value&&(e.clientX<=r&&!a.value&&(c(!0),Y(!0)),e.clientX>r&&a.value&&(c(!1),Y(!1)))})),l((()=>null==R?void 0:R.value),(t=>{if(!t&&["programming","/programming"].includes(e.path))D(),p.manager&&(p.manager.stateKey="walk",p.manager.getStateController().enter()),p.robot&&(p.robot.sportState.balance=At.Stand);else{const e=document.getElementById("custom_field_modal_wrapper");e&&Array.from(e.children).forEach((e=>{e.className.includes("blockly_field_wrapper")&&e.remove()}))}})),l((()=>null==O?void 0:O.value),(()=>{W()})),l((()=>null==w?void 0:w.value),(e=>{console.log("得到了编程数据",e),z(e)}));const X=e=>{var t,r;null!==(t=d)&&void 0!==t&&t.isRunning&&(e.message.includes("Maximum call stack size exceeded")&&(_e(i("Blockly.msg_1")),null===(r=d)||void 0===r||r.stop()))};return{workSpace:u,robotView:p,renderDiv:t,isDrag:o,inDelArea:a,showPreview:h,codeRunState:g,windowWidthPX:P,windowHeightPX:C,programName:v,changePreviewShow:()=>{if(h.value){if("connected"!==k.getConnectionState())return void _e(i("robot_view_msg1"));_e(i("robot_view"))}else _e(i("simulator_view"));d&&d.isRunning?_e(i("program_msg_1")):f(!h.value)},runCode:()=>{var e,t;u&&("stop"===g.value?(m("run"),d&&!d.isRunning&&(h.value?d.isReal=!1:d.isReal=!0),L=x.javascriptGenerator.workspaceToCode(u),console.logGray(L),null===(e=d)||void 0===e||e.runCode(L)):(m("stop"),null===(t=d)||void 0===t||t.pause()))},stop:F,stepCode:()=>{var e;u&&(m("run"),d&&!d.isRunning&&(h.value?d.isReal=!1:d.isReal=!0),L=x.javascriptGenerator.workspaceToCode(u),null===(e=d)||void 0===e||e.stepCode(L))},exit:D,initBlocklyWorkSpace:B,handleSaveProgram:()=>{if(!u)return;const e=E.serialization.workspaces.save(u);console.log("===>",e),_("webSaveProgramData",{data:JSON.stringify(e)},(()=>{console.log("编程保存成功")}))},listenIosStatusBarFn:e=>{if("0"==e){var t;const{x:e,y:r}=M.value||{x:0,y:0};if(console.log("开始刷新了","还原坐标",e,r),null===(t=A.value)||void 0===t||t.moveTo(new E.utils.Coordinate(e,r)),F(),!u)return;V(!0)}},registerErrorListen:()=>{window.addEventListener("error",X,!0)},removeErrorListen:()=>{window.removeEventListener("error",X)}}}const er=e=>(y("data-v-d30cdd6b"),e=e(),b(),e),tr={class:"programme-wrapper"},rr=er((()=>d("div",{id:"blocklyDiv"},null,-1))),or={class:"operation-content"},nr={class:"opera-bar"},ir={class:"opera-1"},sr=["src"],ar={class:"opera-item-label"},lr=er((()=>d("span",{class:"opera-item-line"},null,-1))),cr={class:"opera-item"},ur=["src"],dr={class:"opera-item-label"},pr=er((()=>d("span",{class:"opera-item-line"},null,-1))),hr={class:"opera-item"},fr=["src"],gr={class:"opera-item-label"},mr=["src"],_r={class:"opera-2-label"},Er=er((()=>d("div",{id:"custom_field_modal_wrapper",class:"custom-field-modal-wrapper"},null,-1)));e("default",T(n({__name:"Programming",setup(e){be((e=>({"6d03539a":h(E),"516e21a3":h(v)})));const t=new URL("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='48px'%20height='56px'%20viewBox='0%200%2048%2056'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e24gf-play%3c/title%3e%3cdefs%3e%3cfilter%20color-interpolation-filters='auto'%20id='filter-1'%3e%3cfeColorMatrix%20in='SourceGraphic'%20type='matrix'%20values='0%200%200%200%200.917647%200%200%200%200%200.929412%200%200%200%200%201.000000%200%200%200%201.000000%200'%3e%3c/feColorMatrix%3e%3c/filter%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-4'%20transform='translate(-1943.000000,%20-907.000000)'%3e%3cg%20id='编组-9备份-2'%20transform='translate(1873.000000,%20877.000000)'%3e%3cg%20id='24gf-play'%20transform='translate(70.000000,%2030.000000)'%20filter='url(%23filter-1)'%3e%3cg%20transform='translate(0.357542,%200.482143)'%3e%3cpath%20d='M45.1071049,24.5689639%20L5.21444864,0.493824815%20C4.15235692,-0.146534976%202.82783708,-0.165345767%201.74799664,0.444594368%20C0.668156197,1.0545345%200,2.19874468%200,3.439151%20L0,51.5894291%20C-0.0052767066,52.8324836%200.661909948,53.981221%201.74413031,54.5923543%20C2.82635068,55.2034876%204.15437774,55.1814537%205.21573827,54.5347553%20L45.1083945,30.4596163%20C46.1402148,29.8369957%2046.7709497,28.7196072%2046.7709497,27.5142901%20C46.7709497,26.308973%2046.1402148,25.1915845%2045.1083945,24.5689639%20L45.1071049,24.5689639%20Z'%20id='路径'%20fill='%235C5C66'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o.meta.url).href,r=new URL("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='48px'%20height='54px'%20viewBox='0%200%2048%2054'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e24gf-pause2%3c/title%3e%3cdefs%3e%3cfilter%20color-interpolation-filters='auto'%20id='filter-1'%3e%3cfeColorMatrix%20in='SourceGraphic'%20type='matrix'%20values='0%200%200%200%200.917647%200%200%200%200%200.929412%200%200%200%200%201.000000%200%200%200%201.000000%200'%3e%3c/feColorMatrix%3e%3c/filter%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-5'%20transform='translate(-1949.000000,%20-908.000000)'%3e%3cg%20id='24gf-pause2'%20transform='translate(1949.000000,%20908.000000)'%20filter='url(%23filter-1)'%3e%3cg%3e%3cpath%20d='M17.1428572,3.37500004%20L17.1428572,50.625%20C17.1402001,52.4880936%2015.2229761,53.9979076%2012.8571428,54%20L4.28571433,54%20C1.91988112,53.9979076%200.00265703682,52.4880936%200,50.625%20L0,3.37500004%20C0.00265703682,1.51190638%201.91988112,0.00209241649%204.28571433,0%20L12.8571428,0%20C15.2229761,0.00209241649%2017.1402001,1.51190638%2017.1428572,3.37500004%20L17.1428572,3.37500004%20Z%20M43.7142857,0%20L35.1428572,0%20C32.7770239,0.00209241649%2030.8597999,1.51190638%2030.8571428,3.37500004%20L30.8571428,50.625%20C30.8597999,52.4880936%2032.7770239,53.9979076%2035.1428572,54%20L43.7142857,54%20C46.0801189,53.9979076%2047.997343,52.4880936%2048,50.625%20L48,3.37500004%20C47.997343,1.51190638%2046.0801189,0.00209241649%2043.7142857,0%20L43.7142857,0%20Z'%20id='形状'%20fill='%235C5C66'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o.meta.url).href,n=new URL("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='60px'%20height='48px'%20viewBox='0%200%2060%2048'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e编组%2012%3c/title%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-5'%20transform='translate(-1769.000000,%20-910.000000)'%20fill='%23EAEDFF'%3e%3cg%20id='编组-9备份-2'%20transform='translate(1700.000000,%20877.000000)'%3e%3cg%20id='编组-12'%20transform='translate(69.000000,%2033.000000)'%3e%3cg%20id='旋转'%20fill-rule='nonzero'%3e%3cpath%20d='M53.4396823,2.84522273%20C52.8635954,1.31528088%2051.5114086,0.232226969%2049.9195119,0.0256905509%20C48.3772058,-0.14252926%2046.8607583,0.523575823%2045.9193182,1.78279029%20L43.1991864,5.46044103%20C39.6007843,4.16562781%2035.8137631,3.5024532%2031.9986441,3.49902733%20C18.0744628,3.50658783%205.54478393,12.1364321%200.317110048,25.3197547%20C-0.542704232,27.3960157%200.405984008,29.7913485%202.43721274,30.6727796%20C2.93318212,30.8786585%203.46202682,30.989474%203.99728828,30.9996819%20C5.57408879,31.0197211%207.01528101,30.0915906%207.67746644,28.6296403%20C11.641292,18.4399543%2021.2650643,11.7297336%2031.9986441,11.6715844%20C34.066188,11.6902674%2036.1229289,11.9786402%2038.1189405,12.5297028%20L36.6388688,14.5319794%20C35.6362141,15.7817831%2035.3900892,17.4945927%2035.9988378,18.986023%20C36.6233273,20.4744936%2037.9833425,21.5047484%2039.5590102,21.6829668%20L54.5997385,23.3174782%20L55.0797617,23.3174782%20C56.4647609,23.3174782%2057.7689327,22.6513594%2058.5999322,21.5195157%20C59.4792727,20.1336226%2059.6402895,18.4099805%2059.0328546,16.8851978%20L53.4396823,2.84522273%20L53.4396823,2.84522273%20Z'%20id='路径'%3e%3c/path%3e%3c/g%3e%3ccircle%20id='椭圆形'%20cx='32.5'%20cy='37.5'%20r='10.5'%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o.meta.url).href,i=new URL("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='67px'%20height='67px'%20viewBox='0%200%2067%2067'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e结束%3c/title%3e%3cdefs%3e%3cfilter%20color-interpolation-filters='auto'%20id='filter-1'%3e%3cfeColorMatrix%20in='SourceGraphic'%20type='matrix'%20values='0%200%200%200%200.984573%200%200%200%200%200.214794%200%200%200%200%200.214794%200%200%200%201.000000%200'%3e%3c/feColorMatrix%3e%3c/filter%3e%3c/defs%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-4'%20transform='translate(-2104.000000,%20-902.000000)'%3e%3cg%20id='编组-9备份-2'%20transform='translate(1873.000000,%20877.000000)'%3e%3cg%20id='结束'%20transform='translate(231.000000,%2025.000000)'%20filter='url(%23filter-1)'%3e%3cg%20transform='translate(0.484171,%200.500000)'%3e%3cpath%20d='M44.3724395,41.0663728%20C44.3724395,42.1691535%2043.4389428,43.0714286%2042.2980024,43.0714286%20L24.8602844,43.0714286%20C23.7146044,43.0714286%2022.7858473,42.1737345%2022.7858473,41.0663728%20L22.7858473,24.7371986%20C22.7858473,23.6298369%2023.7146044,22.7321429%2024.8602844,22.7321429%20L42.2980024,22.7321429%20C43.4389428,22.7321429%2044.3724395,23.634418%2044.3724395,24.7371986%20L44.3724395,41.0663728%20L44.3724395,41.0663728%20Z'%20id='路径'%20fill='%23101317'%20fill-rule='nonzero'%3e%3c/path%3e%3cpath%20d='M65.9589636,32.9096673%20C65.9767473,24.1760692%2062.5070361,15.7950493%2056.3168316,9.61945003%20C50.1266271,3.4438508%2041.725786,-0.0176738421%2032.971533,6.78649597e-05%20C24.2244359,-0.0139395972%2015.8320008,3.44857488%209.64984528,9.62209697%20C3.45385119,15.7933074%20-0.0190336596,24.17509%200.00046383637,32.9096673%20C-0.0461125476,41.6491238%203.41676638,50.043433%209.61631302,56.2181458%20C15.8010248,62.4012575%2024.2117736,65.853412%2032.9673415,65.8030276%20C51.1292525,65.6184794%2065.9589636,51.0203634%2065.9589636,32.9096673%20Z%20M3.87358115,32.9096673%20C3.86946494,25.2078091%206.93313434,17.8198801%2012.3904788,12.3722747%20C17.8478232,6.92466931%2025.2514586,3.86397445%2032.971533,3.86397445%20C49.1466576,3.86397445%2062.2661548,16.9399724%2062.2661548,32.9096673%20C62.2661548,48.8542723%2049.1466576,61.9472894%2032.971533,61.9472894%20C25.2423063,61.9816738%2017.8197259,58.9332601%2012.3550693,53.4799262%20C6.89041272,48.0265924%203.83692771,40.6206471%203.87358115,32.9096673%20L3.87358115,32.9096673%20Z'%20id='形状'%20fill='%23101317'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o.meta.url).href,s=new URL("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='53px'%20height='53px'%20viewBox='0%200%2053%2053'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3e保存%202%3c/title%3e%3cg%20id='页面-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='功能备份-4'%20transform='translate(-2282.000000,%20-910.000000)'%20fill='%23E9ECFE'%20fill-rule='nonzero'%3e%3cg%20id='保存'%20transform='translate(2282.000000,%20910.000000)'%3e%3cpath%20d='M29.3422693,13.2498171%20C32.6583564,13.2600201%2033.1328119,13.7089503%2033.1328119,16.5657787%20C33.1328119,19.4124041%2032.6532547,19.8664358%2029.6534713,19.8715373%20C26.7404163,19.8766387%2026.6332812,19.6113618%2026.4700277,16.366821%20C26.3424859,13.9232124%2027.1230418,12.7855825%2029.3422693,13.2498171%20Z'%20id='路径'%3e%3c/path%3e%3cpath%20d='M49.4530622,9.91855114%20C47.1879196,7.78613279%2044.9839971,5.58229373%2042.8565997,3.31723692%20C41.3975214,1.76638721%2039.8874263,0.394089276%2037.7141138,0.00127536983%20C27.6995307,0.00127536983%2017.6849477,-0.00382610948%207.67036458,0.00637684913%20C2.72684394,0.0114783284%200.0127541812,2.75607419%200.00765250872,7.74021947%20C-0.00255083624,20.3000615%20-0.00255083624,32.8599036%200.00765250872,45.4197456%20C0.0127541812,50.2304406%202.76255565,52.9852394%207.57853447,52.9903409%20C20.1388521,53.0056453%2032.6991698,53.0005439%2045.2594874,52.9903409%20C50.2591265,52.9852394%2052.9885212,50.2814554%2052.9936229,45.327919%20C53.0038263,35.3137151%2052.9987246,25.2995112%2052.9987246,15.2853074%20C52.4324389,13.0916713%2051.0753941,11.4489949%2049.4530622,9.91855114%20Z%20M17.5625075,9.68898457%20C20.1031404,9.68898457%2022.6437733,9.68898457%2025.1895079,9.68898457%20C28.3270365,9.68898457%2031.4594634,9.66347717%2034.5918903,9.69408605%20C38.474263,9.73489788%2039.7496811,11.0204707%2039.7496811,14.8210727%20C39.7496811,16.3464151%2039.7037661,17.8717574%2039.7598845,19.3970997%20C39.8364096,21.4019811%2038.9334135,22.4834947%2036.9845747,23.0038456%20C35.3928528,23.4323698%2033.8113344,23.4323698%2032.2094092,23.4374713%20C26.6996029,23.4425728%2021.1948983,23.4527757%2015.685092,23.4323698%20C11.2109253,23.4170654%209.72633859,21.9427379%209.69062688,17.5299583%20C9.62940681,10.6072508%2010.5528095,9.68898457%2017.5625075,9.68898457%20Z%20M46.3665504,41.5885347%20C46.325737,44.4759719%2045.2543858,45.5472826%2042.3260257,45.562587%20C36.979473,45.5931959%2031.6380219,45.57279%2026.2914691,45.57279%20C21.1183732,45.57279%2015.9401757,45.5931959%2010.7670798,45.5676885%20C7.71627963,45.5523841%206.6653351,44.4861749%206.63982674,41.4252873%20C6.61431837,38.792924%206.61942005,36.1656622%206.63982674,33.5332988%20C6.6653351,30.3448743%207.87443148,28.8348364%2010.9762483,28.8042275%20C21.3275418,28.7072994%2031.6788353,28.7072994%2042.0301287,28.8042275%20C45.1472506,28.8348364%2046.371652,30.3397728%2046.3767537,33.4465737%20C46.3818554,36.1554592%2046.4073637,38.8745477%2046.3665504,41.5885347%20Z'%20id='形状'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o.meta.url).href,{workSpace:a,robotView:l,renderDiv:p,showPreview:m,codeRunState:_,windowWidthPX:E,windowHeightPX:v,programName:y,changePreviewShow:b,runCode:T,stop:N,stepCode:R,initBlocklyWorkSpace:O,handleSaveProgram:w,listenIosStatusBarFn:x,registerErrorListen:P,removeErrorListen:C}=Qt();return Te((()=>{Ne("appSendStatusBarShow",x),O(),P()})),Re((()=>{null==a||a.clear(),null==a||a.dispose(),l.dispose(),Oe("appSendStatusBarShow",x),C()})),(e,o)=>(u(),c(xe,null,[d("div",tr,[g(Le,{name:h(y)},null,8,["name"]),rr,d("div",or,[d("div",{class:we(["preview-window",h(m)&&"show"])},[d("div",{ref_key:"renderDiv",ref:p,class:"preview-cont"},null,512),d("div",{class:"preview-switch-btn",onClick:o[0]||(o[0]=(...e)=>h(b)&&h(b)(...e))})],2),d("div",nr,[d("div",ir,[d("div",{class:we(["opera-item",h(_),!h(m)&&"real"])},[d("img",{src:"run"===h(_)?h(r):h(t),style:{width:"17px",height:"19px"},onClick:o[1]||(o[1]=(...e)=>h(T)&&h(T)(...e))},null,8,sr),d("span",ar,f("stop"===h(_)?h(m)?e.$t("Blockly.SimulatorPlay"):e.$t("Blockly.RobotPlay"):e.$t("Blockly.stop")),1)],2),lr,d("div",cr,[d("img",{src:h(n),style:{width:"21px",height:"17px"},onClick:o[2]||(o[2]=(...e)=>h(R)&&h(R)(...e))},null,8,ur),d("span",dr,f(e.$t("Blockly.singleStep")),1)]),pr,d("div",hr,[d("img",{src:h(i),style:{width:"23px",height:"23px"},onClick:o[3]||(o[3]=(...e)=>h(N)&&h(N)(...e))},null,8,fr),d("span",gr,f(e.$t("Blockly.finish")),1)])]),d("div",{class:"opera-2",onClick:o[4]||(o[4]=(...e)=>h(w)&&h(w)(...e))},[d("img",{src:h(s),style:{width:"18px",height:"18px"}},null,8,mr),d("span",_r,f(e.$t("Blockly.save")),1)])])])]),Er],64))}}),[["__scopeId","data-v-d30cdd6b"]]))}}}))}();
