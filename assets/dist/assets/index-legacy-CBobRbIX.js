(function(){const _excluded=["x","y"];function _objectWithoutProperties(e,t){if(null==e)return{};var n,i,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function asyncGeneratorStep(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){asyncGeneratorStep(r,i,o,a,s,"next",e)}function s(e){asyncGeneratorStep(r,i,o,a,s,"throw",e)}a(void 0)}))}}System.register([],(function(exports,module){"use strict";return{execute:function(){var __vite_style__=document.createElement("style");function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const i=t[n];if("string"!=typeof i&&!Array.isArray(i))for(const t in i)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(i,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>i[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}if(__vite_style__.textContent='@charset "UTF-8";.toast-wrap[data-v-0d16d3e3]{z-index:1000;width:max-content;height:max-content;position:fixed;top:50%;left:50%;transform:translate3d(-50%,-50%,0);display:flex;justify-content:center;align-items:center;user-select:none;pointer-events:none}.toast[data-v-0d16d3e3]{width:max-content;color:#fff;font-size:14px;text-align:center;border-radius:5px;padding:10px;background:rgba(0,0,0,.8)}html,body{padding:0;margin:0;background-color:#212333;-webkit-touch-callout:none}.index-wrapper[data-v-c1b4bb76]{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center}.index-wrapper a[data-v-c1b4bb76]{text-decoration:none}.index-wrapper .btn[data-v-c1b4bb76]{width:100px;height:40px;font-size:18px;text-align:center;background:linear-gradient(230deg,#6879e4,#495abf);border:0!important;border-radius:6px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}.joystick-box[data-v-2c162195]{width:148px;height:148px;position:relative}.joystick-box[data-v-2c162195]:before{content:"";width:100%;height:100%;border-radius:100%;background:linear-gradient(179deg,#000,rgba(0,0,0,0));position:absolute;top:0;left:0;opacity:.11;z-index:0}.joystick-box.disable[data-v-2c162195]{opacity:.3}.joystick-box .joystick-component[data-v-2c162195]{position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0);z-index:9}.map_page[data-v-dd4b030d]{width:100vw;height:100vh;position:fixed;top:0;left:100vw;background-color:#2e2e3d;transition:left .3s}.map_page .title_bar[data-v-dd4b030d]{width:100%;height:56px;background:linear-gradient(180deg,#252533,#1c1c25);display:flex;align-items:center;justify-content:center;position:relative}.map_page .title_bar .btn-back[data-v-dd4b030d]{width:36px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;left:11px;top:50%;transform:translateY(-50%)}.map_page .title_bar .btn-extra[data-v-dd4b030d]{display:flex;align-items:center;justify-content:center;position:absolute;right:11px;top:50%;transform:translateY(-50%);z-index:9}.map_page .title_bar .btn-extra .btn_async[data-v-dd4b030d]{background-color:#5566cd;color:#fff;font-size:14px;line-height:24px;text-align:center;padding:0 10px;border-radius:4px}.map_page .title_bar .page_title[data-v-dd4b030d]{font-size:18px;font-family:AlibabaPuHuiTiM;color:#fff;line-height:25px}.map_page .map_list[data-v-dd4b030d]{width:100%;height:calc(100vh - 56px);padding:25px;box-sizing:border-box;white-space:nowrap;overflow:hidden}.map_page .map_list[data-v-dd4b030d]:after{content:" ";width:261px;height:100%;background:linear-gradient(90deg,rgba(32,32,32,0),#12121c);position:absolute;right:0;top:0;pointer-events:none}.map_page .map_list .list_wrapper[data-v-dd4b030d]{height:100%;display:inline-block;padding-right:200px;padding-left:30px}.map_page .map_list .list_wrapper .map_item[data-v-dd4b030d]{width:336px;height:100%;border-radius:8px;border:1px solid #5566cd;box-sizing:border-box;overflow:hidden;position:relative;display:inline-block;margin-right:12px}.map_page .map_list .list_wrapper .map_item[data-v-dd4b030d]:last-of-type{margin-right:0}.map_page .map_list .list_wrapper .map_item .preview_img[data-v-dd4b030d]{width:100%;height:calc(100% - 110px);background-color:#212333;display:flex;justify-content:center;align-items:center}.map_page .map_list .list_wrapper .map_item .preview_img .loading_img[data-v-dd4b030d]{width:30px;animation-name:loading-dd4b030d;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}.map_page .map_list .list_wrapper .map_item .preview_img .map_img[data-v-dd4b030d]{width:100%;height:100%;object-fit:cover}.map_page .map_list .list_wrapper .map_item .operation[data-v-dd4b030d]{width:100%;height:110px;background-color:#fff;padding:12px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between}.map_page .map_list .list_wrapper .map_item .operation .map_name[data-v-dd4b030d]{font-size:19px;display:flex;align-items:center;padding:0 10px;box-sizing:border-box}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info[data-v-dd4b030d]{display:flex;flex-direction:column;flex:1;margin-right:18px}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info .name[data-v-dd4b030d]{line-height:1}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info .time[data-v-dd4b030d]{font-size:12px;color:gray;margin-top:4px}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_edit[data-v-dd4b030d]{width:30px;height:30px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:30px;display:flex;align-items:center;justify-content:center}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap[data-v-dd4b030d]{display:flex;align-items:center;justify-content:space-between}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap>div[data-v-dd4b030d]{display:flex;align-items:center;justify-content:center}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap>div>svg[data-v-dd4b030d]{margin-right:8px}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap .btn_add_route[data-v-dd4b030d]{width:48%;height:40px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:20px;color:#fff}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap .btn_del[data-v-dd4b030d]{width:48%;height:40px;background:#cfcfcf;border-radius:20px;color:#3a3a3a}.map_page .map_list .list_wrapper .map_item .select_map[data-v-dd4b030d]{position:absolute;top:10px;right:10px}.map_page .btn_add_map[data-v-dd4b030d]{width:64px;height:64px;position:absolute;bottom:28px;right:44px}.map_page .btn_add_map>svg[data-v-dd4b030d]{width:100%;height:100%}.map_page .async_modal_wrapper[data-v-dd4b030d]{width:100%;height:100%;background-color:rgba(0,0,0,.1);position:absolute;top:-100vh;left:0;z-index:10;transition:all .3s}.map_page .async_modal_wrapper.show[data-v-dd4b030d]{top:0}.map_page .async_modal_wrapper .modal[data-v-dd4b030d]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:380px;min-height:200px;background-color:#fff;border-radius:10px;padding:20px 16px 14px;box-sizing:border-box}.map_page .async_modal_wrapper .modal .title[data-v-dd4b030d]{font-size:20px;line-height:26px;text-align:center}.map_page .async_modal_wrapper .modal .opera[data-v-dd4b030d]{width:100%;display:flex;align-items:center;justify-content:space-between;flex-direction:column;margin-top:20px}.map_page .async_modal_wrapper .modal .opera .btn[data-v-dd4b030d]{width:100%;height:48px;background:#d8d8d8;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px;margin-bottom:20px}.map_page .async_modal_wrapper .modal .opera .btn.cancel[data-v-dd4b030d]{color:#fff;background:#daa520}.map_page .async_modal_wrapper .modal .opera .btn.sure[data-v-dd4b030d]{background:linear-gradient(230deg,#6879e4,#495abf);color:#fff}@keyframes loading-dd4b030d{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.all_task_list_wrap[data-v-68682856]{width:100%;height:92px;background-color:#26262c}.all_task_list_wrap .all_task_list_item[data-v-68682856]{width:100%;height:30px;border-bottom:1px solid rgba(147,140,140,.5);display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff}.all_task_list_wrap .all_task_list_item>input[data-v-68682856]{width:max-content;max-width:45px;height:20px;background:#080808;border-radius:2px;border:1px solid #979797;outline:none;color:#fff;margin:0 5px;text-align:center;line-height:18px;box-sizing:border-box}.guided_info_window[data-v-80b8a553]{width:100vw;height:100vh;background-color:#212333;position:fixed;top:-100vh;left:0;z-index:2;padding-top:20px;box-sizing:border-box;transition:all .3s}.guided_info_window.show[data-v-80b8a553]{top:0}.guided_info_window .title_wrapper[data-v-80b8a553]{width:100%}.guided_info_window .form_input[data-v-80b8a553]{width:calc(100% - 60px);box-sizing:border-box;border:1px solid #495abf;margin:10px auto auto;border-radius:4px;display:flex;align-items:center}.guided_info_window .form_input .custom_h[data-v-80b8a553]{height:calc(100vh - 138px)}.guided_info_window .form_input input[data-v-80b8a553]{width:100%;height:30px;border:none;outline:none;color:#fff;font-size:14px;padding-left:10px;box-sizing:border-box;background-color:transparent}.guided_info_window .form_input input[data-v-80b8a553]::placeholder{color:#fff;opacity:.5}.guided_info_window .form_input textarea[data-v-80b8a553]{width:100%;height:100px;border:none;outline:none;color:#fff;font-size:14px;padding-left:10px;box-sizing:border-box;background-color:transparent;resize:none}.guided_info_window .form_input textarea[data-v-80b8a553]::placeholder{color:#fff;opacity:.5}.guided_info_window .btn_wrapper[data-v-80b8a553]{width:calc(100% - 60px);box-sizing:border-box;margin:10px auto auto;display:flex;justify-content:space-around}.guided_info_window .btn_wrapper .btn_cancel[data-v-80b8a553]{width:200px;height:36px;background-color:gray;border-radius:4px;display:flex;align-items:center;justify-content:center}.guided_info_window .btn_wrapper .btn_cancel span[data-v-80b8a553]{color:#fff;font-size:16px}.guided_info_window .btn_wrapper .btn_confirm[data-v-80b8a553]{width:200px;height:36px;background-color:#495abf;border-radius:4px;display:flex;align-items:center;justify-content:center}.guided_info_window .btn_wrapper .btn_confirm span[data-v-80b8a553]{color:#fff;font-size:16px}.task_wrapper[data-v-35e4765c]{width:172px;height:300px;position:fixed;right:20px;top:55px;background:rgba(22,24,35,.77);box-shadow:0 1 8px rgba(0,0,0,.15);border-radius:3px;backdrop-filter:blur(12px);padding:15px 10px;box-sizing:border-box;pointer-events:all}.task_wrapper .title[data-v-35e4765c]{font-size:16px;color:#fff;text-shadow:0px 1px 8px rgba(0,0,0,.15);line-height:24px}.task_wrapper .btn_ai_info[data-v-35e4765c]{width:100%;height:30px;background:#495abf;display:flex;align-items:center;justify-content:center;border-radius:2px;margin-top:4px}.task_wrapper .btn_ai_info>span[data-v-35e4765c]{font-size:12px;color:#fff}.task_wrapper .task_list[data-v-35e4765c]{width:100%;height:calc(100% - 96px);margin-top:4px;overflow:hidden}.task_wrapper .task_list .task_list_wrapper .task_item[data-v-35e4765c]{width:100%;min-height:30px;box-shadow:0 1 8px rgba(0,0,0,.15);border-radius:2px;max-height:140;overflow:hidden;margin-bottom:5px}.task_wrapper .task_list .task_list_wrapper .task_item.open .all_task_list[data-v-35e4765c]{height:92px}.task_wrapper .task_list .task_list_wrapper .task_item.open .curr_selected_task[data-v-35e4765c]{background:rgba(54,54,54,.5)}.task_wrapper .task_list .task_list_wrapper .task_item.open .curr_selected_task .arrow_wrap[data-v-35e4765c]{transform:rotate(180deg)}.task_wrapper .task_list .task_list_wrapper .task_item.close .all_task_list[data-v-35e4765c]{height:0}.task_wrapper .task_list .task_list_wrapper .task_item.close .curr_selected_task[data-v-35e4765c]{background:rgba(255,255,255,.5)}.task_wrapper .task_list .task_list_wrapper .task_item.close .curr_selected_task .arrow_wrap[data-v-35e4765c]{transform:rotate(0)}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task[data-v-35e4765c]{width:100%;height:30px;font-size:12px;color:#fff;padding:0 12px;box-sizing:border-box;display:flex;align-items:center;transition:all .3s}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task .curr_task_del_btn[data-v-35e4765c]{height:100%;padding-right:10px;padding-left:12px;margin-left:-12px;display:flex;justify-content:center;align-items:center}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task .curr_task_del_btn>svg[data-v-35e4765c]{width:14px;height:14px}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task>span[data-v-35e4765c]{flex:1}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task>.arrow_wrap[data-v-35e4765c]{height:30px;display:flex;justify-content:flex-end;align-items:center;padding:0 10px;margin-right:-10px;transition:all .3s}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list[data-v-35e4765c]{width:100%;height:92px;overflow:hidden;background-color:#26262c;transition:height .3s}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list .all_task_list_item[data-v-35e4765c]{width:100%;height:30px;border-bottom:1px solid rgba(147,140,140,.5);display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list .all_task_list_item>input[data-v-35e4765c]{width:max-content;max-width:45px;height:20px;background:#080808;border-radius:2px;border:1px solid #979797;outline:none;color:#fff;margin:0 5px;text-align:center;line-height:18px;box-sizing:border-box}.task_wrapper .task_list .task_list_wrapper .add_task_btn[data-v-35e4765c]{width:100%;height:30px;background:rgba(255,255,255,.5);display:flex;align-items:center;justify-content:center;border-radius:2px}.task_wrapper .task_list .task_list_wrapper .add_task_btn>svg[data-v-35e4765c]{width:12px;height:12px}.tip_wrapper[data-v-f5eace10]{position:absolute;top:50px;left:50%;transform:translate(-50%);opacity:1;transition:all .3s}.tip_wrapper.hide[data-v-f5eace10]{top:-100px;opacity:0}.tip_wrapper .tip_body[data-v-f5eace10]{max-width:340px;border-radius:6px;border:1px solid gray;background-color:#282828;text-align:left;color:#fff;padding:8px 16px;pointer-events:none}.tip_wrapper .tip_body .icon_close[data-v-f5eace10]{width:20px;height:20px;position:absolute;right:-12px;top:-12px;pointer-events:all}.power-wrapper[data-v-9bf4cf65]{display:flex;justify-content:center;align-items:center;font-family:PingFang SC}.power-wrapper .power-img[data-v-9bf4cf65]{width:32px;height:18px;border-radius:2px;border:1.5px solid white;box-sizing:border-box;position:relative;padding:2px}.power-wrapper .power-img[data-v-9bf4cf65]:after{content:"";width:3px;height:7px;background-color:#fff;border-radius:2px;position:absolute;right:-3px;top:0;bottom:0;margin:auto}.power-wrapper .power-img .power-surplus[data-v-9bf4cf65]{width:0%;height:11px;background-color:#42cf55}.power-wrapper .power-img .power-blot[data-v-9bf4cf65]{width:50%;height:11px;background-color:#42cf55;position:relative;animation:charging-9bf4cf65 2s linear infinite}.power-wrapper .power-img .icon-blot[data-v-9bf4cf65]{position:absolute;width:8px;top:50%;left:50%;transform:translate(-50%,-50%)}.power-wrapper .power-img .bolt[data-v-9bf4cf65]{position:absolute;top:50%;left:50%;transform:skew(-10deg) scale(.2)}.power-wrapper .power-img .bolt[data-v-9bf4cf65] :before{content:"";position:absolute;margin-top:-30px;margin-left:-15px;border-top:20px solid transparent;border-right:10px solid white;border-bottom:20px solid white;border-left:10px solid transparent}.power-wrapper .power-img .bolt[data-v-9bf4cf65] :after{content:"";position:absolute;margin-left:-5px;border-top:20px solid white;border-right:10px solid transparent;border-bottom:20px solid transparent;border-left:10px solid white}.power-wrapper .power-img .power-num[data-v-9bf4cf65]{font-size:12px;color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(.65)}@keyframes charging-9bf4cf65{0%{width:10%}10%{width:10%}to{width:100%}}.slam_top_bar_wrapper[data-v-bf914954]{width:100%;height:30px;position:absolute;top:20px;left:0;z-index:2;-webkit-overflow-scrolling:touch;pointer-events:none}.slam_top_bar_wrapper[data-v-bf914954]:before{content:"";background:transparent;opacity:.56;width:100%;height:30px;position:absolute;top:-20px;left:0;z-index:1;pointer-events:all}.slam_top_bar_wrapper[data-v-bf914954]:after{content:"";background:linear-gradient(180deg,#000,rgba(0,0,0,0));opacity:.56;width:100%;height:84px;position:absolute;top:-20px;left:0;pointer-events:none}.slam_top_bar_wrapper .top_bar_cont[data-v-bf914954]{width:100%;height:100%;position:relative;z-index:1;padding-right:30px;box-sizing:border-box;display:flex;justify-content:space-between}.slam_top_bar_wrapper .top_bar_cont .left[data-v-bf914954]{height:100%;display:flex;align-items:center;pointer-events:all}.slam_top_bar_wrapper .top_bar_cont .left .btn-back[data-v-bf914954]{width:55px;height:100%;display:flex;align-items:center;padding-left:25px;box-sizing:border-box;opacity:1;-webkit-tap-highlight-color:transparent}.slam_top_bar_wrapper .top_bar_cont .left .btn-back .icon-back[data-v-bf914954]{width:22px;height:100%;-webkit-tap-highlight-color:transparent}.slam_top_bar_wrapper .top_bar_cont .left .title[data-v-bf914954]{font-size:22px;font-family:AlibabaPuHuiTiM;color:#fff;line-height:30px;margin-left:9px}.slam_top_bar_wrapper .top_bar_cont .right[data-v-bf914954]{height:100%;display:flex;align-items:center}.video-wrapper[data-v-d059a4e5]{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;border-radius:0;transition:all .3s;background-color:rgba(0,0,0,.1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.video-wrapper .video-class[data-v-d059a4e5]{width:100%;height:100%;border-radius:0;object-fit:cover;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAMAAAC5KTl3AAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtFS1lAAAAK3RSTlMWi3QSa1uQOKBWCTwcb6V4gWInTWYOqQSGfa6XLyszmyABlFFJXySxQ0BGn2PQBgAAC4NJREFUWMMV1kWO5UAQRdFk5kwzs/33v8Cunr7ZUehKAdaRUAse99ozDjF5BqswrPKm7btzJ2tRziN3rMYXC236humIV5Our7nHWnVdFOBojW2XVnkeu1IZHNJH5OPHj9TjgVxBGBwAAmp60WoA1gBBvg3XMFhxUQ4KuLqx0CritYZPPXinsOqB7I76+OHaZlPzLEcftrqOlOwjeXvuEuH6t6emkaofgVUDIb4fEZB6CmRAeFCTq11lxbAgUyx4rXkqlH9I4bTUDRRVD1xjbqb9HyUBn7rhtr1x+x9Y0e3BdX31/loYvZaLxqnjbRuokz+pPG7WebnSNKE3yE6Tka4aDEDMVYr6Neq126c+ZR2nzzm3yyiC7PGWG/1uueqZudrVGYNdsgOMDvt1cI8CXu63QIcPvYNY8z870WwYazTS7DqpDEknZqS0AFXObWUxTaw0q5pnHlq4oQImakpLfJkmErdvAfhsc7lod0DVT4tuob25C0tQjzdiFObCz7U7eaKGP3s6yQVgQ/y+q+nY6K5dfV75iXzcNlGIP38aj22sVwtWWKMRb7B5HoHPaBvI1Ve5TSXATi66vV6utxsV+aZNFu+93VvlrG/oj8Wp67YT8l+Oq6PjwdGatFm7SEAP13kE0y9CEcf9qhtEWCMIq5AGq71moEAI9vrmFcmO8+7ZyDnmRN/VUaFkM2ce8KuBGFzDMmY6myLfQGra2ofgHhbJRXuRDZ4H+HmliWBHXQ0ysLGfv6FetbxtxzRgIZWjIsGVFl5imPXeyvVyayNek+dSWzjXd4t310YBdaF8sXeKs481PjsXbAtIru2+wHbv3GVh3sQY6Dnu6pF3pZ714VYdDi9A5GkXR/6xgaZN/tpQ8wVV3zeBuB+njoBNE4wjc+uA523ysXGd/P2sntmOb3OdHNWP5OVrxD3eJHdtH8QVkEIAqCor3hReR96yqt6PkTQfenllooQ447h6tOrnnuzwA8fMpq+jqg1oW8fTYYIncAYpVeTvkEFr/khQSbjoE8ykx9049OkE5MQEO9lC24tT7DwThQgf4Fhf8nGgAo3GYaON3crODpOr2pu5dBABz69t7F5yJBBo+r6QJdeLDWEoO7r1tceR3haA7gc7eZrCvpxSXXeKpo4P+hRixo9DeOFbqQVjKyWfBg9pnrEZKzK7R437YTTwhfoySG/YOCt3fs4aXlU3FjKortqQ6XyXaD0+Y/8VoqpyU9TRW45eN4oBxAH8Y/jLnNXfELJW+/p/MgO9Z+mBli2qqAP7dV/Arc2+YZRZwtBW8/p32y5ZsEuCS4O5AAgfR7Dde7zhiGfgvurQkfAXIrUG61rmxc2EZo18ph4vaWZI+QM0JdsbNlBJlPlwf9uguujQJy0j7TgTHdtRnjybTg55Hkk9S6l2rpYahumSewKHVosa1bh2Y6r9JGkdKvIDN/eeAwScrfjoLkCxWJuFZQ53FNP5w9XbQd1HhgHcVB/0fATG3sUUid1RTfc2+7pZVKldFSsaEK0v4k90tapQOk2HIbMhaJQtrUEL5+3sDanh8sOpbYRoQoqXWu6SQcUTQL9jzOrXNPWCJwXge4U7tlU1hkF012cAmvp8llQxf1IEMcw14pURxVOWATz4ITnYQjuF+vDXg5hgoiqXzO6mS91FQUBheURHIJxUeU1i3P0WOMpsm7vFYk0JJi/Ev+X3FwYD69cARPuP5GIc0PxoAFjcLRbNur0iMTrQmBBNYJ2ngU4x7SWfdTRl52Bqv7LmYW3C1CyTCPTHeWWIAM/Whm32COHsaj+2UQ739XB9t6NV0o9E9b7CW3XNiXzi9e0KiE+3rntukdIDBWrU2jsfQWuyFJRANxq8StHVv1JPy2C3Byco7qdNbASrnNXZ8G0L/Wp/pif4Ai9aEZ9Bb+TRx+REBdGlkF/s0dUdMSMr+6YCbuGxqPWdzcdqutvqkBzCksFcwAtjf55TeuH79M6AQa7r5PLeXxMFIlQKrXP9VJ275WGX+ptpf+tvTDBsecPnYQAlAWrVbRVJ7K2pRHwIjtSpbX96Y/lbKk6ZWXlBmh15r8yAWQsYxXgBOXYMAfHnUXF+rDqnB8bXDRtAn7bCziIqetSboK3NexMePvsCRLvmsoREA+kH8j4HWFpnNEaWgOmR7xyXHfTaz3slHc/YA6H6tl/L8d5tPcIwwD0tjvRaq3Y5BmYBSDClpv0VIX4s8D0XK3sPdpAb94HjPLkgboEz9EdZATW6ZdcmQvtKUwoWw+nAVKA7IcdY1UHnvNnIBplKci+knzewLz5/GGnzkGuuGky+0LTjtGBGR85EQICDqKChnm5pH3Z44nnWAk1YRdyu3g7QoFZ0h8jkr2ffjKmi+Qvsp+9GvNGZHmgW+YQAGUw7PPt8IPKbdy432vhKtRJjKWcSqq7helj81o3nfmaxVZ7Sqie8OOBk9WsyTD/ab7fQ5aWwQeJvnH6+ayo4IdIkOSBJjzXkgr+1TPhAx1AXDsxtCCj3TzQTLA1p782f7a8vdgPfwwrXmZxxbqo2h+6Zlo6mcMY4V7cFBOLm17VCvx9Qa2tAnkxEB+KYyQgbgAAnmNDOdOO6y2Cb+lke1MWQc9o+EMdQf7ubIG3Ek8GZ4k1PtGjbhwgOMPp5Em59JMVk/jU8/aF73Xcrd3UBNZyueQu0/xz2aGtZT8CRziOax2BWFXaeDzgZNV7oRtUzFoijoETf3xkAFFk3OMb7SgPh5wxU1+MygDIp9gZChH2qEcpgLh8pBIK90PXT1ZSU+ZExFK4Vm4GL/J7+K13lS5dQkW4HQwl6GX4yLqu8GhGWS2k75yel5IZIfFNdAL0NpKr2N5dQesBnxa42DLgJd6agS1jJsp1mO1dip7PU4P6diLLoTsZ4m3Q0QweiqeFfIGPLgF6v6mSVv6xe85VBD/1Mpe3AurRbcJ9SEo8NszNVy8rOCEexyIFcJRvYAlI/wk2I7r3p60FFLQXoH2q9xri/m41svRPbW0/EnPn2DWsmk0IiPpB60aa3+hiFfWuC8ZvWKEd9LxAk3HcOof6d77RewPaPsGw5lQAHcZN2vx1448u9pLfMLGQ3BSRRjBzRhKt7HcCw/7aqjtCDs5q76b4ZGphxN2th1WeXYlfnozX3ebKtX4Te11hf1tZP1diiGjIDAB1cR4Sb9rcFPC/nBARjlgDxd+tCBb1t91j71xJcgGjT3g/dUFnXXNiDrxkyoHANPk58ACPUa42hj8tgGrhiXOCmygxFZBiT2wyAJTDJ4wJEPmp6JIrDaSWYNqv4xH2wwdSTGYb3E0pXnS39nmLUsqoVZxzSoegqzd0o06wdbTXsaHGL+IF4JtIcXddTcD/dCd8hVf+fWPSV553kjMmMEULLS8HcgmptDO955dLGX78PjiDA6IsTHPm5IA6bc5ha0gaGkoEttXuxU11B2dOJ65/Q08tEF1+Y9cr2Nh/VECfQ33GyvR/gsdN1LuIeLpKMCAF2yRr769g9/4aJLZNRI71m2S91+Kp+Q0zubTcxoG2/6gm1Q79wkMj2XNO2ui7nWw8ULtu27CCvqTGX2PffD+xcwgh/TrOKvGZMM5jRFGDTn4NO/lwnDR/GY/waDZtkWDUPI0O8ztcFVqp6r2ZW+2bvkJ3raptYagFqu95VdIaml2CIp6CKets34x+fH2C+zH4cVFO7vj+6k2FU39PtRhWluYeZ3gDz1TLB9K2v7SD9gJU1qDxoRDrAWcrFGLyndhdtd0505+gEP79adK8fmFCWNYC+ahzVNcRH79E8dA1iqX/N0qq22xcOc20ALxLDspEj4QCFBQMgaIwoKbxr0Bd7Sbws6GiRK6tqoPfpiCle23axejRLyO1I+ahsEpWrzT5ZsCyS5RcY9jMfENFxSnhKsrfW8JHH6/rdQUMfmQPT3Uz9gY0C/pu1yuCnrPUvio0a1qMEosA/EwIzzid7cqsAAAAASUVORK5CYII=);background-color:#fff;animation:snow-d059a4e5 .2s infinite}.video-wrapper .loading[data-v-d059a4e5]{background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;color:#fff;font-size:12px;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.video-wrapper .loading>img[data-v-d059a4e5]{width:20px;margin-right:10px;animation:rotateA-d059a4e5 2s linear infinite}.video-wrapper .flash[data-v-d059a4e5]{width:100%;height:100%;background-color:rgba(255,255,255,0);position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.video-wrapper .flash.is-action[data-v-d059a4e5]{animation:flash_animation-d059a4e5 .5s;animation-fill-mode:forwards}@keyframes rotateA-d059a4e5{0%{rotate:0deg}to{rotate:360deg}}@keyframes flash_animation-d059a4e5{0%{background-color:rgba(255,255,255,.5)}to{background-color:rgba(255,255,255,0)}}@keyframes snow-d059a4e5{0%{background-position:0 0}to{background-position:100% 100%}}.alert_modal_wrapper[data-v-e9196f5a]{width:100%;height:100%;background-color:rgba(0,0,0,.1);position:absolute;top:0;left:0;z-index:2}.alert_modal_wrapper .modal[data-v-e9196f5a]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:380px;min-height:200px;background-color:#fff;border-radius:10px;padding:20px 16px 14px;box-sizing:border-box}.alert_modal_wrapper .modal.input[data-v-e9196f5a]{height:200px}.alert_modal_wrapper .modal.ask[data-v-e9196f5a],.alert_modal_wrapper .modal.alert[data-v-e9196f5a]{min-height:172px}.alert_modal_wrapper .modal.ask .title[data-v-e9196f5a],.alert_modal_wrapper .modal.alert .title[data-v-e9196f5a]{width:100px;height:100px;background-color:#fff;border-radius:100%;padding:7px;box-sizing:border-box;margin:-70px auto 10px}.alert_modal_wrapper .modal.ask .title .icon_wrap[data-v-e9196f5a],.alert_modal_wrapper .modal.alert .title .icon_wrap[data-v-e9196f5a]{width:100%;height:100%;border-radius:100%;background-color:#6071da;display:flex;justify-content:center;align-items:center}.alert_modal_wrapper .modal .title[data-v-e9196f5a]{font-size:20px;line-height:26px;text-align:center}.alert_modal_wrapper .modal .input_wrap[data-v-e9196f5a]{width:100%;height:50px;background:#f4f4f4;border-radius:3px;display:flex;padding:0 20px;box-sizing:border-box;margin-top:20px;margin-bottom:18px}.alert_modal_wrapper .modal .input_wrap>input[data-v-e9196f5a]{background:transparent;width:100%;padding:0;outline:none;border:none;font-size:14px}.alert_modal_wrapper .modal .input_wrap>input[data-v-e9196f5a]::placeholder{color:#616161}.alert_modal_wrapper .modal .content[data-v-e9196f5a]{width:100%;text-align:center;font-size:20px;line-height:28px;margin-bottom:20px}.alert_modal_wrapper .modal .opera[data-v-e9196f5a]{width:100%;display:flex;align-items:center;justify-content:space-between}.alert_modal_wrapper .modal .opera .btn[data-v-e9196f5a]{width:168px;height:48px;background:#d8d8d8;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px}.alert_modal_wrapper .modal .opera .btn.cancel[data-v-e9196f5a]{color:#545454;background:#d8d8d8}.alert_modal_wrapper .modal .opera .btn.sure[data-v-e9196f5a]{background:linear-gradient(230deg,#6879e4,#495abf);color:#fff}.alert_modal_wrapper .modal .opera .btn.long[data-v-e9196f5a]{flex:1}.loading_wrapper[data-v-8885d2de]{width:100vw;height:100vh;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:10}.loading_wrapper .cont[data-v-8885d2de]{width:110px;height:110px;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading_wrapper .cont>svg[data-v-8885d2de]{width:64px;height:64px;transform:rotate(0);animation-name:loadingAnimateImg-8885d2de;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.loading_wrapper .cont>span[data-v-8885d2de]{font-size:12px;color:#c8ceda;margin-top:8px;position:relative}.loading_wrapper .cont>span[data-v-8885d2de]:after{width:10px;content:"...";position:absolute;right:-12px;bottom:0;font-size:12px;animation-name:loadingAnimateText-8885d2de;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}@keyframes loadingAnimateText-8885d2de{0%{content:"."}50%{content:".."}to{content:"..."}}@keyframes loadingAnimateImg-8885d2de{0%{transform:rotate(0)}80%{transform:rotate(360deg)}to{transform:rotate(360deg)}}.slam_page[data-v-21f9ee07]{width:100vw;height:100vh;position:fixed;top:0;left:0;transition:left .3s;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none}.slam_page.show[data-v-21f9ee07]{left:0}.slam_page.hide[data-v-21f9ee07]{left:-15vw}.slam_page .renderDiv[data-v-21f9ee07]{width:100vw;height:100vh;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;position:absolute;top:0;left:0;transition:all .3s}.slam_page .renderDiv.half[data-v-21f9ee07]{width:50%;left:50vw}.slam_page .video_window[data-v-21f9ee07]{width:50%;height:100vh;position:absolute;top:0;left:-50vw;background-color:gray;transition:all .3s}.slam_page .video_window.show[data-v-21f9ee07]{left:0}.slam_page[data-v-21f9ee07]:after{content:"";background:linear-gradient(0deg,rgba(0,0,0,.8),rgba(0,0,0,0));opacity:.46;width:100%;height:84px;position:absolute;bottom:0;left:0;pointer-events:none}.slam_page .operation_wrapper[data-v-21f9ee07]{width:100%;position:absolute;bottom:0;left:50%;transform:translate(-50%);pointer-events:none;padding:0 24px 18px;box-sizing:border-box;transition:all .3s;z-index:2}.slam_page .operation_wrapper.half[data-v-21f9ee07]{width:50%;transform:translate(0)}.slam_page .operation_wrapper.hide[data-v-21f9ee07]{bottom:-90px}.slam_page .operation_wrapper .wrap[data-v-21f9ee07]{width:100%;display:flex;align-items:flex-end;box-sizing:border-box;transition:padding .3s}.slam_page .operation_wrapper .wrap .joystick-component[data-v-21f9ee07]{pointer-events:all;transition:margin .3s}.slam_page .operation_wrapper .wrap .joystick-component.left.hide[data-v-21f9ee07]{margin-left:-172px;margin-right:24px}.slam_page .operation_wrapper .wrap .joystick-component.right.hide[data-v-21f9ee07]{margin-right:-172px;margin-left:24px}.slam_page .operation_wrapper .wrap .btn_container[data-v-21f9ee07]{flex:1;display:flex;align-items:center;padding:0 25px;position:relative}.slam_page .operation_wrapper .wrap .btn_container .btn_container_child[data-v-21f9ee07]{display:flex;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .3s}.slam_page .operation_wrapper .wrap .btn_container .btn_container_child.hide[data-v-21f9ee07]{transform:translate(-50%,120px)}.slam_page .operation_wrapper .wrap .btn_container.center[data-v-21f9ee07]{justify-content:center}.slam_page .operation_wrapper .wrap .btn_container.start[data-v-21f9ee07]{justify-content:flex-start}.slam_page .operation_wrapper .wrap .btn_container.between[data-v-21f9ee07]{justify-content:space-between}.slam_page .operation_wrapper .wrap .btn_container .btn[data-v-21f9ee07]{padding:0 20px;height:40px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:24px;color:#fff;font-size:19px;line-height:40px;text-align:center;pointer-events:all;display:flex;justify-content:center;align-items:center;transition:opacity .3s}.slam_page .operation_wrapper .wrap .btn_container .btn.hide[data-v-21f9ee07]{opacity:0;pointer-events:none}.slam_page .operation_wrapper .wrap .btn_container .btn>svg[data-v-21f9ee07]{width:40px;height:40px}.slam_page .operation_wrapper .wrap .btn_container .btn.small[data-v-21f9ee07]{padding:0;width:40px;border-radius:100%;font-size:12px}.slam_page .operation_wrapper .wrap .btn_container .slam_model[data-v-21f9ee07]{width:100%;display:flex;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-21f9ee07]{display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:all;margin-right:26px;-webkit-tap-highlight-color:rgba(255,255,255,0)!important;-webkit-tap-highlight-color:transparent!important}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-21f9ee07]:active{background:none}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-21f9ee07]:last-of-type{margin-right:0}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task>svg[data-v-21f9ee07]{width:45px;height:45px}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task>span[data-v-21f9ee07]{font-size:12px;color:#fff;line-height:16px;margin-top:5px}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task.noMargin[data-v-21f9ee07]{margin-right:0}.slam_page .btn_opera[data-v-21f9ee07]{width:42px;height:42px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:100%;position:fixed;top:65px;right:34px;color:#fff;font-size:12px;text-align:center;line-height:42px;transition:right .3s}.slam_page .btn_opera.save[data-v-21f9ee07]{right:100px}.slam_page .btn_opera.save.moreRight[data-v-21f9ee07]{right:266px}.slam_page .btn_opera.moreRight[data-v-21f9ee07]{right:200px}.slam_page .btn_opera>svg[data-v-21f9ee07]{width:100%;height:100%}.slam_page .task-component[data-v-21f9ee07]{right:22px;transition:right .3s;z-index:2}.slam_page .task-component.show[data-v-21f9ee07]{right:22px}.slam_page .task-component.hide[data-v-21f9ee07]{right:-180px}.slam_page .empty_show[data-v-21f9ee07]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:none;box-sizing:border-box;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;transition:all .3s}.slam_page .empty_show.half[data-v-21f9ee07]{padding-left:50%}.slam_page .empty_show .empty_img[data-v-21f9ee07]{width:97px;height:90px;margin-bottom:6px}.slam_page .empty_show .empty_text[data-v-21f9ee07]{color:#7f86b0;font-size:14px;margin-bottom:10px;line-height:20px}.slam_page .empty_show .btn_add_map[data-v-21f9ee07]{height:26px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;pointer-events:all;padding:0 10px}.slam_page .empty_show .btn_add_map>svg[data-v-21f9ee07]{width:10px;height:10px;margin-right:5px}.slam_page .patrol_situation[data-v-21f9ee07]{background-color:rgba(0,0,0,.36);top:65px;left:40px;position:absolute;color:#fff;font-size:12px;display:flex;flex-direction:column;justify-content:center;padding:8px 10px;border-radius:10px;backdrop-filter:blur(4px);z-index:2}.slam_page .patrol_situation>span[data-v-21f9ee07]{transform:scale(.8) translate(-10%)}.map_page[data-v-21f9ee07]{left:100vw}.map_page.show[data-v-21f9ee07]{left:0vw}.map_page.hide[data-v-21f9ee07]{left:100vw}.alert_modal_wrapper[data-v-751c0d75]{width:100%;height:100%;background-color:rgba(0,0,0,.1);position:fixed;top:0;left:0;z-index:2}.alert_modal_wrapper .modal[data-v-751c0d75]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-width:380px;min-height:200px;background-color:#fff;border-radius:10px;padding:20px 16px 14px;box-sizing:border-box;margin-top:15px}.alert_modal_wrapper .modal.input[data-v-751c0d75]{height:200px}.alert_modal_wrapper .modal.ask[data-v-751c0d75],.alert_modal_wrapper .modal.alert[data-v-751c0d75]{min-height:172px}.alert_modal_wrapper .modal.ask .title[data-v-751c0d75],.alert_modal_wrapper .modal.alert .title[data-v-751c0d75]{width:100px;height:100px;background-color:#fff;border-radius:100%;padding:7px;box-sizing:border-box;margin:-70px auto 10px}.alert_modal_wrapper .modal.ask .title .icon_wrap[data-v-751c0d75],.alert_modal_wrapper .modal.alert .title .icon_wrap[data-v-751c0d75]{width:100%;height:100%;border-radius:100%;background-color:#6071da;display:flex;justify-content:center;align-items:center}.alert_modal_wrapper .modal .title[data-v-751c0d75]{font-size:20px;line-height:26px;text-align:center}.alert_modal_wrapper .modal .input_wrap[data-v-751c0d75]{width:100%;height:50px;background:#f4f4f4;border-radius:3px;display:flex;padding:0 20px;box-sizing:border-box;margin-top:20px;margin-bottom:18px}.alert_modal_wrapper .modal .input_wrap>input[data-v-751c0d75]{background:transparent;width:100%;padding:0;outline:none;border:none;font-size:14px}.alert_modal_wrapper .modal .input_wrap>input[data-v-751c0d75]::placeholder{color:#616161}.alert_modal_wrapper .modal .content[data-v-751c0d75]{width:100%;text-align:center;font-size:16px;margin-bottom:20px}.alert_modal_wrapper .modal .opera[data-v-751c0d75]{width:100%;display:flex;align-items:center;justify-content:space-between}.alert_modal_wrapper .modal .opera .btn[data-v-751c0d75]{width:168px;height:48px;background:#d8d8d8;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px}.alert_modal_wrapper .modal .opera .btn.cancel[data-v-751c0d75]{color:#545454;background:#d8d8d8}.alert_modal_wrapper .modal .opera .btn.sure[data-v-751c0d75]{background:linear-gradient(230deg,#6879e4,#495abf);color:#fff}.alert_modal_wrapper .modal .opera .btn.long[data-v-751c0d75]{flex:1}.opera-bar-body[data-v-474e9834]{height:48px;width:48px;user-select:none;background:rgba(0,0,0,.5);box-shadow:0 7px 13px rgba(0,0,0,.1);padding:3px;box-sizing:border-box;border-radius:48px;display:flex;transition:all .3s;position:relative;border:0!important;overflow:hidden;outline:none;-webkit-tap-highlight-color:transparent}.opera-bar-body.loading[data-v-474e9834]:after{content:"";position:absolute;left:0;top:0;width:200%;height:100%;background:linear-gradient(115deg,rgba(80,80,80,.5),rgba(45,45,45,.5),rgba(0,0,0,.5),rgba(45,45,45,.5),rgba(80,80,80,.5));background-size:50% 100%;display:block;animation:moveAnimation-474e9834 .75s linear infinite;z-index:0}.opera-bar-body.open[data-v-474e9834]{width:394px}.opera-bar-body.open[data-v-474e9834]:before{content:"";width:6px;height:12px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAiCAYAAABWQVnHAAAAAXNSR0IArs4c6QAAAfpJREFUSEudls2LjWEYxn/XjFKiZoEwNj5KKBs2siWbSXZEylcpYScLyT/BQkPNwteoCcXKXkoW42NkIVn4SImmJJ+3Lj1nOvPO8z7nfc/ZvZ3n+t3Xfb/Xc5+jiBgCpiX9pY+PImI+sA543g9ELhoRa4DVkh60NfEfkCC7zZJ0tw1kBpAgZ4Ap4H7TdqoAz+Iw8LCpkypgHnAMGAYeS7rdq50qwM9bgZ3AAPAEuCfpdx1oFiDNwdX3AwsAf/9U0kQbgNs4AixPIj8/kzSeg8xxkFyMAFu6BIZMAnck/eoG1QE2AHuci67DPvtC0q0mgIXA6QrAOjt5KelaB5J1kNo4n4ZYbd0Qh21C0o8S4CSwOOPCQOteAeMlwCFgFVB3ze3kUQmwD1gP/CmkcbAE2Ats7AEYKAEOekcUWnDU35QAx4FlNQDrPgFjJcA5YDDTvytbfFXS17okek+ezVS3+AtwoRPpOsBa4EAmyh+BK5J+FpMYETuAbV32XfkdcEPSdJO7cBRYmQ5a/Bm4mFssuYWyNNlflCL7HrgsKRuoHGAzsCuJ3wI3JX1rtJEiwvn28PxD8wG4VNqHnVs1A4+IFcAp4LWk0V4bOQc4AdiubX9vBYgIv7ZNwGgv23NeY0R48tslXW9SdRYgIpx3T37SK6ofwJL0B6O12MX+AbFButEJjo56AAAAAElFTkSuQmCC);background-size:100% 100%;background-position:center;position:absolute;top:0;bottom:0;right:12px;opacity:1;margin:auto;z-index:1}.opera-bar-body.open>.menu[data-v-474e9834]{width:320px;margin-left:0}.opera-bar-body.close[data-v-474e9834]{width:48px}.opera-bar-body.close[data-v-474e9834]:before{content:"";width:28px;height:58px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA6CAYAAACj+Dm/AAABoUlEQVRYhe3YOYoVQRgH8J/LRGYvNRLBA2hiYKAXGD2CKGimoiOjuDFoIipuuCAuiGeYKxgaCx5gRuYGwlgGM8Ko79XS/XWD8P7QUQW/7uravmKeeYJydEzsMBIejAVOsLGNPhwL/bwNJjwaA/y0A0x4PDS48heY8GRI8PQUMOHpUODxGWDCsyHAAxkw4Xk0uBfrBfQFdkWiXwpgwstIdLUCTHgVhb6vBBNe16K7M20bDS93vhaNAuEc3tSgs3JGfZfufN52RU91BBPeyffe1JzoASZbg64JPdITTPjQgh4KABM+1qL7g8Bka/QWMwkEE86WwH3B4Br25ObLAn4U+6Etx3I/czMYg4M58OcA4GYObF4pKvI117ggdtB8U1hjo0fpydLnR87D2yWMuJXmXg1GzFp6txaj/26x0oLRbz9sxui+49/pgtHtTHOrKwZLjdjNPhjcb8Bu9MWoP3lfj8Coqy2uRWGUq6flSKxUH16NxMhXwEvRGLNr/CtDYEy/xbg8FMa/9zSXhsT48ybq4tAYLOI7LoyB/c5kTGye/ye/AIn3xvS02VWAAAAAAElFTkSuQmCC);background-size:100% 100%;background-position:center;position:absolute;top:0;bottom:0;right:-20px;opacity:.35;transform:translate(-5px,-6px) scale(.18);z-index:1}.opera-bar-body.close>.menu[data-v-474e9834]{width:0;margin-left:0}.opera-bar-body .current-state[data-v-474e9834]{width:42px;height:42px;background:linear-gradient(290deg,#6576e0,#495abf);box-shadow:0 7px 13px rgba(0,0,0,.1),4px 0 21px rgba(75,92,194,.51);border-radius:100%;display:flex;justify-content:center;align-items:center;position:relative;z-index:1}.opera-bar-body .menu[data-v-474e9834]{height:100%;width:320px;margin-left:8px;overflow:hidden;white-space:nowrap;transition:all .3s;position:relative;z-index:1}.opera-bar-body .menu .menu-cont[data-v-474e9834]{display:inline-block;height:100%}.opera-bar-body .menu .menu-cont .menu-item[data-v-474e9834]{display:inline-block;height:100%;width:54px;opacity:.9;transition:all .3s;position:relative}.opera-bar-body .menu .menu-cont .menu-item.active-state[data-v-474e9834]{opacity:1}.opera-bar-body .menu .menu-cont .menu-item.disable[data-v-474e9834]{opacity:.3;pointer-events:none!important}.opera-bar-body .menu .menu-cont .menu-item.loading .menu-item-cont .icon-wrapper[data-v-474e9834]{transform:scale(1.3)}.opera-bar-body .menu .menu-cont .menu-item.lock[data-v-474e9834]{opacity:.3}.opera-bar-body .menu .menu-cont .menu-item.hidden[data-v-474e9834]{display:none}.opera-bar-body .menu .menu-cont .menu-item .menu-item-cont[data-v-474e9834]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.opera-bar-body .menu .menu-cont .menu-item .menu-item-cont .icon-wrapper[data-v-474e9834]{width:28px;height:28px;overflow:hidden;transition:all .3s}.opera-bar-body .menu .menu-cont .menu-item .menu-item-cont .icon-wrapper>svg[data-v-474e9834]{width:100%;height:100%;transform:scale(1.3)}.opera-bar-body .menu .menu-cont .menu-item .menu-item-cont>span[data-v-474e9834]{font-size:12px;line-height:1;color:#fff;transform:scale(.8)}@keyframes moveAnimation-474e9834{0%{left:0}to{left:-100%}}.network-wrapper[data-v-64f4e390]{width:max-content;height:28px;display:flex;align-items:center;background-color:#2e2d36;border-radius:15px;border:1px solid #2e2d36;padding:0 5px;margin-right:16px;position:relative}.network-wrapper .icon-wrapper[data-v-64f4e390]{display:flex;align-items:center;position:relative}.network-wrapper .icon-wrapper .icon[data-v-64f4e390]{width:28px}.network-wrapper .icon-wrapper .menu[data-v-64f4e390]{width:32px;height:0;background-color:rgba(0,0,0,.35);border-radius:32px;position:absolute;top:-5px;left:50%;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:5px 0 0;box-sizing:border-box;overflow:hidden;opacity:0;transition:all .3s}.network-wrapper .icon-wrapper .menu.show[data-v-64f4e390]{height:73px;opacity:1}.network-wrapper .icon-wrapper .menu .menu-item[data-v-64f4e390]{width:28px;margin-bottom:12px}.network-wrapper .speed[data-v-64f4e390]{font-size:16px;color:#fff;text-shadow:0px 2px 4px rgba(0,0,0,.3);margin-left:4px;width:64px}.opera-menu-wrapper[data-v-d70851ec]{display:flex;align-items:center;z-index:6;pointer-events:all}.opera-menu-wrapper .more-btn[data-v-d70851ec]{display:flex;align-items:center;height:28px}.opera-menu-wrapper .more-btn.disable[data-v-d70851ec]{width:0;opacity:0;pointer-events:none}.temperature-wrapper[data-v-faee09f7]{display:flex;align-items:flex-start;margin-left:8px;height:28px;font-family:PingFang SC}.temperature-wrapper .temperature[data-v-faee09f7]{width:28px;height:28px;border-radius:4px;background-color:#2e2d36;display:flex;justify-content:center;align-items:center}.temperature-wrapper .temperature span[data-v-faee09f7]{transform:scale(.8);font-size:14px;color:#fff}.temperature-wrapper .tip[data-v-faee09f7]{background-color:#2e2d36;border-radius:5px;margin-left:7px;position:relative;font-size:12px;color:#fff;line-height:16px;text-align:left;padding:8px 0;box-sizing:border-box}.temperature-wrapper .tip[data-v-faee09f7]:after{content:"";width:0;height:0;border-top:5px solid transparent;border-left:5px solid transparent;border-right:5px solid #2e2d36;border-bottom:5px solid transparent;position:absolute;top:5px;left:-10px}.temperature-wrapper .tip .tip-item[data-v-faee09f7]{padding-left:2px;padding-right:4px;font-size:14px;display:flex}.temperature-wrapper .tip .tip-item .title[data-v-faee09f7],.temperature-wrapper .tip .tip-item .text[data-v-faee09f7]{transform:scale(.9)}.temperature-wrapper .tip .tip-item span[data-v-faee09f7]{opacity:.6;margin:0 4px;transform:scale(.83)}.warning-wrapper[data-v-c512e7f1]{display:flex;justify-content:center;align-items:center;height:28px;margin-left:7px;box-sizing:border-box;position:relative}.warning-wrapper img[data-v-c512e7f1]{width:28px;height:28px}.warning-wrapper img.flashing[data-v-c512e7f1]{animation:error_img_animate-c512e7f1 1s steps(1) infinite}.warning-wrapper .tip[data-v-c512e7f1]{width:max-content;background-color:#2e2d36;border-radius:5px;position:absolute;top:35px;left:0;padding:4px 6px;transform:scale(.82) translate(-10%,-11%)}.warning-wrapper .tip[data-v-c512e7f1]:after{content:"";width:0;height:0;border-top:5px solid transparent;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid rgba(0,0,0,.35);position:absolute;top:-10px;left:7px}.warning-wrapper .tip .tip-item[data-v-c512e7f1]{width:max-content;display:flex;margin:2px 0}.warning-wrapper .tip .tip-item .text[data-v-c512e7f1]{flex:1;color:#fff;opacity:.9;font-size:14px}.warning-wrapper .tip .tip-item .type[data-v-c512e7f1]{height:20px;line-height:20px;font-size:12px;padding:0 5px;color:#fff;background:#e53131;text-align:center;border-radius:10px;transform:scale(.75);margin-right:-2px}.warning-wrapper .tip .tip-item .type.danger[data-v-c512e7f1]{background:#e53131}.warning-wrapper .tip .tip-item .type.warn[data-v-c512e7f1]{background:#ffa717}.warning-wrapper .tip .tip-item .type.fault[data-v-c512e7f1]{background:#ff6318}@keyframes error_img_animate-c512e7f1{0%{opacity:1}50%{opacity:0}to{opacity:1}}.top-bar-wrapper[data-v-a4865f93]{width:100%;padding:16px 25px 9px;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;z-index:5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.top-bar-wrapper .left[data-v-a4865f93]{display:flex;align-items:center}.top-bar-wrapper .small-view[data-v-a4865f93]{width:154px;height:104px;border-radius:8px;opacity:0;pointer-events:none;position:absolute;top:38px;left:10px}.top-bar-wrapper .btn-back[data-v-a4865f93]{width:16px;display:flex;padding-right:15px;margin-left:-15px;padding-left:15px}.top-bar-wrapper .btn-back .icon-back[data-v-a4865f93]{width:16px;transform:scale(.625)}.photo-bar-wrapper[data-v-1afcbec5]{display:flex;align-items:stretch;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none}.photo-bar-wrapper .btn[data-v-1afcbec5]{margin-left:10px;display:flex;flex-direction:column;align-items:center}.photo-bar-wrapper .btn .btn_item[data-v-1afcbec5]{width:50px;height:50px;display:flex;justify-content:center;align-items:center;user-select:none;transition:all .2s;background:linear-gradient(180deg,#6576e0,#4b5cc1);border-radius:100%;padding:2px;box-sizing:border-box;position:relative}.photo-bar-wrapper .btn .btn_item .icon_wrapper[data-v-1afcbec5]{width:100%;height:100%;background-color:#fff;display:flex;justify-content:center;align-items:center;border-radius:100%}.photo-bar-wrapper .btn .btn_item .icon_wrapper .icon[data-v-1afcbec5]{width:32px;height:32px}.photo-bar-wrapper .btn .btn_item[data-v-1afcbec5]:active{border-width:6px;padding:6px}.photo-bar-wrapper .btn .btn_item[data-v-1afcbec5]:first-of-type{margin-bottom:8px}.photo-bar-wrapper .btn .btn_item.videoStart>.circle_svg[data-v-1afcbec5]{opacity:1}.photo-bar-wrapper .btn .btn_item .circle_svg[data-v-1afcbec5]{opacity:0;position:absolute;left:0;top:0;width:100%;height:100%;z-index:1;transform:rotate(-90deg)}.photo-bar-wrapper .btn .btn_item .circle_svg circle[data-v-1afcbec5]{position:absolute;transform:translate(1px,1px);cy:24px;cx:24px;r:24px;fill:none;stroke-linecap:round;stroke-dasharray:150.72px;stroke-dashoffset:calc(var(--01f2926a) * 48px);stroke-width:2px}.photo-bar-wrapper .timer_show[data-v-1afcbec5]{pointer-events:none;background-color:#ff4b4b;position:fixed;top:-20px;left:0;right:0;margin:auto;width:108px;height:32px;color:#fff;border-radius:16px;text-align:center;line-height:32px;font-size:16px;z-index:99}.video-wrapper[data-v-da279139]{position:absolute;width:100vw;height:100vh;transform:var(--0aa8e67a);z-index:var(--362aaa81);border-radius:var(--fef471b2);transition:all .3s;background-color:rgba(0,0,0,.1);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.video-wrapper .video-class[data-v-da279139]{width:100%;height:100%;transform:var(--3395238c);border-radius:var(--fef471b2);object-fit:cover;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAMAAAC5KTl3AAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtFS1lAAAAK3RSTlMWi3QSa1uQOKBWCTwcb6V4gWInTWYOqQSGfa6XLyszmyABlFFJXySxQ0BGn2PQBgAAC4NJREFUWMMV1kWO5UAQRdFk5kwzs/33v8Cunr7ZUehKAdaRUAse99ozDjF5BqswrPKm7btzJ2tRziN3rMYXC236humIV5Our7nHWnVdFOBojW2XVnkeu1IZHNJH5OPHj9TjgVxBGBwAAmp60WoA1gBBvg3XMFhxUQ4KuLqx0CritYZPPXinsOqB7I76+OHaZlPzLEcftrqOlOwjeXvuEuH6t6emkaofgVUDIb4fEZB6CmRAeFCTq11lxbAgUyx4rXkqlH9I4bTUDRRVD1xjbqb9HyUBn7rhtr1x+x9Y0e3BdX31/loYvZaLxqnjbRuokz+pPG7WebnSNKE3yE6Tka4aDEDMVYr6Neq126c+ZR2nzzm3yyiC7PGWG/1uueqZudrVGYNdsgOMDvt1cI8CXu63QIcPvYNY8z870WwYazTS7DqpDEknZqS0AFXObWUxTaw0q5pnHlq4oQImakpLfJkmErdvAfhsc7lod0DVT4tuob25C0tQjzdiFObCz7U7eaKGP3s6yQVgQ/y+q+nY6K5dfV75iXzcNlGIP38aj22sVwtWWKMRb7B5HoHPaBvI1Ve5TSXATi66vV6utxsV+aZNFu+93VvlrG/oj8Wp67YT8l+Oq6PjwdGatFm7SEAP13kE0y9CEcf9qhtEWCMIq5AGq71moEAI9vrmFcmO8+7ZyDnmRN/VUaFkM2ce8KuBGFzDMmY6myLfQGra2ofgHhbJRXuRDZ4H+HmliWBHXQ0ysLGfv6FetbxtxzRgIZWjIsGVFl5imPXeyvVyayNek+dSWzjXd4t310YBdaF8sXeKs481PjsXbAtIru2+wHbv3GVh3sQY6Dnu6pF3pZ714VYdDi9A5GkXR/6xgaZN/tpQ8wVV3zeBuB+njoBNE4wjc+uA523ysXGd/P2sntmOb3OdHNWP5OVrxD3eJHdtH8QVkEIAqCor3hReR96yqt6PkTQfenllooQ447h6tOrnnuzwA8fMpq+jqg1oW8fTYYIncAYpVeTvkEFr/khQSbjoE8ykx9049OkE5MQEO9lC24tT7DwThQgf4Fhf8nGgAo3GYaON3crODpOr2pu5dBABz69t7F5yJBBo+r6QJdeLDWEoO7r1tceR3haA7gc7eZrCvpxSXXeKpo4P+hRixo9DeOFbqQVjKyWfBg9pnrEZKzK7R437YTTwhfoySG/YOCt3fs4aXlU3FjKortqQ6XyXaD0+Y/8VoqpyU9TRW45eN4oBxAH8Y/jLnNXfELJW+/p/MgO9Z+mBli2qqAP7dV/Arc2+YZRZwtBW8/p32y5ZsEuCS4O5AAgfR7Dde7zhiGfgvurQkfAXIrUG61rmxc2EZo18ph4vaWZI+QM0JdsbNlBJlPlwf9uguujQJy0j7TgTHdtRnjybTg55Hkk9S6l2rpYahumSewKHVosa1bh2Y6r9JGkdKvIDN/eeAwScrfjoLkCxWJuFZQ53FNP5w9XbQd1HhgHcVB/0fATG3sUUid1RTfc2+7pZVKldFSsaEK0v4k90tapQOk2HIbMhaJQtrUEL5+3sDanh8sOpbYRoQoqXWu6SQcUTQL9jzOrXNPWCJwXge4U7tlU1hkF012cAmvp8llQxf1IEMcw14pURxVOWATz4ITnYQjuF+vDXg5hgoiqXzO6mS91FQUBheURHIJxUeU1i3P0WOMpsm7vFYk0JJi/Ev+X3FwYD69cARPuP5GIc0PxoAFjcLRbNur0iMTrQmBBNYJ2ngU4x7SWfdTRl52Bqv7LmYW3C1CyTCPTHeWWIAM/Whm32COHsaj+2UQ739XB9t6NV0o9E9b7CW3XNiXzi9e0KiE+3rntukdIDBWrU2jsfQWuyFJRANxq8StHVv1JPy2C3Byco7qdNbASrnNXZ8G0L/Wp/pif4Ai9aEZ9Bb+TRx+REBdGlkF/s0dUdMSMr+6YCbuGxqPWdzcdqutvqkBzCksFcwAtjf55TeuH79M6AQa7r5PLeXxMFIlQKrXP9VJ275WGX+ptpf+tvTDBsecPnYQAlAWrVbRVJ7K2pRHwIjtSpbX96Y/lbKk6ZWXlBmh15r8yAWQsYxXgBOXYMAfHnUXF+rDqnB8bXDRtAn7bCziIqetSboK3NexMePvsCRLvmsoREA+kH8j4HWFpnNEaWgOmR7xyXHfTaz3slHc/YA6H6tl/L8d5tPcIwwD0tjvRaq3Y5BmYBSDClpv0VIX4s8D0XK3sPdpAb94HjPLkgboEz9EdZATW6ZdcmQvtKUwoWw+nAVKA7IcdY1UHnvNnIBplKci+knzewLz5/GGnzkGuuGky+0LTjtGBGR85EQICDqKChnm5pH3Z44nnWAk1YRdyu3g7QoFZ0h8jkr2ffjKmi+Qvsp+9GvNGZHmgW+YQAGUw7PPt8IPKbdy432vhKtRJjKWcSqq7helj81o3nfmaxVZ7Sqie8OOBk9WsyTD/ab7fQ5aWwQeJvnH6+ayo4IdIkOSBJjzXkgr+1TPhAx1AXDsxtCCj3TzQTLA1p782f7a8vdgPfwwrXmZxxbqo2h+6Zlo6mcMY4V7cFBOLm17VCvx9Qa2tAnkxEB+KYyQgbgAAnmNDOdOO6y2Cb+lke1MWQc9o+EMdQf7ubIG3Ek8GZ4k1PtGjbhwgOMPp5Em59JMVk/jU8/aF73Xcrd3UBNZyueQu0/xz2aGtZT8CRziOax2BWFXaeDzgZNV7oRtUzFoijoETf3xkAFFk3OMb7SgPh5wxU1+MygDIp9gZChH2qEcpgLh8pBIK90PXT1ZSU+ZExFK4Vm4GL/J7+K13lS5dQkW4HQwl6GX4yLqu8GhGWS2k75yel5IZIfFNdAL0NpKr2N5dQesBnxa42DLgJd6agS1jJsp1mO1dip7PU4P6diLLoTsZ4m3Q0QweiqeFfIGPLgF6v6mSVv6xe85VBD/1Mpe3AurRbcJ9SEo8NszNVy8rOCEexyIFcJRvYAlI/wk2I7r3p60FFLQXoH2q9xri/m41svRPbW0/EnPn2DWsmk0IiPpB60aa3+hiFfWuC8ZvWKEd9LxAk3HcOof6d77RewPaPsGw5lQAHcZN2vx1448u9pLfMLGQ3BSRRjBzRhKt7HcCw/7aqjtCDs5q76b4ZGphxN2th1WeXYlfnozX3ebKtX4Te11hf1tZP1diiGjIDAB1cR4Sb9rcFPC/nBARjlgDxd+tCBb1t91j71xJcgGjT3g/dUFnXXNiDrxkyoHANPk58ACPUa42hj8tgGrhiXOCmygxFZBiT2wyAJTDJ4wJEPmp6JIrDaSWYNqv4xH2wwdSTGYb3E0pXnS39nmLUsqoVZxzSoegqzd0o06wdbTXsaHGL+IF4JtIcXddTcD/dCd8hVf+fWPSV553kjMmMEULLS8HcgmptDO955dLGX78PjiDA6IsTHPm5IA6bc5ha0gaGkoEttXuxU11B2dOJ65/Q08tEF1+Y9cr2Nh/VECfQ33GyvR/gsdN1LuIeLpKMCAF2yRr769g9/4aJLZNRI71m2S91+Kp+Q0zubTcxoG2/6gm1Q79wkMj2XNO2ui7nWw8ULtu27CCvqTGX2PffD+xcwgh/TrOKvGZMM5jRFGDTn4NO/lwnDR/GY/waDZtkWDUPI0O8ztcFVqp6r2ZW+2bvkJ3raptYagFqu95VdIaml2CIp6CKets34x+fH2C+zH4cVFO7vj+6k2FU39PtRhWluYeZ3gDz1TLB9K2v7SD9gJU1qDxoRDrAWcrFGLyndhdtd0505+gEP79adK8fmFCWNYC+ahzVNcRH79E8dA1iqX/N0qq22xcOc20ALxLDspEj4QCFBQMgaIwoKbxr0Bd7Sbws6GiRK6tqoPfpiCle23axejRLyO1I+ahsEpWrzT5ZsCyS5RcY9jMfENFxSnhKsrfW8JHH6/rdQUMfmQPT3Uz9gY0C/pu1yuCnrPUvio0a1qMEosA/EwIzzid7cqsAAAAASUVORK5CYII=);background-color:#fff;animation:snow-da279139 .2s infinite}.video-wrapper .loading[data-v-da279139]{background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;color:#fff;font-size:12px;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.video-wrapper .loading>img[data-v-da279139]{width:20px;margin-right:10px;animation:rotateA-da279139 2s linear infinite}.video-wrapper .flash[data-v-da279139]{width:100%;height:100%;background-color:rgba(255,255,255,0);position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.video-wrapper .flash.is-action[data-v-da279139]{animation:flash_animation-da279139 .5s;animation-fill-mode:forwards}.video-wrapper .show_video_type[data-v-da279139]{transform:var(--3395238c);width:156px;height:120px;background-image:url(/assets/icon_video_tag_bg-B9cRQFBI.png);background-position:center;background-size:100% 100%;background-repeat:no-repeat;position:absolute;right:0;top:0;display:flex;justify-content:center;align-items:center;color:#fff;font-size:48px;padding-bottom:20px;padding-left:20px;box-sizing:border-box}.video-wrapper .show_video_type.big[data-v-da279139]{width:156px;height:120px;font-size:48px;padding-bottom:20px;padding-left:20px}.video-wrapper .show_video_type.small[data-v-da279139]{width:78px;height:60px;font-size:20px;padding-bottom:10px;padding-left:0}@keyframes rotateA-da279139{0%{rotate:0deg}to{rotate:360deg}}@keyframes flash_animation-da279139{0%{background-color:rgba(255,255,255,.5)}to{background-color:rgba(255,255,255,0)}}@keyframes snow-da279139{0%{background-position:0 0}to{background-position:100% 100%}}.emergency_stop_wrapper[data-v-ac3af084]{width:var(--0151edc8);height:28px;background-color:#ff4848;border-radius:28px 0 0 28px;padding-left:10px;box-sizing:border-box;display:flex;align-items:center;font-size:14px;color:#fff;touch-action:none;pointer-events:all;user-select:none;position:absolute;top:-52px;right:-15px;box-shadow:0 0 #ff4848;overflow:hidden}.emergency_stop_wrapper.animation[data-v-ac3af084]{animation:flash-ac3af084 .8s linear alternate infinite}.emergency_stop_wrapper.loading[data-v-ac3af084]:after{content:"";position:absolute;left:0;top:0;width:200%;height:100%;background:linear-gradient(115deg,rgba(80,80,80,.5),rgba(45,45,45,.5),rgba(0,0,0,.5),rgba(45,45,45,.5),rgba(80,80,80,.5));background-size:50% 100%;display:block;animation:moveAnimation-ac3af084 .75s linear infinite;z-index:0}.emergency_stop_wrapper .icon[data-v-ac3af084]{width:10px;height:9px;margin-right:4px;transition:all .3s}.emergency_stop_wrapper .icon.active[data-v-ac3af084]{transform:rotate(180deg)}.emergency_stop_wrapper .operation_bar[data-v-ac3af084]{position:absolute;width:120%;height:180%;opacity:0;left:-10px}@keyframes flash-ac3af084{0%{background:#ff4848;color:#fff;box-shadow:0 0 #ff4848}to{background:#eb9595;color:#db8e8e;box-shadow:0 0 8px #ff4848}}@-webkit-keyframes flash-ac3af084{0%{background:#ff4848}to{background:#ef7f7f}}@keyframes moveAnimation-ac3af084{0%{left:0}to{left:-100%}}.grade_radio_wrapper[data-v-abefc9f3]{display:flex;justify-content:center;align-items:center;padding-right:8px}.grade_radio_wrapper .item[data-v-abefc9f3]{width:42px;height:24px;border-radius:14px;border:1px solid #4b4b63;box-sizing:border-box;color:#e1e1ec;display:flex;justify-content:center;align-items:center;margin-left:8px}.grade_radio_wrapper .item span[data-v-abefc9f3]{font-size:12px;transform:scale(.9)}.grade_radio_wrapper .item.select[data-v-abefc9f3]{background:#6071da;border-color:#6071da}.input-modal-body[data-v-b94734ca]{position:absolute;left:100%;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);transition:all .3s}.input-modal-body .input-cont[data-v-b94734ca]{width:80%;background-color:#4a4a5b;position:absolute;left:50%;transform:translate(-50%);bottom:100px;border-radius:10px}.input-modal-body .input-cont .cont-title[data-v-b94734ca]{width:100%;border-bottom:1px solid rgba(151,151,151,.18);text-align:center;color:#fff;height:40px;line-height:40px;font-size:16px}.input-modal-body .input-cont .cont-content[data-v-b94734ca]{width:100%;padding:20px 24px 0;color:#fff;box-sizing:border-box;text-align:center}.input-modal-body .input-cont .cont-content .tip[data-v-b94734ca]{font-size:16px}.input-modal-body .input-cont .cont-content .sub-tip[data-v-b94734ca]{color:#acacac;font-size:12px}.input-modal-body .input-cont .cont-content .custom-input[data-v-b94734ca]{outline:none;font-size:14px;height:24px;width:80%;margin-top:10px;background-color:#757587;border:none;color:#d9d9d9;padding:0 4px;box-sizing:border-box}.input-modal-body .input-cont .cont-content .error-tip[data-v-b94734ca]{height:20px;line-height:20px;font-size:12px;color:#ec5e5e}.input-modal-body .input-cont .btn-wrapper[data-v-b94734ca]{width:100%;height:40px;display:flex;border-top:1px solid rgba(151,151,151,.18)}.input-modal-body .input-cont .btn-wrapper .btn[data-v-b94734ca]{flex:1;text-align:center;line-height:40px}.input-modal-body .input-cont .btn-wrapper .btn>span[data-v-b94734ca]{padding:0 20px}.input-modal-body .input-cont .btn-wrapper .btn[data-v-b94734ca]:first-of-type{border-right:1px solid rgba(151,151,151,.18);color:#ec5e5e}.input-modal-body .input-cont .btn-wrapper .btn[data-v-b94734ca]:last-of-type{color:#7483e4}.mui-switch[data-v-8076ca17]{width:50px;height:24px;position:relative;border:1px solid RGBA(74,74,91,1);background-color:#4a4a5b;box-shadow:#dfdfdf 0 0 inset;border-radius:20px;display:inline-block;-webkit-appearance:none;user-select:none;outline:none}.mui-switch.disabled[data-v-8076ca17]{filter:grayscale(.7)}.mui-switch[data-v-8076ca17]:before{content:"";width:18px;height:18px;position:absolute;top:3px;left:3px;border-radius:100%;background-color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.4)}.mui-switch.checked[data-v-8076ca17]{border-color:#495abf;box-shadow:#6879e4 0 0 0 16px inset;background:linear-gradient(10deg,#495abf,#6879e4)}.mui-switch.checked[data-v-8076ca17]:before{left:28px}.mui-switch.mui-switch-animbg[data-v-8076ca17]{transition:background-color ease .4s}.mui-switch.mui-switch-animbg[data-v-8076ca17]:before{transition:left .3s}.mui-switch.mui-switch-animbg.checked[data-v-8076ca17]{box-shadow:#495abf 0 0 inset;background:linear-gradient(10deg,#495abf,#6879e4);transition:border-color .4s,background-color ease .4s}.mui-switch.mui-switch-animbg.checked[data-v-8076ca17]:before{transition:left .3s}.mui-switch.mui-switch-anim[data-v-8076ca17]{transition:border cubic-bezier(0,0,0,1) .4s,box-shadow cubic-bezier(0,0,0,1) .4s}.mui-switch.mui-switch-anim[data-v-8076ca17]:before{transition:left .3s}.mui-switch.mui-switch-anim.checked[data-v-8076ca17]{box-shadow:#495abf 0 0 0 16px inset;background:linear-gradient(10deg,#495abf,#6879e4);transition:border ease .4s,box-shadow ease .4s,background-color ease 1.2s}.mui-switch.mui-switch-anim.checked[data-v-8076ca17]:before{transition:left .3s}.motion-state-modal-cont .title[data-v-a9b5c977]{width:100%;height:50px;background-color:#4a4a5b;padding:15px 44px 0;box-sizing:border-box;font-size:17px;font-weight:400;color:#fff;line-height:24px}.motion-state-modal-cont .title.custom[data-v-a9b5c977]{display:flex;justify-content:space-between}.motion-state-modal-cont .drop-title[data-v-a9b5c977]{width:100%;height:60px;padding:0 44px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;font-size:16px;font-weight:400;color:#fff;transition:all .3s;position:relative}.motion-state-modal-cont .drop-title[data-v-a9b5c977]:after{content:"";width:calc(100% - 17px);height:1px;background-color:rgba(151,151,151,.18);position:absolute;bottom:0;left:17px}.motion-state-modal-cont .drop-title .drop-icon[data-v-a9b5c977]{width:26px;height:26px;border-radius:100%;display:flex;align-items:center;justify-content:center;transition:transform .3s}.motion-state-modal-cont .drop-title .drop-icon img[data-v-a9b5c977]{height:18px;transform:rotate(-90deg)}.motion-state-modal-cont .drop-title.open[data-v-a9b5c977]{background:linear-gradient(180deg,#f4f4ff,#a6a6c0);color:#000}.motion-state-modal-cont .drop-title.open .drop-icon[data-v-a9b5c977]{background:linear-gradient(180deg,#151520,#373749);transform:rotate(180deg)}.motion-state-modal-cont .drop-title.open .drop-icon img[data-v-a9b5c977]{margin-top:1px}.motion-state-modal-cont .menu-item[data-v-a9b5c977]{width:100%;height:58px;padding:0 11px 0 17px;box-sizing:border-box}.motion-state-modal-cont .menu-item .menu-item-cont[data-v-a9b5c977]{width:100%;height:100%;border-bottom:1px solid rgba(151,151,151,.18);box-sizing:border-box;padding-left:28px;display:flex;align-items:center}.motion-state-modal-cont .menu-item .menu-item-cont.no-border[data-v-a9b5c977]{border:0}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title[data-v-a9b5c977]{font-size:16px;color:#fff;line-height:22px;flex:1;display:flex;align-items:center}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title .menu-item-title-num[data-v-a9b5c977]{width:max-content;height:20px;background:#4a4a5b;border-radius:4px;font-size:12px;color:#fff;line-height:20px;padding:0 8px;margin-left:8px}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title>img[data-v-a9b5c977]{width:18px;margin-right:7px}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title .special-active-img[data-v-a9b5c977]{transform:rotate(0);animation:img_animate 2s ease-in infinite}.motion-state-modal-cont .menu-item .menu-item-cont .btn_execute[data-v-a9b5c977]{width:65px;height:26px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:16px;font-size:13px;line-height:26px;text-align:center;color:#fff}.motion-state-modal-cont .more-opera-wrapper[data-v-a9b5c977]{height:0;overflow:hidden;transition:height .3s}.motion-state-modal-cont .more-opera-wrapper.openMore[data-v-a9b5c977]{height:58px}.motion-state-modal-cont .more-opera-wrapper.openSpecial[data-v-a9b5c977]{height:116px}.motion-state-modal-cont .title[data-v-b91febe3]{width:100%;height:50px;background-color:#4a4a5b;padding:15px 44px 0;box-sizing:border-box;font-size:17px;font-weight:400;color:#fff;line-height:24px}.motion-state-modal-cont .title.custom[data-v-b91febe3]{display:flex;justify-content:space-between}.motion-state-modal-cont .drop-title[data-v-b91febe3]{width:100%;height:60px;padding:0 44px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;font-size:16px;font-weight:400;color:#fff;transition:all .3s;position:relative}.motion-state-modal-cont .drop-title[data-v-b91febe3]:after{content:"";width:calc(100% - 17px);height:1px;background-color:rgba(151,151,151,.18);position:absolute;bottom:0;left:17px}.motion-state-modal-cont .drop-title .drop-icon[data-v-b91febe3]{width:26px;height:26px;border-radius:100%;display:flex;align-items:center;justify-content:center;transition:transform .3s}.motion-state-modal-cont .drop-title .drop-icon img[data-v-b91febe3]{height:18px;transform:rotate(-90deg)}.motion-state-modal-cont .drop-title.open[data-v-b91febe3]{background:linear-gradient(180deg,#f4f4ff,#a6a6c0);color:#000}.motion-state-modal-cont .drop-title.open .drop-icon[data-v-b91febe3]{background:linear-gradient(180deg,#151520,#373749);transform:rotate(180deg)}.motion-state-modal-cont .drop-title.open .drop-icon img[data-v-b91febe3]{margin-top:1px}.motion-state-modal-cont .menu-item[data-v-b91febe3]{width:100%;height:58px;padding:0 11px 0 17px;box-sizing:border-box}.motion-state-modal-cont .menu-item .menu-item-cont[data-v-b91febe3]{width:100%;height:100%;border-bottom:1px solid rgba(151,151,151,.18);box-sizing:border-box;padding-left:28px;display:flex;align-items:center}.motion-state-modal-cont .menu-item .menu-item-cont.no-border[data-v-b91febe3]{border:0}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title[data-v-b91febe3]{font-size:16px;color:#fff;line-height:22px;flex:1;display:flex;align-items:center}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title .menu-item-title-num[data-v-b91febe3]{width:max-content;height:20px;background:#4a4a5b;border-radius:4px;font-size:12px;color:#fff;line-height:20px;padding:0 8px;margin-left:8px}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title>img[data-v-b91febe3]{width:18px;margin-right:7px}.motion-state-modal-cont .menu-item .menu-item-cont .menu-item-title .special-active-img[data-v-b91febe3]{transform:rotate(0);animation:img_animate 2s ease-in infinite}.motion-state-modal-cont .menu-item .menu-item-cont .btn_execute[data-v-b91febe3]{width:65px;height:26px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:16px;font-size:13px;line-height:26px;text-align:center;color:#fff}.motion-state-modal-cont .more-opera-wrapper[data-v-b91febe3]{height:0;overflow:hidden;transition:height .3s}.motion-state-modal-cont .more-opera-wrapper.openMore[data-v-b91febe3]{height:58px}.motion-state-modal-cont .more-opera-wrapper.openSpecial[data-v-b91febe3]{height:116px}.motion-state-body[data-v-734cd473]{width:100vw;position:fixed;top:0;right:-100vw;z-index:10;transition:right .3s}.motion-state-body.show[data-v-734cd473]{right:0}.motion-state-body .motion-state-modal[data-v-734cd473]{width:438px;height:100vh;background-color:#2e2e3d;box-shadow:0 1px 14px rgba(0,0,0,.5);float:right;position:relative}@keyframes img_animate-734cd473{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.operation-body[data-v-b087584d]{width:var(--86221f30);height:var(--0213c2d6);top:0;left:0;position:fixed;overflow:hidden;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.operation-body .operation-wrapper[data-v-b087584d]{width:844px;height:100vh;display:flex;flex-direction:column;justify-content:space-between}.operation-body .operation-wrapper .top-bar-component[data-v-b087584d]{transform:var(--8c34001c);z-index:6;pointer-events:none}.operation-body .operation-wrapper .all-opera-wrapper[data-v-b087584d]{width:100%;display:flex;align-items:flex-end;padding:0 15px 15px 32px;box-sizing:border-box;transform:var(--fa4c0300);position:relative;pointer-events:none}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-1[data-v-b087584d]{display:flex;flex-direction:column;align-items:flex-end}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-1 .left-joystick-component[data-v-b087584d]{margin-bottom:-10px;pointer-events:all}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-1 .left-joystick-component.hide[data-v-b087584d]{opacity:0;pointer-events:none}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-1 .three-dimensional-map[data-v-b087584d]{width:148px;height:100px;border-radius:8px;opacity:0}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-2[data-v-b087584d]{flex:1;margin-left:19px;transition:all .3s}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-2>div[data-v-b087584d]{pointer-events:all}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-2.hide[data-v-b087584d]{opacity:0;pointer-events:none}.operation-body .operation-wrapper .all-opera-wrapper .img[data-v-b087584d]{width:54px;height:54px;border-radius:8px;margin-right:19px;pointer-events:all;position:relative}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-3[data-v-b087584d]{display:flex;flex-direction:column;align-items:flex-end;margin-bottom:-10px;position:relative}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-3 .photo-bar-component[data-v-b087584d]{margin-right:4px;pointer-events:all}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-3 .right-joystick-component[data-v-b087584d]{margin-top:15px;pointer-events:all}.operation-body .operation-wrapper .all-opera-wrapper .wrapper-3 .right-joystick-component.hide[data-v-b087584d]{opacity:0;pointer-events:none}.lamp-wrapper[data-v-dda7e646]{width:28px;height:28px;display:flex;justify-content:center;align-items:center;margin-right:17px;position:relative;background-color:#2e2d36;border-radius:100%;border:1px solid #2e2d36}.lamp-wrapper[data-v-dda7e646]:focus{outline:none}.lamp-wrapper .icon[data-v-dda7e646]{width:28px}.lamp-wrapper .slider[data-v-dda7e646]{width:15px;height:130px;border-radius:10px;position:absolute;top:32px;left:0;right:0;margin:auto;background-color:rgba(0,0,0,.35);padding:6px 0;box-sizing:border-box;z-index:9}.lamp-wrapper .slider .skate[data-v-dda7e646]{width:50px;height:100%;background-color:rgba(0,0,0,0);position:absolute;top:0;left:-10px;touch-action:none}.lamp-wrapper .slider .parent[data-v-dda7e646]{width:8px;height:100%;border-radius:10px;display:flex;align-items:flex-end;justify-content:center;margin:auto;overflow:hidden}.lamp-wrapper .slider .parent .child[data-v-dda7e646]{width:100%;height:var(--28381591);background:linear-gradient(230deg,#6879e4,#495abf);border-radius:6px}.lamp-wrapper .slider .num-show[data-v-dda7e646]{font-size:12px;color:#fff;background-color:rgba(0,0,0,.35);transform:scale(.8);width:max-content;text-align:center;border-radius:4px;padding:0 2px;position:absolute;top:0;left:-38px;opacity:0}.lamp-wrapper .slider .num-show.show[data-v-dda7e646]{opacity:1}.volume-wrapper[data-v-d2fc05e3]{width:28px;height:28px;display:flex;justify-content:center;align-items:center;margin-right:17px;position:relative;background-color:#2e2d36;border-radius:100%;border:1px solid #2e2d36}.volume-wrapper[data-v-d2fc05e3]:focus{outline:none}.volume-wrapper .icon[data-v-d2fc05e3]{width:24px}.volume-wrapper .slider[data-v-d2fc05e3]{width:15px;height:130px;border-radius:10px;position:absolute;top:32px;left:0;right:0;margin:auto;background-color:rgba(0,0,0,.35);padding:6px 0;box-sizing:border-box;z-index:9}.volume-wrapper .slider .skate[data-v-d2fc05e3]{width:50px;height:100%;background-color:rgba(0,0,0,0);position:absolute;top:0;left:-10px;touch-action:none}.volume-wrapper .slider .parent[data-v-d2fc05e3]{width:8px;height:100%;border-radius:10px;display:flex;align-items:flex-end;justify-content:center;margin:auto;overflow:hidden}.volume-wrapper .slider .parent .child[data-v-d2fc05e3]{width:100%;height:var(--2fd1e95c);background:linear-gradient(230deg,#6879e4,#495abf);border-radius:6px}.volume-wrapper .slider .num-show[data-v-d2fc05e3]{font-size:12px;color:#fff;background-color:rgba(0,0,0,.35);transform:scale(.8);width:max-content;text-align:center;border-radius:4px;padding:0 2px;position:absolute;top:0;left:-38px;opacity:0}.volume-wrapper .slider .num-show.show[data-v-d2fc05e3]{opacity:1}.radar_wrapper[data-v-7bcf0e48]{width:28px;height:28px;display:flex;justify-content:center;align-items:center;margin-right:5px;position:relative;user-select:none;background-color:#2e2d36;border-radius:100%;border:1px solid #2e2d36}.radar_wrapper .icon[data-v-7bcf0e48]{width:24px}.list-body[data-v-4125045f]{width:calc(100vw - 96px);height:100%;position:relative;padding-right:30px}.list-body .list-content-container[data-v-4125045f]{width:100%;height:100%}.list-body .list-content-container .list-content[data-v-4125045f]{width:100%;display:flex;flex-wrap:wrap}.list-body .list-content-container .list-content .order_list_item[data-v-4125045f]{width:var(--7f412f8b);display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:20px}.list-body .list-content-container .list-content .order_list_item.loading .order_list_item_icon[data-v-4125045f]{transform:scale(1.2)}.list-body .list-content-container .list-content .order_list_item.disable[data-v-4125045f],.list-body .list-content-container .list-content .order_list_item.lock[data-v-4125045f]{opacity:.3}.list-body .list-content-container .list-content .order_list_item[data-v-4125045f]:nth-child(3n-1){margin-left:calc((100% - var(--7f412f8b) * 3) / 2);margin-right:calc((100% - var(--7f412f8b) * 3) / 2)}.list-body .list-content-container .list-content .order_list_item .order_list_item_icon[data-v-4125045f]{width:60px;height:60px;display:flex;justify-content:center;align-items:center;position:relative;transition:all .3s}.list-body .list-content-container .list-content .order_list_item .order_list_item_icon .svg_bg[data-v-4125045f]{width:60px;height:60px;position:absolute;top:0;left:0}.list-body .list-content-container .list-content .order_list_item .order_list_item_icon .svg_icon[data-v-4125045f]{width:50px;height:50px;z-index:1}.list-body .list-content-container .list-content .order_list_item .order_list_item_icon .svg_icon_loading[data-v-4125045f]{width:30px;height:30px;z-index:1;animation:loadingAnimation-4125045f 1.5s linear infinite}.list-body .list-content-container .list-content .order_list_item .order_name[data-v-4125045f]{font-size:16px;color:#fff;text-align:center;margin-top:8px;line-height:1}.list-body .curr-scroll-bar[data-v-4125045f]{background-color:rgba(0,0,0,.3);position:absolute;top:20px;right:0;width:10px;height:calc(100% - 20px);border-radius:10px;padding:4px 0;box-sizing:border-box}.list-body .curr-scroll-bar .child-container[data-v-4125045f]{width:5px;height:100%;margin:auto;border-radius:10px;position:relative;overflow:hidden}.list-body .curr-scroll-bar .child-container .child[data-v-4125045f]{position:absolute;left:0;right:0;top:var(--3c9811d7);margin:auto;width:5px;height:76px;height:var(--7f754748);background:linear-gradient(230deg,#6879e4,#495abf);border-radius:3px}@keyframes loadingAnimation-4125045f{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.order-list-wrapper[data-v-1b8f03b8]{margin-top:20px;touch-action:none}.order-list-wrapper .list-menu[data-v-1b8f03b8]{display:flex;align-items:center;justify-content:space-between;position:relative;width:100px;margin:auto;padding-bottom:6px}.order-list-wrapper .list-menu .menu-item[data-v-1b8f03b8]{font-size:16px;color:#fff}.order-list-wrapper .list-menu .menu-line[data-v-1b8f03b8]{width:var(--6101cfe7);height:5px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:3px;position:absolute;left:6px;bottom:0;transition:all .3s}.order-list-wrapper .list-menu .menu-line.left[data-v-1b8f03b8]{left:var(--8eb0e5e2)}.order-list-wrapper .list-menu .menu-line.right[data-v-1b8f03b8]{left:var(--945a56f4)}.order-list-wrapper .list-cont[data-v-1b8f03b8]{width:100%;height:332px;padding:20px 48px 0;box-sizing:border-box}.order-list-wrapper .list-cont .list-wrapper[data-v-1b8f03b8]{width:100%;height:100%;overflow:hidden;position:relative;padding-right:30px}.order-list-wrapper .list-cont .list-wrapper-body[data-v-1b8f03b8]{height:100%;position:absolute;left:0;top:0;display:flex;transition:all .3s}.order-list-wrapper .list-cont .list-wrapper-body.left[data-v-1b8f03b8]{left:0}.order-list-wrapper .list-cont .list-wrapper-body.right[data-v-1b8f03b8]{left:calc(-60px - (100vw - 96px))}.control-body[data-v-630fb873]{width:100vw;height:100vh;background-image:url(/assets/remoteControl_bg-CvxzfbdL.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;position:fixed;top:0;left:0;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.control-body .control-cont[data-v-630fb873]{width:100%;height:auto;overflow:auto}.control-body .control-cont .nav-bar-cont[data-v-630fb873]{width:100%;height:60px;padding:0 24px;box-sizing:border-box;font-size:19px;color:#fff;line-height:26px;display:flex;align-items:center;justify-content:space-between}.control-body .control-cont .nav-bar-cont .back-btn[data-v-630fb873]{padding-right:10px;margin-left:-10px;padding-left:10px;height:100%;display:flex;align-items:center;justify-content:center}.control-body .control-cont .nav-bar-cont .back-btn svg[data-v-630fb873]{width:14px;height:21px}.control-body .control-cont .setting[data-v-630fb873]{margin-left:73px;margin-right:18px;height:58px;background:#111127;border-radius:82px;display:flex;align-items:center;justify-content:space-around}.control-body .control-cont .setting svg[data-v-630fb873]{width:25px;height:25px}.control-body .control-cont .joystick-box[data-v-630fb873]{margin:auto;position:relative;display:flex;justify-content:center}.control-body .control-cont .joystick-box .joystick-component[data-v-630fb873]{z-index:9}.control-body .control-cont .joystick-box .joystick-component.disable[data-v-630fb873]{opacity:.3}.map_page[data-v-ea637905]{width:100vw;height:100vh;position:fixed;top:0;left:100vw;background-color:#2e2e3d;transition:left .3s}.map_page .title_bar[data-v-ea637905]{width:100%;height:56px;background:linear-gradient(180deg,#252533,#1c1c25);display:flex;align-items:center;justify-content:center;position:relative}.map_page .title_bar .btn-back[data-v-ea637905]{width:36px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;left:11px;top:50%;transform:translateY(-50%)}.map_page .title_bar .page_title[data-v-ea637905]{font-size:18px;font-family:AlibabaPuHuiTiM;color:#fff;line-height:25px}.map_page .map_list[data-v-ea637905]{width:100%;height:calc(100vh - 56px);padding:25px;box-sizing:border-box;white-space:nowrap;overflow:hidden}.map_page .map_list[data-v-ea637905]:after{content:" ";width:261px;height:100%;background:linear-gradient(90deg,rgba(32,32,32,0),#12121c);position:absolute;right:0;top:0;pointer-events:none}.map_page .map_list .list_wrapper[data-v-ea637905]{height:100%;display:inline-block;padding-right:200px;padding-left:30px}.map_page .map_list .list_wrapper .map_item[data-v-ea637905]{width:336px;height:100%;border-radius:8px;border:1px solid #5566cd;box-sizing:border-box;overflow:hidden;position:relative;display:inline-block;margin-right:12px}.map_page .map_list .list_wrapper .map_item[data-v-ea637905]:last-of-type{margin-right:0}.map_page .map_list .list_wrapper .map_item .preview_img[data-v-ea637905]{width:100%;height:calc(100% - 110px);background-color:gray;display:flex;justify-content:center;align-items:center}.map_page .map_list .list_wrapper .map_item .preview_img .loading_img[data-v-ea637905]{width:30px;animation-name:loading-ea637905;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:linear}.map_page .map_list .list_wrapper .map_item .preview_img .map_img[data-v-ea637905]{width:100%;height:100%;object-fit:cover}.map_page .map_list .list_wrapper .map_item .operation[data-v-ea637905]{width:100%;height:110px;background-color:#fff;padding:12px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between}.map_page .map_list .list_wrapper .map_item .operation .map_name[data-v-ea637905]{font-size:19px;display:flex;align-items:center;padding:0 10px;box-sizing:border-box}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info[data-v-ea637905]{display:flex;flex-direction:column;flex:1;margin-right:18px}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info .name[data-v-ea637905]{line-height:1}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_info .time[data-v-ea637905]{font-size:12px;color:gray;margin-top:4px}.map_page .map_list .list_wrapper .map_item .operation .map_name .map_name_edit[data-v-ea637905]{width:30px;height:30px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:30px;display:flex;align-items:center;justify-content:center}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap[data-v-ea637905]{display:flex;align-items:center;justify-content:space-between}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap>div[data-v-ea637905]{display:flex;align-items:center;justify-content:center}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap>div>svg[data-v-ea637905]{margin-right:8px}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap .btn_add_route[data-v-ea637905]{width:48%;height:40px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:20px;color:#fff}.map_page .map_list .list_wrapper .map_item .operation .btn_wrap .btn_del[data-v-ea637905]{width:48%;height:40px;background:#cfcfcf;border-radius:20px;color:#3a3a3a}.map_page .map_list .list_wrapper .map_item .select_map[data-v-ea637905]{position:absolute;top:10px;right:10px}.map_page .btn_add_map[data-v-ea637905]{width:64px;height:64px;position:absolute;bottom:28px;right:44px}.map_page .btn_add_map>svg[data-v-ea637905]{width:100%;height:100%}@keyframes loading-ea637905{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.all_task_list_wrap[data-v-09fdd6d0]{width:100%;height:92px;background-color:#26262c}.all_task_list_wrap .all_task_list_item[data-v-09fdd6d0]{width:100%;height:30px;border-bottom:1px solid rgba(147,140,140,.5);display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff}.all_task_list_wrap .all_task_list_item>input[data-v-09fdd6d0]{width:max-content;max-width:45px;height:20px;background:#080808;border-radius:2px;border:1px solid #979797;outline:none;color:#fff;margin:0 5px;text-align:center;line-height:18px;box-sizing:border-box}.task_wrapper[data-v-8a6f9bbc]{width:172px;height:300px;position:fixed;right:20px;top:55px;background:rgba(22,24,35,.77);box-shadow:0 1 8px rgba(0,0,0,.15);border-radius:3px;backdrop-filter:blur(12px);padding:15px 10px;box-sizing:border-box;pointer-events:all}.task_wrapper .title[data-v-8a6f9bbc]{font-size:16px;color:#fff;text-shadow:0px 1px 8px rgba(0,0,0,.15);line-height:24px}.task_wrapper .task_list[data-v-8a6f9bbc]{width:100%;height:calc(100% - 28px);margin-top:4px;overflow:hidden}.task_wrapper .task_list .task_list_wrapper .task_item[data-v-8a6f9bbc]{width:100%;min-height:30px;box-shadow:0 1 8px rgba(0,0,0,.15);border-radius:2px;max-height:140;overflow:hidden;margin-bottom:5px}.task_wrapper .task_list .task_list_wrapper .task_item.open .all_task_list[data-v-8a6f9bbc]{height:92px}.task_wrapper .task_list .task_list_wrapper .task_item.open .curr_selected_task[data-v-8a6f9bbc]{background:rgba(54,54,54,.5)}.task_wrapper .task_list .task_list_wrapper .task_item.open .curr_selected_task .arrow_wrap[data-v-8a6f9bbc]{transform:rotate(180deg)}.task_wrapper .task_list .task_list_wrapper .task_item.close .all_task_list[data-v-8a6f9bbc]{height:0}.task_wrapper .task_list .task_list_wrapper .task_item.close .curr_selected_task[data-v-8a6f9bbc]{background:rgba(255,255,255,.5)}.task_wrapper .task_list .task_list_wrapper .task_item.close .curr_selected_task .arrow_wrap[data-v-8a6f9bbc]{transform:rotate(0)}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task[data-v-8a6f9bbc]{width:100%;height:30px;font-size:12px;color:#fff;padding:0 12px;box-sizing:border-box;display:flex;align-items:center;transition:all .3s}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task .curr_task_del_btn[data-v-8a6f9bbc]{height:100%;padding-right:10px;padding-left:12px;margin-left:-12px;display:flex;justify-content:center;align-items:center}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task .curr_task_del_btn>svg[data-v-8a6f9bbc]{width:14px;height:14px}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task>span[data-v-8a6f9bbc]{flex:1}.task_wrapper .task_list .task_list_wrapper .task_item .curr_selected_task>.arrow_wrap[data-v-8a6f9bbc]{height:30px;display:flex;justify-content:flex-end;align-items:center;padding:0 10px;margin-right:-10px;transition:all .3s}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list[data-v-8a6f9bbc]{width:100%;height:92px;overflow:hidden;background-color:#26262c;transition:height .3s}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list .all_task_list_item[data-v-8a6f9bbc]{width:100%;height:30px;border-bottom:1px solid rgba(147,140,140,.5);display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff}.task_wrapper .task_list .task_list_wrapper .task_item .all_task_list .all_task_list_item>input[data-v-8a6f9bbc]{width:max-content;max-width:45px;height:20px;background:#080808;border-radius:2px;border:1px solid #979797;outline:none;color:#fff;margin:0 5px;text-align:center;line-height:18px;box-sizing:border-box}.task_wrapper .task_list .task_list_wrapper .add_task_btn[data-v-8a6f9bbc]{width:100%;height:30px;background:rgba(255,255,255,.5);display:flex;align-items:center;justify-content:center;border-radius:2px}.task_wrapper .task_list .task_list_wrapper .add_task_btn>svg[data-v-8a6f9bbc]{width:12px;height:12px}.tip_wrapper[data-v-571d91a9]{position:absolute;top:50px;left:50%;transform:translate(-50%);opacity:1;transition:all .3s}.tip_wrapper.hide[data-v-571d91a9]{top:-100px;opacity:0}.tip_wrapper .tip_body[data-v-571d91a9]{max-width:340px;border-radius:6px;border:1px solid gray;background-color:#282828;text-align:left;color:#fff;padding:8px 16px;pointer-events:none}.tip_wrapper .tip_body .icon_close[data-v-571d91a9]{width:20px;height:20px;position:absolute;right:-12px;top:-12px;pointer-events:all}.slam_top_bar_wrapper[data-v-36a87161]{width:100%;height:30px;position:absolute;top:20px;left:0;z-index:2;-webkit-overflow-scrolling:touch;pointer-events:none}.slam_top_bar_wrapper[data-v-36a87161]:before{content:"";background:transparent;opacity:.56;width:100%;height:30px;position:absolute;top:-20px;left:0;z-index:1;pointer-events:all}.slam_top_bar_wrapper[data-v-36a87161]:after{content:"";background:linear-gradient(180deg,#000,rgba(0,0,0,0));opacity:.56;width:100%;height:84px;position:absolute;top:-20px;left:0;pointer-events:none}.slam_top_bar_wrapper .top_bar_cont[data-v-36a87161]{width:100%;height:100%;position:relative;z-index:1;padding-right:30px;box-sizing:border-box;display:flex;justify-content:space-between}.slam_top_bar_wrapper .top_bar_cont .left[data-v-36a87161]{height:100%;display:flex;align-items:center;pointer-events:all}.slam_top_bar_wrapper .top_bar_cont .left .btn-back[data-v-36a87161]{width:55px;height:100%;display:flex;align-items:center;padding-left:25px;box-sizing:border-box;opacity:1;-webkit-tap-highlight-color:transparent}.slam_top_bar_wrapper .top_bar_cont .left .btn-back .icon-back[data-v-36a87161]{width:22px;height:100%;-webkit-tap-highlight-color:transparent}.slam_top_bar_wrapper .top_bar_cont .left .title[data-v-36a87161]{font-size:22px;font-family:AlibabaPuHuiTiM;color:#fff;line-height:30px;margin-left:9px}.slam_top_bar_wrapper .top_bar_cont .right[data-v-36a87161]{height:100%;display:flex;align-items:center}.video-wrapper[data-v-f59e85f2]{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;border-radius:0;transition:all .3s;background-color:rgba(0,0,0,.1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.video-wrapper .video-class[data-v-f59e85f2]{width:100%;height:100%;border-radius:0;object-fit:cover;position:relative;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAMAAAC5KTl3AAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtFS1lAAAAK3RSTlMWi3QSa1uQOKBWCTwcb6V4gWInTWYOqQSGfa6XLyszmyABlFFJXySxQ0BGn2PQBgAAC4NJREFUWMMV1kWO5UAQRdFk5kwzs/33v8Cunr7ZUehKAdaRUAse99ozDjF5BqswrPKm7btzJ2tRziN3rMYXC236humIV5Our7nHWnVdFOBojW2XVnkeu1IZHNJH5OPHj9TjgVxBGBwAAmp60WoA1gBBvg3XMFhxUQ4KuLqx0CritYZPPXinsOqB7I76+OHaZlPzLEcftrqOlOwjeXvuEuH6t6emkaofgVUDIb4fEZB6CmRAeFCTq11lxbAgUyx4rXkqlH9I4bTUDRRVD1xjbqb9HyUBn7rhtr1x+x9Y0e3BdX31/loYvZaLxqnjbRuokz+pPG7WebnSNKE3yE6Tka4aDEDMVYr6Neq126c+ZR2nzzm3yyiC7PGWG/1uueqZudrVGYNdsgOMDvt1cI8CXu63QIcPvYNY8z870WwYazTS7DqpDEknZqS0AFXObWUxTaw0q5pnHlq4oQImakpLfJkmErdvAfhsc7lod0DVT4tuob25C0tQjzdiFObCz7U7eaKGP3s6yQVgQ/y+q+nY6K5dfV75iXzcNlGIP38aj22sVwtWWKMRb7B5HoHPaBvI1Ve5TSXATi66vV6utxsV+aZNFu+93VvlrG/oj8Wp67YT8l+Oq6PjwdGatFm7SEAP13kE0y9CEcf9qhtEWCMIq5AGq71moEAI9vrmFcmO8+7ZyDnmRN/VUaFkM2ce8KuBGFzDMmY6myLfQGra2ofgHhbJRXuRDZ4H+HmliWBHXQ0ysLGfv6FetbxtxzRgIZWjIsGVFl5imPXeyvVyayNek+dSWzjXd4t310YBdaF8sXeKs481PjsXbAtIru2+wHbv3GVh3sQY6Dnu6pF3pZ714VYdDi9A5GkXR/6xgaZN/tpQ8wVV3zeBuB+njoBNE4wjc+uA523ysXGd/P2sntmOb3OdHNWP5OVrxD3eJHdtH8QVkEIAqCor3hReR96yqt6PkTQfenllooQ447h6tOrnnuzwA8fMpq+jqg1oW8fTYYIncAYpVeTvkEFr/khQSbjoE8ykx9049OkE5MQEO9lC24tT7DwThQgf4Fhf8nGgAo3GYaON3crODpOr2pu5dBABz69t7F5yJBBo+r6QJdeLDWEoO7r1tceR3haA7gc7eZrCvpxSXXeKpo4P+hRixo9DeOFbqQVjKyWfBg9pnrEZKzK7R437YTTwhfoySG/YOCt3fs4aXlU3FjKortqQ6XyXaD0+Y/8VoqpyU9TRW45eN4oBxAH8Y/jLnNXfELJW+/p/MgO9Z+mBli2qqAP7dV/Arc2+YZRZwtBW8/p32y5ZsEuCS4O5AAgfR7Dde7zhiGfgvurQkfAXIrUG61rmxc2EZo18ph4vaWZI+QM0JdsbNlBJlPlwf9uguujQJy0j7TgTHdtRnjybTg55Hkk9S6l2rpYahumSewKHVosa1bh2Y6r9JGkdKvIDN/eeAwScrfjoLkCxWJuFZQ53FNP5w9XbQd1HhgHcVB/0fATG3sUUid1RTfc2+7pZVKldFSsaEK0v4k90tapQOk2HIbMhaJQtrUEL5+3sDanh8sOpbYRoQoqXWu6SQcUTQL9jzOrXNPWCJwXge4U7tlU1hkF012cAmvp8llQxf1IEMcw14pURxVOWATz4ITnYQjuF+vDXg5hgoiqXzO6mS91FQUBheURHIJxUeU1i3P0WOMpsm7vFYk0JJi/Ev+X3FwYD69cARPuP5GIc0PxoAFjcLRbNur0iMTrQmBBNYJ2ngU4x7SWfdTRl52Bqv7LmYW3C1CyTCPTHeWWIAM/Whm32COHsaj+2UQ739XB9t6NV0o9E9b7CW3XNiXzi9e0KiE+3rntukdIDBWrU2jsfQWuyFJRANxq8StHVv1JPy2C3Byco7qdNbASrnNXZ8G0L/Wp/pif4Ai9aEZ9Bb+TRx+REBdGlkF/s0dUdMSMr+6YCbuGxqPWdzcdqutvqkBzCksFcwAtjf55TeuH79M6AQa7r5PLeXxMFIlQKrXP9VJ275WGX+ptpf+tvTDBsecPnYQAlAWrVbRVJ7K2pRHwIjtSpbX96Y/lbKk6ZWXlBmh15r8yAWQsYxXgBOXYMAfHnUXF+rDqnB8bXDRtAn7bCziIqetSboK3NexMePvsCRLvmsoREA+kH8j4HWFpnNEaWgOmR7xyXHfTaz3slHc/YA6H6tl/L8d5tPcIwwD0tjvRaq3Y5BmYBSDClpv0VIX4s8D0XK3sPdpAb94HjPLkgboEz9EdZATW6ZdcmQvtKUwoWw+nAVKA7IcdY1UHnvNnIBplKci+knzewLz5/GGnzkGuuGky+0LTjtGBGR85EQICDqKChnm5pH3Z44nnWAk1YRdyu3g7QoFZ0h8jkr2ffjKmi+Qvsp+9GvNGZHmgW+YQAGUw7PPt8IPKbdy432vhKtRJjKWcSqq7helj81o3nfmaxVZ7Sqie8OOBk9WsyTD/ab7fQ5aWwQeJvnH6+ayo4IdIkOSBJjzXkgr+1TPhAx1AXDsxtCCj3TzQTLA1p782f7a8vdgPfwwrXmZxxbqo2h+6Zlo6mcMY4V7cFBOLm17VCvx9Qa2tAnkxEB+KYyQgbgAAnmNDOdOO6y2Cb+lke1MWQc9o+EMdQf7ubIG3Ek8GZ4k1PtGjbhwgOMPp5Em59JMVk/jU8/aF73Xcrd3UBNZyueQu0/xz2aGtZT8CRziOax2BWFXaeDzgZNV7oRtUzFoijoETf3xkAFFk3OMb7SgPh5wxU1+MygDIp9gZChH2qEcpgLh8pBIK90PXT1ZSU+ZExFK4Vm4GL/J7+K13lS5dQkW4HQwl6GX4yLqu8GhGWS2k75yel5IZIfFNdAL0NpKr2N5dQesBnxa42DLgJd6agS1jJsp1mO1dip7PU4P6diLLoTsZ4m3Q0QweiqeFfIGPLgF6v6mSVv6xe85VBD/1Mpe3AurRbcJ9SEo8NszNVy8rOCEexyIFcJRvYAlI/wk2I7r3p60FFLQXoH2q9xri/m41svRPbW0/EnPn2DWsmk0IiPpB60aa3+hiFfWuC8ZvWKEd9LxAk3HcOof6d77RewPaPsGw5lQAHcZN2vx1448u9pLfMLGQ3BSRRjBzRhKt7HcCw/7aqjtCDs5q76b4ZGphxN2th1WeXYlfnozX3ebKtX4Te11hf1tZP1diiGjIDAB1cR4Sb9rcFPC/nBARjlgDxd+tCBb1t91j71xJcgGjT3g/dUFnXXNiDrxkyoHANPk58ACPUa42hj8tgGrhiXOCmygxFZBiT2wyAJTDJ4wJEPmp6JIrDaSWYNqv4xH2wwdSTGYb3E0pXnS39nmLUsqoVZxzSoegqzd0o06wdbTXsaHGL+IF4JtIcXddTcD/dCd8hVf+fWPSV553kjMmMEULLS8HcgmptDO955dLGX78PjiDA6IsTHPm5IA6bc5ha0gaGkoEttXuxU11B2dOJ65/Q08tEF1+Y9cr2Nh/VECfQ33GyvR/gsdN1LuIeLpKMCAF2yRr769g9/4aJLZNRI71m2S91+Kp+Q0zubTcxoG2/6gm1Q79wkMj2XNO2ui7nWw8ULtu27CCvqTGX2PffD+xcwgh/TrOKvGZMM5jRFGDTn4NO/lwnDR/GY/waDZtkWDUPI0O8ztcFVqp6r2ZW+2bvkJ3raptYagFqu95VdIaml2CIp6CKets34x+fH2C+zH4cVFO7vj+6k2FU39PtRhWluYeZ3gDz1TLB9K2v7SD9gJU1qDxoRDrAWcrFGLyndhdtd0505+gEP79adK8fmFCWNYC+ahzVNcRH79E8dA1iqX/N0qq22xcOc20ALxLDspEj4QCFBQMgaIwoKbxr0Bd7Sbws6GiRK6tqoPfpiCle23axejRLyO1I+ahsEpWrzT5ZsCyS5RcY9jMfENFxSnhKsrfW8JHH6/rdQUMfmQPT3Uz9gY0C/pu1yuCnrPUvio0a1qMEosA/EwIzzid7cqsAAAAASUVORK5CYII=);background-color:#fff;animation:snow-f59e85f2 .2s infinite}.video-wrapper .loading[data-v-f59e85f2]{background-color:rgba(0,0,0,.6);position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;color:#fff;font-size:12px;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.video-wrapper .loading>img[data-v-f59e85f2]{width:20px;margin-right:10px;animation:rotateA-f59e85f2 2s linear infinite}.video-wrapper .flash[data-v-f59e85f2]{width:100%;height:100%;background-color:rgba(255,255,255,0);position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.video-wrapper .flash.is-action[data-v-f59e85f2]{animation:flash_animation-f59e85f2 .5s;animation-fill-mode:forwards}@keyframes rotateA-f59e85f2{0%{rotate:0deg}to{rotate:360deg}}@keyframes flash_animation-f59e85f2{0%{background-color:rgba(255,255,255,.5)}to{background-color:rgba(255,255,255,0)}}@keyframes snow-f59e85f2{0%{background-position:0 0}to{background-position:100% 100%}}.alert_modal_wrapper[data-v-c2c1c615]{width:100%;height:100%;background-color:rgba(0,0,0,.1);position:absolute;top:0;left:0;z-index:2}.alert_modal_wrapper .modal[data-v-c2c1c615]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:380px;min-height:200px;background-color:#fff;border-radius:10px;padding:20px 16px 14px;box-sizing:border-box}.alert_modal_wrapper .modal.input[data-v-c2c1c615]{height:200px}.alert_modal_wrapper .modal.ask[data-v-c2c1c615],.alert_modal_wrapper .modal.alert[data-v-c2c1c615]{min-height:172px}.alert_modal_wrapper .modal.ask .title[data-v-c2c1c615],.alert_modal_wrapper .modal.alert .title[data-v-c2c1c615]{width:100px;height:100px;background-color:#fff;border-radius:100%;padding:7px;box-sizing:border-box;margin:-70px auto 10px}.alert_modal_wrapper .modal.ask .title .icon_wrap[data-v-c2c1c615],.alert_modal_wrapper .modal.alert .title .icon_wrap[data-v-c2c1c615]{width:100%;height:100%;border-radius:100%;background-color:#6071da;display:flex;justify-content:center;align-items:center}.alert_modal_wrapper .modal .title[data-v-c2c1c615]{font-size:20px;line-height:26px;text-align:center}.alert_modal_wrapper .modal .input_wrap[data-v-c2c1c615]{width:100%;height:50px;background:#f4f4f4;border-radius:3px;display:flex;padding:0 20px;box-sizing:border-box;margin-top:20px;margin-bottom:18px}.alert_modal_wrapper .modal .input_wrap>input[data-v-c2c1c615]{background:transparent;width:100%;padding:0;outline:none;border:none;font-size:14px}.alert_modal_wrapper .modal .input_wrap>input[data-v-c2c1c615]::placeholder{color:#616161}.alert_modal_wrapper .modal .content[data-v-c2c1c615]{width:100%;text-align:center;font-size:20px;line-height:28px;margin-bottom:20px}.alert_modal_wrapper .modal .opera[data-v-c2c1c615]{width:100%;display:flex;align-items:center;justify-content:space-between}.alert_modal_wrapper .modal .opera .btn[data-v-c2c1c615]{width:168px;height:48px;background:#d8d8d8;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px}.alert_modal_wrapper .modal .opera .btn.cancel[data-v-c2c1c615]{color:#545454;background:#d8d8d8}.alert_modal_wrapper .modal .opera .btn.sure[data-v-c2c1c615]{background:linear-gradient(230deg,#6879e4,#495abf);color:#fff}.alert_modal_wrapper .modal .opera .btn.long[data-v-c2c1c615]{flex:1}.loading_wrapper[data-v-d1f2bff2]{width:100vw;height:100vh;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:10}.loading_wrapper .cont[data-v-d1f2bff2]{width:110px;height:110px;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading_wrapper .cont>svg[data-v-d1f2bff2]{width:64px;height:64px;transform:rotate(0);animation-name:loadingAnimateImg-d1f2bff2;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}.loading_wrapper .cont>span[data-v-d1f2bff2]{font-size:12px;color:#c8ceda;margin-top:8px;position:relative}.loading_wrapper .cont>span[data-v-d1f2bff2]:after{width:10px;content:"...";position:absolute;right:-12px;bottom:0;font-size:12px;animation-name:loadingAnimateText-d1f2bff2;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}@keyframes loadingAnimateText-d1f2bff2{0%{content:"."}50%{content:".."}to{content:"..."}}@keyframes loadingAnimateImg-d1f2bff2{0%{transform:rotate(0)}80%{transform:rotate(360deg)}to{transform:rotate(360deg)}}.slam_page[data-v-36242e12]{width:100vw;height:100vh;position:fixed;top:0;left:0;transition:left .3s;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none}.slam_page.show[data-v-36242e12]{left:0}.slam_page.hide[data-v-36242e12]{left:-15vw}.slam_page .renderDiv[data-v-36242e12]{width:100vw;height:100vh;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;position:absolute;top:0;left:0;transition:all .3s}.slam_page .renderDiv.half[data-v-36242e12]{width:50%;left:50vw}.slam_page .video_window[data-v-36242e12]{width:50%;height:100vh;position:absolute;top:0;left:-50vw;background-color:gray;transition:all .3s}.slam_page .video_window.show[data-v-36242e12]{left:0}.slam_page[data-v-36242e12]:after{content:"";background:linear-gradient(0deg,rgba(0,0,0,.8),rgba(0,0,0,0));opacity:.46;width:100%;height:84px;position:absolute;bottom:0;left:0;pointer-events:none}.slam_page .operation_wrapper[data-v-36242e12]{width:100%;position:absolute;bottom:0;left:50%;transform:translate(-50%);pointer-events:none;padding:0 24px 18px;box-sizing:border-box;transition:all .3s;z-index:2}.slam_page .operation_wrapper.half[data-v-36242e12]{width:50%;transform:translate(0)}.slam_page .operation_wrapper.hide[data-v-36242e12]{bottom:-90px}.slam_page .operation_wrapper .wrap[data-v-36242e12]{width:100%;display:flex;align-items:flex-end;box-sizing:border-box;transition:padding .3s}.slam_page .operation_wrapper .wrap .joystick-component[data-v-36242e12]{pointer-events:all;transition:margin .3s}.slam_page .operation_wrapper .wrap .joystick-component.left.hide[data-v-36242e12]{margin-left:-172px;margin-right:24px}.slam_page .operation_wrapper .wrap .joystick-component.right.hide[data-v-36242e12]{margin-right:-172px;margin-left:24px}.slam_page .operation_wrapper .wrap .btn_container[data-v-36242e12]{flex:1;display:flex;align-items:center;padding:0 25px;position:relative}.slam_page .operation_wrapper .wrap .btn_container .btn_container_child[data-v-36242e12]{display:flex;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .3s}.slam_page .operation_wrapper .wrap .btn_container .btn_container_child.hide[data-v-36242e12]{transform:translate(-50%,120px)}.slam_page .operation_wrapper .wrap .btn_container.center[data-v-36242e12]{justify-content:center}.slam_page .operation_wrapper .wrap .btn_container.start[data-v-36242e12]{justify-content:flex-start}.slam_page .operation_wrapper .wrap .btn_container.between[data-v-36242e12]{justify-content:space-between}.slam_page .operation_wrapper .wrap .btn_container .btn[data-v-36242e12]{padding:0 20px;height:40px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:24px;color:#fff;font-size:19px;line-height:40px;text-align:center;pointer-events:all;display:flex;justify-content:center;align-items:center;transition:opacity .3s}.slam_page .operation_wrapper .wrap .btn_container .btn.hide[data-v-36242e12]{opacity:0;pointer-events:none}.slam_page .operation_wrapper .wrap .btn_container .btn>svg[data-v-36242e12]{width:40px;height:40px}.slam_page .operation_wrapper .wrap .btn_container .btn.small[data-v-36242e12]{padding:0;width:40px;border-radius:100%;font-size:12px}.slam_page .operation_wrapper .wrap .btn_container .slam_model[data-v-36242e12]{width:100%;display:flex;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-36242e12]{display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:all;margin-right:26px;-webkit-tap-highlight-color:rgba(255,255,255,0)!important;-webkit-tap-highlight-color:transparent!important}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-36242e12]:active{background:none}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task[data-v-36242e12]:last-of-type{margin-right:0}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task>svg[data-v-36242e12]{width:45px;height:45px}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task>span[data-v-36242e12]{font-size:12px;color:#fff;line-height:16px;margin-top:5px}.slam_page .operation_wrapper .wrap .btn_container .slam_model .btn_task.noMargin[data-v-36242e12]{margin-right:0}.slam_page .btn_opera[data-v-36242e12]{width:42px;height:42px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:100%;position:fixed;top:65px;right:34px;color:#fff;font-size:12px;text-align:center;line-height:42px;transition:right .3s}.slam_page .btn_opera.save[data-v-36242e12]{right:100px}.slam_page .btn_opera.save.moreRight[data-v-36242e12]{right:266px}.slam_page .btn_opera.moreRight[data-v-36242e12]{right:200px}.slam_page .btn_opera>svg[data-v-36242e12]{width:100%;height:100%}.slam_page .task-component[data-v-36242e12]{right:22px;transition:right .3s;z-index:2}.slam_page .task-component.show[data-v-36242e12]{right:22px}.slam_page .task-component.hide[data-v-36242e12]{right:-180px}.slam_page .empty_show[data-v-36242e12]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;pointer-events:none;box-sizing:border-box;touch-action:none;user-select:none;-webkit-touch-callout:none;-webkit-user-select:none;transition:all .3s}.slam_page .empty_show.half[data-v-36242e12]{padding-left:50%}.slam_page .empty_show .empty_img[data-v-36242e12]{width:97px;height:90px;margin-bottom:6px}.slam_page .empty_show .empty_text[data-v-36242e12]{color:#7f86b0;font-size:14px;margin-bottom:10px;line-height:20px}.slam_page .empty_show .btn_add_map[data-v-36242e12]{height:26px;background:linear-gradient(230deg,#6879e4,#495abf);border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;pointer-events:all;padding:0 10px}.slam_page .empty_show .btn_add_map>svg[data-v-36242e12]{width:10px;height:10px;margin-right:5px}.slam_page .patrol_situation[data-v-36242e12]{background-color:rgba(0,0,0,.36);top:65px;left:40px;position:absolute;color:#fff;font-size:12px;display:flex;flex-direction:column;justify-content:center;padding:8px 10px;border-radius:10px;backdrop-filter:blur(4px);z-index:2}.slam_page .patrol_situation>span[data-v-36242e12]{transform:scale(.8) translate(-10%)}.map_page[data-v-36242e12]{left:100vw}.map_page.show[data-v-36242e12]{left:0vw}.map_page.hide[data-v-36242e12]{left:100vw}\n/*$vite$:1*/',document.head.appendChild(__vite_style__),exports({C:isRef,D:getDefaultExportFromCjs,H:urdfRobotToIKRoot,I:setIKFromUrdf,N:setUrdfFromIK,a:createBaseVNode,ab:useRoute,ag:nextTick,ah:provide,ai:useCssVars,ak:listenAppToWeb,am:removeAppToWebLister,an:normalizeClass,b:unref,c:createElementBlock,d:defineComponent,g:webToApp,h:popScopeId,m:h,n:normalizeStyle,o:openBlock,p:pushScopeId,r:requireBlockly_compressed,s:storeToRefs,t:t,v:useToggle,w:watch,x:ref,y:withDirectives,z:createCommentVNode}),"undefined"!=typeof window){function n(){var e=document.body,t=document.getElementById("unitree-svg-icons");t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",t.style.width="0",t.style.height="0",t.id="unitree-svg-icons",t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),t.innerHTML='<symbol  viewBox="0 0 114 123" id="icon/active/icon_active_blowKiss_white"><path d="M78.814 45.028c-3.349-.542-11.4-5.97-17.19-4.16-5.789 1.809-5.335 3.257-8.23 4.162-2.896.905-3.348-.542-9.137 1.267-5.788 1.809-9.316 10.855-11.758 13.208 0 0-2.415 2.442-1.538 5.247.878 2.803 3.8 1.988 3.8 1.988 10.133-3.166 13.57-7.419 13.57-7.419s5.245 1.538 9.586.181c4.342-1.357 7.78-5.61 7.78-5.61s5.248 1.538 15.378-1.628c0 0 2.866-.996 1.989-3.8-.878-2.804-4.25-3.436-4.25-3.436Zm-1.63 10.042c-8.683 2.713-6.872 8.502-17.004 11.67-10.132 3.167-11.942-2.62-20.625.092-2.894.906-3.89 2.804-3.436 4.255 1.356 4.34 12.665 15.101 28.586 10.127 15.92-4.976 19.086-20.264 17.73-24.604-.454-1.45-2.357-2.445-5.25-1.54Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_bothHandsUp_white"><path d="M44.914 55.457a3.362 3.362 0 0 0-4.7-.671 3.362 3.362 0 0 0-.671 4.7l3.997 5.33c.504.67.43 1.604-.157 2.192L42.04 68.35a1.668 1.668 0 0 1-2.476-.116l-9.421-11.31V41.358c0-1.857-1.5-3.357-3.357-3.357a3.354 3.354 0 0 0-3.357 3.357V64.27c0 1.143.388 2.255 1.101 3.147l10.921 14.09a6.262 6.262 0 0 1 1.091 2.276c.19.724.85 1.217 1.606 1.217h13.816c.923 0 1.679-.755 1.679-1.679v-11.75a13.45 13.45 0 0 0-2.686-8.057l-6.043-8.057ZM87.214 38a3.354 3.354 0 0 0-3.357 3.357v15.569l-9.42 11.31a1.685 1.685 0 0 1-2.477.115l-1.343-1.343a1.677 1.677 0 0 1-.157-2.193l3.997-5.33a3.362 3.362 0 0 0-.671-4.7 3.362 3.362 0 0 0-4.7.672l-6.043 8.057a13.45 13.45 0 0 0-2.686 8.057v11.75c0 .924.755 1.679 1.679 1.679h13.816c.745 0 1.417-.493 1.606-1.217a6.262 6.262 0 0 1 1.09-2.277L89.47 67.417a5.041 5.041 0 0 0 1.101-3.147V41.357c0-1.857-1.5-3.357-3.357-3.357Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_clamp_white"><g fill-rule="nonzero" stroke-width="0"><path d="M77.794 73.989c-.123 4.814-2.224 8.792-5.263 12.375-2.618 3.08-5.617 5.596-9.649 6.603-4.338 1.088-8.493.455-12.511-1.388-3.38-1.55-6.331-3.712-8.956-6.33-4.842-4.836-9.681-9.675-14.517-14.517-.768-.769-1.374-1.578-.993-2.795.707-2.258 2.972-2.917 4.692-1.258 2.353 2.278 4.644 4.624 6.963 6.936.258.258.517.666.81.693.618.061 1.454.136 1.842-.204.333-.292.265-1.162.177-1.747-.048-.327-.483-.612-.762-.898-4.005-4.025-8.03-8.03-12.022-12.07-1.577-1.59-1.033-4.059.993-4.616 1.333-.367 2.387.17 3.325 1.122 3.651 3.705 7.337 7.39 11.009 11.076.258.259.51.53.795.741.64.47 1.306.45 1.89-.088.599-.55.613-1.224.191-1.877-.252-.387-.605-.727-.938-1.06-4.862-4.869-9.73-9.73-14.579-14.606-1.761-1.775-1.204-4.27 1.074-4.896 1.13-.313 1.993.204 2.74.945 2.646 2.611 5.27 5.23 7.895 7.854 2.34 2.346 4.665 4.705 7.004 7.044.306.306.632.748 1 .803.537.088 1.23.054 1.658-.231.585-.381.7-1.102.252-1.741a7.302 7.302 0 0 0-.85-.986c-3.8-3.821-7.616-7.623-11.403-11.45-1.598-1.612-1.136-4.02.884-4.645 1.326-.408 2.387.095 3.332 1.054 3.8 3.828 7.615 7.63 11.423 11.437 2.775 2.781 5.535 5.59 8.344 8.336.428.415 1.108.823 1.665.81 1.014-.014 1.503-1.21 1.02-2.251-1.244-2.672-2.556-5.31-3.746-7.996-.354-.803-.578-1.741-.565-2.612.028-1.835 1.931-2.991 3.57-2.203.626.306 1.313.782 1.646 1.367 3.087 5.433 6.174 10.873 9.111 16.394 1.116 2.088 1.483 4.46 1.449 6.875Z" /><path d="M72.313 92.042c1.442-1.646 2.938-3.19 4.23-4.882 3.107-4.06 5.031-8.588 4.882-13.804-.109-3.848-1.285-7.425-3.176-10.764a1045.897 1045.897 0 0 0-7.044-12.307c-.599-1.027-.898-1.952-.095-2.999.822-1.074 1.87-1.564 3.223-1.373 1.55.224 2.516 1.21 3.243 2.495 1.319 2.305 2.633 4.613 3.944 6.922 1.312 2.305 2.57 4.651 3.944 6.922 4.365 7.201 3.29 15.123-1.537 21.637-2.645 3.577-5.786 6.541-10.18 7.86-.38.116-.763.224-1.148.327-.075.013-.15-.014-.286-.034ZM60.04 47.477c-1.449 1.53-1.945 3.365-1.646 5.623-.299-.218-.442-.3-.557-.415-3.271-3.264-6.508-6.555-9.812-9.778-.755-.734-.694-1.319-.163-2.074 1.074-1.53 3.522-2.053 4.922-.74 2.482 2.325 4.787 4.854 7.256 7.384Zm3.74-13.505c.32-2.556.598-4.814.897-7.248 1.272.55 2.42 1.04 3.754 1.618-1.544 1.87-3.013 3.638-4.651 5.63Zm-13.056-.435c-1.387-1.673-2.774-3.345-4.297-5.174 1.25-.578 2.4-1.109 3.726-1.72.292 2.386.564 4.596.83 6.799-.082.034-.17.061-.259.095ZM59.32 25.5l-1.877 6.093a2.043 2.043 0 0 1-.204.013c-.618-1.999-1.237-3.998-1.897-6.106h3.978Z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_dance1_black"><defs><path id="icon/active/icon_active_dance1_black_a" d="M0 0h63v66H0z" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(27 48)"><mask id="icon/active/icon_active_dance1_black_b" fill="#fff"><use xlink:href="#icon/active/icon_active_dance1_black_a" /></mask><path d="M36.668 9.698c.502 9.03 1.388 17.598 1.316 26.156-.053 6.27 4.19 9.88 6.996 14.432 1.105 1.792 2.475 3.417 3.683 5.147 1.143 1.637 1.02 3.338-.464 4.569-1.593 1.322-3.508 1.149-4.738-.509-3.725-5.022-7.531-10.015-10.81-15.327-1.799-2.914-.624-6.692-1.322-10.01-.24-1.135.733-2.9-.916-3.298-2.089-.504-1.945 1.65-2.468 2.843-1.121 2.558-2.084 5.187-3.213 7.742-.866 1.962-.857 3.726-.014 5.79 1.92 4.706 3.532 9.54 5.224 14.338.693 1.964-.211 3.425-1.929 4.148-1.847.778-3.254-.13-4.133-1.868a8.816 8.816 0 0 1-.406-.932c-2.052-5.565-4.08-11.139-6.159-16.693-.654-1.748-.245-3.383.46-4.926 2.25-4.934 3.402-10.316 6.119-15.053.328-.572.227-1.143.186-1.73-.18-2.538-.357-5.076-.576-8.183-.959 1.769-1.72 3.114-2.426 4.49-.907 1.77-2.29 2.347-4.197 1.896-4.526-1.07-9.065-2.087-13.589-3.17C.898 18.979-.33 17.372.077 15.492c.485-2.243 2.002-3.127 4.668-2.537 3.213.711 6.413 1.49 9.591 2.34 1.436.385 2.248.158 2.944-1.33 1.762-3.764 3.773-7.411 5.617-11.139.71-1.436 1.675-2.32 3.333-2.259.085.003.176.018.253-.007 6.39-2.007 11.124 1.818 16.076 4.702 4.942 2.878 4.882 2.934 9.563-.535 1.83-1.357 3.766-2.57 5.618-3.9 1.68-1.208 3.235-1.028 4.468.531 1.248 1.58.969 3.45-.471 4.566-4.066 3.149-8.303 6.075-12.512 9.033-1.507 1.06-2.926.176-4.247-.546-2.655-1.452-5.268-2.981-8.31-4.712" fill="#151026" mask="url(#icon/active/icon_active_dance1_black_b)" /></g><path d="M97.935 71.37c0 2.306.22 4.637-.05 6.912-.433 3.647-3.77 5.35-8.327 4.505-3.237-.6-5.046-3.096-4.443-6.05.507-2.486 2.37-3.194 4.588-3.5 5.137-.71 5.137-.712 5.137-5.833 0-2.64.047-5.282-.017-7.92-.042-1.76.603-2.558 2.515-2.479 3.292.138 6.26 1.927 9.63 1.679.756-.056.98.797 1.007 1.493.029.742.027 1.485.022 2.227-.017 2.657-.648 3.174-3.36 2.568-1.47-.328-2.9-.832-4.348-1.254-1.563-.455-2.192.213-2.178 1.71.018 1.98.004 3.96.004 5.941h-.18M47.005 38.403c.15-4.243 3.567-7.566 7.608-7.397 4.227.177 7.584 3.794 7.378 7.951-.203 4.077-3.77 7.23-7.958 7.034-4.117-.19-7.173-3.491-7.028-7.588" fill="#161026" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_dance1_white"><defs><path id="icon/active/icon_active_dance1_white_a" d="M0 0h63v66H0z" /></defs><g fill-rule="evenodd"><g transform="translate(27 48)"><mask id="icon/active/icon_active_dance1_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_dance1_white_a" /></mask><path d="M36.668 9.698c.502 9.03 1.388 17.598 1.316 26.156-.053 6.27 4.19 9.88 6.996 14.432 1.105 1.792 2.475 3.417 3.683 5.147 1.143 1.637 1.02 3.338-.464 4.569-1.593 1.322-3.508 1.149-4.738-.509-3.725-5.022-7.531-10.015-10.81-15.327-1.799-2.914-.624-6.692-1.322-10.01-.24-1.135.733-2.9-.916-3.298-2.089-.504-1.945 1.65-2.468 2.843-1.121 2.558-2.084 5.187-3.213 7.742-.866 1.962-.857 3.726-.014 5.79 1.92 4.706 3.532 9.54 5.224 14.338.693 1.964-.211 3.425-1.929 4.148-1.847.778-3.254-.13-4.133-1.868a8.816 8.816 0 0 1-.406-.932c-2.052-5.565-4.08-11.139-6.159-16.693-.654-1.748-.245-3.383.46-4.926 2.25-4.934 3.402-10.316 6.119-15.053.328-.572.227-1.143.186-1.73-.18-2.538-.357-5.076-.576-8.183-.959 1.769-1.72 3.114-2.426 4.49-.907 1.77-2.29 2.347-4.197 1.896-4.526-1.07-9.065-2.087-13.589-3.17C.898 18.979-.33 17.372.077 15.492c.485-2.243 2.002-3.127 4.668-2.537 3.213.711 6.413 1.49 9.591 2.34 1.436.385 2.248.158 2.944-1.33 1.762-3.764 3.773-7.411 5.617-11.139.71-1.436 1.675-2.32 3.333-2.259.085.003.176.018.253-.007 6.39-2.007 11.124 1.818 16.076 4.702 4.942 2.878 4.882 2.934 9.563-.535 1.83-1.357 3.766-2.57 5.618-3.9 1.68-1.208 3.235-1.028 4.468.531 1.248 1.58.969 3.45-.471 4.566-4.066 3.149-8.303 6.075-12.512 9.033-1.507 1.06-2.926.176-4.247-.546-2.655-1.452-5.268-2.981-8.31-4.712" mask="url(#icon/active/icon_active_dance1_white_b)" /></g><path d="M97.935 71.37c0 2.306.22 4.637-.05 6.912-.433 3.647-3.77 5.35-8.327 4.505-3.237-.6-5.046-3.096-4.443-6.05.507-2.486 2.37-3.194 4.588-3.5 5.137-.71 5.137-.712 5.137-5.833 0-2.64.047-5.282-.017-7.92-.042-1.76.603-2.558 2.515-2.479 3.292.138 6.26 1.927 9.63 1.679.756-.056.98.797 1.007 1.493.029.742.027 1.485.022 2.227-.017 2.657-.648 3.174-3.36 2.568-1.47-.328-2.9-.832-4.348-1.254-1.563-.455-2.192.213-2.178 1.71.018 1.98.004 3.96.004 5.941h-.18M47.005 38.403c.15-4.243 3.567-7.566 7.608-7.397 4.227.177 7.584 3.794 7.378 7.951-.203 4.077-3.77 7.23-7.958 7.034-4.117-.19-7.173-3.491-7.028-7.588" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_dance2_black"><defs><path id="icon/active/icon_active_dance2_black_a" d="M0 0h60v62H0z" /><path id="icon/active/icon_active_dance2_black_c" d="M0 0h11v33H0z" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(28 30)"><mask id="icon/active/icon_active_dance2_black_b" fill="#fff"><use xlink:href="#icon/active/icon_active_dance2_black_a" /></mask><path d="M31.491 61.136c-5.406 1.344-10.793 1.016-16.147-.271-.51-.123-1.383.04-1.523-.632-.154-.738.522-1.224 1.088-1.62 2.878-2.017 5.773-4.01 8.651-6.026 1.756-1.23 4.24-2.145 5.026-3.831.812-1.74-1.632-3.533-2.299-5.453-1.465-4.225-2.672-8.53-3.033-12.99-.115-1.427-.496-1.813-1.853-1.977-6.01-.726-11.996-1.68-18.014-2.326-2.454-.264-3.721-.818-3.311-3.665.225-1.559.723-1.723 2.042-1.727 9.46-.022 18.92-.203 28.379-.12 2.206.019 3.594-.793 4.77-2.392 4.08-5.54 8.162-11.076 12.22-16.632 1.525-2.09 4.856-1.936 5.972.329.35.71-.032 1.333-.372 1.923-4.242 7.354-8.613 14.639-12.677 22.089-1.515 2.776-.33 5.697 1.045 8.34 2.082 4.001 2.58 4.092 6.175 1.451 3.383-2.484 6.764-4.97 10.183-7.404.503-.358 1.103-1.066 1.827-.536.542.398.332 1.144.254 1.704-.758 5.428-1.772 10.778-5.335 15.241.09.494-.126.894-.391 1.28-.517.587-1.07 1.15-1.336 1.913a3.23 3.23 0 0 1-.772 1.116c-.169.15-.352.283-.541.407-.956.59-1.673 1.443-2.463 2.215-.23.246-.47.48-.712.713-.828 1.128-2.212 1.496-3.245 2.343l-1.577 1.52c-.825 1.586-2.461 1.958-3.92 2.598-.812.283-1.59.702-2.491.643-1.927.426-3.805 1.002-5.62 1.777" fill="#151026" mask="url(#icon/active/icon_active_dance2_black_b)" /></g><g transform="translate(61 83)"><mask id="icon/active/icon_active_dance2_black_d" fill="#fff"><use xlink:href="#icon/active/icon_active_dance2_black_c" /></mask><path d="M10.616 3.642c-1.532 8.703-3.094 17.4-4.576 26.11-.467 2.745-2.25 3.846-4.93 2.933-.97-.33-.683-1.035-.743-1.648-.54-5.4-.117-10.817-.244-16.224-.027-1.184.064-2.374-.016-3.553-.235-3.451-.472-6.872 3.88-8.194.733-.666 1.66-1.007 2.521-1.463C8.043 1.346 9.035-.923 11 .425c-.127 1.073.253 2.204-.384 3.217" fill="#171127" mask="url(#icon/active/icon_active_dance2_black_d)" /></g><path d="M77.101 75.637c.753-.58 1.614-.637 2.507-.635 6.405.012 12.81.008 19.214.004 1.057 0 2.36-.188 2.008 1.577-.308 1.536 1.285 3.938-1.571 4.423-9.317 1.581-18.639 3.126-27.958 4.685-.784.38-1.55.493-2.272-.15-.279-1.924 1.535-2.334 2.278-3.52 1.116-.786 1.73-2.026 2.513-3.115 1.27-.892 1.932-2.466 3.281-3.269" fill="#171227" /><path d="M56.244 48C53.095 47.95 49.96 44.673 50 41.47c.047-3.736 2.985-6.56 6.729-6.469 3.206.078 6.303 3.271 6.27 6.465-.035 3.5-3.226 6.586-6.755 6.532" fill="#161127" /><path d="M59 91c1.731-1.442 3.854-1.708 5.967-2 .08.225.015.378-.22.446C62.78 89.776 61.04 90.95 59 91" fill="#171127" /><path d="M76 82c-.128 1.509-1.491 1.799-2.15 2.785L73 85c.623-1.482 1.984-2.02 3-3M80 79c-.255 1.236-1.471 1.803-1.97 2.87L77 82c.737-1.267 1.716-2.288 3-3M81.994 76c.105 1.071-1.15 1.429-1.994 2 .009-1.011.928-1.544 1.994-2" fill="#171227" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_dance2_white"><defs><path id="icon/active/icon_active_dance2_white_a" d="M0 0h60v62H0z" /><path id="icon/active/icon_active_dance2_white_c" d="M0 0h11v33H0z" /></defs><g fill-rule="evenodd"><g transform="translate(28 30)"><mask id="icon/active/icon_active_dance2_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_dance2_white_a" /></mask><path d="M31.491 61.136c-5.406 1.344-10.793 1.016-16.147-.271-.51-.123-1.383.04-1.523-.632-.154-.738.522-1.224 1.088-1.62 2.878-2.017 5.773-4.01 8.651-6.026 1.756-1.23 4.24-2.145 5.026-3.831.812-1.74-1.632-3.533-2.299-5.453-1.465-4.225-2.672-8.53-3.033-12.99-.115-1.427-.496-1.813-1.853-1.977-6.01-.726-11.996-1.68-18.014-2.326-2.454-.264-3.721-.818-3.311-3.665.225-1.559.723-1.723 2.042-1.727 9.46-.022 18.92-.203 28.379-.12 2.206.019 3.594-.793 4.77-2.392 4.08-5.54 8.162-11.076 12.22-16.632 1.525-2.09 4.856-1.936 5.972.329.35.71-.032 1.333-.372 1.923-4.242 7.354-8.613 14.639-12.677 22.089-1.515 2.776-.33 5.697 1.045 8.34 2.082 4.001 2.58 4.092 6.175 1.451 3.383-2.484 6.764-4.97 10.183-7.404.503-.358 1.103-1.066 1.827-.536.542.398.332 1.144.254 1.704-.758 5.428-1.772 10.778-5.335 15.241.09.494-.126.894-.391 1.28-.517.587-1.07 1.15-1.336 1.913a3.23 3.23 0 0 1-.772 1.116c-.169.15-.352.283-.541.407-.956.59-1.673 1.443-2.463 2.215-.23.246-.47.48-.712.713-.828 1.128-2.212 1.496-3.245 2.343l-1.577 1.52c-.825 1.586-2.461 1.958-3.92 2.598-.812.283-1.59.702-2.491.643-1.927.426-3.805 1.002-5.62 1.777" mask="url(#icon/active/icon_active_dance2_white_b)" /></g><g transform="translate(61 83)"><mask id="icon/active/icon_active_dance2_white_d" fill="#fff"><use xlink:href="#icon/active/icon_active_dance2_white_c" /></mask><path d="M10.616 3.642c-1.532 8.703-3.094 17.4-4.576 26.11-.467 2.745-2.25 3.846-4.93 2.933-.97-.33-.683-1.035-.743-1.648-.54-5.4-.117-10.817-.244-16.224-.027-1.184.064-2.374-.016-3.553-.235-3.451-.472-6.872 3.88-8.194.733-.666 1.66-1.007 2.521-1.463C8.043 1.346 9.035-.923 11 .425c-.127 1.073.253 2.204-.384 3.217" mask="url(#icon/active/icon_active_dance2_white_d)" /></g><path d="M77.101 75.637c.753-.58 1.614-.637 2.507-.635 6.405.012 12.81.008 19.214.004 1.057 0 2.36-.188 2.008 1.577-.308 1.536 1.285 3.938-1.571 4.423-9.317 1.581-18.639 3.126-27.958 4.685-.784.38-1.55.493-2.272-.15-.279-1.924 1.535-2.334 2.278-3.52 1.116-.786 1.73-2.026 2.513-3.115 1.27-.892 1.932-2.466 3.281-3.269M56.244 48C53.095 47.95 49.96 44.673 50 41.47c.047-3.736 2.985-6.56 6.729-6.469 3.206.078 6.303 3.271 6.27 6.465-.035 3.5-3.226 6.586-6.755 6.532M59 91c1.731-1.442 3.854-1.708 5.967-2 .08.225.015.378-.22.446C62.78 89.776 61.04 90.95 59 91" /><path d="M76 82c-.128 1.509-1.491 1.799-2.15 2.785L73 85c.623-1.482 1.984-2.02 3-3M80 79c-.255 1.236-1.471 1.803-1.97 2.87L77 82c.737-1.267 1.716-2.288 3-3M81.994 76c.105 1.071-1.15 1.429-1.994 2 .009-1.011.928-1.544 1.994-2" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_happy_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_happy_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_active_happy_black_a)" fill="none" fill-rule="evenodd"><path d="M64.5 36C83.554 36 99 51.446 99 70.5 99 89.554 83.554 105 64.5 105 45.446 105 30 89.554 30 70.5 30 51.446 45.446 36 64.5 36Zm15.813 31.625a2.875 2.875 0 0 0-2.876 2.875c0 7.145-5.792 12.938-12.937 12.938S51.562 77.644 51.562 70.5a2.875 2.875 0 0 0-5.75 0c0 10.321 8.367 18.688 18.688 18.688 10.321 0 18.688-8.367 18.688-18.688a2.875 2.875 0 0 0-2.876-2.875Zm-7.907-6.153a3.393 3.393 0 1 0 0-6.785 3.393 3.393 0 0 0 0 6.785Zm-15.812 0a3.393 3.393 0 1 0 0-6.785 3.393 3.393 0 0 0 0 6.785Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_happy_white"><path d="M64.5 36C83.554 36 99 51.446 99 70.5 99 89.554 83.554 105 64.5 105 45.446 105 30 89.554 30 70.5 30 51.446 45.446 36 64.5 36Zm15.813 31.625a2.875 2.875 0 0 0-2.876 2.875c0 7.145-5.792 12.938-12.937 12.938S51.562 77.644 51.562 70.5a2.875 2.875 0 0 0-5.75 0c0 10.321 8.367 18.688 18.688 18.688 10.321 0 18.688-8.367 18.688-18.688a2.875 2.875 0 0 0-2.876-2.875Zm-7.907-6.153a3.393 3.393 0 1 0 0-6.785 3.393 3.393 0 0 0 0 6.785Zm-15.812 0a3.393 3.393 0 1 0 0-6.785 3.393 3.393 0 0 0 0 6.785Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_highFiveCmd_white"><path d="M66.843 30.5c1.177-.013 2.21.81 2.432 1.961l.052.484V55.44h2.484V36.566a2.442 2.442 0 0 1 2.235-2.47c1.281-.119 2.444.757 2.667 2.012l.039.47v18.876h2.457v-9.163c0-1.346 1.111-2.444 2.47-2.444 1.203.026 2.197.875 2.393 2.013l.04.431-.197 18.863c0 9.96-1.673 12.68-3.477 15.699-1.739 2.902-3.542 2.052-3.856 10.536l-.026 1.111h-20.89c-.13-9.948-1.973-9.922-3.62-13.503a23.916 23.916 0 0 1-2.51-9.935V53.52c-.039-1.281.941-2.38 2.236-2.497 1.294-.118 2.47.771 2.666 2.04l.04.483v9.163h2.47V37.77c-.026-1.282.954-2.367 2.248-2.484 1.294-.118 2.458.77 2.667 2.039l.04.444v17.673h2.47V32.945a2.472 2.472 0 0 1 2.47-2.445Zm-19.647 0c1.216 0 2.223.863 2.432 2l.039.445v13.307h2.484V35.376c0-1.346 1.098-2.431 2.47-2.431.784 0 1.517.366 1.974.993a4.856 4.856 0 0 0-1.922 3.164l-.052.64v11.556a4.969 4.969 0 0 0-4.614-.17 4.82 4.82 0 0 0-2.706 3.699l-.04.64V67.52a25.614 25.614 0 0 0 2.746 12.379c1.516 3.412 3.124 3.124 3.372 11.346l.027 1.177h-17.4l-.025-1.112c-.249-8.758-2.013-8.875-3.582-12.3a23.523 23.523 0 0 1-2.51-9.935v-15.53c-.026-1.28.955-2.365 2.249-2.483 1.294-.117 2.457.772 2.666 2.04l.04.444v9.163h2.47V37.77c-.13-1.347.876-2.537 2.235-2.654 1.36-.118 2.576.862 2.693 2.209l.013.444v17.673h2.47V32.945c0-1.347 1.112-2.445 2.471-2.445Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_hightWave_white"><defs><path id="icon/active/icon_active_hightWave_white_a" d="M0 0h51.108v94.002H0z" /></defs><g stroke-width="0" fill-rule="evenodd"><path d="M58.432 35.462a7.734 7.734 0 1 0 0-15.47 7.734 7.734 0 0 0 0 15.47" /><path d="M84.76 15.32s-3.366-2.481-4.997 1.18l-.781 3.479-.855-1.87s-.32-.665-1.134-.413c0 0-.8.267-.484 1.156 0 0 1.289 3.925 1.746 4.456 0 0-.345.019-.826 1.327 0 0-3.271 7.386-6.74 11.035 0 0-1.502 2.41-6.222 1.337 0 0-9.497-1.982-16.865 1.596 0 0-3.846 1.872-5.772 7.927 0 0-1.487 4.073-4.074 14.147l-2.146 8.367s-1.267 3.467 2.31 4.513c0 0 3.249 1.21 4.405-2.807l5.615-20.257s.605-.77.66.496v54.715s-.33 2.807 1.927 2.752H54.6s2.532.496 2.422-2.532V75.319s.12-1.486 1.437-1.486c0 0 1.206 0 1.26 1.486v30.99s-.275 2.153 1.707 2.177h5.009s1.872.356 1.817-2.342V55.833s-.726-5.953 2.967-9.252c0 0 10.809-11.07 12.37-20.01 0 0 .653-1.757.144-2.06 0 0 2.529-3.021 2.758-5.914 0 0 .245-2.104-1.731-3.276" /></g></symbol><symbol  viewBox="0 0 115 124" id="icon/active/icon_active_hug_white"><g stroke-width="0" fill-rule="evenodd"><path d="M31.704 89.573v-.212l-.005-.154c-.128-3.505-.376-15.574 1.828-23.745.195-.725.744-1.407 1.517-2.033 3.89 1.989 12.248 4.825 14.924 6.226.876.459 1.264 2.127 1.45 4.222-1.355-.111-2.556-.342-3.494-.53l-.019-.002c-2.102-.42-4.539.944-5.673 3.172-1.06 2.083-.622 4.313 1.17 5.964 1.569 1.445 4.839 2.046 8.25 2.118v5.297H33.263c-1.487 0-1.559-.117-1.559-.323Zm12-33.267c-2.822-1.784-4.894-4.677-5.684-7.94-.76-3.142-.304-6.311 1.286-8.922 1.565-2.57 4.045-4.288 6.982-4.837a10.782 10.782 0 0 1 1.985-.183c3.601 0 7.057 1.79 9.387 4.67a13.923 13.923 0 0 0-2.416 5.119c-.962 4.03-.004 7.952 2.252 10.776a10.523 10.523 0 0 1-1.718 1.438l-.321.213v3.219l.333.036a20.483 20.483 0 0 1-6.313-1.09 646.633 646.633 0 0 1-5.436-1.862v-.424l-.337-.213Zm34.003-.38c.333-.115.798-.168 1.316-.168 1.548 0 3.567.476 4.003 1.186.634 1.032 1.214 3.21-.63 4.83-1.326 1.165-6.933 2.479-9.626 1.26-.852-.385-1.249-.954-1.249-1.79 0-2.202 1.908-3.842 6.186-5.317ZM58.847 74.46c2.791-1.121 5.387-2.527 7.282-3.555 1.192-.646 2.221-1.204 2.815-1.426 1.369-.512 4.057-.926 5.448.764.785.954 1.394 3.102-.318 4.806-1.766 1.756-9.454 6.052-15.329 7.315-5.006 1.076-12.161.846-14.245-1.074-1.706-1.571-1.248-3.205-.824-4.04.705-1.384 2.178-2.36 3.46-2.36.154 0 .306.013.453.043l.018.004c2.513.502 6.717 1.338 11.24-.477Zm-.315-18.341c.452.429.936.823 1.457 1.173v2a16.472 16.472 0 0 0-2.912-.68V57.34a12.016 12.016 0 0 0 1.455-1.222Zm24.985 9.577c-.189-.708-.627-1.367-1.241-1.971.483-.232.898-.48 1.188-.734 2.323-2.04 2.147-4.933.943-6.894-1.14-1.861-5.55-2.281-7.229-1.701-.505.174-1.021.365-1.534.574a13.918 13.918 0 0 0 3.369-6.262c1.655-6.923-2.325-13.543-8.89-14.785-4.238-.801-8.51.845-11.455 3.97-3.138-3.616-7.953-5.57-12.716-4.68-3.413.639-6.28 2.612-8.074 5.559-1.77 2.907-2.282 6.42-1.442 9.89.654 2.7 2.118 5.17 4.131 7.08a70.517 70.517 0 0 0-1.724-.57c-1.523-.473-5.409-.053-6.275 1.358-.866 1.412-1.355 3.982.787 5.863.081.07.201.15.308.228-.846.748-1.462 1.585-1.712 2.512-2.251 8.343-2.001 20.57-1.871 24.12l.004.32c0 1.747 2.068 1.747 3.179 1.747H82.993c1.175 0 2.369 0 2.369-1.048v-.214c0-.21.677-14.888-1.845-24.362Z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_jumpForward_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_jumpForward_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><path id="icon/active/icon_active_jumpForward_black_b" d="M0 0h69v80H0z" /></defs><g filter="url(#icon/active/icon_active_jumpForward_black_a)" fill="none" fill-rule="evenodd"><path d="M80 57.5a8.5 8.5 0 1 0 17 0 8.5 8.5 0 0 0-17 0" fill="#231916" /><g transform="translate(30 30)"><mask id="icon/active/icon_active_jumpForward_black_c" fill="#fff"><use xlink:href="#icon/active/icon_active_jumpForward_black_b" /></mask><path d="m36.677 22.944-5.305-16.57S30.39.394 36.088.001c0 0 3.93-.196 4.912 3.824l5.992 22.158s3.045 2.746 1.179 7.452L37.463 57.848l28.783 13.04s3.831 1.568 2.456 6.765c0 0-2.16 3.628-6.483 1.863L26.46 63.633s-9.628 13.432-14.736 11.275c0 0-2.456-.588-3.536-3.334 0 0-6.877-10.098-8.154-15.785 0 0-.688-3.824 4.028-4.902 0 0 3.93-.687 5.5 3.432 0 0 2.85 6.764 4.324 8.921 0 0 3.045-2.647 6.974-9.02 0 0 .295-2.745 2.358-6.373l6.188-13.628L8.68 25.591s-3.34-2.255-1.67-6.373c0 0 1.08-2.745 6.68-1.764 0 0 13.655 6.568 19.647 8.137 0 0 .59-1.764 3.34-2.647" fill="#231916" mask="url(#icon/active/icon_active_jumpForward_black_c)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_jumpForward_white"><defs><path id="icon/active/icon_active_jumpForward_white_a" d="M0 0h69v80H0z" /></defs><g fill-rule="evenodd"><path d="M80 57.5a8.5 8.5 0 1 0 17 0 8.5 8.5 0 0 0-17 0" /><g transform="translate(30 30)"><mask id="icon/active/icon_active_jumpForward_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_jumpForward_white_a" /></mask><path d="m36.677 22.944-5.305-16.57S30.39.394 36.088.001c0 0 3.93-.196 4.912 3.824l5.992 22.158s3.045 2.746 1.179 7.452L37.463 57.848l28.783 13.04s3.831 1.568 2.456 6.765c0 0-2.16 3.628-6.483 1.863L26.46 63.633s-9.628 13.432-14.736 11.275c0 0-2.456-.588-3.536-3.334 0 0-6.877-10.098-8.154-15.785 0 0-.688-3.824 4.028-4.902 0 0 3.93-.687 5.5 3.432 0 0 2.85 6.764 4.324 8.921 0 0 3.045-2.647 6.974-9.02 0 0 .295-2.745 2.358-6.373l6.188-13.628L8.68 25.591s-3.34-2.255-1.67-6.373c0 0 1.08-2.745 6.68-1.764 0 0 13.655 6.568 19.647 8.137 0 0 .59-1.764 3.34-2.647" mask="url(#icon/active/icon_active_jumpForward_white_b)" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_lieDown_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_lieDown_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_active_lieDown_black_a)" fill="none" fill-rule="evenodd"><g fill="#FFF" fill-rule="nonzero"><path d="M94.689 62.316a7.223 7.223 0 1 0 0 14.446 7.223 7.223 0 0 0 0-14.446Z" /><path d="M51.61 49.314c8.744.423 14.502 1.569 17.275 3.437 4.16 2.802 10.158 8.242 11.434 10.006 1.276 1.763 3.354 3.734 3.354 5.543 0 1.81 2.918 10.215 5.824 10.983 2.906.767 7.7 2.535 12.275-2.613 3.05-3.431 4.952-6.221 5.705-8.37l4.547 3.113c-1.703 7.597-6.215 12.829-13.533 15.695-7.32 2.865-13.821 2.36-19.507-1.52l-11.562 2.883-17.625 1.293c-14.761-.603-25.8-4.096-33.118-10.481v-7.87c15.146 6.988 26.185 9.611 33.118 7.87-4.628-3.451-9.478-7.056-11.272-9.578-1.793-2.521-5.395-5.736-3.782-8.868 1.613-3.132 10.964-11.046 15.054-9.566 1.398 1.711 2.475 3.423 3.23 5.134-5.113 3.313-7.67 5.903-7.67 7.77 0 1.11 14.805 8.725 27.248 3.296-2.137-2.136-8.38-8.607-11.36-10.168a19.022 19.022 0 0 0-6.366-2.012l-3.268-5.977Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_lieDown_white"><g fill-rule="nonzero"><path d="M94.689 62.316a7.223 7.223 0 1 0 0 14.446 7.223 7.223 0 0 0 0-14.446Z" /><path d="M51.61 49.314c8.744.423 14.502 1.569 17.275 3.437 4.16 2.802 10.158 8.242 11.434 10.006 1.276 1.763 3.354 3.734 3.354 5.543 0 1.81 2.918 10.215 5.824 10.983 2.906.767 7.7 2.535 12.275-2.613 3.05-3.431 4.952-6.221 5.705-8.37l4.547 3.113c-1.703 7.597-6.215 12.829-13.533 15.695-7.32 2.865-13.821 2.36-19.507-1.52l-11.562 2.883-17.625 1.293c-14.761-.603-25.8-4.096-33.118-10.481v-7.87c15.146 6.988 26.185 9.611 33.118 7.87-4.628-3.451-9.478-7.056-11.272-9.578-1.793-2.521-5.395-5.736-3.782-8.868 1.613-3.132 10.964-11.046 15.054-9.566 1.398 1.711 2.475 3.423 3.23 5.134-5.113 3.313-7.67 5.903-7.67 7.77 0 1.11 14.805 8.725 27.248 3.296-2.137-2.136-8.38-8.607-11.36-10.168a19.022 19.022 0 0 0-6.366-2.012l-3.268-5.977Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_lowWave_white"><g stroke-width="0" fill-rule="evenodd"><path d="M57.924 32.409c2.083 0 3.84-.727 5.284-2.17 1.444-1.444 2.17-3.202 2.17-5.285 0-2.072-.726-3.83-2.17-5.284-1.443-1.444-3.201-2.17-5.284-2.17-2.072 0-3.84.726-5.284 2.17-1.453 1.444-2.18 3.212-2.17 5.284 0 2.083.727 3.84 2.17 5.284 1.444 1.444 3.212 2.17 5.284 2.17M75.308 54.664h1.33a5.604 5.604 0 0 1 1.544-.538l.06-.01c.062-.062.128-.12.188-.184.24-.336.505-.647.783-.946a9.68 9.68 0 0 1-1.318-4.454c-.005-.124.005-.246.006-.37h-.717l-5.313-7.896c-2.73-4.017-5.972-6.02-9.733-6.02H50.853c-3.094 0-5.52.933-7.297 2.779-1.768 1.856-2.652 4.34-2.652 7.445v11.658l-5.618 7.327c-.609.814-.903 1.58-.903 2.327 0 2.004 1.306 2.996 3.928 2.996 1.198 0 2.318-.825 3.368-2.485l3.822-5.991c1.57-1.503 2.16-3.438 1.796-5.765v-9.39H48.8v53.154c0 2.662.098 4.282.324 4.871.59 1.552 1.876 2.328 3.86 2.328 1.915 0 3.163-.707 3.752-2.111.285-.806.432-2.397.432-4.764V68.788h2.014v30.27c0 4.291 1.325 6.432 3.968 6.432 1.846 0 3.054-.668 3.643-1.994.285-.667.432-2.101.432-4.321V45.059l4.096 6.394c1.404 2.141 2.73 3.211 3.987 3.211" /><path d="M76.351 55.03a3.266 3.266 0 0 1-3.266-3.265V33.649a3.266 3.266 0 0 1 6.532 0v18.116a3.266 3.266 0 0 1-3.266 3.266" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_makeHeartBothHands_white"><g stroke-width="0" fill-rule="evenodd"><path d="M58.444 64.083a5.365 5.365 0 0 0-1.47 1.01 5.34 5.34 0 0 0-3.705-1.507c-1.349 0-2.601.502-3.524 1.411a4.832 4.832 0 0 0-1.432 3.473c0 3.228 2.788 5.735 7.01 9.532l.17.152 1.481 1.31.29-.256 1.19-1.05.173-.156c4.221-3.797 7.009-6.304 7.009-9.532a4.83 4.83 0 0 0-1.433-3.473 4.975 4.975 0 0 0-3.523-1.411 5.34 5.34 0 0 0-2.236.497" /><path d="m18.351 73.524 28.32-36.057s2.24-1.446 4.111.369c0 0 1.36 1.445.312 3.43l-7.569 9.666s6.889-1.843 11.169 4.96l1.105 2.098s1.02 2.155-.652 3.317c0 0-1.899 1.36-3.911-.567 0 0-1.815-4.252-5.812-3.855 0 0-4.337-.149-6.52 6.7 0 0-2.069 6.68 3.147 11.3 0 0 2.58 2.098 5.471 3.317l5.755 2.608s3.174.878 2.607 4.081c0 0-.737 2.285-3.316 2.098l-19.871-5.187-5.188 2.154-9.158-10.432ZM30.91 54.759l7.173-16.952s1.218-2.58 4.138-1.36c0 0 1.276.68 1.36 2.21L30.912 54.76ZM28.898 55.24l1.333-13.72s.765-2.465 3.628-2.012c0 0 1.02.284 1.389.907l-6.35 14.826ZM95.649 73.405l-28.32-36.057s-2.24-1.446-4.111.368c0 0-1.36 1.446-.312 3.43l7.569 9.666s-6.889-1.842-11.169 4.961l-1.105 2.098s-1.02 2.154.652 3.316c0 0 1.899 1.361 3.911-.567 0 0 1.815-4.252 5.812-3.855 0 0 4.337-.148 6.52 6.7 0 0 2.069 6.68-3.147 11.3 0 0-2.58 2.098-5.471 3.317l-5.755 2.608s-3.174.879-2.607 4.082c0 0 .737 2.284 3.316 2.098l19.871-5.188 5.188 2.155 9.158-10.432ZM83.09 54.64l-7.173-16.952s-1.218-2.58-4.138-1.36c0 0-1.276.68-1.36 2.21l12.67 16.101ZM85.102 55.121l-1.332-13.72s-.766-2.466-3.629-2.012c0 0-1.02.283-1.389.907l6.35 14.825Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_makeHeartSingleHands_white"><g stroke-width="0" fill-rule="evenodd"><path d="M75.866 64.525A2.83 2.83 0 0 0 72 65.56a5.66 5.66 0 0 0-2.069-7.732l-2.453-1.412a2.83 2.83 0 0 0-3.866 1.034 5.66 5.66 0 0 0-2.069-7.732l-2.453-1.412a2.83 2.83 0 0 0-3.866 1.034l4.124-7.141c1.234-2.142 1.167-4.933-.497-6.764-2.765-3.03-7.32-2.327-9.184.895l-2.911 5.04-1.843-3.19c-1.751-3.03-5.425-4.681-8.714-3.474a7.074 7.074 0 0 0-3.74 10.198l5.306 9.19a2.841 2.841 0 0 1 0 2.832l-3.668 6.353c-3.123 5.41-1.273 12.333 4.145 15.457l14.7 8.487c8.117 4.688 18.501 1.903 23.19-6.213l2.83-4.9c2.355-4.052.962-9.237-3.096-11.585M75.057 36.82c-.56.26-1.077.617-1.518 1.045a5.52 5.52 0 0 0-3.83-1.558c-1.394 0-2.688.519-3.642 1.459a4.994 4.994 0 0 0-1.48 3.589c0 3.336 2.881 5.928 7.244 9.851l.176.158 1.532 1.354.3-.265 1.228-1.086.18-.16c4.362-3.924 7.243-6.516 7.243-9.852 0-1.375-.525-2.648-1.48-3.59a5.142 5.142 0 0 0-3.642-1.458 5.52 5.52 0 0 0-2.31.514" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_newYear_black"><g fill="#140F26" fill-rule="nonzero"><path d="M38.373 61.505C36.388 78.1 56.346 85.043 55.995 85c-9.004-1.082-24.318-10.745-22.903-23.249 1.76-15.535 16.445-17.851 17.07-17.748.625.103-9.792.827-11.789 17.502Z" /><path d="M44.691 62.272c-1.405 14.785 14.816 22.57 14.297 22.725-.52.156-21.667-6.684-19.881-23.15C40.903 45.31 52.388 44.746 53.01 45.052c.62.304-6.91 2.38-8.319 17.221Z" /><path d="M53.072 62.036C51.522 76.31 62.378 83.946 61.99 84c-.386.053-16.433-7.322-14.885-22.013C48.66 47.24 56.58 45.87 57.247 46.009c.67.137-2.616 1.695-4.175 16.027Z" /><path d="M59.896 62.361C58.031 76.651 63.354 83.984 62.981 84c-.373.017-10.376-7.522-8.816-21.632 1.566-14.164 5.029-15.435 5.684-15.365.657.068 1.918 1.006.047 15.358Z" /><path d="M66.989 62.182C66.784 77.08 65.594 84.018 65.293 84c-.305-.018-4.409-7.218-3-21.731C63.71 47.694 63.246 47.022 63.9 47c.616-.021 3.295.244 3.09 15.18Z" /><path d="M72.917 62.274c.938 14.674-6.396 21.779-6.753 21.726-.354-.052 1.408-7.057 1.504-21.723.096-14.698-2.22-15.163-1.544-15.269.67-.105 5.854.577 6.793 15.266Z" /><path d="M80.926 62.094C82.121 77.111 68.395 84.077 68.012 84c-.382-.078 8.302-7.298 7.057-22.008-1.25-14.724-6.234-15.789-5.495-15.975.737-.187 10.16 1.048 11.352 16.078Z" /><path d="M87.998 62.435c.217 15.537-17.324 22.722-17.975 22.562-.651-.158 12.59-7.426 11.572-22.562-1.018-15.154-9.502-17.062-8.52-17.403.983-.343 14.706 1.837 14.923 17.403Z" /><path d="M95.978 62.207c-.74 16.756-22.346 23.958-22.962 23.79-.616-.167 16.713-7.694 16.633-23.734-.08-16.076-13.063-18.884-12.102-19.235.96-.351 19.174 2.367 18.43 19.179ZM68.996 42.763c.061-.198.12-.398.12-.617 0-1.14-.898-2.065-2.006-2.065h-2.224V12h-.77v28.08h-2.224c-1.11 0-2.008.925-2.008 2.066 0 .219.06.42.121.617-2.979.291-5.005.86-5.005 1.516C55 45.23 59.254 46 64.5 46c5.248 0 9.5-.77 9.5-1.72 0-.656-2.026-1.226-5.004-1.517ZM71 86.244C71 85.557 67.865 85 64 85c-3.867 0-7 .557-7 1.244 0 .474 1.492.886 3.688 1.096-.046.142-.09.288-.09.446 0 .824.663 1.493 1.479 1.493h1.639v7.208c-.98.144-1.744.96-1.744 1.99 0 1.028.764 1.844 1.744 1.988v1.233c-.877.144-1.56.878-1.56 1.804v23.637c0 1.027.826 1.861 1.844 1.861a1.853 1.853 0 0 0 1.844-1.861v-23.637c0-.927-.682-1.662-1.561-1.804v-1.233c.98-.143 1.745-.96 1.745-1.988 0-1.03-.764-1.846-1.745-1.991v-7.207h1.638c.817 0 1.48-.669 1.48-1.493 0-.158-.044-.304-.09-.446 2.197-.21 3.689-.622 3.689-1.096Z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_newYear_white"><g fill-rule="nonzero"><path d="M38.373 61.505C36.388 78.1 56.346 85.043 55.995 85c-9.004-1.082-24.318-10.745-22.903-23.249 1.76-15.535 16.445-17.851 17.07-17.748.625.103-9.792.827-11.789 17.502Z" /><path d="M44.691 62.272c-1.405 14.785 14.816 22.57 14.297 22.725-.52.156-21.667-6.684-19.881-23.15C40.903 45.31 52.388 44.746 53.01 45.052c.62.304-6.91 2.38-8.319 17.221Z" /><path d="M53.072 62.036C51.522 76.31 62.378 83.946 61.99 84c-.386.053-16.433-7.322-14.885-22.013C48.66 47.24 56.58 45.87 57.247 46.009c.67.137-2.616 1.695-4.175 16.027Z" /><path d="M59.896 62.361C58.031 76.651 63.354 83.984 62.981 84c-.373.017-10.376-7.522-8.816-21.632 1.566-14.164 5.029-15.435 5.684-15.365.657.068 1.918 1.006.047 15.358Z" /><path d="M66.989 62.182C66.784 77.08 65.594 84.018 65.293 84c-.305-.018-4.409-7.218-3-21.731C63.71 47.694 63.246 47.022 63.9 47c.616-.021 3.295.244 3.09 15.18Z" /><path d="M72.917 62.274c.938 14.674-6.396 21.779-6.753 21.726-.354-.052 1.408-7.057 1.504-21.723.096-14.698-2.22-15.163-1.544-15.269.67-.105 5.854.577 6.793 15.266Z" /><path d="M80.926 62.094C82.121 77.111 68.395 84.077 68.012 84c-.382-.078 8.302-7.298 7.057-22.008-1.25-14.724-6.234-15.789-5.495-15.975.737-.187 10.16 1.048 11.352 16.078Z" /><path d="M87.998 62.435c.217 15.537-17.324 22.722-17.975 22.562-.651-.158 12.59-7.426 11.572-22.562-1.018-15.154-9.502-17.062-8.52-17.403.983-.343 14.706 1.837 14.923 17.403Z" /><path d="M95.978 62.207c-.74 16.756-22.346 23.958-22.962 23.79-.616-.167 16.713-7.694 16.633-23.734-.08-16.076-13.063-18.884-12.102-19.235.96-.351 19.174 2.367 18.43 19.179ZM68.996 42.763c.061-.198.12-.398.12-.617 0-1.14-.898-2.065-2.006-2.065h-2.224V12h-.77v28.08h-2.224c-1.11 0-2.008.925-2.008 2.066 0 .219.06.42.121.617-2.979.291-5.005.86-5.005 1.516C55 45.23 59.254 46 64.5 46c5.248 0 9.5-.77 9.5-1.72 0-.656-2.026-1.226-5.004-1.517ZM71 86.244C71 85.557 67.865 85 64 85c-3.867 0-7 .557-7 1.244 0 .474 1.492.886 3.688 1.096-.046.142-.09.288-.09.446 0 .824.663 1.493 1.479 1.493h1.639v7.208c-.98.144-1.744.96-1.744 1.99 0 1.028.764 1.844 1.744 1.988v1.233c-.877.144-1.56.878-1.56 1.804v23.637c0 1.027.826 1.861 1.844 1.861a1.853 1.853 0 0 0 1.844-1.861v-23.637c0-.927-.682-1.662-1.561-1.804v-1.233c.98-.143 1.745-.96 1.745-1.988 0-1.03-.764-1.846-1.745-1.991v-7.207h1.638c.817 0 1.48-.669 1.48-1.493 0-.158-.044-.304-.09-.446 2.197-.21 3.689-.622 3.689-1.096Z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_pounceForward_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_pounceForward_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><path id="icon/active/icon_active_pounceForward_black_b" d="M0 0h104v28H0z" /></defs><g filter="url(#icon/active/icon_active_pounceForward_black_a)" fill="none" fill-rule="evenodd"><path d="M84 69.5a8.5 8.5 0 1 0 17 0 8.5 8.5 0 0 0-17 0" fill="#050101" /><g transform="matrix(-1 0 0 1 119 62)"><mask id="icon/active/icon_active_pounceForward_black_c" fill="#fff"><use xlink:href="#icon/active/icon_active_pounceForward_black_b" /></mask><path d="M27.53 18.992s2.03-5.544 11.332-5.197l27.062 1.386L97.552.282s4.227-1.212 5.919 1.387c0 0 2.03 3.81-1.86 6.236L69.813 25.92s-3.383 2.08-7.104 2.08l-45.074-1.387L.977 18.3s-2.198-2.361 0-4.3c0 0 1.015-1.417 3.552-.724l23.002 5.717Z" fill="#050101" mask="url(#icon/active/icon_active_pounceForward_black_c)" /></g><path d="m42 70-9.365-3.692-1.522-9.295s-1.054-5.494 3.278-5.994c0 0 3.395-.5 4.097 3.621L42 70ZM14 79.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0M16 84.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0M22 85a1 1 0 1 0 2 0 1 1 0 0 0-2 0M9 84a1 1 0 1 0 2 0 1 1 0 0 0-2 0M21 81.5a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0" fill="#050101" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_pounceForward_white"><defs><path id="icon/active/icon_active_pounceForward_white_a" d="M0 0h104v28H0z" /></defs><g fill-rule="evenodd"><path d="M84 69.5a8.5 8.5 0 1 0 17 0 8.5 8.5 0 0 0-17 0" /><g transform="matrix(-1 0 0 1 119 62)"><mask id="icon/active/icon_active_pounceForward_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_pounceForward_white_a" /></mask><path d="M27.53 18.992s2.03-5.544 11.332-5.197l27.062 1.386L97.552.282s4.227-1.212 5.919 1.387c0 0 2.03 3.81-1.86 6.236L69.813 25.92s-3.383 2.08-7.104 2.08l-45.074-1.387L.977 18.3s-2.198-2.361 0-4.3c0 0 1.015-1.417 3.552-.724l23.002 5.717Z" mask="url(#icon/active/icon_active_pounceForward_white_b)" /></g><path d="m42 70-9.365-3.692-1.522-9.295s-1.054-5.494 3.278-5.994c0 0 3.395-.5 4.097 3.621L42 70ZM14 79.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0M16 84.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0M22 85a1 1 0 1 0 2 0 1 1 0 0 0-2 0M9 84a1 1 0 1 0 2 0 1 1 0 0 0-2 0M21 81.5a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_refuse_white"><path d="M69.481 84.336 56.998 71.843 44.496 84.33a5.882 5.882 0 0 1-8.317-8.317l12.488-12.499-12.49-12.484a5.895 5.895 0 0 1 8.337-8.335l12.484 12.489 12.498-12.489a5.882 5.882 0 0 1 8.32 8.318l-12.49 12.501 12.493 12.494a5.897 5.897 0 0 1-8.338 8.34v-.013Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_rollOver_black"><defs><path id="icon/active/icon_active_rollOver_black_a" d="M0 0h26v26H0z" /><path id="icon/active/icon_active_rollOver_black_c" d="M0 0h54v49H0z" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(19 34)"><mask id="icon/active/icon_active_rollOver_black_b" fill="#fff"><use xlink:href="#icon/active/icon_active_rollOver_black_a" /></mask><path d="M26 13c0 7.18-5.82 13-13 13S0 20.18 0 13 5.82 0 13 0s13 5.82 13 13" fill="#140F25" mask="url(#icon/active/icon_active_rollOver_black_b)" /></g><g transform="translate(25 57)"><mask id="icon/active/icon_active_rollOver_black_d" fill="#fff"><use xlink:href="#icon/active/icon_active_rollOver_black_c" /></mask><path d="M.227 10.976s1.638-9.117 12.286-5.387L22.75 9.733s4.71 2.486 7.167-.207L45.48.2S52.362-1.755 54 6.532c0 0-.534.015-2.582-1.19 0 0-3.48-2.033-6.552 1.698L32.989 18.227s-3.276 3.937-11.671 1.451c0 0 4.914 4.973 4.914 7.252s-2.253 21.548-2.253 21.548-6.142 2.901-13.31-4.972c0 0-12.49-14.504-10.442-32.53" fill="#140F25" mask="url(#icon/active/icon_active_rollOver_black_d)" /></g><path d="m51.276 84.114 5.794-23.87s3.517-6.67 10.139-3.286l19.657 11.033 15.726 9.715s6.208 6.878-7.448 5.093l-24.831-9.388s-1.448-.872-2.483 1.608l-.621 17.168s.207 16.526-18.209 13.425l2.276-21.498Z" fill="#140F25" /><path d="M91 56.09s9.93-1.62 12 8.91M91 50.14s14.896-2.52 18 13.86" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_rollOver_white"><defs><path id="icon/active/icon_active_rollOver_white_a" d="M0 0h26v26H0z" /><path id="icon/active/icon_active_rollOver_white_c" d="M0 0h54v49H0z" /></defs><g fill-rule="evenodd"><g transform="translate(19 34)"><mask id="icon/active/icon_active_rollOver_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_rollOver_white_a" /></mask><path d="M26 13c0 7.18-5.82 13-13 13S0 20.18 0 13 5.82 0 13 0s13 5.82 13 13" mask="url(#icon/active/icon_active_rollOver_white_b)" /></g><g transform="translate(25 57)"><mask id="icon/active/icon_active_rollOver_white_d" fill="#fff"><use xlink:href="#icon/active/icon_active_rollOver_white_c" /></mask><path d="M.227 10.976s1.638-9.117 12.286-5.387L22.75 9.733s4.71 2.486 7.167-.207L45.48.2S52.362-1.755 54 6.532c0 0-.534.015-2.582-1.19 0 0-3.48-2.033-6.552 1.698L32.989 18.227s-3.276 3.937-11.671 1.451c0 0 4.914 4.973 4.914 7.252s-2.253 21.548-2.253 21.548-6.142 2.901-13.31-4.972c0 0-12.49-14.504-10.442-32.53" mask="url(#icon/active/icon_active_rollOver_white_d)" /></g><path d="m51.276 84.114 5.794-23.87s3.517-6.67 10.139-3.286l19.657 11.033 15.726 9.715s6.208 6.878-7.448 5.093l-24.831-9.388s-1.448-.872-2.483 1.608l-.621 17.168s.207 16.526-18.209 13.425l2.276-21.498Z" /><path d="M91 56.09s9.93-1.62 12 8.91M91 50.14s14.896-2.52 18 13.86" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_shakeHands_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_shakeHands_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_active_shakeHands_black_a)" fill="none" fill-rule="evenodd"><g fill="#2C2C2C" fill-rule="nonzero"><path d="m86.14 73.708-14.818-14.79s-.552-.297-.934 0c-1.995 2.034-3.608 3.644-4.925 4.788-1.316 1.145-3.141 1.865-4.67 2.035-1.528.127-3.608.423-5.774-1.865-.17-.17-.254-.424-.254-.678 0-.255.085-.466.254-.636l9.977-9.917c-.849-.805-1.4-1.356-1.655-1.568-2.378-2.076-5.222-3.432-7.472-4.577l-.425-.212c-.34-.211-.722-.38-1.104-.55l-.382-.17-.042-.042C52.684 44.89 50.944 44 49.288 44c-1.189 0-2.208.466-3.142 1.356L32.348 59.214c-2.547 2.543-2.42 4.662-2.292 5.89.042.213.042.382.042.467.085 1.017 1.061 2.33 2.675 4.238.297.339.637.72.891 1.06.934 1.144 1.614 2.288 2.293 3.39l.297.508c1.146 1.865 2.463 4.026 5.137 6.654l17.28 17.333c1.188 1.187 2.76 1.992 4.372 2.204.213.042.51.042.765.042 1.316 0 2.505-.466 3.311-1.314l.382-.381c1.529-1.526-.594-3.772-.594-3.772l-7.048-7.035a1 1 0 0 1-.297-.678c0-.254.085-.508.297-.678.17-.17.425-.297.68-.297.254 0 .51.085.679.297l7.048 7.035s2.547 2.246 4.542.975c.425-.382.85-.763 1.316-1.187 1.614-1.822-.297-4.153-.297-4.153l-7.642-7.628a1 1 0 0 1-.297-.678c0-.255.085-.509.297-.678.17-.17.425-.297.68-.297.254 0 .509.085.679.297l8.066 8.01s1.953 2.076 3.779 1.143l.51-.423 1.528-1.357s.085-.127.17-.211c1.528-2.035-.255-4.238-.255-4.238l-8.406-8.391a1 1 0 0 1-.298-.678c0-.255.085-.509.298-.679.17-.17.424-.296.679-.296.255 0 .51.085.68.296l6.707 6.696s2.59 2.458 5.392.678c.68-.678 1.231-1.229 1.443-2.33.51-2.035-.212-3.857-1.698-5.34Z" /><path d="M95.732 58.752 79.605 42.957c-3.656-3.58-7.655-3.917-10.666-.969l-6.236 6.108L51.651 58.92c-.86.8-.86 2.148-.043 2.99 2.666 2.317 5.934 3.117 5.934 3.117-.903-.252-1.849-.758-2.795-1.727-.172-.168-.258-.42-.258-.674 0-.252.086-.463.258-.631l1.72-1.685 9.29-9.098 6.322-6.192c.774-.758 1.333-.758 1.72-.716.516.084 1.42.421 2.71 1.685l16.127 15.795c1.505 1.474 2.881 3.58 1.118 5.307l-3.312 3.244a2.114 2.114 0 0 0-.645 1.516c0 .57.233 1.115.645 1.516.43.421.99.632 1.549.632.559 0 1.118-.21 1.548-.632l3.311-3.243c3.226-3.16 2.796-7.54-1.118-11.373Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_shakeHands_white"><g fill-rule="nonzero"><path d="m86.14 73.708-14.818-14.79s-.552-.297-.934 0c-1.995 2.034-3.608 3.644-4.925 4.788-1.316 1.145-3.141 1.865-4.67 2.035-1.528.127-3.608.423-5.774-1.865-.17-.17-.254-.424-.254-.678 0-.255.085-.466.254-.636l9.977-9.917c-.849-.805-1.4-1.356-1.655-1.568-2.378-2.076-5.222-3.432-7.472-4.577l-.425-.212c-.34-.211-.722-.38-1.104-.55l-.382-.17-.042-.042C52.684 44.89 50.944 44 49.288 44c-1.189 0-2.208.466-3.142 1.356L32.348 59.214c-2.547 2.543-2.42 4.662-2.292 5.89.042.213.042.382.042.467.085 1.017 1.061 2.33 2.675 4.238.297.339.637.72.891 1.06.934 1.144 1.614 2.288 2.293 3.39l.297.508c1.146 1.865 2.463 4.026 5.137 6.654l17.28 17.333c1.188 1.187 2.76 1.992 4.372 2.204.213.042.51.042.765.042 1.316 0 2.505-.466 3.311-1.314l.382-.381c1.529-1.526-.594-3.772-.594-3.772l-7.048-7.035a1 1 0 0 1-.297-.678c0-.254.085-.508.297-.678.17-.17.425-.297.68-.297.254 0 .51.085.679.297l7.048 7.035s2.547 2.246 4.542.975c.425-.382.85-.763 1.316-1.187 1.614-1.822-.297-4.153-.297-4.153l-7.642-7.628a1 1 0 0 1-.297-.678c0-.255.085-.509.297-.678.17-.17.425-.297.68-.297.254 0 .509.085.679.297l8.066 8.01s1.953 2.076 3.779 1.143l.51-.423 1.528-1.357s.085-.127.17-.211c1.528-2.035-.255-4.238-.255-4.238l-8.406-8.391a1 1 0 0 1-.298-.678c0-.255.085-.509.298-.679.17-.17.424-.296.679-.296.255 0 .51.085.68.296l6.707 6.696s2.59 2.458 5.392.678c.68-.678 1.231-1.229 1.443-2.33.51-2.035-.212-3.857-1.698-5.34Z" /><path d="M95.732 58.752 79.605 42.957c-3.656-3.58-7.655-3.917-10.666-.969l-6.236 6.108L51.651 58.92c-.86.8-.86 2.148-.043 2.99 2.666 2.317 5.934 3.117 5.934 3.117-.903-.252-1.849-.758-2.795-1.727-.172-.168-.258-.42-.258-.674 0-.252.086-.463.258-.631l1.72-1.685 9.29-9.098 6.322-6.192c.774-.758 1.333-.758 1.72-.716.516.084 1.42.421 2.71 1.685l16.127 15.795c1.505 1.474 2.881 3.58 1.118 5.307l-3.312 3.244a2.114 2.114 0 0 0-.645 1.516c0 .57.233 1.115.645 1.516.43.421.99.632 1.549.632.559 0 1.118-.21 1.548-.632l3.311-3.243c3.226-3.16 2.796-7.54-1.118-11.373Z" /></g></symbol><symbol  viewBox="0 0 114 124" id="icon/active/icon_active_showHeart_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_showHeart_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_active_showHeart_black_a)" fill="none" fill-rule="evenodd"><path d="M78.095 62.596a5.432 5.432 0 0 0-1.75-.653c-.38-2.41-1.78-4.63-4.027-5.937l-2.388-1.39a5.432 5.432 0 0 0-1.749-.654c-.38-2.41-1.781-4.63-4.027-5.937l-2.388-1.39 1.258-2.208c1.853-3.246 1.51-7.335-.839-9.934-1.852-2.05-4.434-3.057-7.086-2.763a8.271 8.271 0 0 0-6.267 4.134l-.484.85c-2.595-3.567-7.216-5.14-11.179-3.671a9.706 9.706 0 0 0-5.79 5.852 9.826 9.826 0 0 0 .717 8.203l5.163 9.052-3.569 6.257c-3.795 6.642-1.53 15.185 5.04 19.025l14.31 8.36c9.203 5.375 21.014 2.175 26.333-7.139l2.755-4.826c3.034-5.323 1.227-12.155-4.033-15.23Zm-41.23-18.3a4.219 4.219 0 0 1-.31-3.514 4.162 4.162 0 0 1 2.512-2.52c1.084-.406 2.31-.236 3.356.378a4.962 4.962 0 0 1 1.787 1.822l.994 1.75-4.77 8.36-3.568-6.276Zm37.738 35.568c-3.795 6.656-12.237 8.942-18.807 5.101l-14.31-8.36c-3.943-2.305-5.298-7.425-3.026-11.422l2.04-3.573.006-.007 9.636-16.895c.09-.164.116-.347.174-.516.174-.177.336-.373.458-.595l2.834-4.963a2.737 2.737 0 0 1 2.09-1.378c.524-.06 1.537-.007 2.428.98.735.816.793 2.24.135 3.389l-4.014 7.034-4.131 7.243a2.805 2.805 0 0 0 1.007 3.807 2.737 2.737 0 0 0 3.763-1.018l4.13-7.237 2.388 1.391a2.805 2.805 0 0 1 1.007 3.808v.006l-3.466 6.068a2.805 2.805 0 0 0 1.007 3.807 2.737 2.737 0 0 0 3.763-1.018l3.466-6.074 2.381 1.39a2.805 2.805 0 0 1 1.007 3.808c0 .007-.006.007-.006.013v.007l-3.453 6.054a2.805 2.805 0 0 0 1.007 3.808 2.737 2.737 0 0 0 3.762-1.019l3.466-6.074c2.627 1.535 3.53 4.95 2.014 7.609l-2.756 4.826Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 114 124" id="icon/active/icon_active_showHeart_white"><path d="M77.215 58.196a5.432 5.432 0 0 0-1.75-.653c-.38-2.41-1.78-4.63-4.027-5.937l-2.388-1.39a5.432 5.432 0 0 0-1.749-.654c-.38-2.41-1.781-4.63-4.027-5.937l-2.388-1.39 1.258-2.208c1.853-3.246 1.51-7.335-.839-9.934-1.852-2.05-4.434-3.057-7.086-2.763a8.271 8.271 0 0 0-6.267 4.134l-.484.85c-2.595-3.567-7.216-5.14-11.179-3.671a9.706 9.706 0 0 0-5.79 5.852 9.826 9.826 0 0 0 .717 8.203l5.163 9.052-3.569 6.257c-3.795 6.642-1.53 15.185 5.04 19.025l14.31 8.36c9.203 5.375 21.014 2.175 26.333-7.139l2.755-4.826c3.034-5.323 1.227-12.155-4.033-15.23Zm-41.23-18.3a4.219 4.219 0 0 1-.31-3.514 4.162 4.162 0 0 1 2.512-2.52c1.084-.406 2.31-.236 3.356.378a4.962 4.962 0 0 1 1.787 1.822l.994 1.75-4.77 8.36-3.568-6.276Zm37.738 35.568c-3.795 6.656-12.237 8.942-18.807 5.101l-14.31-8.36c-3.943-2.305-5.298-7.425-3.026-11.422l2.04-3.573.006-.007 9.636-16.895c.09-.164.116-.347.174-.516.174-.177.336-.373.458-.595l2.834-4.963a2.737 2.737 0 0 1 2.09-1.378c.524-.06 1.537-.007 2.428.98.735.816.793 2.24.135 3.389l-4.014 7.034-4.131 7.243a2.805 2.805 0 0 0 1.007 3.807 2.737 2.737 0 0 0 3.763-1.018l4.13-7.237 2.388 1.391a2.805 2.805 0 0 1 1.007 3.808v.006l-3.466 6.068a2.805 2.805 0 0 0 1.007 3.807 2.737 2.737 0 0 0 3.763-1.018l3.466-6.074 2.381 1.39a2.805 2.805 0 0 1 1.007 3.808c0 .007-.006.007-.006.013v.007l-3.453 6.054a2.805 2.805 0 0 0 1.007 3.808 2.737 2.737 0 0 0 3.762-1.019l3.466-6.074c2.627 1.535 3.53 4.95 2.014 7.609l-2.756 4.826Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_singleHandsUp_white"><g stroke-width="0" fill-rule="evenodd"><path d="m44.74 43.727-11.523-30.4 2.886-1.093 11.524 30.399-2.886 1.094ZM21.5 53.571l-11.524-30.4 2.886-1.093 11.522 30.4L21.5 53.57Zm-2.596-49.57c6.035-2.287 12.58-.006 15.638 6.467L11.481 19.21c-2.002-6.873 1.386-12.92 7.423-15.208Zm40.59 30.093-8.485-22.378c-1.458-3.846-5.803-5.29-9.545-3.872l-4.036 1.53C33.8 1.423 25.407-1.854 17.78 1.038c-7.627 2.89-11.74 10.908-9.184 19.268L4.54 21.84C.8 23.259-.945 27.01.513 30.858l8.483 22.379c1.458 3.846 5.574 6.353 9.317 4.935l36.923-13.998c3.742-1.418 5.716-6.233 4.258-10.08Z" mask="url(#mask-3)" transform="translate(28.842 42.364)" /><path d="M59.883 29.256a6.4 6.4 0 0 1 .33 1.368L57.009 44.48l-.022.02c-.25.389-.573.723-.954.984-.865.614-1.492.258-2.427-.226-1.417-.744-1.025-1.245-.66-2.738.729-3.087 1.02-4.172 1.527-6.525l-4.196-.508-4.507 7.316c.169.944.519 1.86.992 4.106l.33 1.37c.253 1.445 1.148 3.112.693 4.019a3.15 3.15 0 0 1-2.677 1.761l-.046.011a2.38 2.38 0 0 1-2.046-1.2l-.021-.039-.014-.055c-1.15-3.98-2.22-7.402-3.346-11.388a3.297 3.297 0 0 1 .317-2.337c.352-.694 2.687-5.328 4.39-8.723 1.072-2.156 1.693-3.378 1.827-3.67.308-.625 1.13-1.534 1.112-1.602l-.66-2.738c-.15-.616-.12-.434-.33-1.37a12.205 12.205 0 0 0-.331-1.368l10.95-2.642c.959 3.97 1.624 6.517 2.974 12.319Z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_sitDown_black"><defs><path id="icon/active/icon_active_sitDown_black_b" d="M0 0h21v21H0z" /><path id="icon/active/icon_active_sitDown_black_d" d="M0 0h56v66H0z" /><filter color-interpolation-filters="auto" id="icon/active/icon_active_sitDown_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_active_sitDown_black_a)" fill="none" fill-rule="evenodd"><g transform="translate(57 23)"><mask id="icon/active/icon_active_sitDown_black_c" fill="#fff"><use xlink:href="#icon/active/icon_active_sitDown_black_b" /></mask><path d="M21 10.5C21 16.299 16.299 21 10.5 21 4.7 21 0 16.299 0 10.5 0 4.7 4.7 0 10.5 0 16.299 0 21 4.7 21 10.5" fill="#050101" mask="url(#icon/active/icon_active_sitDown_black_c)" /></g><g transform="translate(39 47)"><mask id="icon/active/icon_active_sitDown_black_e" fill="#fff"><use xlink:href="#icon/active/icon_active_sitDown_black_d" /></mask><path d="M18.192 0h20.375c.384 0 .751.14 1.037.396.784.7 2.496 2.319 4.534 4.786 6.962 8.43 10.988 18.893 11.709 29.795l.145 2.195s.362 3.695-3.703 3.623c0 0-3.485.145-3.412-4.638 0 0-2.832-17.68-7.914-22.68v14.275l-2 .055c-.503.014-.986.285-1.195.742-.181.399-.145.87.726 1.16h6.535s1.307-.073 1.452 1.376v7.753l.89.382a2.478 2.478 0 0 1 1.462 2.739l-3.72 19.674c-.589 3.118-3.75 5.045-6.798 4.145a5.419 5.419 0 0 1-3.814-6.096l3.122-18.525H19.69l3.656 17.9a5.444 5.444 0 0 1-3.755 6.296c-2.979.907-6.108-.876-6.839-3.897L7.928 41.519s-.29-2.173 1.453-2.898l.217-7.464s-.145-1.666 1.96-1.666h6.68s2.158-.686.436-1.812h-3.195V13.622s-4.646 3.333-7.986 22.1c0 0-.218 5.218-3.703 5.145 0 0-4.066.29-3.775-5.145 0 0 2.975-26.869 17.046-35.415C17.4.1 17.795 0 18.192 0" fill="#050101" mask="url(#icon/active/icon_active_sitDown_black_e)" /></g><path fill="#050101" d="M89.927 90H92v19h-6zM61 90h14l-3.365 19H64.42zM44.739 90 49 109h-6V90z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_sitDown_white"><defs><path id="icon/active/icon_active_sitDown_white_a" d="M0 0h21v21H0z" /><path id="icon/active/icon_active_sitDown_white_c" d="M0 0h56v66H0z" /></defs><g fill-rule="evenodd"><g transform="translate(57 23)"><mask id="icon/active/icon_active_sitDown_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_sitDown_white_a" /></mask><path d="M21 10.5C21 16.299 16.299 21 10.5 21 4.7 21 0 16.299 0 10.5 0 4.7 4.7 0 10.5 0 16.299 0 21 4.7 21 10.5" mask="url(#icon/active/icon_active_sitDown_white_b)" /></g><g transform="translate(39 47)"><mask id="icon/active/icon_active_sitDown_white_d" fill="#fff"><use xlink:href="#icon/active/icon_active_sitDown_white_c" /></mask><path d="M18.192 0h20.375c.384 0 .751.14 1.037.396.784.7 2.496 2.319 4.534 4.786 6.962 8.43 10.988 18.893 11.709 29.795l.145 2.195s.362 3.695-3.703 3.623c0 0-3.485.145-3.412-4.638 0 0-2.832-17.68-7.914-22.68v14.275l-2 .055c-.503.014-.986.285-1.195.742-.181.399-.145.87.726 1.16h6.535s1.307-.073 1.452 1.376v7.753l.89.382a2.478 2.478 0 0 1 1.462 2.739l-3.72 19.674c-.589 3.118-3.75 5.045-6.798 4.145a5.419 5.419 0 0 1-3.814-6.096l3.122-18.525H19.69l3.656 17.9a5.444 5.444 0 0 1-3.755 6.296c-2.979.907-6.108-.876-6.839-3.897L7.928 41.519s-.29-2.173 1.453-2.898l.217-7.464s-.145-1.666 1.96-1.666h6.68s2.158-.686.436-1.812h-3.195V13.622s-4.646 3.333-7.986 22.1c0 0-.218 5.218-3.703 5.145 0 0-4.066.29-3.775-5.145 0 0 2.975-26.869 17.046-35.415C17.4.1 17.795 0 18.192 0" mask="url(#icon/active/icon_active_sitDown_white_d)" /></g><path d="M89.927 90H92v19h-6zM61 90h14l-3.365 19H64.42zM44.739 90 49 109h-6V90z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_stretch_black"><path d="M64.22 48.105c-4.418 0-8-3.472-8-7.756 0-4.283 3.582-7.755 8-7.755 4.42 0 8.002 3.472 8.002 7.755 0 4.284-3.582 7.756-8.001 7.756Zm-26.066-8.3 6.03-3.333c4.226 8.173 7.976 13.144 11.248 14.912 4.908 2.652 11.022 4.986 17.574 0 4.369-3.324 7.91-8.295 10.625-14.912l6.53 3.332c-1.433 5.217-4.009 10.132-7.727 14.746-5.577 6.92-6.093 6.72-7.102 8.407-1.01 1.688-1.505 6.872 0 10.333 1.003 2.308 5.111 13.783 12.324 34.424h-9.472c-6.654-14.86-10.655-22.85-12.003-23.968-2.024-1.68-3.192-1.692-4.212 0-1.019 1.692-10.358 18.273-11.443 23.968H40.478l12.365-35.621c1.753-4.105 1.527-7.44-.678-10.004-3.308-3.846-6.65-7.48-7.98-9.98-.573-1.076-2.2-2.933-3.707-6.035-.553-1.137-1.327-3.227-2.324-6.27Z" fill="#140F26" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_active_stretch_white"><path d="M64.22 48.105c-4.418 0-8-3.472-8-7.756 0-4.283 3.582-7.755 8-7.755 4.42 0 8.002 3.472 8.002 7.755 0 4.284-3.582 7.756-8.001 7.756Zm-26.066-8.3 6.03-3.333c4.226 8.173 7.976 13.144 11.248 14.912 4.908 2.652 11.022 4.986 17.574 0 4.369-3.324 7.91-8.295 10.625-14.912l6.53 3.332c-1.433 5.217-4.009 10.132-7.727 14.746-5.577 6.92-6.093 6.72-7.102 8.407-1.01 1.688-1.505 6.872 0 10.333 1.003 2.308 5.111 13.783 12.324 34.424h-9.472c-6.654-14.86-10.655-22.85-12.003-23.968-2.024-1.68-3.192-1.692-4.212 0-1.019 1.692-10.358 18.273-11.443 23.968H40.478l12.365-35.621c1.753-4.105 1.527-7.44-.678-10.004-3.308-3.846-6.65-7.48-7.98-9.98-.573-1.076-2.2-2.933-3.707-6.035-.553-1.137-1.327-3.227-2.324-6.27Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_turnOver_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_active_turnOver_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><path id="icon/active/icon_active_turnOver_black_b" d="M0 0h28v29H0z" /></defs><g filter="url(#icon/active/icon_active_turnOver_black_a)" fill="none" fill-rule="evenodd"><path d="M79 61.5C79 67.3 74.299 72 68.5 72S58 67.3 58 61.5 62.701 51 68.5 51 79 55.7 79 61.5" fill="#050101" /><path d="M56.865 65.43c1.265 3.842 5.068 10.235 16.252 8.55a7.057 7.057 0 0 1 4.6.853l4.722 2.742c3.412 1.984 4.578 6.417 2.593 9.867-1.915 3.328-6.072 4.526-9.42 2.715L39.749 70.748c-3.503-1.895-4.785-6.352-2.837-9.867l.12-.219c1.84-3.324 5.914-4.607 9.28-2.922l6.967 3.489c1.706.853 2.984 2.367 3.587 4.2" fill="#050101" /><g transform="translate(82 74)"><mask id="icon/active/icon_active_turnOver_black_c" fill="#fff"><use xlink:href="#icon/active/icon_active_turnOver_black_b" /></mask><path d="m16.373 11.582-4.627 2.074L13.17 0 28 6.09l-4.272 2.075s3.564 5.69.177 13.27c-2.059 4.607-6.53 7.702-11.458 7.56C8.724 28.89 4.137 27.423 0 22.318c0 0 20.17 6.589 16.373-10.736" fill="#050101" mask="url(#icon/active/icon_active_turnOver_black_c)" /></g><path d="m32.51 49.623.88 4.964L44 46.123 30.533 37l.678 4.668s-6.768.061-11.192 6.925c-2.686 4.17-2.748 9.55.153 13.584 2.191 3.049 6.005 6.093 12.61 6.823 0 0-16.898-13.311-.272-19.377" fill="#050101" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_active_turnOver_white"><defs><path id="icon/active/icon_active_turnOver_white_a" d="M0 0h28v29H0z" /></defs><g fill-rule="evenodd"><path d="M79 61.5C79 67.3 74.299 72 68.5 72S58 67.3 58 61.5 62.701 51 68.5 51 79 55.7 79 61.5" /><path d="M56.865 65.43c1.265 3.842 5.068 10.235 16.252 8.55a7.057 7.057 0 0 1 4.6.853l4.722 2.742c3.412 1.984 4.578 6.417 2.593 9.867-1.915 3.328-6.072 4.526-9.42 2.715L39.749 70.748c-3.503-1.895-4.785-6.352-2.837-9.867l.12-.219c1.84-3.324 5.914-4.607 9.28-2.922l6.967 3.489c1.706.853 2.984 2.367 3.587 4.2" /><g transform="translate(82 74)"><mask id="icon/active/icon_active_turnOver_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_turnOver_white_a" /></mask><path d="m16.373 11.582-4.627 2.074L13.17 0 28 6.09l-4.272 2.075s3.564 5.69.177 13.27c-2.059 4.607-6.53 7.702-11.458 7.56C8.724 28.89 4.137 27.423 0 22.318c0 0 20.17 6.589 16.373-10.736" mask="url(#icon/active/icon_active_turnOver_white_b)" /></g><path d="m32.51 49.623.88 4.964L44 46.123 30.533 37l.678 4.668s-6.768.061-11.192 6.925c-2.686 4.17-2.748 9.55.153 13.584 2.191 3.049 6.005 6.093 12.61 6.823 0 0-16.898-13.311-.272-19.377" /></g></symbol><symbol   viewBox="0 0 114 123" id="icon/active/icon_active_turnWave_white"><defs><path id="icon/active/icon_active_turnWave_white_a" d="M0 0h56.658v94.002H0z" /></defs><g stroke-width="0" fill-rule="evenodd"><path d="M76.456 48.764v2.957c2.522 1.729 3.86 4.089 3.86 6.695 0 3.379-2.242 6.343-6.433 8.054v-4.785l-5.135 5.777 5.135 5.779v-4.012c5.782-2.093 9.004-6.23 9.004-10.88-.003-3.908-2.283-7.366-6.43-9.585M76.453 48.762s.002 0 .003.002v-.002h-.003ZM57.59 34.963a7.734 7.734 0 1 0 0-15.469 7.734 7.734 0 0 0 0 15.47" /><g transform="translate(29 14)"><mask id="icon/active/icon_active_turnWave_white_b" fill="#fff"><use xlink:href="#icon/active/icon_active_turnWave_white_a" /></mask><path d="M54.918.822s-3.366-2.482-4.997 1.18L49.14 5.48l-.855-1.869s-.32-.666-1.134-.414c0 0-.8.267-.485 1.156 0 0 1.29 3.925 1.747 4.456 0 0-.345.019-.826 1.327 0 0-3.271 7.386-6.74 11.035 0 0-1.502 2.41-6.222 1.337 0 0-9.497-1.982-16.865 1.596 0 0-3.846 1.872-5.772 7.927 0 0-1.487 4.073-4.074 14.147l-1.495 5.826c-2.586-1.731-4.081-4.091-4.081-6.698 0-2.799 1.728-5.311 4.678-7.066v-2.817C2.648 37.622 0 41.192 0 45.235c0 3.647 2.156 6.976 5.78 9.257l-.012.053s-1.267 3.467 2.31 4.513c0 0 2.802 1.039 4.127-2.034 1.658.351 3.443.544 5.336.544V54.91c-1.626 0-3.154-.144-4.574-.403l5.13-18.513s.606-.77.66.496v54.715s-.33 2.807 1.928 2.752h4.073s2.532.496 2.422-2.532V60.82s.12-1.486 1.437-1.486c0 0 1.206 0 1.26 1.486v30.991s-.275 2.152 1.707 2.176h5.009s1.872.356 1.817-2.342V41.334s-.726-5.953 2.967-9.252c0 0 10.809-11.069 12.37-20.01 0 0 .653-1.757.144-2.059 0 0 2.529-3.022 2.758-5.915 0 0 .245-2.104-1.731-3.276" mask="url(#icon/active/icon_active_turnWave_white_b)" /></g></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_active_ultramanRay_white"><g stroke-width="0" fill-rule="evenodd"><path d="M85.12 95.507c-1.515 1.661-5.263 1.91-6.596 1.867-5.748-.15-9.11-5.374-9.183-5.489-.118-.17-.238-.325-.357-.487 2.968-.602 7.137-1.769 9.074-3.773.849.742 1.762 1.35 2.739 1.748 4.252 1.74 4.87 3.602 4.923 3.75l.013.11c.12.962-.074 1.684-.612 2.274m-24.655-9.895c-3.225-.944-6.087 2.216-7.398 3.987-3.815-1.079-7.394-2.696-8.283-3.73l.922-1.638c1.45.084 3.902.19 6.965.19 5.824 0 13.837-.388 21.264-2.058a27.01 27.01 0 0 0 1.828 2.76c-.006.008-.004.01-.011.02-1.056 1.457-6.002 2.766-9.465 3.302-2.638-2.266-5.012-2.74-5.822-2.833M44.063 96.554c-.825.087-2.284.125-2.798-.583-.68-.936-.151-3.283.429-4.62l1.42-2.519c2.055 1.687 5.37 2.934 7.974 3.719-2.778 3.314-7.035 4.002-7.025 4.002m-3.104-23.819c.065-1.4.21-2.837.432-4.273.278-1.8.973-3.48 2.008-4.861 1.054-1.405 1.616-1.467 1.61-1.47.002.002.129.045.348.327.247.32.435.71.558 1.16.245.904.677 2.58 1.079 4.586-1.827 1.105-2.25 2.35-2.25 3.267v.033c0 .17.019.335.046.496.005.03.013.058.019.087.028.136.065.269.11.398.017.044.032.09.05.134.043.104.094.205.148.303.473.885 1.394 1.654 2.777 2.295.092 3.242-.526 4.708-1.182 4.988l-.226.117a3.941 3.941 0 0 1-1.535.475l-.391-.028-.002.03a2.339 2.339 0 0 1-.34-.041c-1.445-.309-2.28-2.103-2.723-3.555-.428-1.39-.608-2.894-.536-4.468m14.147-42.631L58.37 46.37c.346 1.723 2.83 1.66 3.088-.078l2.388-16.108c8.153 2.15 14.219 9.951 14.219 19.247 0 6.89-3.403 13.31-8.923 16.916-2.496-.493-5.396-.753-8.44-.753-3.94 0-7.607.431-10.433 1.222a.174.174 0 0 0-.018-.011 75.613 75.613 0 0 0-1.074-4.532 6.632 6.632 0 0 0-1.151-2.348c-1.023-1.316-2.16-1.612-2.931-1.63-.76-.028-1.48.21-2.207.671-1.51-2.911-2.3-6.17-2.3-9.535 0-9.408 6.214-17.291 14.518-19.328m5.596 43.77c-6.62 0-10.656-1.246-12.072-2.099a2.965 2.965 0 0 1-.38-.276c.928-.827 5.104-2.365 12.452-2.365 7.365 0 11.544 1.546 12.458 2.37-.915.825-5.094 2.37-12.458 2.37m-9.46 3.001c2.752.657 4.575 2.714 5.515 4.087-2.388.076-4.57.078-6.41.047.516-1.057.81-2.438.895-4.133m21.079 2.379c-3.973.83-8.13 1.294-11.984 1.536.873-1.68 2.298-2.852 3.86-3.665 2.258-.162 4.68-.495 6.786-1.067.329.877.777 1.985 1.338 3.195m16.77 13.594c-.074-.787-.766-4.044-7.015-6.602-3.534-1.446-6.53-7.698-7.93-11.392 1.53-.834 2.514-1.928 2.514-3.35 0-1.734-1.467-2.981-3.608-3.862 2.642-2.205 4.752-5 6.195-8.147l.353.05a1.868 1.868 0 0 0 2.11-1.588l1.18-8.35c.142-1-.54-1.92-1.525-2.095-.794-10.14-7.81-18.45-17.02-20.705l.412-2.768a1.569 1.569 0 0 0-1.56-1.798l-7.755.037a1.568 1.568 0 0 0-1.53 1.875l.526 2.623c-8.583 2.044-15.284 9.34-16.867 18.492l-.396.023a1.869 1.869 0 0 0-1.756 1.974l.492 8.419a1.868 1.868 0 0 0 1.974 1.756l.672-.04a23.623 23.623 0 0 0 2.027 4.343 14.29 14.29 0 0 0-2.533 6.202 43.71 43.71 0 0 0-.47 4.635c-.088 1.964.14 3.853.682 5.616.97 3.167 2.505 4.689 3.923 5.4l-3.477 6.168-.067.135c-.234.517-2.223 5.14-.118 8.052 1.153 1.593 3.137 2.255 5.956 1.956.304-.044 7.445-1.138 10.776-7.53 1.06-1.697 3.185-3.893 4.319-3.504l.247.078.23.014c.135.008 3.349.26 6.462 4.772.173.28 4.325 6.818 11.905 7.016.075.004.219.008.42.008 1.517 0 6.265-.23 8.772-2.967 1.2-1.312 1.712-3.02 1.48-4.946" /><path d="M46.08 46.921c.556-.872 1.473-1.452 2.584-1.635 1.183-.193 2.426.078 3.508.768 1.083.69 1.858 1.702 2.18 2.854.306 1.084.168 2.16-.387 3.032-1.186 1.862-3.92 2.252-6.092.868-2.173-1.384-2.977-4.025-1.792-5.887m-.023 8.738a8.524 8.524 0 0 0 4.57 1.352c2.486 0 4.84-1.137 6.189-3.256 1.078-1.693 1.359-3.74.79-5.76-.55-1.955-1.834-3.657-3.62-4.793-1.784-1.135-3.867-1.58-5.872-1.25-2.072.34-3.807 1.46-4.886 3.154v.001c-2.185 3.434-.917 8.168 2.829 10.552M64.46 48.908c.324-1.152 1.1-2.166 2.181-2.854a5.173 5.173 0 0 1 2.77-.829c1.36 0 2.615.586 3.321 1.696 1.186 1.862.382 4.503-1.792 5.886-2.175 1.384-4.908.995-6.09-.867-.556-.872-.695-1.949-.39-3.032m3.725 8.103a8.523 8.523 0 0 0 4.57-1.352c3.746-2.384 5.015-7.118 2.83-10.553-2.187-3.433-7.012-4.289-10.759-1.904-1.785 1.136-3.07 2.838-3.62 4.791-.568 2.022-.287 4.068.791 5.762 1.35 2.12 3.702 3.256 6.188 3.256M30.002 69.46l2.111-4.307-2.873-1.408-4.37 8.914h3.522l-3.538 3.485 4.866 2.974-3.41 3.376 2.251 2.274 6.314-6.25-4.857-2.968 6.185-6.09z" /></g></symbol><symbol  viewBox="0 0 114 124" id="icon/active/icon_model_b2w_all_terrain_white"><path d="M27.963 56.812a1.75 1.75 0 1 1 3.498.001 1.75 1.75 0 0 1-3.498-.001m-2.524 2.106a3.633 3.633 0 0 1-3.124 4.078 9.773 9.773 0 0 0 3.798 2.7 3.634 3.634 0 1 1 7.196 0 9.796 9.796 0 0 0 3.787-2.681 3.634 3.634 0 1 1 2.39-6.61 9.721 9.721 0 0 0-1.628-5.218 3.636 3.636 0 0 1-6.175 1.053 3.635 3.635 0 0 1 .434-5.122 9.776 9.776 0 0 0-4.811 0 3.634 3.634 0 0 1-1.051 6.166 3.633 3.633 0 0 1-4.69-2.097 9.744 9.744 0 0 0-1.629 5.107 3.62 3.62 0 0 1 1.895-.532 3.633 3.633 0 0 1 3.608 3.156m-5.59-2.34c0-5.449 4.417-9.865 9.866-9.864 5.448.001 9.864 4.418 9.863 9.866-.001 5.449-4.419 9.864-9.867 9.864-5.448-.001-9.864-4.419-9.863-9.867m-4.217.003c0 7.777 6.304 14.081 14.08 14.081 7.777 0 14.08-6.304 14.08-14.08 0-7.777-6.303-14.081-14.08-14.081-7.776 0-14.08 6.304-14.08 14.08" /><path d="M54.64 79.5H12.084c-.471-1.284 2.018-.448 4.813-3.351 3.38-1.426 5.551-1.308 8.668-2.783 2.013-.953 4.852-3.52 10.566-9.273 1.223-1.23 2.364-2.66 3.488-4.076l.173-.217c1.697-2.138 3.362-4.216 5.219-5.493 5.92-4.073 9.13-5.43 9.629-4.073V79.5ZM60.745 43.87c.499-1.688 5.964-2.595 11.885 2.466 1.857 1.587 3.46 5.018 5.157 7.674l.897 1.645c1.124 1.758 1.365 3.17 2.588 4.7 5.714 7.148 8.553 10.339 10.566 11.522 3.117 1.834 3.873 2.712 7.252 4.484 2.253 1.181 2.243 2.466 5.382 3.139H62.763l-2.018-35.63Z" /><path d="m50.205 50.995 8.97-6.577s3.41-2.493 5.18-1.795c1.772.698 4.463 13.854 4.463 14.128 0 .274-.897 12.334-.897 13.43 0 1.097-1.066 9.32-1.066 9.32H51.154" /></symbol><symbol  viewBox="0 0 114 124" id="icon/active/icon_model_b2w_special_white"><path d="M72.017 57.055a6.534 6.534 0 0 0 2.16-5.204l4.222 2.835 7.88-8.634a3.899 3.899 0 0 1 5.513-.252 3.902 3.902 0 0 1 .251 5.512L81.897 62.431a3.897 3.897 0 0 1-5.057.606l-6.581-4.42 1.758-1.562Zm4.354-8.799c-5.026 0-9.103-4.077-9.103-9.108 0-5.023 4.077-9.101 9.103-9.101 5.029 0 9.106 4.078 9.106 9.101 0 5.03-4.077 9.108-9.106 9.108ZM19.633 90.218l18.359-10.606 6.424-9.91a6.476 6.476 0 0 0 3.24 3.626l2.82 1.375-6.446 9.942a3.913 3.913 0 0 1-1.32 1.257L23.536 96.976a3.9 3.9 0 0 1-5.33-1.425c0-.001 0-.002-.002-.003a3.902 3.902 0 0 1 1.428-5.33Z" /><path d="m63.925 78.358-15.128-7.367a3.904 3.904 0 0 1-.884-6.424l13.4-11.919-7.993-5.296-11.694 3.345A3.91 3.91 0 0 1 36.8 48.02a3.907 3.907 0 0 1 2.677-4.827l13.426-3.837a3.9 3.9 0 0 1 3.228.497l13.72 9.092a3.886 3.886 0 0 1 1.735 2.977 3.893 3.893 0 0 1-1.299 3.19L57.453 66.524l13.767 6.707a3.897 3.897 0 0 1 2.039 2.422 3.896 3.896 0 0 1-.428 3.135L62.42 95.646a3.902 3.902 0 0 1-6.64-4.1l8.144-13.188ZM83.825 78.545l-3.915.28 13.664-9.14-6.253 7.143 4.695-.3-14.424 9.14zM85.477 67.846l7.586-6.029 3.255 1.97zM21.156 65.197l11.08-7.417 5.342 1.225zM45.754 34.81l11.714-9.31 5.027 3.04zM20.584 75.319l7.088-5.633 3.041 1.84z" /></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_batteryLife_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_batteryLife_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_batteryLife_black_a)" fill="none" fill-rule="evenodd"><path d="m72.765 100.203 4.253.001h2.687l.493.002h1.385l.427.002h1.17l.351.001h.927l.263.002h.46l.193.001h.313l.116.002.154.001c.065 0 .057.002-.033.004A4.788 4.788 0 0 1 81.132 105H46.869a4.789 4.789 0 0 1-4.785-4.5l-.008-.283c-.09 0-.1 0-.032-.002h.153l.116-.001h.313l.193-.002h.459l.266-.001h.925l.35-.002 1.171-.001h1.812l.494-.002h2.12l.567-.002h4.252l.644-.001h16.886Zm-7.384-51.366 2.746.003c9.805.011 18.475.063 17.84.157l-.043.005v49.465c.957.094-7.296.147-16.899.161l-1.052.002h-.528l-1.374.002h-5.515l-.53-.002h-1.053c-9.428-.016-17.554-.067-16.94-.157l.043-.006V49.002c-.987-.097 7.818-.15 17.798-.162l2.743-.003h2.766-.002Zm8.048 9.629L54.993 72.474l6.31 1.72-6.731 13.158 18.435-14.009-6.309-1.72 6.73-13.157Zm7.703-16.047a4.788 4.788 0 0 1 4.792 4.783c.09 0 .098 0 .032.001h-.153l-.116.002h-.313l-.193.001h-.46l-.264.002-.928.001h-.348l-1.171.002h-1.812l-.495.002h-2.121l-.564.001-4.253.002H55.233l-4.252-.002h-2.684l-.495-.002h-1.384l-.428-.001h-1.17l-.35-.002h-.928l-.264-.001h-.459l-.193-.002h-.313l-.116-.001-.154-.002c-.066 0-.057-.001.033-.003l.008-.28a4.789 4.789 0 0 1 4.785-4.501h34.263ZM67.127 36a1.573 1.573 0 0 1 1.572 1.568v3.23c.141.007-.673.01-1.877.013h-.691l-.368.002h-4.585c-.626.004-1.251-.001-1.876-.016v-3.229A1.567 1.567 0 0 1 60.873 36h6.254Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_batteryLife_white"><path d="m73.765 100.203 4.253.001h2.687l.493.002h1.385l.427.002h1.17l.351.001h.927l.263.002h.46l.193.001h.313l.116.002.154.001c.065 0 .057.002-.033.004A4.788 4.788 0 0 1 82.132 105H47.869a4.789 4.789 0 0 1-4.785-4.5l-.008-.283c-.09 0-.1 0-.032-.002h.153l.116-.001h.313l.193-.002h.459l.266-.001h.925l.35-.002 1.171-.001h1.812l.494-.002h2.12l.567-.002h4.252l.644-.001h16.886Zm-7.384-51.366 2.746.003c9.805.011 18.475.063 17.84.157l-.043.005v49.465c.957.094-7.296.147-16.899.161l-1.052.002h-.528l-1.374.002h-5.515l-.53-.002h-1.053c-9.428-.016-17.554-.067-16.94-.157l.043-.006V49.002c-.987-.097 7.818-.15 17.798-.162l2.743-.003h2.766-.002Zm8.048 9.629L55.993 72.474l6.31 1.72-6.731 13.158 18.435-14.009-6.309-1.72 6.73-13.157Zm7.703-16.047a4.788 4.788 0 0 1 4.792 4.783c.09 0 .098 0 .032.001h-.153l-.116.002h-.313l-.193.001h-.46l-.264.002-.928.001h-.348l-1.171.002h-1.812l-.495.002h-2.121l-.564.001-4.253.002H56.233l-4.252-.002h-2.684l-.495-.002h-1.384l-.428-.001h-1.17l-.35-.002h-.928l-.264-.001h-.459l-.193-.002h-.313l-.116-.001-.154-.002c-.066 0-.057-.001.033-.003l.008-.28a4.789 4.789 0 0 1 4.785-4.501h34.263ZM68.127 36a1.573 1.573 0 0 1 1.572 1.568v3.23c.141.007-.673.01-1.877.013h-.691l-.368.002h-4.585c-.626.004-1.251-.001-1.876-.016v-3.229A1.567 1.567 0 0 1 61.873 36h6.254Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_climbingStairs_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_climbingStairs_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_climbingStairs_black_a)" fill="none" fill-rule="evenodd"><g fill="#FFF" fill-rule="nonzero"><path d="M51.967 31.281a5.779 5.779 0 1 0 11.557 0 5.779 5.779 0 0 0-11.557 0ZM41.788 71.299l2.849-3.476c-1.9-4.01-2.85-6.752-2.85-8.225 0-2.21 1.33-7.463 4.868-8.57v15.085l-4.867 37.4h5.899l7.837-28.168 8.798.696c2.536.336 3.804 1.173 3.804 2.512-.337 1.72-1.783 6.24-4.337 13.563h6.31l5.38-11.677c2.238-5.867 1.045-10.072-3.578-12.616-4.623-2.544-8.604-3.54-11.943-2.986l.745-9.04c2.432 3.305 4.907 5.327 7.423 6.066 2.517.74 6.282 1.56 11.296 2.458l1.438-3.438c-7.904-3.127-12.352-5.65-13.347-7.57-1.49-2.881-3.19-8.847-3.19-9.789 0-.941-7.535-5.303-16.636-2.822-5.563 1.517-7.807 4.656-9.089 6.432-1.282 1.775-5.584 5.62-3.319 14.73 1.323 3.973 3.492 7.118 6.509 9.435Z" /><path d="M101.084 74.216H82.672V95.72H63.578v19.35h-17.39v-5.375h12.275v-19.35h19.095V68.84h23.526z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_climbingStairs_white"><g fill-rule="nonzero"><path d="M51.967 31.281a5.779 5.779 0 1 0 11.557 0 5.779 5.779 0 0 0-11.557 0ZM41.788 71.299l2.849-3.476c-1.9-4.01-2.85-6.752-2.85-8.225 0-2.21 1.33-7.463 4.868-8.57v15.085l-4.867 37.4h5.899l7.837-28.168 8.798.696c2.536.336 3.804 1.173 3.804 2.512-.337 1.72-1.783 6.24-4.337 13.563h6.31l5.38-11.677c2.238-5.867 1.045-10.072-3.578-12.616-4.623-2.544-8.604-3.54-11.943-2.986l.745-9.04c2.432 3.305 4.907 5.327 7.423 6.066 2.517.74 6.282 1.56 11.296 2.458l1.438-3.438c-7.904-3.127-12.352-5.65-13.347-7.57-1.49-2.881-3.19-8.847-3.19-9.789 0-.941-7.535-5.303-16.636-2.822-5.563 1.517-7.807 4.656-9.089 6.432-1.282 1.775-5.584 5.62-3.319 14.73 1.323 3.973 3.492 7.118 6.509 9.435Z" /><path d="M101.084 74.216H82.672V95.72H63.578v19.35h-17.39v-5.375h12.275v-19.35h19.095V68.84h23.526z" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_crossStep_black"><defs><path id="icon/active/icon_model_crossStep_black_b" d="M0 0h11v25H0z" /><path id="icon/active/icon_model_crossStep_black_d" d="M0 0h45v81H0z" /><filter color-interpolation-filters="auto" id="icon/active/icon_model_crossStep_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_crossStep_black_a)" fill="none" fill-rule="evenodd"><path d="M74 27c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10" fill="#050101" /><g transform="translate(61 98)"><mask id="icon/active/icon_model_crossStep_black_c" fill="#fff"><use xlink:href="#icon/active/icon_model_crossStep_black_b" /></mask><path d="M1.281 0s3.752 5.57 5.876 11.536c0 0 2.407 6.83 3.823 7.426 0 0 .708 6.232-6.372 6.033 0 0-4.814-.795-4.601-5.9L1.28 0Z" fill="#050101" mask="url(#icon/active/icon_model_crossStep_black_c)" /></g><g transform="translate(42 37)"><mask id="icon/active/icon_model_crossStep_black_e" fill="#fff"><use xlink:href="#icon/active/icon_model_crossStep_black_d" /></mask><path d="m34.734 14.987-1.378 1.077a.195.195 0 0 1-.315-.151v-3.811c0-.173.225-.241.323-.099l1.496 2.172a.598.598 0 0 1-.126.812Zm-22.283.301c0 .288-.346.44-.561.246l-1.787-1.605a.33.33 0 0 1 0-.492l1.787-1.604a.336.336 0 0 1 .56.245v3.21Zm31.834-2.663c-1.45-4.23-6.622-8.94-6.622-8.94C33.937.82 29.109 0 29.109 0c-6.553 3.412-13.244 0-13.244 0C6.346 2.866 1.38 10.578 1.38 10.578c-3.105 4.436 0 7.03 0 7.03l11.174 10.509L12.21 40.5c-.275 4.671 3.656 9.456 3.656 9.456C27.73 66.812 29.73 76.23 29.73 76.23c2.621 5.665 7.243 4.71 7.243 4.71 5.311-1.434 3.035-7.917 3.035-7.917-4-12.148-7.933-17.676-7.933-17.676l.759-11.26c.552-1.98.207-15.56.207-15.56l10.692-9.896c2.483-2.047.552-6.006.552-6.006Z" fill="#050101" mask="url(#icon/active/icon_model_crossStep_black_e)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_crossStep_white"><defs><path id="icon/active/icon_model_crossStep_white_a" d="M0 0h11v25H0z" /><path id="icon/active/icon_model_crossStep_white_c" d="M0 0h45v81H0z" /></defs><g fill-rule="evenodd"><path d="M74 27c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10" /><g transform="translate(61 98)"><mask id="icon/active/icon_model_crossStep_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_crossStep_white_a" /></mask><path d="M1.281 0s3.752 5.57 5.876 11.536c0 0 2.407 6.83 3.823 7.426 0 0 .708 6.232-6.372 6.033 0 0-4.814-.795-4.601-5.9L1.28 0Z" mask="url(#icon/active/icon_model_crossStep_white_b)" /></g><g transform="translate(42 37)"><mask id="icon/active/icon_model_crossStep_white_d" fill="#fff"><use xlink:href="#icon/active/icon_model_crossStep_white_c" /></mask><path d="m34.734 14.987-1.378 1.077a.195.195 0 0 1-.315-.151v-3.811c0-.173.225-.241.323-.099l1.496 2.172a.598.598 0 0 1-.126.812Zm-22.283.301c0 .288-.346.44-.561.246l-1.787-1.605a.33.33 0 0 1 0-.492l1.787-1.604a.336.336 0 0 1 .56.245v3.21Zm31.834-2.663c-1.45-4.23-6.622-8.94-6.622-8.94C33.937.82 29.109 0 29.109 0c-6.553 3.412-13.244 0-13.244 0C6.346 2.866 1.38 10.578 1.38 10.578c-3.105 4.436 0 7.03 0 7.03l11.174 10.509L12.21 40.5c-.275 4.671 3.656 9.456 3.656 9.456C27.73 66.812 29.73 76.23 29.73 76.23c2.621 5.665 7.243 4.71 7.243 4.71 5.311-1.434 3.035-7.917 3.035-7.917-4-12.148-7.933-17.676-7.933-17.676l.759-11.26c.552-1.98.207-15.56.207-15.56l10.692-9.896c2.483-2.047.552-6.006.552-6.006Z" mask="url(#icon/active/icon_model_crossStep_white_d)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_damping_black"><defs><path id="icon/active/icon_model_damping_black_b" d="M0 0h58v61H0z" /><path id="icon/active/icon_model_damping_black_d" d="M0 0h30v32H0z" /><filter color-interpolation-filters="auto" id="icon/active/icon_model_damping_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_damping_black_a)" fill="none" fill-rule="evenodd"><g transform="translate(35 49)"><mask id="icon/active/icon_model_damping_black_c" fill="#fff"><use xlink:href="#icon/active/icon_model_damping_black_b" /></mask><path d="M53.992 0c-2.214 0-4.009 1.784-4.009 3.985v21.502H8.017V3.985C8.017 1.785 6.222 0 4.008 0 1.795 0 0 1.784 0 3.985v37.462c0 2.2 1.795 3.985 4.008 3.985.186 0 .367-.017.546-.041v.041H24.54v11.583c0 2.2 1.794 3.985 4.008 3.985s4.009-1.784 4.009-3.985V45.432H54.53v-.04c1.958-.263 3.47-1.927 3.47-3.945V3.985C58 1.785 56.204 0 53.99 0" fill="#231916" mask="url(#icon/active/icon_model_damping_black_c)" /></g><g transform="translate(49 30)"><mask id="icon/active/icon_model_damping_black_e" fill="#fff"><use xlink:href="#icon/active/icon_model_damping_black_d" /></mask><path d="M3.994 32h22.012A3.992 3.992 0 0 0 30 28.01a3.992 3.992 0 0 0-3.994-3.988h-7.012V3.989A3.992 3.992 0 0 0 15 0a3.992 3.992 0 0 0-3.994 3.99v20.033H3.994A3.992 3.992 0 0 0 0 28.01 3.992 3.992 0 0 0 3.994 32" fill="#231916" mask="url(#icon/active/icon_model_damping_black_e)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_damping_white"><defs><path id="icon/active/icon_model_damping_white_a" d="M0 0h58v61H0z" /><path id="icon/active/icon_model_damping_white_c" d="M0 0h30v32H0z" /></defs><g fill-rule="evenodd"><g transform="translate(35 49)"><mask id="icon/active/icon_model_damping_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_damping_white_a" /></mask><path d="M53.992 0c-2.214 0-4.009 1.784-4.009 3.985v21.502H8.017V3.985C8.017 1.785 6.222 0 4.008 0 1.795 0 0 1.784 0 3.985v37.462c0 2.2 1.795 3.985 4.008 3.985.186 0 .367-.017.546-.041v.041H24.54v11.583c0 2.2 1.794 3.985 4.008 3.985s4.009-1.784 4.009-3.985V45.432H54.53v-.04c1.958-.263 3.47-1.927 3.47-3.945V3.985C58 1.785 56.204 0 53.99 0" mask="url(#icon/active/icon_model_damping_white_b)" /></g><g transform="translate(49 30)"><mask id="icon/active/icon_model_damping_white_d" fill="#fff"><use xlink:href="#icon/active/icon_model_damping_white_c" /></mask><path d="M3.994 32h22.012A3.992 3.992 0 0 0 30 28.01a3.992 3.992 0 0 0-3.994-3.988h-7.012V3.989A3.992 3.992 0 0 0 15 0a3.992 3.992 0 0 0-3.994 3.99v20.033H3.994A3.992 3.992 0 0 0 0 28.01 3.992 3.992 0 0 0 3.994 32" mask="url(#icon/active/icon_model_damping_white_d)" /></g></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_debug_white"><path d="M31.661 66.93h7.735a2.614 2.614 0 1 0 0-5.228H31.66a2.614 2.614 0 1 0 0 5.229Zm55.018-25.372H79.51v-1.862a6.964 6.964 0 0 0-13.926 0v6.606c0 .122.006.243.025.357a6.96 6.96 0 0 0 6.938 6.37 6.957 6.957 0 0 0 6.925-6.255h7.206a2.614 2.614 0 0 0 2.614-2.614 2.611 2.611 0 0 0-2.614-2.602Zm0 40.3H79.51V81.4a6.964 6.964 0 0 0-13.926 0v6.607c0 .12.006.242.025.357a6.964 6.964 0 0 0 13.876 0 2.19 2.19 0 0 0 .025-.357v-.931h7.168a2.614 2.614 0 0 0 2.614-2.615 2.611 2.611 0 0 0-2.614-2.602Zm-27.7 0H31.66a2.614 2.614 0 1 0 0 5.23h27.317a2.614 2.614 0 1 0 0-5.23ZM31.66 46.781h27.317a2.614 2.614 0 1 0 0-5.23H31.661a2.614 2.614 0 1 0 0 5.23Zm55.018 14.927h-27.44V61.128a6.964 6.964 0 0 0-13.926 0v6.606c0 .121.007.243.026.357a6.964 6.964 0 0 0 13.876 0 2.19 2.19 0 0 0 .025-.357v-.81h27.439a2.614 2.614 0 0 0 2.614-2.614 2.611 2.611 0 0 0-2.614-2.602Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 114 125" id="icon/active/icon_model_freeWalk_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_freeWalk_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g transform="translate(0 1)" filter="url(#icon/active/icon_model_freeWalk_black_a)" fill="none" fill-rule="evenodd"><path d="m80.227 98-4.177-9.118-9.095-4.155 9.091-4.18 4.181-9.092 4.148 9.091 9.125 4.181-9.125 4.148L80.227 98Zm-33.182-9.955-8.295-18.25L20.5 61.5l18.25-8.295 8.295-18.25 8.296 18.25L73.59 61.5l-18.25 8.295-8.296 18.25Zm0-39.818-4.18 9.122-9.092 4.151 9.092 4.18 4.18 9.093 4.145-9.095 9.128-4.178-9.125-4.148-4.148-9.125Zm33.182 3.318-4.177-9.088-9.095-4.184 9.091-4.145L80.227 25l4.148 9.125 9.125 4.148-9.125 4.18-4.148 9.092Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 114 125" id="icon/active/icon_model_freeWalk_light"><defs><linearGradient id="icon/active/icon_model_freeWalk_light_a" x1="0%" x2="76.604%" y1="64.279%" y2="0%"><stop offset="0%" stop-color="#66E7BE" /><stop offset="100%" stop-color="#6879E4" /></linearGradient></defs><path d="m59.727 73-4.177-9.118-9.095-4.155 9.091-4.18 4.181-9.092 4.148 9.091L73 59.727l-9.125 4.148L59.727 73Zm-33.182-9.955-8.295-18.25L0 36.5l18.25-8.295 8.295-18.25 8.296 18.25L53.09 36.5l-18.25 8.295-8.296 18.25Zm0-39.818-4.18 9.122-9.092 4.151 9.092 4.18 4.18 9.093 4.145-9.095 9.128-4.178-9.125-4.148-4.148-9.125Zm33.182 3.318-4.177-9.088-9.095-4.184 9.091-4.145L59.727 0l4.148 9.125L73 13.273l-9.125 4.18-4.148 9.092Z" fill-rule="nonzero" transform="translate(20.5 26)" fill="url(#icon/active/icon_model_freeWalk_light_a)" /></symbol><symbol  viewBox="0 0 114 125" id="icon/active/icon_model_freeWalk_white"><path d="m80.227 99-4.177-9.118-9.095-4.155 9.091-4.18 4.181-9.092 4.148 9.091 9.125 4.181-9.125 4.148L80.227 99Zm-33.182-9.955-8.295-18.25L20.5 62.5l18.25-8.295 8.295-18.25 8.296 18.25L73.59 62.5l-18.25 8.295-8.296 18.25Zm0-39.818-4.18 9.122-9.092 4.151 9.092 4.18 4.18 9.093 4.145-9.095 9.128-4.178-9.125-4.148-4.148-9.125Zm33.182 3.318-4.177-9.088-9.095-4.184 9.091-4.145L80.227 26l4.148 9.125 9.125 4.148-9.125 4.18-4.148 9.092Z" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_g1_walk_white"><path d="M73.872 99.843a3.792 3.792 0 0 1-5.2-1.185l-7.924-12.97a3.918 3.918 0 0 1-.92-1.378l-.14-.356-.515-.843.206.053-3.152-7.95a7.255 7.255 0 0 1-.956.07h-.111l-3.126 23.534c-.034 2.066-1.799 2.996-3.943 3.158a3.418 3.418 0 0 1-3.82-3.447l3.93-28.747a7.166 7.166 0 0 1-.204-1.67v-6.566l-2.984 7.442a3.299 3.299 0 0 1-4.439 1.931 3.753 3.753 0 0 1-1.981-4.707l8.75-21.832c.185-.504.486-.957.878-1.324a7.17 7.17 0 0 1 6.949-5.42h.101c.505 0 1.008.054 1.501.16a3.24 3.24 0 0 1 3.634.912L71.423 51.46c.4.463.666 1.026.773 1.628.035.027.07.047.105.077l-.777 12.395a3.36 3.36 0 1 1-6.693-.444l.64-10.187-3.028-3.503v16.687c-.002.3-.022.599-.061.896l4.71 11.888c.118.302.2.616.246.937l7.718 12.851a3.721 3.721 0 0 1-1.184 5.158ZM53.712 36.58a7.79 7.79 0 1 1 7.743-7.79 7.766 7.766 0 0 1-7.743 7.79Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_keepMoving_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_keepMoving_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_keepMoving_black_a)" fill="none" fill-rule="evenodd"><g fill="#FFF" fill-rule="nonzero"><path d="M68.432 36.816c-.005 2.761 1.68 5.253 4.266 6.313a6.994 6.994 0 0 0 7.547-1.473 6.756 6.756 0 0 0 1.505-7.44C80.68 31.664 78.155 30 75.354 30c-3.82 0-6.917 3.05-6.922 6.816Zm27.8 32.549a19.449 19.449 0 0 1-9.734-6.14c-1.42-1.76-2.509-6.14-3.234-13.115a.874.874 0 0 0-.06-.299A5.938 5.938 0 0 0 79 46.741a27.586 27.586 0 0 0-8.343 0c-.102.028-.203.06-.302.1h-.11c-.181.07-.356.153-.525.248-1.47.765-5.34 3.388-9.985 11.496a37.579 37.579 0 0 0-4.162 14.704v.884a2.2 2.2 0 0 0 2.157 1.69 2.26 2.26 0 0 0 2.015-1.282c1.159-3.18 3.789-10.065 4.574-12.122.152-.4.385-.765.686-1.073a26.876 26.876 0 0 1 4.03-3.338v23.15c.014.049.014.1 0 .149a46.827 46.827 0 0 1-4.474 11.684c-1.783 3.338-5.199 7.62-9.068 13.224a3.725 3.725 0 0 0-.494 1.819c.117.716.439 1.384.927 1.927a3.238 3.238 0 0 0 2.53.994 2.895 2.895 0 0 0 1.984-.765c.06 0 .09-.09.151-.15 3.87-3.278 6.741-7.809 9.22-11.922a118.114 118.114 0 0 0 6.62-12.916.59.59 0 0 1 .937-.179c5.045 4.69 8.098 8.508 9.16 11.456a46.032 46.032 0 0 1 2.115 10.82c.047 1.295 1.035 2.37 2.338 2.543h1.3c1.503-.136 2.69-1.318 2.811-2.802-.12-9.002-1.29-15.122-2.952-18.49-1.753-3.636-5.64-8.346-11.658-14.128a.621.621 0 0 1-.212-.537c.423-5.246.786-7.63 1.058-7.213 3.87 6.11 10.399 7.273 14.107 7.481a2.413 2.413 0 0 0 2.509-1.877v-.09a2.45 2.45 0 0 0-1.713-2.861Z" /><path d="M40.972 94h16.056C59.01 94 60 94.833 60 96.5s-.99 2.5-2.972 2.5H40.972C38.99 99 38 98.167 38 96.5s.99-2.5 2.972-2.5ZM32.972 102h16.056c1.981 0 2.972.833 2.972 2.5s-.99 2.5-2.972 2.5H32.972c-1.981 0-2.972-.833-2.972-2.5s.99-2.5 2.972-2.5Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_keepMoving_white"><g fill-rule="nonzero"><path d="M68.432 36.816c-.005 2.761 1.68 5.253 4.266 6.313a6.994 6.994 0 0 0 7.547-1.473 6.756 6.756 0 0 0 1.505-7.44C80.68 31.664 78.155 30 75.354 30c-3.82 0-6.917 3.05-6.922 6.816Zm27.8 32.549a19.449 19.449 0 0 1-9.734-6.14c-1.42-1.76-2.509-6.14-3.234-13.115a.874.874 0 0 0-.06-.299A5.938 5.938 0 0 0 79 46.741a27.586 27.586 0 0 0-8.343 0c-.102.028-.203.06-.302.1h-.11c-.181.07-.356.153-.525.248-1.47.765-5.34 3.388-9.985 11.496a37.579 37.579 0 0 0-4.162 14.704v.884a2.2 2.2 0 0 0 2.157 1.69 2.26 2.26 0 0 0 2.015-1.282c1.159-3.18 3.789-10.065 4.574-12.122.152-.4.385-.765.686-1.073a26.876 26.876 0 0 1 4.03-3.338v23.15c.014.049.014.1 0 .149a46.827 46.827 0 0 1-4.474 11.684c-1.783 3.338-5.199 7.62-9.068 13.224a3.725 3.725 0 0 0-.494 1.819c.117.716.439 1.384.927 1.927a3.238 3.238 0 0 0 2.53.994 2.895 2.895 0 0 0 1.984-.765c.06 0 .09-.09.151-.15 3.87-3.278 6.741-7.809 9.22-11.922a118.114 118.114 0 0 0 6.62-12.916.59.59 0 0 1 .937-.179c5.045 4.69 8.098 8.508 9.16 11.456a46.032 46.032 0 0 1 2.115 10.82c.047 1.295 1.035 2.37 2.338 2.543h1.3c1.503-.136 2.69-1.318 2.811-2.802-.12-9.002-1.29-15.122-2.952-18.49-1.753-3.636-5.64-8.346-11.658-14.128a.621.621 0 0 1-.212-.537c.423-5.246.786-7.63 1.058-7.213 3.87 6.11 10.399 7.273 14.107 7.481a2.413 2.413 0 0 0 2.509-1.877v-.09a2.45 2.45 0 0 0-1.713-2.861Z" /><path d="M40.972 94h16.056C59.01 94 60 94.833 60 96.5s-.99 2.5-2.972 2.5H40.972C38.99 99 38 98.167 38 96.5s.99-2.5 2.972-2.5ZM32.972 102h16.056c1.981 0 2.972.833 2.972 2.5s-.99 2.5-2.972 2.5H32.972c-1.981 0-2.972-.833-2.972-2.5s.99-2.5 2.972-2.5Z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_keepRunning_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_keepRunning_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.082353 0 0 0 0 0.062745 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><filter color-interpolation-filters="auto" id="icon/active/icon_model_keepRunning_black_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><filter color-interpolation-filters="auto" id="icon/active/icon_model_keepRunning_black_c"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_keepRunning_black_a)" fill="none" fill-rule="evenodd"><g filter="url(#icon/active/icon_model_keepRunning_black_b)" transform="translate(25 31)"><g fill="#888" fill-rule="nonzero"><path d="M55 18a9 9 0 1 0-9-9.011A9.011 9.011 0 0 0 55 18Z" /><path d="M70.03 16.15c-5.343 7.48-12.486 8.351-20.18 3.774-.527-.31-2.855-1.583-3.36-1.892-12.382-7.353-24.742-4.462-33.031 7.146-3.52 4.944 4.62 9.623 8.106 4.737 4.288-5.999 9.734-7.731 15.685-5.827-3.05 5.288-5.71 10.553-9.482 18.032-3.773 7.478-12.074 13.454-20.054 8.786-5.767-3.372-10.96 4.91-5.216 8.27 10.903 6.366 23.687 2.455 30.211-5.827.235.12.476.228.723.321 5.331 1.858 12.325 6.802 14.446 8.557 2.121 1.755 5.79 10.679 7.957 15.175 2.637 5.437 11.145 1.48 8.508-3.991-2.466-5.093-6.593-15.256-9.826-17.825-2.58-2.065-7.602-5.896-11.856-8.075a371.44 371.44 0 0 1 9.035-16.53c10.067 3.086 19.63-.55 26.44-10.093 3.52-4.944-4.621-9.624-8.107-4.737Z" /></g></g><g filter="url(#icon/active/icon_model_keepRunning_black_c)" transform="translate(25 31)"><g fill="#FFF" fill-rule="nonzero"><path d="M10.972 67h16.056C29.01 67 30 67.833 30 69.5s-.99 2.5-2.972 2.5H10.972C8.99 72 8 71.167 8 69.5s.99-2.5 2.972-2.5ZM2.972 75h16.056C21.01 75 22 75.833 22 77.5s-.99 2.5-2.972 2.5H2.972C.99 80 0 79.167 0 77.5S.99 75 2.972 75Z" /></g></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_keepRunning_white"><g fill-rule="evenodd"><g fill-rule="nonzero"><path d="M80 49a9 9 0 1 0-9-9.011A9.011 9.011 0 0 0 80 49Z" /><path d="M95.03 47.15c-5.343 7.48-12.486 8.351-20.18 3.774-.527-.31-2.855-1.583-3.36-1.892-12.382-7.353-24.742-4.462-33.031 7.146-3.52 4.944 4.62 9.623 8.106 4.737 4.288-5.999 9.734-7.731 15.685-5.827-3.05 5.288-5.71 10.553-9.482 18.032-3.773 7.478-12.074 13.454-20.054 8.786-5.767-3.372-10.96 4.91-5.216 8.27 10.903 6.366 23.687 2.455 30.211-5.827.235.12.476.228.723.321 5.331 1.858 12.325 6.802 14.446 8.557 2.121 1.755 5.79 10.679 7.957 15.175 2.637 5.437 11.145 1.48 8.508-3.991-2.466-5.093-6.593-15.256-9.826-17.825-2.58-2.065-7.602-5.896-11.856-8.075a371.44 371.44 0 0 1 9.035-16.53c10.067 3.086 19.63-.55 26.44-10.093 3.52-4.944-4.621-9.624-8.107-4.737Z" /></g><g fill-rule="nonzero"><path d="M35.972 98h16.056c1.981 0 2.972.833 2.972 2.5s-.99 2.5-2.972 2.5H35.972c-1.981 0-2.972-.833-2.972-2.5s.99-2.5 2.972-2.5ZM27.972 106h16.056c1.981 0 2.972.833 2.972 2.5s-.99 2.5-2.972 2.5H27.972c-1.981 0-2.972-.833-2.972-2.5s.99-2.5 2.972-2.5Z" /></g></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_lieUp_white"><g stroke-width="0" fill-rule="evenodd"><path d="M22.2 50.51c0 5.445 4.414 9.86 9.858 9.86 5.445 0 9.86-4.415 9.86-9.86 0-5.444-4.415-9.858-9.86-9.858-5.444 0-9.858 4.414-9.858 9.858M71.62 45.937s3.552-.805 4.795 2.235c1.17 2.199.077 4.285-.854 4.983-.4.422-22.775 11.414-22.775 11.414l7.905 8.703L71.793 62.09c1.942-1.44 5.598-1.493 7.19.517 1.767 2.361 9.93 14.596 14.551 21.994.774 1.791-.207 5.002-2.055 6.014-2.082 1.137-4.137 1.225-5.82 0-2.042-2.51-10.784-14.09-10.784-14.09s-9.744 11.362-10.126 11.78c-3.624 3.982-9.439 4.261-13.407.621l-13.95-12.8c-3.969-3.64-5.277-9.577-1.644-13.557 3.4-3.404 25.221-11.767 35.872-16.63M57.484 40.185l-1.314-3.017-10.81 4.707a1.37 1.37 0 0 0-.71 1.803l.22.504a1.37 1.37 0 0 0 1.803.71l10.81-4.707Z" /><path d="m61.511 44.202 6.174-8.878a1.37 1.37 0 0 0-.914-2.138l-10.766-1.67a1.37 1.37 0 0 0-1.467 1.902l4.592 10.549a1.37 1.37 0 0 0 2.382.237v-.002Z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_locking_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_locking_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_locking_black_a)" fill="none" fill-rule="evenodd"><g fill="#090909" fill-rule="nonzero"><path d="M63 35c-9.926 0-18 8.166-18 18.201V66h7.32V53.201c0-5.954 4.79-10.8 10.68-10.8s10.68 4.846 10.68 10.8V66H81V53.201C81 43.166 72.925 35 63 35ZM84.39 67H43.61C40.511 67 38 69.582 38 72.766v27.47c0 3.184 2.512 5.764 5.61 5.764h40.78c3.098 0 5.61-2.582 5.61-5.764v-27.47C90 69.582 87.488 67 84.39 67Zm-9.08 22.03h-5.562c-.956 2.291-3.168 3.896-5.747 3.896-2.58 0-4.793-1.605-5.75-3.896h-5.559v-5.06h5.56c.956-2.29 3.17-3.895 5.749-3.895 2.579 0 4.79 1.605 5.747 3.895h5.561v5.06Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_locking_white"><g fill-rule="nonzero"><path d="M63 35c-9.926 0-18 8.166-18 18.201V66h7.32V53.201c0-5.954 4.79-10.8 10.68-10.8s10.68 4.846 10.68 10.8V66H81V53.201C81 43.166 72.925 35 63 35ZM84.39 67H43.61C40.511 67 38 69.582 38 72.766v27.47c0 3.184 2.512 5.764 5.61 5.764h40.78c3.098 0 5.61-2.582 5.61-5.764v-27.47C90 69.582 87.488 67 84.39 67Zm-9.08 22.03h-5.562c-.956 2.291-3.168 3.896-5.747 3.896-2.58 0-4.793-1.605-5.75-3.896h-5.559v-5.06h5.56c.956-2.29 3.17-3.895 5.749-3.895 2.579 0 4.79 1.605 5.747 3.895h5.561v5.06Z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_monthStart_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_monthStart_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_monthStart_black_a)" fill="none" fill-rule="evenodd"><path d="M95 70.679c-.102 17.144-14.208 30.774-31.34 30.31-16.186-.435-29.226-13.487-29.65-29.673C33.559 54.148 47.254 40.042 64.429 40a30.564 30.564 0 0 1 7.792.983 30.417 30.417 0 0 1 5.891 2.21c.322.16.203.65-.155.643h-.083a13.3 13.3 0 0 0-5.463 1.162 13.348 13.348 0 0 0-3.973 2.746 13.264 13.264 0 0 0-3.908 9.353 13.326 13.326 0 0 0 3.711 9.317 13.268 13.268 0 0 0 9.71 4.11 13.373 13.373 0 0 0 12.081-7.828 13.337 13.337 0 0 0 1.186-5.516v-.018c0-.363.488-.476.649-.155a30.401 30.401 0 0 1 2.186 5.898c.632 2.49.965 5.093.947 7.774Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_monthStart_white"><path d="M95 70.679c-.102 17.144-14.208 30.774-31.34 30.31-16.186-.435-29.226-13.487-29.65-29.673C33.559 54.148 47.254 40.042 64.429 40a30.564 30.564 0 0 1 7.792.983 30.417 30.417 0 0 1 5.891 2.21c.322.16.203.65-.155.643h-.083a13.3 13.3 0 0 0-5.463 1.162 13.348 13.348 0 0 0-3.973 2.746 13.264 13.264 0 0 0-3.908 9.353 13.326 13.326 0 0 0 3.711 9.317 13.268 13.268 0 0 0 9.71 4.11 13.373 13.373 0 0 0 12.081-7.828 13.337 13.337 0 0 0 1.186-5.516v-.018c0-.363.488-.476.649-.155a30.401 30.401 0 0 1 2.186 5.898c.632 2.49.965 5.093.947 7.774Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_pose_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_pose_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_pose_black_a)" fill="none" fill-rule="evenodd"><g fill="#0E0F0F" fill-rule="nonzero"><path d="M74.422 63.806c-2.874 1.676-6.077 2.771-9.211 3.838-4.338 1.478-2.474 8.373 1.9 6.885C72.67 72.637 85.036 69.115 85 61.347c-.033-7.494-10.016-10.563-16.154-12.395-2.812-1.162-6.244-.932-8.779.7-6.706-6.788-7.333-14.984-2.692-23.293 2.248-4.023-3.927-7.623-6.173-3.602-6.253 11.196-5.183 23.19 4.134 32.28.38.37.784.621 1.195.787a9.715 9.715 0 0 0-.035.723v20.747c0 .302.02.595.043.886-.005.006-.013.01-.02.019L44.01 92.324A4.015 4.015 0 0 0 47.02 99h.005l25.913-.033c2.22 0 4.02-1.804 4.017-4.02a4.018 4.018 0 0 0-4.02-4.01h-.007l-16.977.021 5.342-6.032c1.37.607 2.899.873 4.41.805.005 1.041.013 2.183.022 3.406l7.18-.01c.344 0 .678.033 1.003.093-.049-6.368-.053-11.184-.053-11.184s-.014-.003-.016-.006c.011-.2.03-.401.03-.61v-3.287c-1.786.693-3.497 1.264-4.924 1.742l-1.26.42a5.468 5.468 0 0 1-1.77.305c-2.438 0-4.447-1.828-4.88-4.451-.383-2.301.58-5.089 3.595-6.115 3.022-1.029 6.145-2.091 8.885-3.691.1-.057.23-.13.354-.198v-3.673c.392.187.79.36 1.176.564.876.46 1.672.996 2.398 1.667.2.186.297.38.348.505-.498 1.144-2.47 2.069-3.37 2.598ZM73.468 101.114l-7.468.007c.082 4.638.192 9.254.353 12.916.229 5.273 8.873 5.295 8.642 0-.155-3.588-.265-8.26-.346-13.037a6.573 6.573 0 0 1-1.181.114Z" /><path d="M57 40.5a7.5 7.5 0 1 0 15 0 7.5 7.5 0 0 0-15 0Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_pose_white"><g fill-rule="nonzero"><path d="M75.414 64.196c-3.147 1.848-6.655 3.056-10.088 4.232-4.75 1.63-2.71 9.232 2.081 7.591C73.496 73.933 87.04 70.05 87 61.485c-.036-8.263-10.97-11.646-17.692-13.666-3.08-1.281-6.839-1.027-9.616.772-7.344-7.485-8.031-16.522-2.948-25.682 2.462-4.436-4.3-8.406-6.76-3.972-6.85 12.344-5.678 25.568 4.527 35.592.415.407.858.684 1.309.867-.02.26-.039.522-.039.797v22.875c0 .333.021.656.047.976-.005.007-.014.01-.02.021L42.103 95.64a4.45 4.45 0 0 0-.715 4.754A4.403 4.403 0 0 0 45.404 103h.005l28.381-.037c2.433 0 4.403-1.989 4.4-4.432-.002-2.443-1.976-4.422-4.403-4.422h-.007l-18.594.024 5.85-6.65c1.5.67 3.175.962 4.83.887.005 1.148.014 2.407.024 3.755l7.864-.01c.377 0 .743.036 1.1.102-.054-7.021-.06-12.33-.06-12.33s-.015-.004-.017-.008c.012-.22.033-.442.033-.673v-3.624c-1.956.764-3.83 1.394-5.393 1.922-.492.163-.954.32-1.38.463a5.953 5.953 0 0 1-1.939.335c-2.67 0-4.87-2.015-5.344-4.907-.42-2.537.635-5.61 3.937-6.742 3.31-1.134 6.73-2.306 9.731-4.07.11-.063.253-.143.388-.218v-4.05c.43.206.866.398 1.288.622.96.508 1.832 1.098 2.626 1.838.219.205.326.42.381.557-.545 1.261-2.704 2.281-3.69 2.864ZM74.298 105.128l-8.298.007c.091 5.184.214 10.343.392 14.436.254 5.893 9.86 5.918 9.603 0-.173-4.01-.295-9.231-.384-14.571a7.263 7.263 0 0 1-1.313.128Z" /><path d="M57 38a8 8 0 1 0 16 0 8 8 0 0 0-16 0Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_preparation_white"><g fill-rule="evenodd"><path d="m68.422 99.5 23.36-43.793 3.721.271L87.707 99.5z" /><path d="M36.41 69.008 25.516 92.8s-3.322 4.934 2.029 6.52c0 0 3.507.53 5.169-2.644l9.6-17.447s2.213-5.111 3.873-3.349l6.832 7.227s1.844 3.7 1.844 13.922c0 0-.738 2.467 4.245 2.467 0 0 3.509.178 3.509-2.289v-9.342s-.556-10.751-10.523-21.503l1.663-11.985s-.138-1.64 1.524-1.64c.756 0 2.962 3.258 6.965 6.06 1.244.872 3.522 1.867 6.83 2.983 0 0 3.554 1.404 4.78-.438 1.228-1.842.46-3.533-1.028-4.167l-6.151-2.798s-7.014-4.406-6.645-10.044c0 0 1.274-3.41-5.169-7.838-3.767-2.591-7.149-1.733-8.676-1.153l-15.689 6.875c-1.015.531-2.213 1.762-2.213 3.35v11.984c0 3.109 5.822 3.791 5.822 0v-8.285s-.102-.882 2.483-2.466c3.815-1.883 5.475-2.294 4.984-1.234 0 .176-5.169 7.578-5.169 12.16v11.28h.005ZM56.943 34.61c4.085 0 7.556-3.266 7.556-7.555 0-4.085-3.267-7.556-7.556-7.556s-7.555 3.267-7.555 7.556 3.266 7.555 7.555 7.555Z" fill-rule="nonzero" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_runSideBySide_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_runSideBySide_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter><path id="icon/active/icon_model_runSideBySide_black_b" d="M0 0h61v89H0z" /></defs><g filter="url(#icon/active/icon_model_runSideBySide_black_a)" fill="none" fill-rule="evenodd"><path d="M75 38c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10" fill="#050101" /><g transform="translate(34 26)"><mask id="icon/active/icon_model_runSideBySide_black_c" fill="#fff"><use xlink:href="#icon/active/icon_model_runSideBySide_black_b" /></mask><path d="M29.603 26.155s5.737 1.87 9.439-2.368c0 0 1.912-1.683 4.503-5.485L54.527 1.94S56.069-.895 59.4.289c0 0 2.345 1.558 1.357 4.176l-12.523 24.12s6.478 10.877 6.755 29.762c0 0 5.83 14.585 4.905 24.308 0 0 .278 6.358-7.033 4.862 0 0-6.385-1.87-6.94-9.256 0 0 .092-2.898 2.868-3.272l-3.053-6.638-1.944.187s-1.881 20.755-13.156 20.38c0 0-3.87.842-12.477-2.897 0 0-7.866-2.337-5.737-7.106 0 0 .555-3.272 5.83-2.43l4.442 1.776s7.094 3.179 7.942-.187c0 0 1.404-2.618 1.497-7.292l.74-9.443s-1.388-2.992-1.018-6.17c0 0 .37-10.004-2.961-18.886l-26.559-9.63S-.996 25.533.299 21.419c0 0 1.018-2.337 4.905-1.402l24.399 6.14Z" fill="#050101" mask="url(#icon/active/icon_model_runSideBySide_black_c)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_runSideBySide_white"><defs><path id="icon/active/icon_model_runSideBySide_white_a" d="M0 0h61v89H0z" /></defs><g fill-rule="evenodd"><path d="M75 38c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10 10 4.477 10 10" /><g transform="translate(34 26)"><mask id="icon/active/icon_model_runSideBySide_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_runSideBySide_white_a" /></mask><path d="M29.603 26.155s5.737 1.87 9.439-2.368c0 0 1.912-1.683 4.503-5.485L54.527 1.94S56.069-.895 59.4.289c0 0 2.345 1.558 1.357 4.176l-12.523 24.12s6.478 10.877 6.755 29.762c0 0 5.83 14.585 4.905 24.308 0 0 .278 6.358-7.033 4.862 0 0-6.385-1.87-6.94-9.256 0 0 .092-2.898 2.868-3.272l-3.053-6.638-1.944.187s-1.881 20.755-13.156 20.38c0 0-3.87.842-12.477-2.897 0 0-7.866-2.337-5.737-7.106 0 0 .555-3.272 5.83-2.43l4.442 1.776s7.094 3.179 7.942-.187c0 0 1.404-2.618 1.497-7.292l.74-9.443s-1.388-2.992-1.018-6.17c0 0 .37-10.004-2.961-18.886l-26.559-9.63S-.996 25.533.299 21.419c0 0 1.018-2.337 4.905-1.402l24.399 6.14Z" mask="url(#icon/active/icon_model_runSideBySide_white_b)" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_run_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_run_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_run_black_a)" fill="none" fill-rule="evenodd"><g fill="#FFF" fill-rule="nonzero"><path d="M74.876 38.292a7.223 7.223 0 1 0 14.447 0 7.223 7.223 0 0 0-14.447 0ZM46.12 58.036c3.843-4.637 7.022-6.955 9.536-6.955H65.92c-3.604 9.464-6.925 15.873-9.964 19.228-4.557 5.032-6.858 7.385-14.4 7.385-5.026 0-9.425-2.462-13.195-7.385l-2.603 3.61c5.704 6.725 11.42 10.546 17.149 11.466 9.515 1.526 14.678-2.551 19.387-5.845 3.77 1.846 14.843 5.34 13.899 12.674-.63 4.89-2.397 10.51-5.3 16.865h6.482c3.41-5.099 5.743-11.34 7-18.726 1.257-7.385-3.622-13.857-14.637-19.419l7.15-8.839c2.237 5.9 5.241 9.465 9.011 10.696 3.77 1.231 9.727-.212 17.869-4.329l-1.885-3.692c-6.447 1.586-10.927 1.764-13.44.533-3.77-1.846-2.815-6.637-5.683-11.491-3.168-5.36-5.385-7.455-8.822-9.456-3.437-2.002-17.02-2.932-22.695.964-3.783 2.597-6.665 6.258-8.646 10.982l3.522 1.734Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_run_white"><g fill-rule="nonzero"><path d="M74.876 38.292a7.223 7.223 0 1 0 14.447 0 7.223 7.223 0 0 0-14.447 0ZM46.12 58.036c3.843-4.637 7.022-6.955 9.536-6.955H65.92c-3.604 9.464-6.925 15.873-9.964 19.228-4.557 5.032-6.858 7.385-14.4 7.385-5.026 0-9.425-2.462-13.195-7.385l-2.603 3.61c5.704 6.725 11.42 10.546 17.149 11.466 9.515 1.526 14.678-2.551 19.387-5.845 3.77 1.846 14.843 5.34 13.899 12.674-.63 4.89-2.397 10.51-5.3 16.865h6.482c3.41-5.099 5.743-11.34 7-18.726 1.257-7.385-3.622-13.857-14.637-19.419l7.15-8.839c2.237 5.9 5.241 9.465 9.011 10.696 3.77 1.231 9.727-.212 17.869-4.329l-1.885-3.692c-6.447 1.586-10.927 1.764-13.44.533-3.77-1.846-2.815-6.637-5.683-11.491-3.168-5.36-5.385-7.455-8.822-9.456-3.437-2.002-17.02-2.932-22.695.964-3.783 2.597-6.665 6.258-8.646 10.982l3.522 1.734Z" /></g></symbol><symbol   viewBox="0 0 114 123" id="icon/active/icon_model_seating_white"><defs><path id="icon/active/icon_model_seating_white_a" d="M0 0h49.28v58.08H0z" /></defs><g fill-rule="evenodd"><path d="M57.08 40.48a9.24 9.24 0 1 0 0-18.48 9.24 9.24 0 0 0 0 18.48" /><g transform="translate(32 43.12)"><mask id="icon/active/icon_model_seating_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_seating_white_a" /></mask><path d="m49.273 32.711-.128-1.932c-.633-9.593-4.176-18.8-10.303-26.219-1.793-2.171-3.3-3.596-3.99-4.212A1.366 1.366 0 0 0 33.939 0h-17.93c-.35 0-.696.089-.995.27C2.632 7.791.013 31.436.013 31.436c-.255 4.782 3.323 4.527 3.323 4.527 3.066.064 3.258-4.527 3.258-4.527 2.939-16.516 7.028-19.449 7.028-19.449v12.371h2.81c1.517.99-.382 1.594-.382 1.594h-5.878c-1.853 0-1.725 1.466-1.725 1.466l-.192 6.568c-1.533.638-1.278 2.551-1.278 2.551l4.245 17.544a4.763 4.763 0 0 0 6.018 3.43 4.79 4.79 0 0 0 3.304-5.541l-3.216-15.752h15.78L30.362 52.52a4.768 4.768 0 0 0 3.357 5.364 4.724 4.724 0 0 0 5.982-3.647l3.273-17.314a2.18 2.18 0 0 0-1.286-2.41l-.784-.336v-6.822c-.127-1.276-1.278-1.212-1.278-1.212h-5.75c-.766-.255-.798-.669-.64-1.02.185-.403.61-.641 1.053-.653l1.76-.048V11.86c4.472 4.4 6.964 19.958 6.964 19.958-.064 4.209 3.002 4.081 3.002 4.081 3.578.064 3.259-3.188 3.259-3.188" mask="url(#icon/active/icon_model_seating_white_b)" /></g><path d="M73.36 97.68h5.28V80.96h-1.824zM51.36 80.96l3.008 16.72h6.351l2.961-16.72zM35.52 80.96v16.72h5.28l-3.75-16.72z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_sideStep_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_sideStep_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_sideStep_black_a)" fill="none" fill-rule="evenodd"><g fill="#050500" fill-rule="nonzero"><path d="M51 31a9 9 0 1 0 18 0 9 9 0 0 0-18 0ZM59.428 76.994l9.272-.507c1.933-.106 3.407-1.666 3.294-3.485l-1.722-27.895c-.112-1.818-1.77-3.208-3.7-3.101l-9.272.507c-1.933.106-3.407 1.667-3.294 3.485l1.722 27.895c.112 1.818 1.768 3.207 3.7 3.101Z" /><path d="M48.246 68.235c-.287 0-.58-.032-.872-.1l-17.435-4.058c-2.048-.475-3.319-2.505-2.837-4.528.479-2.026 2.523-3.287 4.58-2.806l14.553 3.385 8.01-15.222c.974-1.846 3.27-2.555 5.14-1.604a3.753 3.753 0 0 1 1.622 5.082l-9.38 17.822a3.82 3.82 0 0 1-3.38 2.03Zm35.804-8.63c-.65 0-1.3-.165-1.885-.494l-16.34-9.205a3.744 3.744 0 0 1-1.422-5.14c1.041-1.81 3.37-2.437 5.197-1.405l14.21 8.003 12.156-8.657c1.707-1.209 4.087-.832 5.317.859a3.741 3.741 0 0 1-.868 5.258L86.277 58.893a3.828 3.828 0 0 1-2.227.711ZM59.628 118a3.813 3.813 0 0 1-3.574-2.46l-7.912-21.158a3.738 3.738 0 0 1 .02-2.663l7.13-18.26c.762-1.94 2.977-2.894 4.93-2.156 1.962.751 2.939 2.934 2.18 4.875L55.79 93.104l7.414 19.82c.729 1.95-.278 4.12-2.253 4.842-.423.155-.87.234-1.322.234Zm22.57-5.895a3.82 3.82 0 0 1-3.091-1.562l-12.7-17.387a3.735 3.735 0 0 1-.711-1.943l-1.27-18.067c-.146-2.075 1.44-3.875 3.537-4.018a3.79 3.79 0 0 1 4.063 3.498l1.196 16.99 12.062 16.517a3.737 3.737 0 0 1-.859 5.259 3.804 3.804 0 0 1-2.227.713Z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_sideStep_white"><g fill-rule="nonzero"><path d="M51 31a9 9 0 1 0 18 0 9 9 0 0 0-18 0ZM59.428 76.994l9.272-.507c1.933-.106 3.407-1.666 3.294-3.485l-1.722-27.895c-.112-1.818-1.77-3.208-3.7-3.101l-9.272.507c-1.933.106-3.407 1.667-3.294 3.485l1.722 27.895c.112 1.818 1.768 3.207 3.7 3.101Z" /><path d="M48.246 68.235c-.287 0-.58-.032-.872-.1l-17.435-4.058c-2.048-.475-3.319-2.505-2.837-4.528.479-2.026 2.523-3.287 4.58-2.806l14.553 3.385 8.01-15.222c.974-1.846 3.27-2.555 5.14-1.604a3.753 3.753 0 0 1 1.622 5.082l-9.38 17.822a3.82 3.82 0 0 1-3.38 2.03Zm35.804-8.63c-.65 0-1.3-.165-1.885-.494l-16.34-9.205a3.744 3.744 0 0 1-1.422-5.14c1.041-1.81 3.37-2.437 5.197-1.405l14.21 8.003 12.156-8.657c1.707-1.209 4.087-.832 5.317.859a3.741 3.741 0 0 1-.868 5.258L86.277 58.893a3.828 3.828 0 0 1-2.227.711ZM59.628 118a3.813 3.813 0 0 1-3.574-2.46l-7.912-21.158a3.738 3.738 0 0 1 .02-2.663l7.13-18.26c.762-1.94 2.977-2.894 4.93-2.156 1.962.751 2.939 2.934 2.18 4.875L55.79 93.104l7.414 19.82c.729 1.95-.278 4.12-2.253 4.842-.423.155-.87.234-1.322.234Zm22.57-5.895a3.82 3.82 0 0 1-3.091-1.562l-12.7-17.387a3.735 3.735 0 0 1-.711-1.943l-1.27-18.067c-.146-2.075 1.44-3.875 3.537-4.018a3.79 3.79 0 0 1 4.063 3.498l1.196 16.99 12.062 16.517a3.737 3.737 0 0 1-.859 5.259 3.804 3.804 0 0 1-2.227.713Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_squatUp_white"><g fill-rule="evenodd"><path d="M64.423 57.565h22.415c1.921 0 3.522-1.6 3.522-3.522 0-2.242-1.6-3.843-3.522-3.843H65.384a7.581 7.581 0 0 0-5.764-5.763l-.96-.32c-4.163-.961-8.646 1.6-9.607 5.763L43.61 60.127l-6.404 11.527c-2.882 3.523-2.562 8.966 1.28 11.848.32.32.961.64 1.602.96 1.28 1.281 3.202 1.602 4.803 1.281l16.33-3.842-7.364 10.247c-1.281 1.921-.961 4.803.96 6.083 1.922 1.281 4.803.961 6.084-.96l14.41-19.853c.32-.64.64-1.601.64-2.562v-2.561c-.64-3.202-3.842-4.803-7.045-4.163l-9.286 2.241m.64-27.537c4.484.64 8.967-2.242 9.927-6.725.96-4.483-1.921-8.965-6.724-9.926-4.803-.96-8.966 1.921-9.926 6.404-.32 1.601 0 3.202.32 4.483.96 2.882 3.522 5.123 6.404 5.764M36.623 49.172l-3.474-1.854-6.645 12.45a1.64 1.64 0 0 0 .675 2.22l.58.309a1.64 1.64 0 0 0 2.22-.675l6.644-12.45Z" /><path d="m43.387 49.947-.805-12.918a1.64 1.64 0 0 0-2.447-1.325l-11.342 6.434a1.64 1.64 0 0 0 .037 2.875l12.148 6.483a1.64 1.64 0 0 0 2.411-1.548h-.002Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/icon_model_squat_white"><g fill-rule="evenodd"><path d="M64.656 57.565h22.415c1.921 0 3.522-1.6 3.522-3.522 0-2.242-1.6-3.843-3.522-3.843H65.617a7.581 7.581 0 0 0-5.764-5.763l-.96-.32c-4.163-.961-8.646 1.6-9.607 5.763l-5.443 10.247-6.404 11.527c-2.882 3.523-2.562 8.966 1.28 11.848.32.32.961.64 1.602.96 1.28 1.281 3.202 1.602 4.803 1.281l16.33-3.842-7.364 10.247c-1.281 1.921-.961 4.803.96 6.083 1.921 1.281 4.803.961 6.084-.96l14.41-19.853c.32-.64.64-1.601.64-2.562v-2.561c-.64-3.202-3.843-4.803-7.045-4.163l-9.286 2.241m.64-27.537c4.484.64 8.967-2.242 9.927-6.725.96-4.483-1.921-8.965-6.724-9.926-4.803-.96-8.966 1.921-9.927 6.404-.32 1.601 0 3.202.32 4.483.961 2.882 3.523 5.123 6.405 5.764M33.42 49.418l3.281 1.75 6.276-11.758a1.55 1.55 0 0 0-.638-2.096l-.548-.292a1.55 1.55 0 0 0-2.096.637L33.42 49.418Z" /><path d="m27.032 48.685.76 12.2a1.55 1.55 0 0 0 2.311 1.252l10.712-6.077a1.55 1.55 0 0 0-.035-2.714l-11.473-6.124a1.549 1.549 0 0 0-2.277 1.462l.002.001Z" /></g></symbol><symbol   viewBox="0 0 114 123" id="icon/active/icon_model_standActive_white"><defs><path id="icon/active/icon_model_standActive_white_a" d="M0 0h42.24v66.056H0z" /><path id="icon/active/icon_model_standActive_white_c" d="M0 0h14.298v13.858H0z" /></defs><g fill-rule="evenodd"><g transform="translate(35.88 33.024)"><mask id="icon/active/icon_model_standActive_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_standActive_white_a" /></mask><path d="M11.545 12.887C10.411 17.058 9.28 21.231 8.138 25.4c-.577 2.108-1.087 4.239-1.79 6.306-.654 1.93-2.213 2.752-3.94 2.251-2.01-.582-2.77-2.058-2.249-3.911C2.213 22.737 3.666 15.257 6.301 8.12 7.995 3.53 11.63.884 16.513.363c4.409-.47 8.888-.807 13.14 1.133 3.29 1.5 5.604 3.895 6.597 7.284 2.036 6.946 3.932 13.934 5.799 20.927.615 2.305-.283 3.782-2.277 4.273-2.025.5-3.457-.455-4.144-2.937-1.581-5.708-3.1-11.432-4.64-17.151-.092-.344-.062-.743-.77-.87-.034.68-.099 1.348-.1 2.017-.005 16.068-.002 32.136-.005 48.204 0 2.772-.006 2.795-2.899 2.775-5.498-.04-4.804.675-4.823-4.845-.028-7.924-.006-15.848-.008-23.772 0-.587.047-1.183-.04-1.758-.09-.605-.452-1.175-1.116-1.18-.724-.007-1.284.456-1.346 1.207-.08.948-.048 1.905-.049 2.859-.002 8.364-.04 16.729.03 25.092.015 1.794-.533 2.482-2.424 2.432-6.21-.165-5.312.776-5.327-5.258-.037-15.261-.012-30.522-.012-45.784v-2.059l-.554-.065" mask="url(#icon/active/icon_model_standActive_white_b)" /></g><g transform="translate(49.85 18.12)"><mask id="icon/active/icon_model_standActive_white_d" fill="#fff"><use xlink:href="#icon/active/icon_model_standActive_white_c" /></mask><path d="M14.298 6.944c-.011 3.758-3.259 6.906-7.135 6.914-3.856.01-7.14-3.152-7.163-6.897C-.025 3.065 3.211-.034 7.267.001c3.936.033 7.042 3.1 7.03 6.943" mask="url(#icon/active/icon_model_standActive_white_d)" /></g><rect x="38" y="102.425" width="38" height="5.26" rx="2.63" /></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_stand_black"><defs><path id="icon/active/icon_model_stand_black_a" d="M0 0h48v75.063H0z" /><path id="icon/active/icon_model_stand_black_c" d="M0 0h16.247v15.748H0z" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(41 40.937)"><mask id="icon/active/icon_model_stand_black_b" fill="#fff"><use xlink:href="#icon/active/icon_model_stand_black_a" /></mask><path d="M13.12 14.644c-1.29 4.74-2.574 9.482-3.872 14.22-.656 2.395-1.236 4.817-2.033 7.166-.745 2.194-2.517 3.127-4.48 2.558C.454 37.926-.41 36.249.182 34.143c2.334-8.305 3.985-16.805 6.98-24.916C9.086 4.012 13.215 1.005 18.765.413c5.01-.534 10.1-.917 14.932 1.287 3.737 1.705 6.368 4.426 7.497 8.277 2.313 7.894 4.467 15.834 6.589 23.78.7 2.62-.321 4.298-2.587 4.857-2.301.567-3.929-.518-4.71-3.338-1.796-6.486-3.523-12.991-5.271-19.49-.105-.39-.072-.844-.875-.987-.04.772-.114 1.531-.114 2.29-.006 18.26-.004 36.519-.006 54.778 0 3.15-.008 3.177-3.295 3.153-6.248-.046-5.459.768-5.48-5.505-.032-9.005-.008-18.01-.01-27.014 0-.667.054-1.344-.045-1.997-.104-.688-.514-1.336-1.268-1.342-.823-.007-1.46.519-1.53 1.372-.09 1.078-.055 2.165-.055 3.249-.003 9.504-.047 19.01.034 28.514.017 2.038-.606 2.82-2.755 2.764-7.058-.188-6.037.881-6.054-5.976-.042-17.342-.013-34.684-.013-52.027v-2.34l-.63-.074" fill="#150F26" mask="url(#icon/active/icon_model_stand_black_b)" /></g><g transform="translate(56.874 24)"><mask id="icon/active/icon_model_stand_black_d" fill="#fff"><use xlink:href="#icon/active/icon_model_stand_black_c" /></mask><path d="M16.247 7.89c-.012 4.272-3.702 7.848-8.107 7.858-4.382.01-8.113-3.582-8.14-7.837C-.028 3.483 3.65-.04 8.258 0c4.473.037 8.002 3.522 7.99 7.89" fill="#161026" mask="url(#icon/active/icon_model_stand_black_d)" /></g></g></symbol><symbol   viewBox="0 0 129 140" id="icon/active/icon_model_stand_white"><defs><path id="icon/active/icon_model_stand_white_a" d="M0 0h48v75.063H0z" /><path id="icon/active/icon_model_stand_white_c" d="M0 0h16.247v15.748H0z" /></defs><g fill-rule="evenodd"><g transform="translate(41 40.937)"><mask id="icon/active/icon_model_stand_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_stand_white_a" /></mask><path d="M13.12 14.644c-1.29 4.74-2.574 9.482-3.872 14.22-.656 2.395-1.236 4.817-2.033 7.166-.745 2.194-2.517 3.127-4.48 2.558C.454 37.926-.41 36.249.182 34.143c2.334-8.305 3.985-16.805 6.98-24.916C9.086 4.012 13.215 1.005 18.765.413c5.01-.534 10.1-.917 14.932 1.287 3.737 1.705 6.368 4.426 7.497 8.277 2.313 7.894 4.467 15.834 6.589 23.78.7 2.62-.321 4.298-2.587 4.857-2.301.567-3.929-.518-4.71-3.338-1.796-6.486-3.523-12.991-5.271-19.49-.105-.39-.072-.844-.875-.987-.04.772-.114 1.531-.114 2.29-.006 18.26-.004 36.519-.006 54.778 0 3.15-.008 3.177-3.295 3.153-6.248-.046-5.459.768-5.48-5.505-.032-9.005-.008-18.01-.01-27.014 0-.667.054-1.344-.045-1.997-.104-.688-.514-1.336-1.268-1.342-.823-.007-1.46.519-1.53 1.372-.09 1.078-.055 2.165-.055 3.249-.003 9.504-.047 19.01.034 28.514.017 2.038-.606 2.82-2.755 2.764-7.058-.188-6.037.881-6.054-5.976-.042-17.342-.013-34.684-.013-52.027v-2.34l-.63-.074" mask="url(#icon/active/icon_model_stand_white_b)" /></g><g transform="translate(56.874 24)"><mask id="icon/active/icon_model_stand_white_d" fill="#fff"><use xlink:href="#icon/active/icon_model_stand_white_c" /></mask><path d="M16.247 7.89c-.012 4.272-3.702 7.848-8.107 7.858-4.382.01-8.113-3.582-8.14-7.837C-.028 3.483 3.65-.04 8.258 0c4.473.037 8.002 3.522 7.99 7.89" mask="url(#icon/active/icon_model_stand_white_d)" /></g></g></symbol><symbol  viewBox="0 0 114 124" id="icon/active/icon_model_step_white"><g fill-rule="evenodd"><path d="M62.608 36.188a8.094 8.094 0 1 0 0-16.189 8.094 8.094 0 0 0 0 16.19M71.3 67.181v-.001c-.243-4.614-.97-5.829-.728-10.683-.242-2.914.728-14.084-.728-16.026-1.458-1.7-2.914-2.185-3.399-2.185l-4.856-.242c-4.857 0-8.013 2.184-8.498 6.068v15.635c0 1.01-.758 2.163-1.534 2.701.01.678.216 1.097.102 1.762.21-1.218-.083 1.208-.09 1.468-.028.942-.004 1.887.038 2.829.052 1.175.257 2.034.357 3.206l4.653.145a1.864 1.864 0 0 1 1.924 1.75l.62 10.327v19.423c.486 2.43 2.67 3.642 5.585 3.642 2.912 0 4.127-2.185 4.127-4.37l-.243-17.968c.73-6.313 1.214-9.955 1.7-10.925.485-1.457 1.214-1.942.97-6.556" /><path d="M57.714 70.276c.336-2.695.494-5.431.537-8.182-.008 0-.015.002-.023.003l-11.02.58c-3.886 0-5.829 1.943-6.314 4.855l-.243 20.397c.073.99.485 1.942 1.7 2.914 1.457.728 2.273 1.008 3.642.97 2.551-.072 4.333-2.437 4.37-4.128V73.36c0-.485 1.457-1.7 2.186-1.7l5.152-.18c-.036-.398-.037-.8.013-1.204" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_unlock_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_unlock_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_unlock_black_a)" fill="none" fill-rule="evenodd"><path d="M90 36c9.926 0 18 8.166 18 18.201v9.14a3.66 3.66 0 1 1-7.32 0V54.2c0-5.954-4.79-10.8-10.68-10.8s-10.68 4.846-10.68 10.8V67H72V54.201C72 44.166 80.075 36 90 36Z" fill="#090909" fill-rule="nonzero" /><path d="M84.39 67H43.61C40.511 67 38 69.582 38 72.766v27.47c0 3.184 2.512 5.764 5.61 5.764h40.78c3.098 0 5.61-2.582 5.61-5.764v-27.47C90 69.582 87.488 67 84.39 67Z" stroke="currentColor" stroke-width="6" /><path d="M75.31 89.03h-5.562c-.956 2.291-3.168 3.896-5.747 3.896-2.58 0-4.793-1.605-5.75-3.896h-5.559v-5.06h5.56c.956-2.29 3.17-3.895 5.749-3.895 2.579 0 4.79 1.605 5.747 3.895h5.561v5.06Z" fill="#090909" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_unlock_white"><g fill-rule="nonzero"><path d="M90 36c9.926 0 18 8.166 18 18.201v9.14a3.66 3.66 0 1 1-7.32 0V54.2c0-5.954-4.79-10.8-10.68-10.8s-10.68 4.846-10.68 10.8V67H72V54.201C72 44.166 80.075 36 90 36Z" /><path d="M84.39 67H43.61C40.511 67 38 69.582 38 72.766v27.47c0 3.184 2.512 5.764 5.61 5.764h40.78c3.098 0 5.61-2.582 5.61-5.764v-27.47C90 69.582 87.488 67 84.39 67Z" /><path d="M75.31 89.03h-5.562c-.956 2.291-3.168 3.896-5.747 3.896-2.58 0-4.793-1.605-5.75-3.896h-5.559v-5.06h5.56c.956-2.29 3.17-3.895 5.749-3.895 2.579 0 4.79 1.605 5.747 3.895h5.561v5.06Z" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_walk_black"><defs><filter color-interpolation-filters="auto" id="icon/active/icon_model_walk_black_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/active/icon_model_walk_black_a)" fill="none" fill-rule="evenodd"><g fill-rule="nonzero"><path d="M59.749 32.81a7.223 7.223 0 1 0 14.446 0 7.223 7.223 0 0 0-14.446 0Z" fill="#4C5DC2" /><path d="M41.39 77.106c1.338-8.501 2.807-14.197 4.406-17.087 5.224-9.445 10.637-13.674 12.28-13.874 3.31-.403 7.247-.483 9.222 0 2.291.56 3.862 1.736 4.714 3.528.792 7.782 1.99 12.639 3.596 14.57 4.447 5.346 11.118 7.134 13.033 7.134 0 1.874-.969 4.956-.969 4.956-2.841 0-12.56 0-17.82-8.277-.295-.465-.697 2.294-1.207 8.277 6.813 6.471 11.216 11.722 13.208 15.752 1.992 4.03 2.986 11.72 2.981 23.069h-6.69c-.467-6.2-1.312-10.985-2.536-14.354-1.223-3.37-4.821-7.776-10.794-13.221-2.282 5.299-4.836 10.297-7.662 14.994-2.826 4.698-6.46 8.891-10.9 12.581h-6.728c5.58-7.81 9.54-13.878 11.88-18.204 2.341-4.326 4.006-8.631 4.993-12.917V57.761c-1.761.51-3.426 2.328-4.992 5.452-.975 1.944-2.692 6.575-5.153 13.893h-4.863Z" fill="#495ABF" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/active/icon_model_walk_white"><g fill-rule="nonzero"><path d="M59.749 32.81a7.223 7.223 0 1 0 14.446 0 7.223 7.223 0 0 0-14.446 0ZM41.39 77.106c1.338-8.501 2.807-14.197 4.406-17.087 5.224-9.445 10.637-13.674 12.28-13.874 3.31-.403 7.247-.483 9.222 0 2.291.56 3.862 1.736 4.714 3.528.792 7.782 1.99 12.639 3.596 14.57 4.447 5.346 11.118 7.134 13.033 7.134 0 1.874-.969 4.956-.969 4.956-2.841 0-12.56 0-17.82-8.277-.295-.465-.697 2.294-1.207 8.277 6.813 6.471 11.216 11.722 13.208 15.752 1.992 4.03 2.986 11.72 2.981 23.069h-6.69c-.467-6.2-1.312-10.985-2.536-14.354-1.223-3.37-4.821-7.776-10.794-13.221-2.282 5.299-4.836 10.297-7.662 14.994-2.826 4.698-6.46 8.891-10.9 12.581h-6.728c5.58-7.81 9.54-13.878 11.88-18.204 2.341-4.326 4.006-8.631 4.993-12.917V57.761c-1.761.51-3.426 2.328-4.992 5.452-.975 1.944-2.692 6.575-5.153 13.893h-4.863Z" /></g></symbol><symbol   viewBox="0 0 114 123" id="icon/active/icon_model_zeroTorque_white"><defs><path id="icon/active/icon_model_zeroTorque_white_a" d="M0 0h61.41v46.686H0z" /></defs><g fill-rule="evenodd"><path d="M73.228 84.547H40.06a3.23 3.23 0 0 0-2.883 1.58 3.228 3.228 0 0 0 2.883 4.87h33.168a3.227 3.227 0 1 0 0-6.45M56.617 42.525a5.403 5.403 0 0 0-2.82.784 5.921 5.921 0 0 0-2.09 2.09 5.403 5.403 0 0 0-.784 2.82v15.293c0 1.005.261 1.958.784 2.82a5.932 5.932 0 0 0 2.09 2.09 5.411 5.411 0 0 0 2.82.783c1.593 0 2.938-.56 4.048-1.67 1.097-1.124 1.66-2.456 1.66-4.023V48.206c-.014-1.554-.563-2.899-1.66-4.009-1.097-1.124-2.455-1.672-4.048-1.672" /><g transform="translate(26 33)"><mask id="icon/active/icon_model_zeroTorque_white_b" fill="#fff"><use xlink:href="#icon/active/icon_model_zeroTorque_white_a" /></mask><path d="M41.966 30.003c0 2.05-.509 3.944-1.515 5.668-1.005 1.724-2.39 3.095-4.14 4.113a11.222 11.222 0 0 1-5.694 1.515c-2.05 0-3.944-.51-5.667-1.515a11.285 11.285 0 0 1-4.114-4.113c-1.006-1.724-1.515-3.618-1.515-5.668V15.716c0-2.05.509-3.944 1.515-5.668a11.295 11.295 0 0 1 4.114-4.114c1.736-1.018 3.617-1.515 5.667-1.515 2.051 0 3.957.51 5.694 1.515a11.178 11.178 0 0 1 4.14 4.114 11.096 11.096 0 0 1 1.515 5.668v14.287ZM58.182 0H3.228A3.228 3.228 0 0 0 0 3.228v40.23a3.227 3.227 0 0 0 3.228 3.228h54.954c.856 0 1.677-.34 2.282-.946a3.224 3.224 0 0 0 .946-2.282V3.228A3.23 3.23 0 0 0 58.182 0Z" mask="url(#icon/active/icon_model_zeroTorque_white_b)" /></g></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/拍照打卡"><path d="m45.88 46.393.681-5.452A3.357 3.357 0 0 1 49.893 38h14.214a3.357 3.357 0 0 1 3.332 2.94l.682 5.453H80.5a3.357 3.357 0 0 1 3.357 3.357v31.893A3.357 3.357 0 0 1 80.5 85h-47a3.357 3.357 0 0 1-3.357-3.357V49.75a3.357 3.357 0 0 1 3.357-3.357h12.38ZM57 77.446c6.49 0 11.75-5.26 11.75-11.75 0-6.489-5.26-11.75-11.75-11.75s-11.75 5.261-11.75 11.75c0 6.49 5.26 11.75 11.75 11.75Zm0-3.357a8.393 8.393 0 1 1 0-16.785 8.393 8.393 0 0 1 0 16.785ZM37.176 44.995a1.679 1.679 0 1 1 0-3.358h3.387a1.679 1.679 0 1 1 0 3.358h-3.387Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 114 123" id="icon/active/拥抱"><g fill="currentColor" fill-rule="evenodd"><path d="M79.291 49.048c1.654-6.923-2.326-13.543-8.89-14.785-6.563-1.241-13.225 3.365-14.879 10.29-1.652 6.923 2.327 13.543 8.892 14.785 6.563 1.241 13.225-3.365 14.877-10.29" /><path d="M65.169 82.515c-.38 0-.746-.038-1.097-.107v7.505c0 .206-.072.323-1.557.323H33.541c-1.487 0-1.56-.117-1.56-.323V89.7c0-.012 0-.064-.004-.154-.129-3.505-.376-15.574 1.828-23.746.684-2.535 5.599-4.57 9.876-5.389l.638-.122v-3.43l-.337-.214c-2.823-1.784-4.894-4.677-5.684-7.94-.76-3.142-.304-6.311 1.286-8.922 1.565-2.57 4.045-4.288 6.982-4.837a10.802 10.802 0 0 1 1.985-.183c5.427 0 10.542 4.052 11.933 9.798 1.171 4.845-.568 9.635-4.428 12.205l-.321.213v3.22l.71.076c5.624.608 7.627 3.168 7.627 5.361v4.468c.062-.02.126-.04.194-.058a5.869 5.869 0 0 1 1.426-.165v-4.245c0-1.625-.802-3.167-2.258-4.343-1.453-1.174-3.544-1.978-6.08-2.342V57.68c4.135-2.947 5.983-8.167 4.715-13.415-1.746-7.213-8.853-12.017-15.84-10.712-3.412.637-6.28 2.611-8.073 5.558-1.77 2.907-2.282 6.42-1.442 9.891.841 3.474 3.012 6.58 5.985 8.58v1.567c-4.43.949-9.604 3.11-10.47 6.323-2.25 8.343-2.001 20.57-1.871 24.12l.004.32c0 1.747 2.068 1.747 3.179 1.747h28.974c1.11 0 3.177 0 3.177-1.747v-7.425a5.287 5.287 0 0 1-.523.027" /><path d="M51.745 74.8c.052-.001.103-.007.154-.007h4.84c3.229-6.62 6.421-15.758 3.632-15.036-2.358.61-6.193.875-10.616-.612-4.668-1.57-8.96-3.114-10.634-3.633-1.523-.473-5.41-.053-6.275 1.358-.866 1.412-1.355 3.981.786 5.862 2.142 1.882 13.425 5.594 16.614 7.263.957.501 1.333 2.437 1.499 4.805" /><path d="M83.795 66.036c-.25-.938-.936-1.79-1.893-2.544-3.443 1.492-10.912 2.248-10.912-1.897 0-1.689.91-2.96 2.313-3.972v-2.328l-13.036 2.217v2.381c-5.794.635-8.338 3.39-8.338 6.143v9.028c2.044.137 4.433-.017 6.894-1.006 4.55-1.826 8.482-4.377 10.114-4.987 1.487-.556 4.628-1.094 6.358 1.008 1.07 1.297 1.633 3.9-.372 5.894-2.008 1.996-9.895 6.279-15.73 7.534-2.138.459-4.77.7-7.264.647v6.458c0 1.048 1.192 1.048 2.368 1.048H83.27c1.175 0 2.369 0 2.369-1.048v-.215c0-.208.676-14.887-1.845-24.36" /><path d="M70.99 61.585c0-3.128 3.103-4.833 6.73-6.084 1.503-.519 5.409-.053 6.275 1.359.865 1.411 1.355 3.981-.787 5.862-2.142 1.881-12.218 3.676-12.218-1.137ZM48.025 74.479c2.396.477 6.487 1.3 10.798-.431 4.549-1.827 8.482-4.377 10.115-4.988 1.486-.556 4.627-1.094 6.357 1.008 1.07 1.298 1.633 3.9-.372 5.895-2.008 1.996-9.895 6.279-15.73 7.533-4.949 1.064-12.541.961-14.964-1.27-3.782-3.485.506-8.404 3.796-7.747Z" stroke="currentColor" stroke-width="1.62" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/拳击"><g fill-rule="nonzero" stroke-width="0"><path d="M53.559 30.606a5.606 5.606 0 1 0 11.212.002 5.606 5.606 0 0 0-11.212-.002ZM82.657 36.212a4.538 4.538 0 0 0-4.096 2.58H51.483c-2.117.049-3.56.92-4.123 1.988L35.82 60.238l.03 18.657-8.898 14.8c-1.038 3.471 3.767 5.103 5.25 3.768l10.055-16.67V67.565c0-.801 1.266-1.73 2.046-.86l12.643 12.843 4.976 17.44c1.058 1.929 6.041 1.004 5.962-1.957L62.813 75.81 50.367 63.028a1.386 1.386 0 0 1-.215-1.647l3.63-6.45a1.389 1.389 0 0 1 1.211-.708h4.916a4.36 4.36 0 1 0-.28-4.396h-1.796a.515.515 0 0 1-.447-.77l3.379-5.91H78.8a4.538 4.538 0 1 0 3.856-6.934Z" /></g></symbol><symbol  viewBox="0 0 114 123" id="icon/active/飞吻比心"><g fill-rule="evenodd"><path d="M50.006 64.179a4.458 4.458 0 0 1 7.654-3.109 4.458 4.458 0 0 1 7.654 3.109 4.437 4.437 0 0 1-1.802 3.58l-5.046 4.157a1.53 1.53 0 0 1-1.983-.031l-4.915-4.317a4.447 4.447 0 0 1-1.562-3.39" /><path d="M10.614 71.044S22.346 60.16 27.13 54.565l2.933-3.782s.887-1.35 1.929-1.775c0 0 7.178-3.936 9.995-6.058 0 0 1.544-1.544 3.705-.695l5.017 2.277s1.968 1.273 2.43 2.353l2.818 4.709 1.253 1.312s1.487-1.196 2.336-2.663l2.006-3.589s1.159-1.775 2.74-2.393l4.284-1.736s2.238-1.158 3.898.231c0 0 6.715 4.554 9.107 5.789 0 0 2.123.772 2.779 2.084 0 0 13.16 15.552 19.025 20.415l-7.64 9.03s-1.197-1.814-4.323-1.737c0 0-6.715.617-12.04-1.12 0 0-1.853-.616-3.82-1.504 0 0-2.394-1.042-8.298.579l-8.413 3.782s-1.196.077-1.273-1.428c0 0-.116-4.63 5.518-6.83 0 0 4.09-1.583 6.484-2.355 0 0 7.833-1.99 6.984-8.424 0 0-.23-1.65-1.99-4.485 0 0-2.585-5.17-7.524-4.399 0 0-2.49.348-3.3 2.49 0 0-2.12 4.283-5.477 3.473 0 0-1.544.424-2.084-.194 0 0-1.158 1.351-3.32-1.273 0 0-.997-.705-1.654-2.28a3.129 3.129 0 0 0-2.062-1.803c-.779-.212-1.853-.356-3.295-.27-.375.021-.737.14-1.061.332-1.404.83-5.17 3.54-6.94 9.5 0 0-.54 2.934 3.242 5.404 0 0 2.972 1.544 7.333 3.01 0 0 7.139 1.853 8.567 6.097 0 0 1.08 3.976-1.235 3.436 0 0-6.637-3.783-12.04-4.517 0 0-3.666-.54-5.596.618 0 0-4.515 2.277-11.461 2.2 0 0-6.947-.849-8.452 2.624l-7.602-9.956Z" /></g></symbol><symbol  viewBox="0 0 30 55" id="icon/comment/btn_back"><defs><filter color-interpolation-filters="auto" id="icon/comment/btn_back_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/comment/btn_back_a)" fill="none" fill-rule="evenodd"><path d="M27.736 55c.58 0 1.159-.22 1.6-.657a2.232 2.232 0 0 0 0-3.175L5.467 27.5l23.87-23.668a2.232 2.232 0 0 0 0-3.174 2.278 2.278 0 0 0-3.201 0L.663 25.913a2.232 2.232 0 0 0 0 3.174l25.472 25.255a2.267 2.267 0 0 0 1.6.658Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 100 100" id="icon/operation/icon_1"><path d="M41.982 63.07c-.408.52-.833 1.172-1.275 1.954a56.176 56.176 0 0 0-1.48 2.835c-1.156 2.15-2.04 3.975-2.652 5.473-.612 1.5-1.292 2.688-2.04 3.568-.748.88-1.735 1.515-2.959 1.906-1.224.39-3.026.586-5.407.586H5.664c-1.769 0-3.146-.619-4.132-1.857-.986-1.238-1.496-2.622-1.53-4.154-.034-1.531.425-2.916 1.377-4.154s2.482-1.857 4.59-1.857c.953 0 2.058-.016 3.316-.049 1.259-.032 2.568-.049 3.928-.049 1.36 0 2.72-.016 4.08-.049 1.361-.032 2.62-.048 3.775-.048 1.225 0 2.313-.538 3.265-1.613s1.802-2.379 2.55-3.91a62.311 62.311 0 0 0 2.04-4.643c.613-1.564 1.191-2.834 1.735-3.812.204-.39.425-.782.663-1.173.238-.39.493-.814.765-1.27 1.293.325 2.585.847 3.877 1.564 1.292.716 2.414 1.726 3.367 3.03.884 1.303 1.513 2.622 1.887 3.958.374 1.336.629 2.59.765 3.763Zm1.53 5.864a160.877 160.877 0 0 1 4.183 5.376c.476.651.918 1.303 1.326 1.955.408.651.714 1.221.918 1.71.204.489.29.88.255 1.173-.034.293-.255.44-.663.44h-3.06c-1.224 0-2.415-.033-3.57-.098-1.361 0-2.755-.032-4.184-.098l4.795-10.458ZM87.09 23c1.793 0 3.467.325 5.02.974a13.225 13.225 0 0 1 4.095 2.663 12.525 12.525 0 0 1 2.78 3.951c.677 1.508 1.016 3.121 1.016 4.84 0 1.718-.339 3.33-1.016 4.839a12.525 12.525 0 0 1-2.78 3.951 13.225 13.225 0 0 1-4.094 2.664c-1.554.649-3.228.973-5.021.973-1.794 0-3.477-.324-5.051-.973a13.134 13.134 0 0 1-4.125-2.664 12.525 12.525 0 0 1-2.78-3.951c-.677-1.508-1.015-3.121-1.015-4.84 0-1.718.338-3.33 1.016-4.839a12.525 12.525 0 0 1 2.78-3.951 13.134 13.134 0 0 1 4.124-2.663c1.574-.65 3.257-.974 5.05-.974ZM69.017 40.882c.816 1.368 2.074 3.046 3.774 5.033 1.7 1.988 3.571 4.154 5.611 6.5a697.273 697.273 0 0 1 6.326 7.38 188.614 188.614 0 0 1 6.019 7.477c1.836 2.476 2.499 4.708 1.989 6.696-.51 1.987-1.632 3.518-3.367 4.594-1.734 1.075-3.808 1.547-6.223 1.417-2.414-.13-4.608-1.075-6.58-2.835-1.972-1.76-3.57-3.486-4.795-5.18a90.423 90.423 0 0 1-3.162-4.643 537.8 537.8 0 0 1-2.296-3.665c-.646-1.043-1.41-1.825-2.295-2.346-.816-.521-1.275-.978-1.377-1.368-.102-.391-.306-.685-.612-.88-.306-.196-.953-.293-1.939-.293-.986 0-2.84.13-5.56.39-.816.13-1.564.212-2.244.245-.68.033-1.292.081-1.836.147l-9.08-18.474a24.515 24.515 0 0 1 5.662-3.128 16.86 16.86 0 0 1 6.172-1.173c2.38 0 4.387-.049 6.02-.146 1.631-.098 3.026-.05 4.182.146 1.156.196 2.16.587 3.01 1.173.85.587 1.717 1.564 2.6 2.933Z" fill="#FFF" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 100 100" id="icon/operation/icon_2"><g fill="#FFF" fill-rule="nonzero" stroke-width="0"><path d="M55.555 8.415c-.005 3.409 2.07 6.485 5.259 7.794a8.61 8.61 0 0 0 9.302-1.82 8.351 8.351 0 0 0 1.855-9.184C70.651 2.055 67.54 0 64.087 0c-4.707 0-8.525 3.765-8.532 8.415Zm34.266 40.183a23.967 23.967 0 0 1-11.998-7.58c-1.75-2.171-3.092-7.58-3.986-16.191a1.08 1.08 0 0 0-.075-.368 7.32 7.32 0 0 0-5.179-3.79 33.947 33.947 0 0 0-10.283 0 3.295 3.295 0 0 0-.373.122h-.136c-.223.087-.439.19-.646.307-1.813.944-6.582 4.182-12.308 14.192a46.45 46.45 0 0 0-5.13 18.153v1.092a2.713 2.713 0 0 0 2.659 2.085 2.784 2.784 0 0 0 2.484-1.582c1.428-3.925 4.67-12.426 5.638-14.965.187-.494.474-.945.845-1.324a33.138 33.138 0 0 1 4.967-4.122v28.58a.327.327 0 0 1 0 .184 57.87 57.87 0 0 1-5.514 14.425c-2.198 4.122-6.408 9.408-11.177 16.326A4.605 4.605 0 0 0 39 96.387c.145.884.541 1.71 1.143 2.38a3.988 3.988 0 0 0 3.117 1.226 3.565 3.565 0 0 0 2.447-.944c.074 0 .111-.11.186-.184 4.769-4.048 8.308-9.641 11.364-14.72a145.91 145.91 0 0 0 8.16-15.945.726.726 0 0 1 1.155-.22c6.217 5.788 9.98 10.503 11.289 14.142a56.911 56.911 0 0 1 2.608 13.357c.058 1.6 1.274 2.927 2.881 3.14h1.602c1.853-.167 3.316-1.627 3.465-3.458-.149-11.114-1.59-18.67-3.639-22.828-2.16-4.49-6.95-10.303-14.37-17.442a.768.768 0 0 1-.26-.663c.522-6.476.969-9.42 1.304-8.905 4.77 7.544 12.817 8.98 17.387 9.237 1.47.087 2.783-.898 3.093-2.319v-.11c.333-1.54-.585-3.076-2.111-3.533Z" /><path d="M18.782 77h20.436C41.739 77 43 78.167 43 80.5S41.74 84 39.218 84H18.782C16.261 84 15 82.833 15 80.5s1.26-3.5 3.782-3.5ZM11.782 86h20.436C34.739 86 36 87.167 36 89.5S34.74 93 32.218 93H11.782C9.261 93 8 91.833 8 89.5S9.26 86 11.782 86Z" /></g></symbol><symbol  viewBox="0 0 100 100" id="icon/operation/icon_3"><g fill="#FFF" fill-rule="nonzero" stroke-width="0"><path d="M46 8a8 8 0 1 0 16 0 8 8 0 0 0-16 0ZM25.089 58.3c1.5-9.319 3.144-15.561 4.934-18.73 5.85-10.35 11.912-14.986 13.751-15.205 3.706-.441 8.115-.53 10.327 0 2.565.614 4.325 1.903 5.278 3.867.886 8.53 2.229 13.852 4.027 15.968 4.98 5.86 12.449 7.82 14.594 7.82 0 2.054-1.085 5.432-1.085 5.432-3.182 0-14.065 0-19.954-9.072-.33-.51-.782 2.514-1.352 9.072 7.63 7.092 12.56 12.847 14.79 17.264 2.23 4.417 3.343 12.845 3.338 25.284h-7.492c-.522-6.796-1.468-12.04-2.839-15.733-1.37-3.692-5.4-8.522-12.087-14.49-2.555 5.808-5.415 11.286-8.58 16.434-3.165 5.149-7.233 9.745-12.205 13.789H23c6.248-8.56 10.683-15.21 13.304-19.951 2.62-4.742 4.484-9.461 5.59-14.158V37.097c-1.972.56-3.836 2.551-5.59 5.975-1.091 2.13-3.015 7.206-5.77 15.227h-5.445Z" /></g></symbol><symbol  viewBox="0 0 100 100" id="icon/operation/icon_4"><g fill="#FFF" fill-rule="nonzero" stroke-width="0"><path d="M59 11a8 8 0 1 0 16 0 8 8 0 0 0-16 0Z" /><path d="M27.535 33.015c4.63-5.722 8.46-8.582 11.49-8.582h12.37C47.05 36.11 43.049 44.019 39.388 48.159c-5.49 6.21-8.265 9.113-17.351 9.113-6.058 0-11.358-3.038-15.901-9.113L3 52.615c6.873 8.297 13.761 13.013 20.664 14.147 11.465 1.884 17.686-3.148 23.36-7.212 4.544 2.278 17.886 6.589 16.748 15.639-.758 6.033-2.887 12.97-6.386 20.811h7.811c4.11-6.292 6.92-13.994 8.435-23.107 1.514-9.112-4.365-17.1-17.637-23.962l8.614-10.907c2.697 7.28 6.317 11.68 10.86 13.198 4.543 1.52 11.72-.261 21.531-5.341l-2.272-4.556c-7.768 1.957-13.166 2.176-16.195.657-4.543-2.278-3.391-8.19-6.848-14.18-3.816-6.614-6.488-9.198-10.629-11.668-4.142-2.47-20.51-3.617-27.348 1.19-4.558 3.205-8.03 7.722-10.418 13.551l4.245 2.14Z" /></g></symbol><symbol  viewBox="0 0 100 100" id="icon/operation/icon_5"><g fill="#FFF" fill-rule="nonzero" stroke-width="0"><path d="M42 6a6 6 0 1 0 12 0 6 6 0 0 0-12 0ZM30.74 51.018l3.082-3.882c-2.055-4.48-3.082-7.543-3.082-9.188 0-2.467 1.438-8.336 5.264-9.572v16.849L30.74 87h6.38l8.478-31.462 9.515.776c2.743.376 4.115 1.311 4.115 2.806-.365 1.922-1.929 6.971-4.691 15.15h6.825l5.819-13.043c2.42-6.553 1.13-11.25-3.87-14.092-5-2.842-9.307-3.953-12.918-3.335l.805-10.098c2.631 3.692 5.308 5.95 8.03 6.777 2.722.825 6.794 1.74 12.218 2.745L73 39.384c-8.548-3.493-13.36-6.312-14.435-8.457-1.613-3.218-3.452-9.882-3.452-10.933 0-1.052-8.148-5.924-17.992-3.153-6.017 1.694-8.444 5.201-9.83 7.184-1.387 1.983-6.04 6.278-3.59 16.453 1.43 4.438 3.777 7.951 7.04 10.54h-.001Z" /><path d="M90 55.814H70.211V79.07H49.69V100H31v-5.814h13.192V73.257h20.523V50H90z" /></g></symbol><symbol  viewBox="0 0 47 72" id="icon/operation/icon_active_menu"><defs><filter color-interpolation-filters="auto" id="icon/operation/icon_active_menu_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/operation/icon_active_menu_a)" fill="none" fill-rule="evenodd"><path d="M19.192 12.198c1.698 0 3.131-.594 4.308-1.776 1.177-1.18 1.77-2.62 1.77-4.323 0-1.695-.593-3.134-1.77-4.323C22.323.595 20.89 0 19.192 0c-1.69 0-3.13.595-4.307 1.776-1.185 1.181-1.778 2.628-1.77 4.323 0 1.704.593 3.142 1.77 4.323 1.177 1.182 2.618 1.776 4.307 1.776Zm24.1 12.89h-8.398l-4.332-6.461c-2.226-3.287-4.868-4.926-7.935-4.926h-9.2c-2.522 0-4.5.763-5.949 2.274-1.44 1.519-2.161 3.552-2.161 6.091v9.538L.737 37.6C.24 38.266 0 38.893 0 39.504c0 1.639 1.065 2.45 3.203 2.45.977 0 1.89-.675 2.746-2.033l3.115-4.901c1.28-1.23 1.761-2.813 1.465-4.717V22.62h1.225V66.11c0 2.177.08 3.503.264 3.986.48 1.27 1.53 1.904 3.147 1.904 1.561 0 2.578-.579 3.059-1.728.232-.659.352-1.96.352-3.897V41.962h1.641V66.73c0 3.511 1.081 5.263 3.235 5.263 1.505 0 2.49-.546 2.97-1.631.233-.547.353-1.72.353-3.536V22.548l3.339 5.231c1.145 1.752 2.226 2.628 3.25 2.628h9.849c2.522 0 3.787-.852 3.787-2.563 0-1.84-1.241-2.757-3.707-2.756Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 22 21" id="icon/operation/icon_arrow"><path d="M9.686 10.5 20.063 0 22 1.96l-8.44 8.54L22 19.04 20.063 21 9.686 10.5ZM0 10.5 10.239 0l2.075 1.96-8.44 8.54 8.44 8.54L10.377 21 0 10.5Z" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 46 45" id="icon/operation/icon_model_menu"><defs><filter color-interpolation-filters="auto" id="icon/operation/icon_model_menu_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/operation/icon_model_menu_a)" fill="none" fill-rule="evenodd"><path d="M16.707 20.354H4.099C1.834 20.354 0 18.346 0 15.864V7.485C0 3.351 3.06 0 6.834 0h9.873c2.266 0 4.1 2.009 4.1 4.49v11.374c.005 2.482-1.834 4.49-4.1 4.49Zm0 24.646H6.834C3.06 45 0 41.649 0 37.515v-8.38c0-2.48 1.834-4.49 4.1-4.49h12.607c2.266 0 4.1 2.01 4.1 4.49V40.51c.005 2.481-1.834 4.49-4.1 4.49Zm22.459 0h-9.873c-2.266 0-4.1-2.009-4.1-4.49V29.136c0-2.482 1.834-4.49 4.1-4.49h12.608c2.265 0 4.099 2.008 4.099 4.49v8.379C46.005 41.649 42.94 45 39.166 45Z" fill="#221714" fill-rule="nonzero" /><path d="M39.166 1c1.601 0 3.046.72 4.094 1.867C44.339 4.049 45 5.683 45 7.485v8.381c.002.974-.352 1.859-.935 2.498-.554.606-1.317.99-2.164.99H29.293c-.847 0-1.608-.383-2.16-.988-.585-.64-.94-1.526-.94-2.502V4.49c0-.975.355-1.861.94-2.501.552-.606 1.313-.989 2.16-.989Z" stroke="currentColor" stroke-width="2" /></g></symbol><symbol  viewBox="0 0 97 97" id="icon/operation/icon_photo"><defs><linearGradient x1="100%" y1="26.07%" x2="13.21%" y2="87.051%" id="icon/operation/icon_photo_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><path d="M40.401 0c2.302 0 4.336 1.487 5.016 3.666l1.638 5.253h4.695c4.556 0 8.25 3.66 8.25 8.176v29.73C60 51.34 56.306 55 51.75 55H8.25C3.694 55 0 51.34 0 46.824v-29.73C0 12.58 3.694 8.92 8.25 8.92h4.695l1.638-5.253C15.263 1.486 17.297 0 19.599 0h20.802ZM30 19.324c-6.213 0-11.25 4.992-11.25 11.149 0 6.157 5.037 11.149 11.25 11.149s11.25-4.992 11.25-11.149c0-6.157-5.037-11.149-11.25-11.149Zm0 17.838c3.728 0 6.75-2.995 6.75-6.689s-3.022-6.69-6.75-6.69-6.75 2.996-6.75 6.69c0 3.694 3.022 6.69 6.75 6.69Z" transform="translate(19 21)" fill="url(#icon/operation/icon_photo_a)" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 97 97" id="icon/operation/icon_video"><defs><linearGradient x1="100%" y1="38.612%" x2="13.21%" y2="67.632%" id="icon/operation/icon_video_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient><linearGradient x1="76.446%" y1="21.522%" x2="30.541%" y2="94.094%" id="icon/operation/icon_video_b"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" fill="none"><path d="M62.023 6.987 54.62 10.32a1.062 1.062 0 0 1-1.494-.98V4.3c0-2.378-1.906-4.3-4.25-4.3H4.25C1.906 0 0 1.922 0 4.3v34.4C0 41.072 1.906 43 4.25 43h44.625c2.344 0 4.25-1.928 4.25-4.3v-5.032c0-.78.79-1.297 1.494-.981l7.404 3.326c2.81 1.263 5.977-.82 5.977-3.931V10.918c0-3.11-3.168-5.194-5.977-3.93Zm-28.56 17.308L22.61 30.637a3.097 3.097 0 0 1-1.587.437 3.209 3.209 0 0 1-3.194-3.232V15.159a3.213 3.213 0 0 1 3.194-3.232c.531 0 1.076.134 1.587.437l10.851 6.342c2.125 1.243 2.125 4.347 0 5.59Z" fill="url(#icon/operation/icon_video_a)" transform="translate(17 27)" /><path fill="url(#icon/operation/icon_video_b)" d="M30 21.504 22 27V16z" transform="translate(17 27)" /></g></symbol><symbol  viewBox="0 0 97 97" id="icon/operation/icon_video_active"><defs><linearGradient x1="100%" y1="38.612%" x2="13.21%" y2="67.632%" id="icon/operation/icon_video_active_a"><stop stop-color="#FF4B4B" offset="0%" /><stop stop-color="#FF4B4B" offset="100%" /></linearGradient><linearGradient x1="76.446%" y1="21.522%" x2="30.541%" y2="94.094%" id="icon/operation/icon_video_active_b"><stop stop-color="#FF4B4B" offset="0%" /><stop stop-color="#FF4B4B" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" fill="none"><path d="M62.023 6.987 54.62 10.32a1.062 1.062 0 0 1-1.494-.98V4.3c0-2.378-1.906-4.3-4.25-4.3H4.25C1.906 0 0 1.922 0 4.3v34.4C0 41.072 1.906 43 4.25 43h44.625c2.344 0 4.25-1.928 4.25-4.3v-5.032c0-.78.79-1.297 1.494-.981l7.404 3.326c2.81 1.263 5.977-.82 5.977-3.931V10.918c0-3.11-3.168-5.194-5.977-3.93Zm-28.56 17.308L22.61 30.637a3.097 3.097 0 0 1-1.587.437 3.209 3.209 0 0 1-3.194-3.232V15.159a3.213 3.213 0 0 1 3.194-3.232c.531 0 1.076.134 1.587.437l10.851 6.342c2.125 1.243 2.125 4.347 0 5.59Z" fill="url(#icon/operation/icon_video_active_a)" transform="translate(15 27)" /><path fill="url(#icon/operation/icon_video_active_b)" d="M31 22.504 23 28V17z" transform="translate(15 27)" /></g></symbol><symbol   viewBox="0 0 1237 296" id="icon/operation/opera_bar_bg"><defs><linearGradient x1="-3.729%" y1="39.565%" x2="100%" y2="40.286%" id="icon/operation/opera_bar_bg_b"><stop stop-color="#242431" stop-opacity=".436" offset="0%" /><stop stop-color="#23232F" offset="31.174%" /><stop stop-color="#1A1A27" offset="53.592%" /><stop stop-color="#232330" stop-opacity=".902" offset="77.295%" /><stop stop-color="#242430" stop-opacity=".337" offset="100%" /></linearGradient><linearGradient x1="2.458%" y1="26.223%" x2="101.051%" y2="26.223%" id="icon/operation/opera_bar_bg_d"><stop stop-color="#FFF" stop-opacity="0" offset="0%" /><stop stop-color="#FFF" offset="50.87%" /><stop stop-color="#FFF" stop-opacity="0" offset="100%" /></linearGradient><linearGradient x1="2.458%" y1="26.223%" x2="101.051%" y2="26.223%" id="icon/operation/opera_bar_bg_e"><stop stop-color="#FFF" stop-opacity="0" offset="0%" /><stop stop-color="#FFF" offset="50.87%" /><stop stop-color="#FFF" stop-opacity="0" offset="100%" /></linearGradient><ellipse id="icon/operation/opera_bar_bg_a" cx="645.747" cy="416.052" rx="645.747" ry="416.052" /><ellipse id="icon/operation/opera_bar_bg_c" cx="645.747" cy="416.052" rx="645.747" ry="416.052" /><filter x="-.3%" y="-.4%" width="100.5%" height="100.8%" filterUnits="objectBoundingBox" id="icon/operation/opera_bar_bg_f"><feGaussianBlur in="SourceGraphic"></feGaussianBlur></filter></defs><g transform="translate(-28.697 3.104)" fill="none" fill-rule="evenodd"><g opacity=".903"><use fill="url(#icon/operation/opera_bar_bg_b)" xlink:href="#icon/operation/opera_bar_bg_a" /><ellipse fill="#FFF" opacity=".25" cx="651.014" cy="634.702" rx="596.195" ry="393.871" /></g><mask id="icon/operation/opera_bar_bg_g" fill="#fff"><use xlink:href="#icon/operation/opera_bar_bg_c" /></mask><ellipse stroke="url(#icon/operation/opera_bar_bg_d)" stroke-width="2.889" cx="645.747" cy="416.052" rx="647.192" ry="417.497" /><ellipse stroke="url(#icon/operation/opera_bar_bg_e)" stroke-width="2.889" opacity=".276" filter="url(#icon/operation/opera_bar_bg_f)" mask="url(#icon/operation/opera_bar_bg_g)" cx="651.752" cy="599.519" rx="555.263" ry="358.267" /></g></symbol><symbol   viewBox="0 0 41 53" id="icon/programming/icon_light_off"><image width="40.241" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABsCAYAAAD5XOVGAAAABGdBTUEAALGOfPtRkwAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAUqADAAQAAAABAAAAbAAAAACBDYkPAAAXkElEQVR4Ae2d+3NWRZrHyYVASCBEAgl3BNQBUZFbEJ0RagDlGnAW3HEutbXW7M4/4Pyq/j5VU2VtlbU1W3uZcdca4qgMBIY7KMhFEVBAuZhBEJNAIBAugVzn8z2+59S59Pu+533fc5JslV3VdU7fnn76208/3f10n/cdMOB79z0C/QmBvP7AzIYNG0q7urrK8cPz8vIeh6fynp6eqvz8/IE8RxMuIP4W79d45vO8293dfWLgwIH1vN+8e/fujZdffvlWX7alT4Dcs2fP4La2tgqAmw4w0wFgHL4SUIoJFwoQAQZYPPIsHknrAdgexemJ68QrQxvP6zwv4k+RfrqgoODG8uXLW0Wnt1yvAQl4hffv3x/Z0dHxNA2eTwMn4otjaGgnNJsA9688T65cufI89fXEUI+HZOxAMmyLSktL5yIpP6bmaTSwlIbFXm+ile08j1P3vqFDhx5etGjRPU/rIwzE1iABWFJSIn33PODN4WkN2Qh5D02KfuuGhzM8t9+5c+fg+vXrb4cuHDJjLEBu3rx5BvXX4Gfi4xi+IZvnzWYDim7+4+rVqz8nHNmQjxRIANRsu5DJYBXDaSSMZkNfOu4+/ibFu6B3U3Dw7CFcxmsBvhxfhM9WyjXkDwDoWzU1NU285+yyaaix0k2bNv2AhLX42TR4sDGTObKN6K/xZ+kATQyXCwsLG1taWtpHjhzZc/Xq1Q67GOGBer99+3YpHTWc2XkS+SeB8VSiH8SXKD2MS3TMJer8PTP8sTBlUuXJGUgJytatWxfRsJeoqCpVZa60G7zX4w/TkBMAcwW9JSnJyiVWBMNYEUgXqyOlUsKCeof8G4YMGbKRyUijISuXE5AbN24cilT8lJoX4YeG4KAZ4HezkN5x6NChptdee607RJmMs7z//vvjkepnqWsuIE0JQaCdvIcGDx7870uWLLFUSYgynixZA/nee+8NLyoq+hWSWA2z6YayA+Bzzz3XSP7IlLynNb7Atm3bSpDSZ4heh083WiSNJwH0zVWrVl32kUobzApIgUiPrwCQF6hhULJaYEoTxC6U+oZjx441xiWByepXvFhgEhyT4FWgphryAvNL1M2/oTe/UfmwLmMgE8N5BRWsxg9LUZF69V2G8X6k8E6KfL2SRCfmz5kz5xEqexmviTGZywrMjIBkkV2MUl4CB5LEChMn9Lz03lGetaNGjToH886sa8rfm3GSToZ7OcP9n5C6hYTzk9RvgclI+l3Y5VHodZh6FGU8D4CWwYARROLltsBo7QsvvHAtCZN9Fg3v0s3XmeXfYIdzCV5/SZxJmITLw0ykv+D52zAMJ+uRQNnZs2c/BuHlVD4+kPhdRCc8beL1nf4IoptnLXPYvr5H3Ju0J9n+u4j2zEG/rpYQucub3tNmoKK8LVu2jIPoYghMMxEh7i7+DwyFt5nxmpPk6VfRAhNT3jaYehNv1OG0vRT/IuppvnBI1YC0QO7cuXMYSxxZbqohFshPnHq0Dr8HfdKnxtVUDTWlsQnowjJ1gLQ/4bXDCjgEqARfs3379pGBRFdEABhX2gCJNPpuBmDNJX6IOy3x3k4lW1gKbcLu12JI7/dRMq1hYd9KO2ph1rS7KqT9k9vb25/WDipZg1ICiV4cjTQ+ReGJfgIQ1xrxU4bzX59//vnr/vT/T2Eks43JZwvt2YU37baKmeWXAvjsZO1KCuQnn3wyEKIqOJOnRz8IRAhfJbpu7NixV5MR76t49XGmda9bt+4Obaqj7FemssSPwj+DVBp3cUmBvHz5sqRQm//hBsL3IXqguLj4i/60ThSfO3bsKGPTMM7Ac8oohKIH69JlwHyHjDLj+Z12cA8jlU/4ExQ2AilphKCMsw/7CwGghvQFHsekX/zpfRmWTudcaCk2gDAGlACrEgrcZ7Rts9oZyMAmhGijVBqBbGhoGAWQD0EoII2AeAN/EGbPGCrq0yiA0Ilkzb1797I21mI5v83kuYc2mmgklcoAkCAOjbxpTDJGaST9NMx+0h/2z+5ekw0A3n5JXEd5eblxXejOn+ydtvd0dnZeIX0v9ExS+QDYzNWoddMIAImRtojyU8kUMDtRiQ6NzvFsdBPp63cNaXZdskbpnPwmVnXTzBuaTZZybdDbDy0B6nHEDcKPa25u9myTA0CiIzScJ5LZM/MleucrKjiNicmkjD0V9lYAvvLmzp2r00odc8hsdoEZOCdDCU23pXJPot1OcwgLsypwetKJ5MUDJNYdHSxV4ie4MyXeBd45CFwypPVZlKw5NO5fYMCyM/KuowPTkMyIR0klQ1i7nsBGgzp0Nj9N1jCbqAdIHS6haCvJVGpnsJ/ENTEBne9P20DtNNBnP4NHd8dHstdXZzCh3qTNpnWlJp3RbC9H2Ph4gNTpHAmaZCSZHkcvfCPviezDgPQiu5GFsCBjiuMA4IYTyPEFidSkdZR2eyScOqT2yvHOhOwGMg9plLXDZCa7T898jVHXtCTIkd3sis+bN28MJX+Odzqd9tH2bk2IkbgjR450QE83NAI0iSthezwRvKy5xAFy2bJlRRTSglMM+l0L8Vf27dtn2tT788Yelm6iEb+gIs/MCf/tCENDVAwg9Zr9WwDtop8meMheOfqVV16xjDkOkJytaNkzHMkL7AqI17W55gRhP81eDWtIszX9IXw+5a8YHruIl200Moee1LXBC36CxGkdWd7a2mpNOA6Q6JshMKLFZsBURPxtfL+wNWKRkpH5JRri8O5q5O2KiopI+UTyZfkPrFSI05DG0F5i7f4cZgYNGlQGc+MTGRzeiJOibYFgVgfnDqEIXrgWMwSJewlSniFtk4b3G7du3fJMDHZatk+kv4uy2oDoQMzjgEZzimUgcYBEEjWVT/HkJABzWty2MNUHFK4/b5xhLXUAcQl8Pp2sHhp1ZeHChWp4ZC5BT6bCwPwANoWsq706kkjdJ/bsHxPcyGSmZUCgRyLjNg0h6s/DfDUDEH8Cn54dl7uogCQ5UokUfWiqcwK6l/qKiLfO9h19KGZVqD86nRvB3zokcjjPpCzS4Jup2pEtyNTbRScGJB16+XgLQwdI9tCy/GqR6XEw1kHaPZY+ORkCPEQzCMjK0tjYuAqGp8OLo4pMJEjv1iEVZrSAUACEtrgZL9YFPrq5g2dAIqGnJZA12ThAUpGOFgJmdHpDXw90vvrqqz0sPUz8xxZHvbq38xgVLMWb1I6nbvhfw5ZRF10dIInTexfry/08/+wpEDKAIGmlb8xNvDVEnB5Wb5IzoAeJV56C119/3WHOSDGGSK7nlUH2HzWkQ5LXhmIq2E2xPeEHKVtCgz8LScOTjfJ5+AJ8QMioQxOxNQk7QBJxh8ymg6xBMFH87LPPuvN6KosjwO6FtXDRGph9GL6yrpvydyn/PhcXzmXLJzS0YtDE4nHg0oW0WufhDoNkvEcB01rRUqh8XtFrEqndC/t63QJeCeeO+vG0IlxAS5a9LN12h8tuzsUaWisaZ09v5wIvZxJygCRSQJp2BbIIl3COk1ZH2RXk8oThvFmzZk2ERg1e5qqsHHSku/SJXV0uh3R79+4toEP1aZ9l73QzA20Zc6wzfQdIzcwUCMxqZFZPlFPAWi+5CcXxziXWB+DlRWiPhfmsRwFFm/G1DOmLufDJsQVNz9exi0kidYpqqUNn2CC+1yjwFcAtItGJV2MAuCwBpLZKsTquDj4EDyPxF/wVwYpWFuNIcwTAnycR1pDetmLFisNJ0kNHl5WVDWQlMMZfJ2FdkriFvyZiDmAYLdpgspl0rZc80kf8CMDUFjJ2R4eeh7k3WK4EpBEeNCv/BiasbZmJGTUQfr9gJ7TZlJ5pHHR0ajAamp6ihKUfbzEhWrO2AySb/S72jXdphM48PEBCQQv1Si2O475ZkbgWaDwuYGGsiwv69NjTKHcA3q+RviGKz+TUJ6xjdRtNOtvvOuDlKpOid9Y+evRoJwnSkabhOxRiYziCDNgq/dRjDksiU0161u04OuNEFHxoogGT0dAa5acHHzoc+5YVhrV1dOsaHUG2UvAsmfxdLkU7VrrCT7CXw4EtrF2/eMZ9Bo9b7bhcn1zl06phJj6whkSwbgHkV6RZWLmBHKChTYZ6ErUv9buxMDoh1R1Bf4Gow3Ry0h0OfMvy805Up5y0VTsaqbgZhnZo23yV1cUlO80DpA7WUfZiKLAwJ07btQmcNCZtjE00ricS4NfdVlU0SsuQdzmLPhlV3bW1tZqtH4f2BANN6cWvsY47624PkIAlMdVBl278e4Y3QS09ptMLj2jnYSAeaxT16ycYKvyVwJNsBEdJ2+lPyyXMJKIFeDU+MKyJa6E+3cZzbBMBQNhO6bbZl3iT2WgcEvsY5yYP5MJkNmWZDLXCCAAJwJfg9U9RXqOR+oKuJHGyn1fqkqGiAWmVfnRcAEiZ1kFbEmkyYMj+1idSeeXKlWJ48q8a7jDcNzCkpdcjc9yxlApZjg90HHGt8HFc1//cFQaABKgeCJ3i+TEZTdfjJkBoQXV1tUl3uGlH+g4/GgXuYdYOH7UYUw5EWRHSOJhJ90fUN8dPlzhJYz2L8MO8e1RfAEgVXrNmjUz2n/N6UWGf0xCbgWhX8/1N1kYFH820QfjR0scN5HF42OnWU2mJpMmgS2RMpvqYfglZA22Dh5uMgI8PHjwY2DAYgRTa7HmlA07iA7oSgiPII0U8TpXzjN0BmoabtROj7iu8v7t27VptICJxtElXdnRBYin0xxuIav9eD5BHmWw1wXmcEUjlWLx4sRbnuk99AcKBgmSZBNFnhg0bpmVR7A5eVI/Wdlrq1LEH/iLKStnFDGLIPg19feUVwIU4GXX2oxvViQEXKGDnADzpAEnlRxAxFdYw+yFgVuvasV0urif8lOFlOfiIHccufbUVVV2yxjOkpRM1wZjWqtp6HuNaj7769ehGm4ekQCoDS4pWgDrC66f4wMQDwJUsh1ZQwVzdglCZOBz1SBIr8RcYfpEOaS11uE0xA4DWQH+sn3/iBFwjj92pfqYhJZAiytCVNMqu97cEUUVbjsrlNMR1JDCLnrUuFCWSI3tolwExWeq3cGvuQlSEtbHgw87HoPsT2vaIGmOg3Ur0LtbX5w1pTlRaIDUroo/OoB/2QTCw4xElmHiItDXsBuYDZqlDPaIXbhKLz+MMaS3JInECUZ9OIwT/AP+Pw38AROKlj4+wm9uTbnWQFkhxLdseQEoqP8C3KM7txIR6lLi1DJMFMejMTkA8pGWZu95s3wWivsmB7fXJQIS2tn9fkGdTmG8tA72Qijk+HZmETlxDngV4o06EsQuk/YWePhiVJQZ6kTkbRAgKxCclBAbi+gUsfd32FrN0qFEQSiLtivStHu8yDhzFByYf5YOvSTxWMxxmxqUzoZ+VA5g8hvMUni9CYJYJROL0g3Tav28aM2bM8bAVZQSkjhmqqqrOQLwO/ymVacsUcMRrd7AMnTmlL+2XbsYEIp+SVMFXDfEz3Wn2O2kWiIT/wrxwIJNjlYyAVIVuMBm++grMCCaM69LTUtZnOoEzDR+b/9ifCRD107MreJ8PzwF+BCLuIukbmck/1DfcmTCWMZAiLjA5CDvN6+/x+nxCs5vfFcLcM0Q+xw0xoz71F4grrF0Lhoga+FwGT4E7PNQri/dp/Ju6lZEpiOI70DOZNEbDFol7kBn9RXpzZhImW0h7AyuNxxCaST255EVPF6Bi9Hscv4Y/kx1Vs7N+feoPrDjOplvmJOMlK4m0ialSevBvAPUOcefwYsrvdEtjFbf/R9GYnDrOTzhMmF2XvpqVJAZAJF67lm9J+99cQBQfOQEpAgkwzzNL7yCoHwk27UUfZWv3lIaYyvSWkzRSr0bKdFOdxMuy9W5lZeWX2UqiTTdnIEVITDDEj/D6IcyZFs2DwPfH3KSt4tlrUilphB+jbRFeNXp2kedgJrMzZYwuEiBFWbsfbIb7YPxLgrLd+d0YZs25vSWV0t+SRjpOOy6PI84yRKBytkT1AX9kQIpTLhw1wONuXk3nPTLKPsExRm/N4Fo1LMIHZmkA1EdIHzCKGsR3FM6yOEdBSDQ0xNFLn3Heex5AK4jy6ESYn8rENBFpabV1Evny9NUC0pq1pZ11X7f24dB39DNxY6n/IfHldtSnPPpk+gNGUWQ2zUiBFMP6/RwuHp2AUf14+yh3IwCxhPBMDBBneXbqzAe/knyPEvaA7i6X7p0h3F1XV3eeTvyzVIzy0zFP8pCO9BSXNFLf/iilURVEDqSkAnBOA5pubOjSk6M+CKtVjxIn0LRXH4dfjNdFJW+LiQjrviM7YCpLMRkYtLDWLbInEvU5ZIiXNN4AzL1RSqMqcBrp1BbBC2syWZTP4E2GjfFIy1gtTZBMHalKX4kPDe2sPTREzrpCQkfqVxCm+JtCnM6ezkctjaoncokUUek/GnMWwBbAvOc8B+A02YzBn6HhTaw//4u4CqQk105tET3VD73J+MCwJkk68fOopVF1xgKkCNOQbwBR5+OyuDjDVu/EaSIqoEFt7Nk/55JrAXe1nTwqn6mbPHlyp2s9OMFdp4uWLs+fd4Uje40NSNaU15kEdI9Iyl1nLm43gc+arboTje9wJ+byTl3SjwLSQ4Z4XYm+jvHikichokBsQOpuDDOpJLKLBniAJDwCydCEY+k0XaluaGjQLKslSxFpzjImVTuhre9f6plkPrWXU7psBf0qfznipB+b/Hd2/PmyDccGJIz3IBn68XbZ9fyL4gq2ZroLTnJeDyDO4fmv5NMppIZ+Ju3pwAj7NgU2qxCXraRrTZcWINujX0LIiLhohnGxAanKYVq/B2Fa9Baz73bqRgIfJN9wijhxYZhP1CF9PMLOz4ysr8aS7Z4CB3d2uVyfGTOeSYU0MFTvo7c+ZPaWmasyE/p0lJw+tNpjl2Obmo9+Nkl1Nx3WaueL+hkrkGGZZdnyLXn/G0EaCKihwBdttIOA7EIvWrsZxUHLkmziFfQ707rWnyercL8AMrGuc8DIqiWJQkidbtsaUcyFbrqy/QJIm0l2O6VIWUY8jR8//o5r/WiT6vVnRkxHyR1X6JwhzC5IZ80/hX45+i4jnpqamq5zceF/orwTlE07M2I60wqkwJLMN3lMCM7akjzzAHAmw1JryIyqoexEyl6m0H9kVDDizLECSSO1Y3Ekz8W7vsh/AGu5dhna+einuLW4zgzF7wiq3HWbNpNVNzsqO9hrz1hrBJwbCTA9DSJeu49RGF9l7dEfUMg+qKVJsvWfp7w7AB19hXHCjgPESbwb20Xe2CYhY4U2U7k+4Vt/nBvYR0vyGI7V3FP/iDrus727xzbxWH19fcYNxVjRw30eHWTZ7ke8qIP8rgdrlLUl9SdEEY4VSBjUNylau1l7QTfDgPw4EqmLVvrnzPYoZl4mrfl00Gx3Pa53HcgFvkZwpef0mo1OCl0hBl79HIIO4E3bxCJ2M/9MngWA6f7sIzR9d0auXj8BiL8mLkCL+q3LUXRcvbtMlO8ZD6VMK8dwsZgyv8LrvMbjkFZJ6m0eOiLYQkO/4ergPWyTpgnKU1YB/SYwulXnQk9BR/9RW8Ez0CaiOkj7P74Qqw0QiSgi7qE9ALvjxxzBCsxpeI/uSjRalmzptWq2iM38JEQLT31FEADE3WaA6SFvOdl0rFCMNGoCC5RRPqIbmZD2ustH/R6oOOoK1A4WzAsSw648FX01mgbrEUoild0EnrsO8uim3H8ijVvJG4quu3zY91h1pJgQ8+hB3T+3ZuhUjAkUgUMeSW5ar/yp6JGmgzV9kbBdpNPkzSk5diDFnazXLJTfpjG7CZp+nSCnRiQprIX+Byx53rKt50nyRRKdrkcjqUREaFSe7v1gzV5IcD1DfSTAxlW/finmj+hQfSGW0c1b8ZqNi6shSXnR5Sas4/qAfimZdCFeV6MjGRnQuY6OPcw+fhsfWl3oDUm0G9rrQKpiSae+5mJGL2ctOYWoBcTpAr8s5Dq3ycRdpezXlP0YfxIpbNBvc/Aeq070M9gnQLqYUP2FXPQsQkJ1RFAgkF3paV+RQBkpuvh71fZTp05pq9idttD3GfovAn8H9Zr0ZjmvSuMAAAAASUVORK5CYII=" fill="none" fill-rule="evenodd"></image></symbol><symbol   viewBox="0 0 41 53" id="icon/programming/icon_light_on"><image x="1" y="1" width="40.241" height="52.019" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABqCAYAAAAvBQZbAAAABGdBTUEAALGOfPtRkwAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAUqADAAQAAAABAAAAagAAAAAOTXyvAAARaUlEQVR4Ae2dC7BVVRmAkZeKJqGCoCCiBL4fUZmlEKY9psm3qWmZyUxNOZRWk6VmWWpWo2mT2RRTjpZl9nC0McLEB2qZoROiMMXTCwbKwzd48dL3nc6+7rtc+9yzz9n7nIvTP/Ox917Pf/17rX+tvfY+l6369QFZv379sE2bNo3cvHnzLl1dXVNRaWT//v335HprzsfDQFjL9YqtEI7Pc/gLYY+S7ulBgwatGjp06Fqu2yZbtaNmDLEd9e4Gh8MU2AfGwPYwGNSrf+rIab/N0FUN87wTXoXnYSXMh/vgfliFoddwbJm0zJAYz161O5wIx8EB8CYoWjTwYpgB92DQh4quoC3lYcBt4Hi4DVZDF7RKNlLRn+B02LYtBmi2UhTXgCfALLBB7Zb7UOBMGNps21qWH2XfDzNhA/Ql2YQy98Dkoo1RqI9EwVEoOA2mw84NKquPewlWwyZ4GpxcZAToa0fCNuDE1IhY/q/gG/jQ5Y0UEOYpzJAY8a0UfhlMhTwNdNb9J8yFf8ACcLLYAF2wERJxOaTOw2AXOBCctKz7YNgB6hXLngfnYszZ9WYqNR1GPBUWQr2yioQO/c/CeNBADQv5B8EomAa3wHqoV54j4ZfBnt4eofKh8D14BuqRJ0n0bdB4A8rSmrL3hYvhYahHOknkDdipLJ0yy6XS0fBz8I72JhrwCijVgKGy1LcdnAmLoDdxIpoNe4XllHZNZWPgF/AC9CY/IMFEKK0H9tZQ6h4HM6C3If8qae6H8b2V2XQ8lYyAG6A3Iz5OmlPA2bXtgh4DYDL8HWpJYszyeia1D4NrYF0NTVTkN3AwtK0Xxu4c+rjhsTs4mtQzS4ybA6Nj5TQVRqHe0QvhP5AlKnAZ5FmGNKVXI5nRb2u4CGqJE9BPGim/Zh4K/RgsrlGzzrrPGzFpJLoOhulQ6+nraeI/Be5ENScU4nCYBH8Fe1xMnifwazCkudpamxt9XX+eBbUmoaeI/wA09/BCAbvB7+FliInhriV3ba0ZiqkNve2Z58GLEJNXCJwFezRcI5n1i1ayEmKykcCroXin3LDW+TOivz7zfMjqLM8S5/zQ2NMPGQ+Av0FsSBt2B+ydX/W+l4N2bAs/hlhbCd78JHwwt+Zkssv/ELL8x3wLhj6xTkw3EJ1yTw7kcS6YCFnrTCel30G+fQEyHA1PQEycXD4JZbwqSNsk9zk6DYeGRgn5BsJxkOUvncWPjykVvXMWSOKPwG6RTG4/3Q1z2H5yC6zPCHr7AHA2uM2WW2iP+593wrXg/mcoro/tQPWNQhKOg7kQk6UEetfqKyxUpcRrdJoKPjC4V9mQkNchvjcsg5jYK48NC39djySRYYeCr0dD8S7dDH/l7rnx2mcEvd2RvxTc/X6uUcVol21cAjdArFf6yvgU6usxg7/OkCSy+06CHSGUVQTcB+vCiHZe0yiH9DlwGPiKQvfTjLxC5hthRaQQd/8PhB4dLWbIfasJY3GziHuMu5be/ieofYIRfeI4Cs6tavEYRw3RsKR65a8pJOyV2sW545h0BT2MhVKDiDwE9k8nqp47XHTE3vG+JD5RfR8cScqzVUP876rxf70ZurFnIkUMIexI7NU9T/QwJJEuZ8bBcAjFF0VzUfLFMKJd1zTENd0lkF7uLC9Cn+rNeIqybHcodjhHbvcTXWjIPYlUKROmxe79AMTuTjpdy84xon7xdDgzqFQ/XpQ4F9wB4fDWnTiHTIaKdBsSxYzUwrG1ozPhQ9CXJpmJ6PMN0KCJ+FFVkTq6MrHdLyQVpI4O67dV7Vb54iuJM8Ieqc8JZTEBT0JnGNGOa5TXBV0C3UOrqoduZ0n1vIiDN2YZLIwU5qidAEON6+6RnGtIF7KVCI5p+TcXa/EbzS4r0mU2dF4d0qeSOfaotonwZxsqOJKp6id9eov5SdeRjt5hZk0bcnuuHfeuk0JZQcDLYWCbru0FF0Na90QVh3WRQ9tynb0f9yQQXeGbwc7XQ5mduHa2NkFadLQOl5ifSKcr/Zze6BLnfIj5cet3oil61OjOdG3aIRQ7nb66hyFHcB1b9uhwV4LHtglGVOmz4eQaSujP9GtFiu7C+cEJNxRHRWX9mh4ezn4Sigtxh0vRCob1ZF5jREfJZPgSbJuZsF+/pVW/ViNJ7ih7osN7fSSn9tIdVj6RS8eHwzqJywpP4ss+uiHxVXDU1BJ3ZjJ1bcLI9koJxbqcpHsY0g/kJRR9oxNN0b4nrCd6jWF8epkO74LYiEnnU8fdIT3SkvgXOVmdXOQ42iMd1o7KsUE+9am4w/RWkD5IQnGDQmLONkxb6HW1d72HQs8GDdqbnEeCj0FoSBv8M/CZvBRJGzKr+5omna4URTIKdShfBL0N6SS7vVFCWU7APWFgndfJ8E02RdLZnDcqy630nXPhKaFYgEO+t2EV5mvqmt6o7/k8vB2aqdvVxhX4x0c4NiqOhtgk5yit2CxtSP2gviAUCwk3McI0hV5jRA13BpwDMXdTb332mBvAYd2o2CPVJzYqNaQzeg9foiFja0WfeFzBxwoiuFip+sX9KNXeOKTJ0ueR/0p6o21rVDTiSNAGoegO/2NgPT3S3qjfabZR1lePjCLRBTAR0vrVkzedxhn66xhxQTqwgXM70DiIjUqfejosM93LfLxaCVo5Hc5lZdrXT67xomTRJ44Fe1MoDvMJEGtUOq098DqMeGs6sMFz6/SmhuKwdmm43Ii0wQxcATrPyo4Gx0QsKDZrJfFFHudS2DTQN4UyhoCfgr02S2zgHLgqK0HOcCe9PSN59L92vrXGpQ2p03QLyoVraMi9CPPnFwu5y3bn0oTyn6RweZ1Qv6PCHlJLzHsZ5ayvlaieOOrTtewE+0TSO3KXgTbr4YOSiJVGBKKztTAb0k6xJ25bQwFXHT/CiHfXSJMnSheyN4yOZLLjzUs6VrczJ8AhsQj+DV2QFnvuoeDdaad4Q7t1DhRR/7vhuiC8mUsn2KMg5pN1hQ8khYdK6SMXgolCeQcBo+nuaXcQpin7ehcqiPlO610ClxcxpC2MdlqPI+DdXgeif+yA+Ul4aEiHhr3yqSRB6rgb5weB68p2yXAqjhnSG/9djDinQMXsMO+F2Iy9kfCHoNsP9zAkijikn6jiUEmLvuk48AOrHvnSico6r9aprwrrtnf8Ca4vuG7ng2MgNrk5wdyKvZxXKhIqZaCGdOxv8CIQh7ddvVVLoXT1+ilHRajz44RdQqNeTidu5pybNoD8jr79I+VoPOeRh9NxoVLG2W0XwDovAvEunQjt6JW+gnU3Oj20HVqXYsR5HIuUN1PYdBgZKdTl4W1QWfZE4l8L4o7sCL+F2MfpfgJ8Ofhrh3SjXiughDPq8nt2f6qRiLp9CQqd/CjPD/PPhZcgFH/E5G8Vx4RNjPVI09gbb4fKA7kBKdma85PgCGjlutLekV5DzuT6+rSf4ropwUDa40CYBum6knLtjbdARxLQ65FC7XG/gdidIXjz7fAOKLRHZClGPadB8m33Es4Pz0rbaDhljoCfQuyXDf7eZjaMjZWf1SP7caddU/4elkM4g1vWFPgIuLZrhbj0UV97xbXwIBQmGMiRdgocDzG7uGHzM+yyjGM+ofCRcCVk/YUAvyc/B3bOV3L+1NTxLdAv+svWEflLyM5BecmvGRZwHhNH5Q1QefWaXVKNGDL7xdUdEJt4CN78GJwFznSlCGX3hxvBH08dWmQllOev2/xo1N9axsQfqz4ChzVVLwU4i50J/4IuiMnDBJ4BDo/ChXK3AX8s5E8zYs+9DdVJWRrxKLgTYm0zzJXCdGh+LqCQXeBS6ICsCjXmCVD4Tjplbg+fgcKGNGVpRH+UdTdkiT/MuhYKq9eHeBfhMyDrJ3VEVYbeKRwLXRZR3iAobN1KWRpxKtQyokP6Ntivoe5eKxOFToFZkOUvidr8DyjcmLX0yhOHbokRHc5Z4vLnUTg6T9l1p6Vgf0Hq8L0HejOmP/gsxWfWrXCQEH2ctN4JvRnxCdJ8AmIbFkGpDV5SeGJMh0UtY84k/iBwA6Dtgh5bwQT4NWSJPfFxmAblbxdSicY8HmoZ02fyH8NYaNkzedYdQwd97DWQPB1x2kMSI55NaKE+PkunSjiVDYRD4GZwdouJPfab0PhCtqYW9UVSv37xKnBhHRMnlvvhcChseVWfdqSi0sSYt3CeZcwVxB0LbfOX1P1hWAUx0YgPQnuMmFgbBTRm8vTTyXlMnOn3gdgzbFJUKUfqfBNYf0wczvNhCrS+J4YtVglwNvePiMQW7A6pr0D5DjxQjjpPhqwhvYa4M6C82TnQp9dLlNkB3OB4AWLibNjSWZz6fCK6M6YMYRvhCmjHa5Pa9kSpA8CZ3L27UBz2F4KvDFoi1JXVGx3Sbrbs1RJF8laCYg7xj0KWY59N3Ki85TaSnnpcfM+EmLg009UUtsZtfkcj1Uo2Pe11dxD0cTgSQgd+CGEO7zWkrXygyblrTDdtm9HFV7KrKTO9Af0WwiZBKKZZBDeT3nyFSDPKRxVAuXUY549Eum8Y7lEOJex98CA4/N0p8gN6X/GGRieobvF9vLtP36F+3ywqH4JhlbOe/3gDfwlLewb3wSsa5FLHZYW+KJSHCBij2hwPhqWgUe3NzfAM+d9ZLdcF+J8hFFcUi2B80WYrvEdWFVzMcQ7sAeH+5ETCxtMY31BuAHuIejT7GPkyZSS9cU/OY8PaoeynJkuhUCnFkAwvlxb3oumJEBrSteQE+Bsshc9B7AsKgnPJSlIvqebQF4duxSi/krgX/TwWKqUYsqrhPI5rIfw6wqcbh/ZAGvQcBr+L88HQrLziDawWsi9H6wnlOQLmhoFFXJdpyBUouArGQViPDd0afO1r4xMDGNSUcGNc0sR2tZ2QOmBBUxVkZA4bmJGsoWC/1nga9EthPaMJ6/6SgcZr1KNhIvjNdnoZw2WmaLRHYCY3pLOaytlfHxmKhtR32ysLl7CBhVVAw5whvfsaqNL7UoXrE4cQT7LK2u9Yrr8HPvXEhiTBmWJvvhh+VE2hIWMvq7w566r1VZMWdyjNkFUVn+VoTwjFCSf9VHEQ1zY+NHiYL+vaG5OINyK2OaIeq5NERR/LNqT6Zg1Tlzti/E2wE+hP84hGex5+kcrkDbLcUKznmTCwqOtWGLIeXZ8g0VfAHpll+Fg5GsyljP44kZGcxHq25abTJekLOfYJQ+K3nJCKaqQ+suXSJwyZtJrJx0V0nl5pj1zPjShs+ZTokvfYJwyJASeh+AWwK+TpURrSd0LnY8z5nLdN2mVIJ4n008wJXB8N3WvLHBZx8b0QvpgjT+FJ867Z8ipQ2XOMZLLXuWRJbuQyztXFGTcv3pAVkIj+tuWSNKSsijsoOLZBYOMrz9sck/3BlZw38v7E8u+CRA7gJMs96ApKkbIN6QI41kNs0LHwW3gJ/+YLs1mcN9JQH48qkw1lmP80SC/2uayIy5811fMt60DD9oWFEHtF61cYvgot7GZS1kmQ9ep1NXFv3bIsWNUWxbeDP4D7kzFxxj0RmjYmZRwFHZAlvpaNLdS3DNui/GdhbUbr7Km+pJ8Bh8Ew8P+I8OuNevC99f5wESyHWM8nuCJfKNNijfikXPrQBDcjboIjIGsS6CTOn304OSWvIHrTzU0I151jwV0jJ7CsPMuIexe+1AltyxQM6XeJfkTlMO5N7FGboN6XYLGXa2EdlvVpyDLylmNYGuGHA1dD1ucsRJUm11GyvfWNITRmOPwQWmnMX1Lfjm8MC6ZaQaOcxf0i1nfZtSYGopsSf3nxeYht8KY02oJPaZyz8n5wFfjRez1+jmR1iX74WvBL4pYO57Y4YBqZbFqMok+8DfzZ8gTYC5yB88hyErvzcxvcC4vAV7OxVxxElSNtMWSqKf3Hjx8/aM2aNdsMGTJkYGdnp2vHXDoNGDDg1cGDB2/q6ura0NHR4XN77JE0VeX/T/u0Bf4LFZ1HDpAfBi0AAAAASUVORK5CYII=" fill="none" fill-rule="evenodd"></image></symbol><symbol   viewBox="0 0 50 50" id="icon/programming/icon_loop_off"><image x="138.684" y="199.358" width="49.117" height="49.117" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABGdBTUEAALGN5fIAKQAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAyAAAAACbWz2VAAATu0lEQVR4Ae1dC3brqg49vevNq3RkoSPDHVnfVgqtk/iDxN+ItSg2BmlrSwKcpue8/dOSzMD397fxQkJLt+++LzQmXGy0y0bfl++7P3t7e9saszFNu3Iy8JZT2NVl+UQw3k5KgHDtu6o0i9dCCbRo4pTlXBPkgF8khPWPWyXDAbqHR4u/+6RWk8azkaHRBFmRuNohek+IFerNy8X3asJs0hPfqQkCrvxOcYunbbiRCxBrsgjcNn2CTJAcz2GhyfLMyMH91AkyYXI8h8I9WfSd5ZmWv/tpE8S/b7g/Kqa+WmD9pybKawz899qlPRMyYGCzw6JBxaHSvRYwMPMOQruH0SjYZWDBk+l3lZl3kK/d0NAHxIBBpd1k6h1l5gShINByzoDBkGkTZeYj1t3x5/GRZcSykvK8c9EvJZ+Lee7o6J6OXbYjPEWhTJsgxCqODxZN6i8IP0kWynL/iR+5Pg0CPuNlUrtOpNDvH1dvFmic4v1k6gShsEIQcl7WKTDuO0DrVdQnjwEeShxqW5QFSqdIlBbkdqOTgo0SBfW5WHRQNd2A3QFCGD1Wh7Z2sTuwtLsXBhARphcsPeAgPlAdaq1CO7GWHhiAx8NqSav7utge8PWEAeQQVzWTxfRk/xRY4GBKBKoO9aiocw4iAsTVShR7AEMfpTDgnRgS4igZXp6l6J1tboVkcaRjNl6z2+sdFbM7YOhh0TOwwDtgtPSuokkS6xfvjLA7uMNw5z9UR8Q6YmOc901unwQv2g2V2uVJDwkRyCrSKtt5GPA+cwWcZPMgrCsl6y8KQWogofYvr+hf9/ioS921tXlf3jJbOZyfxAkCAg3Io0olN5E/UuN/fiBBlvjhOjKGAe9j8q2JGR85ZqgkiU6QhrvDKe9Ijmg7ToXpgBcGCiTKUEnyQkjooKRA7b24gFfbsgwgEHLGg4M8UxZxuvQr/D3IZzoNKiGGAWzUFuNy8W0ga4gkAc79giwnI3ouZh+9PinBAILBoLpcQVECY1WZuYgoIEePV1Uj4VEZ/JnryNWtH2OPWB+P1OidMnD/wzALHnIcue470tCcYrUgI3orZmhSLwIeQZErNrrdSaJclZGIHIk2NplRjI8zyMeGy+BYO47VG0hBQK5zZyqXmiAb/mndBae6VMdivm1tR5J+MiADCakiTJIROrkYA3CsS3Uu5ttiAGsIJgMykCAWUcNG1SFnIFN8GDmCDmZmIkGSJHq86sD/ZxByxMeZju6fgwQnifDEOaZ7YhTgnQH4OfWkYYemMgMB7FwZmrAJwcPBju3kxwnjJgnsMI+2FL/T49WASZYhKsyAZv/8y4QZjOeIGJOoIb2bDzQcnLqQNlkYY79qsskUGY0HVLUoA4cM+D9oS/laCiWYPVTS20MAdqg1S5NVpDfeR8aDYJnjpR2Gpm6ZksQyIweHYv9hIDVJavKYcsTS1bympy6kK/UPryjBuqYjdQWQbB2YownZdVTwwQnj4D6Nr002g72DAJ2BqptMnc5SBh4YEL+0Iw7tg6RebgDMobYophcOFEc+BhBIKS/tNh+SbUlv293bvTDG4EmTow7OrSys2xZob48M0GorxVU6LrhHrFZHq0VKoM4bgoFuj1rRq3Li7rEm4B0uM0y3fWClWJhzdPhADCC+LOCKFuDSu0gUjTDAoUoKGf5QIIR17nyYrDeXZUASXH6ObUoKN6BXhro94AyZuzL2ZGv/mAwwYmIVYj+XTS0GBPeCKK7DHAGPlHso40i+PhuPAcQE63SxCkPLtRZz6dsgpI+qQ6XCk4MJJERSolZ+CHZHwrlG6/jxGTiKh5NnZs96zNtKhi1xDzJOX9IhgQL9YdIeiKf+6BdrQvk0N9xe418BD9ZoG8VAQsyR/AX1iy58uYWLmJb1wg+gRXePAPhAjwljtJ2HAUoQ1BYl6tTz6wkgdEKU5ldI5AX0bCUjW06kOh3WKQM7cSAMQ/a0+HhLAMrLwpWjnnSK5axE6uVADMD/FtWhtiib8fa/A/5uB8+OHq1/KXg07uUZ/TIQzNB80r0+R76M1Y7xGYCvDaygSuUd1dBFT+VtDwzAU0aZvec7/fpSvUPMzN0jJAL8E/2h0j8yCFVSzMyBoLY/MoAAksaRJPZS5tBmsFk2dxBo0t1jky55JwWLnx1aul3oBxU6Xt4vLvaDonYAk3Z3j70EkRi1q2QAgrJCRExYL/AmELxgzifNu0LS+IWBFtyeS3zskkGo7NKz9TWwgTDrK5u7gwkOz8gfpoYNpXQAP3HTa+ElL6xwAkt4Skp5ooFccFXL+eQX08DELCor8gRVrMLjlCX6bzBPSRbK2wqB6bUS44/lnyuHZki+gbsVZz/MbfxkRRERvyHjrGuq3QNk9OJky3JuJ4PBnzsLqIrPT2P3vyfezNO93q4YgOMsbm+rrpaXN+BxqKYlCK5ufPDwgTkLd16h8fcPQ6Jle8LRsIqJVjDwQDDSy86x5ZyhfAADJCeVLbuT+tjhKNB2ukWxQXQ4Abw4ATe1p9gOqduFBHJaJ0lU7P4esQjwrjWTPghOhPkjcHMDXjuKq/zveHhHnLzG8XSDXIfKLSMEjohWENF6heP6Ioy3IoMbTQLoJkfXWHN/d5DYCRON6+VlnEv5jYKOO6nVeOwkhJW3mqeDXWJFvIWBtPyE68j2st/cBRV0PjWRPPQ6LP7rEx1YUJnzaG7ufw8CcKMHQzYXgwsLYbn5oBVyQX34ftUT77RjGRqTqVCS/y6AmWQWE4Od5AN8cBdpCR5a2BfWRHIUgWMWw1IywGDYL+FhjzYrMdljcHtCmf0iDBLcOeZ425kmsofzOYEKyYuSyUFKTzLAg2PT/TqB74ANEiCWktW9imf3ZMGzAbFIF6yTxCKHFMMGDumOo4HGspV0PgEmpe4edKTJXoArOWCygyosMIfNkLFVZD7aknTSJ1NUmNgU8bDXndh89Nim6D6bC8WpyVsU3xl+yXPYnLwwbDjMSLD82xB01nWpBEl0hhWRzpwEjElJwlTXxfBEv2zFsGEbJiTeshV1PGGLyci+qjwIfRVMqYo1l7sB3gUDElvZog6lkpXJ5CKgtRyh/eQrGeGJBkOv9OjRBG+iuffpRHaGYkRYoHj2BHFC8mWEi7z0OAl4RUnyKGWcO2GMPrhVbK2EbLGyDic+sBh/Y1ubEg/1YWRz3FLeYIVoUfDWy3dPCHBeSHQjNbK3eTBYsnt+92AHsEsCRh4oHRgttJni2ojhY7IjCYwyNMlromCzY9gdhtq1jJbXARCnbYk3h27Yyl4YUvTqt3n57C38KcVmsL8FSwFWDE0FwfgeFeHn2L2kwJo9QQyTPP4X3ZgKdPg5Az5JlvOR9xGcZHoROXuCvBAyUocPlJEgZ8MK2z8ihCUvaNMmCI4aJoLg5yFJq9GzsEz3C1POO3N8z8NjkiQJPyWISZKgk5WBRgxgF1mg+mjROnoWhVqyg3xFSdZBtRjg+sPUAlZDjz9mbiVC8vGK8EsSpIbdNXQYrhK/YnGn6fjCDOwkyVbSsJHMnCBssnRCvwzsJEky4JkTZOGyJ3yx56rhjue+dLPt5gJqNd4nCdmX5XhFdhz9J570XIsyMBQDSJKPnIBpB1mYArkrFlN8neEgkms3ATP0Q8s8DMx8xBrey/7IZ5iGcD/1Yoq/1nBNEJ4/b7zhxUeb4homVzB7grA/Cuzsy36S4+4yecyzzJckiGFp0MFFGBAer/4J372K2DCEUFoRUVllCMMiQbIM/xtsI8UXGwYo7g9O9JUrBuiigiU7yNWoWAQGSY42AjXbU5AOBk+ocgv7SMlVcLXxlCAL1yjvIO60XsdLPtWhP9W1DQ0SfVigxyu+x6Q7iOGr6nbGIkR2a5Ek0EnHJCPAvAjm6BRiAKRzi70SczCe/R62IszU4mIUnLX4CHo8L+RDh0q7e16fQCC3XOplD8YTqSklr0OC51ctwKUk8aX8FWg54SSfzVDkUFklgLxKC+NTApC4s6W4yIDNlMLWSm4kJ3mSJFIZhv2VVsSU1Ptnnfgqj0O8kUCRmrRkSFZMJfmPlQ2bODu+jZW7O07oCLMrcNAHQh4w7aXYFAogjRIjR3IQMJOCpce5sMmRYbEl2QYo4mRkwGWTFXcoIBiXqXWQY2LMpHGolBQONVexMbpHGyMgx0htvP89CH0+DqVcGe/cCYOM/wDOXMcSA1kU+GT6Qj98Cb97CRya8CBj+wm/2ozyuhAFLk0TIFDsUFmlCdAKSkECreQjl1wJXoFtngo4ReIbw9PyN3r9i8Kwqv09PbkCWHMyZMjHfuX9HBL8z5+b0i541RJ23Sr2rRNEotBIJo0wZ+AkGTWxY8OCG3NJf5++TpAlFuFqXNVsXumtcjlgknwA81KFnAZKmp9YJIfuBjxVVyk890rolM657DvH2tkgxwkIMmsZ3Ov1DkJz2dszAFuu0tHG+52k13P9J/D1im00V7/gfU6QlwHa8cOAP7pQIC4dcULJYTvCUwwKFmID4VQ5Jen9Y1ORYAv73hR04U5yFqqTcJVpjr0wvZumCfnOf/QEEMnnzNM5jLwIrihRapYpefZcS3g2NDdrAQpJgky3i6xJ95w5iQcj55BP7FrnTNewXbQQFeMo0mnPw0wxQIMI9o4kZ7pncgT3UyfF2uVCPrMcr/b+bd4FAM0aZMQ1jV8ixl12iH+RJ/sW+gHHGjRUqbz/NPefxl8vvv3yLTX5XyxXwke7fOKQA/+TM5g1FqBo9WIXlhIdrAxEMIAglMRilt3jEB47O34m2EOh+lAZYDIgjMMqCSLJ3G+m/TpcGdhlAMlhhAlidoUyH2T/RSEMskwMOlwZ2GPgtvfgoL/eO5wwe3UXOfCePopjoIfd4xQp7QbCJLGnwnWAMnDAAOLOSWLvQGSZRxKQNKcMGpU6AwMIH+m7h63OD8DqLlKd9bkVIuYcKrs0Y42N1E9oBlgVD8sAQke6ILtmRieAts1Aq+LhGECcSY9WtCSbpgYTAklpClqVD8UA4stJYozmNTcUIKRbn20OXgF0zwDia9zdI7ArzG6aZoMMbZWBLQYQI44CRVDa7x7BIICX7iJktwlytFUG1gxcKq4o0oWln0xfe0evmzKAWEo5Wtmm4LeUw6CUXaQ/g7aM1L5qDCCeHKqk9LvgSqxZzdEkqRZ+fStCTKQstqZb6xIN++7WMAVWjYHEGOp39wgMJhpogxxt52MAsZPy3oHpg3zgQ0gTiibJfLlxtxgx46aIGxiZcobUo9aECZIYM/0frZ59mmiwfZan99dlIDFWMH2Qo9WzCwl5QjHP8vT+egwgPpJOGzR/WFYSjR/X8GE9Vhd4YnxgegdfRkylLIEETZBU8juenxAXlBihmI5NjIcGayTb6DWMj6dpmpGIh9SPcylB7KUII4uYxVyKADXmzgBiQJNjKxZADGcXGe9juy2jte+BAWYM7K2n142NWIIeWNWbSzAQ6/u9rPD9102O4GUYerTF2jBO2+swkCk5KEdML6y8lQSyMvQGPb//xP8s/69eSW57k03JAUzk59TysfpvJFJl6XxloD0DlByoOYptb40iUAYyMYCMoGO0y5EZkGEzwcoqpugRKyvSzoTBocZDCm1A+O4vvq58lPQBneNIRXR99srV3n/BFpw9XbsT+CHoiQ8TSUq5/wIsEkCpYbMkB/E3zQ5yEvgmdzBhRbwct55D2jVy8dXtzhHiYegdZCfoybaw4udyZOArtl1iB44yLvOuQWZ3nxyj+OYfOQfV+Yqm+2KGIfcEKJjO9QnV2mn2RK0+5jBQyElrh+W8dhzbeh5biHfbs83DYssZwYVlmWFJ9sALJQbRPjw33fq2oNPIcbnK0LsHSChxnArcanKUzq7CDgyOTGmHDILCvA69aJSO6ezy4UyXEsEF5w4XCOCi5I5BVNvsAaACzxkoGOQpos058j5GUOCmGBo51/Zh7YQoKjk4Mg7uw7rfPTxnmhjMfBnyF4X4JTU5mky9Me2dajglhTe4Fk/6y7+eIuy+dvfxIwRic3ooKXytzUw3HOR0wpA7yIoA+kJgrdVxpbafS0oGj+YdrfHXNZtL7xrDf6HOB0gPSVI8UGArJQBVKq0S4kf7JN+lGj5ByFsIHIfG0HXjskD/1woD3T8UvD8t6w4f9OsuujarjtaJsILye1l8MfjV1PjiKgliwCMliZayDEyTGIHG/8LFyK1flT9HtqFz7JQYVGznOLPDu8QOEljp6H0kQBq9/ZwxKdZOu1SCkGFIku+1gXotYmD6xAisXeKIFYzxrR61nghh3FJiULGMOZceerkdhLylRy1WzN4XFE2Kbc4umSA+SXr56Heb+fa9lBgLEmNpD6VfBFdOEAPa9aPfx9jT3eKRj9O7yyYIWa5Hrbv/dac4TYP9AZdOEDJ7wiS57xIwXY9P+3Ef/eTyCUJMIEmu+tHvAvO+yEZ9ySYW8pfRv80bywitqrfYwTvjFvR/hpda5Jzx46h999fUmNV1jsvFC7knAq7v9wGHf6ZNIQam2EGIu8SjFh1XPmJ9sEqe5ynmucPfL8/9mgDPjOh9cQYQuA5VUkxxcKpAGWjNADLDCLJDPypu7TjVX48BJIhlJomph041KQMdMMBIEt09OvCXQmjAQOQuYhpAU5XKQHsGYnaR9igVgTLQkIGTJLENoalqZaAPBpAkDvWl9IFOUSgDjRlAZmx99Ksv5439ouo7YgBJ8vzRr+kInkJRBtozsEoS3T3au0MR9MgAksShmh6xKaY2DPwfbAt8Kzss/5MAAAAASUVORK5CYII=" transform="translate(-138 -199)" fill="none" fill-rule="evenodd" opacity=".45"></image></symbol><symbol   viewBox="0 0 50 50" id="icon/programming/icon_loop_on"><image x="138.684" y="199.358" width="49.117" height="49.117" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABGdBTUEAALGN5fIAKQAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAyAAAAACbWz2VAAATu0lEQVR4Ae1dC3brqg49vevNq3RkoSPDHVnfVgqtk/iDxN+ItSg2BmlrSwKcpue8/dOSzMD397fxQkJLt+++LzQmXGy0y0bfl++7P3t7e9saszFNu3Iy8JZT2NVl+UQw3k5KgHDtu6o0i9dCCbRo4pTlXBPkgF8khPWPWyXDAbqHR4u/+6RWk8azkaHRBFmRuNohek+IFerNy8X3asJs0hPfqQkCrvxOcYunbbiRCxBrsgjcNn2CTJAcz2GhyfLMyMH91AkyYXI8h8I9WfSd5ZmWv/tpE8S/b7g/Kqa+WmD9pybKawz899qlPRMyYGCzw6JBxaHSvRYwMPMOQruH0SjYZWDBk+l3lZl3kK/d0NAHxIBBpd1k6h1l5gShINByzoDBkGkTZeYj1t3x5/GRZcSykvK8c9EvJZ+Lee7o6J6OXbYjPEWhTJsgxCqODxZN6i8IP0kWynL/iR+5Pg0CPuNlUrtOpNDvH1dvFmic4v1k6gShsEIQcl7WKTDuO0DrVdQnjwEeShxqW5QFSqdIlBbkdqOTgo0SBfW5WHRQNd2A3QFCGD1Wh7Z2sTuwtLsXBhARphcsPeAgPlAdaq1CO7GWHhiAx8NqSav7utge8PWEAeQQVzWTxfRk/xRY4GBKBKoO9aiocw4iAsTVShR7AEMfpTDgnRgS4igZXp6l6J1tboVkcaRjNl6z2+sdFbM7YOhh0TOwwDtgtPSuokkS6xfvjLA7uMNw5z9UR8Q6YmOc901unwQv2g2V2uVJDwkRyCrSKtt5GPA+cwWcZPMgrCsl6y8KQWogofYvr+hf9/ioS921tXlf3jJbOZyfxAkCAg3Io0olN5E/UuN/fiBBlvjhOjKGAe9j8q2JGR85ZqgkiU6QhrvDKe9Ijmg7ToXpgBcGCiTKUEnyQkjooKRA7b24gFfbsgwgEHLGg4M8UxZxuvQr/D3IZzoNKiGGAWzUFuNy8W0ga4gkAc79giwnI3ouZh+9PinBAILBoLpcQVECY1WZuYgoIEePV1Uj4VEZ/JnryNWtH2OPWB+P1OidMnD/wzALHnIcue470tCcYrUgI3orZmhSLwIeQZErNrrdSaJclZGIHIk2NplRjI8zyMeGy+BYO47VG0hBQK5zZyqXmiAb/mndBae6VMdivm1tR5J+MiADCakiTJIROrkYA3CsS3Uu5ttiAGsIJgMykCAWUcNG1SFnIFN8GDmCDmZmIkGSJHq86sD/ZxByxMeZju6fgwQnifDEOaZ7YhTgnQH4OfWkYYemMgMB7FwZmrAJwcPBju3kxwnjJgnsMI+2FL/T49WASZYhKsyAZv/8y4QZjOeIGJOoIb2bDzQcnLqQNlkYY79qsskUGY0HVLUoA4cM+D9oS/laCiWYPVTS20MAdqg1S5NVpDfeR8aDYJnjpR2Gpm6ZksQyIweHYv9hIDVJavKYcsTS1bympy6kK/UPryjBuqYjdQWQbB2YownZdVTwwQnj4D6Nr002g72DAJ2BqptMnc5SBh4YEL+0Iw7tg6RebgDMobYophcOFEc+BhBIKS/tNh+SbUlv293bvTDG4EmTow7OrSys2xZob48M0GorxVU6LrhHrFZHq0VKoM4bgoFuj1rRq3Li7rEm4B0uM0y3fWClWJhzdPhADCC+LOCKFuDSu0gUjTDAoUoKGf5QIIR17nyYrDeXZUASXH6ObUoKN6BXhro94AyZuzL2ZGv/mAwwYmIVYj+XTS0GBPeCKK7DHAGPlHso40i+PhuPAcQE63SxCkPLtRZz6dsgpI+qQ6XCk4MJJERSolZ+CHZHwrlG6/jxGTiKh5NnZs96zNtKhi1xDzJOX9IhgQL9YdIeiKf+6BdrQvk0N9xe418BD9ZoG8VAQsyR/AX1iy58uYWLmJb1wg+gRXePAPhAjwljtJ2HAUoQ1BYl6tTz6wkgdEKU5ldI5AX0bCUjW06kOh3WKQM7cSAMQ/a0+HhLAMrLwpWjnnSK5axE6uVADMD/FtWhtiib8fa/A/5uB8+OHq1/KXg07uUZ/TIQzNB80r0+R76M1Y7xGYCvDaygSuUd1dBFT+VtDwzAU0aZvec7/fpSvUPMzN0jJAL8E/2h0j8yCFVSzMyBoLY/MoAAksaRJPZS5tBmsFk2dxBo0t1jky55JwWLnx1aul3oBxU6Xt4vLvaDonYAk3Z3j70EkRi1q2QAgrJCRExYL/AmELxgzifNu0LS+IWBFtyeS3zskkGo7NKz9TWwgTDrK5u7gwkOz8gfpoYNpXQAP3HTa+ElL6xwAkt4Skp5ooFccFXL+eQX08DELCor8gRVrMLjlCX6bzBPSRbK2wqB6bUS44/lnyuHZki+gbsVZz/MbfxkRRERvyHjrGuq3QNk9OJky3JuJ4PBnzsLqIrPT2P3vyfezNO93q4YgOMsbm+rrpaXN+BxqKYlCK5ufPDwgTkLd16h8fcPQ6Jle8LRsIqJVjDwQDDSy86x5ZyhfAADJCeVLbuT+tjhKNB2ukWxQXQ4Abw4ATe1p9gOqduFBHJaJ0lU7P4esQjwrjWTPghOhPkjcHMDXjuKq/zveHhHnLzG8XSDXIfKLSMEjohWENF6heP6Ioy3IoMbTQLoJkfXWHN/d5DYCRON6+VlnEv5jYKOO6nVeOwkhJW3mqeDXWJFvIWBtPyE68j2st/cBRV0PjWRPPQ6LP7rEx1YUJnzaG7ufw8CcKMHQzYXgwsLYbn5oBVyQX34ftUT77RjGRqTqVCS/y6AmWQWE4Od5AN8cBdpCR5a2BfWRHIUgWMWw1IywGDYL+FhjzYrMdljcHtCmf0iDBLcOeZ425kmsofzOYEKyYuSyUFKTzLAg2PT/TqB74ANEiCWktW9imf3ZMGzAbFIF6yTxCKHFMMGDumOo4HGspV0PgEmpe4edKTJXoArOWCygyosMIfNkLFVZD7aknTSJ1NUmNgU8bDXndh89Nim6D6bC8WpyVsU3xl+yXPYnLwwbDjMSLD82xB01nWpBEl0hhWRzpwEjElJwlTXxfBEv2zFsGEbJiTeshV1PGGLyci+qjwIfRVMqYo1l7sB3gUDElvZog6lkpXJ5CKgtRyh/eQrGeGJBkOv9OjRBG+iuffpRHaGYkRYoHj2BHFC8mWEi7z0OAl4RUnyKGWcO2GMPrhVbK2EbLGyDic+sBh/Y1ubEg/1YWRz3FLeYIVoUfDWy3dPCHBeSHQjNbK3eTBYsnt+92AHsEsCRh4oHRgttJni2ojhY7IjCYwyNMlromCzY9gdhtq1jJbXARCnbYk3h27Yyl4YUvTqt3n57C38KcVmsL8FSwFWDE0FwfgeFeHn2L2kwJo9QQyTPP4X3ZgKdPg5Az5JlvOR9xGcZHoROXuCvBAyUocPlJEgZ8MK2z8ihCUvaNMmCI4aJoLg5yFJq9GzsEz3C1POO3N8z8NjkiQJPyWISZKgk5WBRgxgF1mg+mjROnoWhVqyg3xFSdZBtRjg+sPUAlZDjz9mbiVC8vGK8EsSpIbdNXQYrhK/YnGn6fjCDOwkyVbSsJHMnCBssnRCvwzsJEky4JkTZOGyJ3yx56rhjue+dLPt5gJqNd4nCdmX5XhFdhz9J570XIsyMBQDSJKPnIBpB1mYArkrFlN8neEgkms3ATP0Q8s8DMx8xBrey/7IZ5iGcD/1Yoq/1nBNEJ4/b7zhxUeb4homVzB7grA/Cuzsy36S4+4yecyzzJckiGFp0MFFGBAer/4J372K2DCEUFoRUVllCMMiQbIM/xtsI8UXGwYo7g9O9JUrBuiigiU7yNWoWAQGSY42AjXbU5AOBk+ocgv7SMlVcLXxlCAL1yjvIO60XsdLPtWhP9W1DQ0SfVigxyu+x6Q7iOGr6nbGIkR2a5Ek0EnHJCPAvAjm6BRiAKRzi70SczCe/R62IszU4mIUnLX4CHo8L+RDh0q7e16fQCC3XOplD8YTqSklr0OC51ctwKUk8aX8FWg54SSfzVDkUFklgLxKC+NTApC4s6W4yIDNlMLWSm4kJ3mSJFIZhv2VVsSU1Ptnnfgqj0O8kUCRmrRkSFZMJfmPlQ2bODu+jZW7O07oCLMrcNAHQh4w7aXYFAogjRIjR3IQMJOCpce5sMmRYbEl2QYo4mRkwGWTFXcoIBiXqXWQY2LMpHGolBQONVexMbpHGyMgx0htvP89CH0+DqVcGe/cCYOM/wDOXMcSA1kU+GT6Qj98Cb97CRya8CBj+wm/2ozyuhAFLk0TIFDsUFmlCdAKSkECreQjl1wJXoFtngo4ReIbw9PyN3r9i8Kwqv09PbkCWHMyZMjHfuX9HBL8z5+b0i541RJ23Sr2rRNEotBIJo0wZ+AkGTWxY8OCG3NJf5++TpAlFuFqXNVsXumtcjlgknwA81KFnAZKmp9YJIfuBjxVVyk890rolM657DvH2tkgxwkIMmsZ3Ov1DkJz2dszAFuu0tHG+52k13P9J/D1im00V7/gfU6QlwHa8cOAP7pQIC4dcULJYTvCUwwKFmID4VQ5Jen9Y1ORYAv73hR04U5yFqqTcJVpjr0wvZumCfnOf/QEEMnnzNM5jLwIrihRapYpefZcS3g2NDdrAQpJgky3i6xJ95w5iQcj55BP7FrnTNewXbQQFeMo0mnPw0wxQIMI9o4kZ7pncgT3UyfF2uVCPrMcr/b+bd4FAM0aZMQ1jV8ixl12iH+RJ/sW+gHHGjRUqbz/NPefxl8vvv3yLTX5XyxXwke7fOKQA/+TM5g1FqBo9WIXlhIdrAxEMIAglMRilt3jEB47O34m2EOh+lAZYDIgjMMqCSLJ3G+m/TpcGdhlAMlhhAlidoUyH2T/RSEMskwMOlwZ2GPgtvfgoL/eO5wwe3UXOfCePopjoIfd4xQp7QbCJLGnwnWAMnDAAOLOSWLvQGSZRxKQNKcMGpU6AwMIH+m7h63OD8DqLlKd9bkVIuYcKrs0Y42N1E9oBlgVD8sAQke6ILtmRieAts1Aq+LhGECcSY9WtCSbpgYTAklpClqVD8UA4stJYozmNTcUIKRbn20OXgF0zwDia9zdI7ArzG6aZoMMbZWBLQYQI44CRVDa7x7BIICX7iJktwlytFUG1gxcKq4o0oWln0xfe0evmzKAWEo5Wtmm4LeUw6CUXaQ/g7aM1L5qDCCeHKqk9LvgSqxZzdEkqRZ+fStCTKQstqZb6xIN++7WMAVWjYHEGOp39wgMJhpogxxt52MAsZPy3oHpg3zgQ0gTiibJfLlxtxgx46aIGxiZcobUo9aECZIYM/0frZ59mmiwfZan99dlIDFWMH2Qo9WzCwl5QjHP8vT+egwgPpJOGzR/WFYSjR/X8GE9Vhd4YnxgegdfRkylLIEETZBU8juenxAXlBihmI5NjIcGayTb6DWMj6dpmpGIh9SPcylB7KUII4uYxVyKADXmzgBiQJNjKxZADGcXGe9juy2jte+BAWYM7K2n142NWIIeWNWbSzAQ6/u9rPD9102O4GUYerTF2jBO2+swkCk5KEdML6y8lQSyMvQGPb//xP8s/69eSW57k03JAUzk59TysfpvJFJl6XxloD0DlByoOYptb40iUAYyMYCMoGO0y5EZkGEzwcoqpugRKyvSzoTBocZDCm1A+O4vvq58lPQBneNIRXR99srV3n/BFpw9XbsT+CHoiQ8TSUq5/wIsEkCpYbMkB/E3zQ5yEvgmdzBhRbwct55D2jVy8dXtzhHiYegdZCfoybaw4udyZOArtl1iB44yLvOuQWZ3nxyj+OYfOQfV+Yqm+2KGIfcEKJjO9QnV2mn2RK0+5jBQyElrh+W8dhzbeh5biHfbs83DYssZwYVlmWFJ9sALJQbRPjw33fq2oNPIcbnK0LsHSChxnArcanKUzq7CDgyOTGmHDILCvA69aJSO6ezy4UyXEsEF5w4XCOCi5I5BVNvsAaACzxkoGOQpos058j5GUOCmGBo51/Zh7YQoKjk4Mg7uw7rfPTxnmhjMfBnyF4X4JTU5mky9Me2dajglhTe4Fk/6y7+eIuy+dvfxIwRic3ooKXytzUw3HOR0wpA7yIoA+kJgrdVxpbafS0oGj+YdrfHXNZtL7xrDf6HOB0gPSVI8UGArJQBVKq0S4kf7JN+lGj5ByFsIHIfG0HXjskD/1woD3T8UvD8t6w4f9OsuujarjtaJsILye1l8MfjV1PjiKgliwCMliZayDEyTGIHG/8LFyK1flT9HtqFz7JQYVGznOLPDu8QOEljp6H0kQBq9/ZwxKdZOu1SCkGFIku+1gXotYmD6xAisXeKIFYzxrR61nghh3FJiULGMOZceerkdhLylRy1WzN4XFE2Kbc4umSA+SXr56Heb+fa9lBgLEmNpD6VfBFdOEAPa9aPfx9jT3eKRj9O7yyYIWa5Hrbv/dac4TYP9AZdOEDJ7wiS57xIwXY9P+3Ef/eTyCUJMIEmu+tHvAvO+yEZ9ySYW8pfRv80bywitqrfYwTvjFvR/hpda5Jzx46h999fUmNV1jsvFC7knAq7v9wGHf6ZNIQam2EGIu8SjFh1XPmJ9sEqe5ynmucPfL8/9mgDPjOh9cQYQuA5VUkxxcKpAGWjNADLDCLJDPypu7TjVX48BJIhlJomph041KQMdMMBIEt09OvCXQmjAQOQuYhpAU5XKQHsGYnaR9igVgTLQkIGTJLENoalqZaAPBpAkDvWl9IFOUSgDjRlAZmx99Ksv5439ouo7YgBJ8vzRr+kInkJRBtozsEoS3T3au0MR9MgAksShmh6xKaY2DPwfbAt8Kzss/5MAAAAASUVORK5CYII=" transform="translate(-138 -199)" fill="none" fill-rule="evenodd"></image></symbol><symbol   viewBox="0 0 51 50" id="icon/programming/icon_posture_off"><image x="141.573" y="479.615" width="52.007" height="52.007" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABGdBTUEAALGN5fIAKQAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAyAAAAACbWz2VAAARmklEQVR4Ae1dCXbjuA7s/Df3CnMy0yej+mT5BYdMy7JkEeAiLuB7Gm3EVkAJlOKZ+fNHhyKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAgoAopAxwh8dOy7uv4Gge/vb4vbn2+m7N76+Pj42r1R+CL8dVITV/ks9VflGkCACg6bZNgr3Jc4GmRK+vu/kspVd5cI3FB4tkvPCzitBCkA6gAqbwPEkCUEJUgWGMdTol3kJ6dKkPFqO1dEtNQyuZT1qkcJ0mvm6vg9/VJLCVKn0Hq1YmZfailBei3den5P3UWUIPUKrVtLM3cRJUi3ZVvVcXpht1UtNmJMf2qSkAgUjYE4bevxuT7BsfHni9/f8dOIcOwv5d/BNwetJqdm+F2sXuDvt9TXkn79J3VqFrkdEhABjCD+IEMvvnck1Qp0XCoCv22PfqeApgTZoLchxG1zO9fpDXb+dFhsvfotzluxlin26AJBFKv1ZksRYjcqEKQY/ojJwajZNZx4sYTf8Pdb6lYJf4Iv03YQT4pPAGECGLX38MEguUttu6n2CDv4bVP19CA/FUE8KSgvVTvFm0IwuLe8ud/qrRuw7HGJyMazWItne1JIAIk0UE1bK6SAK7/jq1QHQdwOVsyvpQIH8D1b/cDfb6mLOf3Y+jBsBwHe1gfbIjEerpUixzbJpc4JY8RgS+lvQe9wBOmBGD7x9xYKINGHG/Aeeqk1DEE8MZrtFptCXAZ68n5uYhvq9H+9R0PEwEbr117IcQc5vnrHfeX/0L/47bqDNNQ1FhTM31XRrA/pHi1DHns6HnDckAvqistosXVJkIuIQclfk2DIgkgocOrghNFQoyuCXECMx4s0nox2qKyXCeax1BoNq48yWOXXWokcwxACeDlkweTPxHuNIIiopuAvvUeKhtRmjLHmO0gFYgxDipiEl55D+Rqti5TGTKyfwMZWalixYx0IAjRXCrgIvWxsI3QeTimZDlE7LOlQ0A00COTcn26n6RbA75IlVsgfd9lD1R9kuXuuLY7+5pZYBYmhX504lZE4l/KoS61EELfiBCq2nMNubcxyDhBdApApsmuz0fivhbjHU+QUoOQkR3RiRgUXeDpuoa3mPz7Zrs7Fh7H4ig1AMNaGZF4TPzVBjLRevkkC2JG5a2vfQYV5KReGyK1lmm5q+uUE8eQwGVAhYtCwGXSpih8EHh81EsG49U6SxPhl4gCN2rjDljqszIOxpQCqSwDWBHSgI8vSN+g72if4WnSJdeRv0esAg8iRY9iijnasHOC6BIDNOvQEPWtRu9a5PV5P5B5vdeU8r77EQvAGAdA7R8pYIPyly6kUCFmyuZZahmV1tslEDu7TYWe+nQ03SbzAze1gF3vJbG1CMMdS6/DBGOvY3rytr92eIzi3FyDjmu02+MqOJ2Jt9txl5OndVJtb956+XNeqLbEoYXDaJDiuS6oE8DKJTrfUqkKQRHLQT0RoLJmSrGqECCAHFqKLUHwtZtYnLR8XJwjIYQGAEYJA5PgSyqpYGQRydRFbxr2OtBI5sEmHApiQa4DupMBDzrwzjfspef11a23j96LgYK2nm2PEmfLFynYTaKOOAn8nqLUgYs7CChMT9zbYSdETdJTYF1liIVgDZw8/6Z0Ecvdr3ZNpevtiBHSpJU0ACOKETwQpqaSuDiuXkANKnYkBBvOyLbXIqHTE+Cqdk72DIEgLZ4zAIX0hF4B2pUiuTu9r5spQDm1nJQgCNbB0O7R2fEPJcYxN63eyLLVaDTIbQTw5REsk/ZTbanmc++W7SA6SnBu7YEY2gsB3SeegkL8uiFtNZkQg11Iro0vZVGUhiO8eRuDVHeAuAjkVaQ+BIbtIFoIgV5KlFZHDtpdn9UiCgM/lcCRJJojwCwS9lCs5JJXYsMyIOU0iSMJXq+GeNA3XbW3XhsptEkGAvOTF/I4nzVI7a2qvDgK+iwyTXzFBhC/murSqU6dXWxmmi4gJggyIXsyvzpzaL4+AXyEMQRIRQXz34CKtSysuYh3P90utjiP4cV1EEIhy3z10adV9qYgC6L6LsAkifPfoHihReUwu5LtI17lnEwQ5l3SPZfJamTb83pdaLIJIugcA+pq2OjTwgEC3XYRFEETL7R7dAhMyq/t0BHpeakUTRNI9AO2SDq9qGAGBXpda0QRBkrjdg75cLSMkV2PIhkB3KwoOQQwTpu7AYMan05kI9LjUiiKI4A+D2j2YxTPL9N6WWlEEQfK4yyvtHrNUvCzOburjlCCCl3PtHrKimUbKd5Glh4BPCYIgtHv0kMn+fOyii8QQhAW9frliwTXtZF8nzZPkLUEky6tpM66BsxHo4YX9LUEQsS6v2GlXASYCTXeRM4JwYtWXcw5aOveBgO8izZLkjCBG86gIlEag5aXWf0fBC/442OxT4CjGUteBnd3o/lyd/8XxQuf+RZUOdfz5Q/XDXdJfhxuS7LBFj+s8bcMygKL/FYCLBuzfRJIxuaOATtIrHdn9iYkPzor+dwoxurPPgbOOga7L7kAnCqVJPcDWdhK2unmQwKPL0yU2MzHWuDqcGK3AhhGgBK0zFnE8TUKBhWgZEIHhdsq0Xblhavy4xi2C5gPK5CAXl23FC84dZEwm91VNLgSQFEpM7JjiSQcwanWOPdyVJLmKm6nn7O8gMeros+XQg8iBAK/8BOnggxka5J6C23uEvbk2dOIQ95Wd4wn2nmpoFF9fOggyMnTBcxLnsbiyczy5C3+mWM4+BX3xyQtBuP4M/tfgZsjh80JfFy03RzpfjsAeQYxc3TiSvnu0iEVrpB0n6TuR7BHkc2fe0aXl6MYA15tdzmgXqVddewSpZ71RSx0UoHaRSrWTSpBRP/FyumilVD2b6YDEzw53epZKkE7DPna74XePrdPNk3jrcI/nqQRZegz6xGdzcr+V2734mYwXPbSoY2Kj4fx2TfzkAWNc42Qy5McKELtjxH/1VHscSf93AG4gxTuci2Jw+G8U9g+vOAIjllTBLAiADZSD2K+IN8ynfzvTZjG+UZK6xNqo09PKCAz3HoJit8AwlhwB7ls4yL1XgqwQ9U+u1RU9rIUAEQPbN+yJip3kS/j6tMSCEcMxMvjPTDhQXDWXla+rnHxn19ccxSEixkr3DbqyL7WeCEIFT0Z0KAI1EECtWdhJJcba1c/1SY7jpCUWAjQ5nFAdcyFAxMBGT+Kc5CAQDemmg1wjiSC5nFA9YgQWseQFgp4YDqZzE2MdTVbdSpAVtPpOtQIj86F/slPxmsyqX9Tl7CJKkBd49UJOBHzX+IbOrE/2Ex9vsGtO5kTd3iPIEiX5M8kw5vYydenFUfhJ/7nOJsdFxFhjYdYn0uM9gkh1jSI36i+Uq+WHyAFjNTvGXmzURciPpKEE2cBX6icLGzM5Tpv730000DW2uCaTVAmyhbSf82aWVw0S4zeLqV1kjyCcJcbnrydjHTRTfC3D6onh4GPyk7pgnEm+7RGE46vhTO5lbgfLrPvVn6T9k5mKr/kaSO0iT3ULZfTXyOjxJDzQCQB4/LU3GoiKE6+GuRA2hDer9piQ22y4MQ2bbIYbU1SoEJjwvky3V8JUCJNHTNDtXqLNeEGCW+oSi2waieFOZJbG/KQvV/Zin5LW9BvfaalIQxLTstF1egquSey86oUixyBuHqOvbjRxhUBlYFFyqmsBkEwB7tYMUzctx9i54WJ41EE4X7K4Nrua759uLXzVutwHFKRJTB7FcN/rGBLde3rO/CNSnc05vc9l5qnCASZwMcH8nMO0AmFCUPZdDNDLekEPuiDH7iJkK8iL9gKjaQZFXtYX4iYR81NHE8uqNdIIiFuQdi1/dAy9jgHWEy4MuTA1yqcjXx/Xg6bIfbrBt960cxN40JPOReKSMq1ZTCPjZ/kfqTPguSUIl7Skh+XfSwWmOPyibMALBDChXGA46ExLXgW84SP5eTRY/kMJPXQ4w2xDhDA7H1sdrHOuQZbygSZzcTqpAtsTNIiFCps2Kk7ajMR/rwO76LFrJ1r630Qr8fchAx0UMGfsOi12oDNBAEWF4jiA+bniwuoMokN3ubgdKYIebs1+H+kK1z/Cwd6eErh3/eDa7ue7g7lDXwZsxgcY9p84/+uv0a65n6qvfKt+yKwzwu7ryEmmLlIjr1sYc2Qwdhw5rdcVgSMEUFvUeTnDHOmi61DE7iIk807n4T2BMZmhQw/0xugIoMYctugRgweUcUny9FVsbePoL+lhzhIOdK8IFELAMPQukXNj5wV11MVMOGHto6ntJ7KU6+SpEaCiZNaXiQUMerldxO7pPusgJEO/n4ke5Fj0ZJ04OwK3UgBIfqe150sMQZY9Qb2mCKQgQN0D8rTFDsmXP87DfYl15GUegnHYoseLAr2gCGwQQDG56IL6mWg2KqJOI+0cvqTHGsmynosyppOmQIBJju8UUCJIYlL0P2RrBpTsrCpoGgHUEveBm/aEBxqwaTZEceRHNqBIGTbOyGc8WxSqqAUEOEXk55qr/I55SZf6VuwLhdQhlbseARS8ZXoheTlnmsg0XcB8LhiZPFU1rSIgqCHTaiwvfhH7uQG+KNEL0yIwRf1wCUKgTFsRGvgvAqgDeknmjv5qBxGyuwjJ/CKlB1MigBpw2FijW6BYUfrJ3QarjicjgBKYo3sEpBCwdpEAhu5PEUC9OGyscaq09QmsaP3k1mNS//IjgNTP+TCdNvD8NTSsRtSIZGmV9LOSpsBUkjSVjuacQX04bNxhmwtE6hAiFz0hSE5qU+X6QAA5liytkn9z1Rw6QiDGaaPNZeR6h/TBuckBAJEMu1GjpwMggEKQrirGrQeAImmnRKpxQRmg2CUhIKeOEssc4y2ttuABEClJzFaXnveJgNbASd6YT431dHOiWm83jkACOcbvHiF3CSDpS3sAscN9Qt7nIUfIq4IVkJhjj3xLX8ohOunnfgTuKHrBmO+J0jGPkN8UctiOQ093XUCOIDI3cOnQV9GQSA59EAJA6VctIooCWKXMZUaUHDLcXqSUJC+QdH8hkRwQn/S94yjzqSRRQI+QrX89MZcQV3LsZg3AOEInYZhdxXqxGgLIXcqSmVJvqznboyEA5AilhGF6jHsEn5EzJUeNRAJol0AQErU1/FQb/xAgzDVn//AoegSgTSLYJK5fuIpm6Ue55qoCyHsmMgFPRDF7+vVaOgLANrVrUH5suieTaqDiJgQzDE1C5hpCTpQcmTEVqUMiiCQOW+pwUGBETqjQLwLAMAcxKJf2V6kepCMAQB2hmmFoYoTpAPZKDiF2VcSQIJeBIEGFqeL0AEYAWC5iEPZ2AEjaDSFzshz0mXajvdazzFhDnZKjSkYLJM5BpxLFZ68AvlCp+FYhRzBCgBPqmYeDvmmJgthpKZVzOQV12jVCzV6yRwIcZSHzcNA3DVEQa25ShHTYS4pCjT4jUDDBDrppM88W+z+jmLCVIgZUa+doqkp8wikxpYaD4q6JQv5jK0kKqFdiNEWMrTNIkKMsFR4O+qnYmieM97M0KWDmMew2H7Ocf/QUKFJl4O8NG+1Lj8UbuNP+4+MjnPvLdXc+duOtEgY1xh1x2xqGWrXRFUECiCgWSlqtIglmF3/wF/vHcSnSbMjwCXsGW+0xPTkI8C4JQo5X7iZk8t1Y/E0iz3os6xN/bHauEQlomMc/r/2HEmOFf7cECTE0RpTgVo97JcZO1ronSIhJiRKQYO+VGG8gG4YgIUYlSkDidH+nGR+Tv4SfoTQcQULASpSAxMteO8YLJMcXhiVICFmJEpD4o8T4hSL+YHiCrKGYkCy6jFoXgOB4KoKs8RmYLEqKdaITj6clSMDNE4VO6Q+Phg46HEqKQkmbniBbXDsgzAKf/5Lf+gWKUCg7lCAn+K4IYzC19l+8F9h8kAH7BYSgcx0VEVCCCMFeEYc0GK8mEMifPnbhXri2hIPVPpCALikRVsDooSKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAi0hMD/AbpiJdNyMqnDAAAAAElFTkSuQmCC" transform="translate(-142 -480)" fill="none" fill-rule="evenodd" opacity=".452"></image></symbol><symbol   viewBox="0 0 53 53" id="icon/programming/icon_posture_on"><image width="52.007" height="52.007" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABGdBTUEAALGN5fIAKQAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAyAAAAACbWz2VAAARmklEQVR4Ae1dCXbjuA7s/Df3CnMy0yej+mT5BYdMy7JkEeAiLuB7Gm3EVkAJlOKZ+fNHhyKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAgoAopAxwh8dOy7uv4Gge/vb4vbn2+m7N76+Pj42r1R+CL8dVITV/ks9VflGkCACg6bZNgr3Jc4GmRK+vu/kspVd5cI3FB4tkvPCzitBCkA6gAqbwPEkCUEJUgWGMdTol3kJ6dKkPFqO1dEtNQyuZT1qkcJ0mvm6vg9/VJLCVKn0Hq1YmZfailBei3den5P3UWUIPUKrVtLM3cRJUi3ZVvVcXpht1UtNmJMf2qSkAgUjYE4bevxuT7BsfHni9/f8dOIcOwv5d/BNwetJqdm+F2sXuDvt9TXkn79J3VqFrkdEhABjCD+IEMvvnck1Qp0XCoCv22PfqeApgTZoLchxG1zO9fpDXb+dFhsvfotzluxlin26AJBFKv1ZksRYjcqEKQY/ojJwajZNZx4sYTf8Pdb6lYJf4Iv03YQT4pPAGECGLX38MEguUttu6n2CDv4bVP19CA/FUE8KSgvVTvFm0IwuLe8ud/qrRuw7HGJyMazWItne1JIAIk0UE1bK6SAK7/jq1QHQdwOVsyvpQIH8D1b/cDfb6mLOf3Y+jBsBwHe1gfbIjEerpUixzbJpc4JY8RgS+lvQe9wBOmBGD7x9xYKINGHG/Aeeqk1DEE8MZrtFptCXAZ68n5uYhvq9H+9R0PEwEbr117IcQc5vnrHfeX/0L/47bqDNNQ1FhTM31XRrA/pHi1DHns6HnDckAvqistosXVJkIuIQclfk2DIgkgocOrghNFQoyuCXECMx4s0nox2qKyXCeax1BoNq48yWOXXWokcwxACeDlkweTPxHuNIIiopuAvvUeKhtRmjLHmO0gFYgxDipiEl55D+Rqti5TGTKyfwMZWalixYx0IAjRXCrgIvWxsI3QeTimZDlE7LOlQ0A00COTcn26n6RbA75IlVsgfd9lD1R9kuXuuLY7+5pZYBYmhX504lZE4l/KoS61EELfiBCq2nMNubcxyDhBdApApsmuz0fivhbjHU+QUoOQkR3RiRgUXeDpuoa3mPz7Zrs7Fh7H4ig1AMNaGZF4TPzVBjLRevkkC2JG5a2vfQYV5KReGyK1lmm5q+uUE8eQwGVAhYtCwGXSpih8EHh81EsG49U6SxPhl4gCN2rjDljqszIOxpQCqSwDWBHSgI8vSN+g72if4WnSJdeRv0esAg8iRY9iijnasHOC6BIDNOvQEPWtRu9a5PV5P5B5vdeU8r77EQvAGAdA7R8pYIPyly6kUCFmyuZZahmV1tslEDu7TYWe+nQ03SbzAze1gF3vJbG1CMMdS6/DBGOvY3rytr92eIzi3FyDjmu02+MqOJ2Jt9txl5OndVJtb956+XNeqLbEoYXDaJDiuS6oE8DKJTrfUqkKQRHLQT0RoLJmSrGqECCAHFqKLUHwtZtYnLR8XJwjIYQGAEYJA5PgSyqpYGQRydRFbxr2OtBI5sEmHApiQa4DupMBDzrwzjfspef11a23j96LgYK2nm2PEmfLFynYTaKOOAn8nqLUgYs7CChMT9zbYSdETdJTYF1liIVgDZw8/6Z0Ecvdr3ZNpevtiBHSpJU0ACOKETwQpqaSuDiuXkANKnYkBBvOyLbXIqHTE+Cqdk72DIEgLZ4zAIX0hF4B2pUiuTu9r5spQDm1nJQgCNbB0O7R2fEPJcYxN63eyLLVaDTIbQTw5REsk/ZTbanmc++W7SA6SnBu7YEY2gsB3SeegkL8uiFtNZkQg11Iro0vZVGUhiO8eRuDVHeAuAjkVaQ+BIbtIFoIgV5KlFZHDtpdn9UiCgM/lcCRJJojwCwS9lCs5JJXYsMyIOU0iSMJXq+GeNA3XbW3XhsptEkGAvOTF/I4nzVI7a2qvDgK+iwyTXzFBhC/murSqU6dXWxmmi4gJggyIXsyvzpzaL4+AXyEMQRIRQXz34CKtSysuYh3P90utjiP4cV1EEIhy3z10adV9qYgC6L6LsAkifPfoHihReUwu5LtI17lnEwQ5l3SPZfJamTb83pdaLIJIugcA+pq2OjTwgEC3XYRFEETL7R7dAhMyq/t0BHpeakUTRNI9AO2SDq9qGAGBXpda0QRBkrjdg75cLSMkV2PIhkB3KwoOQQwTpu7AYMan05kI9LjUiiKI4A+D2j2YxTPL9N6WWlEEQfK4yyvtHrNUvCzOburjlCCCl3PtHrKimUbKd5Glh4BPCYIgtHv0kMn+fOyii8QQhAW9frliwTXtZF8nzZPkLUEky6tpM66BsxHo4YX9LUEQsS6v2GlXASYCTXeRM4JwYtWXcw5aOveBgO8izZLkjCBG86gIlEag5aXWf0fBC/442OxT4CjGUteBnd3o/lyd/8XxQuf+RZUOdfz5Q/XDXdJfhxuS7LBFj+s8bcMygKL/FYCLBuzfRJIxuaOATtIrHdn9iYkPzor+dwoxurPPgbOOga7L7kAnCqVJPcDWdhK2unmQwKPL0yU2MzHWuDqcGK3AhhGgBK0zFnE8TUKBhWgZEIHhdsq0Xblhavy4xi2C5gPK5CAXl23FC84dZEwm91VNLgSQFEpM7JjiSQcwanWOPdyVJLmKm6nn7O8gMeros+XQg8iBAK/8BOnggxka5J6C23uEvbk2dOIQ95Wd4wn2nmpoFF9fOggyMnTBcxLnsbiyczy5C3+mWM4+BX3xyQtBuP4M/tfgZsjh80JfFy03RzpfjsAeQYxc3TiSvnu0iEVrpB0n6TuR7BHkc2fe0aXl6MYA15tdzmgXqVddewSpZ71RSx0UoHaRSrWTSpBRP/FyumilVD2b6YDEzw53epZKkE7DPna74XePrdPNk3jrcI/nqQRZegz6xGdzcr+V2734mYwXPbSoY2Kj4fx2TfzkAWNc42Qy5McKELtjxH/1VHscSf93AG4gxTuci2Jw+G8U9g+vOAIjllTBLAiADZSD2K+IN8ynfzvTZjG+UZK6xNqo09PKCAz3HoJit8AwlhwB7ls4yL1XgqwQ9U+u1RU9rIUAEQPbN+yJip3kS/j6tMSCEcMxMvjPTDhQXDWXla+rnHxn19ccxSEixkr3DbqyL7WeCEIFT0Z0KAI1EECtWdhJJcba1c/1SY7jpCUWAjQ5nFAdcyFAxMBGT+Kc5CAQDemmg1wjiSC5nFA9YgQWseQFgp4YDqZzE2MdTVbdSpAVtPpOtQIj86F/slPxmsyqX9Tl7CJKkBd49UJOBHzX+IbOrE/2Ex9vsGtO5kTd3iPIEiX5M8kw5vYydenFUfhJ/7nOJsdFxFhjYdYn0uM9gkh1jSI36i+Uq+WHyAFjNTvGXmzURciPpKEE2cBX6icLGzM5Tpv730000DW2uCaTVAmyhbSf82aWVw0S4zeLqV1kjyCcJcbnrydjHTRTfC3D6onh4GPyk7pgnEm+7RGE46vhTO5lbgfLrPvVn6T9k5mKr/kaSO0iT3ULZfTXyOjxJDzQCQB4/LU3GoiKE6+GuRA2hDer9piQ22y4MQ2bbIYbU1SoEJjwvky3V8JUCJNHTNDtXqLNeEGCW+oSi2waieFOZJbG/KQvV/Zin5LW9BvfaalIQxLTstF1egquSey86oUixyBuHqOvbjRxhUBlYFFyqmsBkEwB7tYMUzctx9i54WJ41EE4X7K4Nrua759uLXzVutwHFKRJTB7FcN/rGBLde3rO/CNSnc05vc9l5qnCASZwMcH8nMO0AmFCUPZdDNDLekEPuiDH7iJkK8iL9gKjaQZFXtYX4iYR81NHE8uqNdIIiFuQdi1/dAy9jgHWEy4MuTA1yqcjXx/Xg6bIfbrBt960cxN40JPOReKSMq1ZTCPjZ/kfqTPguSUIl7Skh+XfSwWmOPyibMALBDChXGA46ExLXgW84SP5eTRY/kMJPXQ4w2xDhDA7H1sdrHOuQZbygSZzcTqpAtsTNIiFCps2Kk7ajMR/rwO76LFrJ1r630Qr8fchAx0UMGfsOi12oDNBAEWF4jiA+bniwuoMokN3ubgdKYIebs1+H+kK1z/Cwd6eErh3/eDa7ue7g7lDXwZsxgcY9p84/+uv0a65n6qvfKt+yKwzwu7ryEmmLlIjr1sYc2Qwdhw5rdcVgSMEUFvUeTnDHOmi61DE7iIk807n4T2BMZmhQw/0xugIoMYctugRgweUcUny9FVsbePoL+lhzhIOdK8IFELAMPQukXNj5wV11MVMOGHto6ntJ7KU6+SpEaCiZNaXiQUMerldxO7pPusgJEO/n4ke5Fj0ZJ04OwK3UgBIfqe150sMQZY9Qb2mCKQgQN0D8rTFDsmXP87DfYl15GUegnHYoseLAr2gCGwQQDG56IL6mWg2KqJOI+0cvqTHGsmynosyppOmQIBJju8UUCJIYlL0P2RrBpTsrCpoGgHUEveBm/aEBxqwaTZEceRHNqBIGTbOyGc8WxSqqAUEOEXk55qr/I55SZf6VuwLhdQhlbseARS8ZXoheTlnmsg0XcB8LhiZPFU1rSIgqCHTaiwvfhH7uQG+KNEL0yIwRf1wCUKgTFsRGvgvAqgDeknmjv5qBxGyuwjJ/CKlB1MigBpw2FijW6BYUfrJ3QarjicjgBKYo3sEpBCwdpEAhu5PEUC9OGyscaq09QmsaP3k1mNS//IjgNTP+TCdNvD8NTSsRtSIZGmV9LOSpsBUkjSVjuacQX04bNxhmwtE6hAiFz0hSE5qU+X6QAA5liytkn9z1Rw6QiDGaaPNZeR6h/TBuckBAJEMu1GjpwMggEKQrirGrQeAImmnRKpxQRmg2CUhIKeOEssc4y2ttuABEClJzFaXnveJgNbASd6YT431dHOiWm83jkACOcbvHiF3CSDpS3sAscN9Qt7nIUfIq4IVkJhjj3xLX8ohOunnfgTuKHrBmO+J0jGPkN8UctiOQ093XUCOIDI3cOnQV9GQSA59EAJA6VctIooCWKXMZUaUHDLcXqSUJC+QdH8hkRwQn/S94yjzqSRRQI+QrX89MZcQV3LsZg3AOEInYZhdxXqxGgLIXcqSmVJvqznboyEA5AilhGF6jHsEn5EzJUeNRAJol0AQErU1/FQb/xAgzDVn//AoegSgTSLYJK5fuIpm6Ue55qoCyHsmMgFPRDF7+vVaOgLANrVrUH5suieTaqDiJgQzDE1C5hpCTpQcmTEVqUMiiCQOW+pwUGBETqjQLwLAMAcxKJf2V6kepCMAQB2hmmFoYoTpAPZKDiF2VcSQIJeBIEGFqeL0AEYAWC5iEPZ2AEjaDSFzshz0mXajvdazzFhDnZKjSkYLJM5BpxLFZ68AvlCp+FYhRzBCgBPqmYeDvmmJgthpKZVzOQV12jVCzV6yRwIcZSHzcNA3DVEQa25ShHTYS4pCjT4jUDDBDrppM88W+z+jmLCVIgZUa+doqkp8wikxpYaD4q6JQv5jK0kKqFdiNEWMrTNIkKMsFR4O+qnYmieM97M0KWDmMew2H7Ocf/QUKFJl4O8NG+1Lj8UbuNP+4+MjnPvLdXc+duOtEgY1xh1x2xqGWrXRFUECiCgWSlqtIglmF3/wF/vHcSnSbMjwCXsGW+0xPTkI8C4JQo5X7iZk8t1Y/E0iz3os6xN/bHauEQlomMc/r/2HEmOFf7cECTE0RpTgVo97JcZO1ronSIhJiRKQYO+VGG8gG4YgIUYlSkDidH+nGR+Tv4SfoTQcQULASpSAxMteO8YLJMcXhiVICFmJEpD4o8T4hSL+YHiCrKGYkCy6jFoXgOB4KoKs8RmYLEqKdaITj6clSMDNE4VO6Q+Phg46HEqKQkmbniBbXDsgzAKf/5Lf+gWKUCg7lCAn+K4IYzC19l+8F9h8kAH7BYSgcx0VEVCCCMFeEYc0GK8mEMifPnbhXri2hIPVPpCALikRVsDooSKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAgoAoqAIqAIKAKKgCKgCCgCioAioAi0hMD/AbpiJdNyMqnDAAAAAElFTkSuQmCC" transform="translate(.573 .615)" fill="none" fill-rule="evenodd"></image></symbol><symbol  viewBox="0 0 47 38" id="icon/programming/icon_video"><defs><filter color-interpolation-filters="auto" id="icon/programming/icon_video_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g transform="translate(-21 -22)" filter="url(#icon/programming/icon_video_a)" stroke-width="0" fill="none" fill-rule="evenodd"><g fill="#4D4D4D" fill-rule="nonzero"><path d="M38.366 48.235c.215 0 .415-.063.59-.174l8.38-5.276c.39-.19.664-.628.664-1.135 0-.464-.234-.875-.58-1.092l-8.19-5.16a1.105 1.105 0 0 0-.864-.427c-.639 0-1.151.564-1.151 1.255v.069l-.015.01.02 10.543c-.005.042-.005.084-.005.132 0 .696.517 1.255 1.151 1.255ZM21.6 45.22c0 .647.343 1.244.9 1.567a1.792 1.792 0 0 0 1.8 0 1.81 1.81 0 0 0 0-3.133 1.792 1.792 0 0 0-1.8 0c-.557.323-.9.92-.9 1.567Z" /><path d="M67.19 35.209a3.245 3.245 0 0 0-3.227-3.5 3.24 3.24 0 0 0-1.64.446l-.025-.015-1.604.935V29.75c-.005-3.758-3.049-6.837-6.775-6.837H28.37c-3.72 0-6.77 3.074-6.77 6.837v8.524h.01c0 .91.733 1.65 1.64 1.65.905 0 1.638-.74 1.638-1.65h.01v-8.786c0-1.81 1.467-3.29 3.258-3.29h25.972c1.792 0 3.258 1.48 3.258 3.29v23.077c0 1.81-1.466 3.29-3.258 3.29H28.162c-1.792 0-3.258-1.48-3.258-3.29v-1.1c0-.91-.733-1.65-1.64-1.65-.906 0-1.639.74-1.639 1.65h-.02v.787c0 3.763 3.05 6.837 6.77 6.837h25.55c3.725 0 6.77-3.074 6.77-6.837v-3.295l1.684.981.005-.005a3.225 3.225 0 0 0 1.578.412 3.249 3.249 0 0 0 3.228-3.501V35.209Zm-3.238 10.544a.76.76 0 0 1-1.145.622l-2.113-1.219v-8.312l2.082-1.193a.746.746 0 0 1 .413-.118c.422 0 .763.339.763.75v9.47Z" /></g></g></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon/remoteControl/icon_loading"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM242.74 665.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256zm592.793 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.133a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256zm782.643-40.602a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2zm384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z" fill="#555" /></symbol><symbol   viewBox="0 0 290 290" id="icon/remoteControl/joystick-active2-on"><defs><linearGradient x1="100%" y1="21.522%" x2="13.21%" y2="94.094%" id="icon/remoteControl/joystick-active2-on_c"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient><circle id="icon/remoteControl/joystick-active2-on_a" cx="145" cy="145" r="145" /></defs><g fill="none" fill-rule="evenodd"><mask id="icon/remoteControl/joystick-active2-on_b" fill="#fff"><use xlink:href="#icon/remoteControl/joystick-active2-on_a" /></mask><g mask="url(#icon/remoteControl/joystick-active2-on_b)" fill="url(#icon/remoteControl/joystick-active2-on_c)" fill-rule="nonzero"><path d="M0 0h290v290H0z" /></g><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="140" r="5" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="140" r="5" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="132" cy="129" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="132" cy="163" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="129" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="163" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="129" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="163" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="166" cy="129" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="166" cy="163" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="166" cy="140" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="132" cy="140" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="122" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="170" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="122" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="170" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="173" cy="140" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="125" cy="140" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="173" cy="152" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="125" cy="152" r="1" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="166" cy="152" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="132" cy="152" r="3" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="143" cy="152" r="5" /><circle fill="#FFF" mask="url(#icon/remoteControl/joystick-active2-on_b)" cx="155" cy="152" r="5" /></g></symbol><symbol   viewBox="0 0 290 290" id="icon/remoteControl/joystick-active2"><defs><circle id="icon/remoteControl/joystick-active2_a" cx="145" cy="145" r="145" /></defs><g fill="none" fill-rule="evenodd"><mask id="icon/remoteControl/joystick-active2_b" fill="#fff"><use xlink:href="#icon/remoteControl/joystick-active2_a" /></mask><g mask="url(#icon/remoteControl/joystick-active2_b)" fill="#FFF" fill-rule="nonzero"><path d="M0 0h290v290H0z" /></g><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="140" r="5" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="140" r="5" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="132" cy="129" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="132" cy="163" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="129" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="163" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="129" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="163" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="166" cy="129" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="166" cy="163" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="166" cy="140" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="132" cy="140" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="122" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="170" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="122" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="170" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="173" cy="140" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="125" cy="140" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="173" cy="152" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="125" cy="152" r="1" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="166" cy="152" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="132" cy="152" r="3" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="143" cy="152" r="5" /><circle fill="#211D32" mask="url(#icon/remoteControl/joystick-active2_b)" cx="155" cy="152" r="5" /></g></symbol><symbol   viewBox="0 0 847 846" id="icon/remoteControl/joystick_bg"><defs><linearGradient x1="50%" y1="17.597%" x2="50%" y2="81.436%" id="icon/remoteControl/joystick_bg_b"><stop stop-color="#C5C5C5" offset="0%" /><stop stop-color="#FFF" offset="100%" /></linearGradient><circle id="icon/remoteControl/joystick_bg_a" cx="423" cy="423" r="423" /></defs><g fill="none" fill-rule="evenodd"><use fill="#111127" xlink:href="#icon/remoteControl/joystick_bg_a" /><path d="m706.679 383.311 37.528 34.683s5.397 4.742 0 10.139l-35.976 34.178s34.017-39.44-1.552-79" fill="url(#icon/remoteControl/joystick_bg_b)" opacity=".5" /><g transform="rotate(90 182.647 279.995)" fill="url(#icon/remoteControl/joystick_bg_b)" opacity=".5"><path d="m611 0 37.529 34.683s5.396 4.742 0 10.139L612.552 79S646.57 39.56 611 0M39.927 0 2.398 34.683s-5.396 4.742 0 10.139L38.375 79S4.358 39.56 39.927 0" /></g><path d="m95.679 383.311 37.528 34.683s5.397 4.742 0 10.139l-35.976 34.178s34.017-39.44-1.552-79" fill="url(#icon/remoteControl/joystick_bg_b)" opacity=".5" transform="matrix(-1 0 0 1 231.284 0)" /></g></symbol><symbol   viewBox="0 0 157 171" id="icon/remoteControl/order_bg"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/remoteControl/order_bg_c"><stop stop-color="#F9F9FF" offset="0%" /><stop stop-color="#AEAEC5" offset="100%" /></linearGradient><path d="m94.664 4.32 46.116 26.52c10.014 5.758 16.183 16.401 16.183 27.919v53.04c0 11.518-6.169 22.16-16.183 27.92l-46.116 26.52a32.476 32.476 0 0 1-32.365 0l-46.116-26.52C6.169 133.959 0 123.317 0 111.799V58.76c0-11.518 6.169-22.16 16.183-27.92L62.299 4.32a32.476 32.476 0 0 1 32.365 0Z" id="icon/remoteControl/order_bg_a" /></defs><g transform="translate(-.226 .234)" fill="none" fill-rule="evenodd"><mask id="icon/remoteControl/order_bg_b" fill="#fff"><use xlink:href="#icon/remoteControl/order_bg_a" /></mask><g mask="url(#icon/remoteControl/order_bg_b)" fill="url(#icon/remoteControl/order_bg_c)"><path d="M-8.652-1.236h173.03v173.03H-8.651z" /></g></g></symbol><symbol   viewBox="0 0 157 171" id="icon/remoteControl/order_on_bg"><defs><linearGradient x1="100%" y1="21.522%" x2="13.21%" y2="94.094%" id="icon/remoteControl/order_on_bg_c"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient><path d="m94.664 4.32 46.116 26.52c10.014 5.758 16.183 16.401 16.183 27.919v53.04c0 11.518-6.169 22.16-16.183 27.92l-46.116 26.52a32.476 32.476 0 0 1-32.365 0l-46.116-26.52C6.169 133.959 0 123.317 0 111.799V58.76c0-11.518 6.169-22.16 16.183-27.92L62.299 4.32a32.476 32.476 0 0 1 32.365 0Z" id="icon/remoteControl/order_on_bg_a" /></defs><g transform="translate(.137 .126)" fill="none" fill-rule="evenodd"><mask id="icon/remoteControl/order_on_bg_b" fill="#fff"><use xlink:href="#icon/remoteControl/order_on_bg_a" /></mask><g mask="url(#icon/remoteControl/order_on_bg_b)" fill="url(#icon/remoteControl/order_on_bg_c)" fill-rule="nonzero"><path d="M-8.652-1.236h173.03v173.03H-8.651z" /></g></g></symbol><symbol  viewBox="0 0 129 140" id="icon/remoteControl/order_stop"><defs><filter color-interpolation-filters="auto" id="icon/remoteControl/order_stop_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/remoteControl/order_stop_a)" fill="none" fill-rule="evenodd"><path d="M64 39c17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31Zm0 41.619a4.694 4.694 0 1 0 0 9.389 4.694 4.694 0 0 0 0-9.39Zm-.135-3.67a4.044 4.044 0 0 0 4.043-4.044v-18.87a4.043 4.043 0 1 0-8.086 0v18.87a4.043 4.043 0 0 0 4.043 4.044Z" fill="#272636" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 140" id="icon/remoteControl/order_walk"><defs><filter color-interpolation-filters="auto" id="icon/remoteControl/order_walk_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.078431 0 0 0 0 0.058824 0 0 0 0 0.149020 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/remoteControl/order_walk_a)" fill="none" fill-rule="evenodd"><g fill-rule="nonzero"><path d="M59.749 32.81a7.223 7.223 0 1 0 14.446 0 7.223 7.223 0 0 0-14.446 0Z" fill="#4C5DC2" /><path d="M41.39 77.106c1.338-8.501 2.807-14.197 4.406-17.087 5.224-9.445 10.637-13.674 12.28-13.874 3.31-.403 7.247-.483 9.222 0 2.291.56 3.862 1.736 4.714 3.528.792 7.782 1.99 12.639 3.596 14.57 4.447 5.346 11.118 7.134 13.033 7.134 0 1.874-.969 4.956-.969 4.956-2.841 0-12.56 0-17.82-8.277-.295-.465-.697 2.294-1.207 8.277 6.813 6.471 11.216 11.722 13.208 15.752 1.992 4.03 2.986 11.72 2.981 23.069h-6.69c-.467-6.2-1.312-10.985-2.536-14.354-1.223-3.37-4.821-7.776-10.794-13.221-2.282 5.299-4.836 10.297-7.662 14.994-2.826 4.698-6.46 8.891-10.9 12.581h-6.728c5.58-7.81 9.54-13.878 11.88-18.204 2.341-4.326 4.006-8.631 4.993-12.917V57.761c-1.761.51-3.426 2.328-4.992 5.452-.975 1.944-2.692 6.575-5.153 13.893h-4.863Z" fill="#495ABF" /></g></g></symbol><symbol   viewBox="0 0 79 79" id="icon/remoteControl/setting_1_off"><defs><filter x="-5.2%" y="-5.7%" width="118%" height="119.3%" filterUnits="objectBoundingBox" id="icon/remoteControl/setting_1_off_a"><feMorphology radius="2.889" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology><feOffset dx="3" dy="3" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset><feMorphology radius="2.889" in="SourceAlpha" result="shadowInner"></feMorphology><feOffset dx="3" dy="3" in="shadowInner" result="shadowInner"></feOffset><feComposite in="shadowOffsetOuter1" in2="shadowInner" operator="out" result="shadowOffsetOuter1"></feComposite><feColorMatrix values="0 0 0 0 0.129411765 0 0 0 0 0.129411765 0 0 0 0 0.168627451 0 0 0 1 0" in="shadowOffsetOuter1"></feColorMatrix></filter><path d="M70.968 4.764 3.815 68.01" id="icon/remoteControl/setting_1_off_b" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><path d="M38.937 2.945c-20.142 0-36.504 16.448-36.504 36.697 0 20.248 16.362 36.696 36.504 36.696S75.44 59.89 75.44 39.642c0-20.249-16.361-36.697-36.503-36.697ZM37.633 71.03c-16.231-.655-29.268-13.826-29.92-30.078h10.43c.652 10.55 9.06 18.938 19.49 19.594V71.03Zm0-15.727c-7.561-.655-13.624-6.75-14.276-14.35h10.56a5.13 5.13 0 0 0 3.716 3.735v10.615Zm0-20.707c-1.825.459-3.194 1.9-3.716 3.735h-10.56c.652-7.601 6.715-13.696 14.276-14.35v10.615Zm0-15.858c-10.495.655-18.838 9.108-19.49 19.593H7.713c.652-16.317 13.754-29.423 29.92-30.078v10.485Zm2.607 5.242a15.84 15.84 0 0 1 4.042.918c.39-1.835 1.434-3.408 2.868-4.522a22.287 22.287 0 0 0-6.91-1.704V8.187c7.497.328 14.34 3.277 19.556 7.995l-3.716 3.8c.717.46 1.434 1.05 1.956 1.77l3.65-3.67a31.403 31.403 0 0 1 8.54 20.25h-10.43c-.13-2.425-.717-4.785-1.63-6.947-1.108 1.442-2.673 2.49-4.498 2.883.457 1.31.783 2.621.913 4.063H44.02a5.213 5.213 0 0 0-.847-1.704l3.845-3.866c-.651-.524-1.238-1.245-1.76-1.966l-4.106 4.129c-.326-.131-.587-.263-.978-.328V23.98h.065Zm0 20.773c1.825-.459 3.325-1.9 3.781-3.8h10.495c-.652 7.6-6.714 13.695-14.276 14.35v-10.55Zm0 26.277V60.546c10.495-.656 18.839-9.109 19.49-19.594h10.43C69.508 57.27 56.471 70.375 40.24 71.03Zm11.668-39.186c-2.868 0-5.214-2.36-5.214-5.243 0-2.883 2.346-5.242 5.214-5.242 2.868 0 5.215 2.359 5.215 5.242 0 2.884-2.347 5.243-5.215 5.243Z" fill="#57576B" fill-rule="nonzero" /><g transform="translate(2.433 2.945)"><use fill="#000" filter="url(#icon/remoteControl/setting_1_off_a)" xlink:href="#icon/remoteControl/setting_1_off_b" /><use stroke="currentColor" stroke-width="5.779" xlink:href="#icon/remoteControl/setting_1_off_b" /></g></g></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_1_on"><defs><linearGradient x1="50%" y1="0%" x2="68.334%" y2="100%" id="icon/remoteControl/setting_1_on_a"><stop stop-color="#93A2FC" offset="0%" /><stop stop-color="#4157D8" offset="100%" /></linearGradient></defs><path d="M36.503 0C16.361 0 0 16.448 0 36.697c0 20.248 16.361 36.696 36.503 36.696s36.504-16.448 36.504-36.696C73.007 16.448 56.645 0 36.503 0ZM35.2 68.085C18.969 67.43 5.932 54.26 5.28 38.007h10.43c.651 10.55 9.06 18.938 19.49 19.594v10.484Zm0-15.727c-7.562-.655-13.624-6.75-14.276-14.35h10.56a5.13 5.13 0 0 0 3.716 3.734v10.616Zm0-20.707c-1.826.459-3.194 1.9-3.716 3.735h-10.56c.652-7.601 6.714-13.696 14.276-14.35V31.65Zm0-15.858c-10.495.655-18.839 9.108-19.49 19.593H5.28C5.932 19.07 19.034 5.963 35.2 5.308v10.485Zm2.607 5.242a15.84 15.84 0 0 1 4.041.917c.392-1.834 1.435-3.407 2.869-4.521a22.287 22.287 0 0 0-6.91-1.704V5.242c7.496.328 14.34 3.277 19.555 7.995l-3.715 3.8c.717.46 1.434 1.05 1.955 1.77l3.65-3.67a31.403 31.403 0 0 1 8.54 20.25h-10.43c-.13-2.426-.717-4.785-1.63-6.947-1.107 1.442-2.672 2.49-4.497 2.883.456 1.31.782 2.621.913 4.063h-10.56a5.213 5.213 0 0 0-.848-1.704l3.846-3.866c-.652-.524-1.238-1.245-1.76-1.966L38.72 31.98c-.326-.132-.587-.263-.978-.328V21.035h.065Zm0 20.773c1.825-.459 3.324-1.9 3.78-3.8h10.495c-.651 7.6-6.714 13.695-14.275 14.35v-10.55Zm0 26.277V57.601c10.495-.656 18.838-9.109 19.49-19.594h10.43c-.652 16.317-13.689 29.423-29.92 30.078ZM49.475 28.9c-2.868 0-5.215-2.36-5.215-5.243 0-2.883 2.347-5.242 5.215-5.242s5.215 2.359 5.215 5.242c0 2.884-2.347 5.243-5.215 5.243Z" transform="translate(3.273 2.965)" fill="url(#icon/remoteControl/setting_1_on_a)" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_2_off"><path d="M21.808 52.653 34.68 67.191c.26.294.627.46 1.014.46.756 0 1.37-.63 1.37-1.406V13.409c0-.396-.163-.774-.449-1.041a1.345 1.345 0 0 0-1.935.095L21.808 27c-1.818 2.053-4.395 3.224-7.097 3.224h-4.206c-1.514 0-2.741 1.26-2.741 2.814v13.576c0 1.554 1.227 2.814 2.74 2.814h4.207c2.702 0 5.279 1.17 7.097 3.224Zm-11.303 3.813c-5.298 0-9.593-4.41-9.593-9.851V33.039c0-5.44 4.295-9.851 9.593-9.851h4.206c.772 0 1.508-.335 2.027-.921L29.61 7.729c3.055-3.45 8.255-3.705 11.615-.567a8.549 8.549 0 0 1 2.69 6.247v52.836c0 4.663-3.68 8.444-8.221 8.444a8.127 8.127 0 0 1-6.084-2.764L16.738 57.387a2.709 2.709 0 0 0-2.027-.92h-4.206Zm39.061-30.64c-1.582-1.066-2.023-3.247-.985-4.871 1.038-1.625 3.162-2.078 4.744-1.012 6.471 4.36 10.454 11.769 10.454 19.87 0 8.1-3.983 15.509-10.454 19.869-1.582 1.066-3.706.613-4.744-1.012-1.038-1.625-.597-3.806.985-4.872 4.56-3.072 7.361-8.282 7.361-13.986 0-5.704-2.8-10.913-7.36-13.986Zm7.96-12.079c-1.548-1.118-1.92-3.312-.832-4.902 1.089-1.59 3.226-1.971 4.774-.853 10.015 7.233 16.1 19.004 16.1 31.82 0 12.816-6.085 24.587-16.1 31.821-1.548 1.118-3.685.736-4.774-.854-1.088-1.59-.716-3.784.832-4.902 8.21-5.93 13.19-15.564 13.19-26.065 0-10.5-4.98-20.135-13.19-26.065Z" fill="#57576B" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_2_on"><defs><linearGradient x1="13.21%" y1="8.636%" x2="81.586%" y2="91.364%" id="icon/remoteControl/setting_2_on_a"><stop stop-color="#98A7FF" offset="0%" /><stop stop-color="#344BD2" offset="100%" /></linearGradient></defs><path d="m20.896 47.688 12.872 14.538c.26.294.628.46 1.014.46.757 0 1.37-.63 1.37-1.407V8.444c0-.396-.163-.774-.448-1.041a1.345 1.345 0 0 0-1.936.094L20.896 22.035c-1.818 2.054-4.395 3.224-7.097 3.225H9.593c-1.514 0-2.741 1.26-2.741 2.814V41.65c0 1.555 1.227 2.815 2.74 2.815H13.8c2.702 0 5.28 1.17 7.097 3.224ZM9.593 51.501C4.295 51.501 0 47.091 0 41.649V28.074c0-5.44 4.295-9.851 9.593-9.851h4.206c.772 0 1.508-.335 2.028-.921L28.698 2.763c3.055-3.45 8.255-3.704 11.615-.566a8.549 8.549 0 0 1 2.691 6.247V61.28c0 4.664-3.681 8.445-8.222 8.445a8.127 8.127 0 0 1-6.084-2.764L15.826 52.422a2.709 2.709 0 0 0-2.027-.921H9.593Zm39.061-30.64c-1.582-1.066-2.023-3.247-.985-4.872 1.038-1.624 3.162-2.077 4.744-1.011 6.471 4.36 10.454 11.769 10.454 19.87 0 8.1-3.983 15.509-10.454 19.869-1.582 1.066-3.706.613-4.744-1.012-1.038-1.625-.597-3.806.985-4.872 4.56-3.073 7.361-8.282 7.361-13.986 0-5.704-2.8-10.913-7.36-13.986Zm7.96-12.079c-1.548-1.118-1.92-3.312-.831-4.902 1.088-1.59 3.225-1.971 4.773-.854C70.57 10.26 76.657 22.031 76.657 34.847c0 12.816-6.086 24.587-16.101 31.82-1.548 1.119-3.685.737-4.773-.853-1.089-1.59-.717-3.784.83-4.902 8.21-5.93 13.192-15.564 13.192-26.065 0-10.5-4.981-20.135-13.191-26.065Z" transform="translate(1.262 5.485)" fill="url(#icon/remoteControl/setting_2_on_a)" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_3_off"><path d="M68.72 32.935c-1.696 0-3.106 1.211-3.266 2.78l-.008.087-.022.034a.483.483 0 0 0-.076.26c0 12.086-10.443 21.88-23.328 21.88-5.468 0-10.65-1.776-14.778-4.958l-.124-.096-.124-.098-4.665 4.374.123.1c4.38 3.545 9.779 5.856 15.59 6.617l.175.023.18.022.16.019v9.038H25.98c-1.761 0-3.19 1.34-3.19 2.992 0 1.635 1.4 2.964 3.138 2.991H58.24c1.761 0 3.19-1.34 3.19-2.991 0-1.636-1.4-2.965-3.137-2.991H45.118v-9.041l.603-.066c14.472-1.673 25.596-12.99 26.164-26.706l.014-.416v-.019l.005-.018c.064-.242.096-.491.096-.74 0-1.7-1.469-3.077-3.28-3.077ZM70.76.85C69.563-.272 67.628-.284 66.416.817l-.037.034-10.635 9.974-.167-.298c-2.622-4.626-7.81-7.59-13.557-7.59-8.37 0-15.172 6.23-15.308 13.952l-.002.235v19.143l.001.131c.004.434.03.863.076 1.287l.015.127.018.14-6.474 6.072-.119-.3a20.534 20.534 0 0 1-1.445-7.507V36.011c0-1.699-1.468-3.076-3.28-3.076-1.812 0-3.28 1.377-3.28 3.076v.086c0 4.337 1.05 8.533 3.045 12.354l.06.115.059.11-10.479 9.828c-1.21 1.134-1.21 2.974 0 4.109 1.198 1.124 3.133 1.135 4.346.034l.036-.034L70.761 4.96c1.21-1.134 1.21-2.974 0-4.109ZM57.42 24.288l-6.561 6.154v5.742l-.002.131c-.086 4.384-3.974 7.91-8.745 7.901a9.348 9.348 0 0 1-4.635-1.192l-.077-.044-4.674 4.465.078.054c2.611 1.81 5.774 2.829 9.102 2.87H42.11c8.37 0 15.172-6.222 15.307-13.952l.002-.235V24.288ZM42.02 9.09h.128c4.082.055 7.553 2.695 8.413 6.304l.025.11.028.133-17.343 16.265v-14.78l.002-.13c.076-4.333 3.888-7.831 8.603-7.9l.145-.002Z" fill="#57576B" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_3_on"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/remoteControl/setting_3_on_a"><stop stop-color="#8898F8" offset="0%" /><stop stop-color="#4359D9" offset="100%" /></linearGradient></defs><path d="M60.692 30.803c-1.946 0-3.524 1.414-3.524 3.159v.087c0 12.41-11.217 22.466-25.06 22.466-13.704 0-24.835-9.856-25.057-22.094l-.003-.382v-.077c0-1.745-1.578-3.16-3.524-3.16S0 32.218 0 33.963v.088c0 14.453 11.946 26.597 27.736 28.52l.48.055.172.018v9.318H14.782c-1.893 0-3.427 1.375-3.427 3.071 0 1.68 1.504 3.044 3.37 3.072h34.71c1.892 0 3.426-1.376 3.426-3.072 0-1.68-1.503-3.044-3.37-3.07l-.056-.001H35.437v-9.274l.656-.069c15.987-1.78 28.123-14.002 28.123-28.568v-.088c0-1.745-1.577-3.16-3.524-3.16ZM32.108 0C23.115 0 15.81 6.392 15.665 14.327l-.002.24v19.657l.002.242c.145 7.945 7.46 14.327 16.443 14.327 8.994 0 16.299-6.392 16.444-14.327l.002-.24V14.568l-.002-.242C48.406 6.382 41.092 0 32.108 0Zm0 6.318c5.142 0 9.314 3.626 9.397 8.113v19.93c-.083 4.493-4.26 8.113-9.397 8.113-5.142 0-9.313-3.625-9.396-8.113l-.001-.136V14.566l.001-.134c.083-4.493 4.26-8.114 9.396-8.114Z" transform="translate(7.46 .234)" fill="url(#icon/remoteControl/setting_3_on_a)" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_4_off"><g fill="#57576B" fill-rule="nonzero" stroke-width="0"><path d="M38.649 8.208c-14.483 0-26.283 11.613-26.283 26.018-.031 9.703 5.46 18.62 14.252 23.14a3.203 3.203 0 0 1 1.763 2.848v5.675c0 3.647 2.978 6.536 6.573 6.536h7.39c3.596 0 6.572-2.89 6.572-6.534v-5.677a3.203 3.203 0 0 1 1.763-2.848c8.793-4.52 14.286-13.437 14.255-23.14 0-14.405-11.803-26.02-26.285-26.02v.002ZM5.796 34.226c0-17.882 14.67-32.441 32.853-32.441 18.18 0 32.853 14.559 32.853 32.44.027 11.387-6.048 21.956-16.016 27.863v3.803c0 7.121-5.848 12.957-13.142 12.957h-7.39c-7.294 0-13.143-5.836-13.143-12.957V62.09C11.843 56.183 5.768 45.612 5.796 34.226Z" /><path d="M38.649 34.814c2.014 0 3.648 1.508 3.648 3.37V53.34c.048 1.232-.636 2.39-1.785 3.02a3.916 3.916 0 0 1-3.727 0c-1.148-.63-1.833-1.788-1.784-3.02V38.182c0-1.86 1.631-3.37 3.648-3.37v.002Z" /><path d="M28.105 29.126c.832-1.57 2.676-2.11 4.12-1.206l6.416 4.041 6.415-4.036a2.806 2.806 0 0 1 3.031-.015c.94.588 1.517 1.679 1.513 2.858-.002 1.18-.584 2.267-1.526 2.85l-7.924 4.987a2.806 2.806 0 0 1-3.018 0l-7.925-4.986c-1.444-.91-1.938-2.919-1.104-4.49h.002v-.003Zm3.635 25.562c0-1.816 1.352-3.287 3.018-3.287h7.765c1.67 0 3.022 1.472 3.022 3.288 0 1.816-1.353 3.288-3.022 3.288h-7.765c-.801-.001-1.569-.348-2.135-.965a3.44 3.44 0 0 1-.883-2.324Zm0 9.862c0-1.815 1.352-3.289 3.018-3.289h7.765c1.67 0 3.023 1.473 3.023 3.29 0 1.815-1.353 3.288-3.023 3.288h-7.765c-.801 0-1.569-.347-2.135-.964a3.44 3.44 0 0 1-.883-2.325Z" /></g></symbol><symbol  viewBox="0 0 79 79" id="icon/remoteControl/setting_4_on"><defs><linearGradient x1="23.255%" y1="0%" x2="72.962%" y2="100%" id="icon/remoteControl/setting_4_on_a"><stop stop-color="#98A7FF" offset="0%" /><stop stop-color="#344BD2" offset="100%" /></linearGradient><linearGradient x1="45.955%" y1="0%" x2="53.473%" y2="100%" id="icon/remoteControl/setting_4_on_b"><stop stop-color="#98A7FF" offset="0%" /><stop stop-color="#344BD2" offset="100%" /></linearGradient><linearGradient x1="39.169%" y1="0%" x2="59.299%" y2="100%" id="icon/remoteControl/setting_4_on_c"><stop stop-color="#98A7FF" offset="0%" /><stop stop-color="#344BD2" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" stroke-width="0" fill="none"><path d="M32.853 6.423C18.371 6.423 6.57 18.036 6.57 32.44c-.03 9.703 5.46 18.62 14.252 23.14a3.203 3.203 0 0 1 1.764 2.848v5.675c0 3.647 2.978 6.536 6.572 6.536h7.39c3.597 0 6.572-2.89 6.572-6.534V58.43a3.203 3.203 0 0 1 1.764-2.848c8.792-4.52 14.285-13.437 14.254-23.14 0-14.405-11.803-26.02-26.285-26.02v.002ZM0 32.44C0 14.559 14.671 0 32.853 0c18.18 0 32.853 14.559 32.853 32.44.027 11.387-6.048 21.956-16.015 27.863v3.803c0 7.121-5.849 12.957-13.143 12.957h-7.39c-7.294 0-13.143-5.836-13.143-12.957v-3.801C6.047 54.398-.028 43.827 0 32.441Z" fill="url(#icon/remoteControl/setting_4_on_a)" transform="translate(7.146 1.495)" /><path d="M32.853 33.03c2.014 0 3.648 1.507 3.648 3.37v15.154c.049 1.232-.636 2.39-1.784 3.02a3.916 3.916 0 0 1-3.727 0c-1.15-.63-1.834-1.788-1.785-3.02V36.397c0-1.86 1.632-3.37 3.648-3.37v.002Z" fill="url(#icon/remoteControl/setting_4_on_b)" transform="translate(7.146 1.495)" /><path d="M22.31 27.341c.831-1.57 2.676-2.11 4.12-1.206l6.415 4.041 6.415-4.036a2.806 2.806 0 0 1 3.032-.015c.939.588 1.516 1.679 1.512 2.858-.002 1.18-.584 2.267-1.525 2.85l-7.925 4.987a2.806 2.806 0 0 1-3.018 0l-7.925-4.986c-1.443-.91-1.937-2.919-1.104-4.49h.002v-.003Zm3.634 25.562c0-1.816 1.352-3.287 3.018-3.287h7.766c1.668 0 3.021 1.472 3.021 3.288 0 1.816-1.353 3.288-3.021 3.288h-7.766c-.8-.001-1.569-.348-2.135-.965a3.44 3.44 0 0 1-.883-2.324Zm0 9.862c0-1.815 1.352-3.289 3.018-3.289h7.766c1.669 0 3.022 1.473 3.022 3.29 0 1.815-1.353 3.288-3.022 3.288h-7.766c-.8 0-1.569-.347-2.135-.964a3.44 3.44 0 0 1-.883-2.325Z" fill="url(#icon/remoteControl/setting_4_on_c)" transform="translate(7.146 1.495)" /></g></symbol><symbol   viewBox="0 0 79 79" id="icon/remoteControl/setting_5_off"><image data-name="图层 1" y="11" width="79" height="62" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAA+CAYAAABqSkbiAAAOq0lEQVR4nO2ce3Bc1X3HP79z7z4syZIlW/ILDCYYsBUeNiWQGoJKGBh1YjIOvWDzmCaZiUJwFEInM5m0lLkzpQ2hzYMaiCtIQmMMNkrw8AqkuKlLGgoO9hhi2caIIttgyZYfyFpJu7r3nl//uBI2xrZ2V1pHf+Q7c0fS6u45v/Pd3zm/513hjwMB8DzPVFdXm85OEiKhY0ylIxI4rptUCJ10OhCAbDahYWht/HpflMuFVtWNpk8naGlpCY8aV0/5IkoN3/dNW1ubZDLT3OrqsEzELQ9DUtaGk1zXqYoi+wkROQ2oBmpEVFWlBjSpKiqCVaXXGM1aKwdBDwJ7wOwSCd+HxIC1QRZsJpNJZQcGJkcNDVjf920p11Uy8nzfN6+9diCRSPQlU6n0VMeRydbKdGP0YlUuBGYB5wHJUcihwGFglyrvGqOvW8tmEbocRw8EgezLZJzg0ksnB6UgcszJa2pqShw65KZAZ4o4c43Reap8GjgfOGOs5zsOImAn8AfQV1XNdtc1bUEQdlZXh7mWlpZgrCYaE/J83zebNu0qLy+fWBZFwTwRma/K5SJcDUwcizmKhKrSDbwM+iqwSdXuyGbtoWefbRlglGfkaMmTm29unjg4GE4XMV8Q0atU5TwRZo7B2GONSJVOEd0uYlqN0V8HgR6A7oHW1taomAGLXaB43u3liYTWWWuWqOIBZwMVRY53KqHAfmCbKi86jqwNQ/tefX1df6HnYqHkSWNjc7Ky0p6hqotEzBdBPwFMKHCcE0GP+fmx+Y/5OVr0A+2qssp1zdogqNlZX0+YL4l5C+F5ftJx9k9RtZeB/D2xAXCKFBrigz0iJioCAiBz1O8hyNDhrgnAHZovDaSGLgcwQ9doZDkM/LeIPOI4sqm8PLc3H8OSF3mLFjWVlZcnP6WqS4EvAFOKENAC4dA1COwG9ojQo8oHwPuqvCeiOZAeVZMVCTPWGnFdKlRlAtikqtSqMkmEM1WpAWpEpA70dGK3xyEm2hQqoAgHVFlrLT+F5Ob6+qrcybTwpOR5np9MpfZMHhx0PycidwBzCxRKgQHi7bEH2AXsFtG3RWSL4wRbHnuspbOA8T6ChgbfnTFj76wwdOaI6AUiMkdVZwFniFCrSjmxphaCARE2qvLvjsNLQVDb2drqDx7vxhOS19jYnKqqspdbyzIRrgHKCxAgAHqBQyLyG9AXosi85bq5fU880bK/sLXkjziS2VcX+5hyjjFmkbU0iGg5sTEr5IP/QEResFZX9Paa1154YXnu2BuOR5543u3lIuZqY7hLVS8k3gb5IAB6VdlsjK4E541czu5au/bBAwUIPSY4QqTMFqFBRG4CnUlMYiLPYQaB14H7XNf815w5kzNHb+OPkBdPeGCy4+hfW6t3FOCvDarygTGyDeyjUcSL9fV1+0odW+aLeBcF01XNtSJmqarOAyaRH4kR8XGz0tqopb5+Wufwuj4kxvM8x3Emn67qNANfIb/IIFTlIPAGsDoIePqPoWUFQBYvXlaTTLIY+BJwIfGZmI+l3q8qK1VZXl8/Zafv+3Y4NeRA7WzHke+osgQoG2EgC2SBHar6WDIZPv7YYy1dnOKUULFoaPDdqVMP1ItEt6nyWZDTyc+wHAKedBy+GwT73nN83zcHDnCuiHwH8iIuBHaKyNOq+n3V7jWrV688PMr1nFJ0dKy3bW0b9p599sLfJRK6SxVXhFpiZ/9kx9QE4kxQZEy6XRYvXjY5meR+4HpGZr9fRLaJ2Ls6O+vWrV/vhyPcnzeGU1gVFa6BnJPLZSWVcg1ALhfaVCqt2Wxo0+kZYWurHzBGWu77vmlv3zM1CBJLgW8A04n9xZNhN8g/i+d97WJj5AmQszkx68N5s7XA8rlzazeP0hhIY2NzsqaGlLVmgjE2EUXUqkazQWqASpAJqjpRRFREe0EHrJUex9E9YUi745j+XE5zZWUmKC/PDQxllIsm1PNur3Acc9WQobyMk+/ArCo/kSVLvt5gra4U4bQT3KjAPtAfGRM+Uqyf5nmek81Wp9JptxKcGsex5wKXqLJQlbNESBFbP2foEo74ZXZIjpDY+uVA9gM7VO2bjmN+KxJ1DAyYnmzWZCoqusJiMiUNDb47ffreedaa2wGPOLN9PIUKRfi53Hjj7XNBfg7M5+NWJyQOoe6LotqHT+RpnwxNTU2J3t4JNdYGs4BLQBYC1xC7CsNx6WhggQi0A/gV8DLYHdba3dXV9BeT/PS822Y6jrNMla8ANceRsRdYIY2NzamJE+19ItzCR5keBLaI8KMoSv6itfWHA4UI0NjYnKqooFIk+iTI9SIsBmYUupAiEIjIm6BPRZH9HbhbMxkOHy9COBk877aZIu5XRfSLxOfg8G6IRNgA9h8FYMmS5vmq9qugV6lKlQiqypvG8L0oqv1tIRrX2NicSqdtRTLJp0GuBf0ccGYhgo8RIuAd4Dlj9KUwTG2oru7rLUQTly5tmqKauFGVpcQ1lwTQBbrCWuepD/fzddd9eWIqlTpHxEwFHTDGvHXeeVO6CjEMntdUZUziChFuBT6ryuT811oyWFXZawzPgax0HN5YtWp53q6V5/nJRGLvaUEgM1xXJoShdGWzg+88+2xL/5gkFRsafHfatP111to7ReR6Yk0bb2n4AHhbhFVRlFzR3V11eLSu1qgXuGhRU1k6nbjQGL5NbAiKySoPW9PhnN/w+TTsepghWV3irTP8dzHG5pAIz4A8kE5ntjz66KPZIsYARkeeXHfdlyvKytLXq8rdFK5tIUeyxwdFOGgtAyL6rgg7VY0F7RuaqlxE06o6XVVmiVANVBJbwnKOJEHzhSUuT97Z3x+8VGwlrSjyhtM9xshNgE/+5UUl1qoM8K4IW1XZLGI29vf3bX7mmZ/25iPz0qV31EFUb61eBHIh6HzimnCK/IvoCtIG/MAY51fnnlvdXeoCEAA33bTsjChiGXAHI4cyQ4LSR1y1egX4PfDymjUPbipm/qPheZ4jUvsZEbkCuJS4tlJNrJEjrk9VOkV0hYj+bPXqh3YXMnfB5A0Je6+IfIP8iMsB74nwJOhzPT3OxkJ9rnzg+755552uKbmcqQf+UkRuAKblI6Mq+4zRB7q66r5biBHJN0P8IRxn6lRVvTKP91rgsCrrRPS+/v7s9jy3ZVEY2nL7gG7Pa9oE7stDdZc/Iz4fT6goIlSpyqdqaw/NIE585oUiKkzRFE4c8w0jB7SLcJfjBF9bs+ah35eSuGOgra0tPfPm1T0vol9SlX8COogjphPBASqNyVUWMlHBmqfq7AfbCTKb41u4AdD11so/1NfXvlZM9mW4JQ2gu7teamvbtL6+XgsZa+je3Z5353KR4A9g/wbkCmKjcixC4JC1qYLykkUZjBtuWHaXCN8Cqo56eTht9bzjOP7jj/9rO3maf9/3TUdHRzKKpjjZbK4Mwhpwko4jbhSFxhjNGeOGYSgHIBooL+8POzrODPM9nzzPc1x3Sr215h7gSj5aSbPAbhF+HEW1PywkFC2KPM/7+mxj9G+BRmKrZoGMCKtAHli9+oFO8iDO826vAGcC6DQRnSsi01X1LBFmEy8wJSIpVf2A+Ch4R0R2qbJThHdFBjvC0M22tj7UN9J8vu+bHTu6Tx/yEhYDNUMx/D7QpxxHHn788Qd3FsJD0U7y4sXLJqdScr6qzgXts5b/g+7/zSePduut3yoPgv4aVVkCXEHso51D/gXqfuA9VdqMYb2qeT6ZTHWtXPkvfSO90fP8pDF7F4iYOapqRcxbiUR6Wz7vPRZjEX8KeW7PONm4Z5K1iVtEuEGVemJLOBocAtpBfzI4KL+orQ0Oj2UD48lwyoL3uN8lcb4qzcDnGft2tIMirIsi+xDIxny28mgxms6ivLF48bLJ6bS5BeReoIHjW7zRYgIwV0T+QoS+BQsu3vnmm6/3l2CeD1Fy8jyvqcp1nW+C3E2cSS6ltgswSUQuC0Mpu+CC+Zu2bNlYMgJLSl5Dg+9WVuauA75HYY1CliPpqeEePiF/4stE5DxrnV2zZl22tb19Q1FtsyOhYCe5EMyceWBaEGiTyIiFdIjJGhi69hJnXj5QRY2hSpVpIlSqkiYuC45EZIWI/lVVVfAb4ghjzFFS8gYHtdqYEesXlti57gDWq8r/qLLDGBtaa7KOE2oUSQqoMMY5S1WvFKERqCU2Oici0YDUqJqxavn9GEpKXiIR9UWR6QLOOsEt/cDbID9zXfllb29fzwgx8EbPa/oPkdTDYG8m7lKdzvEL1CFoh7W2ZK0gJSXv0CH3/aoqXauqC4gt7LCWREBGRJ6MIuce2PP+qlX5FalbW1t6gDcaG5u3V1ayCuw3iSOGCo6c4QocBFmXySRK1kxZUoPR3r4huuiii9611jldlRoRXIbCLFVWDgwM3L127YrurVu3FuyPtbdviNraNuydN++yV0Q0TbyN08Sp/T3AL61N/tvTT9+fGdNFHYVT4iR73m0zjXGvARYAGRFdt3r1g/85VuPH1bu916rKZ0CSqmx2HPfFJ564f+9YzfEn/AnjB+OtMA0MJ0N7UkGgqfLyyCYSvYN9fX1Bsc+IlQrjjrzGxuZUZWUwB8wCkPkiZFR1u7W0ZTLOtlIUj4rFuCIv7loPr1Z17gX95FH/ssA2Efvtnh533XghcLS9cWMG3/fNxInRn6uaHxxDHMRyzlU191RU2AWMkw/9lKSk8sGMGXMnqZrlwCUnuEWIn3mbMmfOwl9v3/5q0T0mY4Vxo3nE5cyFI9zjinBlIhFWnwqBRsK4IS8I3CnkV8NIOs646PsbP+QlEuF+4gdjRsIAhCWLVwvBuCFvYMD0qPIKJ687BMBrUTRhXDw0M27Iq60NDoM+QvwQ8/EIVOLvT1lZXd13qlo3TopxY203btxoFy6c/1Yu5+4CLudISdMSt6ftAvm73l7zzJo1Py74kYZSYFz4S0ejocF36+r2f15EL1flNCAJ8oYx8lIUdb0ynkK0cUfeMG6+ublycJBU/GVcFX3FVPRLjf8H5ZJQKJwtsi0AAAAASUVORK5CYII="></image></symbol><symbol   viewBox="0 0 79 79" id="icon/remoteControl/setting_5_on"><image data-name="图层 1" y="10" width="79" height="62" xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAA+CAYAAABqSkbiAAAR5UlEQVR4nO2be5TdVXXHP/v87mNemcwkk9dkYhIhCAkvq0It2qJoAVtcwnKQWnDRSmNrje9qu1xdvauiVqBYgQjEBdooFIiolVWxyrJRwIUIIgsDSMgDQp6TGSbzunMfv/3tH/cxd24GyJ1kSP5wr5XM73F+v98+37P32d+9z7nGUZJMRqG9nfRYOttFzKKi1IU0BwigNmRNMWBCQlmhnGQjZvEBL7I/peQesi37MhkrHq0+2Ex/IJNRABLMoSmEkSVB0cngy91tKcZCoM2lWUATUgsYLpKSEhX9JOUFMSIvKQ9kJUaAAcRul3aDP2WyJ4qJXN9Q+4L8utUUMdNM9m1GwLv5ZiV3jw22RunmBRb7yQp6fXA7yY0lKllXq1ytmKUlBYkAQsLAkFTVy10AFRDkKp1LkmFFl8aRskJDKAxIbJPpacN/RTHabKnCvpZs12gmY36k+3lEwbt6vVoLQ7nFmJ8K/IlLp4MtBDokzZKULoMDgARCTL4myofVvwdfF5ghV/V5JFS6NW5iyNEg0k6JBy3wYFwIv+tgcE8ms3z8SPX3sMGTZF+6fqSLROJEpDMFfyw4CehCzJIUaaItB4FXA9rEOyf+Cia1N8CrDSbe6ZOer7YvAINy9WP6NQoPyu0Xgww+/c0jAOJhgff5r2eXJwqcI/THIqxEvgiY41IT5Y5TYy3Vc6NsNZV7E23q2x587+DnmQRyZXA0yXLdNQK8KPGsmT3i+GNRjo0dqa6903XpaYH35etHuxWFt7txnok3OlospwUIB7shEx2ps6SJ+9W5reZ6rWvXPKMacCvnde3rn687zwsfRrYX41Gce3Oh8JN1me79jeLQEHhXr1drPJZ7u1zvlXSGoAdologmOl3p3GTlKx2Y5JKaog1MmssmA11jTZX5UhMAT/2dyQNV881YkEU85+gngvX90bxNGzKWP1Q8Dgm8665TejgaPSmy6M8d3g2cJGiWK6KmkxULsFrLq3SgaiEAxEDepQJODmPAxW5gv6QRg6yjUVOIIW52qdmI0hIduHfIWCzolJSSSBqkJFnN+6suXLH6iWlAlfhS0SsGBoWeRPoRFt29ING15VD448uCJ8muuWlkXkGJ84FLHJ1u2FxJyZo2VWAmuVDFHUs8pOAiKzQMtk/iadDjyDbHgX4rxsMK0bgKno+SXijEHieKTXEhKRXz41EgSgAoFNNGSLhHLWbMBi3BdbyJU904vkyD2iS1AFYFyGySTpMHttIRCpIGJNvo+LeT6bDxa5n5I9MC77rrlB5LFU50xZfgvAdjmaQmqDP/GmWgRB9qgB2R8YLEk+b82qVNHvnzocCBuBgG0/lZo5l/ITcdMtt7l6J5T/Y1J5NqjQphthLW4R5OMNdpMp0idIJkPUjJSYGp7O6TwawhktIIaDPi1qInvnvrVV27YWr9pgTv2mvVnEvn3irzKzA7W9IciWjSyJVHs55+AAU5O4FnJB4PwX+O62niMMRo29B0wXolyWQU9tHXkkrarGLBZhuc4eJthlZKrEJqrQLkJf2pMQKvNQApNtgl6c7g0bqB7fO2bthgcf03DwLvyhvHFkeECyVdApyqUuo0BRU46Lwg6SlDP3Hn/hDZFsbDANmWgUzGjhgxPVRZk+lvj8jPyRVsoVl0mqE3C84BuiWFOpedImILiT6kX6BwRx7u+dY1C0drvzEJvM/fPH5cFOsDwCVyLcNI1fIqmKAJlaAgURQ8A/qx5PeFkHqCF5v2HQ3AppLeXkULVw205nLqTgQ/zeV/CnYusEgqUauXjMylgyywReIGC8nbb71q3nClTSXxtqtuHnuDEz4m159JzAYCTOZfdXODl196tyv8IFLhdwy1Dx3NKsfLi2z1ahKhe2+ncvYW8NUivFlSe7VFmeJMROoqoBL0SVqbcL/hlq8sGQCwTEaJ1ILsmcDH5ZwHtALmU7moKN/SAdBGV7glkH+QAx0jxy5o9SK7PLM9Hcba5gQrXgh6P9jpEi3VFkz2tDIOEgwCdxfNrrz93xc9b1+8aezNKHxS7ucBrVLZGqmbA0oviSU9hukWSPyw35r2Xv9Ry72qfT+Cctmn97SmEvEJEK7AeZ/EXDHhXrVzetX/xJi7vpn0KGNfujH7z+76KDDXJbNKkl15wcRLRpB+6ejG8dz4j6/6TNfIkYyamcy2pv5U16zmfD5dIEp5VEgaFhwvxpbMJ62YH4uisRcf7RyZKvJN/7tK7BrcP6+YKK4WXApaVq4lMnm+nwTiVtwusy+sHf2GZJcKJcpuOZH2UHFX22LGt4qxfycaattyuMEgk9nVMpxKLwsWneLS65DmS3QI5gDNlEh4WliQe16yAihnMOSoX2i/POwIwbYUKPxmIQv2H169TvaXawZmJZLZN0UhusLl7xK0T5lHlxDNxu4fTLhTMMMnMgKflDEAT4LfmPNw9+aetn0bLp7eqK/J9Lc3J1iJhbNGgk432RJ3XyJpLlgSEYBQKo5W5xurhjTJ3VBZxRg0Ehd9X7Cwo0992z/8ub4Hi2Jj97SqJKbbrmeoN7Pp/tbhzp0S/RJ/LdRcvl/DaUt6GRbs8zeMfBaFT0o+XzUNS0jyuJutLQT/fnqgrX86o/upa15cGhV0vrB3SKwAFpYjXCSRQDLM6qL6RPZSS2TrKIUkXFKMWVGufYIXQI8B/z2W56F6XnYo0turqGXZjmWKo89LXCipiZq5D8DFbz2KL7Yr12bf4rH/g+AdklqspFUB2Ai6jlD4eWbNnOFG5rfVNys5Z+DAEpmf67KLgFPlmg0kVKJANlXFeCoSXkONQDa5WlO5X00S5GBZl/aCPYb8O4rCz3pS8/saGfjeXkUtC3csi4N9XPB+sE6VlgYkaT/Gv402NX/dMhmlwpyxVY6/F/F2ZEnBgy6/Kzow69FG0qkKaLHpApO9D+MkuVpUqnpU2x1cu5vKumoBrQOy+rxRIbl1zzuiIBiW9LCkW4sJ37j+S4sHXipPrZdMRmHTgRc60jEXOXaO5CuFbTP8XnLJu/9r3aJ+A7jrLkVP7hloJUqXuE6+ML6rpWN03YescCgfAvinLw7Pk8VnO3ap8LPKRDvxMvW0mut6yfODKiBT0IepvlHzfN5ghyzcI+cOtWUfb6QEf8HqXS2dSW/2ZDGVi9PF8ZxG71m3KAumw17DAPj01YPLo1iXu/Q+ZMuAdG3H6oE5qJNW44Y1FKlycDBQkyfw+veZ1VpuNRsaA3sidv9qIpH6YW2aNV05LPAymX1tY82p84AP4rxJUieliPkSna29VjmuCQymA3L2II1jyglzuZJgabnmAPOA5MT7a4KbqHHh8gUmu3+Z8uyRuN+NtZ2FsUevv37FtEn+tMFbk+lvb2mK/kLSRyROAFK1WUlF8frziY4odmwPsseRP2rSVsz6JB+MXTEhKoQYxVZMBEIilpolm4XZYuQnSPZ6pFMEsylXkZn0/XrrrLq6JOVcPBBMV3YUxx+aLoDTAu8zX+7vkRKXm/yvJF4DJA5e+ptyiTEG9kn+kBHui+PwuKmwp1hMDzTlhsdnz+6JgWpU3LSpZD6rVmG7dmHp9LMhN7c1CiOhzZM+J3bmg51jcL67TgRroxzJoVSjs3qOVtbHIC94SrFfp6K+d/uNS1+ccfA+ffXg8lD0Dwm7VGIREGpdpux/1SylDGqOUgXmB2D3hLxvy6c03LdpXnbVKtQ4f5RlMhgQtg9ub4ui9GyZnSnTexBvFSyivF5cHdO6YFX2ktjgOYmvJtxuW7+2p78RLRoCr/cuRUs3v9hrZp8DVqo8v73MkmJB0hYTP4ix7+Wa7Knu8c7RI1+BKVVKPJdsjQqJ0yS/XNK5gnlIVrsoPoVbx8BjcvtIvK/nkUby5kQjKva8MDTbzE5SuRpbUqauG9URtgHgZ45uyTVFD3SPd45m/nGmylamb2YYB8Z7M5seaBqZ+1sj/hXOJRKvr6RZtcHF5RgGIhIsV/DXMa9vE/Cyiz610hB4URwSjlLIq1WH+tI1WN6wh138Z0Txp94/tHPdYUS0RmVDZlUe2Nf74X3faElnfyqFi8EulbSsnN3UzH/VZckEUio3PtCQJ4ZGGreNtg0K3y4xUB9JS0qRE9wnuLKp2e+czfzth0MFDkc2fG3+yNgLr3k64YkbkF8psZWKyuV/Xl1c54A7u9PDcUO6NhwwPvWvfW9QSHxW8guApho3HZJ0j4dwo/X1P9IoaJmMwnOFXYujOFohNDdAq0tpg1HEmMPzxci3ZZ9dPNhYPU/W++G+1kTInYvxSUlvANI1456V/BvBdfUdNy3f3ojODYOXyWxrGoza/hDsCsnOATpM2huL20Kk9dn5XVsPJa3r7VXUddyB9iLZ4y1wttzOQiw1o91dSYxIIki4UNEg684B0FbDHpbH98VRcuu3rlkwdij5au8ndjRHxfhE4vD3Ms6X1Glmu+V+hxnf3jt/6eaNDQayafG8TEapEfZ2FIl6iiFqjizeb3FibwcdQ69EO9as2ZwutLYtwuydji6SbKWJdhktQCQvLQtCuZ4Hqq4hlEy8IDEOGkA87NKGQkoPxduW7H0lizw7o0Rn387ZCVN3iIuthOSAF3J7V3W/dng65bbDy20rOzgPseryt5k98y3Pu93tgzJOBTVJE5N4fUVl4nod6S7/J1SUyCM2xsFuCsWxn912/YqhQ1DcMhnscHeLzvieZChZW7G19WS3xKXCLwRbIilU63FMRG6rKYxOkVpNrqpUjlER2IW4vRji9Xs7GnfB6ciMg7c6s6srKkQXxa6/AU4G0ioT17pcl/r1k8q9mrWDyWS8WlQolZTBCqBfSqyNLHfvoVnh9GVGwVuT6W/PjxffL/g4xoqKtdUWMWHqZP4l71Fz/aDMprTPRLLNKP7cWDH1o3vWdY/NVP8a4nmNSG+vonwhPh3jPUIrqhlJ5Z/q5zNwd7wGoJLYRFtq5sYpnxeSItAJYBc3peLjensVMUPSUIbRiHQd93x70ZvOMGkllRpfFZXK8cT+YYeilVKj7YL9Ju0XISe8DeiR1CPRidFUsuDS86V5syb7B1T6ecIb5fEK63nhWSA7E32cMfAKoSllrjkuZpWulFkHdZEVRiU9g7jf4E7P6XdZpXKkczHEdI5Glm0P5nFugXn4IxcX4ZwhtBBK23kPLn0ZQLNipZv3J2fMu2YMvBAnx135PTIGkTomz0tAia8948Z3g0cbmJ3dvJRl+ZemD9q2evWjO3bT/d2WZPGdhl2K6a2S5oHVVK/L1mzskGzP+Hj/Ia/DNCozBl53c+fwjrE9D+E8gbEUrFSkNCHIIXsAFa9tGo42dncvGH9lzmVat44CUDg7o/9ZtGv3g54oXgysEVqhEsGuNC7I+Tme2Lxhw8oZA29mo+2azemR9KyzzPwKiXOAeZKecbO7LLY7x15Y+PTh7Dvp7d2UUtesM5FfBlwo0YWxE+k74GtPWfTaLTPxs6mKzDjPW7Nmc/pAS+uCqKAegppkDERFPb9kds/gkehYb6+iuPO5+URaKg+zgnwoFIpbGTl+4EhuCJpKXpUMA2S9vSVaNL2y+9F+/+/liMurZHmNiqx39db2ZJQIhQUjo+Xq8DEnxxx4vR/b+bpQKJ5JsDPlSrrYhnii2OQPfP8/lg8ebf1q5ZgBb/XqR5LDyXkXutkn5DoZIyWXgTkw5vL1aOYjaCMyY+y7MZENp+Ye5+Ijkv4AaJNIgSUlpV3qBPsAhHf9au/zs4+2thU5JsC7YPXuZlf0NsEpqLQdTa7JRQBXJ3BZKi6uOjvzfzNG7huRYwK8WVEhLXGcRHtt2akkopL6uzhdHpawfdkxAd4xoYRbok2KO4BQSu4BVC1dVURSJFNnc8FTwFH/hdExAV5QcaQoDZaWJSZXmWGi8AnkIfRnk+GYoC7HhNsWmsK4oS2IA6rZy6fSXFetGLv0JGgXy7YfE782OibA2/CVnnG38L+ChySNT1rboLpa1g92S8jnntyYedvvwZsQ0903vmabFH8B4zeS4tq1CUmjLq7F2PC99ScOHF1dJ+SYmPNKYjqtW7/4zc7tf2fwTnedIlmn3J8G7m1qHn94w9dWHfIOpldDjpkMo1Z6exWNLHw2AbAkd8DXrXvjjBU0D0f+HyWOwcsznnw9AAAAAElFTkSuQmCC"></image></symbol><symbol  viewBox="0 0 131 132" id="icon/slam/btn_clear"><defs><linearGradient x1="98.963%" y1="21.522%" x2="13.973%" y2="94.094%" id="icon/slam/btn_clear_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" stroke-width="0" fill="none"><ellipse cx="65.312" cy="66" rx="65.312" ry="66" fill="url(#icon/slam/btn_clear_a)" transform="translate(.377)" /><path d="M100.73 54.775a3.417 3.417 0 0 0-1.946-1.778l-14.82-5.335c1.686-5.03-.955-10.486-5.942-12.277-4.985-1.798-10.496.682-12.464 5.609l-14.854-5.335a3.413 3.413 0 0 0-4.303 2.017l-4.439 11.936a3.424 3.424 0 0 0 0 2.633 3.417 3.417 0 0 0 1.707 1.641L32.947 83.433a3.424 3.424 0 0 0 2.049 4.412l42.138 15.15a3.414 3.414 0 0 0 4.37-2.052l10.86-29.581c.317.044.639.044.956 0a3.415 3.415 0 0 0 3.21-2.258l4.303-11.73a3.424 3.424 0 0 0-.103-2.599Zm-49.228-11.1 14.65 5.098c1.753.625 3.687-.27 4.321-2l1.08-2.898c.583-1.487 2.263-2.242 3.781-1.7.733.261 1.33.801 1.654 1.5.29.682.29 1.45 0 2.132l-.978 2.966a3.292 3.292 0 0 0 .103 2.566 3.36 3.36 0 0 0 1.922 1.732l14.617 5.198L90.66 63.6 49.51 49.006l1.992-5.331ZM75.742 96l-8.654-3.153 4.293-11.814a3.493 3.493 0 0 0-.588-3.418 3.423 3.423 0 0 0-3.228-1.195 3.447 3.447 0 0 0-2.64 2.223L60.632 90.49 55 88.447l4.292-11.814a3.493 3.493 0 0 0-.588-3.418 3.423 3.423 0 0 0-3.228-1.195 3.447 3.447 0 0 0-2.64 2.223L48.543 86.09l-8.62-3.014 9.72-26.677 35.819 12.819L75.742 96Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 131 132" id="icon/slam/btn_revoke"><defs><linearGradient x1="98.963%" y1="21.522%" x2="13.973%" y2="94.094%" id="icon/slam/btn_revoke_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><ellipse cx="65.312" cy="66" rx="65.312" ry="66" fill="url(#icon/slam/btn_revoke_a)" fill-rule="nonzero" /><path d="M72.363 90h.013c.485 0 4.857-.109 9.297-2.638 2.758-1.577 4.964-3.739 6.552-6.431 1.897-3.209 2.852-7.111 2.852-11.571 0-4.446-.928-8.335-2.785-11.557-1.547-2.706-3.7-4.895-6.39-6.513-4.36-2.624-8.678-2.801-9.149-2.815H57.887V38.4L43.142 53.112 57.9 67.715v-9.708h14.651c.256.013 2.449.217 4.561 1.482 3.067 1.849 4.56 5.085 4.56 9.885 0 4.636-1.425 7.763-4.372 9.558-2.3 1.4-4.762 1.537-5.004 1.55H52.963v-.013h-1.44v.013h-.04c-2.597 0-4.709 2.135-4.709 4.76 0 2.623 2.112 4.758 4.709 4.758h20.88Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 123 123" id="icon/slam/btn_save"><defs><linearGradient x1="99.575%" y1="21.522%" x2="13.522%" y2="94.094%" id="icon/slam/btn_save_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" stroke-width="0" fill="none"><ellipse cx="60.674" cy="60.934" rx="60.674" ry="60.934" fill="url(#icon/slam/btn_save_a)" transform="translate(-.23 -.337)" /><path d="M80.021 30h-39.05C34.924 30 30 34.925 30 40.973v39.062C30 86.082 34.924 91 40.971 91H80.03C86.076 91 91 86.082 91 80.035V40.973C90.993 34.925 86.07 30 80.021 30Zm-33.23 5.864H74.21v6.144h-27.02a.418.418 0 0 1-.405-.404v-5.74h.007Zm27.41 49.272h-27.41V68.62H74.21v16.515H74.2Zm10.928-5.109a5.106 5.106 0 0 1-5.056 5.101V67.851a5.098 5.098 0 0 0-5.093-5.094H46.02a5.098 5.098 0 0 0-5.093 5.094v17.277a5.106 5.106 0 0 1-5.056-5.1V40.972a5.106 5.106 0 0 1 5.056-5.101v5.74a6.276 6.276 0 0 0 6.269 6.267h27.777a5.098 5.098 0 0 0 5.092-5.093v-6.914a5.106 5.106 0 0 1 5.056 5.1v39.055h.008Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 30 30" id="icon/slam/icon_add"><path d="M12.5 12.5H2.506A2.502 2.502 0 0 0 0 15c0 1.39 1.123 2.5 2.506 2.5H12.5v9.994A2.502 2.502 0 0 0 15 30c1.39 0 2.5-1.122 2.5-2.506V17.5h9.994A2.502 2.502 0 0 0 30 15c0-1.39-1.122-2.5-2.506-2.5H17.5V2.506A2.502 2.502 0 0 0 15 0c-1.39 0-2.5 1.123-2.5 2.506V12.5Z" fill="#FFF" fill-rule="nonzero" stroke-width="0" /></symbol><symbol  viewBox="0 0 46 40" id="icon/slam/icon_add_route"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_add_route_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_add_route_a)" fill="none" fill-rule="evenodd"><g fill="#2C2C2C" fill-rule="nonzero"><path d="M42.487 37H3.513A3.516 3.516 0 0 1 0 33.485V16.519A3.516 3.516 0 0 1 3.513 13h38.974A3.517 3.517 0 0 1 46 16.519v16.964A3.515 3.515 0 0 1 42.487 37ZM3.513 15.7a.816.816 0 0 0-.818.819v16.964c0 .453.364.818.818.818h38.974a.817.817 0 0 0 .818-.818V16.52a.818.818 0 0 0-.818-.82H3.513Z" /><path d="M27.99 20.433h2.643v7.71H27.99v-7.71Zm7.366 0H38v7.71h-2.644v-7.71ZM9 35.182h2.644V40H9v-4.818Zm24.178 0h2.644V40h-2.644v-4.818ZM16.752 7.474H14.11a.769.769 0 0 0-.76-.777c-.421 0-.762.348-.762.777H9.944C9.944 5.555 11.468 4 13.348 4s3.404 1.555 3.404 3.474Z" /><path d="M23 8.731h-2.674c-.003-3.305-2.61-5.983-5.827-5.985-3.216.003-5.822 2.681-5.825 5.985H6C6.007 3.912 9.808.008 14.499 0 19.191.005 22.994 3.911 23 8.731Zm-9.838 1.364h2.674V15h-2.672v-4.903l-.002-.002Z" /></g></g></symbol><symbol  viewBox="0 0 35 35" id="icon/slam/icon_add_task"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_add_task_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.666667 0 0 0 0 0.666667 0 0 0 0 0.690196 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_add_task_a)" fill="none" fill-rule="evenodd"><path d="M14.583 14.583H2.924A2.92 2.92 0 0 0 0 17.5a2.914 2.914 0 0 0 2.924 2.917h11.66v11.659A2.92 2.92 0 0 0 17.5 35a2.914 2.914 0 0 0 2.917-2.924v-11.66h11.659A2.92 2.92 0 0 0 35 17.5a2.914 2.914 0 0 0-2.924-2.917h-11.66V2.924A2.92 2.92 0 0 0 17.5 0a2.914 2.914 0 0 0-2.917 2.924v11.66Z" fill="#FFF" fill-rule="nonzero" /></g></symbol><symbol   viewBox="0 0 226 227" id="icon/slam/icon_btn_add_map"><defs><linearGradient x1="100%" y1="22.047%" x2="13.21%" y2="93.282%" id="icon/slam/icon_btn_add_map_c"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient><filter x="-22.3%" y="-11.7%" width="144.7%" height="146.7%" filterUnits="objectBoundingBox" id="icon/slam/icon_btn_add_map_a"><feOffset dy="23" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="10" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2285566 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon/slam/icon_btn_add_map_b" x="0" y="0" width="185.72" height="184" rx="92" /></defs><g fill-rule="nonzero" fill="none"><g transform="translate(20 12)"><use fill="#000" filter="url(#icon/slam/icon_btn_add_map_a)" xlink:href="#icon/slam/icon_btn_add_map_b" /><use fill="url(#icon/slam/icon_btn_add_map_c)" xlink:href="#icon/slam/icon_btn_add_map_b" /></g><path d="M107.083 99.083H85.43A5.422 5.422 0 0 0 80 104.5a5.411 5.411 0 0 0 5.43 5.417h21.653v21.653c0 3 2.424 5.43 5.417 5.43a5.411 5.411 0 0 0 5.417-5.43v-21.653h21.653A5.422 5.422 0 0 0 145 104.5a5.411 5.411 0 0 0-5.43-5.417h-21.653V77.43A5.422 5.422 0 0 0 112.5 72a5.411 5.411 0 0 0-5.417 5.43v21.653Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 39 39" id="icon/slam/icon_del"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_del_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.321048 0 0 0 0 0.321048 0 0 0 0 0.321048 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_del_a)" fill="none" fill-rule="evenodd"><g fill="#FFF" fill-rule="nonzero"><path d="M23.5 31c-.83 0-1.5-.618-1.5-1.384V14.384c0-.766.67-1.384 1.5-1.384s1.5.618 1.5 1.384v15.225c0 .766-.67 1.391-1.5 1.391ZM15.5 31c-.83 0-1.5-.618-1.5-1.384V14.384c0-.766.67-1.384 1.5-1.384s1.5.618 1.5 1.384v15.225c0 .766-.67 1.391-1.5 1.391ZM37.607 7.143h-6.963V4.286C30.644 1.92 28.788 0 26.497 0H12.533c-2.306 0-4.177 1.92-4.177 4.286v2.857H1.393C.62 7.143 0 7.78 0 8.57 0 9.363.621 10 1.393 10h36.214C38.38 10 39 9.363 39 8.571c0-.79-.621-1.428-1.393-1.428ZM11.141 4.286c0-.784.629-1.429 1.392-1.429h13.964c.763 0 1.362.63 1.362 1.429v2.857H11.141V4.286Z" /><path d="M29.794 39H10.199C7.88 39 6 37.162 6 34.898v-20.53C6 13.61 6.625 13 7.4 13c.775 0 1.4.61 1.4 1.367v20.531c0 .757.631 1.367 1.399 1.367H29.8c.775 0 1.4-.61 1.4-1.367v-20.48c0-.756.624-1.367 1.4-1.367.774 0 1.399.61 1.399 1.368v20.48C33.992 37.154 32.111 39 29.794 39Z" /></g></g></symbol><symbol  viewBox="0 0 39 39" id="icon/slam/icon_del_task"><g fill-rule="nonzero" stroke-width="0" fill="none"><path d="M19.5 38.727c10.62 0 19.23-8.608 19.23-19.23 0-10.62-8.61-19.23-19.23-19.23C8.88.267.27 8.877.27 19.497c0 10.622 8.61 19.23 19.23 19.23Z" fill="#FF3838" /><path fill="#FFF" d="M8.818 17.364h21.364v4.272H8.818z" /></g></symbol><symbol  viewBox="0 0 44 46" id="icon/slam/icon_edit"><path d="M24.968.54a1.93 1.93 0 0 1 2.718.04l10.581 10.76a1.966 1.966 0 0 1-.099 2.851L12.672 36.706a1.932 1.932 0 0 1-1.32.485l-9.451-.203A1.95 1.95 0 0 1 0 35.03v-9.677c0-.536.217-1.048.602-1.417L24.968.54Zm2.576 31.472 14.552.286a1.94 1.94 0 0 1 1.662 1.012c.336.612.321 1.358-.037 1.957a1.938 1.938 0 0 1-1.7.946l-14.552-.286a1.94 1.94 0 0 1-1.662-1.013 1.972 1.972 0 0 1 .038-1.957 1.938 1.938 0 0 1 1.701-.945h-.002ZM26.27 4.698 3.883 26.19v6.923l6.795.147 23.378-20.643-7.787-7.92ZM42 41.799a1.95 1.95 0 0 1 1.956 1.943 1.95 1.95 0 0 1-1.927 1.972L3.899 46a1.95 1.95 0 0 1-1.957-1.943 1.95 1.95 0 0 1 1.927-1.972l38.132-.286Z" fill="#FFF" fill-rule="nonzero" stroke-width="0" /></symbol><symbol   viewBox="0 0 279 261" id="icon/slam/icon_empty"><defs><filter x="-1%" y="-15%" width="101.9%" height="160%" filterUnits="objectBoundingBox" id="icon/slam/icon_empty_a"><feOffset dy="6" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feColorMatrix values="0 0 0 0 0.180392157 0 0 0 0 0.180392157 0 0 0 0 0.239215686 0 0 0 1 0" in="shadowOffsetOuter1"></feColorMatrix></filter><path d="M-10.075 130.74h294c5.522 0 10 4.476 10 10 0 5.522-4.478 10-10 10h-294c-5.523 0-10-4.478-10-10 0-5.524 4.477-10 10-10Z" id="icon/slam/icon_empty_b" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><g fill-rule="nonzero"><path d="M277.922 171.594 248.025 62.149c-2.165-8.05-7.328-14.779-14.544-18.948-7.168-4.142-15.51-5.266-23.512-3.172l-18.35 4.236c-5.406 1.248-8.777 6.646-7.53 12.057 1.247 5.41 6.643 8.785 12.047 7.537l18.504-4.272.342-.085a11.06 11.06 0 0 1 8.453 1.114 11.075 11.075 0 0 1 5.19 6.768l3.163 11.578c-11.496 5.222-31.229 18.524-43.201 50.839-8.434 22.764-34.836 49.64-81.486 50.466-14.04.247-24.04-2.946-29.726-9.495-7.714-8.888-5.728-22.023-5.707-22.155l-.012.067-.307-.053c1.854-18.942-3.924-37.014-8.654-48.127l56.873-14.979c5.366-1.413 8.571-6.912 7.159-12.282s-6.907-8.577-12.272-7.164l-91.26 24.034-.043.012C6.518 94.586-3.389 111.76 1.068 128.407l29.898 109.448c2.165 8.048 7.328 14.775 14.543 18.944C50.32 259.579 55.662 261 61.074 261c2.713 0 5.444-.357 8.134-1.079l186.63-50.046c8.058-2.161 14.793-7.333 18.964-14.564 4.172-7.23 5.28-15.653 3.12-23.717ZM21.588 114.743a11.066 11.066 0 0 1 6.747-5.19l14.688-3.868c4.113 8.902 10.595 26.345 8.015 43.557-1.86 12.415-8.092 25.12-13.937 34.82l-16.63-60.88a11.082 11.082 0 0 1 1.117-8.44Zm42.42 125.755c-5.933 1.59-12.053-1.945-13.643-7.883l-6.273-22.962c3.962-5.274 10.893-15.2 16.814-27.272.361.461.732.915 1.112 1.36 9.458 11.052 24.119 16.648 43.596 16.648.614 0 1.228-.005 1.843-.016 13.635-.242 26.545-2.386 38.372-6.372 10.708-3.61 20.58-8.74 29.338-15.247a100.43 100.43 0 0 0 8.173-6.773c.044.217.087.435.134.653 3.023 14.118 11.208 23.967 19.51 30.596L64.008 240.498Zm186.63-50.046-20.15 5.403.029-.097.044.013c-.231-.07-23.145-7.29-27.44-27.351-3.027-14.134 2.926-28.117 2.987-28.257l-.017.037-.018-.008a79.939 79.939 0 0 0 1.353-3.4c5.564-15.016 13.548-26.52 23.734-34.192a49.353 49.353 0 0 1 6.02-3.898l21.34 78.118c1.575 5.931-1.957 12.042-7.882 13.632Z" fill="#7F86B0" /><path d="m198.991 45.438-75.965-44.09a9.972 9.972 0 0 0-10.017.001A10.08 10.08 0 0 0 108 10.07v88.178c0 .247.011.493.029.737v50.946c0 5.562 4.485 10.07 10.017 10.07 5.532 0 10.017-4.508 10.017-10.07v-45.886L198.99 62.88a10.079 10.079 0 0 0 5.009-8.72c0-3.598-1.91-6.923-5.009-8.721Zm-70.928 35.351v-2.6c0-.245-.012-.486-.029-.726V27.51l45.915 26.648-45.886 26.631Z" fill="#D0D6FA" /></g><g transform="rotate(39 136.925 140.74)"><use fill="#000" filter="url(#icon/slam/icon_empty_a)" xlink:href="#icon/slam/icon_empty_b" /><use fill="#7F86B0" xlink:href="#icon/slam/icon_empty_b" /></g></g></symbol><symbol class="icon" viewBox="0 0 1024 1024"  id="icon/slam/icon_left_arrow"><path d="M481.233 904c8.189 0 16.379-3.124 22.628-9.372 12.496-12.497 12.496-32.759 0-45.256L166.488 512l337.373-337.373c12.496-12.497 12.496-32.758 0-45.255-12.498-12.497-32.758-12.497-45.256 0l-360 360c-12.496 12.497-12.496 32.758 0 45.255l360 360c6.249 6.249 14.439 9.373 22.628 9.373z" fill="#fff" /></symbol><symbol  viewBox="0 0 101 108" id="icon/slam/icon_modal_edit"><g fill="#FFF" fill-rule="nonzero"><path d="M100.968 18.087a8.198 8.198 0 0 0-2.9-5.588L85.474 1.929a8.21 8.21 0 0 0-6.007-1.9 8.187 8.187 0 0 0-5.583 2.903l-38.709 46.19s0 .012-.012.012l-.157.194c-.012.012-.024.036-.036.06-.036.06-.085.109-.12.17-.013.012-.025.036-.037.048-.145.23-.266.472-.363.725v.013a4.757 4.757 0 0 0-.23.81v.012l-4.157 23.718a4.383 4.383 0 0 0 1.487 4.088A4.381 4.381 0 0 0 34.355 80c.495 0 .99-.085 1.474-.254l22.684-8.164c.012 0 .012-.012.024-.012.072-.024.157-.06.23-.097.012 0 .012-.012.024-.012.253-.109.495-.254.737-.411.012 0 .012-.012.024-.012.06-.049.133-.097.193-.145.012-.012.025-.025.049-.037.048-.048.109-.084.157-.133l.048-.048c.049-.048.097-.097.145-.133l.049-.049c.048-.048.096-.108.145-.157l.036-.036 38.72-46.178c1.39-1.717 2.067-3.846 1.874-6.035Zm-44.473 43.25-11.856-9.953L70.96 19.986l11.856 9.954-26.321 31.398Zm-16.57 7.669 1.56-8.89 4.193 3.52 2.756 2.31-8.508 3.06Zm48.486-45.73L76.556 13.32l3.698-4.414 11.855 9.954-3.698 4.414Z" /><path d="M87.612 55.01c-2.426 0-4.389 1.947-4.389 4.353v39.92H8.789V11.705h40.265c2.426 0 4.388-1.947 4.388-4.353C53.442 4.946 51.48 3 49.054 3H8.728C3.913 3 0 6.88 0 11.656v87.688C0 104.119 3.913 108 8.728 108h74.544c4.815 0 8.728-3.88 8.728-8.656V59.363c0-2.406-1.963-4.353-4.388-4.353Z" /></g></symbol><symbol  viewBox="0 0 27 134" id="icon/slam/icon_modal_info"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_modal_info_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_modal_info_a)" fill="none" fill-rule="evenodd"><path d="M5.423 87.1c.715 3.88 4.116 6.7 8.083 6.7 3.966 0 7.367-2.82 8.082-6.7l5.389-73.7C26.96 6.006 20.939.016 13.506 0A13.879 13.879 0 0 0 3.6 4.504 13.729 13.729 0 0 0 .034 14.74L5.423 87.1Zm8.083 20.1c-5.449 0-10.361 3.264-12.446 8.272a13.348 13.348 0 0 0 2.92 14.603 13.524 13.524 0 0 0 14.68 2.905c5.035-2.074 8.317-6.96 8.317-12.38a12.622 12.622 0 0 0-3.705-9.715 12.764 12.764 0 0 0-9.766-3.685Z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 117 117" id="icon/slam/icon_modal_mark"><path d="M115.51 33.632 83.362 1.49a5.092 5.092 0 0 0-7.198 0c-.437.428-9.707 9.9-6.142 22.36L55.458 38.397c-7.97-2.416-28.55-6.603-43.709 8.558a5.093 5.093 0 0 0 0 7.198l21.947 21.949L1.38 108.422a5.093 5.093 0 0 0 7.198 7.198l32.316-32.318 21.947 21.94a5.075 5.075 0 0 0 7.198 0C85.191 90.089 81.013 69.5 78.597 61.538L93.152 46.98c12.459 3.566 21.93-5.705 22.358-6.142a5.093 5.093 0 0 0 0-7.198v-.009ZM94.025 36.46a5.092 5.092 0 0 0-5.764 1.007L69.15 56.587a5.118 5.118 0 0 0-1.116 5.538c.025.05 2.316 5.772 2.71 13.172.386 7.35-1.175 13.651-4.648 18.803L44.502 72.504 22.89 50.89c13.633-9.213 31.167-2.266 31.964-1.947a5.092 5.092 0 0 0 5.546-1.107l19.12-19.113a5.093 5.093 0 0 0 1.006-5.764c-1.778-3.8-1.132-7.316 0-9.909l23.398 23.409c-2.6 1.116-6.116 1.762-9.908-.009l.009.009ZM63.848 64.02c.176.395 1.753 4.027 1.636 8.013a4.457 4.457 0 1 1-8.91-.252 11.336 11.336 0 0 0-.864-4.136 4.464 4.464 0 0 1 2.274-5.873 4.446 4.446 0 0 1 5.864 2.248Z" fill="#FFF" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 89 143" id="icon/slam/icon_modal_question"><path d="M0 44.688C0 35.75 1.78 28.6 3.56 24.13c1.78-4.468 5.34-8.937 9.79-12.512 4.45-4.469 8.9-7.15 15.13-8.938C33.82.894 39.16 0 45.39 0c12.46 0 22.25 3.575 31.15 10.725C84.55 17.875 89 26.812 89 38.431c0 5.363-1.78 9.832-3.56 14.3-1.78 4.469-6.23 9.831-13.35 16.088-7.12 6.256-9.79 10.725-12.46 13.406-2.67 2.681-3.56 6.256-5.34 9.831-1.78 3.575-.89 6.257-.89 15.194H35.6c0-8.938.89-13.406 1.78-17.875.89-4.469 2.67-8.044 5.34-11.619 2.67-3.575 5.34-8.043 11.57-14.3C60.52 57.2 64.97 52.731 66.75 50.05c1.78-2.681 3.56-7.15 3.56-13.406s-2.67-10.725-7.12-15.194c-4.45-4.469-10.68-7.15-18.69-7.15-17.8 0-26.7 12.512-26.7 30.387H0ZM53.4 143H35.6v-17.875h17.8V143Z" fill="#FFF" fill-rule="nonzero" /></symbol><symbol  viewBox="0 0 123 123" id="icon/slam/icon_modal_save"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_modal_save_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_modal_save_a)" fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M105.429 0H17.57C7.866 0 0 7.866 0 17.571v87.858C0 115.134 7.866 123 17.571 123h87.858c9.705 0 17.571-7.866 17.571-17.571V17.57C123 7.866 115.134 0 105.429 0ZM61.5 17.571h26.357v17.572H61.5V17.57Zm35.143 96.643H26.357v-43.86h70.286v43.86Zm17.571-8.785c0 4.845-3.94 8.785-8.785 8.785V61.57H17.57v52.645c-4.845 0-8.785-3.94-8.785-8.785V17.57c0-4.845 3.94-8.785 8.785-8.785h8.786v35.143h70.286V8.786h8.786c4.845 0 8.785 3.94 8.785 8.785v87.858Z" /><path d="M35 79h53v8.667H35V79Zm0 17.333h53V105H35v-8.667Z" /></g></g></symbol><symbol  viewBox="0 0 157 115" id="icon/slam/icon_modal_tick"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_modal_tick_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g transform="translate(0 -.038)" filter="url(#icon/slam/icon_modal_tick_a)" fill="none" fill-rule="evenodd"><g fill="#4B4C4D" fill-rule="nonzero"><path d="M60.106 112.764c.468.468 1.373.322 2.02-.325l16.275-16.274c.647-.648.793-1.553.325-2.021L18.894 34.313c-.468-.469-1.373-.323-2.02.325L.599 50.912c-.647.648-.793 1.552-.324 2.02l59.83 59.832Z" /><path d="M43.596 93.906c-.73.73-.8 1.845-.154 2.49l16.2 16.2c.645.645 1.76.576 2.49-.154l93.272-93.272c.73-.73.799-1.844.154-2.49l-16.2-16.2c-.645-.645-1.76-.576-2.49.154L43.596 93.906Z" /></g></g></symbol><symbol  viewBox="0 0 48 54" id="icon/slam/icon_pause"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_pause_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.917647 0 0 0 0 0.929412 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_pause_a)" stroke-width="0" fill="none" fill-rule="evenodd"><path d="M17.143 3.375v47.25c-.003 1.863-1.92 3.373-4.286 3.375H4.286C1.92 53.998.003 52.488 0 50.625V3.375C.003 1.512 1.92.002 4.286 0h8.571c2.366.002 4.283 1.512 4.286 3.375ZM43.714 0h-8.571c-2.366.002-4.283 1.512-4.286 3.375v47.25c.003 1.863 1.92 3.373 4.286 3.375h8.571c2.366-.002 4.283-1.512 4.286-3.375V3.375C47.997 1.512 46.08.002 43.714 0Z" fill="#5C5C66" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 48 56" id="icon/slam/icon_play"><defs><filter color-interpolation-filters="auto" id="icon/slam/icon_play_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.917647 0 0 0 0 0.929412 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g filter="url(#icon/slam/icon_play_a)" stroke-width="0" fill="none" fill-rule="evenodd"><path d="M45.465 25.051 5.572.976A3.438 3.438 0 0 0 .358 3.921v48.15a3.432 3.432 0 0 0 5.215 2.946l39.893-24.075a3.44 3.44 0 0 0 0-5.89h-.001Z" fill="#5C5C66" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 104 104" id="icon/slam/icon_select_map"><defs><linearGradient x1="100%" y1="21.522%" x2="13.21%" y2="94.094%" id="icon/slam/icon_select_map_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g fill-rule="nonzero" stroke-width="0" fill="none"><circle stroke="currentColor" stroke-width="5.889" fill="url(#icon/slam/icon_select_map_a)" cx="52" cy="52" r="49.055" /><path d="m79.785 40.24-31.76 32.517A4.086 4.086 0 0 1 45.094 74a4.088 4.088 0 0 1-2.931-1.243l-17.95-18.38A4.266 4.266 0 0 1 23 51.38c0-2.343 1.856-4.24 4.14-4.24 1.145 0 2.182.475 2.932 1.243l15.022 15.376 28.834-29.52A4.098 4.098 0 0 1 76.858 33C79.143 33 81 34.9 81 37.24a4.281 4.281 0 0 1-1.215 3Z" fill="#FFF" /></g></symbol><symbol  viewBox="0 0 116 118" id="icon/slam/icon_stop"><defs><linearGradient x1="98.624%" y1="21.522%" x2="14.223%" y2="94.094%" id="icon/slam/icon_stop_a"><stop stop-color="#BA0000" offset="0%" /><stop stop-color="#BF4949" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/slam/icon_stop_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><rect fill="url(#icon/slam/icon_stop_a)" fill-rule="nonzero" width="116" height="117.63" rx="58" /><g filter="url(#icon/slam/icon_stop_b)"><path d="M44.75 41h28.5A4.751 4.751 0 0 1 78 45.75v28.5A4.751 4.751 0 0 1 73.25 79h-28.5A4.751 4.751 0 0 1 40 74.25v-28.5A4.751 4.751 0 0 1 44.75 41Z" fill="#000" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 182 182" id="icon/slam/img_loading"><defs><linearGradient x1="82.249%" y1="89.788%" x2="25.335%" y2="-2.275%" id="icon/slam/img_loading_a"><stop stop-color="#DCE2EC" offset="0%" /><stop stop-color="#FFF" offset="100%" /></linearGradient><linearGradient x1="73.707%" y1="81.086%" x2="24.284%" y2="16.976%" id="icon/slam/img_loading_b"><stop stop-color="#AEB7C4" offset="0%" /><stop stop-color="#CFD5E0" offset="100%" /></linearGradient></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><path d="M0 0h182v182H0z" /><path d="M16 16h151v151H16z" /><g fill-rule="nonzero"><path fill="url(#icon/slam/img_loading_a)" d="M96.748 95.581 81.58 81.291l-.556-.591-.407-.556-.279-.528-.204-.561-.112-.528-.032-.503.034-.504.083-.47.132-.436.261-.62.284-.51.31-.451.237-.3.25-.272 16.293-15.32 1.158-1.153 1.06-1.168.97-1.177.88-1.192 1.093-1.66.953-1.641.823-1.626.737-1.668.624-1.602.515-1.542.453-1.565.362-1.448.281-1.336.329-1.957.193-1.582.118-1.44.042-.94.007-.87V13.91l-46.838-3.843-46.839 3.843v19.664l.008.87.042.938.117 1.437.194 1.58.329 1.955.28 1.336.363 1.446.453 1.565.515 1.542.624 1.603.737 1.668.822 1.625.952 1.642 1.095 1.66.88 1.195.97 1.18 1.06 1.168 1.158 1.156 16.294 15.32.248.273.238.3.308.451.286.51.26.62.13.437.084.469.036.504-.032.503-.114.528-.203.563-.28.526-.405.556-.556.591-15.196 14.29-.647.658-.675.737-.997 1.178-1.048 1.348-1.236 1.751-.803 1.24-.83 1.397-.856 1.568-.79 1.597-.763 1.741-.733 1.896-.485 1.432-.44 1.506-.397 1.583-.348 1.665-.274 1.653-.2 1.727-.127 1.8-.048 1.877v19.515h93.65v-19.515l-.047-1.877-.126-1.8-.201-1.727-.272-1.653-.35-1.665-.394-1.583-.443-1.506-.485-1.432-.733-1.896-.762-1.74-.79-1.598-.857-1.568-.83-1.397-.801-1.24-1.238-1.751-1.048-1.348-.997-1.178-.673-.737z" transform="translate(31.1 16)" /><path fill="url(#icon/slam/img_loading_b)" d="m89.98 32.717-.032.638-.062.68-.132 1.02-.193 1.109-.304 1.336-.4 1.376-.549 1.494-.433.988-.512.991-.595 1.002-.664.954-.757.922-.86.892L69.05 60.771l-.49.52-.637.788-.629.902-.692 1.162-.427.824-.417.93-.412 1.046-.352 1.062-.31 1.167-.27 1.281-.191 1.292-.12 1.398-.038 1.511v32.58l29.617 26.149H27.118l29.615-26.13.098-32.599-.04-1.511-.123-1.398-.198-1.29-.273-1.28-.318-1.165-.359-1.057-.416-1.04-.42-.923-.425-.81-.686-1.142-.61-.872-.605-.755-.439-.471-15.606-14.821-.844-.874-.746-.911-.657-.945-.588-.99-.51-.986-.434-.984-.549-1.489-.405-1.377-.312-1.339-.201-1.116-.14-1.028-.068-.695-.039-.668z" transform="translate(31.1 16)" /><path d="M144.343 31.118H38.657l-.783-.043-.75-.114-.718-.184-.69-.254-.665-.322-.62-.377-.58-.431-.538-.489-.488-.54-.434-.577-.376-.62-.322-.666-.254-.691-.183-.718-.113-.748-.043-.785.043-.785.113-.75.183-.718.254-.689.322-.666.376-.62.434-.58.488-.538.539-.488.579-.434.62-.374.664-.324.691-.254.718-.183.75-.113.783-.043h105.661l.789.046.753.117.721.189.693.256.668.325.622.376.58.434.539.49.49.538.434.578.376.618.322.662.256.69.183.714.113.746.043.78-.043.785-.113.748-.183.718-.254.69-.322.667-.376.62-.434.577-.488.54-.539.489-.579.431-.62.377-.664.322-.691.254-.718.184-.75.114-.783.043ZM151.9 159.44l-.043.785-.113.75-.183.718-.254.689-.322.666-.376.62-.434.58-.488.538-.539.488-.579.434-.62.374-.664.324-.691.254-.718.183-.75.113-.783.043H38.657l-.783-.043-.75-.113-.718-.183-.69-.254-.665-.324-.62-.374-.58-.434-.538-.488-.488-.539-.434-.579-.376-.62-.322-.666-.254-.69-.183-.717-.113-.75-.043-.785.043-.785.113-.748.183-.718.254-.69.322-.667.376-.62.434-.577.488-.54.539-.489.579-.431.62-.377.664-.322.691-.254.718-.184.75-.114.783-.043h105.661l.789.046.753.12.721.186.693.256.668.325.622.378.58.432.539.49.49.539.434.577.376.618.322.664.256.688.183.716.113.744.043.78Z" fill="#DAE0EB" /></g></g></symbol><symbol  viewBox="0 0 129 129" id="icon/slam/img_map"><g stroke-width="0" fill="none" fill-rule="evenodd"><rect fill-opacity=".138" fill="#000" width="128.695" height="128.659" rx="64.329" /><path d="M47.086 54.685C53.906 67.459 65.6 81.987 65.6 81.987s12.18-14.528 19.243-27.302h12.423c2.924 0 5.116 2.254 5.116 5.01V94.76c0 2.755-2.436 5.01-5.116 5.01H37.1c-2.68 0-5.115-2.255-5.115-5.01V59.694c0-2.755 2.436-5.009 5.115-5.009h9.987Z" fill="#E7E7E7" fill-rule="nonzero" /><path d="m34.184 81.524 1.475-1.93c1.966 1.448 4.179 2.653 6.145 3.859l-1.229 1.929c-2.212-.965-4.179-2.411-6.391-3.858ZM45 87.793l.983-2.17c2.213.964 4.425 1.929 6.637 2.411l-.737 2.411c-2.212-.964-4.425-1.687-6.883-2.652Zm12.045 3.617.492-2.411c.983.24 2.212.24 3.196.482 1.229.241 2.458 0 3.687 0l.246 2.411c-1.475.241-2.95.241-4.425 0-.983 0-1.967-.241-3.196-.482Zm12.783-.723-.737-2.17c1.966-.724 3.933-1.447 6.637-2.894l.983 2.17c-2.704 1.206-4.916 2.17-6.883 2.894Zm11.308-5.305-.983-2.17c2.704-1.206 4.67-2.17 6.883-3.135l.983 2.17c-2.212.965-4.179 1.93-6.883 3.135Zm11.062-4.34-.738-2.412c2.459-.723 5.163-.964 7.621-1.205v2.41c-2.212.242-4.425.483-6.883 1.207Z" fill="#A1A1A1" fill-rule="nonzero" /><path d="M65.912 23.895c10.324 0 19.665 8.198 19.665 18.566 0 9.887-19.665 32.07-19.665 32.07s-19.42-22.666-19.42-32.07c0-10.368 9.095-18.566 19.42-18.566Z" fill="#E7E7E7" fill-rule="nonzero" /><path d="M57.783 43.426c0 4.1 3.441 7.234 7.374 7.234 4.18 0 7.375-3.376 7.375-7.234 0-4.1-3.441-7.234-7.375-7.234-3.933-.24-7.374 3.135-7.374 7.234Z" fill="#9F9FA5" fill-rule="nonzero" /></g></symbol><symbol   viewBox="0 0 129 129" id="icon/slam/img_map_on"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/slam/img_map_on_c"><stop stop-color="#FFF" offset="0%" /><stop stop-color="#EFF6FF" offset="100%" /></linearGradient><filter x="-36.9%" y="-35.4%" width="173.8%" height="173.8%" filterUnits="objectBoundingBox" id="icon/slam/img_map_on_a"><feOffset dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="15.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.112188593 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon/slam/img_map_on_b" x="0" y="0" width="128.695" height="128.659" rx="64.329" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><g><use fill="#000" filter="url(#icon/slam/img_map_on_a)" xlink:href="#icon/slam/img_map_on_b" /><use fill="url(#icon/slam/img_map_on_c)" xlink:href="#icon/slam/img_map_on_b" /></g><g fill-rule="nonzero"><path d="M44.086 56.685C50.906 69.459 62.6 83.987 62.6 83.987s12.18-14.528 19.243-27.302h12.423c2.924 0 5.116 2.254 5.116 5.01V96.76c0 2.755-2.436 5.01-5.116 5.01H34.1c-2.68 0-5.115-2.255-5.115-5.01V61.694c0-2.755 2.436-5.009 5.115-5.009h9.987Z" fill="#C0DCFF" /><path d="M61.912 25.895c10.324 0 19.665 8.198 19.665 18.566 0 9.887-19.665 32.07-19.665 32.07s-19.42-22.666-19.42-32.07c0-10.368 9.095-18.566 19.42-18.566Zm-7.13 19.531c0 4.1 3.442 7.234 7.375 7.234 4.18 0 7.375-3.376 7.375-7.234 0-4.1-3.441-7.234-7.375-7.234-3.933-.24-7.374 3.135-7.374 7.234ZM31.185 83.524l1.475-1.93c1.966 1.448 4.179 2.653 6.145 3.859l-1.229 1.929c-2.212-.965-4.179-2.411-6.391-3.858ZM42 89.793l.983-2.17c2.213.964 4.425 1.929 6.637 2.411l-.737 2.411c-2.212-.964-4.425-1.687-6.883-2.652Zm12.045 3.617.492-2.411c.983.24 2.212.24 3.196.482 1.229.241 2.458 0 3.687 0l.246 2.411c-1.475.241-2.95.241-4.425 0-.983 0-1.967-.241-3.196-.482Zm12.783-.723-.737-2.17c1.966-.724 3.933-1.447 6.637-2.894l.983 2.17c-2.704 1.206-4.916 2.17-6.883 2.894Zm11.308-5.305-.983-2.17c2.704-1.206 4.67-2.17 6.883-3.135l.983 2.17c-2.212.965-4.179 1.93-6.883 3.135Zm11.062-4.34-.738-2.412c2.459-.723 5.163-.964 7.621-1.205v2.41c-2.212.242-4.425.483-6.883 1.207Z" fill="#2589FF" /></g></g></symbol><symbol viewBox="0 0 130 129"  id="icon/slam/img_patrol"><g transform="translate(.492)" stroke-width="0" fill="none" fill-rule="evenodd"><rect fill-opacity=".138" fill="#000" width="128.695" height="128.659" rx="64.329" /><g fill-rule="nonzero"><path d="M56.194 94.489c-.949-.317-1.898-.633-2.846-1.267-1.265-.633-2.53 0-3.163 1.267-.632 1.266 0 2.533 1.265 3.166.95.316 1.898.95 3.163 1.266h.948c.95 0 1.898-.633 2.214-1.583.316-.95-.316-2.533-1.581-2.85Zm-9.487-44.325c.316.317.632.317 1.265.317.948 0 1.58-.317 2.213-1.266.317-.634.633-1.267 1.265-1.9a2.486 2.486 0 0 0 0-3.483 2.48 2.48 0 0 0-3.478 0c-.633.95-1.581 1.9-2.214 2.85-.632 1.266-.316 2.85.949 3.482Zm2.53 6.65c-.317-1.267-1.581-2.217-2.846-1.9-1.265.316-2.214 1.583-1.898 2.849.316 1.266.633 2.533.949 3.483.316.95 1.265 1.583 2.214 1.583.316 0 .632 0 .948-.317 1.265-.633 1.898-1.9 1.265-3.166-.316-.633-.632-1.583-.632-2.533Zm8.222 10.13c-.949-.316-1.581-.95-2.53-1.266-.949-.633-2.53-.317-3.162.633-.633.95-.317 2.533.632 3.166.949.633 1.897 1.267 3.162 1.9.317.316.633.316.95.316.948 0 1.58-.633 2.213-1.266.316-1.583-.316-2.85-1.265-3.483Zm16.444-22.162c-.632-.633-1.581-1.266-2.213-1.9-.95-.633-2.53-.633-3.163.634-.632.95-.632 2.533.633 3.166.632.316 1.265.95 1.897 1.583.316.316.949.633 1.581.633.633 0 1.265-.317 1.898-.95.316-.633.316-2.216-.633-3.166Zm4.111 44.008c-1.265-.317-2.53.316-3.162 1.583l-.316.633-.95 1.9c-.632.95-.315 2.533.633 3.166.317.316.95.316 1.265.316.633 0 1.582-.316 1.898-.95.632-.95.948-1.9 1.265-2.849l.316-.633c.949-1.583.316-2.85-.949-3.166Zm-14.23-46.857c0-1.267-.95-2.533-2.214-2.533H58.09c-1.265 0-2.213 1.266-2.213 2.533 0 1.266 1.265 2.216 2.213 2.216h3.163c1.265 0 2.53-.95 2.53-2.216Zm13.914 35.46c-.949-.95-2.214-.95-3.479-.317-.948.95-1.265 2.216-.316 3.482.633.633.949 1.583 1.265 2.216.316.95 1.265 1.583 2.214 1.583.316 0 .632 0 .948-.316 1.265-.633 1.898-1.9 1.265-3.166-.632-1.267-1.265-2.216-1.897-3.483Zm-8.538-6.016c-.95-.633-2.214-.95-3.163-1.267-1.265-.316-2.53.317-3.162 1.267-.316 1.266.316 2.533 1.265 3.166.949.316 1.897.633 2.846 1.266.316 0 .632.317.949.317.948 0 1.897-.633 2.213-1.267.949-1.583.317-3.166-.948-3.482Zm-1.582 24.695h-2.846c-1.265 0-2.213.95-2.213 2.216 0 1.266.948 2.533 2.213 2.533h.949c.949 0 1.897 0 2.846-.317 1.265-.316 2.214-1.266 1.898-2.533-.317-1.266-1.582-2.216-2.847-1.9ZM38.485 74.86c-6.325 0-11.701 5.065-11.701 11.714 0 3.166 1.265 6.015 3.478 8.231 1.898 1.9 5.693 6.016 5.693 6.016.632.633 1.58.95 2.53.95.948 0 1.58-.317 2.213-.95 0 0 4.428-4.433 6.009-6.332 1.897-2.216 3.162-5.066 3.162-8.232 0-6.332-5.06-11.398-11.384-11.398Z" fill="#E7E7E7" /><path d="M38.485 81.191c2.846 0 5.376 2.217 5.376 5.383 0 1.583-.633 3.166-1.898 4.115-.316 0-.316.317-.632.317-1.898 1.267-4.744.95-6.325-.633-1.265-1.267-1.897-2.533-1.897-3.8 0-3.165 2.213-5.382 5.376-5.382Z" fill="#9F9FA5" /><path d="m100.467 32.751-18.974-6.648c-.949-.317-1.898-.317-2.846.316-.633.634-1.265 1.583-1.265 2.533v28.494c0 1.9 1.265 3.166 3.162 3.166 1.898 0 3.163-1.266 3.163-3.166v-7.915l17.393-11.08c1.264-.634 1.58-1.9 1.58-3.167 0-1.266-.948-2.216-2.213-2.533Z" fill="#E7E7E7" /><path fill="#9F9FA5" d="M83.707 41.933v-8.548l8.538 3.166z" /></g></g></symbol><symbol   viewBox="0 0 129 129" id="icon/slam/img_patrol_on"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/slam/img_patrol_on_c"><stop stop-color="#FFF" offset="0%" /><stop stop-color="#FFF2E2" offset="100%" /></linearGradient><filter x="-35.7%" y="-34.2%" width="171.5%" height="171.5%" filterUnits="objectBoundingBox" id="icon/slam/img_patrol_on_a"><feOffset dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.112188593 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon/slam/img_patrol_on_b" x="0" y="0" width="128.695" height="128.659" rx="64.329" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><g transform="translate(.492)"><use fill="#000" filter="url(#icon/slam/img_patrol_on_a)" xlink:href="#icon/slam/img_patrol_on_b" /><use fill="url(#icon/slam/img_patrol_on_c)" xlink:href="#icon/slam/img_patrol_on_b" /></g><g fill-rule="nonzero"><path d="M56.686 94.489c-.949-.317-1.898-.633-2.846-1.267-1.265-.633-2.53 0-3.163 1.267-.632 1.266 0 2.533 1.265 3.166.949.316 1.898.95 3.163 1.266h.948c.95 0 1.898-.633 2.214-1.583.316-.95-.316-2.533-1.581-2.85Zm-9.487-44.325c.316.317.632.317 1.265.317.948 0 1.58-.317 2.213-1.266.317-.634.633-1.267 1.265-1.9a2.486 2.486 0 0 0 0-3.483 2.48 2.48 0 0 0-3.478 0c-.633.95-1.581 1.9-2.214 2.85-.632 1.266-.316 2.85.949 3.482Zm2.53 6.65c-.317-1.267-1.582-2.217-2.846-1.9-1.265.316-2.214 1.583-1.898 2.849.316 1.266.633 2.533.949 3.483.316.95 1.265 1.583 2.213 1.583.317 0 .633 0 .95-.317 1.264-.633 1.897-1.9 1.264-3.166-.316-.633-.632-1.583-.632-2.533Zm8.222 10.13c-.949-.316-1.581-.95-2.53-1.266-.949-.633-2.53-.317-3.162.633-.633.95-.317 2.533.632 3.166.949.633 1.897 1.267 3.162 1.9.317.316.633.316.95.316.948 0 1.58-.633 2.213-1.266.316-1.583-.316-2.85-1.265-3.483Zm16.444-22.162c-.632-.633-1.581-1.266-2.214-1.9-.948-.633-2.53-.633-3.162.634-.632.95-.632 2.533.633 3.166.632.316 1.265.95 1.897 1.583.316.316.949.633 1.581.633.633 0 1.265-.317 1.898-.95.316-.633.316-2.216-.633-3.166Zm4.111 44.008c-1.265-.317-2.53.316-3.162 1.583l-.316.633-.95 1.9c-.632.95-.315 2.533.633 3.166.317.316.95.316 1.265.316.633 0 1.582-.316 1.898-.95.632-.95.948-1.9 1.265-2.849l.316-.633c.949-1.583.316-2.85-.949-3.166Zm-14.23-46.857c0-1.267-.95-2.533-2.214-2.533h-3.479c-1.265 0-2.213 1.266-2.213 2.533 0 1.266 1.265 2.216 2.213 2.216h3.163c1.265 0 2.53-.95 2.53-2.216Zm13.914 35.46c-.949-.95-2.214-.95-3.479-.317-.948.95-1.265 2.216-.316 3.482.633.633.949 1.583 1.265 2.216.316.95 1.265 1.583 2.214 1.583.316 0 .632 0 .948-.316 1.265-.633 1.898-1.9 1.265-3.166-.632-1.267-1.265-2.216-1.897-3.483Zm-8.538-6.016c-.95-.633-2.214-.95-3.163-1.267-1.265-.316-2.53.317-3.162 1.267-.316 1.266.316 2.533 1.265 3.166.949.316 1.897.633 2.846 1.266.316 0 .632.317.949.317.948 0 1.897-.633 2.213-1.267.949-1.583.317-3.166-.948-3.482ZM68.07 96.072h-2.846c-1.265 0-2.213.95-2.213 2.216 0 1.266.948 2.533 2.213 2.533h.949c.949 0 1.897 0 2.846-.317 1.265-.316 2.214-1.266 1.898-2.533-.317-1.266-1.582-2.216-2.847-1.9Z" fill="#FF991A" /><path d="M38.977 74.86c-6.325 0-11.701 5.065-11.701 11.714 0 3.166 1.265 6.015 3.478 8.231 1.898 1.9 5.693 6.016 5.693 6.016.632.633 1.58.95 2.53.95.948 0 1.58-.317 2.213-.95 0 0 4.428-4.433 6.009-6.332 1.897-2.216 3.162-5.066 3.162-8.232 0-6.332-5.06-11.398-11.384-11.398Z" fill="#FFC13E" /><path d="M38.977 81.191c2.846 0 5.376 2.217 5.376 5.383 0 1.583-.633 3.166-1.898 4.115-.316 0-.316.317-.632.317-1.898 1.267-4.744.95-6.325-.633-1.265-1.267-1.897-2.533-1.897-3.8 0-3.165 2.213-5.382 5.376-5.382Z" fill="#FFF" /><path d="m100.959 32.751-18.974-6.648c-.949-.317-1.898-.317-2.846.316-.633.634-1.265 1.583-1.265 2.533v28.494c0 1.9 1.265 3.166 3.162 3.166 1.898 0 3.162-1.266 3.162-3.166v-7.915l17.394-11.08c1.264-.634 1.58-1.9 1.58-3.167 0-1.266-.948-2.216-2.213-2.533Z" fill="#FFC13E" /><path fill="#FFF" d="M84.198 41.933v-8.548l8.539 3.166z" /></g></g></symbol><symbol  viewBox="0 0 129 129" id="icon/slam/img_returnCharge"><defs><filter color-interpolation-filters="auto" id="icon/slam/img_returnCharge_a"><feColorMatrix in="SourceGraphic" values="0 0 0 0 0.905882 0 0 0 0 0.905882 0 0 0 0 0.905882 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g transform="translate(.305)" stroke-width="0" fill="none" fill-rule="evenodd"><rect fill-opacity=".138" fill="#000" width="128.695" height="128.659" rx="64.329" /><g filter="url(#icon/slam/img_returnCharge_a)"><g fill-rule="nonzero"><path fill="#2AC2DC" d="M67.859 64.259V43.732L50.743 71.101h10.27v20.526L78.127 64.26z" /><path d="M35.711 57.204a27.368 27.368 0 0 1 5.936-8.877l-4.837-4.834c-13.368 13.36-13.368 35.02 0 48.38l4.84-4.837a27.356 27.356 0 0 1-5.935-29.832h-.004Z" fill="#44E3E6" /><path d="M48.363 62.442a13.684 13.684 0 0 1 2.968-4.437l-4.843-4.841a20.52 20.52 0 0 0 0 29.031l4.843-4.84a13.678 13.678 0 0 1-2.971-14.913h.003ZM93.749 57.208a27.364 27.364 0 0 0-5.94-8.881l4.844-4.838a34.197 34.197 0 0 1 10.028 24.19A34.197 34.197 0 0 1 92.653 91.87l-4.844-4.837a27.356 27.356 0 0 0 5.94-29.829v.004Z" fill="#44E3E6" /><path d="M81.096 62.442a13.69 13.69 0 0 0-2.968-4.437l4.84-4.841a20.52 20.52 0 0 1 0 29.031l-4.84-4.84a13.685 13.685 0 0 0 2.968-14.913Z" fill="#44E3E6" /></g></g></g></symbol><symbol   viewBox="0 0 129 129" id="icon/slam/img_returnCharge_on"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/slam/img_returnCharge_on_c"><stop stop-color="#FFF" offset="0%" /><stop stop-color="#E9FAFB" offset="100%" /></linearGradient><filter x="-35.7%" y="-34.2%" width="171.5%" height="171.5%" filterUnits="objectBoundingBox" id="icon/slam/img_returnCharge_on_a"><feOffset dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="15" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.112188593 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon/slam/img_returnCharge_on_b" x="0" y="0" width="128.695" height="128.659" rx="64.329" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><g transform="translate(.305)"><use fill="#000" filter="url(#icon/slam/img_returnCharge_on_a)" xlink:href="#icon/slam/img_returnCharge_on_b" /><use fill="url(#icon/slam/img_returnCharge_on_c)" xlink:href="#icon/slam/img_returnCharge_on_b" /></g><g fill-rule="nonzero"><path fill="#2AC2DC" d="M68.164 64.259V43.732L51.048 71.101h10.27v20.526L78.434 64.26z" /><path d="M36.017 57.204a27.368 27.368 0 0 1 5.935-8.877l-4.837-4.834c-13.368 13.36-13.368 35.02 0 48.38l4.84-4.837a27.356 27.356 0 0 1-5.935-29.832h-.003Z" fill="#44E3E6" /><path d="M48.669 62.442a13.684 13.684 0 0 1 2.968-4.437l-4.844-4.841a20.52 20.52 0 0 0 0 29.031l4.844-4.84a13.678 13.678 0 0 1-2.972-14.913h.004ZM94.054 57.208a27.364 27.364 0 0 0-5.94-8.881l4.845-4.838a34.197 34.197 0 0 1 10.027 24.19A34.197 34.197 0 0 1 92.96 91.87l-4.844-4.837a27.356 27.356 0 0 0 5.939-29.829v.004Z" fill="#44E3E6" /><path d="M81.402 62.442a13.69 13.69 0 0 0-2.968-4.437l4.84-4.841a20.52 20.52 0 0 1 0 29.031l-4.84-4.84a13.685 13.685 0 0 0 2.968-14.913Z" fill="#44E3E6" /></g></g></symbol><symbol  viewBox="0 0 129 129" id="icon/slam/img_singlePoint"><g transform="translate(.084)" stroke-width="0" fill="none" fill-rule="evenodd"><rect fill-opacity=".138" fill="#000" width="128.695" height="128.659" rx="64.329" /><path d="M64.182 30.293c-17.617 0-31.898 14.278-31.898 31.89 0 17.612 14.281 31.89 31.898 31.89 17.618 0 31.899-14.278 31.899-31.89 0-17.612-14.281-31.89-31.899-31.89ZM78.9 48.368 64.543 81.521c-.207.474-.893.461-1.12-.026l-5.855-12.506a.388.388 0 0 0-.193-.194l-12.488-5.858c-.494-.227-.507-.915-.027-1.122L77.98 47.448c.58-.254 1.174.34.92.92Z" fill="#E7E7E7" fill-rule="nonzero" /></g></symbol><symbol   viewBox="0 0 129 129" id="icon/slam/img_singlePoint_on"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/slam/img_singlePoint_on_c"><stop stop-color="#FFF" offset="0%" /><stop stop-color="#FEE7F0" offset="100%" /></linearGradient><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/slam/img_singlePoint_on_d"><stop stop-color="#FF9A9D" offset="0%" /><stop stop-color="#FD537A" offset="100%" /></linearGradient><filter x="-36.9%" y="-35.4%" width="173.8%" height="173.8%" filterUnits="objectBoundingBox" id="icon/slam/img_singlePoint_on_a"><feOffset dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="15.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.112188593 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon/slam/img_singlePoint_on_b" x="0" y="0" width="128.695" height="128.659" rx="64.329" /></defs><g stroke-width="0" fill="none" fill-rule="evenodd"><g transform="translate(.084)"><use fill="#000" filter="url(#icon/slam/img_singlePoint_on_a)" xlink:href="#icon/slam/img_singlePoint_on_b" /><use fill="url(#icon/slam/img_singlePoint_on_c)" xlink:href="#icon/slam/img_singlePoint_on_b" /></g><path d="M31.899 0C14.28 0 0 14.278 0 31.89c0 17.612 14.281 31.89 31.899 31.89 17.617 0 31.898-14.278 31.898-31.89C63.797 14.278 49.516 0 31.9 0Zm14.716 18.075L32.259 51.228c-.207.474-.893.46-1.12-.027l-5.854-12.506a.388.388 0 0 0-.194-.193l-12.488-5.859c-.493-.227-.507-.914-.026-1.12l33.118-14.368c.58-.255 1.174.34.92.92Z" transform="translate(32.368 30.293)" fill="url(#icon/slam/img_singlePoint_on_d)" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 129 129" id="icon/slam/img_video_show"><defs><linearGradient x1="99.819%" y1="21.522%" x2="13.343%" y2="94.094%" id="icon/slam/img_video_show_a"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient><linearGradient x1="87.309%" y1="21.522%" x2="22.548%" y2="94.094%" id="icon/slam/img_video_show_b"><stop stop-color="#6879E4" offset="0%" /><stop stop-color="#495ABF" offset="100%" /></linearGradient></defs><g fill="none" fill-rule="evenodd"><circle cx="64.5" cy="64.5" r="64.5" fill="#EAEDFF" /><g fill-rule="nonzero"><path d="M34.5 0C15.448 0 0 15.476 0 34.563c0 19.086 15.448 34.562 34.5 34.562S69 53.649 69 34.562C69 15.477 53.552 0 34.5 0Zm0 8.64a3.7 3.7 0 0 1 3.696 3.704 3.7 3.7 0 0 1-3.696 3.703 3.7 3.7 0 0 1-3.696-3.703A3.7 3.7 0 0 1 34.5 8.64Zm0 43.204c-9.526 0-17.25-7.738-17.25-17.282 0-9.543 7.724-17.28 17.25-17.28s17.25 7.737 17.25 17.28c0 9.544-7.724 17.282-17.25 17.282Z" fill="url(#icon/slam/img_video_show_a)" transform="translate(30 24)" /><path d="M46.799 34.348c0 3.31-1.276 6.426-3.605 8.767a12.14 12.14 0 0 1-8.694 3.636 12.14 12.14 0 0 1-8.694-3.636 12.348 12.348 0 0 1-3.605-8.767c0-3.31 1.276-6.427 3.605-8.768a12.14 12.14 0 0 1 8.694-3.636 12.14 12.14 0 0 1 8.694 3.636 12.348 12.348 0 0 1 3.605 8.768Zm11.276 33.714c1.46 1.008 1.414 3.194-.085 4.147A43.82 43.82 0 0 1 34.5 79a43.758 43.758 0 0 1-23.49-6.799c-1.5-.945-1.545-3.131-.085-4.147A2.452 2.452 0 0 1 13.631 68a38.738 38.738 0 0 0 5.557 2.915c4.843 2.077 9.993 3.124 15.312 3.124 5.32 0 10.47-1.047 15.32-3.117a39.535 39.535 0 0 0 5.557-2.914 2.425 2.425 0 0 1 2.698.054Z" fill="url(#icon/slam/img_video_show_b)" transform="translate(30 24)" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_1"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_1_a"><stop stop-color="#FBA56D" offset="0%" /><stop stop-color="#EE6341" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_1_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect fill="url(#icon/programming-category/blockly_category_icon_1_a)" width="76" height="76" rx="23.31" /><g filter="url(#icon/programming-category/blockly_category_icon_1_b)"><g fill="#1A1A1A" fill-rule="nonzero"><path d="M53.055 30.465c-.592-.884-1.816-1.135-2.725-.539l-4.382 2.828-4.797-6.232a.153.153 0 0 0-.079-.077.959.959 0 0 0-.237-.25 1.866 1.866 0 0 0-.355-.231.153.153 0 0 0-.1-.039 1.215 1.215 0 0 0-.374-.115.283.283 0 0 0-.119-.039c-.098-.019-.217-.019-.315-.019-.257 0-.494.038-.73.135l-9.87 3.847c-.534.211-.968.635-1.145 1.173l-1.974 5.77c-.336 1.02.217 2.097 1.243 2.444.217.057.434.096.632.096.828 0 1.599-.5 1.875-1.308l1.678-4.925 5.765-2.25-1.343 7.79-9.653 15.062a1.9 1.9 0 0 0 .631 2.654 2.014 2.014 0 0 0 2.724-.615l9.041-14.1 7.344 2.386-5.645 5.482c-.77.75-.77 1.98 0 2.731.77.75 2.033.75 2.802 0l7.897-7.694a1.92 1.92 0 0 0 .513-1.808 1.917 1.917 0 0 0-1.283-1.385L39.828 37.91l.928-5.482 3.159 4.097a1.995 1.995 0 0 0 2.665.442l5.922-3.847c.908-.577 1.165-1.79.553-2.655ZM38.942 21.67a2.826 2.826 0 1 0 5.653 0 2.826 2.826 0 0 0-5.653 0Z" /></g></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_3"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_3_a"><stop stop-color="#B4ACFF" offset="0%" /><stop stop-color="#665AF4" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_3_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect width="76" height="76" rx="23.31" fill="url(#icon/programming-category/blockly_category_icon_3_a)" /><g filter="url(#icon/programming-category/blockly_category_icon_3_b)"><path d="M37.5 22C28.387 22 21 29.387 21 38.5S28.387 55 37.5 55 54 47.613 54 38.5A16.5 16.5 0 0 0 37.5 22Zm6.517 18.303-8.591 4.962a2.08 2.08 0 0 1-3.124-1.803v-9.924a2.08 2.08 0 0 1 3.124-1.803l8.591 4.962a2.086 2.086 0 0 1 0 3.606Z" fill="#333" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_4"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_4_a"><stop stop-color="#B0D5FF" offset="0%" /><stop stop-color="#3B8CE6" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_4_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect width="76" height="76" rx="23.31" fill="url(#icon/programming-category/blockly_category_icon_4_a)" /><g filter="url(#icon/programming-category/blockly_category_icon_4_b)"><path d="M37.993 20.727a14.12 14.12 0 0 0-13.61 10.34 14.11 14.11 0 0 0 6.333 15.87v2.055H45.27v-2.054a14.13 14.13 0 0 0 6.862-12.097c-.14-7.743-6.392-13.983-14.139-14.114ZM46.514 35.2h-.245a1.15 1.15 0 0 1-1.187-.942 8.2 8.2 0 0 0-8.22-6.407 1.113 1.113 0 0 1-1.188-1.187 1.111 1.111 0 0 1 1.188-1.187 10.801 10.801 0 0 1 10.557 8.29c.127.66-.302 1.3-.961 1.433h.056Zm-15.798 16.13H45.27v3.316H30.716v-3.317Z" fill="#000" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_5"><defs><linearGradient x1="50%" y1=".948%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_5_a"><stop stop-color="#A1FFA1" offset="0%" /><stop stop-color="#276F27" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_5_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect fill="url(#icon/programming-category/blockly_category_icon_5_a)" width="76" height="76" rx="23.31" /><g filter="url(#icon/programming-category/blockly_category_icon_5_b)"><path d="M52.222 25H25.778C23.69 25 22 26.26 22 27.812v16.875c0 1.554 1.691 2.813 3.778 2.813h26.444C54.31 47.5 56 46.24 56 44.687V27.812C56 26.26 54.309 25 52.222 25ZM33.73 40.942c.543.404.543 1.059 0 1.463a1.658 1.658 0 0 1-.983.303c-.355 0-.71-.1-.982-.303l-5.896-4.389c-.543-.404-.543-1.059 0-1.463l5.896-4.389c.543-.404 1.422-.404 1.965 0 .543.404.543 1.059 0 1.463l-4.913 3.658 4.913 3.657Zm8.844-10.42-4.315 11.992c-.166.463-.728.767-1.341.767-.12 0-.24-.01-.361-.035-.741-.148-1.18-.715-.983-1.267l4.316-11.993c.2-.553.963-.88 1.702-.732.74.148 1.18.716.982 1.267Zm9.559 7.494-5.896 4.39a1.658 1.658 0 0 1-.982.302c-.356 0-.711-.1-.983-.303-.543-.404-.543-1.059 0-1.463l4.913-3.657-4.913-3.658c-.543-.404-.543-1.059 0-1.463.543-.404 1.422-.404 1.965 0l5.896 4.39c.543.403.543 1.058 0 1.462ZM54.112 55H23.888A1.888 1.888 0 0 1 22 53.125c0-1.031.85-1.875 1.889-1.875H54.11c1.039 0 1.889.844 1.889 1.875C56 54.156 55.15 55 54.111 55Z" fill="#2B2B2B" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_6"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_6_a"><stop stop-color="#FFE6B4" offset="0%" /><stop stop-color="#FF9800" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_6_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect width="76" height="76" rx="23.31" fill="url(#icon/programming-category/blockly_category_icon_6_a)" /><g filter="url(#icon/programming-category/blockly_category_icon_6_b)"><path d="M53.017 21.166c-3.463-.004-8.437 0-11.9 0-1.39 0-1.981.84-1.981 1.998-.004 3.419.013 9.057.013 11.736 0 1.403.72 2.263 1.969 2.263 1.889.007 10.258.004 11.899 0 1.404-.003 1.982-.532 1.982-1.998v-12c0-1.105-.83-2-1.982-2Zm-2.026 8.353c-.12.422-.411.65-.846.65-1.03.003-2.059 0-3.088 0-1.03 0-2.058.003-3.088-.003-.637-.004-1.025-.657-.82-1.356.12-.409.409-.633.83-.637.787-.003 1.574 0 2.361 0 1.265 0 2.527-.003 3.791 0 .668.004 1.063.63.86 1.346Zm-16.108-8.518c-3.463-.003-8.437 0-11.9 0-1.165 0-1.982.727-1.982 2v12c0 1.094.864 1.995 1.983 1.998 1.676.007 10.046.004 11.899 0A1.967 1.967 0 0 0 36.865 35V23c0-1.269-.82-1.999-1.982-1.999Zm-2.975 9c-1.172.01-1.982 0-1.982 0s.003 1.336 0 2c0 .398-.482 1.007-.986 1.007-.445 0-.986-.442-.996-1.008-.017-1.208 0-1.998 0-1.998s-.78.02-1.982 0c-.382 0-1-.473-1-1.005 0-.428.472-.994 1-.994h1.982s-.017-.8 0-2c.01-.565.464-1.014.996-1.014.448 0 .986.395.986 1.015.006 1.168 0 1.999 0 1.999s.81-.017 1.982 0c.577.006 1.006.566 1.006.994 0 .455-.641 1.001-1.006 1.005Zm2.975 8.997c-3.463-.003-8.437 0-11.9 0-1.487 0-1.982.446-1.982 2-.003 3.411 0 10.225 0 12 0 1.231.943 1.998 1.983 1.998 1.726.007 10.122.003 11.899 0 1.404-.003 1.982-.536 1.982-1.999v-12c.003-1.101-.83-1.999-1.982-1.999Zm-2.361 11.629c-.461.452-1.099.462-1.557.01-.601-.596-1.195-1.202-1.786-1.808-.073-.074-.116-.181-.186-.292-.734.747-1.395 1.423-2.062 2.09-.388.391-.84.452-1.298.2-.458-.25-.73-.76-.604-1.248.056-.221.202-.446.365-.613.63-.663 1.285-1.303 1.949-1.972-.087-.09-.153-.168-.23-.241-.607-.616-1.224-1.229-1.822-1.852-.362-.378-.392-.904-.103-1.346.299-.458.847-.683 1.308-.499.183.074.352.208.491.349.651.646 1.285 1.302 1.986 2.015.186-.214.339-.412.514-.592.449-.463.904-.915 1.355-1.373.574-.58 1.195-.613 1.7-.097.491.502.458 1.141-.096 1.7-.561.57-1.123 1.136-1.684 1.705-.066.07-.13.14-.219.238l1.06 1.058c.321.324.65.646.965.977.445.466.422 1.132-.046 1.59Zm22.473-9.63c0-.998-1.059-1.999-1.982-1.999-3.463-.003-8.436 0-11.899 0-1.022 0-1.982 1.058-1.982 2v12c0 .88.986 1.998 1.982 1.998 1.664.007 10.06.003 11.9 0 1.404-.003 1.985-.95 1.985-2.417.003-3.459 0-8.12-.004-11.582Zm-4.96 9h-5.88c-.786 0-1.059-.462-1.059-.998 0-.562.485-1 .993-1h5.95c.494 0 .992.404.992 1-.003.54-.604.998-.996.998Zm0-3.998c-2.228.024-2.948-.003-5.95 0-.391 0-.992-.408-.992-1 0-.553.485-.995.857-.995 1.205 0 4.608-.007 6.085-.007.472.01.99.516.993 1.001.003.49-.515.995-.993 1.001Z" fill="#040000" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_7"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_7_a"><stop stop-color="#FFA9A9" offset="0%" /><stop stop-color="#E63B3B" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_7_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect width="76" height="76" rx="23.31" fill="url(#icon/programming-category/blockly_category_icon_7_a)" /><g filter="url(#icon/programming-category/blockly_category_icon_7_b)"><path d="M33.56 23.528c.641 0 1.189.222 1.646.668.458.446.685.99.685 1.633v9.276c0 .643-.227 1.191-.685 1.65a2.24 2.24 0 0 1-1.647.686h-9.262a2.182 2.182 0 0 1-1.63-.686 2.28 2.28 0 0 1-.663-1.65v-9.276c0-.643.223-1.187.668-1.633a2.215 2.215 0 0 1 1.63-.668c-.005.004 9.257 0 9.257 0Zm0 18.555c.641 0 1.189.223 1.646.668.458.446.685.99.685 1.633v9.314a2.19 2.19 0 0 1-.685 1.633A2.275 2.275 0 0 1 33.56 56h-9.262a2.215 2.215 0 0 1-1.63-.669A2.224 2.224 0 0 1 22 53.698V44.38c0-.643.222-1.187.667-1.633a2.215 2.215 0 0 1 1.63-.669h9.262v.005Zm18.553 0c.642 0 1.185.223 1.63.668.445.446.668.99.668 1.633v9.314c0 .643-.223 1.188-.668 1.633a2.215 2.215 0 0 1-1.63.669h-9.262c-.641 0-1.189-.223-1.647-.669a2.19 2.19 0 0 1-.684-1.633V44.38c0-.643.227-1.187.684-1.633a2.275 2.275 0 0 1 1.647-.669h9.262v.005Zm5.147-14.475c.492.493.74 1.076.74 1.745 0 .668-.248 1.234-.74 1.705l-6.892 6.906c-.492.492-1.07.741-1.724.741-.655 0-1.228-.249-1.724-.741l-6.884-6.901a2.322 2.322 0 0 1-.706-1.706c0-.669.236-1.252.706-1.745l6.892-6.905c.492-.471 1.07-.707 1.724-.707.655 0 1.228.236 1.724.707l6.884 6.901Z" fill="#000" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_8"><defs><linearGradient x1="50%" y1="2.467%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_8_a"><stop stop-color="#F0ACFF" offset="0%" /><stop stop-color="#8E519B" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_8_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect width="76" height="76" rx="23.31" fill="url(#icon/programming-category/blockly_category_icon_8_a)" /><g filter="url(#icon/programming-category/blockly_category_icon_8_b)"><path d="M55.778 26.178c-.221-.665-.591-1.256-1.035-1.774-.813-.887-1.921-1.404-3.03-1.404H26.509c-.222 0-.37 0-.518.074-1.108.074-2.143.665-2.808 1.478-.666.813-1.11 1.774-1.183 2.809v18.922c0 .147 0 .295.074.517.074.96.443 1.848 1.035 2.513a4.235 4.235 0 0 0 2.808 1.626c.444.074.887.074 1.33.074h10.94v4.213H27.765c-.37 0-.739.296-.813.591-.148.444 0 .887.444 1.11.074.073.37.073.591.073h22.1c.222 0 .37 0 .591-.074.37-.148.592-.591.518-.96-.074-.37-.296-.666-.592-.74-.147-.074-.37-.074-.517-.074h-10.2V50.94h11.235c.37 0 .665 0 1.035-.074.665-.074 1.33-.37 1.847-.739.887-.665 1.626-1.7 1.848-2.809.074-.295.074-.59.148-.887V27.51c-.074-.444-.074-.887-.222-1.33Zm-9.682 7.244-3.918 4.287c-.074.074-.074.148 0 .221l2.07 4.287v.074a.159.159 0 0 1-.148.148h-1.404c-.074 0-.148-.074-.148-.074l-1.405-3.104s0-.074-.073-.074c-.074-.074-.148-.074-.222 0l-2.661 3.178c0 .074-.074.074-.148.074h-1.552c-.074 0-.074 0-.148-.074s-.074-.148 0-.222l3.918-4.36c.073-.074.073-.148 0-.222l-1.479-3.03h-2.956L33.9 43.916a.159.159 0 0 1-.148.148h-1.404c-.074 0-.148-.148-.148-.222l1.922-9.313h-2.07c-.074 0-.148-.147-.148-.221l.222-1.109c0-.074.074-.148.148-.148h2.143l.222-1.035c.444-2.217 1.552-3.178 3.844-3.178.443 0 .665 0 1.182.148l-.295 1.478c-.37-.074-.74-.148-1.183-.148-1.035 0-1.626.592-1.848 1.774l-.148.887v.074h3.622c.074 0 .148.074.148.074l1.404 3.03s0 .074.074.074c.074.074.148.074.222 0l2.66-3.178c0-.074.075-.074.149-.074h1.552c.074 0 .074 0 .148.074 0 .148 0 .296-.074.37Z" fill="#3E3E3E" fill-rule="nonzero" /></g></g></symbol><symbol  viewBox="0 0 76 76" id="icon/programming-category/blockly_category_icon_9"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="icon/programming-category/blockly_category_icon_9_a"><stop stop-color="#B7FFE7" offset="0%" /><stop stop-color="#3ACC9B" offset="100%" /></linearGradient><filter color-interpolation-filters="auto" id="icon/programming-category/blockly_category_icon_9_b"><feColorMatrix in="SourceGraphic" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix></filter></defs><g fill="none" fill-rule="evenodd"><rect fill="url(#icon/programming-category/blockly_category_icon_9_a)" width="76" height="76" rx="23.31" /><g filter="url(#icon/programming-category/blockly_category_icon_9_b)" opacity=".99"><g fill="#4C4C4C" fill-rule="nonzero"><path d="M20.357 53.595c.636 1.702 2.371 2.818 4.553 2.925 2.181.108 4.477-.809 6.023-2.404 1.546-1.595 2.106-3.627 1.47-5.33-.635-1.703-2.37-2.819-4.552-2.926-2.182-.108-4.478.809-6.024 2.404-1.546 1.596-2.106 3.628-1.47 5.33ZM39.828 49.198c.636 1.703 2.371 2.818 4.553 2.926 2.181.107 4.478-.81 6.023-2.405 1.546-1.595 2.107-3.627 1.47-5.33-.635-1.703-2.37-2.818-4.552-2.926-2.182-.108-4.478.809-6.024 2.404-1.546 1.596-2.106 3.628-1.47 5.33Z" /><path d="m47.47 21.513-14.768 4.595c-1.517.447-2.554 1.814-2.553 3.364V49.62h2.836V33.286c0-.33.213-.624.55-.71l14.786-4.613a.908.908 0 0 1 .212-.034c.373 0 .763.294.763.745v16.992h2.836V24.86c0-2.358-2.34-4.04-4.662-3.346Z" /></g></g></g></symbol>',e.insertBefore(t,e.lastChild)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}var commonjsGlobal=exports("j","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var zhCn={exports:{}},dayjs_min={exports:{}},hasRequiredDayjs_min;function requireDayjs_min(){return hasRequiredDayjs_min||(hasRequiredDayjs_min=1,function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,i="millisecond",o="second",r="minute",a="hour",s="day",l="week",c="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},_=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},v={s:_,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+_(i,2,"0")+":"+_(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(i,c),r=n-o<0,a=t.clone().add(i+(r?-1:1),c);return+(-(i+(n-o)/(r?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:s,D:h,h:a,m:r,s:o,ms:i,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",T={};T[b]=m;var A=function(e){return e instanceof C},y=function e(t,n,i){var o;if(!t)return b;if("string"==typeof t){var r=t.toLowerCase();T[r]&&(o=r),n&&(T[r]=n,o=r);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var s=t.name;T[s]=t,o=s}return!i&&o&&(b=o),o||!i&&b},E=function(e,t){if(A(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},S=v;S.l=y,S.i=A,S.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=y(e.locale,null,!0),this.parse(e)}var _=m.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(f);if(i){var o=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return S},_.isValid=function(){return!(this.$d.toString()===p)},_.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},_.isAfter=function(e,t){return E(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<E(e)},_.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var n=this,i=!!S.u(t)||t,u=S.p(e),p=function(e,t){var o=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return i?o:o.endOf(s)},f=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,m=this.$M,_=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case d:return i?p(1,0):p(31,11);case c:return i?p(1,m):p(0,m+1);case l:var b=this.$locale().weekStart||0,T=(g<b?g+7:g)-b;return p(i?_-T:_+(6-T),m);case s:case h:return f(v+"Hours",0);case a:return f(v+"Minutes",1);case r:return f(v+"Seconds",2);case o:return f(v+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var n,l=S.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[s]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[a]=u+"Hours",n[r]=u+"Minutes",n[o]=u+"Seconds",n[i]=u+"Milliseconds",n)[l],f=l===s?this.$D+(t-this.$W):t;if(l===c||l===d){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[S.p(e)]()},_.add=function(i,u){var h,p=this;i=Number(i);var f=S.p(u),g=function(e){var t=E(p);return S.w(t.date(t.date()+Math.round(e*i)),p)};if(f===c)return this.set(c,this.$M+i);if(f===d)return this.set(d,this.$y+i);if(f===s)return g(1);if(f===l)return g(7);var m=(h={},h[r]=t,h[a]=n,h[o]=e,h)[f]||1,_=this.$d.getTime()+i*m;return S.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),r=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=function(e,n,o,r){return e&&(e[n]||e(t,i))||o[n].slice(0,r)},d=function(e){return S.s(r%12||12,e,"0")},h=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:S.s(s+1,2,"0"),MMM:u(n.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:S.s(r,2,"0"),h:d(1),hh:d(2),a:h(r,a,!0),A:h(r,a,!1),m:String(a),mm:S.s(a,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return i.replace(g,(function(e,t){return t||f[e]||o.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(i,h,p){var f,g=S.p(h),m=E(i),_=(m.utcOffset()-this.utcOffset())*t,v=this-m,b=S.m(this,m);return b=(f={},f[d]=b/12,f[c]=b,f[u]=b/3,f[l]=(v-_)/6048e5,f[s]=(v-_)/864e5,f[a]=v/n,f[r]=v/t,f[o]=v/e,f)[g]||v,p?b:S.a(b)},_.daysInMonth=function(){return this.endOf(c).$D},_.$locale=function(){return T[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=y(e,t,!0);return i&&(n.$L=i),n},_.clone=function(){return S.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},m}(),w=C.prototype;return E.prototype=w,[["$ms",i],["$s",o],["$m",r],["$H",a],["$W",s],["$M",c],["$y",d],["$D",h]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,C,E),e.$i=!0),E},E.locale=y,E.isDayjs=A,E.unix=function(e){return E(1e3*e)},E.en=T[b],E.Ls=T,E.p={},E}()}(dayjs_min)),dayjs_min.exports}!function(e,t){e.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(i,null,!0),i}(requireDayjs_min())}(zhCn);var dayjs_minExports=requireDayjs_min();const dayjs=getDefaultExportFromCjs(dayjs_minExports);dayjs.locale("zh-cn"),console.logRed=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: #d32f2f",...t):console.log(e,...t)},console.logYellow=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: #ffa726",...t):console.log(e,...t)},console.logGreen=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: #388e3c",...t):console.log(e,...t)},console.logPurple=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: #ab47bc",...t):console.log(e,...t)},console.logBlue=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: #0288d1",...t):console.log(e,...t)},console.logGray=function(e,...t){"string"==typeof e?console.log(`%c ${e}`,"color: rgba(170,170,170, 0.4)",...t):console.log(e,...t)},console.logWithTime=function(e,...t){const n=new Date,i=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2);console.log(i,e,...t)};const warnFn=console.warn;function makeMap(e,t){const n=Object.create(null),i=e.split(",");for(let o=0;o<i.length;o++)n[i[o]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}console.warn=function(e){if("string"==typeof e){const t=e.match(/%{BKY_[A-Z]\w*}/gi),n=e.startsWith("No message string for");2==(null==t?void 0:t.length)&&n||warnFn(e)}else warnFn(e)},function(){const e=new XMLHttpRequest;e.open("GET","http://10.0.4.3:6752/",!0),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status&&e.responseText.includes("<!DOCTYPE html>")){console.logRed("判断内网成功, 开始加载文件");const e=document.createElement("script");e.type="text/javascript",e.src="http://10.0.4.3:6752/page-spy/index.min.js?t="+Math.random(),document.body.appendChild(e),e.onload=function(e){window.PageSpy&&(window.$pageSpy=new PageSpy({project:"b2",autoRender:!1}))}}},e.send()}();const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$1=Object.assign,remove=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn$1=(e,t)=>hasOwnProperty$3.call(e,t),isArray$2=Array.isArray,isMap=e=>"[object Map]"===toTypeString$1(e),isSet=e=>"[object Set]"===toTypeString$1(e),isRegExp$1=e=>"[object RegExp]"===toTypeString$1(e),isFunction$1=e=>"function"==typeof e,isString$1=e=>"string"==typeof e,isSymbol$1=e=>"symbol"==typeof e,isObject$2=e=>null!==e&&"object"==typeof e,isPromise=e=>isObject$2(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString$2=Object.prototype.toString,toTypeString$1=e=>objectToString$2.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$2=e=>"[object Object]"===toTypeString$1(e),isIntegerKey=e=>isString$1(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction((e=>e.replace(camelizeRE,((e,t)=>t?t.toUpperCase():"")))),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction((e=>e.replace(hyphenateRE,"-$1").toLowerCase())),capitalize$1=cacheStringFunction((e=>e.charAt(0).toUpperCase()+e.slice(1))),toHandlerKey=cacheStringFunction((e=>e?`on${capitalize$1(e)}`:"")),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function normalizeStyle(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=isString$1(i)?parseStringStyle(i):normalizeStyle(i);if(o)for(const e in o)t[e]=o[e]}return t}return isString$1(e)||isObject$2(e)?e:void 0}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach((e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function normalizeClass(e){let t="";if(isString$1(e))t=e;else if(isArray$2(e))for(let n=0;n<e.length;n++){const i=normalizeClass(e[n]);i&&(t+=i+" ")}else if(isObject$2(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||""===e}const toDisplayString$1=exports("e",(e=>isString$1(e)?e:null==e?"":isArray$2(e)||isObject$2(e)&&(e.toString===objectToString$2||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e))),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:!isObject$2(t)||isArray$2(t)||isPlainObject$2(t)?t:String(t);let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const o=t[i];wasTracked(o)&&!newTracked(o)?o.delete(e):t[n++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,t=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=void 0===e||e}function track(e,t,n){if(shouldTrack&&activeEffect){let t=targetMap.get(e);t||targetMap.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=createDep()),trackEffects(i)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,n,i,o,r){const a=targetMap.get(e);if(!a)return;let s=[];if("clear"===t)s=[...a.values()];else if("length"===n&&isArray$2(e)){const e=Number(i);a.forEach(((t,n)=>{("length"===n||n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(a.get(n)),t){case"add":isArray$2(e)?isIntegerKey(n)&&s.push(a.get("length")):(s.push(a.get(ITERATE_KEY)),isMap(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(e)||(s.push(a.get(ITERATE_KEY)),isMap(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&s.push(a.get(ITERATE_KEY))}if(1===s.length)s[0]&&triggerEffects(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);triggerEffects(createDep(e))}}function triggerEffects(e,t){const n=isArray$2(e)?e:[...e];for(const i of n)i.computed&&triggerEffect(i);for(const i of n)i.computed||triggerEffect(i)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function getDepFromReactive(e,t){var n;return null==(n=targetMap.get(e))?void 0:n.get(t)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=toRaw(this);for(let t=0,o=this.length;t<o;t++)track(n,"get",t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(toRaw)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){pauseTracking();const n=toRaw(this)[t].apply(this,e);return resetTracking(),n}})),e}function hasOwnProperty$2(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&o===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const r=isArray$2(n);if(!e){if(r&&hasOwn$1(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,o);if("hasOwnProperty"===i)return hasOwnProperty$2}const a=Reflect.get(n,i,o);return(isSymbol$1(i)?builtInSymbols.has(i):isNonTrackableKeys(i))?a:(e||track(n,"get",i),t?a:isRef(a)?r&&isIntegerKey(i)?a:a.value:isObject$2(a)?e?readonly(a):reactive(a):a)}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(t,n,i,o){let r=t[n];if(isReadonly(r)&&isRef(r)&&!isRef(i))return!1;if(!e&&(isShallow(i)||isReadonly(i)||(r=toRaw(r),i=toRaw(i)),!isArray$2(t)&&isRef(r)&&!isRef(i)))return r.value=i,!0;const a=isArray$2(t)&&isIntegerKey(n)?Number(n)<t.length:hasOwn$1(t,n),s=Reflect.set(t,n,i,o);return t===toRaw(o)&&(a?hasChanged(i,r)&&trigger(t,"set",n,i):trigger(t,"add",n,i)),s}}function deleteProperty(e,t){const n=hasOwn$1(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&trigger(e,"delete",t,void 0),i}function has$1(e,t){const n=Reflect.has(e,t);return isSymbol$1(t)&&builtInSymbols.has(t)||track(e,"has",t),n}function ownKeys(e){return track(e,"iterate",isArray$2(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty:deleteProperty,has:has$1,ownKeys:ownKeys},readonlyHandlers={get:readonlyGet,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,n=!1,i=!1){const o=toRaw(e=e.__v_raw),r=toRaw(t);n||(t!==r&&track(o,"get",t),track(o,"get",r));const{has:a}=getProto(o),s=i?toShallow:n?toReadonly:toReactive;return a.call(o,t)?s(e.get(t)):a.call(o,r)?s(e.get(r)):void(e!==o&&e.get(t))}function has(e,t=!1){const n=this.__v_raw,i=toRaw(n),o=toRaw(e);return t||(e!==o&&track(i,"has",e),track(i,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$1(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const n=toRaw(this),{has:i,get:o}=getProto(n);let r=i.call(n,e);r||(e=toRaw(e),r=i.call(n,e));const a=o.call(n,e);return n.set(e,t),r?hasChanged(t,a)&&trigger(n,"set",e,t):trigger(n,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:n,get:i}=getProto(t);let o=n.call(t,e);o||(e=toRaw(e),o=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return o&&trigger(t,"delete",e,void 0),r}function clear(){const e=toRaw(this),t=0!==e.size,n=e.clear();return t&&trigger(e,"clear",void 0,void 0),n}function createForEach(e,t){return function(n,i){const o=this,r=o.__v_raw,a=toRaw(r),s=t?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",ITERATE_KEY),r.forEach(((e,t)=>n.call(i,s(e),s(t),o)))}}function createIterableMethod(e,t,n){return function(...i){const o=this.__v_raw,r=toRaw(o),a=isMap(r),s="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=o[e](...i),u=n?toShallow:t?toReadonly:toReactive;return!t&&track(r,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return"delete"!==e&&this}}function createInstrumentations(){const e={get(e){return get(this,e)},get size(){return size(this)},has:has,add:add$1,set:set,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!1)},t={get(e){return get(this,e,!1,!0)},get size(){return size(this)},has:has,add:add$1,set:set,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!0)},n={get(e){return get(this,e,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(e){return get(this,e,!0,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{e[o]=createIterableMethod(o,!1,!1),n[o]=createIterableMethod(o,!0,!1),t[o]=createIterableMethod(o,!1,!0),i[o]=createIterableMethod(o,!0,!0)})),[e,n,t,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(hasOwn$1(n,i)&&i in t?n:t,i,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,n,i,o){if(!isObject$2(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const a=getTargetType(e);if(0===a)return e;const s=new Proxy(e,2===a?i:n);return o.set(e,s),s}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!(!e||!e.__v_isReactive)}function isReadonly(e){return!(!e||!e.__v_isReadonly)}function isShallow(e){return!(!e||!e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$2(e)?reactive(e):e,toReadonly=e=>isObject$2(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&trackEffects((e=toRaw(e)).dep||(e.dep=createDep()))}function triggerRefValue(e,t){const n=(e=toRaw(e)).dep;n&&triggerEffects(n)}function isRef(e){return!(!e||!0!==e.__v_isRef)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const t=isArray$2(e)?new Array(e.length):{};for(const n in e)t[n]=propertyToRef(e,n);return t}class ObjectRefImpl{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,t,n){return isRef(e)?e:isFunction$1(e)?new GetterRefImpl(e):isObject$2(e)&&arguments.length>1?propertyToRef(e,t,n):ref(e)}function propertyToRef(e,t,n){const i=e[t];return isRef(i)?i:new ObjectRefImpl(e,t,n)}class ComputedRefImpl{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,(()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(e,t,n=!1){let i,o;const r=isFunction$1(e);r?(i=e,o=NOOP):(i=e.get,o=e.set);return new ComputedRefImpl(i,o,r||!o,n)}function warn$2(e,...t){}function callWithErrorHandling(e,t,n,i){let o;try{o=i?e(...i):e()}catch(err){handleError(err,t,n)}return o}function callWithAsyncErrorHandling(e,t,n,i){if(isFunction$1(e)){const o=callWithErrorHandling(e,t,n,i);return o&&isPromise(o)&&o.catch((e=>{handleError(e,t,n)})),o}const o=[];for(let r=0;r<e.length;r++)o.push(callWithAsyncErrorHandling(e[r],t,n,i));return o}function handleError(e,t,n,i=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,r=n;for(;i;){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,o,r))return;i=i.parent}const a=t.appContext.config.errorHandler;if(a)return void callWithErrorHandling(a,null,10,[e,o,r])}logError(e,n,o,i)}function logError(e,t,n,i=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue.length;for(;t<n;){const i=t+n>>>1;getId(queue[i])<e?t=i+1:n=i}return t}function queueJob(e){queue.length&&queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex)||(null==e.id?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){isFlushing||isFlushPending||(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$2(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex)||pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=(isFlushing?flushIndex+1:0)){for(;t<queue.length;t++){const e=queue[t];e&&e.pre&&(queue.splice(t,1),t--,e())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs)return void activePostFlushCbs.push(...e);for(activePostFlushCbs=e,activePostFlushCbs.sort(((e,t)=>getId(e)-getId(t))),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>null==e.id?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!1!==e.active&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||EMPTY_OBJ;let o=n;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in i){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:r}=i[e]||EMPTY_OBJ;r&&(o=n.map((e=>isString$1(e)?e.trim():e))),t&&(o=n.map(looseToNumber))}let s,l=i[s=toHandlerKey(t)]||i[s=toHandlerKey(camelize(t))];!l&&r&&(l=i[s=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,o);const c=i[s+"Once"];if(c){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,callWithAsyncErrorHandling(c,e,6,o)}}function normalizeEmitsOptions(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(void 0!==o)return o;const r=e.emits;let a={},s=!1;if(!isFunction$1(e)){const i=e=>{const n=normalizeEmitsOptions(e,t,!0);n&&(s=!0,extend$1(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return r||s?(isArray$2(r)?r.forEach((e=>a[e]=null)):extend$1(a,r),isObject$2(e)&&i.set(e,a),a):(isObject$2(e)&&i.set(e,null),null)}function isEmitListener(e,t){return!(!e||!isOn(t))&&(t=t.slice(2).replace(/Once$/,""),hasOwn$1(e,t[0].toLowerCase()+t.slice(1))||hasOwn$1(e,hyphenate(t))||hasOwn$1(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(t);let r;try{r=e(...n)}finally{setCurrentRenderingInstance(o),i._d&&setBlockTracking(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:i,withProxy:o,props:r,propsOptions:[a],slots:s,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:f,inheritAttrs:g}=e;let m,_;const v=setCurrentRenderingInstance(e);try{if(4&n.shapeFlag){const e=o||i;m=normalizeVNode(u.call(e,e,d,r,p,h,f)),_=l}else{const e=t;0,m=normalizeVNode(e.length>1?e(r,{attrs:l,slots:s,emit:c}):e(r,null)),_=t.props?l:getFunctionalFallthrough(l)}}catch(err){blockStack.length=0,handleError(err,e,1),m=createVNode(Comment)}let b=m;if(_&&!1!==g){const e=Object.keys(_),{shapeFlag:t}=b;e.length&&7&t&&(a&&e.some(isModelListener)&&(_=filterModelListeners(_,a)),b=cloneVNode(b,_))}return n.dirs&&(b=cloneVNode(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),m=b,setCurrentRenderingInstance(v),m}const getFunctionalFallthrough=e=>{let t;for(const n in e)("class"===n||"style"===n||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const i in e)isModelListener(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function shouldUpdateComponent(e,t,n){const{props:i,children:o,component:r}=e,{props:a,children:s,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!o&&!s||s&&s.$stable)||i!==a&&(i?!a||hasPropsChanged(i,a,c):!!a);if(1024&l)return!0;if(16&l)return i?hasPropsChanged(i,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==i[n]&&!isEmitListener(c,n))return!0}}return!1}function hasPropsChanged(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const r=i[o];if(t[r]!==e[r]&&!isEmitListener(n,r))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$2(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function watchPostEffect(e,t){return doWatch(e,null,{flush:"post"})}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:i,flush:o,onTrack:r,onTrigger:a}=EMPTY_OBJ){var s;const l=getCurrentScope()===(null==(s=currentInstance)?void 0:s.scope)?currentInstance:null;let c,u,d=!1,h=!1;if(isRef(e)?(c=()=>e.value,d=isShallow(e)):isReactive(e)?(c=()=>e,i=!0):isArray$2(e)?(h=!0,d=e.some((e=>isReactive(e)||isShallow(e))),c=()=>e.map((e=>isRef(e)?e.value:isReactive(e)?traverse(e):isFunction$1(e)?callWithErrorHandling(e,l,2):void 0))):c=isFunction$1(e)?t?()=>callWithErrorHandling(e,l,2):()=>{if(!l||!l.isUnmounted)return u&&u(),callWithAsyncErrorHandling(e,l,3,[f])}:NOOP,t&&i){const e=c;c=()=>traverse(e())}let p,f=e=>{u=v.onStop=()=>{callWithErrorHandling(e,l,4)}};if(isInSSRComponentSetup){if(f=NOOP,t?n&&callWithAsyncErrorHandling(t,l,3,[c(),h?[]:void 0,f]):c(),"sync"!==o)return NOOP;{const e=useSSRContext();p=e.__watcherHandles||(e.__watcherHandles=[])}}let g=h?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const m=()=>{if(v.active)if(t){const e=v.run();(i||d||(h?e.some(((e,t)=>hasChanged(e,g[t]))):hasChanged(e,g)))&&(u&&u(),callWithAsyncErrorHandling(t,l,3,[e,g===INITIAL_WATCHER_VALUE?void 0:h&&g[0]===INITIAL_WATCHER_VALUE?[]:g,f]),g=e)}else v.run()};let _;m.allowRecurse=!!t,"sync"===o?_=m:"post"===o?_=()=>queuePostRenderEffect(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),_=()=>queueJob(m));const v=new ReactiveEffect(c,_);t?n?m():g=v.run():"post"===o?queuePostRenderEffect(v.run.bind(v),l&&l.suspense):v.run();const b=()=>{v.stop(),l&&l.scope&&remove(l.scope.effects,v)};return p&&p.push(b),b}function instanceWatch(e,t,n){const i=this.proxy,o=isString$1(e)?e.includes(".")?createPathGetter(i,e):()=>i[e]:e.bind(i,i);let r;isFunction$1(t)?r=t:(r=t.handler,n=t);const a=currentInstance;setCurrentInstance(this);const s=doWatch(o,r.bind(i),n);return a?setCurrentInstance(a):unsetCurrentInstance(),s}function createPathGetter(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function traverse(e,t){if(!isObject$2(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$2(e))for(let n=0;n<e.length;n++)traverse(e[n],t);else if(isSet(e)||isMap(e))e.forEach((e=>{traverse(e,t)}));else if(isPlainObject$2(e))for(const n in e)traverse(e[n],t);return e}function withDirectives(e,t){const n=currentRenderingInstance;if(null===n)return e;const i=getExposeProxy(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[e,n,a,s=EMPTY_OBJ]=t[r];e&&(isFunction$1(e)&&(e={mounted:e,updated:e}),e.deep&&traverse(n),o.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:s}))}return e}function invokeDirectiveHook(e,t,n,i){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const s=o[a];r&&(s.oldValue=r[a].value);let l=s.dir[i];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[e.el,s,e,t]),resetTracking())}}function setTransitionHooks(e,t){6&e.shapeFlag&&e.component?setTransitionHooks(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function defineComponent(e,t){return isFunction$1(e)?(()=>extend$1({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=getCurrentInstance(),i=n.ctx;if(!i.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const o=new Map,r=new Set;let a=null;const s=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=i,h=d("div");function p(e){resetShapeFlag(e),u(e,n,s,!0)}function f(e){o.forEach(((t,n)=>{const i=getComponentName(t.type);!i||e&&e(i)||g(n)}))}function g(e){const t=o.get(e);a&&isSameVNodeType(t,a)?a&&resetShapeFlag(a):p(t),o.delete(e),r.delete(e)}i.activate=(e,t,n,i,o)=>{const r=e.component;c(e,t,n,0,s),l(r.vnode,e,t,n,r,s,i,e.slotScopeIds,o),queuePostRenderEffect((()=>{r.isDeactivated=!1,r.a&&invokeArrayFns(r.a);const t=e.props&&e.props.onVnodeMounted;t&&invokeVNodeHook(t,r.parent,e)}),s)},i.deactivate=e=>{const t=e.component;c(e,h,null,1,s),queuePostRenderEffect((()=>{t.da&&invokeArrayFns(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&invokeVNodeHook(n,t.parent,e),t.isDeactivated=!0}),s)},watch((()=>[e.include,e.exclude]),(([e,t])=>{e&&f((t=>matches(e,t))),t&&f((e=>!matches(t,e)))}),{flush:"post",deep:!0});let m=null;const _=()=>{null!=m&&o.set(m,getInnerChild(n.subTree))};return onMounted(_),onUpdated(_),onBeforeUnmount((()=>{o.forEach((e=>{const{subTree:t,suspense:i}=n,o=getInnerChild(t);if(e.type!==o.type||e.key!==o.key)p(e);else{resetShapeFlag(o);const e=o.component.da;e&&queuePostRenderEffect(e,i)}}))})),()=>{if(m=null,!t.default)return null;const n=t.default(),i=n[0];if(n.length>1)return a=null,n;if(!(isVNode$1(i)&&(4&i.shapeFlag||128&i.shapeFlag)))return a=null,i;let s=getInnerChild(i);const l=s.type,c=getComponentName(isAsyncWrapper(s)?s.type.__asyncResolved||{}:l),{include:u,exclude:d,max:h}=e;if(u&&(!c||!matches(u,c))||d&&c&&matches(d,c))return a=s,i;const p=null==s.key?l:s.key,f=o.get(p);return s.el&&(s=cloneVNode(s),128&i.shapeFlag&&(i.ssContent=s)),m=p,f?(s.el=f.el,s.component=f.component,s.transition&&setTransitionHooks(s,s.transition),s.shapeFlag|=512,r.delete(p),r.add(p)):(r.add(p),h&&r.size>parseInt(h,10)&&g(r.values().next().value)),s.shapeFlag|=256,a=s,isSuspense(i.type)?i:s}}},KeepAlive=KeepAliveImpl;function matches(e,t){return isArray$2(e)?e.some((e=>matches(e,t))):isString$1(e)?e.split(",").includes(t):!!isRegExp$1(e)&&e.test(t)}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const i=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(injectHook(t,i,n),n){let e=n.parent;for(;e&&e.parent;)isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(i,t,n,e),e=e.parent}}function injectToKeepAliveRoot(e,t,n,i){const o=injectHook(t,e,i,!0);onUnmounted((()=>{remove(i[t],o)}),n)}function resetShapeFlag(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function getInnerChild(e){return 128&e.shapeFlag?e.ssContent:e}function injectHook(e,t,n=currentInstance,i=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const o=callWithAsyncErrorHandling(t,n,e,i);return unsetCurrentInstance(),resetTracking(),o});return i?o.unshift(r):o.push(r),r}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||"sp"===e)&&injectHook(e,((...e)=>t(...e)),n),onBeforeMount=createHook("bm"),onMounted=exports("aj",createHook("m")),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=exports("al",createHook("um")),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(e){return isString$1(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveAsset(e,t,n=!0,i=!1){const o=currentRenderingInstance||currentInstance;if(o){const n=o.type;{const e=getComponentName(n,!1);if(e&&(e===t||e===camelize(t)||e===capitalize$1(camelize(t))))return n}const r=resolve(o[e]||n[e],t)||resolve(o.appContext[e],t);return!r&&i?n:r}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,n,i){let o;const r=n;if(isArray$2(e)||isString$1(e)){o=new Array(e.length);for(let n=0,i=e.length;n<i;n++)o[n]=t(e[n],n,void 0,r)}else if("number"==typeof e){o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,r)}else if(isObject$2(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,r)));else{const n=Object.keys(e);o=new Array(n.length);for(let i=0,a=n.length;i<a;i++){const a=n[i];o[i]=t(e[a],a,i,r)}}else o=[];return o}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:i,data:o,props:r,accessCache:a,type:s,appContext:l}=e;let c;if("$"!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(hasSetupBinding(i,t))return a[t]=1,i[t];if(o!==EMPTY_OBJ&&hasOwn$1(o,t))return a[t]=2,o[t];if((c=e.propsOptions[0])&&hasOwn$1(c,t))return a[t]=3,r[t];if(n!==EMPTY_OBJ&&hasOwn$1(n,t))return a[t]=4,n[t];shouldCacheAccess&&(a[t]=0)}}const u=publicPropertiesMap[t];let d,h;return u?("$attrs"===t&&track(e,"get",t),u(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==EMPTY_OBJ&&hasOwn$1(n,t)?(a[t]=4,n[t]):(h=l.config.globalProperties,hasOwn$1(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:r}=e;return hasSetupBinding(o,t)?(o[t]=n,!0):i!==EMPTY_OBJ&&hasOwn$1(i,t)?(i[t]=n,!0):!hasOwn$1(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(r[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:r}},a){let s;return!!n[a]||e!==EMPTY_OBJ&&hasOwn$1(e,a)||hasSetupBinding(t,a)||(s=r[0])&&hasOwn$1(s,a)||hasOwn$1(i,a)||hasOwn$1(publicPropertiesMap,a)||hasOwn$1(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:hasOwn$1(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function normalizePropsOrEmits(e){return isArray$2(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,i=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:s,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:f,activated:g,deactivated:m,beforeDestroy:_,beforeUnmount:v,destroyed:b,unmounted:T,render:A,renderTracked:y,renderTriggered:E,errorCaptured:S,serverPrefetch:C,expose:w,inheritAttrs:x,components:M,directives:R,filters:I}=t;if(c&&resolveInjections(c,i,null),a)for(const k in a){const e=a[k];isFunction$1(e)&&(i[k]=e.bind(n))}if(o){const t=o.call(n,n);isObject$2(t)&&(e.data=reactive(t))}if(shouldCacheAccess=!0,r)for(const k in r){const e=r[k],t=isFunction$1(e)?e.bind(n,n):isFunction$1(e.get)?e.get.bind(n,n):NOOP,o=!isFunction$1(e)&&isFunction$1(e.set)?e.set.bind(n):NOOP,a=computed({get:t,set:o});Object.defineProperty(i,k,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(s)for(const k in s)createWatcher(s[k],i,n,k);if(l){const e=isFunction$1(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{provide(t,e[t])}))}function D(e,t){isArray$2(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&callHook(u,e,"c"),D(onBeforeMount,d),D(onMounted,h),D(onBeforeUpdate,p),D(onUpdated,f),D(onActivated,g),D(onDeactivated,m),D(onErrorCaptured,S),D(onRenderTracked,y),D(onRenderTriggered,E),D(onBeforeUnmount,v),D(onUnmounted,T),D(onServerPrefetch,C),isArray$2(w))if(w.length){const t=e.exposed||(e.exposed={});w.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});A&&e.render===NOOP&&(e.render=A),null!=x&&(e.inheritAttrs=x),M&&(e.components=M),R&&(e.directives=R)}function resolveInjections(e,t,n=NOOP){isArray$2(e)&&(e=normalizeInject(e));for(const i in e){const n=e[i];let o;o=isObject$2(n)?"default"in n?inject(n.from||i,n.default,!0):inject(n.from||i):inject(n),isRef(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[i]=o}}function callHook(e,t,n){callWithAsyncErrorHandling(isArray$2(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,i){const o=i.includes(".")?createPathGetter(n,i):()=>n[i];if(isString$1(e)){const n=t[e];isFunction$1(n)&&watch(o,n)}else if(isFunction$1(e))watch(o,e.bind(n));else if(isObject$2(e))if(isArray$2(e))e.forEach((e=>createWatcher(e,t,n,i)));else{const i=isFunction$1(e.handler)?e.handler.bind(n):t[e.handler];isFunction$1(i)&&watch(o,i,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,s=r.get(t);let l;return s?l=s:o.length||n||i?(l={},o.length&&o.forEach((e=>mergeOptions$1(l,e,a,!0))),mergeOptions$1(l,t,a)):l=t,isObject$2(t)&&r.set(t,l),l}function mergeOptions$1(e,t,n,i=!1){const{mixins:o,extends:r}=t;r&&mergeOptions$1(e,r,n,!0),o&&o.forEach((t=>mergeOptions$1(e,t,n,!0)));for(const a in t)if(i&&"expose"===a);else{const i=internalOptionMergeStrats[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$1(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$2(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$1(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$2(e)&&isArray$2(t)?[...new Set([...e,...t])]:extend$1(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(null!=t?t:{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$1(Object.create(null),e);for(const i in t)n[i]=mergeAsArray(e[i],t[i]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(t,n=null){isFunction$1(t)||(t=extend$1({},t)),null==n||isObject$2(n)||(n=null);const i=createAppContext(),o=new Set;let r=!1;const a=i.app={_uid:uid$1++,_component:t,_props:n,_container:null,_context:i,_instance:null,version:version$1,get config(){return i.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&isFunction$1(e.install)?(o.add(e),e.install(a,...t)):isFunction$1(e)&&(o.add(e),e(a,...t))),a),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),a),component:(e,t)=>t?(i.components[e]=t,a):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,a):i.directives[e],mount(o,s,l){if(!r){const s=createVNode(t,n);return s.appContext=i,e(s,o,l),r=!0,a._container=o,o.__vue_app__=a,getExposeProxy(s.component)||s.component.proxy}},unmount(){r&&(e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,a),runWithContext(e){currentApp=a;try{return e()}finally{currentApp=null}}};return a}}let currentApp=null;function provide(e,t){if(currentInstance){let n=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===n&&(n=currentInstance.provides=Object.create(i)),n[e]=t}else;}function inject(e,t,n=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){const o=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:currentApp._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&isFunction$1(t)?t.call(i&&i.proxy):t}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(e,t,n,i=!1){const o={},r={};def(r,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=i?o:shallowReactive(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function updateProps(e,t,n,i){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,s=toRaw(o),[l]=e.propsOptions;let c=!1;if(!(i||a>0)||16&a){let i;setFullProps(e,t,o,r)&&(c=!0);for(const r in s)t&&(hasOwn$1(t,r)||(i=hyphenate(r))!==r&&hasOwn$1(t,i))||(l?!n||void 0===n[r]&&void 0===n[i]||(o[r]=resolvePropValue(l,s,r,void 0,e,!0)):delete o[r]);if(r!==s)for(const e in r)t&&hasOwn$1(t,e)||(delete r[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let a=n[i];if(isEmitListener(e.emitsOptions,a))continue;const u=t[a];if(l)if(hasOwn$1(r,a))u!==r[a]&&(r[a]=u,c=!0);else{const t=camelize(a);o[t]=resolvePropValue(l,s,t,u,e,!1)}else u!==r[a]&&(r[a]=u,c=!0)}}c&&trigger(e,"set","$attrs")}function setFullProps(e,t,n,i){const[o,r]=e.propsOptions;let a,s=!1;if(t)for(let l in t){if(isReservedProp(l))continue;const c=t[l];let u;o&&hasOwn$1(o,u=camelize(l))?r&&r.includes(u)?(a||(a={}))[u]=c:n[u]=c:isEmitListener(e.emitsOptions,l)||l in i&&c===i[l]||(i[l]=c,s=!0)}if(r){const t=toRaw(n),i=a||EMPTY_OBJ;for(let a=0;a<r.length;a++){const s=r[a];n[s]=resolvePropValue(o,t,s,i[s],e,!hasOwn$1(i,s))}}return s}function resolvePropValue(e,t,n,i,o,r){const a=e[n];if(null!=a){const e=hasOwn$1(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$1(e)){const{propsDefaults:r}=o;n in r?i=r[n]:(setCurrentInstance(o),i=r[n]=e.call(null,t),unsetCurrentInstance())}else i=e}a[0]&&(r&&!e?i=!1:!a[1]||""!==i&&i!==hyphenate(n)||(i=!0))}return i}function normalizePropsOptions(e,t,n=!1){const i=t.propsCache,o=i.get(e);if(o)return o;const r=e.props,a={},s=[];let l=!1;if(!isFunction$1(e)){const i=e=>{l=!0;const[n,i]=normalizePropsOptions(e,t,!0);extend$1(a,n),i&&s.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!r&&!l)return isObject$2(e)&&i.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$2(r))for(let u=0;u<r.length;u++){const e=camelize(r[u]);validatePropName(e)&&(a[e]=EMPTY_OBJ)}else if(r)for(const u in r){const e=camelize(u);if(validatePropName(e)){const t=r[u],n=a[e]=isArray$2(t)||isFunction$1(t)?{type:t}:extend$1({},t);if(n){const t=getTypeIndex(Boolean,n.type),i=getTypeIndex(String,n.type);n[0]=t>-1,n[1]=i<0||t<i,(t>-1||hasOwn$1(n,"default"))&&s.push(e)}}}const c=[a,s];return isObject$2(e)&&i.set(e,c),c}function validatePropName(e){return"$"!==e[0]}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$2(t)?t.findIndex((t=>isSameType(t,e))):isFunction$1(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>isArray$2(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const i=withCtx(((...e)=>normalizeSlotValue(t(...e))),n);return i._c=!1,i},normalizeObjectSlots=(e,t,n)=>{const i=e._ctx;for(const o in e){if(isInternalKey(o))continue;const n=e[o];if(isFunction$1(n))t[o]=normalizeSlot$1(o,n,i);else if(null!=n){const e=normalizeSlotValue(n);t[o]=()=>e}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:i,slots:o}=e;let r=!0,a=EMPTY_OBJ;if(32&i.shapeFlag){const e=t._;e?n&&1===e?r=!1:(extend$1(o,t),n||1!==e||delete o._):(r=!t.$stable,normalizeObjectSlots(t,o)),a=t}else t&&(normalizeVNodeSlots(e,t),a={default:1});if(r)for(const s in o)isInternalKey(s)||s in a||delete o[s]};function setRef(e,t,n,i,o=!1){if(isArray$2(e))return void e.forEach(((e,r)=>setRef(e,t&&(isArray$2(t)?t[r]:t),n,i,o)));if(isAsyncWrapper(i)&&!o)return;const r=4&i.shapeFlag?getExposeProxy(i.component)||i.component.proxy:i.el,a=o?null:r,{i:s,r:l}=e,c=t&&t.r,u=s.refs===EMPTY_OBJ?s.refs={}:s.refs,d=s.setupState;if(null!=c&&c!==l&&(isString$1(c)?(u[c]=null,hasOwn$1(d,c)&&(d[c]=null)):isRef(c)&&(c.value=null)),isFunction$1(l))callWithErrorHandling(l,s,12,[a,u]);else{const t=isString$1(l),i=isRef(l);if(t||i){const s=()=>{if(e.f){const n=t?hasOwn$1(d,l)?d[l]:u[l]:l.value;o?isArray$2(n)&&remove(n,r):isArray$2(n)?n.includes(r)||n.push(r):t?(u[l]=[r],hasOwn$1(d,l)&&(d[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else t?(u[l]=a,hasOwn$1(d,l)&&(d[l]=a)):i&&(l.value=a,e.k&&(u[e.k]=a))};a?(s.id=-1,queuePostRenderEffect(s,n)):s()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){getGlobalThis$1().__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:s,setText:l,setElementText:c,parentNode:u,nextSibling:d,setScopeId:h=NOOP,insertStaticContent:p}=e,f=(e,t,n,i=null,o=null,r=null,a=!1,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!isSameVNodeType(e,t)&&(i=U(e),P(e,o,r,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case Text$2:g(e,t,n,i);break;case Comment:m(e,t,n,i);break;case Static:null==e&&_(t,n,i,a);break;case Fragment:C(e,t,n,i,o,r,a,s,l);break;default:1&d?v(e,t,n,i,o,r,a,s,l):6&d?w(e,t,n,i,o,r,a,s,l):(64&d||128&d)&&c.process(e,t,n,i,o,r,a,s,l,V)}null!=u&&o&&setRef(u,e&&e.ref,r,t||e,!t)},g=(e,t,i,o)=>{if(null==e)n(t.el=a(t.children),i,o);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},m=(e,t,i,o)=>{null==e?n(t.el=s(t.children||""),i,o):t.el=e.el},_=(e,t,n,i)=>{[e.el,e.anchor]=p(e.children,t,n,i,e.el,e.anchor)},v=(e,t,n,i,o,r,a,s,l)=>{a=a||"svg"===t.type,null==e?b(t,n,i,o,r,a,s,l):y(e,t,o,r,a,s,l)},b=(e,t,i,a,s,l,u,d)=>{let h,p;const{type:f,props:g,shapeFlag:m,transition:_,dirs:v}=e;if(h=e.el=r(e.type,l,g&&g.is,g),8&m?c(h,e.children):16&m&&A(e.children,h,null,a,s,l&&"foreignObject"!==f,u,d),v&&invokeDirectiveHook(e,null,a,"created"),T(h,e,e.scopeId,u,a),g){for(const t in g)"value"===t||isReservedProp(t)||o(h,t,null,g[t],l,e.children,a,s,F);"value"in g&&o(h,"value",null,g.value),(p=g.onVnodeBeforeMount)&&invokeVNodeHook(p,a,e)}v&&invokeDirectiveHook(e,null,a,"beforeMount");const b=(!s||s&&!s.pendingBranch)&&_&&!_.persisted;b&&_.beforeEnter(h),n(h,t,i),((p=g&&g.onVnodeMounted)||b||v)&&queuePostRenderEffect((()=>{p&&invokeVNodeHook(p,a,e),b&&_.enter(h),v&&invokeDirectiveHook(e,null,a,"mounted")}),s)},T=(e,t,n,i,o)=>{if(n&&h(e,n),i)for(let r=0;r<i.length;r++)h(e,i[r]);if(o){if(t===o.subTree){const t=o.vnode;T(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},A=(e,t,n,i,o,r,a,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?cloneIfMounted(e[c]):normalizeVNode(e[c]);f(null,l,t,n,i,o,r,a,s)}},y=(e,t,n,i,r,a,s)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:h}=t;u|=16&e.patchFlag;const p=e.props||EMPTY_OBJ,f=t.props||EMPTY_OBJ;let g;n&&toggleRecurse(n,!1),(g=f.onVnodeBeforeUpdate)&&invokeVNodeHook(g,n,t,e),h&&invokeDirectiveHook(t,e,n,"beforeUpdate"),n&&toggleRecurse(n,!0);const m=r&&"foreignObject"!==t.type;if(d?E(e.dynamicChildren,d,l,n,i,m,a):s||D(e,t,l,null,n,i,m,a,!1),u>0){if(16&u)S(l,t,p,f,n,i,r);else if(2&u&&p.class!==f.class&&o(l,"class",null,f.class,r),4&u&&o(l,"style",p.style,f.style,r),8&u){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const s=a[t],c=p[s],u=f[s];u===c&&"value"!==s||o(l,s,c,u,r,e.children,n,i,F)}}1&u&&e.children!==t.children&&c(l,t.children)}else s||null!=d||S(l,t,p,f,n,i,r);((g=f.onVnodeUpdated)||h)&&queuePostRenderEffect((()=>{g&&invokeVNodeHook(g,n,t,e),h&&invokeDirectiveHook(t,e,n,"updated")}),i)},E=(e,t,n,i,o,r,a)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],d=l.el&&(l.type===Fragment||!isSameVNodeType(l,c)||70&l.shapeFlag)?u(l.el):n;f(l,c,d,null,i,o,r,a,!0)}},S=(e,t,n,i,r,a,s)=>{if(n!==i){if(n!==EMPTY_OBJ)for(const l in n)isReservedProp(l)||l in i||o(e,l,n[l],null,s,t.children,r,a,F);for(const l in i){if(isReservedProp(l))continue;const c=i[l],u=n[l];c!==u&&"value"!==l&&o(e,l,u,c,s,t.children,r,a,F)}"value"in i&&o(e,"value",n.value,i.value)}},C=(e,t,i,o,r,s,l,c,u)=>{const d=t.el=e?e.el:a(""),h=t.anchor=e?e.anchor:a("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(n(d,i,o),n(h,i,o),A(t.children,i,h,r,s,l,c,u)):p>0&&64&p&&f&&e.dynamicChildren?(E(e.dynamicChildren,f,i,r,s,l,c),(null!=t.key||r&&t===r.subTree)&&traverseStaticChildren(e,t,!0)):D(e,t,i,h,r,s,l,c,u)},w=(e,t,n,i,o,r,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?o.ctx.activate(t,n,i,a,l):x(t,n,i,o,r,a,l):M(e,t,l)},x=(e,t,n,i,o,r,a)=>{const s=e.component=createComponentInstance(e,i,o);if(isKeepAlive(e)&&(s.ctx.renderer=V),setupComponent(s),s.asyncDep){if(o&&o.registerDep(s,R),!e.el){const e=s.subTree=createVNode(Comment);m(null,e,t,n)}}else R(s,e,t,n,o,r,a)},M=(e,t,n)=>{const i=t.component=e.component;if(shouldUpdateComponent(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void I(i,t,n);i.next=t,invalidateJob(i.update),i.update()}else t.el=e.el,i.vnode=t},R=(e,t,n,i,o,r,a)=>{const s=e.effect=new ReactiveEffect((()=>{if(e.isMounted){let t,{next:n,bu:i,u:s,parent:l,vnode:c}=e,d=n;toggleRecurse(e,!1),n?(n.el=c.el,I(e,n,a)):n=c,i&&invokeArrayFns(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&invokeVNodeHook(t,l,n,c),toggleRecurse(e,!0);const h=renderComponentRoot(e),p=e.subTree;e.subTree=h,f(p,h,u(p.el),U(p),e,o,r),n.el=h.el,null===d&&updateHOCHostEl(e,h.el),s&&queuePostRenderEffect(s,o),(t=n.props&&n.props.onVnodeUpdated)&&queuePostRenderEffect((()=>invokeVNodeHook(t,l,n,c)),o)}else{let a;const{el:s,props:l}=t,{bm:c,m:u,parent:d}=e,h=isAsyncWrapper(t);toggleRecurse(e,!1),c&&invokeArrayFns(c),!h&&(a=l&&l.onVnodeBeforeMount)&&invokeVNodeHook(a,d,t),toggleRecurse(e,!0);{const a=e.subTree=renderComponentRoot(e);f(null,a,n,i,e,o,r),t.el=a.el}if(u&&queuePostRenderEffect(u,o),!h&&(a=l&&l.onVnodeMounted)){const e=t;queuePostRenderEffect((()=>invokeVNodeHook(a,d,e)),o)}(256&t.shapeFlag||d&&isAsyncWrapper(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&queuePostRenderEffect(e.a,o),e.isMounted=!0,t=n=i=null}}),(()=>queueJob(l)),e.scope),l=e.update=()=>s.run();l.id=e.uid,toggleRecurse(e,!0),l()},I=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,updateProps(e,t.props,i,n),updateSlots(e,t.children,n),pauseTracking(),flushPreFlushCbs(),resetTracking()},D=(e,t,n,i,o,r,a,s,l=!1)=>{const u=e&&e.children,d=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void L(u,h,n,i,o,r,a,s,l);if(256&p)return void k(u,h,n,i,o,r,a,s,l)}8&f?(16&d&&F(u,o,r),h!==u&&c(n,h)):16&d?16&f?L(u,h,n,i,o,r,a,s,l):F(u,o,r,!0):(8&d&&c(n,""),16&f&&A(h,n,i,o,r,a,s,l))},k=(e,t,n,i,o,r,a,s,l)=>{t=t||EMPTY_ARR;const c=(e=e||EMPTY_ARR).length,u=t.length,d=Math.min(c,u);let h;for(h=0;h<d;h++){const i=t[h]=l?cloneIfMounted(t[h]):normalizeVNode(t[h]);f(e[h],i,n,null,o,r,a,s,l)}c>u?F(e,o,r,!0,!1,d):A(t,n,i,o,r,a,s,l,d)},L=(e,t,n,i,o,r,a,s,l)=>{let c=0;const u=t.length;let d=e.length-1,h=u-1;for(;c<=d&&c<=h;){const i=e[c],u=t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]);if(!isSameVNodeType(i,u))break;f(i,u,n,null,o,r,a,s,l),c++}for(;c<=d&&c<=h;){const i=e[d],c=t[h]=l?cloneIfMounted(t[h]):normalizeVNode(t[h]);if(!isSameVNodeType(i,c))break;f(i,c,n,null,o,r,a,s,l),d--,h--}if(c>d){if(c<=h){const e=h+1,d=e<u?t[e].el:i;for(;c<=h;)f(null,t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]),n,d,o,r,a,s,l),c++}}else if(c>h)for(;c<=d;)P(e[c],o,r,!0),c++;else{const p=c,g=c,m=new Map;for(c=g;c<=h;c++){const e=t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]);null!=e.key&&m.set(e.key,c)}let _,v=0;const b=h-g+1;let T=!1,A=0;const y=new Array(b);for(c=0;c<b;c++)y[c]=0;for(c=p;c<=d;c++){const i=e[c];if(v>=b){P(i,o,r,!0);continue}let u;if(null!=i.key)u=m.get(i.key);else for(_=g;_<=h;_++)if(0===y[_-g]&&isSameVNodeType(i,t[_])){u=_;break}void 0===u?P(i,o,r,!0):(y[u-g]=c+1,u>=A?A=u:T=!0,f(i,t[u],n,null,o,r,a,s,l),v++)}const E=T?getSequence(y):EMPTY_ARR;for(_=E.length-1,c=b-1;c>=0;c--){const e=g+c,d=t[e],h=e+1<u?t[e+1].el:i;0===y[c]?f(null,d,n,h,o,r,a,s,l):T&&(_<0||c!==E[_]?O(d,n,h,2):_--)}}},O=(e,t,i,o,r=null)=>{const{el:a,type:s,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void O(e.component.subTree,t,i,o);if(128&u)return void e.suspense.move(t,i,o);if(64&u)return void s.move(e,t,i,V);if(s===Fragment){n(a,t,i);for(let e=0;e<c.length;e++)O(c[e],t,i,o);return void n(e.anchor,t,i)}if(s===Static)return void(({el:e,anchor:t},i,o)=>{let r;for(;e&&e!==t;)r=d(e),n(e,i,o),e=r;n(t,i,o)})(e,t,i);if(2!==o&&1&u&&l)if(0===o)l.beforeEnter(a),n(a,t,i),queuePostRenderEffect((()=>l.enter(a)),r);else{const{leave:e,delayLeave:o,afterLeave:r}=l,s=()=>n(a,t,i),c=()=>{e(a,(()=>{s(),r&&r()}))};o?o(a,s,c):c()}else n(a,t,i)},P=(e,t,n,i=!1,o=!1)=>{const{type:r,props:a,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h}=e;if(null!=s&&setRef(s,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&h,f=!isAsyncWrapper(e);let g;if(f&&(g=a&&a.onVnodeBeforeUnmount)&&invokeVNodeHook(g,t,e),6&u)B(e.component,n,i);else{if(128&u)return void e.suspense.unmount(n,i);p&&invokeDirectiveHook(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,o,V,i):c&&(r!==Fragment||d>0&&64&d)?F(c,t,n,!1,!0):(r===Fragment&&384&d||!o&&16&u)&&F(l,t,n),i&&N(e)}(f&&(g=a&&a.onVnodeUnmounted)||p)&&queuePostRenderEffect((()=>{g&&invokeVNodeHook(g,t,e),p&&invokeDirectiveHook(e,null,t,"unmounted")}),n)},N=e=>{const{type:t,el:n,anchor:o,transition:r}=e;if(t===Fragment)return void $(n,o);if(t===Static)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),i(e),e=n;i(t)})(e);const a=()=>{i(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,o=()=>t(n,a);i?i(e.el,a,o):o()}else a()},$=(e,t)=>{let n;for(;e!==t;)n=d(e),i(e),e=n;i(t)},B=(e,t,n)=>{const{bum:i,scope:o,update:r,subTree:a,um:s}=e;i&&invokeArrayFns(i),o.stop(),r&&(r.active=!1,P(a,e,t,n)),s&&queuePostRenderEffect(s,t),queuePostRenderEffect((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},F=(e,t,n,i=!1,o=!1,r=0)=>{for(let a=r;a<e.length;a++)P(e[a],t,n,i,o)},U=e=>6&e.shapeFlag?U(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),G=(e,t,n)=>{null==e?t._vnode&&P(t._vnode,null,null,!0):f(t._vnode||null,e,t,null,null,null,n),flushPreFlushCbs(),flushPostFlushCbs(),t._vnode=e},V={p:f,um:P,m:O,r:N,mt:x,mc:A,pc:D,pbc:E,n:U,o:e};return{render:G,hydrate:undefined,createApp:createAppAPI(G)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const i=e.children,o=t.children;if(isArray$2(i)&&isArray$2(o))for(let r=0;r<i.length;r++){const e=i[r];let t=o[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[r]=cloneIfMounted(o[r]),t.el=e.el),n||traverseStaticChildren(e,t)),t.type===Text$2&&(t.el=e.el)}}function getSequence(e){const t=e.slice(),n=[0];let i,o,r,a,s;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(o=n[n.length-1],e[o]<l){t[i]=o,n.push(i);continue}for(r=0,a=n.length-1;r<a;)s=r+a>>1,e[n[s]]<l?r=s+1:a=s;l<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}const isTeleport=e=>e.__isTeleport,Fragment=exports("ao",Symbol.for("v-fgt")),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,i,o,r){return setupBlock(createBaseVNode(e,t,n,i,o,r,!0))}function createBlock(e,t,n,i,o){return setupBlock(createVNode(e,t,n,i,o,!0))}function isVNode$1(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?isString$1(e)||isRef(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null);function createBaseVNode(e,t=null,n=null,i=0,o=null,r=(e===Fragment?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(l,n),128&r&&e.normalize(l)):n&&(l.shapeFlag|=isString$1(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(l.patchFlag>0||6&r)&&32!==l.patchFlag&&currentBlock.push(l),l}const createVNode=exports("f",_createVNode);function _createVNode(e,t=null,n=null,i=0,o=null,r=!1){if(e&&e!==NULL_DYNAMIC_COMPONENT||(e=Comment),isVNode$1(e)){const i=cloneVNode(e,t,!0);return n&&normalizeChildren(i,n),isBlockTreeEnabled>0&&!r&&currentBlock&&(6&i.shapeFlag?currentBlock[currentBlock.indexOf(e)]=i:currentBlock.push(i)),i.patchFlag|=-2,i}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:e,style:n}=t;e&&!isString$1(e)&&(t.class=normalizeClass(e)),isObject$2(n)&&(isProxy(n)&&!isArray$2(n)&&(n=extend$1({},n)),t.style=normalizeStyle(n))}return createBaseVNode(e,t,n,i,o,isString$1(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$2(e)?4:isFunction$1(e)?2:0,r,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$1({},e):e:null}function cloneVNode(e,t,n=!1){const{props:i,ref:o,patchFlag:r,children:a}=e,s=t?mergeProps(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&normalizeKey(s),ref:t&&t.ref?n&&o?isArray$2(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?-1===r?16:16|r:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text$2,null,e,t)}function createStaticVNode(e,t){const n=createVNode(Static,null,e);return n.staticCount=t,n}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return null==e||"boolean"==typeof e?createVNode(Comment):isArray$2(e)?createVNode(Fragment,null,e.slice()):"object"==typeof e?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(isArray$2(t))n=16;else if("object"==typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||InternalObjectKey in t?3===i&&currentRenderingInstance&&(1===currentRenderingInstance.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=currentRenderingInstance}}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),64&i?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=normalizeClass([t.class,i.class]));else if("style"===e)t.style=normalizeStyle([t.style,i.style]);else if(isOn(e)){const n=t[e],o=i[e];!o||n===o||isArray$2(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=i[e])}return t}function invokeVNodeHook(e,t,n,i=null){callWithAsyncErrorHandling(e,t,7,[n,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,r={uid:uid++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,o),emitsOptions:normalizeEmitsOptions(i,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=emit.bind(null,r),e.ce&&e.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push((e=>currentInstance=e)),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach((t=>t(e))):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:i}=e.vnode,o=isStatefulComponent(e);initProps(e,n,o,t),initSlots(e,i);const r=o?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,r}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const o=callWithErrorHandling(i,e,0,[e.props,n]);if(resetTracking(),unsetCurrentInstance(),isPromise(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),t)return o.then((t=>{handleSetupResult(e,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=o}else handleSetupResult(e,o)}else finishComponentSetup(e)}function handleSetupResult(e,t,n){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$2(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,n){const i=e.type;e.render||(e.render=i.render||NOOP),setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get:(t,n)=>(track(e,"get","$attrs"),t[n])}))}function createSetupContext(e){const t=t=>{e.exposed=t||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get:(t,n)=>n in t?t[n]:n in publicPropertiesMap?publicPropertiesMap[n](e):void 0,has:(e,t)=>t in e||t in publicPropertiesMap}))}function getComponentName(e,t=!0){return isFunction$1(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=exports("ad",((e,t)=>computed$1(e,t,isInSSRComponentSetup)));function h(e,t,n){const i=arguments.length;return 2===i?isObject$2(t)&&!isArray$2(t)?isVNode$1(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&isVNode$1(n)&&(n=[n]),createVNode(e,t,n))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$1="3.3.4",svgNS="http://www.w3.org/2000/svg",doc="undefined"!=typeof document?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&o.setAttribute("multiple",i.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,r){const a=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),o!==r&&(o=o.nextSibling););else{templateContainer.innerHTML=i?`<svg>${e}</svg>`:e;const o=templateContainer.content;if(i){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const i=e.style,o=isString$1(n);if(n&&!o){if(t&&!isString$1(t))for(const e in t)null==n[e]&&setStyle(i,e,"");for(const e in n)setStyle(i,e,n[e])}else{const r=i.display;o?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$2(n))n.forEach((n=>setStyle(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(i),n.replace(importantRE,""),"important"):e[i]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let i=camelize(t);if("filter"!==i&&i in e)return prefixCache[t]=i;i=capitalize$1(i);for(let o=0;o<prefixes.length;o++){const n=prefixes[o]+i;if(n in e)return prefixCache[t]=n}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,i,o){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const i=isSpecialBooleanAttr(t);null==n||i&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function patchDOMProp(e,t,n,i,o,r,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,o,r),void(e[t]=null==n?"":n);const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){e._value=n;const i=null==n?"":n;return("OPTION"===s?e.getAttribute("value"):e.value)!==i&&(e.value=i),void(null==n&&e.removeAttribute(t))}let l=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=includeBooleanAttr(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{e[t]=n}catch(c){}l&&e.removeAttribute(t)}function addEventListener(e,t,n,i){e.addEventListener(t,n,i)}function removeEventListener(e,t,n,i){e.removeEventListener(t,n,i)}function patchEvent(e,t,n,i,o=null){const r=e._vei||(e._vei={}),a=r[t];if(i&&a)a.value=i;else{const[n,s]=parseName(t);if(i){addEventListener(e,n,r[t]=createInvoker(i,o),s)}else a&&(removeEventListener(e,n,a,s),r[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){let n;for(t={};n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow$1=()=>cachedNow||(p.then((()=>cachedNow=0)),cachedNow=Date.now());function createInvoker(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();callWithAsyncErrorHandling(patchStopImmediatePropagation(e,n.value),t,5,[e])};return n.value=e,n.attached=getNow$1(),n}function patchStopImmediatePropagation(e,t){if(isArray$2(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,i,o=!1,r,a,s,l)=>{"class"===t?patchClass(e,i,o):"style"===t?patchStyle(e,n,i):isOn(t)?isModelListener(t)||patchEvent(e,t,n,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):shouldSetAsProp(e,t,i,o))?patchDOMProp(e,t,i,r,a,s,l):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),patchAttr(e,t,i,o))};function shouldSetAsProp(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&nativeOnRE.test(t)&&isFunction$1(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!nativeOnRE.test(t)||!isString$1(n))&&t in e))))}function useCssVars(e){const t=getCurrentInstance();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>setVarsOnNode(e,n)))},i=()=>{const i=e(t.proxy);setVarsOnVNode(t.subTree,i),n(i)};watchPostEffect(i),onMounted((()=>{const e=new MutationObserver(i);e.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted((()=>e.disconnect()))}))}function setVarsOnVNode(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{setVarsOnVNode(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)setVarsOnNode(e.el,t);else if(e.type===Fragment)e.children.forEach((e=>setVarsOnVNode(e,t)));else if(e.type===Static){let{el:n,anchor:i}=e;for(;n&&(setVarsOnNode(n,t),n!==i);)n=n.nextSibling}}function setVarsOnNode(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$2(t)?e=>invokeArrayFns(t,e):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText=exports("A",{created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e._assign=getModelAssigner(o);const r=i||o.props&&"number"===o.props.type;addEventListener(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),r&&(i=looseToNumber(i)),e._assign(i)})),n&&addEventListener(e,"change",(()=>{e.value=e.value.trim()})),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:o}},r){if(e._assign=getModelAssigner(r),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===t)return;if((o||"number"===e.type)&&looseToNumber(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}}),systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>systemModifiers.some((n=>e[`${n}Key`]&&!t.includes(n)))},withModifiers=(e,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const i=modifierGuards[t[e]];if(i&&i(n,t))return}return e(n,...i)},vShow={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),setDisplay(e,!0),i.enter(e)):i.leave(e,(()=>{setDisplay(e,!1)})):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}const rendererOptions=extend$1({patchProp:patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=exports("q",((...e)=>{ensureRenderer().render(...e)})),createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=e=>{const i=normalizeContainer(e);if(!i)return;const o=t._component;isFunction$1(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const r=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function normalizeContainer(e){if(isString$1(e)){return document.querySelector(e)}return e}
/*!
        * pinia v2.1.3
        * (c) 2023 Eduardo San Martin Morote
        * @license MIT
        */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$1(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var MutationType,MutationType2;function createPinia(){const e=effectScope(!0),t=e.run((()=>ref({})));let n=[],i=[];const o=markRaw({install(e){setActivePinia(o),o._a=e,e.provide(piniaSymbol,o),e.config.globalProperties.$pinia=o,i.forEach((e=>n.push(e))),i=[]},use(e){return this._a?n.push(e):i.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}MutationType2=MutationType||(MutationType={}),MutationType2.direct="direct",MutationType2.patchObject="patch object",MutationType2.patchFunction="patch function";const noop$3=()=>{};function addSubscription(e,t,n,i=noop$3){e.push(t);const o=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i())};return!n&&getCurrentScope()&&onScopeDispose(o),o}function triggerSubscriptions(e,...t){e.slice().forEach((e=>{e(...t)}))}const fallbackRunWithContext=e=>e();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,n)=>e.set(n,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];isPlainObject$1(o)&&isPlainObject$1(i)&&e.hasOwnProperty(n)&&!isRef(i)&&!isReactive(i)?e[n]=mergeReactiveObjects(o,i):e[n]=i}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$3}=Object;function isComputed(e){return!(!isRef(e)||!e.effect)}function createOptionsStore(e,t,n,i){const{state:o,actions:r,getters:a}=t,s=n.state.value[e];let l;return l=createSetupStore(e,(function(){s||(n.state.value[e]=o?o():{});const t=toRefs(n.state.value[e]);return assign$3(t,r,Object.keys(a||{}).reduce(((t,i)=>(t[i]=markRaw(computed((()=>{setActivePinia(n);const t=n._s.get(e);return a[i].call(t,t)}))),t)),{}))}),t,n,i,!0),l}function createSetupStore(e,t,n={},i,o,r){let a;const s=assign$3({actions:{}},n),l={deep:!0};let c,u,d,h=[],p=[];const f=i.state.value[e];let g;function m(t){let n;c=u=!1,"function"==typeof t?(t(i.state.value[e]),n={type:MutationType.patchFunction,storeId:e,events:d}):(mergeReactiveObjects(i.state.value[e],t),n={type:MutationType.patchObject,payload:t,storeId:e,events:d});const o=g=Symbol();nextTick().then((()=>{g===o&&(c=!0)})),u=!0,triggerSubscriptions(h,n,i.state.value[e])}r||f||(i.state.value[e]={}),ref({});const _=r?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{assign$3(e,t)}))}:noop$3;function v(t,n){return function(){setActivePinia(i);const o=Array.from(arguments),r=[],a=[];let s;triggerSubscriptions(p,{args:o,name:t,store:b,after:function(e){r.push(e)},onError:function(e){a.push(e)}});try{s=n.apply(this&&this.$id===e?this:b,o)}catch(l){throw triggerSubscriptions(a,l),l}return s instanceof Promise?s.then((e=>(triggerSubscriptions(r,e),e))).catch((e=>(triggerSubscriptions(a,e),Promise.reject(e)))):(triggerSubscriptions(r,s),s)}}const b=reactive({_p:i,$id:e,$onAction:addSubscription.bind(null,p),$patch:m,$reset:_,$subscribe(t,n={}){const o=addSubscription(h,t,n.detached,(()=>r())),r=a.run((()=>watch((()=>i.state.value[e]),(i=>{("sync"===n.flush?u:c)&&t({storeId:e,type:MutationType.direct,events:d},i)}),assign$3({},l,n))));return o},$dispose:function(){a.stop(),h=[],p=[],i._s.delete(e)}});i._s.set(e,b);const T=i._a&&i._a.runWithContext||fallbackRunWithContext,A=i._e.run((()=>(a=effectScope(),T((()=>a.run(t))))));for(const y in A){const t=A[y];if(isRef(t)&&!isComputed(t)||isReactive(t))r||(f&&shouldHydrate(t)&&(isRef(t)?t.value=f[y]:mergeReactiveObjects(t,f[y])),i.state.value[e][y]=t);else if("function"==typeof t){const e=v(y,t);A[y]=e,s.actions[y]=t}}return assign$3(b,A),assign$3(toRaw(b),A),Object.defineProperty(b,"$state",{get:()=>i.state.value[e],set:e=>{m((t=>{assign$3(t,e)}))}}),i._p.forEach((e=>{assign$3(b,a.run((()=>e({store:b,app:i._a,pinia:i,options:s}))))})),f&&r&&n.hydrate&&n.hydrate(b.$state,f),c=!0,u=!0,b}function defineStore(e,t,n){let i,o;const r="function"==typeof t;function a(e,n){const a=hasInjectionContext();(e=e||(a?inject(piniaSymbol,null):null))&&setActivePinia(e),(e=activePinia)._s.has(i)||(r?createSetupStore(i,t,o,e):createOptionsStore(i,o,e));return e._s.get(i)}return"string"==typeof e?(i=e,o=r?n:t):(o=e,i=e.id),a.$id=i,a}function storeToRefs(e){{e=toRaw(e);const t={};for(const n in e){const i=e[n];(isRef(i)||isReactive(i))&&(t[n]=toRef(e,n))}return t}}var vconsole_min={exports:{}};
/*!
       * vConsole v3.15.1 (https://github.com/Tencent/vConsole)
       *
       * Tencent is pleased to support the open source community by making vConsole available.
       * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
       * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
       * http://opensource.org/licenses/MIT
       * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
       */(function(module,exports$1){var n;commonjsGlobal||self,n=function(){return function(){var __webpack_modules__={4264:function(e,t,n){e.exports=n(7588)},5036:function(e,t,n){n(1719),n(5677),n(6394),n(5334),n(6969),n(2021),n(8328),n(2129);var i=n(1287);e.exports=i.Promise},2582:function(e,t,n){n(1646),n(6394),n(2004),n(462),n(8407),n(2429),n(1172),n(8288),n(1274),n(8201),n(6626),n(3211),n(9952),n(15),n(9831),n(7521),n(2972),n(6956),n(5222),n(2257);var i=n(1287);e.exports=i.Symbol},8257:function(e,t,n){var i=n(7583),o=n(9212),r=n(5637),a=i.TypeError;e.exports=function(e){if(o(e))return e;throw a(r(e)+" is not a function")}},1186:function(e,t,n){var i=n(7583),o=n(2097),r=n(5637),a=i.TypeError;e.exports=function(e){if(o(e))return e;throw a(r(e)+" is not a constructor")}},9882:function(e,t,n){var i=n(7583),o=n(9212),r=i.String,a=i.TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw a("Can't set "+r(e)+" as a prototype")}},6288:function(e,t,n){var i=n(3649),o=n(3590),r=n(4615),a=i("unscopables"),s=Array.prototype;null==s[a]&&r.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},4761:function(e,t,n){var i=n(7583),o=n(2447),r=i.TypeError;e.exports=function(e,t){if(o(t,e))return e;throw r("Incorrect invocation")}},2569:function(e,t,n){var i=n(7583),o=n(794),r=i.String,a=i.TypeError;e.exports=function(e){if(o(e))return e;throw a(r(e)+" is not an object")}},5766:function(e,t,n){var i=n(2977),o=n(6782),r=n(1825),a=function(e){return function(t,n,a){var s,l=i(t),c=r(l),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4805:function(e,t,n){var i=n(2938),o=n(7386),r=n(5044),a=n(1324),s=n(1825),l=n(4822),c=o([].push),u=function(e){var t=1==e,n=2==e,o=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,b,T=a(f),A=r(T),y=i(g,m),E=s(A),S=0,C=_||l,w=t?C(f,E):n||h?C(f,0):void 0;E>S;S++)if((p||S in A)&&(b=y(v=A[S],S,T),e))if(t)w[S]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:c(w,v)}else switch(e){case 4:return!1;case 7:c(w,v)}return d?-1:o||u?u:w}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},9269:function(e,t,n){var i=n(6544),o=n(3649),r=n(4061),a=o("species");e.exports=function(e){return r>=51||!i((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4546:function(e,t,n){var i=n(7583),o=n(6782),r=n(1825),a=n(5999),s=i.Array,l=Math.max;e.exports=function(e,t,n){for(var i=r(e),c=o(t,i),u=o(void 0===n?i:n,i),d=s(l(u-c,0)),h=0;c<u;c++,h++)a(d,h,e[c]);return d.length=h,d}},6917:function(e,t,n){var i=n(7386);e.exports=i([].slice)},5289:function(e,t,n){var i=n(7583),o=n(4521),r=n(2097),a=n(794),s=n(3649)("species"),l=i.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(r(t)&&(t===l||o(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},4822:function(e,t,n){var i=n(5289);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},3616:function(e,t,n){var i=n(3649)("iterator"),o=!1;try{var r=0,a={next:function(){return{done:!!r++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}},9624:function(e,t,n){var i=n(7386),o=i({}.toString),r=i("".slice);e.exports=function(e){return r(o(e),8,-1)}},3058:function(e,t,n){var i=n(7583),o=n(8191),r=n(9212),a=n(9624),s=n(3649)("toStringTag"),l=i.Object,c="Arguments"==a(function(){return arguments}());e.exports=o?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?n:c?a(t):"Object"==(i=a(t))&&r(t.callee)?"Arguments":i}},1509:function(e,t,n){var i=n(7386)("".replace),o=String(Error("zxcasd").stack),r=/\n\s*at [^:]*:[^\n]*/,a=r.test(o);e.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=i(e,r,"");return e}},3478:function(e,t,n){var i=n(2870),o=n(929),r=n(6683),a=n(4615);e.exports=function(e,t,n){for(var s=o(t),l=a.f,c=r.f,u=0;u<s.length;u++){var d=s[u];i(e,d)||n&&i(n,d)||l(e,d,c(t,d))}}},926:function(e,t,n){var i=n(6544);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4683:function(e,t,n){var i=n(2365).IteratorPrototype,o=n(3590),r=n(4677),a=n(8821),s=n(339),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=o(i,{next:r(+!c,n)}),a(e,u,!1,!0),s[u]=l,e}},57:function(e,t,n){var i=n(8494),o=n(4615),r=n(4677);e.exports=i?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},4677:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5999:function(e,t,n){var i=n(8734),o=n(4615),r=n(4677);e.exports=function(e,t,n){var a=i(t);a in e?o.f(e,a,r(0,n)):e[a]=n}},9012:function(e,t,n){var i=n(7263),o=n(8262),r=n(6268),a=n(4340),s=n(9212),l=n(4683),c=n(729),u=n(7496),d=n(8821),h=n(57),p=n(1270),f=n(3649),g=n(339),m=n(2365),_=a.PROPER,v=a.CONFIGURABLE,b=m.IteratorPrototype,T=m.BUGGY_SAFARI_ITERATORS,A=f("iterator"),y="keys",E="values",S="entries",C=function(){return this};e.exports=function(e,t,n,a,f,m,w){l(n,t,a);var x,M,R,I=function(e){if(e===f&&P)return P;if(!T&&e in L)return L[e];switch(e){case y:case E:case S:return function(){return new n(this,e)}}return function(){return new n(this)}},D=t+" Iterator",k=!1,L=e.prototype,O=L[A]||L["@@iterator"]||f&&L[f],P=!T&&O||I(f),N="Array"==t&&L.entries||O;if(N&&(x=c(N.call(new e)))!==Object.prototype&&x.next&&(r||c(x)===b||(u?u(x,b):s(x[A])||p(x,A,C)),d(x,D,!0,!0),r&&(g[D]=C)),_&&f==E&&O&&O.name!==E&&(!r&&v?h(L,"name",E):(k=!0,P=function(){return o(O,this)})),f)if(M={values:I(E),keys:m?P:I(y),entries:I(S)},w)for(R in M)(T||k||!(R in L))&&p(L,R,M[R]);else i({target:t,proto:!0,forced:T||k},M);return r&&!w||L[A]===P||p(L,A,P,{name:f}),g[t]=P,M}},2219:function(e,t,n){var i=n(1287),o=n(2870),r=n(491),a=n(4615).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});o(t,e)||a(t,e,{value:r.f(e)})}},8494:function(e,t,n){var i=n(6544);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6668:function(e,t,n){var i=n(7583),o=n(794),r=i.document,a=o(r)&&o(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},6778:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9307:function(e,t,n){var i=n(6668)("span").classList,o=i&&i.constructor&&i.constructor.prototype;e.exports=o===Object.prototype?void 0:o},2274:function(e){e.exports="object"==typeof window},3256:function(e,t,n){var i=n(6918),o=n(7583);e.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==o.Pebble},7020:function(e,t,n){var i=n(6918);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},5354:function(e,t,n){var i=n(9624),o=n(7583);e.exports="process"==i(o.process)},6846:function(e,t,n){var i=n(6918);e.exports=/web0s(?!.*chrome)/i.test(i)},6918:function(e,t,n){var i=n(5897);e.exports=i("navigator","userAgent")||""},4061:function(e,t,n){var i,o,r=n(7583),a=n(6918),s=r.process,l=r.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(o=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!o&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(o=+i[1]),e.exports=o},5690:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1178:function(e,t,n){var i=n(6544),o=n(4677);e.exports=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},7263:function(e,t,n){var i=n(7583),o=n(6683).f,r=n(57),a=n(1270),s=n(460),l=n(3478),c=n(4451);e.exports=function(e,t){var n,u,d,h,p,f=e.target,g=e.global,m=e.stat;if(n=g?i:m?i[f]||s(f,{}):(i[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=o(n,u))&&p.value:n[u],!c(g?u:f+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&r(h,"sham",!0),a(n,u,h,e)}}},6544:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},1611:function(e,t,n){var i=n(8987),o=Function.prototype,r=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(r):function(){return a.apply(r,arguments)})},2938:function(e,t,n){var i=n(7386),o=n(8257),r=n(8987),a=i(i.bind);e.exports=function(e,t){return o(e),void 0===t?e:r?a(e,t):function(){return e.apply(t,arguments)}}},8987:function(e,t,n){var i=n(6544);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8262:function(e,t,n){var i=n(8987),o=Function.prototype.call;e.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},4340:function(e,t,n){var i=n(8494),o=n(2870),r=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=o(r,"name"),l=s&&"something"===function(){}.name,c=s&&(!i||i&&a(r,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},7386:function(e,t,n){var i=n(8987),o=Function.prototype,r=o.bind,a=o.call,s=i&&r.bind(a,a);e.exports=i?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},5897:function(e,t,n){var i=n(7583),o=n(9212);e.exports=function(e,t){return arguments.length<2?function(e){return o(e)?e:void 0}(i[e]):i[e]&&i[e][t]}},8272:function(e,t,n){var i=n(3058),o=n(911),r=n(339),a=n(3649)("iterator");e.exports=function(e){if(null!=e)return o(e,a)||o(e,"@@iterator")||r[i(e)]}},6307:function(e,t,n){var i=n(7583),o=n(8262),r=n(8257),a=n(2569),s=n(5637),l=n(8272),c=i.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(r(n))return a(o(n,e));throw c(s(e)+" is not iterable")}},911:function(e,t,n){var i=n(8257);e.exports=function(e,t){var n=e[t];return null==n?void 0:i(n)}},7583:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2870:function(e,t,n){var i=n(7386),o=n(1324),r=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(o(e),t)}},4639:function(e){e.exports={}},2716:function(e,t,n){var i=n(7583);e.exports=function(e,t){var n=i.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},482:function(e,t,n){var i=n(5897);e.exports=i("document","documentElement")},275:function(e,t,n){var i=n(8494),o=n(6544),r=n(6668);e.exports=!i&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},5044:function(e,t,n){var i=n(7583),o=n(7386),r=n(6544),a=n(9624),s=i.Object,l=o("".split);e.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},9734:function(e,t,n){var i=n(7386),o=n(9212),r=n(1314),a=i(Function.toString);o(r.inspectSource)||(r.inspectSource=function(e){return a(e)}),e.exports=r.inspectSource},4402:function(e,t,n){var i=n(794),o=n(57);e.exports=function(e,t){i(t)&&"cause"in t&&o(e,"cause",t.cause)}},2743:function(e,t,n){var i,o,r,a=n(9491),s=n(7583),l=n(7386),c=n(794),u=n(57),d=n(2870),h=n(1314),p=n(9137),f=n(4639),g="Object already initialized",m=s.TypeError,_=s.WeakMap;if(a||h.state){var v=h.state||(h.state=new _),b=l(v.get),T=l(v.has),A=l(v.set);i=function(e,t){if(T(v,e))throw new m(g);return t.facade=e,A(v,e,t),t},o=function(e){return b(v,e)||{}},r=function(e){return T(v,e)}}else{var y=p("state");f[y]=!0,i=function(e,t){if(d(e,y))throw new m(g);return t.facade=e,u(e,y,t),t},o=function(e){return d(e,y)?e[y]:{}},r=function(e){return d(e,y)}}e.exports={set:i,get:o,has:r,enforce:function(e){return r(e)?o(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},114:function(e,t,n){var i=n(3649),o=n(339),r=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[r]===e)}},4521:function(e,t,n){var i=n(9624);e.exports=Array.isArray||function(e){return"Array"==i(e)}},9212:function(e){e.exports=function(e){return"function"==typeof e}},2097:function(e,t,n){var i=n(7386),o=n(6544),r=n(9212),a=n(3058),s=n(5897),l=n(9734),c=function(){},u=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=i(h.exec),f=!h.exec(c),g=function(e){if(!r(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}},m=function(e){if(!r(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,l(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||o((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},4451:function(e,t,n){var i=n(6544),o=n(9212),r=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==u||n!=c&&(o(t)?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(r,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},794:function(e,t,n){var i=n(9212);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},6268:function(e){e.exports=!1},5871:function(e,t,n){var i=n(7583),o=n(5897),r=n(9212),a=n(2447),s=n(7786),l=i.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return r(t)&&a(t.prototype,l(e))}},4026:function(e,t,n){var i=n(7583),o=n(2938),r=n(8262),a=n(2569),s=n(5637),l=n(114),c=n(1825),u=n(2447),d=n(6307),h=n(8272),p=n(7093),f=i.TypeError,g=function(e,t){this.stopped=e,this.result=t},m=g.prototype;e.exports=function(e,t,n){var i,_,v,b,T,A,y,E=n&&n.that,S=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),x=o(t,E),M=function(e){return i&&p(i,"normal",e),new g(!0,e)},R=function(e){return S?(a(e),w?x(e[0],e[1],M):x(e[0],e[1])):w?x(e,M):x(e)};if(C)i=e;else{if(!(_=h(e)))throw f(s(e)+" is not iterable");if(l(_)){for(v=0,b=c(e);b>v;v++)if((T=R(e[v]))&&u(m,T))return T;return new g(!1)}i=d(e,_)}for(A=i.next;!(y=r(A,i)).done;){try{T=R(y.value)}catch(e){p(i,"throw",e)}if("object"==typeof T&&T&&u(m,T))return T}return new g(!1)}},7093:function(e,t,n){var i=n(8262),o=n(2569),r=n(911);e.exports=function(e,t,n){var a,s;o(e);try{if(!(a=r(e,"return"))){if("throw"===t)throw n;return n}a=i(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return o(a),n}},2365:function(e,t,n){var i,o,r,a=n(6544),s=n(9212),l=n(3590),c=n(729),u=n(1270),d=n(3649),h=n(6268),p=d("iterator"),f=!1;[].keys&&("next"in(r=[].keys())?(o=c(c(r)))!==Object.prototype&&(i=o):f=!0),null==i||a((function(){var e={};return i[p].call(e)!==e}))?i={}:h&&(i=l(i)),s(i[p])||u(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},339:function(e){e.exports={}},1825:function(e,t,n){var i=n(97);e.exports=function(e){return i(e.length)}},2095:function(e,t,n){var i,o,r,a,s,l,c,u,d=n(7583),h=n(2938),p=n(6683).f,f=n(8117).set,g=n(7020),m=n(3256),_=n(6846),v=n(5354),b=d.MutationObserver||d.WebKitMutationObserver,T=d.document,A=d.process,y=d.Promise,E=p(d,"queueMicrotask"),S=E&&E.value;S||(i=function(){var e,t;for(v&&(e=A.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():r=void 0,e}}r=void 0,e&&e.enter()},g||v||_||!b||!T?!m&&y&&y.resolve?((c=y.resolve(void 0)).constructor=y,u=h(c.then,c),a=function(){u(i)}):v?a=function(){A.nextTick(i)}:(f=h(f,d),a=function(){f(i)}):(s=!0,l=T.createTextNode(""),new b(i).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=S||function(e){var t={fn:e,next:void 0};r&&(r.next=t),o||(o=t,a()),r=t}},783:function(e,t,n){var i=n(7583);e.exports=i.Promise},8640:function(e,t,n){var i=n(4061),o=n(6544);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},9491:function(e,t,n){var i=n(7583),o=n(9212),r=n(9734),a=i.WeakMap;e.exports=o(a)&&/native code/.test(r(a))},5084:function(e,t,n){var i=n(8257),o=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new o(e)}},2764:function(e,t,n){var i=n(8320);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},3590:function(e,t,n){var i,o=n(2569),r=n(8728),a=n(5690),s=n(4639),l=n(482),c=n(6668),u=n(9137)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&i?p(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):p(i);for(var n=a.length;n--;)delete f.prototype[a[n]];return f()};s[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=o(e),n=new d,d.prototype=null,n[u]=e):n=f(),void 0===t?n:r.f(n,t)}},8728:function(e,t,n){var i=n(8494),o=n(7670),r=n(4615),a=n(2569),s=n(2977),l=n(5432);t.f=i&&!o?Object.defineProperties:function(e,t){a(e);for(var n,i=s(t),o=l(t),c=o.length,u=0;c>u;)r.f(e,n=o[u++],i[n]);return e}},4615:function(e,t,n){var i=n(7583),o=n(8494),r=n(275),a=n(7670),s=n(2569),l=n(8734),c=i.TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor;t.f=o?a?function(e,t,n){if(s(e),t=l(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var i=d(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:i.configurable,enumerable:"enumerable"in n?n.enumerable:i.enumerable,writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(s(e),t=l(t),s(n),r)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},6683:function(e,t,n){var i=n(8494),o=n(8262),r=n(112),a=n(4677),s=n(2977),l=n(8734),c=n(2870),u=n(275),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=s(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return a(!o(r.f,e,t),e[t])}},3130:function(e,t,n){var i=n(9624),o=n(2977),r=n(9275).f,a=n(4546),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==i(e)?function(e){try{return r(e)}catch(e){return a(s)}}(e):r(o(e))}},9275:function(e,t,n){var i=n(8356),o=n(5690).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},4012:function(e,t){t.f=Object.getOwnPropertySymbols},729:function(e,t,n){var i=n(7583),o=n(2870),r=n(9212),a=n(1324),s=n(9137),l=n(926),c=s("IE_PROTO"),u=i.Object,d=u.prototype;e.exports=l?u.getPrototypeOf:function(e){var t=a(e);if(o(t,c))return t[c];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof u?d:null}},2447:function(e,t,n){var i=n(7386);e.exports=i({}.isPrototypeOf)},8356:function(e,t,n){var i=n(7386),o=n(2870),r=n(2977),a=n(5766).indexOf,s=n(4639),l=i([].push);e.exports=function(e,t){var n,i=r(e),c=0,u=[];for(n in i)!o(s,n)&&o(i,n)&&l(u,n);for(;t.length>c;)o(i,n=t[c++])&&(~a(u,n)||l(u,n));return u}},5432:function(e,t,n){var i=n(8356),o=n(5690);e.exports=Object.keys||function(e){return i(e,o)}},112:function(e,t){var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7496:function(e,t,n){var i=n(7386),o=n(2569),r=n(9882);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return o(n),r(i),t?e(n,i):n.__proto__=i,n}}():void 0)},3060:function(e,t,n){var i=n(8191),o=n(3058);e.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},6252:function(e,t,n){var i=n(7583),o=n(8262),r=n(9212),a=n(794),s=i.TypeError;e.exports=function(e,t){var n,i;if("string"===t&&r(n=e.toString)&&!a(i=o(n,e)))return i;if(r(n=e.valueOf)&&!a(i=o(n,e)))return i;if("string"!==t&&r(n=e.toString)&&!a(i=o(n,e)))return i;throw s("Can't convert object to primitive value")}},929:function(e,t,n){var i=n(5897),o=n(7386),r=n(9275),a=n(4012),s=n(2569),l=o([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=a.f;return n?l(t,n(e)):t}},1287:function(e,t,n){var i=n(7583);e.exports=i},544:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},5732:function(e,t,n){var i=n(2569),o=n(794),r=n(5084);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},2723:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},6893:function(e,t,n){var i=n(1270);e.exports=function(e,t,n){for(var o in t)i(e,o,t[o],n);return e}},1270:function(e,t,n){var i=n(7583),o=n(9212),r=n(2870),a=n(57),s=n(460),l=n(9734),c=n(2743),u=n(4340).CONFIGURABLE,d=c.get,h=c.enforce,p=String(String).split("String");(e.exports=function(e,t,n,l){var c,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:t;o(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!r(n,"name")||u&&n.name!==m)&&a(n,"name",m),(c=h(n)).source||(c.source=p.join("string"==typeof m?m:""))),e!==i?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=n:a(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return o(this)&&d(this).source||l(this)}))},3955:function(e,t,n){var i=n(7583).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},460:function(e,t,n){var i=n(7583),o=Object.defineProperty;e.exports=function(e,t){try{o(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},7730:function(e,t,n){var i=n(5897),o=n(4615),r=n(3649),a=n(8494),s=r("species");e.exports=function(e){var t=i(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},8821:function(e,t,n){var i=n(4615).f,o=n(2870),r=n(3649)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!o(e,r)&&i(e,r,{configurable:!0,value:t})}},9137:function(e,t,n){var i=n(7836),o=n(8284),r=i("keys");e.exports=function(e){return r[e]||(r[e]=o(e))}},1314:function(e,t,n){var i=n(7583),o=n(460),r="__core-js_shared__",a=i[r]||o(r,{});e.exports=a},7836:function(e,t,n){var i=n(6268),o=n(1314);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},564:function(e,t,n){var i=n(2569),o=n(1186),r=n(3649)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[r])?t:o(n)}},6389:function(e,t,n){var i=n(7386),o=n(7486),r=n(8320),a=n(3955),s=i("".charAt),l=i("".charCodeAt),c=i("".slice),u=function(e){return function(t,n){var i,u,d=r(a(t)),h=o(n),p=d.length;return h<0||h>=p?e?"":void 0:(i=l(d,h))<55296||i>56319||h+1===p||(u=l(d,h+1))<56320||u>57343?e?s(d,h):i:e?c(d,h,h+2):u-56320+(i-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},8117:function(e,t,n){var i,o,r,a,s=n(7583),l=n(1611),c=n(2938),u=n(9212),d=n(2870),h=n(6544),p=n(482),f=n(6917),g=n(6668),m=n(7520),_=n(7020),v=n(5354),b=s.setImmediate,T=s.clearImmediate,A=s.process,y=s.Dispatch,E=s.Function,S=s.MessageChannel,C=s.String,w=0,x={};try{i=s.location}catch(e){}var M=function(e){if(d(x,e)){var t=x[e];delete x[e],t()}},R=function(e){return function(){M(e)}},I=function(e){M(e.data)},D=function(e){s.postMessage(C(e),i.protocol+"//"+i.host)};b&&T||(b=function(e){m(arguments.length,1);var t=u(e)?e:E(e),n=f(arguments,1);return x[++w]=function(){l(t,void 0,n)},o(w),w},T=function(e){delete x[e]},v?o=function(e){A.nextTick(R(e))}:y&&y.now?o=function(e){y.now(R(e))}:S&&!_?(a=(r=new S).port2,r.port1.onmessage=I,o=c(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&i&&"file:"!==i.protocol&&!h(D)?(o=D,s.addEventListener("message",I,!1)):o="onreadystatechange"in g("script")?function(e){p.appendChild(g("script")).onreadystatechange=function(){p.removeChild(this),M(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:b,clear:T}},6782:function(e,t,n){var i=n(7486),o=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):r(n,t)}},2977:function(e,t,n){var i=n(5044),o=n(3955);e.exports=function(e){return i(o(e))}},7486:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?n:t)(i)}},97:function(e,t,n){var i=n(7486),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},1324:function(e,t,n){var i=n(7583),o=n(3955),r=i.Object;e.exports=function(e){return r(o(e))}},2670:function(e,t,n){var i=n(7583),o=n(8262),r=n(794),a=n(5871),s=n(911),l=n(6252),c=n(3649),u=i.TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!r(e)||a(e))return e;var n,i=s(e,d);if(i){if(void 0===t&&(t="default"),n=o(i,e,t),!r(n)||a(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},8734:function(e,t,n){var i=n(2670),o=n(5871);e.exports=function(e){var t=i(e,"string");return o(t)?t:t+""}},8191:function(e,t,n){var i={};i[n(3649)("toStringTag")]="z",e.exports="[object z]"===String(i)},8320:function(e,t,n){var i=n(7583),o=n(3058),r=i.String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},5637:function(e,t,n){var i=n(7583).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},8284:function(e,t,n){var i=n(7386),o=0,r=Math.random(),a=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+r,36)}},7786:function(e,t,n){var i=n(8640);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7670:function(e,t,n){var i=n(8494),o=n(6544);e.exports=i&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},7520:function(e,t,n){var i=n(7583).TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},491:function(e,t,n){var i=n(3649);t.f=i},3649:function(e,t,n){var i=n(7583),o=n(7836),r=n(2870),a=n(8284),s=n(8640),l=n(7786),c=o("wks"),u=i.Symbol,d=u&&u.for,h=l?u:u&&u.withoutSetter||a;e.exports=function(e){if(!r(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&r(u,e)?c[e]=u[e]:c[e]=l&&d?d(t):h(t)}return c[e]}},1719:function(e,t,n){var i=n(7263),o=n(7583),r=n(2447),a=n(729),s=n(7496),l=n(3478),c=n(3590),u=n(57),d=n(4677),h=n(1509),p=n(4402),f=n(4026),g=n(2764),m=n(3649),_=n(1178),v=m("toStringTag"),b=o.Error,T=[].push,A=function(e,t){var n,i=arguments.length>2?arguments[2]:void 0,o=r(y,this);s?n=s(new b,o?a(this):y):(n=o?this:c(y),u(n,v,"Error")),void 0!==t&&u(n,"message",g(t)),_&&u(n,"stack",h(n.stack,1)),p(n,i);var l=[];return f(e,T,{that:l}),u(n,"errors",l),n};s?s(A,b):l(A,b,{name:!0});var y=A.prototype=c(b.prototype,{constructor:d(1,A),message:d(1,""),name:d(1,"AggregateError")});i({global:!0},{AggregateError:A})},1646:function(e,t,n){var i=n(7263),o=n(7583),r=n(6544),a=n(4521),s=n(794),l=n(1324),c=n(1825),u=n(5999),d=n(4822),h=n(9269),p=n(3649),f=n(4061),g=p("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",v=o.TypeError,b=f>=51||!r((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),T=h("concat"),A=function(e){if(!s(e))return!1;var t=e[g];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!b||!T},{concat:function(e){var t,n,i,o,r,a=l(this),s=d(a,0),h=0;for(t=-1,i=arguments.length;t<i;t++)if(A(r=-1===t?a:arguments[t])){if(h+(o=c(r))>m)throw v(_);for(n=0;n<o;n++,h++)n in r&&u(s,h,r[n])}else{if(h>=m)throw v(_);u(s,h++,r)}return s.length=h,s}})},5677:function(e,t,n){var i=n(2977),o=n(6288),r=n(339),a=n(2743),s=n(4615).f,l=n(9012),c=n(6268),u=n(8494),d="Array Iterator",h=a.set,p=a.getterFor(d);e.exports=l(Array,"Array",(function(e,t){h(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");var f=r.Arguments=r.Array;if(o("keys"),o("values"),o("entries"),!c&&u&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(e){}},6956:function(e,t,n){var i=n(7583);n(8821)(i.JSON,"JSON",!0)},5222:function(e,t,n){n(8821)(Math,"Math",!0)},6394:function(e,t,n){var i=n(8191),o=n(1270),r=n(3060);i||o(Object.prototype,"toString",r,{unsafe:!0})},6969:function(e,t,n){var i=n(7263),o=n(8262),r=n(8257),a=n(5084),s=n(544),l=n(4026);i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),i=n.resolve,c=n.reject,u=s((function(){var n=r(t.resolve),a=[],s=0,c=1;l(e,(function(e){var r=s++,l=!1;c++,o(n,t,e).then((function(e){l||(l=!0,a[r]={status:"fulfilled",value:e},--c||i(a))}),(function(e){l||(l=!0,a[r]={status:"rejected",reason:e},--c||i(a))}))})),--c||i(a)}));return u.error&&c(u.value),n.promise}})},2021:function(e,t,n){var i=n(7263),o=n(8257),r=n(5897),a=n(8262),s=n(5084),l=n(544),c=n(4026),u="No one promise resolved";i({target:"Promise",stat:!0},{any:function(e){var t=this,n=r("AggregateError"),i=s.f(t),d=i.resolve,h=i.reject,p=l((function(){var i=o(t.resolve),r=[],s=0,l=1,p=!1;c(e,(function(e){var o=s++,c=!1;l++,a(i,t,e).then((function(e){c||p||(p=!0,d(e))}),(function(e){c||p||(c=!0,r[o]=e,--l||h(new n(r,u)))}))})),--l||h(new n(r,u))}));return p.error&&h(p.value),i.promise}})},8328:function(e,t,n){var i=n(7263),o=n(6268),r=n(783),a=n(6544),s=n(5897),l=n(9212),c=n(564),u=n(5732),d=n(1270);if(i({target:"Promise",proto:!0,real:!0,forced:!!r&&a((function(){r.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n=l(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!o&&l(r)){var h=s("Promise").prototype.finally;r.prototype.finally!==h&&d(r.prototype,"finally",h,{unsafe:!0})}},5334:function(e,t,n){var i,o,r,a,s=n(7263),l=n(6268),c=n(7583),u=n(5897),d=n(8262),h=n(783),p=n(1270),f=n(6893),g=n(7496),m=n(8821),_=n(7730),v=n(8257),b=n(9212),T=n(794),A=n(4761),y=n(9734),E=n(4026),S=n(3616),C=n(564),w=n(8117).set,x=n(2095),M=n(5732),R=n(2716),I=n(5084),D=n(544),k=n(2723),L=n(2743),O=n(4451),P=n(3649),N=n(2274),$=n(5354),B=n(4061),F=P("species"),U="Promise",G=L.getterFor(U),V=L.set,H=L.getterFor(U),W=h&&h.prototype,z=h,j=W,X=c.TypeError,Y=c.document,q=c.process,K=I.f,Q=K,Z=!!(Y&&Y.createEvent&&c.dispatchEvent),J=b(c.PromiseRejectionEvent),ee="unhandledrejection",te=!1,ne=O(U,(function(){var e=y(z),t=e!==String(z);if(!t&&66===B)return!0;if(l&&!j.finally)return!0;if(B>=51&&/native code/.test(e))return!1;var n=new z((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(n.constructor={})[F]=i,!(te=n.then((function(){}))instanceof i)||!t&&N&&!J})),ie=ne||!S((function(e){z.all(e).catch((function(){}))})),oe=function(e){var t;return!(!T(e)||!b(t=e.then))&&t},re=function(e,t){var n,i,o,r=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(a||(2===t.rejection&&ue(t),t.rejection=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),o=!0)),n===e.promise?c(X("Promise-chain cycle")):(i=oe(n))?d(i,n,l,c):l(n)):c(r)}catch(e){u&&!o&&u.exit(),c(e)}},ae=function(e,t){e.notified||(e.notified=!0,x((function(){for(var n,i=e.reactions;n=i.get();)re(n,e);e.notified=!1,t&&!e.rejection&&le(e)})))},se=function(e,t,n){var i,o;Z?((i=Y.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},!J&&(o=c["on"+e])?o(i):e===ee&&R("Unhandled promise rejection",n)},le=function(e){d(w,c,(function(){var t,n=e.facade,i=e.value;if(ce(e)&&(t=D((function(){$?q.emit("unhandledRejection",i,n):se(ee,n,i)})),e.rejection=$||ce(e)?2:1,t.error))throw t.value}))},ce=function(e){return 1!==e.rejection&&!e.parent},ue=function(e){d(w,c,(function(){var t=e.facade;$?q.emit("rejectionHandled",t):se("rejectionhandled",t,e.value)}))},de=function(e,t,n){return function(i){e(t,i,n)}},he=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ae(e,!0))},pe=function e(t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===n)throw X("Promise can't be resolved itself");var o=oe(n);o?x((function(){var i={done:!1};try{d(o,n,de(e,i,t),de(he,i,t))}catch(e){he(i,e,t)}})):(t.value=n,t.state=1,ae(t,!1))}catch(e){he({done:!1},e,t)}}};if(ne&&(j=(z=function(e){A(this,j),v(e),d(i,this);var t=G(this);try{e(de(pe,t),de(he,t))}catch(e){he(t,e)}}).prototype,(i=function(e){V(this,{type:U,done:!1,notified:!1,parent:!1,reactions:new k,rejection:!1,state:0,value:void 0})}).prototype=f(j,{then:function(e,t){var n=H(this),i=K(C(this,z));return n.parent=!0,i.ok=!b(e)||e,i.fail=b(t)&&t,i.domain=$?q.domain:void 0,0==n.state?n.reactions.add(i):x((function(){re(i,n)})),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i,t=G(e);this.promise=e,this.resolve=de(pe,t),this.reject=de(he,t)},I.f=K=function(e){return e===z||e===r?new o(e):Q(e)},!l&&b(h)&&W!==Object.prototype)){a=W.then,te||(p(W,"then",(function(e,t){var n=this;return new z((function(e,t){d(a,n,e,t)})).then(e,t)}),{unsafe:!0}),p(W,"catch",j.catch,{unsafe:!0}));try{delete W.constructor}catch(e){}g&&g(W,j)}s({global:!0,wrap:!0,forced:ne},{Promise:z}),m(z,U,!1,!0),_(U),r=u(U),s({target:U,stat:!0,forced:ne},{reject:function(e){var t=K(this);return d(t.reject,void 0,e),t.promise}}),s({target:U,stat:!0,forced:l||ne},{resolve:function(e){return M(l&&this===r?z:this,e)}}),s({target:U,stat:!0,forced:ie},{all:function(e){var t=this,n=K(t),i=n.resolve,o=n.reject,r=D((function(){var n=v(t.resolve),r=[],a=0,s=1;E(e,(function(e){var l=a++,c=!1;s++,d(n,t,e).then((function(e){c||(c=!0,r[l]=e,--s||i(r))}),o)})),--s||i(r)}));return r.error&&o(r.value),n.promise},race:function(e){var t=this,n=K(t),i=n.reject,o=D((function(){var o=v(t.resolve);E(e,(function(e){d(o,t,e).then(n.resolve,i)}))}));return o.error&&i(o.value),n.promise}})},2257:function(e,t,n){var i=n(7263),o=n(7583),r=n(8821);i({global:!0},{Reflect:{}}),r(o.Reflect,"Reflect",!0)},2129:function(e,t,n){var i=n(6389).charAt,o=n(8320),r=n(2743),a=n(9012),s="String Iterator",l=r.set,c=r.getterFor(s);a(String,"String",(function(e){l(this,{type:s,string:o(e),index:0})}),(function(){var e,t=c(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=i(n,o),t.index+=e.length,{value:e,done:!1})}))},462:function(e,t,n){n(2219)("asyncIterator")},8407:function(e,t,n){var i=n(7263),o=n(8494),r=n(7583),a=n(7386),s=n(2870),l=n(9212),c=n(2447),u=n(8320),d=n(4615).f,h=n(3478),p=r.Symbol,f=p&&p.prototype;if(o&&l(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var _="Symbol(test)"==String(p("test")),v=a(f.toString),b=a(f.valueOf),T=/^Symbol\((.*)\)[^)]+$/,A=a("".replace),y=a("".slice);d(f,"description",{configurable:!0,get:function(){var e=b(this),t=v(e);if(s(g,e))return"";var n=_?y(t,7,-1):A(t,T,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:m})}},2429:function(e,t,n){n(2219)("hasInstance")},1172:function(e,t,n){n(2219)("isConcatSpreadable")},8288:function(e,t,n){n(2219)("iterator")},2004:function(e,t,n){var i=n(7263),o=n(7583),r=n(5897),a=n(1611),s=n(8262),l=n(7386),c=n(6268),u=n(8494),d=n(8640),h=n(6544),p=n(2870),f=n(4521),g=n(9212),m=n(794),_=n(2447),v=n(5871),b=n(2569),T=n(1324),A=n(2977),y=n(8734),E=n(8320),S=n(4677),C=n(3590),w=n(5432),x=n(9275),M=n(3130),R=n(4012),I=n(6683),D=n(4615),k=n(8728),L=n(112),O=n(6917),P=n(1270),N=n(7836),$=n(9137),B=n(4639),F=n(8284),U=n(3649),G=n(491),V=n(2219),H=n(8821),W=n(2743),z=n(4805).forEach,j=$("hidden"),X="Symbol",Y=U("toPrimitive"),q=W.set,K=W.getterFor(X),Q=Object.prototype,Z=o.Symbol,J=Z&&Z.prototype,ee=o.TypeError,te=o.QObject,ne=r("JSON","stringify"),ie=I.f,oe=D.f,re=M.f,ae=L.f,se=l([].push),le=N("symbols"),ce=N("op-symbols"),ue=N("string-to-symbol-registry"),de=N("symbol-to-string-registry"),he=N("wks"),pe=!te||!te.prototype||!te.prototype.findChild,fe=u&&h((function(){return 7!=C(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=ie(Q,t);i&&delete Q[t],oe(e,t,n),i&&e!==Q&&oe(Q,t,i)}:oe,ge=function(e,t){var n=le[e]=C(J);return q(n,{type:X,tag:e,description:t}),u||(n.description=t),n},me=function(e,t,n){e===Q&&me(ce,t,n),b(e);var i=y(t);return b(n),p(le,i)?(n.enumerable?(p(e,j)&&e[j][i]&&(e[j][i]=!1),n=C(n,{enumerable:S(0,!1)})):(p(e,j)||oe(e,j,S(1,{})),e[j][i]=!0),fe(e,i,n)):oe(e,i,n)},_e=function(e,t){b(e);var n=A(t),i=w(n).concat(Ae(n));return z(i,(function(t){u&&!s(ve,n,t)||me(e,t,n[t])})),e},ve=function(e){var t=y(e),n=s(ae,this,t);return!(this===Q&&p(le,t)&&!p(ce,t))&&(!(n||!p(this,t)||!p(le,t)||p(this,j)&&this[j][t])||n)},be=function(e,t){var n=A(e),i=y(t);if(n!==Q||!p(le,i)||p(ce,i)){var o=ie(n,i);return!o||!p(le,i)||p(n,j)&&n[j][i]||(o.enumerable=!0),o}},Te=function(e){var t=re(A(e)),n=[];return z(t,(function(e){p(le,e)||p(B,e)||se(n,e)})),n},Ae=function(e){var t=e===Q,n=re(t?ce:A(e)),i=[];return z(n,(function(e){!p(le,e)||t&&!p(Q,e)||se(i,le[e])})),i};if(d||(Z=function(){if(_(J,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,t=F(e);return u&&pe&&fe(Q,t,{configurable:!0,set:function e(n){this===Q&&s(e,ce,n),p(this,j)&&p(this[j],t)&&(this[j][t]=!1),fe(this,t,S(1,n))}}),ge(t,e)},P(J=Z.prototype,"toString",(function(){return K(this).tag})),P(Z,"withoutSetter",(function(e){return ge(F(e),e)})),L.f=ve,D.f=me,k.f=_e,I.f=be,x.f=M.f=Te,R.f=Ae,G.f=function(e){return ge(U(e),e)},u&&(oe(J,"description",{configurable:!0,get:function(){return K(this).description}}),c||P(Q,"propertyIsEnumerable",ve,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Z}),z(w(he),(function(e){V(e)})),i({target:X,stat:!0,forced:!d},{for:function(e){var t=E(e);if(p(ue,t))return ue[t];var n=Z(t);return ue[t]=n,de[n]=t,n},keyFor:function(e){if(!v(e))throw ee(e+" is not a symbol");if(p(de,e))return de[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),i({target:"Object",stat:!0,forced:!d,sham:!u},{create:function(e,t){return void 0===t?C(e):_e(C(e),t)},defineProperty:me,defineProperties:_e,getOwnPropertyDescriptor:be}),i({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Te,getOwnPropertySymbols:Ae}),i({target:"Object",stat:!0,forced:h((function(){R.f(1)}))},{getOwnPropertySymbols:function(e){return R.f(T(e))}}),ne&&i({target:"JSON",stat:!0,forced:!d||h((function(){var e=Z();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}))},{stringify:function(e,t,n){var i=O(arguments),o=t;if((m(t)||void 0!==e)&&!v(e))return f(t)||(t=function(e,t){if(g(o)&&(t=s(o,this,e,t)),!v(t))return t}),i[1]=t,a(ne,null,i)}}),!J[Y]){var ye=J.valueOf;P(J,Y,(function(e){return s(ye,this)}))}H(Z,X),B[j]=!0},8201:function(e,t,n){n(2219)("matchAll")},1274:function(e,t,n){n(2219)("match")},6626:function(e,t,n){n(2219)("replace")},3211:function(e,t,n){n(2219)("search")},9952:function(e,t,n){n(2219)("species")},15:function(e,t,n){n(2219)("split")},9831:function(e,t,n){n(2219)("toPrimitive")},7521:function(e,t,n){n(2219)("toStringTag")},2972:function(e,t,n){n(2219)("unscopables")},4655:function(e,t,n){var i=n(7583),o=n(6778),r=n(9307),a=n(5677),s=n(57),l=n(3649),c=l("iterator"),u=l("toStringTag"),d=a.values,h=function(e,t){if(e){if(e[c]!==d)try{s(e,c,d)}catch(t){e[c]=d}if(e[u]||s(e,u,t),o[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(t){e[n]=a[n]}}};for(var p in o)h(i[p]&&i[p].prototype,p);h(r,"DOMTokenList")},8765:function(e,t,n){var i=n(5036);n(4655),e.exports=i},5441:function(e,t,n){var i=n(2582);n(4655),e.exports=i},7705:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&a[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},6738:function(e){e.exports=function(e){return e[1]}},8679:function(e){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=window.WeakMap;if(void 0===n){var i=Object.defineProperty,o=Date.now()%1e9;(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+o+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:i(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];if(!t)return!1;var n=t[0]===e;return t[0]=t[1]=void 0,n},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}var r=new n,a=window.msSetImmediate;if(!a){var s=[],l=String(Math.random());window.addEventListener("message",(function(e){if(e.data===l){var t=s;s=[],t.forEach((function(e){e()}))}})),a=function(e){s.push(e),window.postMessage(l,"*")}}var c=!1,u=[];function d(){c=!1;var e=u;u=[],e.sort((function(e,t){return e.uid_-t.uid_}));var t=!1;e.forEach((function(e){var n=e.takeRecords();!function(e){e.nodes_.forEach((function(t){var n=r.get(t);n&&n.forEach((function(t){t.observer===e&&t.removeTransientObservers()}))}))}(e),n.length&&(e.callback_(n,e),t=!0)})),t&&d()}function h(e,t){for(var n=e;n;n=n.parentNode){var i=r.get(n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.options;if(n===e||s.subtree){var l=t(s);l&&a.enqueue(l)}}}}var p,f,g=0;function m(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++g}function _(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function v(e,t){return p=new _(e,t)}function b(e){return f||((n=new _((t=p).type,t.target)).addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,(f=n).oldValue=e,f);var t,n}function T(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}m.prototype={observe:function(e,t){var n;if(n=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(n)||n,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var i,o=r.get(e);o||r.set(e,o=[]);for(var a=0;a<o.length;a++)if(o[a].observer===this){(i=o[a]).removeListeners(),i.options=t;break}i||(i=new T(this,e,t),o.push(i),this.nodes_.push(e)),i.addListeners()},disconnect:function(){this.nodes_.forEach((function(e){for(var t=r.get(e),n=0;n<t.length;n++){var i=t[n];if(i.observer===this){i.removeListeners(),t.splice(n,1);break}}}),this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},T.prototype={enqueue:function(e){var t,n=this.observer.records_,i=n.length;if(n.length>0){var o=function(e,t){return e===t?e:!f||(n=e)!==f&&n!==p?null:f;var n}(n[i-1],e);if(o)return void(n[i-1]=o)}else t=this.observer,u.push(t),c||(c=!0,a(d));n[i]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=r.get(e);t||r.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach((function(e){this.removeListeners_(e);for(var t=r.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}}),this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,i=e.target;(r=new v("attributes",i)).attributeName=t,r.attributeNamespace=n;var o=null;"undefined"!=typeof MutationEvent&&e.attrChange===MutationEvent.ADDITION||(o=e.prevValue),h(i,(function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?b(o):r}));break;case"DOMCharacterDataModified":var r=v("characterData",i=e.target);o=e.prevValue,h(i,(function(e){if(e.characterData)return e.characterDataOldValue?b(o):r}));break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":i=e.relatedNode;var a,s,l=e.target;"DOMNodeInserted"===e.type?(a=[l],s=[]):(a=[],s=[l]);var c=l.previousSibling,u=l.nextSibling;(r=v("childList",i)).addedNodes=a,r.removedNodes=s,r.previousSibling=c,r.nextSibling=u,h(i,(function(e){if(e.childList)return r}))}p=f=void 0}},t||(t=m),e.exports=t},7588:function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof m?t:m,r=Object.create(o.prototype),a=new M(i||[]);return r._invoke=function(e,t,n){var i=d;return function(o,r){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===o)throw r;return I()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?f:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}(e,n,a),r}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={};function m(){}function _(){}function v(){}var b={};l(b,r,(function(){return this}));var T=Object.getPrototypeOf,A=T&&T(T(R([])));A&&A!==n&&i.call(A,r)&&(b=A);var y=v.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,r,a,s){var l=u(e[o],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;this._invoke=function(e,i){function r(){return new t((function(t,o){n(e,i,t,o)}))}return o=o?o.then(r,r):r()}}function C(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=u(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function R(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return _.prototype=v,l(y,"constructor",v),l(v,"constructor",_),_.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new S(c(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(y),l(y,s,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=R,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:R(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},8702:function(e,t,n){n.d(t,{Z:function(){return N}});var i=n(4296),o=n(6464),r=n(6881),a=n(2942),s=n(7003),l=n(3379),c=n.n(l),u=n(7795),d=n.n(u),h=n(569),p=n.n(h),f=n(3565),g=n.n(f),m=n(9216),_=n.n(m),v=n(4589),b=n.n(v),T=n(5313),A={};T.Z&&T.Z.locals&&(A.locals=T.Z.locals);var y,E=0,S={};S.styleTagTransform=b(),S.setAttributes=g(),S.insert=p().bind(null,"head"),S.domAPI=d(),S.insertStyleElement=_(),A.use=function(e){return S.options=e||{},E++||(y=c()(T.Z,S)),A},A.unuse=function(){E>0&&! --E&&(y(),y=null)};var C=A;function w(e){var t,n;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),(0,a.Ljt)(n,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,a.Ljt)(t,"class","vc-icon-delete"),(0,a.Ljt)(t,"viewBox","0 0 1024 1024"),(0,a.Ljt)(t,"width","200"),(0,a.Ljt)(t,"height","200")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function x(e){var t,n,i;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),i=(0,a.bi5)("path"),(0,a.Ljt)(n,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,a.Ljt)(i,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,a.Ljt)(t,"viewBox","0 0 1024 1024"),(0,a.Ljt)(t,"width","200"),(0,a.Ljt)(t,"height","200")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.R3I)(t,n),(0,a.R3I)(t,i)},d:function(e){e&&(0,a.ogt)(t)}}}function M(e){var t,n;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),(0,a.Ljt)(n,"fill-rule","evenodd"),(0,a.Ljt)(n,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,a.Ljt)(t,"class","vc-icon-copy"),(0,a.Ljt)(t,"viewBox","0 0 16 16")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function R(e){var t,n;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),(0,a.Ljt)(n,"fill-rule","evenodd"),(0,a.Ljt)(n,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,a.Ljt)(t,"class","vc-icon-suc"),(0,a.Ljt)(t,"viewBox","0 0 16 16")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function I(e){var t,n,i;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),i=(0,a.bi5)("path"),(0,a.Ljt)(n,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,a.Ljt)(i,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,a.Ljt)(t,"class","vc-icon-edit"),(0,a.Ljt)(t,"viewBox","0 0 1024 1024"),(0,a.Ljt)(t,"width","200"),(0,a.Ljt)(t,"height","200")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.R3I)(t,n),(0,a.R3I)(t,i)},d:function(e){e&&(0,a.ogt)(t)}}}function D(e){var t,n;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),(0,a.Ljt)(n,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,a.Ljt)(t,"class","vc-icon-don"),(0,a.Ljt)(t,"viewBox","0 0 1501 1024"),(0,a.Ljt)(t,"width","200"),(0,a.Ljt)(t,"height","200")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function k(e){var t,n;return{c:function(){t=(0,a.bi5)("svg"),n=(0,a.bi5)("path"),(0,a.Ljt)(n,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,a.Ljt)(t,"class","vc-icon-cancel"),(0,a.Ljt)(t,"viewBox","0 0 1024 1024"),(0,a.Ljt)(t,"width","200"),(0,a.Ljt)(t,"height","200")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function L(e){var t,n,i,o,r,s,l,c,u,d="delete"===e[0]&&w(),h="clear"===e[0]&&x(),p="copy"===e[0]&&M(),f="success"===e[0]&&R(),g="edit"===e[0]&&I(),m="done"===e[0]&&D(),_="cancel"===e[0]&&k();return{c:function(){t=(0,a.bGB)("i"),d&&d.c(),n=(0,a.DhX)(),h&&h.c(),i=(0,a.DhX)(),p&&p.c(),o=(0,a.DhX)(),f&&f.c(),r=(0,a.DhX)(),g&&g.c(),s=(0,a.DhX)(),m&&m.c(),l=(0,a.DhX)(),_&&_.c(),(0,a.Ljt)(t,"class","vc-icon")},m:function(v,b){(0,a.$Tr)(v,t,b),d&&d.m(t,null),(0,a.R3I)(t,n),h&&h.m(t,null),(0,a.R3I)(t,i),p&&p.m(t,null),(0,a.R3I)(t,o),f&&f.m(t,null),(0,a.R3I)(t,r),g&&g.m(t,null),(0,a.R3I)(t,s),m&&m.m(t,null),(0,a.R3I)(t,l),_&&_.m(t,null),c||(u=(0,a.oLt)(t,"click",e[1]),c=!0)},p:function(e,a){a[0],"delete"===e[0]?d||((d=w()).c(),d.m(t,n)):d&&(d.d(1),d=null),"clear"===e[0]?h||((h=x()).c(),h.m(t,i)):h&&(h.d(1),h=null),"copy"===e[0]?p||((p=M()).c(),p.m(t,o)):p&&(p.d(1),p=null),"success"===e[0]?f||((f=R()).c(),f.m(t,r)):f&&(f.d(1),f=null),"edit"===e[0]?g||((g=I()).c(),g.m(t,s)):g&&(g.d(1),g=null),"done"===e[0]?m||((m=D()).c(),m.m(t,l)):m&&(m.d(1),m=null),"cancel"===e[0]?_||((_=k()).c(),_.m(t,null)):_&&(_.d(1),_=null)},i:a.ZTd,o:a.ZTd,d:function(e){e&&(0,a.ogt)(t),d&&d.d(),h&&h.d(),p&&p.d(),f&&f.d(),g&&g.d(),m&&m.d(),_&&_.d(),c=!1,u()}}}function O(e,t,n){var i=t.name;return(0,s.H3)((function(){C.use()})),(0,s.ev)((function(){C.unuse()})),e.$$set=function(e){"name"in e&&n(0,i=e.name)},[i,function(t){a.cKT.call(this,e,t)}]}var P=function(e){function t(t){var n;return n=e.call(this)||this,(0,a.S1n)((0,o.Z)(n),t,O,L,a.N8,{name:0}),n}return(0,r.Z)(t,e),(0,i.Z)(t,[{key:"name",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({name:e}),(0,a.yl1)()}}]),t}(a.f_C),N=P},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6464),_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6881),svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2942),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8702),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function get_each_context(e,t,n){var i=e.slice();return i[28]=t[n],i}function create_if_block_2(e){var t,n,i;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"class","vc-cmd-prompted-hide")},m:function(o,r){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(o,t,r),n||(i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(t,"click",e[5]),n=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t),n=!1,i()}}}function create_else_block(e){var t;return{c:function(){(t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="No Prompted"},m:function(e,n){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(e,t,n)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t)}}}function create_each_block(e){var t,n,i,o,r=e[28].text+"";function a(){return e[14](e[28])}return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li"),n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fLW)(r)},m:function(e,r){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(e,t,r),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,n),i||(o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(t,"click",a),i=!0)},p:function(t,i){e=t,8&i&&r!==(r=e[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rTO)(n,r)},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t),i=!1,o()}}}function create_if_block_1(e){var t,n,i,o,r;return n=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(n.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"class","vc-cmd-clear-btn")},m:function(a,s){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(a,t,s),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(n,t,null),i=!0,o||(r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(e[17])),o=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(e){i||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(n.$$.fragment,e),i=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(n.$$.fragment,e),i=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(n),o=!1,r()}}}function create_if_block(e){var t,n,i,o,r;return n=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(n.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"class","vc-cmd-clear-btn")},m:function(a,s){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(a,t,s),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(n,t,null),i=!0,o||(r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(t,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(e[19])),o=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(e){i||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(n.$$.fragment,e),i=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(n.$$.fragment,e),i=!1},d:function(e){e&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(n),o=!1,r()}}}function create_fragment(e){for(var t,n,i,o,r,a,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y=e[3].length>0&&create_if_block_2(e),E=e[3],S=[],C=0;C<E.length;C+=1)S[C]=create_each_block(get_each_context(e,E,C));var w=null;E.length||(w=create_else_block());var x=e[1].length>0&&create_if_block_1(e),M=e[4].length>0&&create_if_block(e);return{c:function(){t=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),n=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),y&&y.c(),i=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)();for(var b=0;b<S.length;b+=1)S[b].c();w&&w.c(),o=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),r=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),a=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),s=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),x&&x.c(),l=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(c=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="OK",u=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),d=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),h=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),p=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),f=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),g=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),m=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),M&&M.c(),_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(v=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="Filter",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"style",e[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(a,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(a,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(r,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(c,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(c,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(t,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(h,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(g,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(g,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(f,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(v,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(v,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(d,"class","vc-cmd vc-filter")},m:function(E,C){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(E,t,C),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,n),y&&y.m(n,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(n,i);for(var R=0;R<S.length;R+=1)S[R].m(n,null);w&&w.m(n,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,o),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,r),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(r,a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(a,e[1]),e[16](a),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(r,s),x&&x.m(r,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,l),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(t,c),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(E,u,C),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(E,d,C),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(d,h),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(d,p),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(d,f),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(f,g),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(g,e[4]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(f,m),M&&M.m(f,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(d,_),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(d,v),b=!0,T||(A=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(a,"input",e[15]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(a,"keydown",e[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(a,"keyup",e[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(a,"focus",e[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(a,"blur",e[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(t,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(e[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(g,"input",e[18]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(d,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(e[13]))],T=!0)},p:function(e,t){var o=t[0];if(e[3].length>0?y?y.p(e,o):((y=create_if_block_2(e)).c(),y.m(n,i)):y&&(y.d(1),y=null),136&o){var s;for(E=e[3],s=0;s<E.length;s+=1){var l=get_each_context(e,E,s);S[s]?S[s].p(l,o):(S[s]=create_each_block(l),S[s].c(),S[s].m(n,null))}for(;s<S.length;s+=1)S[s].d(1);S.length=E.length,!E.length&&w?w.p(e,o):E.length?w&&(w.d(1),w=null):((w=create_else_block()).c(),w.m(n,null))}(!b||4&o)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(n,"style",e[2]),2&o&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(a,e[1]),e[1].length>0?x?(x.p(e,o),2&o&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(x,1)):((x=create_if_block_1(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(x,1),x.m(r,null)):x&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(x,1,1,(function(){x=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()),16&o&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(g,e[4]),e[4].length>0?M?(M.p(e,o),16&o&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(M,1)):((M=create_if_block(e)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(M,1),M.m(f,null)):M&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(M,1,1,(function(){M=null})),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)())},i:function(e){b||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(x),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(M),b=!0)},o:function(e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(x),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(M),b=!1},d:function(n){n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(t),y&&y.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RMB)(S,n),w&&w.d(),e[16](null),x&&x.d(),n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(u),n&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(d),M&&M.d(),T=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7q)(A)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()})),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)((function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()}));var evalCommand=function(e){module.evalCommand(e)},moveCursorToPos=function(e,t){e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(t,t)}),1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(""!==cmdValue){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if("."!==identifier.front.text&&"["!==identifier.front.text||(objName=identifier.front.before,keyName=""!==identifier.back.text?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(t){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;"."===identifier.front.text||""===identifier.front.text?completeCmd+="."+key:"["===identifier.front.text&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(t){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(e,t){if(8!==t&&46!==t&&""===e.front.after)switch(e.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(e){"cmd"===e?($$invalidate(1,cmdValue=""),clearPromptedList()):"filter"===e&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(t){}$$invalidate(1,cmdValue=item.value+("function"===type?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(e){13===e.keyCode&&(e.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(e){$$invalidate(3,promptedList=[]);var t=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(e.target.value);autoCompleteBrackets(t,e.keyCode),updatePromptedList(t)},onCmdSubmit=function(){""!==cmdValue&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(e){dispatchFilterEvent()},click_handler=function(e){return onTapPromptedItem(e)};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(e){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[e?"unshift":"push"]((function(){$$invalidate(0,cmdElement=e)}))}var click_handler_1=function(){return onTapClearText("cmd")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}var click_handler_2=function(){return onTapClearText("filter")};return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,textarea0_input_handler,textarea0_binding,click_handler_1,textarea1_input_handler,click_handler_2]}var LogCommand=function(e){function t(t){var n;return n=e.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1n)((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)(n),t,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),n}return(0,_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__.Z)(t,e),t}(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_C);__webpack_exports__.Z=LogCommand},4687:function(e,t,n){n.d(t,{x:function(){return o}});var i=n(3313),o=function(){var e=(0,i.fZ)({updateTime:0}),t=e.subscribe,n=e.set,o=e.update;return{subscribe:t,set:n,update:o,updateTime:function(){o((function(e){return e.updateTime=Date.now(),e}))}}}()},643:function(e,t,n){n.d(t,{N:function(){return i}});var i=function(){function e(){this._onDataUpdateCallbacks=[]}return e.getSingleton=function(t,n){return n||(n=t.toString()),e.singleton[n]||(e.singleton[n]=new t),e.singleton[n]},e}();i.singleton={}},5103:function(e,t,n){function i(e){var t=e>0?new Date(e):new Date,n=t.getDate()<10?"0"+t.getDate():t.getDate(),i=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getFullYear(),r=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),l=t.getMilliseconds()<10?"0"+t.getMilliseconds():t.getMilliseconds();return l<100&&(l="0"+l),{time:+t,year:o,month:i,day:n,hour:r,minute:a,second:s,millisecond:l}}function o(e){return"[object Number]"===Object.prototype.toString.call(e)}function r(e){return"bigint"==typeof e}function a(e){return"string"==typeof e}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){return"boolean"==typeof e}function c(e){return void 0===e}function u(e){return null===e}function d(e){return"symbol"==typeof e}function h(e){return!("[object Object]"!==Object.prototype.toString.call(e)&&(o(e)||r(e)||a(e)||l(e)||s(e)||u(e)||p(e)||c(e)||d(e)))}function p(e){return"function"==typeof e}function f(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function g(e){var t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object DOMWindow]"===t||"[object global]"===t}function m(e){return null!=e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e&&"bigint"!=typeof e&&"undefined"!=typeof Symbol&&"function"==typeof e[Symbol.iterator]}function _(e){return Object.prototype.toString.call(e).replace(/\[object (.*)\]/,"$1")}n.d(t,{C4:function(){return r},DV:function(){return b},FJ:function(){return g},Ft:function(){return u},HD:function(){return a},H_:function(){return $},KL:function(){return x},Kn:function(){return h},MH:function(){return D},PO:function(){return T},QI:function(){return N},QK:function(){return k},TW:function(){return m},_3:function(){return i},_D:function(){return L},cF:function(){return P},hZ:function(){return w},hj:function(){return o},id:function(){return M},jn:function(){return l},kJ:function(){return s},kK:function(){return f},mf:function(){return p},o8:function(){return c},po:function(){return O},qr:function(){return I},qt:function(){return B},rE:function(){return E},yk:function(){return d},zl:function(){return _}});var v=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function b(e){var t;if(null==e)return"";var n=v.exec((null==e||null==(t=e.constructor)?void 0:t.toString())||"");return n&&n.length>1?n[2]:""}function T(e){var t,n=Object.prototype.hasOwnProperty;if(!e||"object"!=typeof e||e.nodeType||g(e))return!1;try{if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||n.call(e,t)}var A=/[\n\t]/g,y=function(e){return{"\n":"\\n","\t":"\\t"}[e]};function E(e){return"string"!=typeof e?e:String(e).replace(A,y)}var S=function(e,t){void 0===t&&(t=0);var n="";return a(e)?(t>0&&(e=M(e,t)),n+='"'+E(e)+'"'):d(e)?n+=String(e).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):p(e)?n+=(e.name||"function")+"()":r(e)?n+=String(e)+"n":n+=String(e),n},C=function e(t,n,i){if(void 0===i&&(i=0),h(t)||s(t))if(n.circularFinder(t)){var o="";if(s(t))o="(Circular Array)";else if(h(t)){var r;o="(Circular "+((null==(r=t.constructor)?void 0:r.name)||"Object")+")"}n.ret+=n.standardJSON?'"'+o+'"':o}else{var l="",c="";if(n.pretty){for(var u=0;u<=i;u++)l+="  ";c="\n"}var p="{",f="}";s(t)&&(p="[",f="]"),n.ret+=p+c;for(var g=D(t),m=0;m<g.length;m++){var _=g[m];n.ret+=l;try{s(t)||(h(_)||s(_)||d(_)?n.ret+=Object.prototype.toString.call(_):a(_)&&n.standardJSON?n.ret+='"'+_+'"':n.ret+=_,n.ret+=": ")}catch(e){continue}try{var v=t[_];if(s(v))n.maxDepth>-1&&i>=n.maxDepth?n.ret+="Array("+v.length+")":e(v,n,i+1);else if(h(v)){var b;n.maxDepth>-1&&i>=n.maxDepth?n.ret+=((null==(b=v.constructor)?void 0:b.name)||"Object")+" {}":e(v,n,i+1)}else n.ret+=S(v,n.keyMaxLen)}catch(e){n.ret+=n.standardJSON?'"(PARSE_ERROR)"':"(PARSE_ERROR)"}if(n.keyMaxLen>0&&n.ret.length>=10*n.keyMaxLen){n.ret+=", (...)";break}m<g.length-1&&(n.ret+=", "),n.ret+=c}n.ret+=l.substring(0,l.length-2)+f}else n.ret+=S(t,n.keyMaxLen)};function w(e,t){void 0===t&&(t={maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1});var n,i=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1,circularFinder:(n=new WeakSet,function(e){if("object"==typeof e&&null!==e){if(n.has(e))return!0;n.add(e)}return!1})},t);return C(e,i),i.ret}function x(e){return e<=0?"":e>=1e6?(e/1e3/1e3).toFixed(1)+" MB":e>=1e3?(e/1e3).toFixed(1)+" KB":e+" B"}function M(e,t){return e.length>t&&(e=e.substring(0,t)+"...("+x(function(e){try{return encodeURI(e).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch(e){return 0}}(e))+")"),e}var R=function(e,t){return String(e).localeCompare(String(t),void 0,{numeric:!0,sensitivity:"base"})};function I(e){return e.sort(R)}function D(e){return h(e)||s(e)?Object.keys(e):[]}function k(e){var t=D(e),n=function(e){return h(e)||s(e)?Object.getOwnPropertyNames(e):[]}(e);return n.filter((function(e){return-1===t.indexOf(e)}))}function L(e){return h(e)||s(e)?Object.getOwnPropertySymbols(e):[]}function O(e,t){window.localStorage&&(e="vConsole_"+e,localStorage.setItem(e,t))}function P(e){if(window.localStorage)return e="vConsole_"+e,localStorage.getItem(e)}function N(e){return void 0===e&&(e=""),"__vc_"+e+Math.random().toString(36).substring(2,8)}function $(){return"undefined"!=typeof window&&!!window.__wxConfig&&!!window.wx&&!!window.__virtualDOM__}function B(e){if($()&&"function"==typeof window.wx[e])try{for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(t=window.wx[e]).call.apply(t,[window.wx].concat(i))}catch(t){return void console.debug("[vConsole] Fail to call wx."+e+"():",t)}}},5629:function(e,t,n){n.d(t,{W:function(){return f}});var i=n(8270),o=n(6881),r=n(5103),a=n(643),s=n(4687),l=n(8665),c=n(9923);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).LOG_METHODS=["log","info","warn","debug","error"],t.ADDED_LOG_PLUGIN_ID=[],t.maxLogNumber=1e3,t.logCounter=0,t.groupLevel=0,t.groupLabelCollapsedStack=[],t.pluginPattern=void 0,t.logQueue=[],t.flushLogScheduled=!1,t.origConsole={},t}(0,o.Z)(t,e);var n=t.prototype;return n.bindPlugin=function(e){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(e)>-1||(0===this.ADDED_LOG_PLUGIN_ID.length&&this.mockConsole(),c.O.create(e),this.ADDED_LOG_PLUGIN_ID.push(e),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),0))},n.unbindPlugin=function(e){var t=this.ADDED_LOG_PLUGIN_ID.indexOf(e);return-1!==t&&(this.ADDED_LOG_PLUGIN_ID.splice(t,1),c.O.delete(e),0===this.ADDED_LOG_PLUGIN_ID.length&&this.unmockConsole(),!0)},n.mockConsole=function(){var e=this;"function"!=typeof this.origConsole.log&&(window.console?(this.LOG_METHODS.map((function(t){e.origConsole[t]=window.console[t]})),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear,this.origConsole.group=window.console.group,this.origConsole.groupCollapsed=window.console.groupCollapsed,this.origConsole.groupEnd=window.console.groupEnd):window.console={},this._mockConsoleLog(),this._mockConsoleTime(),this._mockConsoleGroup(),this._mockConsoleClear(),window._vcOrigConsole=this.origConsole)},n._mockConsoleLog=function(){var e=this;this.LOG_METHODS.map((function(t){window.console[t]=function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e.addLog({type:t,origData:i||[]})}.bind(window.console)}))},n._mockConsoleTime=function(){var e=this,t={};window.console.time=function(e){void 0===e&&(e=""),t[e]=Date.now()}.bind(window.console),window.console.timeEnd=function(n){void 0===n&&(n="");var i=t[n],o=0;i&&(o=Date.now()-i,delete t[n]),e.addLog({type:"log",origData:[n+": "+o+"ms"]})}.bind(window.console)},n._mockConsoleGroup=function(){var e=this,t=function(t){return function(n){void 0===n&&(n="console.group");var i=Symbol(n);e.groupLabelCollapsedStack.push({label:i,collapsed:t}),e.addLog({type:"log",origData:[n],isGroupHeader:t?2:1,isGroupCollapsed:!1},{noOrig:!0}),e.groupLevel++,t?e.origConsole.groupCollapsed(n):e.origConsole.group(n)}.bind(window.console)};window.console.group=t(!1),window.console.groupCollapsed=t(!0),window.console.groupEnd=function(){e.groupLabelCollapsedStack.pop(),e.groupLevel=Math.max(0,e.groupLevel-1),e.origConsole.groupEnd()}.bind(window.console)},n._mockConsoleClear=function(){var e=this;window.console.clear=function(){e.resetGroup(),e.clearLog();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.callOriginalConsole.apply(e,["clear"].concat(n))}.bind(window.console)},n.unmockConsole=function(){for(var e in this.origConsole)window.console[e]=this.origConsole[e],delete this.origConsole[e];window._vcOrigConsole&&delete window._vcOrigConsole},n.callOriginalConsole=function(e){if("function"==typeof this.origConsole[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.origConsole[e].apply(window.console,n)}},n.resetGroup=function(){for(;this.groupLevel>0;)console.groupEnd()},n.clearLog=function(){var e=c.O.getAll();for(var t in e)this.clearPluginLog(t)},n.clearPluginLog=function(e){var t=this.logQueue;this.logQueue=[];for(var n,i=h(t);!(n=i()).done;){var o=n.value;this._extractPluginIdByLog(o)!==e&&this.logQueue.push(o)}c.O.get(e).update((function(e){return e.logList.length=0,e})),s.x.updateTime()},n.addLog=function(e,t){void 0===e&&(e={type:"log",origData:[],isGroupHeader:0,isGroupCollapsed:!1});var n=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-2],i=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-1],o={_id:r.QI(),type:e.type,cmdType:null==t?void 0:t.cmdType,toggle:{},date:Date.now(),data:(0,l.b1)(e.origData||[]),repeated:0,groupLabel:null==i?void 0:i.label,groupLevel:this.groupLevel,groupHeader:e.isGroupHeader,groupCollapsed:e.isGroupHeader?!(null==n||!n.collapsed):!(null==i||!i.collapsed)};this._signalLog(o),null!=t&&t.noOrig||this.callOriginalConsole.apply(this,[e.type].concat(e.origData))},n.evalCommand=function(e){this.addLog({type:"log",origData:[e]},{cmdType:"input"});var t=void 0;try{t=eval.call(window,"("+e+")")}catch(n){try{t=eval.call(window,e)}catch(e){}}this.addLog({type:"log",origData:[t]},{cmdType:"output"})},n._signalLog=function(e){var t=this;this.flushLogScheduled||(this.flushLogScheduled=!0,window.requestAnimationFrame((function(){t.flushLogScheduled=!1,t._flushLogs()}))),this.logQueue.push(e)},n._flushLogs=function(){var e=this,t=this.logQueue;this.logQueue=[];for(var n,i={},o=h(t);!(n=o()).done;){var r=n.value,a=this._extractPluginIdByLog(r);(i[a]=i[a]||[]).push(r)}for(var l=function(t){var n=i[t];c.O.get(t).update((function(t){for(var i,o=[].concat(t.logList),r=h(n);!(i=r()).done;){var a=i.value;e._isRepeatedLog(o,a)?e._updateLastLogRepeated(o):o.push(a)}return{logList:o=e._limitLogListLength(o)}}))},u=0,d=Object.keys(i);u<d.length;u++)l(d[u]);s.x.updateTime()},n._extractPluginIdByLog=function(e){var t,n="default",i=null==(t=e.data[0])?void 0:t.origData;if(r.HD(i)){var o=i.match(this.pluginPattern);if(null!==o&&o.length>1){var a=o[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(a)>-1&&(n=a,e.data.shift())}}return n},n._isRepeatedLog=function(e,t){var n=e[e.length-1];if(!n)return!1;var i=!1;if(t.type===n.type&&t.cmdType===n.cmdType&&t.data.length===n.data.length){i=!0;for(var o=0;o<t.data.length;o++)if(t.data[o].origData!==n.data[o].origData){i=!1;break}}return i},n._updateLastLogRepeated=function(e){var t=e[e.length-1],n=t.repeated?t.repeated+1:2;return e[e.length-1]=d(d({},t),{},{repeated:n}),e},n._limitLogListLength=function(e){var t=e.length,n=this.maxLogNumber;return t>n?e.slice(t-n,t):e},t}(a.N)},9923:function(e,t,n){n.d(t,{O:function(){return o}});var i=n(3313),o=function(){function e(){}return e.create=function(e){return this.storeMap[e]||(this.storeMap[e]=(0,i.fZ)({logList:[]})),this.storeMap[e]},e.delete=function(e){this.storeMap[e]&&delete this.storeMap[e]},e.get=function(e){return this.storeMap[e]},e.getRaw=function(e){return(0,i.U2)(this.storeMap[e])},e.getAll=function(){return this.storeMap},e}();o.storeMap={}},8665:function(e,t,n){n.d(t,{HX:function(){return u},LH:function(){return r},Tg:function(){return p},b1:function(){return h},oj:function(){return c}});var i=n(5103),o=function(e){var t=i.hZ(e,{maxDepth:0}),n=t.substring(0,36),o=i.DV(e);return t.length>36&&(n+="..."),i.rE(o+" "+n)},r=function(e,t){void 0===t&&(t=!0);var n="undefined",r=e;return e instanceof p?(n="uninvocatable",r="(...)"):i.kJ(e)?(n="array",r=o(e)):i.Kn(e)?(n="object",r=o(e)):i.HD(e)?(n="string",r=i.rE(e),t&&(r='"'+r+'"')):i.hj(e)?(n="number",r=String(e)):i.C4(e)?(n="bigint",r=String(e)+"n"):i.jn(e)?(n="boolean",r=String(e)):i.Ft(e)?(n="null",r="null"):i.o8(e)?(n="undefined",r="undefined"):i.mf(e)?(n="function",r=(e.name||"function")+"()"):i.yk(e)&&(n="symbol",r=String(e)),{text:r,valueType:n}},a=[".","[","(","{","}"],s=["]",")","}"],l=function(e,t,n){void 0===n&&(n=0);for(var i={text:"",pos:-1,before:"",after:""},o=e.length-1;o>=n;o--){var r=t.indexOf(e[o]);if(r>-1){i.text=t[r],i.pos=o,i.before=e.substring(n,o),i.after=e.substring(o+1,e.length);break}}return i},c=function(e){var t=l(e,a,0);return{front:t,back:l(e,s,t.pos+1)}},u=function(e,t){if(""===t)return!0;for(var n=0;n<e.data.length;n++)if("string"==typeof e.data[n].origData&&e.data[n].origData.indexOf(t)>-1)return!0;return!1},d=/(\%[csdo] )|( \%[csdo])/g,h=function(e){if(d.lastIndex=0,i.HD(e[0])&&d.test(e[0])){for(var t,n=[].concat(e),o=n.shift().split(d).filter((function(e){return void 0!==e&&""!==e})),r=n,a=[],s=!1,l="";o.length>0;){var c=o.shift();if(/ ?\%c ?/.test(c)?r.length>0?"string"!=typeof(l=r.shift())&&(l=""):(t=c,l="",s=!0):/ ?\%[sd] ?/.test(c)?(t=r.length>0?i.Kn(r[0])?i.DV(r.shift()):String(r.shift()):c,s=!0):/ ?\%o ?/.test(c)?(t=r.length>0?r.shift():c,s=!0):(t=c,s=!0),s){var u={origData:t};l&&(u.style=l),a.push(u),s=!1,t=void 0,l=""}}for(var h=0;h<r.length;h++)a.push({origData:r[h]});return a}for(var p=[],f=0;f<e.length;f++)p.push({origData:e[f]});return p},p=function(){}},5313:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-icon {\n  word-break: normal;\n  white-space: normal;\n  overflow: visible;\n}\n.vc-icon svg {\n  fill: var(--VC-FG-2);\n  height: 1em;\n  width: 1em;\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-delete {\n  vertical-align: -0.11em;\n}\n.vc-icon .vc-icon-copy {\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n.vc-icon .vc-icon-suc {\n  fill: var(--VC-TEXTGREEN);\n  height: 1.1em;\n  width: 1.1em;\n  vertical-align: -0.16em;\n}\n",""]),t.Z=a},1142:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-scroller-viewport {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n}\n.vc-scroller-contents {\n  min-height: 100%;\n  will-change: transform;\n}\n.vc-scroller-items {\n  will-change: height;\n  position: relative;\n}\n.vc-scroller-item {\n  display: none;\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n.vc-scroller-viewport.static .vc-scroller-item {\n  display: block;\n  position: static;\n}\n.vc-scroller-scrollbar-track {\n  width: 4px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding: 1px;\n}\n.vc-scroller-scrollbar-thumb {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 999px;\n}\n",""]),t.Z=a},3283:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,'#__vconsole {\n  --VC-BG-0: #ededed;\n  --VC-BG-1: #f7f7f7;\n  --VC-BG-2: #fff;\n  --VC-BG-3: #f7f7f7;\n  --VC-BG-4: #4c4c4c;\n  --VC-BG-5: #fff;\n  --VC-BG-6: rgba(0, 0, 0, 0.1);\n  --VC-FG-0: rgba(0, 0, 0, 0.9);\n  --VC-FG-HALF: rgba(0, 0, 0, 0.9);\n  --VC-FG-1: rgba(0, 0, 0, 0.5);\n  --VC-FG-2: rgba(0, 0, 0, 0.3);\n  --VC-FG-3: rgba(0, 0, 0, 0.1);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #fa9d3b;\n  --VC-YELLOW: #ffc300;\n  --VC-GREEN: #91d300;\n  --VC-LIGHTGREEN: #95ec69;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1485ee;\n  --VC-PURPLE: #6467f0;\n  --VC-LINK: #576b95;\n  --VC-TEXTGREEN: #06ae56;\n  --VC-FG: black;\n  --VC-BG: white;\n  --VC-BG-COLOR-ACTIVE: #ececec;\n  --VC-WARN-BG: #fff3cc;\n  --VC-WARN-BORDER: #ffe799;\n  --VC-ERROR-BG: #fedcdc;\n  --VC-ERROR-BORDER: #fdb9b9;\n  --VC-DOM-TAG-NAME-COLOR: #881280;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;\n  --VC-CODE-KEY-FG: #881391;\n  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;\n  --VC-CODE-FUNC-FG: #0d22aa;\n  --VC-CODE-NUMBER-FG: #1c00cf;\n  --VC-CODE-STR-FG: #c41a16;\n  --VC-CODE-NULL-FG: #808080;\n  color: var(--VC-FG-0);\n  font-size: 13px;\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n  -webkit-user-select: auto;\n  /* global */\n}\n#__vconsole .vc-max-height {\n  max-height: 19.23076923em;\n}\n#__vconsole .vc-max-height-line {\n  max-height: 6.30769231em;\n}\n#__vconsole .vc-min-height {\n  min-height: 3.07692308em;\n}\n#__vconsole dd,\n#__vconsole dl,\n#__vconsole pre {\n  margin: 0;\n}\n#__vconsole pre {\n  white-space: pre-wrap;\n}\n#__vconsole i {\n  font-style: normal;\n}\n.vc-table {\n  height: 100%;\n}\n.vc-table .vc-table-row {\n  line-height: 1.5;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  overflow: hidden;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row.vc-left-border {\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-table .vc-table-row-icon {\n  margin-left: 4px;\n}\n.vc-table .vc-table-col {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  padding: 0.23076923em 0.30769231em;\n  border-left: 1px solid var(--VC-FG-3);\n  overflow: auto;\n}\n.vc-table .vc-table-col:first-child {\n  border: none;\n}\n.vc-table .vc-table-col-value {\n  white-space: pre-wrap;\n  word-break: break-word;\n  /*white-space: nowrap;\n    text-overflow: ellipsis;*/\n  -webkit-overflow-scrolling: touch;\n}\n.vc-table .vc-small .vc-table-col {\n  padding: 0 0.30769231em;\n  font-size: 0.92307692em;\n}\n.vc-table .vc-table-col-2 {\n  -webkit-box-flex: 2;\n  -webkit-flex: 2;\n  -moz-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n}\n.vc-table .vc-table-col-3 {\n  -webkit-box-flex: 3;\n  -webkit-flex: 3;\n  -moz-box-flex: 3;\n  -ms-flex: 3;\n  flex: 3;\n}\n.vc-table .vc-table-col-4 {\n  -webkit-box-flex: 4;\n  -webkit-flex: 4;\n  -moz-box-flex: 4;\n  -ms-flex: 4;\n  flex: 4;\n}\n.vc-table .vc-table-col-5 {\n  -webkit-box-flex: 5;\n  -webkit-flex: 5;\n  -moz-box-flex: 5;\n  -ms-flex: 5;\n  flex: 5;\n}\n.vc-table .vc-table-col-6 {\n  -webkit-box-flex: 6;\n  -webkit-flex: 6;\n  -moz-box-flex: 6;\n  -ms-flex: 6;\n  flex: 6;\n}\n.vc-table .vc-table-row-error {\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-table .vc-table-row-error .vc-table-col {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n}\n.vc-table .vc-table-col-title {\n  font-weight: bold;\n}\n.vc-table .vc-table-action {\n  display: flex;\n  justify-content: space-evenly;\n}\n.vc-table .vc-table-action .vc-icon {\n  flex: 1;\n  text-align: center;\n  display: block;\n}\n.vc-table .vc-table-action .vc-icon:hover {\n  background: var(--VC-BG-3);\n}\n.vc-table .vc-table-action .vc-icon:active {\n  background: var(--VC-BG-1);\n}\n.vc-table .vc-table-input {\n  width: 100%;\n  border: none;\n  color: var(--VC-FG-0);\n  background-color: var(--VC-BG-6);\n  height: 3.53846154em;\n}\n.vc-table .vc-table-input:focus {\n  background-color: var(--VC-FG-2);\n}\n@media (prefers-color-scheme: dark) {\n  #__vconsole:not([data-theme="light"]) {\n    --VC-BG-0: #191919;\n    --VC-BG-1: #1f1f1f;\n    --VC-BG-2: #232323;\n    --VC-BG-3: #2f2f2f;\n    --VC-BG-4: #606060;\n    --VC-BG-5: #2c2c2c;\n    --VC-BG-6: rgba(255, 255, 255, 0.2);\n    --VC-FG-0: rgba(255, 255, 255, 0.8);\n    --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n    --VC-FG-1: rgba(255, 255, 255, 0.5);\n    --VC-FG-2: rgba(255, 255, 255, 0.3);\n    --VC-FG-3: rgba(255, 255, 255, 0.05);\n    --VC-RED: #fa5151;\n    --VC-ORANGE: #c87d2f;\n    --VC-YELLOW: #cc9c00;\n    --VC-GREEN: #74a800;\n    --VC-LIGHTGREEN: #28b561;\n    --VC-BRAND: #07c160;\n    --VC-BLUE: #10aeff;\n    --VC-INDIGO: #1196ff;\n    --VC-PURPLE: #8183ff;\n    --VC-LINK: #7d90a9;\n    --VC-TEXTGREEN: #259c5c;\n    --VC-FG: white;\n    --VC-BG: black;\n    --VC-BG-COLOR-ACTIVE: #282828;\n    --VC-WARN-BG: #332700;\n    --VC-WARN-BORDER: #664e00;\n    --VC-ERROR-BG: #321010;\n    --VC-ERROR-BORDER: #642020;\n    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n    --VC-CODE-KEY-FG: #e36eec;\n    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n    --VC-CODE-FUNC-FG: #556af2;\n    --VC-CODE-NUMBER-FG: #9980ff;\n    --VC-CODE-STR-FG: #e93f3b;\n    --VC-CODE-NULL-FG: #808080;\n  }\n}\n#__vconsole[data-theme="dark"] {\n  --VC-BG-0: #191919;\n  --VC-BG-1: #1f1f1f;\n  --VC-BG-2: #232323;\n  --VC-BG-3: #2f2f2f;\n  --VC-BG-4: #606060;\n  --VC-BG-5: #2c2c2c;\n  --VC-BG-6: rgba(255, 255, 255, 0.2);\n  --VC-FG-0: rgba(255, 255, 255, 0.8);\n  --VC-FG-HALF: rgba(255, 255, 255, 0.6);\n  --VC-FG-1: rgba(255, 255, 255, 0.5);\n  --VC-FG-2: rgba(255, 255, 255, 0.3);\n  --VC-FG-3: rgba(255, 255, 255, 0.05);\n  --VC-RED: #fa5151;\n  --VC-ORANGE: #c87d2f;\n  --VC-YELLOW: #cc9c00;\n  --VC-GREEN: #74a800;\n  --VC-LIGHTGREEN: #28b561;\n  --VC-BRAND: #07c160;\n  --VC-BLUE: #10aeff;\n  --VC-INDIGO: #1196ff;\n  --VC-PURPLE: #8183ff;\n  --VC-LINK: #7d90a9;\n  --VC-TEXTGREEN: #259c5c;\n  --VC-FG: white;\n  --VC-BG: black;\n  --VC-BG-COLOR-ACTIVE: #282828;\n  --VC-WARN-BG: #332700;\n  --VC-WARN-BORDER: #664e00;\n  --VC-ERROR-BG: #321010;\n  --VC-ERROR-BORDER: #642020;\n  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;\n  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;\n  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;\n  --VC-CODE-KEY-FG: #e36eec;\n  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;\n  --VC-CODE-FUNC-FG: #556af2;\n  --VC-CODE-NUMBER-FG: #9980ff;\n  --VC-CODE-STR-FG: #e93f3b;\n  --VC-CODE-NULL-FG: #808080;\n}\n.vc-tabbar {\n  border-bottom: 1px solid var(--VC-FG-3);\n  overflow-x: auto;\n  height: 3em;\n  width: auto;\n  white-space: nowrap;\n}\n.vc-tabbar .vc-tab {\n  display: inline-block;\n  line-height: 3em;\n  padding: 0 1.15384615em;\n  border-right: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-tabbar .vc-tab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-tabbar .vc-tab.vc-actived {\n  background-color: var(--VC-BG-1);\n}\n.vc-toolbar {\n  border-top: 1px solid var(--VC-FG-3);\n  line-height: 3em;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n.vc-toolbar .vc-tool {\n  display: none;\n  font-style: normal;\n  text-decoration: none;\n  color: var(--VC-FG-0);\n  width: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  text-align: center;\n  position: relative;\n  -webkit-touch-callout: none;\n}\n.vc-toolbar .vc-tool.vc-toggle,\n.vc-toolbar .vc-tool.vc-global-tool {\n  display: block;\n}\n.vc-toolbar .vc-tool:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-toolbar .vc-tool:after {\n  content: " ";\n  position: absolute;\n  top: 0.53846154em;\n  bottom: 0.53846154em;\n  right: 0;\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-toolbar .vc-tool-last:after {\n  border: none;\n}\n.vc-topbar {\n  background-color: var(--VC-BG-1);\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: row;\n  -moz-box-orient: horizontal;\n  -moz-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.vc-topbar .vc-toptab {\n  display: none;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -moz-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  line-height: 2.30769231em;\n  padding: 0 1.15384615em;\n  border-bottom: 1px solid var(--VC-FG-3);\n  text-decoration: none;\n  text-align: center;\n  color: var(--VC-FG-0);\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.vc-topbar .vc-toptab.vc-toggle {\n  display: block;\n}\n.vc-topbar .vc-toptab:active {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.vc-topbar .vc-toptab.vc-actived {\n  border-bottom: 1px solid var(--VC-INDIGO);\n}\n.vc-mask {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0);\n  z-index: 10001;\n  -webkit-transition: background 0.3s;\n  transition: background 0.3s;\n  -webkit-tap-highlight-color: transparent;\n  overflow-y: scroll;\n}\n.vc-panel {\n  display: none;\n  position: fixed;\n  min-height: 85%;\n  left: 0;\n  right: 0;\n  bottom: -100%;\n  z-index: 10002;\n  background-color: var(--VC-BG-0);\n  transition: bottom 0.3s;\n}\n.vc-toggle .vc-switch {\n  display: none;\n}\n.vc-toggle .vc-mask {\n  background: rgba(0, 0, 0, 0.6);\n  display: block;\n}\n.vc-toggle .vc-panel {\n  bottom: 0;\n}\n.vc-content {\n  background-color: var(--VC-BG-2);\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  top: 3.07692308em;\n  left: 0;\n  right: 0;\n  bottom: 3.07692308em;\n  -webkit-overflow-scrolling: touch;\n  margin-bottom: constant(safe-area-inset-bottom);\n  margin-bottom: env(safe-area-inset-bottom);\n}\n.vc-content.vc-has-topbar {\n  top: 5.46153846em;\n}\n.vc-plugin-box {\n  display: none;\n  position: relative;\n  min-height: 100%;\n}\n.vc-plugin-box.vc-fixed-height {\n  height: 100%;\n}\n.vc-plugin-box.vc-actived {\n  display: block;\n}\n.vc-plugin-content {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  flex-direction: column;\n  -webkit-tap-highlight-color: transparent;\n}\n.vc-plugin-content:empty:before {\n  content: "Empty";\n  color: var(--VC-FG-1);\n  position: absolute;\n  top: 45%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 1.15384615em;\n  text-align: center;\n}\n.vc-plugin-empty {\n  color: var(--VC-FG-1);\n  font-size: 1.15384615em;\n  height: 100%;\n  width: 100%;\n  padding: 1.15384615em 0;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {\n  .vc-toolbar,\n  .vc-switch {\n    bottom: constant(safe-area-inset-bottom);\n    bottom: env(safe-area-inset-bottom);\n  }\n}\n',""]),t.Z=a},7558:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-switch {\n  display: block;\n  position: fixed;\n  right: 0.76923077em;\n  bottom: 0.76923077em;\n  color: #FFF;\n  background-color: var(--VC-BRAND);\n  line-height: 1;\n  font-size: 1.07692308em;\n  padding: 0.61538462em 1.23076923em;\n  z-index: 10000;\n  border-radius: 0.30769231em;\n  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);\n}\n",""]),t.Z=a},5670:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,'/* color */\n.vcelm-node {\n  color: var(--VC-DOM-TAG-NAME-COLOR);\n}\n.vcelm-k {\n  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);\n}\n.vcelm-v {\n  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);\n}\n.vcelm-l.vc-actived > .vcelm-node {\n  background-color: var(--VC-FG-3);\n}\n/* layout */\n.vcelm-l {\n  padding-left: 8px;\n  position: relative;\n  word-wrap: break-word;\n  line-height: 1.2;\n}\n/*.vcelm-l.vcelm-noc {\n  padding-left: 0;\n}*/\n.vcelm-l .vcelm-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vcelm-l.vcelm-noc .vcelm-node:active {\n  background-color: transparent;\n}\n.vcelm-t {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n/* level */\n/* arrow */\n.vcelm-l:before {\n  content: "";\n  display: block;\n  position: absolute;\n  top: 6px;\n  left: 3px;\n  width: 0;\n  height: 0;\n  border: transparent solid 3px;\n  border-left-color: var(--VC-FG-1);\n}\n.vcelm-l.vc-toggle:before {\n  display: block;\n  top: 6px;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vcelm-l.vcelm-noc:before {\n  display: none;\n}\n',""]),t.Z=a},3327:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,"",""]),t.Z=a},1130:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-cmd {\n  height: 3.07692308em;\n  border-top: 1px solid var(--VC-FG-3);\n  display: flex;\n  flex-direction: row;\n}\n.vc-cmd.vc-filter {\n  bottom: 0;\n}\n.vc-cmd-input-wrap {\n  display: flex;\n  align-items: center;\n  flex: 1;\n  position: relative;\n  height: 2.15384615em;\n  padding: 0.46153846em 0.61538462em;\n}\n.vc-cmd-input {\n  width: 100%;\n  border: none;\n  resize: none;\n  outline: none;\n  padding: 0;\n  font-size: 0.92307692em;\n  background-color: transparent;\n  color: var(--VC-FG-0);\n}\n.vc-cmd-input::-webkit-input-placeholder {\n  line-height: 2.15384615em;\n}\n.vc-cmd-btn {\n  width: 3.07692308em;\n  border: none;\n  background-color: var(--VC-BG-0);\n  color: var(--VC-FG-0);\n  outline: none;\n  -webkit-touch-callout: none;\n  font-size: 1em;\n}\n.vc-cmd-clear-btn {\n  flex: 1 3.07692308em;\n  text-align: center;\n  line-height: 3.07692308em;\n}\n.vc-cmd-btn:active,\n.vc-cmd-clear-btn:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted {\n  position: absolute;\n  left: 0.46153846em;\n  right: 0.46153846em;\n  background-color: var(--VC-BG-3);\n  border: 1px solid var(--VC-FG-3);\n  overflow-x: scroll;\n  display: none;\n}\n.vc-cmd-prompted li {\n  list-style: none;\n  line-height: 30px;\n  padding: 0 0.46153846em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-cmd-prompted li:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-cmd-prompted-hide {\n  text-align: center;\n}\n",""]),t.Z=a},7147:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,'.vc-log-row {\n  margin: 0;\n  padding: 0.46153846em 0.61538462em;\n  overflow: hidden;\n  line-height: 1.3;\n  border-bottom: 1px solid var(--VC-FG-3);\n  word-break: break-word;\n  position: relative;\n  display: flex;\n}\n.vc-log-info {\n  color: var(--VC-PURPLE);\n}\n.vc-log-debug {\n  color: var(--VC-YELLOW);\n}\n.vc-log-warn {\n  color: var(--VC-ORANGE);\n  border-color: var(--VC-WARN-BORDER);\n  background-color: var(--VC-WARN-BG);\n}\n.vc-log-error {\n  color: var(--VC-RED);\n  border-color: var(--VC-ERROR-BORDER);\n  background-color: var(--VC-ERROR-BG);\n}\n.vc-logrow-icon {\n  margin-left: auto;\n}\n.vc-log-padding {\n  width: 1.53846154em;\n  border-left: 1px solid var(--VC-FG-3);\n}\n.vc-log-group .vc-log-content {\n  font-weight: bold;\n}\n.vc-log-group-toggle {\n  padding-left: 0.76923077em;\n}\n.vc-log-group-toggle {\n  display: block;\n  font-style: italic;\n  padding-left: 0.76923077em;\n  position: relative;\n}\n.vc-log-group-toggle:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-log-group > .vc-log-group-toggle::before {\n  content: "";\n  position: absolute;\n  top: 0.30769231em;\n  left: 0.15384615em;\n  width: 0;\n  height: 0;\n  border: transparent solid 0.30769231em;\n  border-left-color: var(--VC-FG-1);\n}\n.vc-log-group.vc-toggle > .vc-log-group-toggle::before {\n  top: 0.46153846em;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vc-log-time {\n  width: 6.15384615em;\n  color: #777;\n}\n.vc-log-repeat i {\n  margin-right: 0.30769231em;\n  padding: 0 6.5px;\n  color: #D7E0EF;\n  background-color: #42597F;\n  border-radius: 8.66666667px;\n}\n.vc-log-error .vc-log-repeat i {\n  color: #901818;\n  background-color: var(--VC-RED);\n}\n.vc-log-warn .vc-log-repeat i {\n  color: #987D20;\n  background-color: #F4BD02;\n}\n.vc-log-content {\n  flex: 1;\n}\n.vc-log-input,\n.vc-log-output {\n  padding-left: 0.92307692em;\n}\n.vc-log-input:before,\n.vc-log-output:before {\n  content: "›";\n  position: absolute;\n  top: 0.15384615em;\n  left: 0;\n  font-size: 1.23076923em;\n  color: #6A5ACD;\n}\n.vc-log-output:before {\n  content: "‹";\n}\n',""]),t.Z=a},1237:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,'.vc-log-tree {\n  display: block;\n  overflow: auto;\n  position: relative;\n  -webkit-overflow-scrolling: touch;\n}\n.vc-log-tree-node {\n  display: block;\n  font-style: italic;\n  padding-left: 0.76923077em;\n  position: relative;\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {\n  content: "";\n  position: absolute;\n  top: 0.30769231em;\n  left: 0.15384615em;\n  width: 0;\n  height: 0;\n  border: transparent solid 0.30769231em;\n  border-left-color: var(--VC-FG-1);\n}\n.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {\n  top: 0.46153846em;\n  left: 0;\n  border-top-color: var(--VC-FG-1);\n  border-left-color: transparent;\n}\n.vc-log-tree-child {\n  margin-left: 0.76923077em;\n}\n.vc-log-tree-loadmore {\n  text-decoration: underline;\n  padding-left: 1.84615385em;\n  position: relative;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore::before {\n  content: "››";\n  position: absolute;\n  top: -0.15384615em;\n  left: 0.76923077em;\n  font-size: 1.23076923em;\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-tree-loadmore:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n',""]),t.Z=a},845:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-log-key {\n  color: var(--VC-CODE-KEY-FG);\n}\n.vc-log-key-private {\n  color: var(--VC-CODE-PRIVATE-KEY-FG);\n}\n.vc-log-val {\n  white-space: pre-line;\n}\n.vc-log-val-function {\n  color: var(--VC-CODE-FUNC-FG);\n  font-style: italic !important;\n}\n.vc-log-val-bigint {\n  color: var(--VC-CODE-FUNC-FG);\n}\n.vc-log-val-number,\n.vc-log-val-boolean {\n  color: var(--VC-CODE-NUMBER-FG);\n}\n.vc-log-val-string {\n  white-space: pre-wrap;\n}\n.vc-log-val-string.vc-log-val-haskey {\n  color: var(--VC-CODE-STR-FG);\n  white-space: normal;\n}\n.vc-log-val-null,\n.vc-log-val-undefined,\n.vc-log-val-uninvocatable {\n  color: var(--VC-CODE-NULL-FG);\n}\n.vc-log-val-symbol {\n  color: var(--VC-CODE-STR-FG);\n}\n",""]),t.Z=a},8747:function(e,t,n){var i=n(6738),o=n.n(i),r=n(7705),a=n.n(r)()(o());a.push([e.id,".vc-group .vc-group-preview {\n  -webkit-touch-callout: none;\n}\n.vc-group .vc-group-preview:active {\n  background-color: var(--VC-BG-COLOR-ACTIVE);\n}\n.vc-group .vc-group-detail {\n  display: none;\n  padding: 0 0 0.76923077em 1.53846154em;\n  border-bottom: 1px solid var(--VC-FG-3);\n}\n.vc-group.vc-actived .vc-group-detail {\n  display: block;\n  background-color: var(--VC-BG-1);\n}\n.vc-group.vc-actived .vc-table-row {\n  background-color: var(--VC-BG-2);\n}\n.vc-group.vc-actived .vc-group-preview {\n  background-color: var(--VC-BG-1);\n}\n",""]),t.Z=a},3411:function(e,t,n){var i=n(3379),o=n.n(i),r=n(7795),a=n.n(r),s=n(569),l=n.n(s),c=n(3565),u=n.n(c),d=n(9216),h=n.n(d),p=n(4589),f=n.n(p),g=n(1130),m={};g.Z&&g.Z.locals&&(m.locals=g.Z.locals);var _,v=0,b={};b.styleTagTransform=f(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=h(),m.use=function(e){return b.options=e||{},v++||(_=o()(g.Z,b)),m},m.unuse=function(){v>0&&! --v&&(_(),_=null)},t.Z=m},3379:function(e){var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},a=[],s=0;s<e.length;s++){var l=e[s],c=i.base?l[0]+i.base:l[0],u=r[c]||0,d="".concat(c," ").concat(u);r[c]=u+1;var h=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=o(p,i);i.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=n(r[a]);t[s].references--}for(var l=i(e,o),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},569:function(e){var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6464:function(e,t,n){function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},4296:function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return o}})},8270:function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})},6881:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(2717);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,i.Z)(e,t)}},2717:function(e,t,n){function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}n.d(t,{Z:function(){return i}})},7003:function(e,t,n){n.d(t,{H3:function(){return i.H3E},ev:function(){return i.evW},x:function(){return i.xa3}});var i=n(2942)},2942:function(e,t,n){function i(){}function o(e){return e()}function r(){return Object.create(null)}function a(e){e.forEach(o)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t}function u(e){if(null==e)return i;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=e.subscribe.apply(e,n);return r.unsubscribe?function(){return r.unsubscribe()}:r}function d(e){var t;return u(e,(function(e){return t=e}))(),t}function h(e,t,n){e.$$.on_destroy.push(u(t,n))}function p(e,t,n,i){if(e){var o=f(e,t,n,i);return e[0](o)}}function f(e,t,n,i){return e[1]&&i?function(e,t){for(var n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function g(e,t,n,i){if(e[2]&&i){var o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){for(var r=[],a=Math.max(t.dirty.length,o.length),s=0;s<a;s+=1)r[s]=t.dirty[s]|o[s];return r}return t.dirty|o}return t.dirty}function m(e,t,n,i,o,r){if(o){var a=f(t,n,i,r);e.p(a,o)}}function _(e){if(e.ctx.length>32){for(var t=[],n=e.ctx.length/32,i=0;i<n;i++)t[i]=-1;return t}return-1}function v(e){var t={};for(var n in e)t[n]=!0;return t}function b(e,t,n){return e.set(n),t}function T(e,t){e.appendChild(t)}function A(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function E(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function C(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function w(e){return document.createTextNode(e)}function x(){return w(" ")}function M(){return w("")}function R(e,t,n,i){return e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n,i)}}function I(e){return function(t){return t.preventDefault(),e.call(this,t)}}function D(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function L(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function O(e,t){e.value=null==t?"":t}function P(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function N(e,t,n){e.classList[n?"add":"remove"](t)}var $;function B(e){$=e}function F(){if(!$)throw new Error("Function called outside component initialization");return $}function U(e){F().$$.on_mount.push(e)}function G(e){F().$$.on_destroy.push(e)}function V(){var e=F();return function(t,n){var i=e.$$.callbacks[t];if(i){var o=function(e,t,n){void 0===n&&(n=!1);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((function(t){t.call(e,o)}))}}}function H(e,t){var n=this,i=e.$$.callbacks[t.type];i&&i.slice().forEach((function(e){return e.call(n,t)}))}n.d(t,{f_C:function(){return _e},hjT:function(){return Q},R3I:function(){return T},Ljt:function(){return k},akz:function(){return de},VnY:function(){return z},cKT:function(){return H},gbL:function(){return re},FIv:function(){return h},XGm:function(){return v},xa3:function(){return V},YCL:function(){return he},nuO:function(){return p},vpE:function(){return fe},RMB:function(){return E},ogt:function(){return y},bGB:function(){return S},cSb:function(){return M},yl1:function(){return ee},VOJ:function(){return _},u2N:function(){return g},$XI:function(){return d},lig:function(){return le},dvw:function(){return oe},S1n:function(){return me},$Tr:function(){return A},sBU:function(){return s},oLt:function(){return R},yef:function(){return pe},ZTd:function(){return i},AqN:function(){return c},evW:function(){return G},H3E:function(){return U},cly:function(){return ce},AT7:function(){return I},j7q:function(){return a},N8:function(){return l},rTO:function(){return L},BmG:function(){return O},fxP:function(){return b},czc:function(){return P},DhX:function(){return x},XET:function(){return D},LdU:function(){return u},bi5:function(){return C},fLW:function(){return w},VHj:function(){return N},Ui:function(){return ae},etI:function(){return se},GQg:function(){return ue},kmG:function(){return m}}),n(2717),n(6881);var W=[],z=[],j=[],X=[],Y=Promise.resolve(),q=!1;function K(e){j.push(e)}function Q(e){X.push(e)}var Z=new Set,J=0;function ee(){var e=$;do{for(;J<W.length;){var t=W[J];J++,B(t),te(t.$$)}for(B(null),W.length=0,J=0;z.length;)z.pop()();for(var n=0;n<j.length;n+=1){var i=j[n];Z.has(i)||(Z.add(i),i())}j.length=0}while(W.length);for(;X.length;)X.pop()();q=!1,Z.clear(),B(e)}function te(e){if(null!==e.fragment){e.update(),a(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}var ne,ie=new Set;function oe(){ne={r:0,c:[],p:ne}}function re(){ne.r||a(ne.c),ne=ne.p}function ae(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function se(e,t,n,i){if(e&&e.o){if(ie.has(e))return;ie.add(e),ne.c.push((function(){ie.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}var le="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:commonjsGlobal;function ce(e,t){se(e,1,1,(function(){t.delete(e.key)}))}function ue(e,t,n,i,o,r,a,s,l,c,u,d){for(var h=e.length,p=r.length,f=h,g={};f--;)g[e[f].key]=f;var m=[],_=new Map,v=new Map;for(f=p;f--;){var b=d(o,r,f),T=n(b),A=a.get(T);A?i&&A.p(b,t):(A=c(T,b)).c(),_.set(T,m[f]=A),T in g&&v.set(T,Math.abs(f-g[T]))}var y=new Set,E=new Set;function S(e){ae(e,1),e.m(s,u),a.set(e.key,e),u=e.first,p--}for(;h&&p;){var C=m[p-1],w=e[h-1],x=C.key,M=w.key;C===w?(u=C.first,h--,p--):_.has(M)?!a.has(x)||y.has(x)?S(C):E.has(M)?h--:v.get(x)>v.get(M)?(E.add(x),S(C)):(y.add(M),h--):(l(w,a),h--)}for(;h--;){var R=e[h];_.has(R.key)||l(R,a)}for(;p;)S(m[p-1]);return m}function de(e,t,n){var i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function he(e){e&&e.c()}function pe(e,t,n,i){var r=e.$$,l=r.fragment,c=r.on_mount,u=r.on_destroy,d=r.after_update;l&&l.m(t,n),i||K((function(){var t=c.map(o).filter(s);u?u.push.apply(u,t):a(t),e.$$.on_mount=[]})),d.forEach(K)}function fe(e,t){var n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ge(e,t){-1===e.$$.dirty[0]&&(W.push(e),q||(q=!0,Y.then(ee)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,o,s,l,c,u){void 0===u&&(u=[-1]);var d=$;B(e);var h=e.$$={fragment:null,ctx:null,props:l,update:i,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};c&&c(h.root);var p,f=!1;if(h.ctx=n?n(e,t.props||{},(function(t,n){var i=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&ge(e,t)),n})):[],h.update(),f=!0,a(h.before_update),h.fragment=!!o&&o(h.ctx),t.target){if(t.hydrate){var g=(p=t.target,Array.from(p.childNodes));h.fragment&&h.fragment.l(g),g.forEach(y)}else h.fragment&&h.fragment.c();t.intro&&ae(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),ee()}B(d)}var _e=function(){function e(){}var t=e.prototype;return t.$destroy=function(){fe(this,1),this.$destroy=i},t.$on=function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.$set=function(e){this.$$set&&!function(e){return 0===Object.keys(e).length}(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)},e}()},3313:function(e,t,n){n.d(t,{U2:function(){return i.$XI},fZ:function(){return s}});var i=n(2942);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=[];function s(e,t){var n;void 0===t&&(t=i.ZTd);var r=new Set;function s(t){if((0,i.N8)(e,t)&&(e=t,n)){for(var s,l=!a.length,c=o(r);!(s=c()).done;){var u=s.value;u[1](),a.push(u,e)}if(l){for(var d=0;d<a.length;d+=2)a[d][0](a[d+1]);a.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a){void 0===a&&(a=i.ZTd);var l=[o,a];return r.add(l),1===r.size&&(n=t(s)||i.ZTd),o(e),function(){r.delete(l),0===r.size&&(n(),n=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};return function(){__webpack_require__.d(__webpack_exports__,{default:function(){return Oo}}),__webpack_require__(5441),__webpack_require__(8765);var e=__webpack_require__(4296),t=__webpack_require__(5103),n={one:function(e,t){void 0===t&&(t=document);try{return t.querySelector(e)||void 0}catch(e){return}},all:function(e,t){void 0===t&&(t=document);try{var n=t.querySelectorAll(e);return[].slice.call(n)}catch(e){return[]}},addClass:function(e,n){if(e)for(var i=(0,t.kJ)(e)?e:[e],o=0;o<i.length;o++){var r=(i[o].className||"").split(" ");r.indexOf(n)>-1||(r.push(n),i[o].className=r.join(" "))}},removeClass:function(e,n){if(e)for(var i=(0,t.kJ)(e)?e:[e],o=0;o<i.length;o++){for(var r=i[o].className.split(" "),a=0;a<r.length;a++)r[a]==n&&(r[a]="");i[o].className=r.join(" ").trim()}},hasClass:function(e,t){return!(!e||!e.classList)&&e.classList.contains(t)},bind:function(e,n,i,o){void 0===o&&(o=!1),e&&((0,t.kJ)(e)?e:[e]).forEach((function(e){e.addEventListener(n,i,!!o)}))},delegate:function(e,t,i,o){e&&e.addEventListener(t,(function(t){var r=n.all(i,e);if(r)e:for(var a=0;a<r.length;a++)for(var s=t.target;s;){if(s==r[a]){o.call(s,t,s);break e}if((s=s.parentNode)==e)break}}),!1)},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.lastChild);return e}},i=n,o=__webpack_require__(6464),r=__webpack_require__(6881),a=__webpack_require__(2942),s=__webpack_require__(7003),l=__webpack_require__(3379),c=__webpack_require__.n(l),u=__webpack_require__(7795),d=__webpack_require__.n(u),h=__webpack_require__(569),p=__webpack_require__.n(h),f=__webpack_require__(3565),g=__webpack_require__.n(f),m=__webpack_require__(9216),_=__webpack_require__.n(m),v=__webpack_require__(4589),b=__webpack_require__.n(v),T=__webpack_require__(7558),A={};T.Z&&T.Z.locals&&(A.locals=T.Z.locals);var y,E=0,S={};S.styleTagTransform=b(),S.setAttributes=g(),S.insert=p().bind(null,"head"),S.domAPI=d(),S.insertStyleElement=_(),A.use=function(e){return S.options=e||{},E++||(y=c()(T.Z,S)),A},A.unuse=function(){E>0&&! --E&&(y(),y=null)};var C=A;function w(e){var t,n,i,o;return{c:function(){t=(0,a.bGB)("div"),n=(0,a.fLW)("vConsole"),(0,a.Ljt)(t,"class","vc-switch"),(0,a.czc)(t,"right",e[2].x+"px"),(0,a.czc)(t,"bottom",e[2].y+"px"),(0,a.czc)(t,"display",e[0]?"block":"none")},m:function(r,s){(0,a.$Tr)(r,t,s),(0,a.R3I)(t,n),e[8](t),i||(o=[(0,a.oLt)(t,"touchstart",e[3],{passive:!1}),(0,a.oLt)(t,"touchend",e[4],{passive:!1}),(0,a.oLt)(t,"touchmove",e[5],{passive:!1}),(0,a.oLt)(t,"click",e[7])],i=!0)},p:function(e,n){var i=n[0];4&i&&(0,a.czc)(t,"right",e[2].x+"px"),4&i&&(0,a.czc)(t,"bottom",e[2].y+"px"),1&i&&(0,a.czc)(t,"display",e[0]?"block":"none")},i:a.ZTd,o:a.ZTd,d:function(n){n&&(0,a.ogt)(t),e[8](null),i=!1,(0,a.j7q)(o)}}}function x(e,n,i){var o,r=n.show,l=void 0===r||r,c=n.position,u=void 0===c?{x:0,y:0}:c,d={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},h={x:0,y:0};(0,s.H3)((function(){C.use()})),(0,s.ev)((function(){C.unuse()}));var p=function(e,n){var o=f(e,n);e=o[0],n=o[1],d.x=e,d.y=n,i(2,h.x=e,h),i(2,h.y=n,h),t.po("switch_x",e+""),t.po("switch_y",n+"")},f=function(e,t){var n=Math.max(document.documentElement.offsetWidth,window.innerWidth),i=Math.max(document.documentElement.offsetHeight,window.innerHeight);return e+o.offsetWidth>n&&(e=n-o.offsetWidth),t+o.offsetHeight>i&&(t=i-o.offsetHeight),e<0&&(e=0),t<20&&(t=20),[e,t]};return e.$$set=function(e){"show"in e&&i(0,l=e.show),"position"in e&&i(6,u=e.position)},e.$$.update=function(){66&e.$$.dirty&&o&&p(u.x,u.y)},[l,o,h,function(e){d.startX=e.touches[0].pageX,d.startY=e.touches[0].pageY,d.hasMoved=!1},function(e){d.hasMoved&&(d.startX=0,d.startY=0,d.hasMoved=!1,p(d.endX,d.endY))},function(e){if(!(e.touches.length<=0)){var t=e.touches[0].pageX-d.startX,n=e.touches[0].pageY-d.startY,o=Math.floor(d.x-t),r=Math.floor(d.y-n),a=f(o,r);o=a[0],r=a[1],i(2,h.x=o,h),i(2,h.y=r,h),d.endX=o,d.endY=r,d.hasMoved=!0,e.preventDefault()}},u,function(t){a.cKT.call(this,e,t)},function(e){a.VnY[e?"unshift":"push"]((function(){i(1,o=e)}))}]}var M=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,x,w,a.N8,{show:0,position:6}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({show:e}),(0,a.yl1)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(e){this.$$set({position:e}),(0,a.yl1)()}}]),n}(a.f_C),R=M;function I(e){var t,n;return{c:function(){t=(0,a.bGB)("div"),(0,a.Ljt)(t,"id",n="__vc_plug_"+e[0]),(0,a.Ljt)(t,"class","vc-plugin-box"),(0,a.VHj)(t,"vc-fixed-height",e[1]),(0,a.VHj)(t,"vc-actived",e[2])},m:function(n,i){(0,a.$Tr)(n,t,i),e[6](t)},p:function(e,i){var o=i[0];1&o&&n!==(n="__vc_plug_"+e[0])&&(0,a.Ljt)(t,"id",n),2&o&&(0,a.VHj)(t,"vc-fixed-height",e[1]),4&o&&(0,a.VHj)(t,"vc-actived",e[2])},i:a.ZTd,o:a.ZTd,d:function(n){n&&(0,a.ogt)(t),e[6](null)}}}function D(e,n,i){var o=n.pluginId,r=void 0===o?"":o,s=n.fixedHeight,l=void 0!==s&&s,c=n.actived,u=void 0!==c&&c,d=n.content,h=void 0===d?void 0:d,p=void 0,f=void 0;return e.$$set=function(e){"pluginId"in e&&i(0,r=e.pluginId),"fixedHeight"in e&&i(1,l=e.fixedHeight),"actived"in e&&i(2,u=e.actived),"content"in e&&i(4,h=e.content)},e.$$.update=function(){57&e.$$.dirty&&f!==r&&h&&p&&(i(5,f=r),i(3,p.innerHTML="",p),(0,t.HD)(h)?i(3,p.innerHTML=h,p):(0,t.kK)(h)&&p.appendChild(h))},[r,l,u,p,h,f,function(e){a.VnY[e?"unshift":"push"]((function(){i(3,p=e),i(5,f),i(0,r),i(4,h)}))}]}var k=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,D,I,a.N8,{pluginId:0,fixedHeight:1,actived:2,content:4}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"pluginId",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({pluginId:e}),(0,a.yl1)()}},{key:"fixedHeight",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({fixedHeight:e}),(0,a.yl1)()}},{key:"actived",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({actived:e}),(0,a.yl1)()}},{key:"content",get:function(){return this.$$.ctx[4]},set:function(e){this.$$set({content:e}),(0,a.yl1)()}}]),n}(a.f_C),L=k,O=__webpack_require__(4687),P=__webpack_require__(3283),N={};P.Z&&P.Z.locals&&(N.locals=P.Z.locals);var $,B=0,F={};F.styleTagTransform=b(),F.setAttributes=g(),F.insert=p().bind(null,"head"),F.domAPI=d(),F.insertStyleElement=_(),N.use=function(e){return F.options=e||{},B++||($=c()(P.Z,F)),N},N.unuse=function(){B>0&&! --B&&($(),$=null)};var U=N;function G(e,t,n){var i=e.slice();return i[39]=t[n][0],i[40]=t[n][1],i}function V(e,t,n){var i=e.slice();return i[43]=t[n],i[45]=n,i}function H(e,t,n){var i=e.slice();return i[39]=t[n][0],i[40]=t[n][1],i}function W(e,t,n){var i=e.slice();return i[39]=t[n][0],i[40]=t[n][1],i}function z(e,t,n){var i=e.slice();return i[43]=t[n],i[45]=n,i}function j(e,t,n){var i=e.slice();return i[39]=t[n][0],i[40]=t[n][1],i}function X(e){var t,n,i,o,r,s=e[40].name+"";function l(){return e[25](e[40])}return{c:function(){t=(0,a.bGB)("a"),n=(0,a.fLW)(s),(0,a.Ljt)(t,"class","vc-tab"),(0,a.Ljt)(t,"id",i="__vc_tab_"+e[40].id),(0,a.VHj)(t,"vc-actived",e[40].id===e[2])},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n),o||(r=(0,a.oLt)(t,"click",l),o=!0)},p:function(o,r){e=o,8&r[0]&&s!==(s=e[40].name+"")&&(0,a.rTO)(n,s),8&r[0]&&i!==(i="__vc_tab_"+e[40].id)&&(0,a.Ljt)(t,"id",i),12&r[0]&&(0,a.VHj)(t,"vc-actived",e[40].id===e[2])},d:function(e){e&&(0,a.ogt)(t),o=!1,r()}}}function Y(e){var t,n=e[40].hasTabPanel&&X(e);return{c:function(){n&&n.c(),t=(0,a.cSb)()},m:function(e,i){n&&n.m(e,i),(0,a.$Tr)(e,t,i)},p:function(e,i){e[40].hasTabPanel?n?n.p(e,i):((n=X(e)).c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d:function(e){n&&n.d(e),e&&(0,a.ogt)(t)}}}function q(e){var t,n,i,o,r,s=e[43].name+"";function l(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e)[26].apply(t,[e[40],e[45]].concat(i))}return{c:function(){t=(0,a.bGB)("i"),n=(0,a.fLW)(s),(0,a.Ljt)(t,"class",i="vc-toptab vc-topbar-"+e[40].id+" "+e[43].className),(0,a.VHj)(t,"vc-toggle",e[40].id===e[2]),(0,a.VHj)(t,"vc-actived",e[43].actived)},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n),o||(r=(0,a.oLt)(t,"click",l),o=!0)},p:function(o,r){e=o,8&r[0]&&s!==(s=e[43].name+"")&&(0,a.rTO)(n,s),8&r[0]&&i!==(i="vc-toptab vc-topbar-"+e[40].id+" "+e[43].className)&&(0,a.Ljt)(t,"class",i),12&r[0]&&(0,a.VHj)(t,"vc-toggle",e[40].id===e[2]),8&r[0]&&(0,a.VHj)(t,"vc-actived",e[43].actived)},d:function(e){e&&(0,a.ogt)(t),o=!1,r()}}}function K(e){for(var t,n=e[40].topbarList,i=[],o=0;o<n.length;o+=1)i[o]=q(z(e,n,o));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=(0,a.cSb)()},m:function(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);(0,a.$Tr)(e,t,n)},p:function(e,o){if(8204&o[0]){var r;for(n=e[40].topbarList,r=0;r<n.length;r+=1){var a=z(e,n,r);i[r]?i[r].p(a,o):(i[r]=q(a),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d:function(e){(0,a.RMB)(i,e),e&&(0,a.ogt)(t)}}}function Q(e){var t,n,i,o=L;function r(e){var t;return{props:{pluginId:e[40].id,fixedHeight:null==(t=e[40].tabOptions)?void 0:t.fixedHeight,actived:e[40].id===e[2],content:e[40].content}}}return o&&(t=new o(r(e))),{c:function(){t&&(0,a.YCL)(t.$$.fragment),n=(0,a.cSb)()},m:function(e,o){t&&(0,a.yef)(t,e,o),(0,a.$Tr)(e,n,o),i=!0},p:function(e,i){var s,l={};if(8&i[0]&&(l.pluginId=e[40].id),8&i[0]&&(l.fixedHeight=null==(s=e[40].tabOptions)?void 0:s.fixedHeight),12&i[0]&&(l.actived=e[40].id===e[2]),8&i[0]&&(l.content=e[40].content),o!==(o=L)){if(t){(0,a.dvw)();var c=t;(0,a.etI)(c.$$.fragment,1,0,(function(){(0,a.vpE)(c,1)})),(0,a.gbL)()}o?(t=new o(r(e)),(0,a.YCL)(t.$$.fragment),(0,a.Ui)(t.$$.fragment,1),(0,a.yef)(t,n.parentNode,n)):t=null}else o&&t.$set(l)},i:function(e){i||(t&&(0,a.Ui)(t.$$.fragment,e),i=!0)},o:function(e){t&&(0,a.etI)(t.$$.fragment,e),i=!1},d:function(e){e&&(0,a.ogt)(n),t&&(0,a.vpE)(t,e)}}}function Z(e){var t,n,i,o,r,s=e[43].name+"";function l(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e)[28].apply(t,[e[40],e[45]].concat(i))}return{c:function(){t=(0,a.bGB)("i"),n=(0,a.fLW)(s),(0,a.Ljt)(t,"class",i="vc-tool vc-tool-"+e[40].id),(0,a.VHj)(t,"vc-global-tool",e[43].global),(0,a.VHj)(t,"vc-toggle",e[40].id===e[2])},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n),o||(r=(0,a.oLt)(t,"click",l),o=!0)},p:function(o,r){e=o,8&r[0]&&s!==(s=e[43].name+"")&&(0,a.rTO)(n,s),8&r[0]&&i!==(i="vc-tool vc-tool-"+e[40].id)&&(0,a.Ljt)(t,"class",i),8&r[0]&&(0,a.VHj)(t,"vc-global-tool",e[43].global),12&r[0]&&(0,a.VHj)(t,"vc-toggle",e[40].id===e[2])},d:function(e){e&&(0,a.ogt)(t),o=!1,r()}}}function J(e){for(var t,n=e[40].toolbarList,i=[],o=0;o<n.length;o+=1)i[o]=Z(V(e,n,o));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=(0,a.cSb)()},m:function(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);(0,a.$Tr)(e,t,n)},p:function(e,o){if(16396&o[0]){var r;for(n=e[40].toolbarList,r=0;r<n.length;r+=1){var a=V(e,n,r);i[r]?i[r].p(a,o):(i[r]=Z(a),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d:function(e){(0,a.RMB)(i,e),e&&(0,a.ogt)(t)}}}function ee(e){var t,n,i,o,r,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y;function E(t){e[23](t)}function S(t){e[24](t)}var C={};void 0!==e[0]&&(C.show=e[0]),void 0!==e[1]&&(C.position=e[1]),n=new R({props:C}),a.VnY.push((function(){return(0,a.akz)(n,"show",E)})),a.VnY.push((function(){return(0,a.akz)(n,"position",S)})),n.$on("click",e[10]);for(var w=Object.entries(e[3]),x=[],M=0;M<w.length;M+=1)x[M]=Y(j(e,w,M));for(var I=Object.entries(e[3]),D=[],k=0;k<I.length;k+=1)D[k]=K(W(e,I,k));for(var L=Object.entries(e[3]),O=[],P=0;P<L.length;P+=1)O[P]=Q(H(e,L,P));for(var N=function(e){return(0,a.etI)(O[e],1,1,(function(){O[e]=null}))},$=Object.entries(e[3]),B=[],F=0;F<$.length;F+=1)B[F]=J(G(e,$,F));return{c:function(){var i,o;t=(0,a.bGB)("div"),(0,a.YCL)(n.$$.fragment),r=(0,a.DhX)(),s=(0,a.bGB)("div"),l=(0,a.DhX)(),c=(0,a.bGB)("div"),u=(0,a.bGB)("div");for(var T=0;T<x.length;T+=1)x[T].c();d=(0,a.DhX)(),h=(0,a.bGB)("div");for(var A=0;A<D.length;A+=1)D[A].c();p=(0,a.DhX)(),f=(0,a.bGB)("div");for(var y=0;y<O.length;y+=1)O[y].c();g=(0,a.DhX)(),m=(0,a.bGB)("div");for(var E=0;E<B.length;E+=1)B[E].c();_=(0,a.DhX)(),(v=(0,a.bGB)("i")).textContent="Hide",(0,a.Ljt)(s,"class","vc-mask"),(0,a.czc)(s,"display",e[8]?"block":"none"),(0,a.Ljt)(u,"class","vc-tabbar"),(0,a.Ljt)(h,"class","vc-topbar"),(0,a.Ljt)(f,"class","vc-content"),(0,a.VHj)(f,"vc-has-topbar",(null==(i=e[3][e[2]])||null==(o=i.topbarList)?void 0:o.length)>0),(0,a.Ljt)(v,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,a.Ljt)(m,"class","vc-toolbar"),(0,a.Ljt)(c,"class","vc-panel"),(0,a.czc)(c,"display",e[7]?"block":"none"),(0,a.Ljt)(t,"id","__vconsole"),(0,a.Ljt)(t,"style",b=e[5]?"font-size:"+e[5]+";":""),(0,a.Ljt)(t,"data-theme",e[4]),(0,a.VHj)(t,"vc-toggle",e[6])},m:function(i,o){(0,a.$Tr)(i,t,o),(0,a.yef)(n,t,null),(0,a.R3I)(t,r),(0,a.R3I)(t,s),(0,a.R3I)(t,l),(0,a.R3I)(t,c),(0,a.R3I)(c,u);for(var b=0;b<x.length;b+=1)x[b].m(u,null);(0,a.R3I)(c,d),(0,a.R3I)(c,h);for(var E=0;E<D.length;E+=1)D[E].m(h,null);(0,a.R3I)(c,p),(0,a.R3I)(c,f);for(var S=0;S<O.length;S+=1)O[S].m(f,null);e[27](f),(0,a.R3I)(c,g),(0,a.R3I)(c,m);for(var C=0;C<B.length;C+=1)B[C].m(m,null);(0,a.R3I)(m,_),(0,a.R3I)(m,v),T=!0,A||(y=[(0,a.oLt)(s,"click",e[11]),(0,a.oLt)(f,"touchstart",e[15]),(0,a.oLt)(f,"touchmove",e[16]),(0,a.oLt)(f,"touchend",e[17]),(0,a.oLt)(f,"scroll",e[18]),(0,a.oLt)(v,"click",e[11]),(0,a.oLt)(t,"touchstart",e[19].touchStart,{passive:!1,capture:!0}),(0,a.oLt)(t,"touchmove",e[19].touchMove,{passive:!1,capture:!0}),(0,a.oLt)(t,"touchend",e[19].touchEnd,{passive:!1,capture:!0})],A=!0)},p:function(e,r){var l,d,p={};if(!i&&1&r[0]&&(i=!0,p.show=e[0],(0,a.hjT)((function(){return i=!1}))),!o&&2&r[0]&&(o=!0,p.position=e[1],(0,a.hjT)((function(){return o=!1}))),n.$set(p),(!T||256&r[0])&&(0,a.czc)(s,"display",e[8]?"block":"none"),4108&r[0]){var g;for(w=Object.entries(e[3]),g=0;g<w.length;g+=1){var v=j(e,w,g);x[g]?x[g].p(v,r):(x[g]=Y(v),x[g].c(),x[g].m(u,null))}for(;g<x.length;g+=1)x[g].d(1);x.length=w.length}if(8204&r[0]){var A;for(I=Object.entries(e[3]),A=0;A<I.length;A+=1){var y=W(e,I,A);D[A]?D[A].p(y,r):(D[A]=K(y),D[A].c(),D[A].m(h,null))}for(;A<D.length;A+=1)D[A].d(1);D.length=I.length}if(12&r[0]){var E;for(L=Object.entries(e[3]),E=0;E<L.length;E+=1){var S=H(e,L,E);O[E]?(O[E].p(S,r),(0,a.Ui)(O[E],1)):(O[E]=Q(S),O[E].c(),(0,a.Ui)(O[E],1),O[E].m(f,null))}for((0,a.dvw)(),E=L.length;E<O.length;E+=1)N(E);(0,a.gbL)()}if(12&r[0]&&(0,a.VHj)(f,"vc-has-topbar",(null==(l=e[3][e[2]])||null==(d=l.topbarList)?void 0:d.length)>0),16396&r[0]){var C;for($=Object.entries(e[3]),C=0;C<$.length;C+=1){var M=G(e,$,C);B[C]?B[C].p(M,r):(B[C]=J(M),B[C].c(),B[C].m(m,_))}for(;C<B.length;C+=1)B[C].d(1);B.length=$.length}(!T||128&r[0])&&(0,a.czc)(c,"display",e[7]?"block":"none"),(!T||32&r[0]&&b!==(b=e[5]?"font-size:"+e[5]+";":""))&&(0,a.Ljt)(t,"style",b),(!T||16&r[0])&&(0,a.Ljt)(t,"data-theme",e[4]),64&r[0]&&(0,a.VHj)(t,"vc-toggle",e[6])},i:function(e){if(!T){(0,a.Ui)(n.$$.fragment,e);for(var t=0;t<L.length;t+=1)(0,a.Ui)(O[t]);T=!0}},o:function(e){(0,a.etI)(n.$$.fragment,e),O=O.filter(Boolean);for(var t=0;t<O.length;t+=1)(0,a.etI)(O[t]);T=!1},d:function(i){i&&(0,a.ogt)(t),(0,a.vpE)(n),(0,a.RMB)(x,i),(0,a.RMB)(D,i),(0,a.RMB)(O,i),e[27](null),(0,a.RMB)(B,i),A=!1,(0,a.j7q)(y)}}}function te(e,n,i){var o,r,l=n.theme,c=void 0===l?"":l,u=n.disableScrolling,d=void 0!==u&&u,h=n.show,p=void 0!==h&&h,f=n.showSwitchButton,g=void 0===f||f,m=n.switchButtonPosition,_=void 0===m?{x:0,y:0}:m,v=n.activedPluginId,b=void 0===v?"":v,T=n.pluginList,A=void 0===T?{}:T,y=(0,s.x)(),E=!1,S="",C=!1,w=!1,x=!1,M=!0,R=0,I=null,D={};(0,s.H3)((function(){var e=document.querySelectorAll('[name="viewport"]');if(e&&e[0]){var t=(e[e.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),n=t?parseFloat(t[0].split("=")[1]):1;1!==n&&i(5,S=Math.floor(1/n*13)+"px")}U.use&&U.use(),o=O.x.subscribe((function(e){p&&R!==e.updateTime&&(R=e.updateTime,k())}))})),(0,s.ev)((function(){U.unuse&&U.unuse(),o&&o()}));var k=function(){!d&&M&&r&&i(9,r.scrollTop=r.scrollHeight-r.offsetHeight,r)},L=function(e){e!==b&&(i(2,b=e),y("changePanel",{pluginId:e}),setTimeout((function(){r&&i(9,r.scrollTop=D[b]||0,r)}),0))},P=function(e,n,o){var r=A[n].topbarList[o],a=!0;if(t.mf(r.onClick)&&(a=r.onClick.call(e.target,e,r.data)),!1===a);else{for(var s=0;s<A[n].topbarList.length;s++)i(3,A[n].topbarList[s].actived=o===s,A);i(3,A)}},N=function(e,n,i){var o=A[n].toolbarList[i];t.mf(o.onClick)&&o.onClick.call(e.target,e,o.data)},$={tapTime:700,tapBoundary:10,lastTouchStartTime:0,touchstartX:0,touchstartY:0,touchHasMoved:!1,targetElem:null},B={touchStart:function(e){if(0===$.lastTouchStartTime){var t=e.targetTouches[0];$.touchstartX=t.pageX,$.touchstartY=t.pageY,$.lastTouchStartTime=e.timeStamp,$.targetElem=e.target.nodeType===Node.TEXT_NODE?e.target.parentNode:e.target}},touchMove:function(e){var t=e.changedTouches[0];(Math.abs(t.pageX-$.touchstartX)>$.tapBoundary||Math.abs(t.pageY-$.touchstartY)>$.tapBoundary)&&($.touchHasMoved=!0)},touchEnd:function(e){if(!1===$.touchHasMoved&&e.timeStamp-$.lastTouchStartTime<$.tapTime&&null!=$.targetElem){var t=!1;switch($.targetElem.tagName.toLowerCase()){case"textarea":t=!0;break;case"select":t=!$.targetElem.disabled&&!$.targetElem.readOnly;break;case"input":switch($.targetElem.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":t=!1;break;default:t=!$.targetElem.disabled&&!$.targetElem.readOnly}}t?$.targetElem.focus():e.preventDefault();var n=e.changedTouches[0],i=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});$.targetElem.dispatchEvent(i)}$.lastTouchStartTime=0,$.touchHasMoved=!1,$.targetElem=null}};return e.$$set=function(e){"theme"in e&&i(4,c=e.theme),"disableScrolling"in e&&i(20,d=e.disableScrolling),"show"in e&&i(21,p=e.show),"showSwitchButton"in e&&i(0,g=e.showSwitchButton),"switchButtonPosition"in e&&i(1,_=e.switchButtonPosition),"activedPluginId"in e&&i(2,b=e.activedPluginId),"pluginList"in e&&i(3,A=e.pluginList)},e.$$.update=function(){6291456&e.$$.dirty[0]&&(!0===p?(i(7,w=!0),i(8,x=!0),I&&clearTimeout(I),i(22,I=setTimeout((function(){i(6,C=!0),k()}),10))):(i(6,C=!1),I&&clearTimeout(I),i(22,I=setTimeout((function(){i(7,w=!1),i(8,x=!1)}),330))))},[g,_,b,A,c,S,C,w,x,r,function(e){y("show",{show:!0})},function(e){y("show",{show:!1})},L,P,N,function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName){var t=!1;if("function"==typeof window.getComputedStyle){var n=window.getComputedStyle(e.target);"auto"!==n.overflow&&"initial"!==n.overflow&&"scroll"!==n.overflow||(t=!0)}if(!t){var o=r.scrollTop,a=r.scrollHeight,s=o+r.offsetHeight;0===o?(i(9,r.scrollTop=1,r),0===r.scrollTop&&(E=!0)):s===a&&(i(9,r.scrollTop=o-1,r),r.scrollTop===o&&(E=!0))}}},function(e){E&&e.preventDefault()},function(e){E=!1},function(e){p&&(M=r.scrollTop+r.offsetHeight>=r.scrollHeight-50,D[b]=r.scrollTop)},B,d,p,I,function(e){i(0,g=e)},function(e){i(1,_=e)},function(e){return L(e.id)},function(e,t,n){return P(n,e.id,t)},function(e){a.VnY[e?"unshift":"push"]((function(){i(9,r=e)}))},function(e,t,n){return N(n,e.id,t)}]}var ne=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,te,ee,a.N8,{theme:4,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3},null,[-1,-1]),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"theme",get:function(){return this.$$.ctx[4]},set:function(e){this.$$set({theme:e}),(0,a.yl1)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(e){this.$$set({disableScrolling:e}),(0,a.yl1)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(e){this.$$set({show:e}),(0,a.yl1)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({showSwitchButton:e}),(0,a.yl1)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({switchButtonPosition:e}),(0,a.yl1)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({activedPluginId:e}),(0,a.yl1)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(e){this.$$set({pluginList:e}),(0,a.yl1)()}}]),n}(a.f_C),ie=ne,oe=function(){function n(e,t){void 0===t&&(t="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=e,this.name=t,this.isReady=!1}var i=n.prototype;return i.on=function(e,t){return this.eventMap.set(e,t),this},i.onRemove=function(){this.unbindExporter()},i.trigger=function(e,t){var n=this.eventMap.get(e);if("function"==typeof n)n.call(this,t);else{var i="on"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof this[i]&&this[i].call(this,t)}return this},i.bindExporter=function(){if(this._vConsole&&this.exporter){var e="default"===this.id?"log":this.id;this._vConsole[e]=this.exporter}},i.unbindExporter=function(){var e="default"===this.id?"log":this.id;this._vConsole&&this._vConsole[e]&&(this._vConsole[e]=void 0)},i.getUniqueID=function(e){return void 0===e&&(e=""),(0,t.QI)(e)},(0,e.Z)(n,[{key:"id",get:function(){return this._id},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin ID must be a string.";if(!e)throw"[vConsole] Plugin ID cannot be empty.";this._id=e.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(e){if("string"!=typeof e)throw"[vConsole] Plugin name must be a string.";if(!e)throw"[vConsole] Plugin name cannot be empty.";this._name=e}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(e){if(!e)throw"[vConsole] vConsole cannot be empty";this._vConsole=e,this.bindExporter()}}]),n}(),re=function(e){function t(t,n,i,o){var r;return(r=e.call(this,t,n)||this).CompClass=void 0,r.compInstance=void 0,r.initialProps=void 0,r.CompClass=i,r.initialProps=o,r}(0,r.Z)(t,e);var n=t.prototype;return n.onReady=function(){this.isReady=!0},n.onRenderTab=function(e){var t=document.createElement("div"),n=this.compInstance=new this.CompClass({target:t,props:this.initialProps});e(t.firstElementChild,n.options)},n.onRemove=function(){e.prototype.onRemove&&e.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},t}(oe),ae=__webpack_require__(8665),se=__webpack_require__(9923),le=__webpack_require__(8702);function ce(e){var t,n;return(t=new le.Z({props:{name:e[0]?"success":"copy"}})).$on("click",e[1]),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};1&n[0]&&(i.name=e[0]?"success":"copy"),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function ue(e,n,i){var o=n.content,r=void 0===o?"":o,a=n.handler,s=void 0===a?void 0:a,l={target:document.documentElement},c=!1;return e.$$set=function(e){"content"in e&&i(2,r=e.content),"handler"in e&&i(3,s=e.handler)},[c,function(e){(function(e,t){var n=(void 0===t?{}:t).target,i=void 0===n?document.body:n,o=document.createElement("textarea"),r=document.activeElement;o.value=e,o.setAttribute("readonly",""),o.style.contain="strict",o.style.position="absolute",o.style.left="-9999px",o.style.fontSize="12pt";var a=document.getSelection(),s=!1;a.rangeCount>0&&(s=a.getRangeAt(0)),i.append(o),o.select(),o.selectionStart=0,o.selectionEnd=e.length;try{document.execCommand("copy")}catch(e){}o.remove(),s&&(a.removeAllRanges(),a.addRange(s)),r&&r.focus()})(t.mf(s)?s(r)||"":t.Kn(r)||t.kJ(r)?t.hZ(r,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}):r,l),i(0,c=!0),setTimeout((function(){i(0,c=!1)}),600)},r,s]}var de=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,ue,ce,a.N8,{content:2,handler:3}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"content",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({content:e}),(0,a.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(e){this.$$set({handler:e}),(0,a.yl1)()}}]),n}(a.f_C),he=de,pe=__webpack_require__(845),fe={};pe.Z&&pe.Z.locals&&(fe.locals=pe.Z.locals);var ge,me=0,_e={};_e.styleTagTransform=b(),_e.setAttributes=g(),_e.insert=p().bind(null,"head"),_e.domAPI=d(),_e.insertStyleElement=_(),fe.use=function(e){return _e.options=e||{},me++||(ge=c()(pe.Z,_e)),fe},fe.unuse=function(){me>0&&! --me&&(ge(),ge=null)};var ve=fe;function be(e){var n,i,o,r=t.rE(e[1])+"";return{c:function(){n=(0,a.bGB)("i"),i=(0,a.fLW)(r),o=(0,a.fLW)(":"),(0,a.Ljt)(n,"class","vc-log-key"),(0,a.VHj)(n,"vc-log-key-symbol","symbol"===e[2]),(0,a.VHj)(n,"vc-log-key-private","private"===e[2])},m:function(e,t){(0,a.$Tr)(e,n,t),(0,a.R3I)(n,i),(0,a.$Tr)(e,o,t)},p:function(e,o){2&o&&r!==(r=t.rE(e[1])+"")&&(0,a.rTO)(i,r),4&o&&(0,a.VHj)(n,"vc-log-key-symbol","symbol"===e[2]),4&o&&(0,a.VHj)(n,"vc-log-key-private","private"===e[2])},d:function(e){e&&(0,a.ogt)(n),e&&(0,a.ogt)(o)}}}function Te(e){var t,n,i,o,r=void 0!==e[1]&&be(e);return{c:function(){r&&r.c(),t=(0,a.DhX)(),n=(0,a.bGB)("i"),i=(0,a.fLW)(e[3]),(0,a.Ljt)(n,"class",o="vc-log-val vc-log-val-"+e[4]),(0,a.Ljt)(n,"style",e[0]),(0,a.VHj)(n,"vc-log-val-haskey",void 0!==e[1])},m:function(e,o){r&&r.m(e,o),(0,a.$Tr)(e,t,o),(0,a.$Tr)(e,n,o),(0,a.R3I)(n,i)},p:function(e,s){var l=s[0];void 0!==e[1]?r?r.p(e,l):((r=be(e)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),8&l&&(0,a.rTO)(i,e[3]),16&l&&o!==(o="vc-log-val vc-log-val-"+e[4])&&(0,a.Ljt)(n,"class",o),1&l&&(0,a.Ljt)(n,"style",e[0]),18&l&&(0,a.VHj)(n,"vc-log-val-haskey",void 0!==e[1])},i:a.ZTd,o:a.ZTd,d:function(e){r&&r.d(e),e&&(0,a.ogt)(t),e&&(0,a.ogt)(n)}}}function Ae(e,t,n){var i=t.origData,o=t.style,r=void 0===o?"":o,a=t.dataKey,l=void 0===a?void 0:a,c=t.keyType,u=void 0===c?"":c,d="",h="",p=!1;return(0,s.H3)((function(){ve.use()})),(0,s.ev)((function(){ve.unuse()})),e.$$set=function(e){"origData"in e&&n(5,i=e.origData),"style"in e&&n(0,r=e.style),"dataKey"in e&&n(1,l=e.dataKey),"keyType"in e&&n(2,u=e.keyType)},e.$$.update=function(){if(122&e.$$.dirty){n(6,p=void 0!==l);var t=(0,ae.LH)(i,p);n(4,h=t.valueType),n(3,d=t.text),p||"string"!==h||n(3,d=d.replace(/\\n/g,"\n").replace(/\\t/g,"    "))}},[r,l,u,d,h,i,p]}var ye=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,Ae,Te,a.AqN,{origData:5,style:0,dataKey:1,keyType:2}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"origData",get:function(){return this.$$.ctx[5]},set:function(e){this.$$set({origData:e}),(0,a.yl1)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({style:e}),(0,a.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({dataKey:e}),(0,a.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({keyType:e}),(0,a.yl1)()}}]),n}(a.f_C),Ee=ye,Se=__webpack_require__(1237),Ce={};Se.Z&&Se.Z.locals&&(Ce.locals=Se.Z.locals);var we,xe=0,Me={};Me.styleTagTransform=b(),Me.setAttributes=g(),Me.insert=p().bind(null,"head"),Me.domAPI=d(),Me.insertStyleElement=_(),Ce.use=function(e){return Me.options=e||{},xe++||(we=c()(Se.Z,Me)),Ce},Ce.unuse=function(){xe>0&&! --xe&&(we(),we=null)};var Re=Ce;function Ie(e,t,n){var i=e.slice();return i[19]=t[n],i[21]=n,i}function De(e,t,n){var i=e.slice();return i[19]=t[n],i}function ke(e,t,n){var i=e.slice();return i[19]=t[n],i[21]=n,i}function Le(e){for(var t,n,i,o,r,s,l,c=[],u=new Map,d=[],h=new Map,p=[],f=new Map,g=e[7],m=function(e){return e[19]},_=0;_<g.length;_+=1){var v=ke(e,g,_),b=m(v);u.set(b,c[_]=Pe(b,v))}for(var T=e[11]<e[7].length&&Ne(e),A=e[9],y=function(e){return e[19]},E=0;E<A.length;E+=1){var S=De(e,A,E),C=y(S);h.set(C,d[E]=$e(C,S))}for(var w=e[8],x=function(e){return e[19]},M=0;M<w.length;M+=1){var R=Ie(e,w,M),I=x(R);f.set(I,p[M]=Fe(I,R))}var D=e[12]<e[8].length&&Ue(e),k=e[10]&&Ge(e);return{c:function(){t=(0,a.bGB)("div");for(var e=0;e<c.length;e+=1)c[e].c();n=(0,a.DhX)(),T&&T.c(),i=(0,a.DhX)();for(var l=0;l<d.length;l+=1)d[l].c();o=(0,a.DhX)();for(var u=0;u<p.length;u+=1)p[u].c();r=(0,a.DhX)(),D&&D.c(),s=(0,a.DhX)(),k&&k.c(),(0,a.Ljt)(t,"class","vc-log-tree-child")},m:function(e,u){(0,a.$Tr)(e,t,u);for(var h=0;h<c.length;h+=1)c[h].m(t,null);(0,a.R3I)(t,n),T&&T.m(t,null),(0,a.R3I)(t,i);for(var f=0;f<d.length;f+=1)d[f].m(t,null);(0,a.R3I)(t,o);for(var g=0;g<p.length;g+=1)p[g].m(t,null);(0,a.R3I)(t,r),D&&D.m(t,null),(0,a.R3I)(t,s),k&&k.m(t,null),l=!0},p:function(e,l){67721&l&&(g=e[7],(0,a.dvw)(),c=(0,a.GQg)(c,l,m,1,e,g,u,t,a.cly,Pe,n,ke),(0,a.gbL)()),e[11]<e[7].length?T?T.p(e,l):((T=Ne(e)).c(),T.m(t,i)):T&&(T.d(1),T=null),66057&l&&(A=e[9],(0,a.dvw)(),d=(0,a.GQg)(d,l,y,1,e,A,h,t,a.cly,$e,o,De),(0,a.gbL)()),69897&l&&(w=e[8],(0,a.dvw)(),p=(0,a.GQg)(p,l,x,1,e,w,f,t,a.cly,Fe,r,Ie),(0,a.gbL)()),e[12]<e[8].length?D?D.p(e,l):((D=Ue(e)).c(),D.m(t,s)):D&&(D.d(1),D=null),e[10]?k?(k.p(e,l),1024&l&&(0,a.Ui)(k,1)):((k=Ge(e)).c(),(0,a.Ui)(k,1),k.m(t,null)):k&&((0,a.dvw)(),(0,a.etI)(k,1,1,(function(){k=null})),(0,a.gbL)())},i:function(e){if(!l){for(var t=0;t<g.length;t+=1)(0,a.Ui)(c[t]);for(var n=0;n<A.length;n+=1)(0,a.Ui)(d[n]);for(var i=0;i<w.length;i+=1)(0,a.Ui)(p[i]);(0,a.Ui)(k),l=!0}},o:function(e){for(var t=0;t<c.length;t+=1)(0,a.etI)(c[t]);for(var n=0;n<d.length;n+=1)(0,a.etI)(d[n]);for(var i=0;i<p.length;i+=1)(0,a.etI)(p[i]);(0,a.etI)(k),l=!1},d:function(e){e&&(0,a.ogt)(t);for(var n=0;n<c.length;n+=1)c[n].d();T&&T.d();for(var i=0;i<d.length;i+=1)d[i].d();for(var o=0;o<p.length;o+=1)p[o].d();D&&D.d(),k&&k.d()}}}function Oe(e){var t,n;return t=new We({props:{origData:e[16](e[19]),dataKey:e[19],keyPath:e[3]+"."+e[19],toggle:e[0]}}),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};128&n&&(i.origData=e[16](e[19])),128&n&&(i.dataKey=e[19]),136&n&&(i.keyPath=e[3]+"."+e[19]),1&n&&(i.toggle=e[0]),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function Pe(e,t){var n,i,o,r=t[21]<t[11]&&Oe(t);return{key:e,first:null,c:function(){n=(0,a.cSb)(),r&&r.c(),i=(0,a.cSb)(),this.first=n},m:function(e,t){(0,a.$Tr)(e,n,t),r&&r.m(e,t),(0,a.$Tr)(e,i,t),o=!0},p:function(e,n){(t=e)[21]<t[11]?r?(r.p(t,n),2176&n&&(0,a.Ui)(r,1)):((r=Oe(t)).c(),(0,a.Ui)(r,1),r.m(i.parentNode,i)):r&&((0,a.dvw)(),(0,a.etI)(r,1,1,(function(){r=null})),(0,a.gbL)())},i:function(e){o||((0,a.Ui)(r),o=!0)},o:function(e){(0,a.etI)(r),o=!1},d:function(e){e&&(0,a.ogt)(n),r&&r.d(e),e&&(0,a.ogt)(i)}}}function Ne(e){var t,n,i,o,r=e[14](e[7].length-e[11])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.fLW)(r),(0,a.Ljt)(t,"class","vc-log-tree-loadmore")},m:function(r,s){(0,a.$Tr)(r,t,s),(0,a.R3I)(t,n),i||(o=(0,a.oLt)(t,"click",e[17]),i=!0)},p:function(e,t){2176&t&&r!==(r=e[14](e[7].length-e[11])+"")&&(0,a.rTO)(n,r)},d:function(e){e&&(0,a.ogt)(t),i=!1,o()}}}function $e(e,t){var n,i,o;return i=new We({props:{origData:t[16](t[19]),dataKey:String(t[19]),keyType:"symbol",keyPath:t[3]+"["+String(t[19])+"]",toggle:t[0]}}),{key:e,first:null,c:function(){n=(0,a.cSb)(),(0,a.YCL)(i.$$.fragment),this.first=n},m:function(e,t){(0,a.$Tr)(e,n,t),(0,a.yef)(i,e,t),o=!0},p:function(e,n){t=e;var o={};512&n&&(o.origData=t[16](t[19])),512&n&&(o.dataKey=String(t[19])),520&n&&(o.keyPath=t[3]+"["+String(t[19])+"]"),1&n&&(o.toggle=t[0]),i.$set(o)},i:function(e){o||((0,a.Ui)(i.$$.fragment,e),o=!0)},o:function(e){(0,a.etI)(i.$$.fragment,e),o=!1},d:function(e){e&&(0,a.ogt)(n),(0,a.vpE)(i,e)}}}function Be(e){var t,n;return t=new We({props:{origData:e[16](e[19]),dataKey:e[19],keyType:"private",keyPath:e[3]+"."+e[19],toggle:e[0]}}),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};256&n&&(i.origData=e[16](e[19])),256&n&&(i.dataKey=e[19]),264&n&&(i.keyPath=e[3]+"."+e[19]),1&n&&(i.toggle=e[0]),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function Fe(e,t){var n,i,o,r=t[21]<t[12]&&Be(t);return{key:e,first:null,c:function(){n=(0,a.cSb)(),r&&r.c(),i=(0,a.cSb)(),this.first=n},m:function(e,t){(0,a.$Tr)(e,n,t),r&&r.m(e,t),(0,a.$Tr)(e,i,t),o=!0},p:function(e,n){(t=e)[21]<t[12]?r?(r.p(t,n),4352&n&&(0,a.Ui)(r,1)):((r=Be(t)).c(),(0,a.Ui)(r,1),r.m(i.parentNode,i)):r&&((0,a.dvw)(),(0,a.etI)(r,1,1,(function(){r=null})),(0,a.gbL)())},i:function(e){o||((0,a.Ui)(r),o=!0)},o:function(e){(0,a.etI)(r),o=!1},d:function(e){e&&(0,a.ogt)(n),r&&r.d(e),e&&(0,a.ogt)(i)}}}function Ue(e){var t,n,i,o,r=e[14](e[8].length-e[12])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.fLW)(r),(0,a.Ljt)(t,"class","vc-log-tree-loadmore")},m:function(r,s){(0,a.$Tr)(r,t,s),(0,a.R3I)(t,n),i||(o=(0,a.oLt)(t,"click",e[18]),i=!0)},p:function(e,t){4352&t&&r!==(r=e[14](e[8].length-e[12])+"")&&(0,a.rTO)(n,r)},d:function(e){e&&(0,a.ogt)(t),i=!1,o()}}}function Ge(e){var t,n;return t=new We({props:{origData:e[16]("__proto__"),dataKey:"__proto__",keyType:"private",keyPath:e[3]+".__proto__",toggle:e[0]}}),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};8&n&&(i.keyPath=e[3]+".__proto__"),1&n&&(i.toggle=e[0]),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function Ve(e){var t,n,i,o,r,s,l;i=new Ee({props:{origData:e[1],dataKey:e[2],keyType:e[4]}});var c=e[6]&&e[5]&&Le(e);return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),(0,a.YCL)(i.$$.fragment),o=(0,a.DhX)(),c&&c.c(),(0,a.Ljt)(n,"class","vc-log-tree-node"),(0,a.Ljt)(t,"class","vc-log-tree"),(0,a.Ljt)(t,"data-keypath",e[3]),(0,a.VHj)(t,"vc-toggle",e[5]),(0,a.VHj)(t,"vc-is-tree",e[6])},m:function(u,d){(0,a.$Tr)(u,t,d),(0,a.R3I)(t,n),(0,a.yef)(i,n,null),(0,a.R3I)(t,o),c&&c.m(t,null),r=!0,s||(l=(0,a.oLt)(n,"click",(0,a.XET)(e[15])),s=!0)},p:function(e,n){var o=n[0],s={};2&o&&(s.origData=e[1]),4&o&&(s.dataKey=e[2]),16&o&&(s.keyType=e[4]),i.$set(s),e[6]&&e[5]?c?(c.p(e,o),96&o&&(0,a.Ui)(c,1)):((c=Le(e)).c(),(0,a.Ui)(c,1),c.m(t,null)):c&&((0,a.dvw)(),(0,a.etI)(c,1,1,(function(){c=null})),(0,a.gbL)()),(!r||8&o)&&(0,a.Ljt)(t,"data-keypath",e[3]),32&o&&(0,a.VHj)(t,"vc-toggle",e[5]),64&o&&(0,a.VHj)(t,"vc-is-tree",e[6])},i:function(e){r||((0,a.Ui)(i.$$.fragment,e),(0,a.Ui)(c),r=!0)},o:function(e){(0,a.etI)(i.$$.fragment,e),(0,a.etI)(c),r=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(i),c&&c.d(),s=!1,l()}}}function He(e,n,i){var o,r,a,l=n.origData,c=n.dataKey,u=void 0===c?void 0:c,d=n.keyPath,h=void 0===d?"":d,p=n.keyType,f=void 0===p?"":p,g=n.toggle,m=void 0===g?{}:g,_=!1,v=!1,b=!1,T=50,A=50;(0,s.H3)((function(){Re.use()})),(0,s.ev)((function(){Re.unuse()}));var y=function(e){"enum"===e?i(11,T+=50):"nonEnum"===e&&i(12,A+=50)};return e.$$set=function(e){"origData"in e&&i(1,l=e.origData),"dataKey"in e&&i(2,u=e.dataKey),"keyPath"in e&&i(3,h=e.keyPath),"keyType"in e&&i(4,f=e.keyType),"toggle"in e&&i(0,m=e.toggle)},e.$$.update=function(){1003&e.$$.dirty&&(i(5,_=m[h]||!1),i(6,v=!(l instanceof ae.Tg)&&(t.kJ(l)||t.Kn(l))),v&&_&&(i(7,o=o||t.qr(t.MH(l))),i(8,r=r||t.qr(t.QK(l))),i(9,a=a||t._D(l)),i(10,b=t.Kn(l)&&-1===r.indexOf("__proto__"))))},[m,l,u,h,f,_,v,o,r,a,b,T,A,y,function(e){return"(..."+e+" Key"+(e>1?"s":"")+" Left)"},function(){i(5,_=!_),i(0,m[h]=_,m)},function(e){try{return l[e]}catch(e){return new ae.Tg}},function(){return y("enum")},function(){return y("nonEnum")}]}var We=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,He,Ve,a.AqN,{origData:1,dataKey:2,keyPath:3,keyType:4,toggle:0}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"origData",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({origData:e}),(0,a.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({dataKey:e}),(0,a.yl1)()}},{key:"keyPath",get:function(){return this.$$.ctx[3]},set:function(e){this.$$set({keyPath:e}),(0,a.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[4]},set:function(e){this.$$set({keyType:e}),(0,a.yl1)()}},{key:"toggle",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({toggle:e}),(0,a.yl1)()}}]),n}(a.f_C),ze=We,je=__webpack_require__(7147),Xe={};je.Z&&je.Z.locals&&(Xe.locals=je.Z.locals);var Ye,qe=0,Ke={};Ke.styleTagTransform=b(),Ke.setAttributes=g(),Ke.insert=p().bind(null,"head"),Ke.domAPI=d(),Ke.insertStyleElement=_(),Xe.use=function(e){return Ke.options=e||{},qe++||(Ye=c()(je.Z,Ke)),Xe},Xe.unuse=function(){qe>0&&! --qe&&(Ye(),Ye=null)};var Qe=Xe;function Ze(e,t,n){var i=e.slice();return i[9]=t[n],i[11]=n,i}function Je(e,t,n){var i=e.slice();return i[12]=t[n],i}function et(e){for(var t,n,i,o,r,s,l,c,u,d,h,p,f,g=[],m=new Map,_=e[0].groupLevel&&tt(e),v=e[2]>0&&it(),b=e[1]&&ot(e),T=e[0].repeated&&rt(e),A=e[0].data,y=function(e){return e[11]},E=0;E<A.length;E+=1){var S=Ze(e,A,E),C=y(S);m.set(C,g[E]=lt(C,S))}return u=new he({props:{handler:e[6]}}),{c:function(){t=(0,a.bGB)("div"),_&&_.c(),n=(0,a.DhX)(),v&&v.c(),i=(0,a.DhX)(),b&&b.c(),o=(0,a.DhX)(),T&&T.c(),r=(0,a.DhX)(),s=(0,a.bGB)("div");for(var h=0;h<g.length;h+=1)g[h].c();l=(0,a.DhX)(),c=(0,a.bGB)("div"),(0,a.YCL)(u.$$.fragment),(0,a.Ljt)(s,"class","vc-log-content"),(0,a.Ljt)(c,"class","vc-logrow-icon"),(0,a.Ljt)(t,"class",d="vc-log-row vc-log-"+e[0].type),(0,a.VHj)(t,"vc-log-input","input"===e[0].cmdType),(0,a.VHj)(t,"vc-log-output","output"===e[0].cmdType),(0,a.VHj)(t,"vc-log-group",e[2]>0),(0,a.VHj)(t,"vc-toggle",1===e[2])},m:function(d,m){(0,a.$Tr)(d,t,m),_&&_.m(t,null),(0,a.R3I)(t,n),v&&v.m(t,null),(0,a.R3I)(t,i),b&&b.m(t,null),(0,a.R3I)(t,o),T&&T.m(t,null),(0,a.R3I)(t,r),(0,a.R3I)(t,s);for(var A=0;A<g.length;A+=1)g[A].m(s,null);(0,a.R3I)(t,l),(0,a.R3I)(t,c),(0,a.yef)(u,c,null),h=!0,p||(f=(0,a.oLt)(t,"click",e[5]),p=!0)},p:function(e,l){e[0].groupLevel?_?_.p(e,l):((_=tt(e)).c(),_.m(t,n)):_&&(_.d(1),_=null),e[2]>0?v||((v=it()).c(),v.m(t,i)):v&&(v.d(1),v=null),e[1]?b?b.p(e,l):((b=ot(e)).c(),b.m(t,o)):b&&(b.d(1),b=null),e[0].repeated?T?T.p(e,l):((T=rt(e)).c(),T.m(t,r)):T&&(T.d(1),T=null),17&l&&(A=e[0].data,(0,a.dvw)(),g=(0,a.GQg)(g,l,y,1,e,A,m,s,a.cly,lt,null,Ze),(0,a.gbL)()),(!h||1&l&&d!==(d="vc-log-row vc-log-"+e[0].type))&&(0,a.Ljt)(t,"class",d),1&l&&(0,a.VHj)(t,"vc-log-input","input"===e[0].cmdType),1&l&&(0,a.VHj)(t,"vc-log-output","output"===e[0].cmdType),5&l&&(0,a.VHj)(t,"vc-log-group",e[2]>0),5&l&&(0,a.VHj)(t,"vc-toggle",1===e[2])},i:function(e){if(!h){for(var t=0;t<A.length;t+=1)(0,a.Ui)(g[t]);(0,a.Ui)(u.$$.fragment,e),h=!0}},o:function(e){for(var t=0;t<g.length;t+=1)(0,a.etI)(g[t]);(0,a.etI)(u.$$.fragment,e),h=!1},d:function(e){e&&(0,a.ogt)(t),_&&_.d(),v&&v.d(),b&&b.d(),T&&T.d();for(var n=0;n<g.length;n+=1)g[n].d();(0,a.vpE)(u),p=!1,f()}}}function tt(e){for(var t,n=new Array(e[0].groupLevel),i=[],o=0;o<n.length;o+=1)i[o]=nt(Je(e,n,o));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=(0,a.cSb)()},m:function(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);(0,a.$Tr)(e,t,n)},p:function(e,o){if(1&o){var r;for(n=new Array(e[0].groupLevel),r=0;r<n.length;r+=1){var a=Je(e,n,r);i[r]?i[r].p(a,o):(i[r]=nt(),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d:function(e){(0,a.RMB)(i,e),e&&(0,a.ogt)(t)}}}function nt(e){var t;return{c:function(){t=(0,a.bGB)("i"),(0,a.Ljt)(t,"class","vc-log-padding")},m:function(e,n){(0,a.$Tr)(e,t,n)},p:a.ZTd,d:function(e){e&&(0,a.ogt)(t)}}}function it(e){var t;return{c:function(){t=(0,a.bGB)("div"),(0,a.Ljt)(t,"class","vc-log-group-toggle")},m:function(e,n){(0,a.$Tr)(e,t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function ot(e){var t,n;return{c:function(){t=(0,a.bGB)("div"),n=(0,a.fLW)(e[3]),(0,a.Ljt)(t,"class","vc-log-time")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},p:function(e,t){8&t&&(0,a.rTO)(n,e[3])},d:function(e){e&&(0,a.ogt)(t)}}}function rt(e){var t,n,i,o=e[0].repeated+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("i"),i=(0,a.fLW)(o),(0,a.Ljt)(t,"class","vc-log-repeat")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.R3I)(t,n),(0,a.R3I)(n,i)},p:function(e,t){1&t&&o!==(o=e[0].repeated+"")&&(0,a.rTO)(i,o)},d:function(e){e&&(0,a.ogt)(t)}}}function at(e){var t,n;return t=new Ee({props:{origData:e[9].origData,style:e[9].style}}),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};1&n&&(i.origData=e[9].origData),1&n&&(i.style=e[9].style),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function st(e){var t,n;return t=new ze({props:{origData:e[9].origData,keyPath:String(e[11]),toggle:e[0].toggle}}),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};1&n&&(i.origData=e[9].origData),1&n&&(i.keyPath=String(e[11])),1&n&&(i.toggle=e[0].toggle),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function lt(e,t){var n,i,o,r,s,l,c=[st,at],u=[];function d(e,t){return 1&t&&(i=null),null==i&&(i=!!e[4](e[9].origData)),i?0:1}return o=d(t,-1),r=u[o]=c[o](t),{key:e,first:null,c:function(){n=(0,a.cSb)(),r.c(),s=(0,a.cSb)(),this.first=n},m:function(e,t){(0,a.$Tr)(e,n,t),u[o].m(e,t),(0,a.$Tr)(e,s,t),l=!0},p:function(e,n){var i=o;(o=d(t=e,n))===i?u[o].p(t,n):((0,a.dvw)(),(0,a.etI)(u[i],1,1,(function(){u[i]=null})),(0,a.gbL)(),(r=u[o])?r.p(t,n):(r=u[o]=c[o](t)).c(),(0,a.Ui)(r,1),r.m(s.parentNode,s))},i:function(e){l||((0,a.Ui)(r),l=!0)},o:function(e){(0,a.etI)(r),l=!1},d:function(e){e&&(0,a.ogt)(n),u[o].d(e),e&&(0,a.ogt)(s)}}}function ct(e){var t,n,i=e[0]&&et(e);return{c:function(){i&&i.c(),t=(0,a.cSb)()},m:function(e,o){i&&i.m(e,o),(0,a.$Tr)(e,t,o),n=!0},p:function(e,n){var o=n[0];e[0]?i?(i.p(e,o),1&o&&(0,a.Ui)(i,1)):((i=et(e)).c(),(0,a.Ui)(i,1),i.m(t.parentNode,t)):i&&((0,a.dvw)(),(0,a.etI)(i,1,1,(function(){i=null})),(0,a.gbL)())},i:function(e){n||((0,a.Ui)(i),n=!0)},o:function(e){(0,a.etI)(i),n=!1},d:function(e){i&&i.d(e),e&&(0,a.ogt)(t)}}}function ut(e,n,i){var o=n.log,r=n.showTimestamps,a=void 0!==r&&r,l=n.groupHeader,c=void 0===l?0:l,u=(0,s.x)(),d="",h=function(e,t){var n="000"+e;return n.substring(n.length-t)};return(0,s.H3)((function(){Qe.use()})),(0,s.ev)((function(){Qe.unuse()})),e.$$set=function(e){"log"in e&&i(0,o=e.log),"showTimestamps"in e&&i(1,a=e.showTimestamps),"groupHeader"in e&&i(2,c=e.groupHeader)},e.$$.update=function(){if(3&e.$$.dirty&&a){var t=new Date(o.date);i(3,d=h(t.getHours(),2)+":"+h(t.getMinutes(),2)+":"+h(t.getSeconds(),2)+":"+h(t.getMilliseconds(),3))}},[o,a,c,d,function(e){return!(e instanceof ae.Tg)&&(t.kJ(e)||t.Kn(e))},function(){c>0&&u("groupCollapsed",{groupLabel:o.groupLabel,groupHeader:1===c?2:1,isGroupCollapsed:1===c})},function(){var e=[];try{for(var n=0;n<o.data.length;n++)t.HD(o.data[n].origData)||t.hj(o.data[n].origData)?e.push(o.data[n].origData):e.push(t.hZ(o.data[n].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}))}catch(e){}return e.join(" ")}]}var dt=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,ut,ct,a.AqN,{log:0,showTimestamps:1,groupHeader:2}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"log",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({log:e}),(0,a.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({showTimestamps:e}),(0,a.yl1)()}},{key:"groupHeader",get:function(){return this.$$.ctx[2]},set:function(e){this.$$set({groupHeader:e}),(0,a.yl1)()}}]),n}(a.f_C),ht=dt,pt=__webpack_require__(3903),ft=__webpack_require__(3327),gt={};ft.Z&&ft.Z.locals&&(gt.locals=ft.Z.locals);var mt,_t=0,vt={};vt.styleTagTransform=b(),vt.setAttributes=g(),vt.insert=p().bind(null,"head"),vt.domAPI=d(),vt.insertStyleElement=_(),gt.use=function(e){return vt.options=e||{},_t++||(mt=c()(ft.Z,vt)),gt},gt.unuse=function(){_t>0&&! --_t&&(mt(),mt=null)};var bt=gt,Tt=__webpack_require__(4264),At=__webpack_require__.n(Tt),yt=function(){function e(e){console.debug("[vConsole] `ResizeObserver` is not supported in the browser, vConsole cannot render correctly."),e([{contentRect:{height:30}}],this)}var t=e.prototype;return t.disconnect=function(){},t.observe=function(e,t){},t.unobserve=function(e){},e}(),Et=function(){return"function"==typeof window.ResizeObserver},St=function(){return window.ResizeObserver||yt};function Ct(e){var t,n,i=e[6].default,o=(0,a.nuO)(i,e,e[5],null);return{c:function(){t=(0,a.bGB)("div"),o&&o.c(),(0,a.Ljt)(t,"class","vc-scroller-item"),(0,a.czc)(t,"display",e[0]?"block":"none",!1),(0,a.czc)(t,"top",e[3]?e[1]+"px":"auto",!1)},m:function(i,r){(0,a.$Tr)(i,t,r),o&&o.m(t,null),e[7](t),n=!0},p:function(e,r){var s=r[0];o&&o.p&&(!n||32&s)&&(0,a.kmG)(o,i,e,e[5],n?(0,a.u2N)(i,e[5],s,null):(0,a.VOJ)(e[5]),null),1&s&&(0,a.czc)(t,"display",e[0]?"block":"none",!1),2&s&&(0,a.czc)(t,"top",e[3]?e[1]+"px":"auto",!1)},i:function(e){n||((0,a.Ui)(o,e),n=!0)},o:function(e){(0,a.etI)(o,e),n=!1},d:function(n){n&&(0,a.ogt)(t),o&&o.d(n),e[7](null)}}}function wt(e,t,n){var i,o=t.$$slots,r=void 0===o?{}:o,l=t.$$scope,c=t.show,u=void 0===c?!Et():c,d=t.top,h=t.onResize,p=void 0===h?function(){}:h,f=null,g=Et();return(0,s.H3)((function(){if(u&&p(i.getBoundingClientRect().height),g){var e=St();(f=new e((function(e){var t=e[0];u&&p(t.contentRect.height)}))).observe(i)}})),(0,s.ev)((function(){g&&f.disconnect()})),e.$$set=function(e){"show"in e&&n(0,u=e.show),"top"in e&&n(1,d=e.top),"onResize"in e&&n(4,p=e.onResize),"$$scope"in e&&n(5,l=e.$$scope)},[u,d,i,g,p,l,r,function(e){a.VnY[e?"unshift":"push"]((function(){n(2,i=e)}))}]}var xt=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,wt,Ct,a.N8,{show:0,top:1,onResize:4}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({show:e}),(0,a.yl1)()}},{key:"top",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({top:e}),(0,a.yl1)()}},{key:"onResize",get:function(){return this.$$.ctx[4]},set:function(e){this.$$set({onResize:e}),(0,a.yl1)()}}]),n}(a.f_C),Mt=xt,Rt=function(){function e(){this._x=0,this._endX=0,this._v=0,this._startTime=0,this._endTime=0}var t=e.prototype;return t.set=function(e,t,n,i){this._x=e,this._endX=t,this._v=(t-e)/n,this._startTime=i||Date.now(),this._endTime=this._startTime+n},t.x=function(e){if(this.done(e))return this._endX;var t=e-this._startTime;return this._x+this._v*t},t.dx=function(e){return this.done(e)?0:this._v},t.done=function(e){return e>=this._endTime},e}(),It=function(){function e(e){this._drag=void 0,this._dragLog=void 0,this._x=0,this._v=0,this._startTime=0,this._drag=e,this._dragLog=Math.log(e)}var t=e.prototype;return t.set=function(e,t,n){this._x=e,this._v=t,this._startTime=n||Date.now()},t.x=function(e){var t=(e-this._startTime)/1e3;return this._x+this._v*Math.pow(this._drag,t)/this._dragLog-this._v/this._dragLog},t.dx=function(e){var t=(e-this._startTime)/1e3;return this._v*Math.pow(this._drag,t)},t.done=function(e){return Math.abs(this.dx(e))<3},e}(),Dt=function(e,t){return e>t-.1&&e<t+.1},kt=function(e){return Dt(e,0)},Lt=function(){function e(e,t,n){this._solver=void 0,this._solution=void 0,this._endPosition=void 0,this._startTime=void 0,this._solver=function(e,t,n){var i=n,o=e,r=t,a=i*i-4*o*r;if(0==a){var s=-i/(2*o);return function(e,t){var n=e,i=t/(s*e);return{x:function(e){return(n+i*e)*Math.pow(Math.E,s*e)},dx:function(e){return(s*(n+i*e)+i)*Math.pow(Math.E,s*e)}}}}if(a>0){var l=(-i-Math.sqrt(a))/(2*o),c=(-i+Math.sqrt(a))/(2*o);return function(e,t){var n=(t-l*e)/(c-l),i=e-n;return{x:function(e){return i*Math.pow(Math.E,l*e)+n*Math.pow(Math.E,c*e)},dx:function(e){return i*l*Math.pow(Math.E,l*e)+n*c*Math.pow(Math.E,c*e)}}}}var u=Math.sqrt(4*o*r-i*i)/(2*o),d=-i/2*o;return function(e,t){var n=e,i=(t-d*e)/u;return{x:function(e){return Math.pow(Math.E,d*e)*(n*Math.cos(u*e)+i*Math.sin(u*e))},dx:function(e){var t=Math.pow(Math.E,d*e),o=Math.cos(u*e),r=Math.sin(u*e);return t*(i*u*o-n*u*r)+d*t*(i*r+n*o)}}}}(e,t,n),this._solution=null,this._endPosition=0,this._startTime=0}var t=e.prototype;return t.x=function(e){if(!this._solution)return 0;var t=(e-this._startTime)/1e3;return this._endPosition+this._solution.x(t)},t.dx=function(e){if(!this._solution)return 0;var t=(e-this._startTime)/1e3;return this._solution.dx(t)},t.set=function(e,t,n,i){i||(i=Date.now()),this._endPosition=e,t==e&&kt(n)||(this._solution=this._solver(t-e,n),this._startTime=i)},t.done=function(e){return e||(e=Date.now()),Dt(this.x(e),this._endPosition)&&kt(this.dx(e))},e}(),Ot=function(){function e(e,t){this._enableSpring=t,this._getExtend=void 0,this._friction=new It(.05),this._spring=new Lt(1,90,20),this._toEdge=!1,this._getExtend=e}var t=e.prototype;return t.set=function(e,t,n){if(void 0===n&&(n=Date.now()),this._friction.set(e,t,n),e>0&&t>=0)this._toEdge=!0,this._enableSpring&&this._spring.set(0,e,t,n);else{var i=this._getExtend();e<-i&&t<=0?(this._toEdge=!0,this._enableSpring&&this._spring.set(-i,e,t,n)):this._toEdge=!1}},t.x=function(e){if(this._enableSpring&&this._toEdge)return this._spring.x(e);var t=this._friction.x(e),n=this._friction.dx(e);if(t>0&&n>=0){if(this._toEdge=!0,!this._enableSpring)return 0;this._spring.set(0,t,n,e)}else{var i=this._getExtend();if(t<-i&&n<=0){if(this._toEdge=!0,!this._enableSpring)return-i;this._spring.set(-i,t,n,e)}}return t},t.dx=function(e){return this._toEdge?this._enableSpring?this._spring.dx(e):0:this._friction.dx(e)},t.done=function(e){return this._toEdge?!this._enableSpring||this._spring.done(e):this._friction.done(e)},e}();function Pt(e,t){var n,i;return function o(){if(!i){var r=Date.now();t(r),e.done(r)||(n=requestAnimationFrame(o))}}(),{cancel:function(){cancelAnimationFrame(n),i=!0}}}var Nt=function(){function e(e,t){this._updatePosition=t,this._scrollModel=void 0,this._linearModel=void 0,this._startPosition=0,this._position=0,this._animate=null,this._getExtent=void 0,this._getExtent=e,this._scrollModel=new Ot(e,!1),this._linearModel=new Rt}var t=e.prototype;return t.onTouchStart=function(){var e=this._position;if(e>0)e*=0;else{var t=this._getExtent();e<-t&&(e=0*(e+t)-t)}this._startPosition=this._position=e,this._animate&&(this._animate.cancel(),this._animate=null),this._updatePosition(-e)},t.onTouchMove=function(e,t){var n=t+this._startPosition;if(n>0)n*=0;else{var i=this._getExtent();n<-i&&(n=0*(n+i)-i)}this._position=n,this._updatePosition(-n)},t.onTouchEnd=function(e,t,n,i){var o=this,r=t+this._startPosition;if(r>0)r*=0;else{var a=this._getExtent();r<-a&&(r=0*(r+a)-a)}if(this._position=r,this._updatePosition(-r),!(Math.abs(t)<=.1&&Math.abs(i)<=.1)){var s=this._scrollModel;s.set(r,i),this._animate=Pt(s,(function(e){var t=o._position=s.x(e);o._updatePosition(-t)}))}},t.onTouchCancel=function(){var e=this,t=this._position;if(t>0)t*=0;else{var n=this._getExtent();t<-n&&(t=0*(t+n)-n)}this._position=t;var i=this._scrollModel;i.set(t,0),this._animate=Pt(i,(function(t){var n=e._position=i.x(t);e._updatePosition(-n)}))},t.onWheel=function(e,t){var n=this._position-t;if(this._animate&&(this._animate.cancel(),this._animate=null),n>0)n=0;else{var i=this._getExtent();n<-i&&(n=-i)}this._position=n,this._updatePosition(-n)},t.getPosition=function(){return-this._position},t.updatePosition=function(e){var t=-e-this._position;this._startPosition+=t,this._position+=t;var n=this._position;this._updatePosition(-n);var i=this._scrollModel,o=Date.now();if(!i.done(o)){var r=i.dx(o);i.set(n,r,o)}},t.scrollTo=function(e,t){var n=this;if(this._animate&&(this._animate.cancel(),this._animate=null),t>0){var i=this._linearModel;i.set(this._position,-e,t),this._animate=Pt(this._linearModel,(function(e){var t=n._position=i.x(e);n._updatePosition(-t)}))}else this._updatePosition(e)},e}();function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Bt=function(e){var t=null,n=!1,i=function i(){n=!1,e(),t=requestAnimationFrame((function(){t=null,n&&i()}))};return{trigger:function(){null===t?i():n=!0},cancel:function(){t&&(cancelAnimationFrame(t),n=!1,t=null)}}},Ft=function(){function e(e){var t=this;this._handler=e,this._touchId=null,this._startX=0,this._startY=0,this._historyX=[],this._historyY=[],this._historyTime=[],this._wheelDeltaX=0,this._wheelDeltaY=0,this._onTouchMove=function(){var e=t._historyX[t._historyX.length-1],n=t._historyY[t._historyY.length-1];t._handler.onTouchMove(e,n)},this._onWheel=Bt((function(){var e=t._wheelDeltaX,n=t._wheelDeltaY;t._wheelDeltaX=0,t._wheelDeltaY=0,t._handler.onWheel(e,n)})),this.handleTouchStart=function(e){var n;if("1"!==(null==(n=e.target.dataset)?void 0:n.scrollable)){e.preventDefault();var i=e.touches[0];t._touchId=i.identifier,t._startX=i.pageX,t._startY=i.pageY,t._historyX=[0],t._historyY=[0],t._historyTime=[Date.now()],t._handler.onTouchStart()}},this.handleTouchMove=function(e){var n;if("1"!==(null==(n=e.target.dataset)?void 0:n.scrollable)){e.preventDefault();var i=t._getTouchDelta(e);null!==i&&(t._historyX.push(i.x),t._historyY.push(i.y),t._historyTime.push(Date.now()),t._onTouchMove())}},this.handleTouchEnd=function(e){var n;if("1"!==(null==(n=e.target.dataset)?void 0:n.scrollable)){e.preventDefault();var i=t._getTouchDelta(e);if(null!==i){for(var o=0,r=0,a=Date.now(),s=i.y,l=i.x,c=t._historyTime,u=c.length-1;u>0;u-=1){var d=a-c[u];if(d>30){o=1e3*(l-t._historyX[u])/d,r=1e3*(s-t._historyY[u])/d;break}}t._touchId=null,t._handler.onTouchEnd(i.x,i.y,o,r)}}},this.handleTouchCancel=function(e){var n;"1"!==(null==(n=e.target.dataset)?void 0:n.scrollable)&&(e.preventDefault(),null!==t._getTouchDelta(e)&&(t._touchId=null,t._handler.onTouchCancel()))},this.handleWheel=function(e){var n;"1"!==(null==(n=e.target.dataset)?void 0:n.scrollable)&&(e.preventDefault(),t._wheelDeltaX+=e.deltaX,t._wheelDeltaY+=e.deltaY,t._onWheel.trigger())}}return e.prototype._getTouchDelta=function(e){if(null===this._touchId)return null;for(var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.changedTouches);!(t=n()).done;){var i=t.value;if(i.identifier===this._touchId)return{x:i.pageX-this._startX,y:i.pageY-this._startY}}return null},e}(),Ut=__webpack_require__(1142),Gt={};Ut.Z&&Ut.Z.locals&&(Gt.locals=Ut.Z.locals);var Vt,Ht=0,Wt={};Wt.styleTagTransform=b(),Wt.setAttributes=g(),Wt.insert=p().bind(null,"head"),Wt.domAPI=d(),Wt.insertStyleElement=_(),Gt.use=function(e){return Wt.options=e||{},Ht++||(Vt=c()(Ut.Z,Wt)),Gt},Gt.unuse=function(){Ht>0&&! --Ht&&(Vt(),Vt=null)};var zt=Gt,jt=a.lig.Map,Xt=function(e){return{}},Yt=function(e){return{}},qt=function(e){return{}},Kt=function(e){return{}};function Qt(e,t,n){var i=e.slice();return i[53]=t[n],i[55]=n,i}var Zt=function(e){return{item:1025&e[0]}},Jt=function(e){return{item:e[0][e[53].index]}},en=function(e){return{}},tn=function(e){return{}};function nn(e){var t,n,i=e[24].header,o=(0,a.nuO)(i,e,e[31],tn);return{c:function(){t=(0,a.bGB)("div"),o&&o.c(),(0,a.Ljt)(t,"class","vc-scroller-header")},m:function(i,r){(0,a.$Tr)(i,t,r),o&&o.m(t,null),e[25](t),n=!0},p:function(e,t){o&&o.p&&(!n||1&t[1])&&(0,a.kmG)(o,i,e,e[31],n?(0,a.u2N)(i,e[31],t,en):(0,a.VOJ)(e[31]),tn)},i:function(e){n||((0,a.Ui)(o,e),n=!0)},o:function(e){(0,a.etI)(o,e),n=!1},d:function(n){n&&(0,a.ogt)(t),o&&o.d(n),e[25](null)}}}function on(e){var t,n=e[24].empty,i=(0,a.nuO)(n,e,e[31],Kt);return{c:function(){i&&i.c()},m:function(e,n){i&&i.m(e,n),t=!0},p:function(e,o){i&&i.p&&(!t||1&o[1])&&(0,a.kmG)(i,n,e,e[31],t?(0,a.u2N)(n,e[31],o,qt):(0,a.VOJ)(e[31]),Kt)},i:function(e){t||((0,a.Ui)(i,e),t=!0)},o:function(e){(0,a.etI)(i,e),t=!1},d:function(e){i&&i.d(e)}}}function rn(e){for(var t,n,i=[],o=new jt,r=e[10],s=function(e){return e[53].key},l=0;l<r.length;l+=1){var c=Qt(e,r,l),u=s(c);o.set(u,i[l]=sn(u,c))}return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=(0,a.cSb)()},m:function(e,o){for(var r=0;r<i.length;r+=1)i[r].m(e,o);(0,a.$Tr)(e,t,o),n=!0},p:function(e,n){17921&n[0]|1&n[1]&&(r=e[10],(0,a.dvw)(),i=(0,a.GQg)(i,n,s,1,e,r,o,t.parentNode,a.cly,sn,t,Qt),(0,a.gbL)())},i:function(e){if(!n){for(var t=0;t<r.length;t+=1)(0,a.Ui)(i[t]);n=!0}},o:function(e){for(var t=0;t<i.length;t+=1)(0,a.etI)(i[t]);n=!1},d:function(e){for(var n=0;n<i.length;n+=1)i[n].d(e);e&&(0,a.ogt)(t)}}}function an(e){var t,n,i=e[24].item,o=(0,a.nuO)(i,e,e[31],Jt),r=o||function(e){var t;return{c:function(){t=(0,a.fLW)("Missing template")},m:function(e,n){(0,a.$Tr)(e,t,n)},d:function(e){e&&(0,a.ogt)(t)}}}();return{c:function(){r&&r.c(),t=(0,a.DhX)()},m:function(e,i){r&&r.m(e,i),(0,a.$Tr)(e,t,i),n=!0},p:function(e,t){o&&o.p&&(!n||1025&t[0]|1&t[1])&&(0,a.kmG)(o,i,e,e[31],n?(0,a.u2N)(i,e[31],t,Zt):(0,a.VOJ)(e[31]),Jt)},i:function(e){n||((0,a.Ui)(r,e),n=!0)},o:function(e){(0,a.etI)(r,e),n=!1},d:function(e){r&&r.d(e),e&&(0,a.ogt)(t)}}}function sn(e,t){var n,i,o;function r(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t)[26].apply(e,[t[53]].concat(i))}return i=new Mt({props:{show:t[53].show,top:t[9][t[53].index],onResize:r,$$slots:{default:[an]},$$scope:{ctx:t}}}),{key:e,first:null,c:function(){n=(0,a.cSb)(),(0,a.YCL)(i.$$.fragment),this.first=n},m:function(e,t){(0,a.$Tr)(e,n,t),(0,a.yef)(i,e,t),o=!0},p:function(e,n){t=e;var o={};1024&n[0]&&(o.show=t[53].show),1536&n[0]&&(o.top=t[9][t[53].index]),1024&n[0]&&(o.onResize=r),1025&n[0]|1&n[1]&&(o.$$scope={dirty:n,ctx:t}),i.$set(o)},i:function(e){o||((0,a.Ui)(i.$$.fragment,e),o=!0)},o:function(e){(0,a.etI)(i.$$.fragment,e),o=!1},d:function(e){e&&(0,a.ogt)(n),(0,a.vpE)(i,e)}}}function ln(e){var t,n,i=e[24].footer,o=(0,a.nuO)(i,e,e[31],Yt);return{c:function(){t=(0,a.bGB)("div"),o&&o.c(),(0,a.Ljt)(t,"class","vc-scroller-footer")},m:function(i,r){(0,a.$Tr)(i,t,r),o&&o.m(t,null),e[28](t),n=!0},p:function(e,t){o&&o.p&&(!n||1&t[1])&&(0,a.kmG)(o,i,e,e[31],n?(0,a.u2N)(i,e[31],t,Xt):(0,a.VOJ)(e[31]),Yt)},i:function(e){n||((0,a.Ui)(o,e),n=!0)},o:function(e){(0,a.etI)(o,e),n=!1},d:function(n){n&&(0,a.ogt)(t),o&&o.d(n),e[28](null)}}}function cn(e){var t,n,i=e[7]+"%",o=e[8]+"%";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),(0,a.Ljt)(n,"class","vc-scroller-scrollbar-thumb"),(0,a.czc)(n,"height",i,!1),(0,a.czc)(n,"top",o,!1),(0,a.Ljt)(t,"class","vc-scroller-scrollbar-track"),(0,a.czc)(t,"display",e[7]<100?"block":"none",!1)},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},p:function(e,r){128&r[0]&&i!==(i=e[7]+"%")&&(0,a.czc)(n,"height",i,!1),256&r[0]&&o!==(o=e[8]+"%")&&(0,a.czc)(n,"top",o,!1),128&r[0]&&(0,a.czc)(t,"display",e[7]<100?"block":"none",!1)},d:function(e){e&&(0,a.ogt)(t)}}}function un(e){var t,n,i,o,r,s,l,c,u,d,h,p=e[15].header&&nn(e),f=[rn,on],g=[];function m(e,t){return e[0].length?0:1}r=m(e),s=g[r]=f[r](e);var _=e[15].footer&&ln(e),v=e[1]&&cn(e);return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),p&&p.c(),i=(0,a.DhX)(),o=(0,a.bGB)("div"),s.c(),l=(0,a.DhX)(),_&&_.c(),c=(0,a.DhX)(),v&&v.c(),(0,a.Ljt)(o,"class","vc-scroller-items"),(0,a.Ljt)(n,"class","vc-scroller-contents"),(0,a.Ljt)(t,"class","vc-scroller-viewport"),(0,a.VHj)(t,"static",!e[13])},m:function(s,f){(0,a.$Tr)(s,t,f),(0,a.R3I)(t,n),p&&p.m(n,null),(0,a.R3I)(n,i),(0,a.R3I)(n,o),g[r].m(o,null),e[27](o),(0,a.R3I)(n,l),_&&_.m(n,null),e[29](n),(0,a.R3I)(t,c),v&&v.m(t,null),e[30](t),u=!0,d||(h=[(0,a.oLt)(t,"touchstart",(function(){(0,a.sBU)(e[13]?e[11].handleTouchStart:e[12])&&(e[13]?e[11].handleTouchStart:e[12]).apply(this,arguments)})),(0,a.oLt)(t,"touchmove",(function(){(0,a.sBU)(e[13]?e[11].handleTouchMove:e[12])&&(e[13]?e[11].handleTouchMove:e[12]).apply(this,arguments)})),(0,a.oLt)(t,"touchend",(function(){(0,a.sBU)(e[13]?e[11].handleTouchEnd:e[12])&&(e[13]?e[11].handleTouchEnd:e[12]).apply(this,arguments)})),(0,a.oLt)(t,"touchcancel",(function(){(0,a.sBU)(e[13]?e[11].handleTouchCancel:e[12])&&(e[13]?e[11].handleTouchCancel:e[12]).apply(this,arguments)})),(0,a.oLt)(t,"wheel",(function(){(0,a.sBU)(e[13]?e[11].handleWheel:e[12])&&(e[13]?e[11].handleWheel:e[12]).apply(this,arguments)}))],d=!0)},p:function(l,c){(e=l)[15].header?p?(p.p(e,c),32768&c[0]&&(0,a.Ui)(p,1)):((p=nn(e)).c(),(0,a.Ui)(p,1),p.m(n,i)):p&&((0,a.dvw)(),(0,a.etI)(p,1,1,(function(){p=null})),(0,a.gbL)());var u=r;(r=m(e))===u?g[r].p(e,c):((0,a.dvw)(),(0,a.etI)(g[u],1,1,(function(){g[u]=null})),(0,a.gbL)(),(s=g[r])?s.p(e,c):(s=g[r]=f[r](e)).c(),(0,a.Ui)(s,1),s.m(o,null)),e[15].footer?_?(_.p(e,c),32768&c[0]&&(0,a.Ui)(_,1)):((_=ln(e)).c(),(0,a.Ui)(_,1),_.m(n,null)):_&&((0,a.dvw)(),(0,a.etI)(_,1,1,(function(){_=null})),(0,a.gbL)()),e[1]?v?v.p(e,c):((v=cn(e)).c(),v.m(t,null)):v&&(v.d(1),v=null)},i:function(e){u||((0,a.Ui)(p),(0,a.Ui)(s),(0,a.Ui)(_),u=!0)},o:function(e){(0,a.etI)(p),(0,a.etI)(s),(0,a.etI)(_),u=!1},d:function(n){n&&(0,a.ogt)(t),p&&p.d(),g[r].d(),e[27](null),_&&_.d(),e[29](null),v&&v.d(),e[30](null),d=!1,(0,a.j7q)(h)}}}function dn(e,t,n){var i,o,r,l,c,u,d,h=t.$$slots,p=void 0===h?{}:h,f=t.$$scope,g=(0,a.XGm)(p),m=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},_=t.items,v=t.itemKey,b=void 0===v?void 0:v,T=t.itemHeight,A=void 0===T?void 0:T,y=t.buffer,E=void 0===y?200:y,S=t.stickToBottom,C=void 0!==S&&S,w=t.scrollbar,x=void 0!==w&&w,M=t.start,R=void 0===M?0:M,I=t.end,D=void 0===I?0:I,k=0,L=0,O=0,P=0,N=100,$=0,B=[],F=[],U=[],G=function(){var e=[],t=[],n=0,i=0,o=0,r=0,a=0;return function(s,l,c){if(o===s&&r===l&&a===c)return e;var u=t.length,d=l<=i?Math.max(0,Math.min(l,Math.max(n,Math.min(i-1,c-u)))):l,h=n<=c?Math.max(c,Math.min(s,Math.max(n+1,Math.min(i,d+u)))):c;if(0===u||h-d<u){for(var p=e.length=t.length=c-l,f=0;f<p;f+=1)t[f]=f,e[f]={key:f,index:f+l,show:!0};return n=l,i=c,o=s,r=l,a=c,e}var g=0,m=0,_=0,v=0;i<d||h<n?(_=d,v=d+u):n<d?(m=d-n,_=d,v=d+u):h<i?(m=u-(i-h),_=h-u,v=h):d<=n&&i<=h&&(_=n,v=i);for(var b=d;b<l;b+=1,g+=1){var T=t[(m+g)%u],A=e[b-d];A.key=T,A.index=b,A.show=!1}for(var y=l,E=0;y<c;y+=1){var S=void 0;_<=y&&y<v?(S=t[(m+g)%u],g+=1):(S=u+E,E+=1);var C=y-d;if(C<e.length){var w=e[C];w.key=S,w.index=y,w.show=!0}else e.push({key:S,index:y,show:!0})}for(var x=c;x<h;x+=1,g+=1){var M=t[(m+g)%u],R=e[x-d];R.key=M,R.index=x,R.show=!1}for(var I=0;I<e.length;I+=1)t[I]=e[I].key;return e.sort((function(e,t){return e.key-t.key})),n=d,i=h,o=s,r=l,a=c,e}}(),V=function(){return Math.max(0,P+k+L-O)},H=!0,W=!1,z=[],j=!1,X=!1,Y=Et(),q=function(e,t){var n;(0,s.H3)((function(){var i=e();if(i){t(i.getBoundingClientRect().height),n&&n.disconnect();var o=St();(n=new o((function(e){var n=e[0];t(n.contentRect.height)}))).observe(i)}else t(0),n&&(n.disconnect(),n=null)})),(0,s.ev)((function(){n&&(n.disconnect(),n=null)}))},K=function(){var e=u.getPosition(),t=100/(P+k+L);n(8,$=e*t),n(7,N=O*t)},Q=function(e){var t=V();(e||u.getPosition()>t)&&u.updatePosition(t)},Z=function(e){!function(e,t,i){for(var o=new Map,r=0;r<z.length;r+=1){var a=z[r],s=void 0===b?a:a[b];o.set(s,B[r])}n(9,F.length=B.length=e.length,F);for(var l=0,d=0;d<e.length;d+=1){var h=e[d],p=void 0===b?h:h[b];o.has(p)?B[d]=o.get(p):B[d]=i,n(9,F[d]=l,F),l+=B[d]}P=Math.max(l,t-k-L),z=e,Y?(J(e,u.getPosition(),t),n(6,c.style.height=P+"px",c),Q(H&&C),K()):J(e,0,9e6)}(e,O,A)};function J(e,t,i){for(var o=0,r=0;o<e.length&&r+B[o]<t-E;)r+=B[o],o+=1;for(n(16,R=o);o<e.length&&i&&r<t+i+E;)r+=B[o],o+=1;n(17,D=o),n(10,U=G(e.length,R,D))}var ee=function(e,t){return m(void 0,void 0,void 0,At().mark((function i(){var o,r,a,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(B[e]!==t&&0!==O){i.next=2;break}return i.abrupt("return");case 2:for(o=B[e],B[e]=t,r=_.length,a=e;a<r-1;a+=1)n(9,F[a+1]=F[a]+B[a],F);return P=Math.max(F[r-1]+B[r-1],O-k-L),s=u.getPosition(),W=!0,F[e]+o<s?u.updatePosition(s+t-o):Q(H&&C),i.next=12,new Promise((function(e){return setTimeout(e,0)}));case 12:J(_,u.getPosition(),O),n(6,c.style.height=P+"px",c),K();case 15:case"end":return i.stop()}}),i)})))};(0,s.H3)((function(){n(23,j=!0),zt.use()})),(0,s.ev)((function(){zt.unuse()})),Y&&(Y&&(u=u||new Nt(V,(function(e){return m(void 0,void 0,void 0,At().mark((function t(){var i;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=V(),H=Math.abs(e-i)<=1,n(5,l.style.transform="translateY("+-e+"px) translateZ(0)",l),K(),!W){t.next=8;break}W=!1,t.next=11;break;case 8:return t.next=10,new Promise((function(e){return setTimeout(e,0)}));case 10:J(_,e,O);case 11:case"end":return t.stop()}}),t)})))})),n(11,d=d||new Ft(u))),!X&&Y&&(q((function(){return r}),(function(e){return m(void 0,void 0,void 0,At().mark((function t(){var i,o;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O!==e){t.next=2;break}return t.abrupt("return");case 2:for(O=e,i=0,o=0;o<_.length;o+=1)i+=B[o];return P=Math.max(i,O-L),n(6,c.style.height=P+"px",c),t.next=9,new Promise((function(e){return setTimeout(e,0)}));case 9:Z(_),J(_,u.getPosition(),O),0!==O&&Q(H&&C),K();case 13:case"end":return t.stop()}}),t)})))})),q((function(){return o}),(function(e){if(L!==e){L=e;for(var t=0,i=0;i<_.length;i+=1)t+=B[i];P=Math.max(t,O-k-L),n(6,c.style.height=P+"px",c),0!==O&&Q(H&&C),K()}})),q((function(){return i}),(function(e){k!==e&&(k=e,Z(_),K())}))));var te={scrollTo:function(e){if(Y){var t=F[Math.max(0,Math.min(_.length-1,e))],n=Math.min(V(),t),i=Math.min(Math.floor(500*Math.abs(u.getPosition()-n)/2e3),500);u.scrollTo(n,i)}}};return e.$$set=function(e){"items"in e&&n(0,_=e.items),"itemKey"in e&&n(18,b=e.itemKey),"itemHeight"in e&&n(19,A=e.itemHeight),"buffer"in e&&n(20,E=e.buffer),"stickToBottom"in e&&n(21,C=e.stickToBottom),"scrollbar"in e&&n(1,x=e.scrollbar),"start"in e&&n(16,R=e.start),"end"in e&&n(17,D=e.end),"$$scope"in e&&n(31,f=e.$$scope)},e.$$.update=function(){8388609&e.$$.dirty[0]&&j&&(Y||n(4,r.parentElement.style.height="auto",r),Z(_),X=!0)},[_,x,i,o,r,l,c,N,$,F,U,d,function(){},Y,ee,g,R,D,b,A,E,C,te,j,p,function(e){a.VnY[e?"unshift":"push"]((function(){n(2,i=e)}))},function(e,t){return ee(e.index,t)},function(e){a.VnY[e?"unshift":"push"]((function(){n(6,c=e)}))},function(e){a.VnY[e?"unshift":"push"]((function(){n(3,o=e)}))},function(e){a.VnY[e?"unshift":"push"]((function(){n(5,l=e)}))},function(e){a.VnY[e?"unshift":"push"]((function(){n(4,r=e),n(23,j),n(13,Y),n(0,_)}))},f]}var hn=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,dn,un,a.N8,{items:0,itemKey:18,itemHeight:19,buffer:20,stickToBottom:21,scrollbar:1,start:16,end:17,handler:22},null,[-1,-1]),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"items",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({items:e}),(0,a.yl1)()}},{key:"itemKey",get:function(){return this.$$.ctx[18]},set:function(e){this.$$set({itemKey:e}),(0,a.yl1)()}},{key:"itemHeight",get:function(){return this.$$.ctx[19]},set:function(e){this.$$set({itemHeight:e}),(0,a.yl1)()}},{key:"buffer",get:function(){return this.$$.ctx[20]},set:function(e){this.$$set({buffer:e}),(0,a.yl1)()}},{key:"stickToBottom",get:function(){return this.$$.ctx[21]},set:function(e){this.$$set({stickToBottom:e}),(0,a.yl1)()}},{key:"scrollbar",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({scrollbar:e}),(0,a.yl1)()}},{key:"start",get:function(){return this.$$.ctx[16]},set:function(e){this.$$set({start:e}),(0,a.yl1)()}},{key:"end",get:function(){return this.$$.ctx[17]},set:function(e){this.$$set({end:e}),(0,a.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[22]}}]),n}(a.f_C),pn=hn;function fn(e){var t;return{c:function(){(t=(0,a.bGB)("div")).textContent="Empty",(0,a.Ljt)(t,"slot","empty"),(0,a.Ljt)(t,"class","vc-plugin-empty")},m:function(e,n){(0,a.$Tr)(e,t,n)},p:a.ZTd,d:function(e){e&&(0,a.ogt)(t)}}}function gn(e){var t,n;return(t=new ht({props:{slot:"item",log:e[16],showTimestamps:e[1],groupHeader:e[16].groupHeader}})).$on("groupCollapsed",e[6]),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:function(e,n){var i={};65536&n&&(i.log=e[16]),2&n&&(i.showTimestamps=e[1]),65536&n&&(i.groupHeader=e[16].groupHeader),t.$set(i)},i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function mn(e){var t,n;return(t=new pt.Z({})).$on("filterText",e[5]),{c:function(){(0,a.YCL)(t.$$.fragment)},m:function(e,i){(0,a.yef)(t,e,i),n=!0},p:a.ZTd,i:function(e){n||((0,a.Ui)(t.$$.fragment,e),n=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),n=!1},d:function(e){(0,a.vpE)(t,e)}}}function _n(e){var t,n,i=e[0]&&mn(e);return{c:function(){i&&i.c(),t=(0,a.cSb)()},m:function(e,o){i&&i.m(e,o),(0,a.$Tr)(e,t,o),n=!0},p:function(e,n){e[0]?i?(i.p(e,n),1&n&&(0,a.Ui)(i,1)):((i=mn(e)).c(),(0,a.Ui)(i,1),i.m(t.parentNode,t)):i&&((0,a.dvw)(),(0,a.etI)(i,1,1,(function(){i=null})),(0,a.gbL)())},i:function(e){n||((0,a.Ui)(i),n=!0)},o:function(e){(0,a.etI)(i),n=!1},d:function(e){i&&i.d(e),e&&(0,a.ogt)(t)}}}function vn(e){var t,n,i,o;function r(t){e[15](t)}var s={items:e[4],itemKey:"_id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{footer:[_n],item:[gn,function(e){return{16:e.item}},function(e){return e.item?65536:0}],empty:[fn]},$$scope:{ctx:e}};return void 0!==e[3]&&(s.handler=e[3]),n=new pn({props:s}),a.VnY.push((function(){return(0,a.akz)(n,"handler",r)})),{c:function(){t=(0,a.bGB)("div"),(0,a.YCL)(n.$$.fragment),(0,a.Ljt)(t,"class","vc-plugin-content"),(0,a.VHj)(t,"vc-logs-has-cmd",e[0])},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.yef)(n,t,null),o=!0},p:function(e,o){var r=o[0],s={};16&r&&(s.items=e[4]),196611&r&&(s.$$scope={dirty:r,ctx:e}),!i&&8&r&&(i=!0,s.handler=e[3],(0,a.hjT)((function(){return i=!1}))),n.$set(s),1&r&&(0,a.VHj)(t,"vc-logs-has-cmd",e[0])},i:function(e){o||((0,a.Ui)(n.$$.fragment,e),o=!0)},o:function(e){(0,a.etI)(n.$$.fragment,e),o=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(n)}}}function bn(e,t,n){var i,o=a.ZTd;e.$$.on_destroy.push((function(){return o()}));var r,l,c=t.pluginId,u=void 0===c?"default":c,d=t.showCmd,h=void 0!==d&&d,p=t.filterType,f=void 0===p?"all":p,g=t.showTimestamps,m=void 0!==g&&g,_=!1,v="",b=[];return(0,s.H3)((function(){bt.use()})),(0,s.ev)((function(){bt.unuse()})),e.$$set=function(e){"pluginId"in e&&n(7,u=e.pluginId),"showCmd"in e&&n(0,h=e.showCmd),"filterType"in e&&n(8,f=e.filterType),"showTimestamps"in e&&n(1,m=e.showTimestamps)},e.$$.update=function(){29056&e.$$.dirty&&(_||(n(2,r=se.O.get(u)),o(),o=(0,a.LdU)(r,(function(e){return n(14,i=e)})),n(12,_=!0)),n(4,b=i.logList.filter((function(e){return("all"===f||f===e.type)&&(""===v||(0,ae.HX)(e,v))&&!e.groupCollapsed}))))},[h,m,r,l,b,function(e){n(13,v=e.detail.filterText||"")},function(e){var t=e.detail.groupLabel,n=e.detail.groupHeader,i=e.detail.isGroupCollapsed;r.update((function(e){return e.logList.forEach((function(e){e.groupLabel===t&&(e.groupHeader>0?e.groupHeader=n:e.groupCollapsed=i)})),e}))},u,f,function(){l.scrollTo(0)},function(){l.scrollTo(b.length-1)},{fixedHeight:!0},_,v,i,function(e){n(3,l=e)}]}var Tn=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,bn,vn,a.N8,{pluginId:7,showCmd:0,filterType:8,showTimestamps:1,scrollToTop:9,scrollToBottom:10,options:11}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"pluginId",get:function(){return this.$$.ctx[7]},set:function(e){this.$$set({pluginId:e}),(0,a.yl1)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({showCmd:e}),(0,a.yl1)()}},{key:"filterType",get:function(){return this.$$.ctx[8]},set:function(e){this.$$set({filterType:e}),(0,a.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(e){this.$$set({showTimestamps:e}),(0,a.yl1)()}},{key:"scrollToTop",get:function(){return this.$$.ctx[9]}},{key:"scrollToBottom",get:function(){return this.$$.ctx[10]}},{key:"options",get:function(){return this.$$.ctx[11]}}]),n}(a.f_C),An=Tn,yn=__webpack_require__(5629),En=function(){function e(e){this.model=void 0,this.pluginId=void 0,this.pluginId=e}return e.prototype.destroy=function(){this.model=void 0},e}(),Sn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).model=yn.W.getSingleton(yn.W,"VConsoleLogModel"),t}(0,r.Z)(t,e);var n=t.prototype;return n.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["log"].concat(t))},n.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["info"].concat(t))},n.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["debug"].concat(t))},n.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["warn"].concat(t))},n.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.addLog.apply(this,["error"].concat(t))},n.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},n.addLog=function(e){if(this.model){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.unshift("["+this.pluginId+"]"),this.model.addLog({type:e,origData:n},{noOrig:!0})}},t}(En),Cn=function(e){function t(t,n){var i;return(i=e.call(this,t,n,An,{pluginId:t,filterType:"all"})||this).model=yn.W.getSingleton(yn.W,"VConsoleLogModel"),i.isReady=!1,i.isShow=!1,i.isInBottom=!0,i.model.bindPlugin(t),i.exporter=new Sn(t),i}(0,r.Z)(t,e);var n=t.prototype;return n.onReady=function(){var t,n;e.prototype.onReady.call(this),this.model.maxLogNumber=Number(null==(t=this.vConsole.option.log)?void 0:t.maxLogNumber)||1e3,this.compInstance.showTimestamps=!(null==(n=this.vConsole.option.log)||!n.showTimestamps)},n.onRemove=function(){e.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},n.onAddTopBar=function(e){for(var t=this,n=["All","Log","Info","Warn","Error"],i=[],o=0;o<n.length;o++)i.push({name:n[o],data:{type:n[o].toLowerCase()},actived:0===o,className:"",onClick:function(e,n){if(n.type===t.compInstance.filterType)return!1;t.compInstance.filterType=n.type}});i[0].className="vc-actived",e(i)},n.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearPluginLog(t.id),t.vConsole.triggerEvent("clearLog")}},{name:"Top",global:!1,onClick:function(e){t.compInstance.scrollToTop()}},{name:"Bottom",global:!1,onClick:function(e){t.compInstance.scrollToBottom()}}])},n.onUpdateOption=function(){var e,t,n,i;(null==(e=this.vConsole.option.log)?void 0:e.maxLogNumber)!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number(null==(n=this.vConsole.option.log)?void 0:n.maxLogNumber)||1e3),!(null==(t=this.vConsole.option.log)||!t.showTimestamps)!==this.compInstance.showTimestamps&&(this.compInstance.showTimestamps=!(null==(i=this.vConsole.option.log)||!i.showTimestamps))},t}(re),wn=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).onErrorHandler=void 0,t.resourceErrorHandler=void 0,t.rejectionHandler=void 0,t}(0,r.Z)(n,e);var i=n.prototype;return i.onReady=function(){e.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},i.onRemove=function(){e.prototype.onRemove.call(this),this.unbindErrors()},i.bindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},i.unbindErrors=function(){t.FJ(window)&&t.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},i.catchWindowOnError=function(){var e=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(t){var n=t.message;t.filename&&(n+="\\n\\t"+t.filename.replace(location.origin,""),(t.lineno||t.colno)&&(n+=":"+t.lineno+":"+t.colno)),n+="\\n"+(!!t.error&&!!t.error.stack&&t.error.stack.toString()||""),e.model.addLog({type:"error",origData:[n]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},i.catchResourceError=function(){var e=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(t){var n=t.target;if(["link","video","script","img","audio"].indexOf(n.localName)>-1){var i=n.href||n.src||n.currentSrc;e.model.addLog({type:"error",origData:["GET <"+n.localName+"> error: "+i]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},i.catchUnhandledRejection=function(){var e=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(t){var n=t&&t.reason,i="Uncaught (in promise) ",o=[i,n];n instanceof Error&&(o=[i,{name:n.name,message:n.message,stack:n.stack}]),e.model.addLog({type:"error",origData:o},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},n}(Cn),xn=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.onReady=function(){e.prototype.onReady.call(this),this.printSystemInfo()},n.printSystemInfo=function(){var e=navigator.userAgent,t=[],n=e.match(/MicroMessenger\/([\d\.]+)/i),i=n&&n[1]?n[1]:null;"servicewechat.com"===location.host||console.info("[system]","Location:",location.href);var o=e.match(/(ipod).*\s([\d_]+)/i),r=e.match(/(ipad).*\s([\d_]+)/i),a=e.match(/(iphone)\sos\s([\d_]+)/i),s=e.match(/(android)\s([\d\.]+)/i),l=e.match(/(Mac OS X)\s([\d_]+)/i);t=[],s?t.push("Android "+s[2]):a?t.push("iPhone, iOS "+a[2].replace(/_/g,".")):r?t.push("iPad, iOS "+r[2].replace(/_/g,".")):o?t.push("iPod, iOS "+o[2].replace(/_/g,".")):l&&t.push("Mac, MacOS "+l[2].replace(/_/g,".")),i&&t.push("WeChat "+i),console.info("[system]","Client:",t.length?t.join(", "):"Unknown");var c=e.toLowerCase().match(/ nettype\/([^ ]+)/g);c&&c[0]&&(t=[(c=c[0].split("/"))[1]],console.info("[system]","Network:",t.length?t.join(", "):"Unknown")),console.info("[system]","UA:",e),setTimeout((function(){var e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){var t=e.timing;t.navigationStart&&console.info("[system]","navigationStart:",t.navigationStart),t.navigationStart&&t.domainLookupStart&&console.info("[system]","navigation:",t.domainLookupStart-t.navigationStart+"ms"),t.domainLookupEnd&&t.domainLookupStart&&console.info("[system]","dns:",t.domainLookupEnd-t.domainLookupStart+"ms"),t.connectEnd&&t.connectStart&&(t.connectEnd&&t.secureConnectionStart?console.info("[system]","tcp (ssl):",t.connectEnd-t.connectStart+"ms ("+(t.connectEnd-t.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",t.connectEnd-t.connectStart+"ms")),t.responseStart&&t.requestStart&&console.info("[system]","request:",t.responseStart-t.requestStart+"ms"),t.responseEnd&&t.responseStart&&console.info("[system]","response:",t.responseEnd-t.responseStart+"ms"),t.domComplete&&t.domLoading&&(t.domContentLoadedEventStart&&t.domLoading?console.info("[system]","domComplete (domLoaded):",t.domComplete-t.domLoading+"ms ("+(t.domContentLoadedEventStart-t.domLoading)+"ms)"):console.info("[system]","domComplete:",t.domComplete-t.domLoading+"ms")),t.loadEventEnd&&t.loadEventStart&&console.info("[system]","loadEvent:",t.loadEventEnd-t.loadEventStart+"ms"),t.navigationStart&&t.loadEventEnd&&console.info("[system]","total (DOM):",t.loadEventEnd-t.navigationStart+"ms ("+(t.domComplete-t.navigationStart)+"ms)")}}),0)},t}(Cn),Mn=__webpack_require__(3313),Rn=__webpack_require__(643);function In(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kn=function(e,n){void 0===n&&(n={}),t.Kn(n)||(n={});var i=e?e.split("?"):[];if(i.shift(),i.length>0)for(var o,r=In(i=i.join("?").split("&"));!(o=r()).done;){var a=o.value.split("=");try{n[a[0]]=decodeURIComponent(a[1])}catch(e){n[a[0]]=a[1]}}return n},Ln=function(e,n){var i="";switch(e){case"":case"text":case"json":if(t.HD(n))try{i=JSON.parse(n),i=t.hZ(i,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0})}catch(e){i=t.id(String(n),1e4)}else t.Kn(n)||t.kJ(n)?i=t.hZ(n,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0}):void 0!==n&&(i=Object.prototype.toString.call(n));break;default:void 0!==n&&(i=Object.prototype.toString.call(n))}return i},On=function(e){if(!e)return null;var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(t){var i=e.split("&");if(1===i.length)n=e;else{n={};for(var o,r=In(i);!(o=r()).done;){var a=o.value.split("=");n[a[0]]=void 0===a[1]?"undefined":a[1]}}}else if(t.TW(e)){n={};for(var s,l=In(e);!(s=l()).done;){var c=s.value,u=c[0],d=c[1];n[u]="string"==typeof d?d:"[object Object]"}}else n=t.PO(e)?e:"[object "+t.zl(e)+"]";return n},Pn=function(e){return void 0===e&&(e=""),e.startsWith("//")&&(e=""+new URL(window.location.href).protocol+e),e.startsWith("http")?new URL(e):new URL(e,window.location.href)},Nn=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.cancelState=0,this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.responseSize=0,this.responseSizeText="",this.startTime=0,this.startTimeText="",this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.noVConsole=!1,this.id=(0,t.QI)()},$n=function(e){function t(n){var i;return(i=e.call(this)||this)._response=void 0,new Proxy(n,t.Handler)||(0,o.Z)(i)}return(0,r.Z)(t,e),t}(Nn);$n.Handler={get:function(e,t){return"response"===t?e._response:Reflect.get(e,t)},set:function(e,t,n){var i;switch(t){case"response":return e._response=Ln(e.responseType,n),!0;case"url":var o=(null==(i=n=String(n))?void 0:i.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(e,"name",o);var r=kn(n,e.getData);Reflect.set(e,"getData",r);break;case"status":var a=String(n)||"Unknown";Reflect.set(e,"statusText",a);break;case"startTime":if(n&&e.endTime){var s=e.endTime-n;Reflect.set(e,"costTime",s)}break;case"endTime":if(n&&e.startTime){var l=n-e.startTime;Reflect.set(e,"costTime",l)}}return Reflect.set(e,t,n)}};var Bn=function(){function e(e,t){var n=this;this.XMLReq=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.XMLReq=e,this.XMLReq.onreadystatechange=function(){n.onReadyStateChange()},this.XMLReq.onabort=function(){n.onAbort()},this.XMLReq.ontimeout=function(){n.onTimeout()},this.item=new Nn,this.item.requestType="xhr",this.onUpdateCallback=t}var n=e.prototype;return n.get=function(e,t){switch(t){case"_noVConsole":return this.item.noVConsole;case"open":return this.getOpen(e);case"send":return this.getSend(e);case"setRequestHeader":return this.getSetRequestHeader(e);default:var n=Reflect.get(e,t);return"function"==typeof n?n.bind(e):n}},n.set=function(e,t,n){switch(t){case"_noVConsole":return void(this.item.noVConsole=!!n);case"onreadystatechange":return this.setOnReadyStateChange(e,t,n);case"onabort":return this.setOnAbort(e,t,n);case"ontimeout":return this.setOnTimeout(e,t,n)}return Reflect.set(e,t,n)},n.onReadyStateChange=function(){this.item.readyState=this.XMLReq.readyState,this.item.responseType=this.XMLReq.responseType,this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-this.item.startTime,this.updateItemByReadyState(),this.item.response=Ln(this.item.responseType,this.item.response),this.triggerUpdate()},n.onAbort=function(){this.item.cancelState=1,this.item.statusText="Abort",this.triggerUpdate()},n.onTimeout=function(){this.item.cancelState=3,this.item.statusText="Timeout",this.triggerUpdate()},n.triggerUpdate=function(){this.item.noVConsole||this.onUpdateCallback(this.item)},n.getOpen=function(e){var t=this,n=Reflect.get(e,"open");return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];var a=o[0],s=o[1];return t.item.method=a?a.toUpperCase():"GET",t.item.url=s||"",t.item.name=t.item.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",t.item.getData=kn(t.item.url,{}),t.triggerUpdate(),n.apply(e,o)}},n.getSend=function(e){var t=this,n=Reflect.get(e,"send");return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];var a=o[0];return t.item.postData=On(a),t.triggerUpdate(),n.apply(e,o)}},n.getSetRequestHeader=function(e){var t=this,n=Reflect.get(e,"setRequestHeader");return function(){t.item.requestHeader||(t.item.requestHeader={});for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t.item.requestHeader[o[0]]=o[1],t.triggerUpdate(),n.apply(e,o)}},n.setOnReadyStateChange=function(e,t,n){var i=this;return Reflect.set(e,t,(function(){i.onReadyStateChange();for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];n.apply(e,o)}))},n.setOnAbort=function(e,t,n){var i=this;return Reflect.set(e,t,(function(){i.onAbort();for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];n.apply(e,o)}))},n.setOnTimeout=function(e,t,n){var i=this;return Reflect.set(e,t,(function(){i.onTimeout();for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];n.apply(e,o)}))},n.updateItemByReadyState=function(){switch(this.XMLReq.readyState){case 0:case 1:if(this.item.status=0,this.item.statusText="Pending",!this.item.startTime){this.item.startTime=Date.now();var e=(0,t._3)(this.item.startTime);this.item.startTimeText=e.year+"-"+e.month+"-"+e.day+" "+e.hour+":"+e.minute+":"+e.second+"."+e.millisecond}break;case 2:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.item.header={};for(var n=(this.XMLReq.getAllResponseHeaders()||"").split("\n"),i=0;i<n.length;i++){var o=n[i];if(o){var r=o.split(": "),a=r[0],s=r.slice(1).join(": ");this.item.header[a]=s}}break;case 3:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,t.KL)(this.item.responseSize));break;case 4:this.item.status=this.XMLReq.status||this.item.status||0,this.item.statusText=String(this.item.status),this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=this.XMLReq.response,this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,t.KL)(this.item.responseSize));break;default:this.item.status=this.XMLReq.status,this.item.statusText="Unknown"}},e}(),Fn=function(){function e(){}return e.create=function(e){return new Proxy(XMLHttpRequest,{construct:function(t){var n=new t;return new Proxy(n,new Bn(n,e))}})},e}();function Un(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Fn.origXMLHttpRequest=XMLHttpRequest;var Vn=function(){function e(e,t,n){this.resp=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.resp=e,this.item=t,this.onUpdateCallback=n,this.mockReader()}var n=e.prototype;return n.set=function(e,t,n){return Reflect.set(e,t,n)},n.get=function(e,t){var n=this,i=Reflect.get(e,t);switch(t){case"arrayBuffer":case"blob":case"formData":case"json":case"text":return function(){return n.item.responseType=t.toLowerCase(),i.apply(e).then((function(e){return n.item.response=Ln(n.item.responseType,e),n.onUpdateCallback(n.item),e}))}}return"function"==typeof i?i.bind(e):i},n.mockReader=function(){var e,n=this;if(this.resp.body&&"function"==typeof this.resp.body.getReader){var i=this.resp.body.getReader;this.resp.body.getReader=function(){var o=i.apply(n.resp.body);if(4===n.item.readyState)return o;var r=o.read,a=o.cancel;return n.item.responseType="arraybuffer",o.read=function(){return r.apply(o).then((function(i){if(e){var o=new Uint8Array(e.length+i.value.length);o.set(e),o.set(i.value,e.length),e=o}else e=new Uint8Array(i.value);return n.item.endTime=Date.now(),n.item.costTime=n.item.endTime-(n.item.startTime||n.item.endTime),n.item.readyState=i.done?4:3,n.item.statusText=i.done?String(n.item.status):"Loading",n.item.responseSize=e.length,n.item.responseSizeText=t.KL(n.item.responseSize),i.done&&(n.item.response=Ln(n.item.responseType,e)),n.onUpdateCallback(n.item),i}))},o.cancel=function(){n.item.cancelState=2,n.item.statusText="Cancel",n.item.endTime=Date.now(),n.item.costTime=n.item.endTime-(n.item.startTime||n.item.endTime),n.item.response=Ln(n.item.responseType,e),n.onUpdateCallback(n.item);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return a.apply(o,i)},o}}},e}(),Hn=function(){function e(e){this.onUpdateCallback=void 0,this.onUpdateCallback=e}var n=e.prototype;return n.apply=function(e,t,n){var i=this,o=n[0],r=n[1],a=new Nn;return this.beforeFetch(a,o,r),e.apply(window,n).then(this.afterFetch(a)).catch((function(e){throw a.endTime=Date.now(),a.costTime=a.endTime-(a.startTime||a.endTime),i.onUpdateCallback(a),e}))},n.beforeFetch=function(e,n,i){var o,r="GET",a=null;if(t.HD(n)?(r=(null==i?void 0:i.method)||"GET",o=Pn(n),a=(null==i?void 0:i.headers)||null):(r=n.method||"GET",o=Pn(n.url),a=n.headers),e.method=r,e.requestType="fetch",e.requestHeader=a,e.url=o.toString(),e.name=(o.pathname.split("/").pop()||"")+o.search,e.status=0,e.statusText="Pending",e.readyState=1,!e.startTime){e.startTime=Date.now();var s=t._3(e.startTime);e.startTimeText=s.year+"-"+s.month+"-"+s.day+" "+s.hour+":"+s.minute+":"+s.second+"."+s.millisecond}if("[object Headers]"===Object.prototype.toString.call(a)){e.requestHeader={};for(var l,c=Un(a);!(l=c()).done;){var u=l.value,d=u[0],h=u[1];e.requestHeader[d]=h}}else e.requestHeader=a;if(o.search&&o.searchParams){e.getData={};for(var p,f=Un(o.searchParams);!(p=f()).done;){var g=p.value,m=g[0],_=g[1];e.getData[m]=_}}null!=i&&i.body&&(e.postData=On(i.body)),this.onUpdateCallback(e)},n.afterFetch=function(e){var n=this;return function(i){e.endTime=Date.now(),e.costTime=e.endTime-(e.startTime||e.endTime),e.status=i.status,e.statusText=String(i.status);var o=!1;e.header={};for(var r,a=Un(i.headers);!(r=a()).done;){var s=r.value,l=s[0],c=s[1];e.header[l]=c,o=c.toLowerCase().indexOf("chunked")>-1||o}return o?e.readyState=3:(e.readyState=4,n.handleResponseBody(i.clone(),e).then((function(i){e.responseSize="string"==typeof i?i.length:i.byteLength,e.responseSizeText=t.KL(e.responseSize),e.response=Ln(e.responseType,i),n.onUpdateCallback(e)}))),n.onUpdateCallback(e),new Proxy(i,new Vn(i,e,n.onUpdateCallback))}},n.handleResponseBody=function(e,t){var n=e.headers.get("content-type");return n&&n.includes("application/json")?(t.responseType="json",e.text()):n&&(n.includes("text/html")||n.includes("text/plain"))?(t.responseType="text",e.text()):(t.responseType="arraybuffer",e.arrayBuffer())},e}(),Wn=function(){function e(){}return e.create=function(e){return new Proxy(fetch,new Hn(e))},e}();function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Wn.origFetch=fetch;var jn=function(e){return e instanceof Blob?e.type:e instanceof FormData?"multipart/form-data":e instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"},Xn=function(){function e(e){this.onUpdateCallback=void 0,this.onUpdateCallback=e}return e.prototype.apply=function(e,t,n){var i=n[0],o=n[1],r=new Nn,a=Pn(i);if(r.method="POST",r.url=i,r.name=(a.pathname.split("/").pop()||"")+a.search,r.requestType="ping",r.requestHeader={"Content-Type":jn(o)},r.status=0,r.statusText="Pending",a.search&&a.searchParams){r.getData={};for(var s,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(a.searchParams);!(s=l()).done;){var c=s.value,u=c[0],d=c[1];r.getData[u]=d}}r.postData=On(o),r.startTime||(r.startTime=Date.now()),this.onUpdateCallback(r);var h=e.apply(t,n);return h?(r.endTime=Date.now(),r.costTime=r.endTime-(r.startTime||r.endTime),r.status=0,r.statusText="Sent",r.readyState=4):(r.status=500,r.statusText="Unknown"),this.onUpdateCallback(r),h},e}(),Yn=function(){function e(){}return e.create=function(e){return new Proxy(navigator.sendBeacon,new Xn(e))},e}();Yn.origSendBeacon=navigator.sendBeacon;var qn=(0,Mn.fZ)({}),Kn=function(e){function t(){var t;return(t=e.call(this)||this).maxNetworkNumber=1e3,t.ignoreUrlRegExp=void 0,t.itemCounter=0,t.mockXHR(),t.mockFetch(),t.mockSendBeacon(),t}(0,r.Z)(t,e);var n=t.prototype;return n.unMock=function(){window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=Fn.origXMLHttpRequest),window.hasOwnProperty("fetch")&&(window.fetch=Wn.origFetch),window.navigator.sendBeacon&&(window.navigator.sendBeacon=Yn.origSendBeacon)},n.clearLog=function(){qn.set({})},n.updateRequest=function(e,t){var n,i=t.url;if(!i||null==(n=this.ignoreUrlRegExp)||!n.test(i)){var o=(0,Mn.U2)(qn),r=!!o[e];if(r){var a=o[e];for(var s in t)a[s]=t[s];t=a}qn.update((function(n){return n[e]=t,n})),r||(O.x.updateTime(),this.limitListLength())}},n.mockXHR=function(){var e=this;window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=Fn.create((function(t){e.updateRequest(t.id,t)})))},n.mockFetch=function(){var e=this;window.hasOwnProperty("fetch")&&(window.fetch=Wn.create((function(t){e.updateRequest(t.id,t)})))},n.mockSendBeacon=function(){var e,t,n=this;null!=(e=window)&&null!=(t=e.navigator)&&t.sendBeacon&&(window.navigator.sendBeacon=Yn.create((function(e){n.updateRequest(e.id,e)})))},n.limitListLength=function(){var e=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var t=(0,Mn.U2)(qn),n=Object.keys(t);n.length>this.maxNetworkNumber-10&&qn.update((function(t){for(var i=n.splice(0,n.length-e.maxNetworkNumber+10),o=0;o<i.length;o++)t[i[o]]=void 0,delete t[i[o]];return t}))}},t}(Rn.N),Qn=__webpack_require__(8747),Zn={};Qn.Z&&Qn.Z.locals&&(Zn.locals=Qn.Z.locals);var Jn,ei=0,ti={};ti.styleTagTransform=b(),ti.setAttributes=g(),ti.insert=p().bind(null,"head"),ti.domAPI=d(),ti.insertStyleElement=_(),Zn.use=function(e){return ti.options=e||{},ei++||(Jn=c()(Qn.Z,ti)),Zn},Zn.unuse=function(){ei>0&&! --ei&&(Jn(),Jn=null)};var ni=Zn;function ii(e,t,n){var i=e.slice();return i[11]=t[n][0],i[12]=t[n][1],i}function oi(e,t,n){var i=e.slice();return i[11]=t[n][0],i[12]=t[n][1],i}function ri(e,t,n){var i=e.slice();return i[11]=t[n][0],i[12]=t[n][1],i}function ai(e,t,n){var i=e.slice();return i[11]=t[n][0],i[12]=t[n][1],i}function si(e){var t,n,i;return{c:function(){t=(0,a.fLW)("("),n=(0,a.fLW)(e[0]),i=(0,a.fLW)(")")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.$Tr)(e,n,o),(0,a.$Tr)(e,i,o)},p:function(e,t){1&t&&(0,a.rTO)(n,e[0])},d:function(e){e&&(0,a.ogt)(t),e&&(0,a.ogt)(n),e&&(0,a.ogt)(i)}}}function li(e){var t,n,i,o,r,s,l=e[0]>0&&si(e);return{c:function(){t=(0,a.bGB)("dl"),n=(0,a.bGB)("dd"),i=(0,a.fLW)("Name "),l&&l.c(),(o=(0,a.bGB)("dd")).textContent="Method",(r=(0,a.bGB)("dd")).textContent="Status",(s=(0,a.bGB)("dd")).textContent="Time",(0,a.Ljt)(n,"class","vc-table-col vc-table-col-4"),(0,a.Ljt)(o,"class","vc-table-col"),(0,a.Ljt)(r,"class","vc-table-col"),(0,a.Ljt)(s,"class","vc-table-col"),(0,a.Ljt)(t,"class","vc-table-row")},m:function(e,c){(0,a.$Tr)(e,t,c),(0,a.R3I)(t,n),(0,a.R3I)(n,i),l&&l.m(n,null),(0,a.R3I)(t,o),(0,a.R3I)(t,r),(0,a.R3I)(t,s)},p:function(e,t){e[0]>0?l?l.p(e,t):((l=si(e)).c(),l.m(n,null)):l&&(l.d(1),l=null)},d:function(e){e&&(0,a.ogt)(t),l&&l.d()}}}function ci(e){var t;return{c:function(){(t=(0,a.bGB)("div")).textContent="Empty",(0,a.Ljt)(t,"slot","empty"),(0,a.Ljt)(t,"class","vc-plugin-empty")},m:function(e,n){(0,a.$Tr)(e,t,n)},p:a.ZTd,d:function(e){e&&(0,a.ogt)(t)}}}function ui(e){var t,n,i,o,r,s,l,c;s=new he({props:{content:e[10].requestHeader}});for(var u=Object.entries(e[10].requestHeader),d=[],h=0;h<u.length;h+=1)d[h]=di(ai(e,u,h));return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("dl"),i=(0,a.bGB)("dt"),o=(0,a.fLW)("Request Headers\n                "),r=(0,a.bGB)("i"),(0,a.YCL)(s.$$.fragment),l=(0,a.DhX)();for(var e=0;e<d.length;e+=1)d[e].c();(0,a.Ljt)(r,"class","vc-table-row-icon"),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,a.$Tr)(e,t,u),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(i,o),(0,a.R3I)(i,r),(0,a.yef)(s,r,null),(0,a.R3I)(t,l);for(var h=0;h<d.length;h+=1)d[h].m(t,null);c=!0},p:function(e,n){var i={};if(1024&n&&(i.content=e[10].requestHeader),s.$set(i),1040&n){var o;for(u=Object.entries(e[10].requestHeader),o=0;o<u.length;o+=1){var r=ai(e,u,o);d[o]?d[o].p(r,n):(d[o]=di(r),d[o].c(),d[o].m(t,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}},i:function(e){c||((0,a.Ui)(s.$$.fragment,e),c=!0)},o:function(e){(0,a.etI)(s.$$.fragment,e),c=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(s),(0,a.RMB)(d,e)}}}function di(e){var t,n,i,o,r,s,l,c=e[11]+"",u=e[4](e[12])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),i=(0,a.fLW)(c),o=(0,a.DhX)(),r=(0,a.bGB)("div"),s=(0,a.fLW)(u),l=(0,a.DhX)(),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(r,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,c){(0,a.$Tr)(e,t,c),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(t,o),(0,a.R3I)(t,r),(0,a.R3I)(r,s),(0,a.R3I)(t,l)},p:function(e,t){1024&t&&c!==(c=e[11]+"")&&(0,a.rTO)(i,c),1024&t&&u!==(u=e[4](e[12])+"")&&(0,a.rTO)(s,u)},d:function(e){e&&(0,a.ogt)(t)}}}function hi(e){var t,n,i,o,r,s,l,c;s=new he({props:{content:e[10].getData}});for(var u=Object.entries(e[10].getData),d=[],h=0;h<u.length;h+=1)d[h]=pi(ri(e,u,h));return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("dl"),i=(0,a.bGB)("dt"),o=(0,a.fLW)("Query String Parameters\n                "),r=(0,a.bGB)("i"),(0,a.YCL)(s.$$.fragment),l=(0,a.DhX)();for(var e=0;e<d.length;e+=1)d[e].c();(0,a.Ljt)(r,"class","vc-table-row-icon"),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,a.$Tr)(e,t,u),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(i,o),(0,a.R3I)(i,r),(0,a.yef)(s,r,null),(0,a.R3I)(t,l);for(var h=0;h<d.length;h+=1)d[h].m(t,null);c=!0},p:function(e,n){var i={};if(1024&n&&(i.content=e[10].getData),s.$set(i),1040&n){var o;for(u=Object.entries(e[10].getData),o=0;o<u.length;o+=1){var r=ri(e,u,o);d[o]?d[o].p(r,n):(d[o]=pi(r),d[o].c(),d[o].m(t,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}},i:function(e){c||((0,a.Ui)(s.$$.fragment,e),c=!0)},o:function(e){(0,a.etI)(s.$$.fragment,e),c=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(s),(0,a.RMB)(d,e)}}}function pi(e){var t,n,i,o,r,s,l,c=e[11]+"",u=e[4](e[12])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),i=(0,a.fLW)(c),o=(0,a.DhX)(),r=(0,a.bGB)("div"),s=(0,a.fLW)(u),l=(0,a.DhX)(),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(r,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,c){(0,a.$Tr)(e,t,c),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(t,o),(0,a.R3I)(t,r),(0,a.R3I)(r,s),(0,a.R3I)(t,l)},p:function(e,t){1024&t&&c!==(c=e[11]+"")&&(0,a.rTO)(i,c),1024&t&&u!==(u=e[4](e[12])+"")&&(0,a.rTO)(s,u)},d:function(e){e&&(0,a.ogt)(t)}}}function fi(e){var t,n,i,o,r,s,l,c;function u(e,t){return"string"==typeof e[10].postData?mi:gi}s=new he({props:{content:e[10].postData}});var d=u(e),h=d(e);return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("dl"),i=(0,a.bGB)("dt"),o=(0,a.fLW)("Request Payload\n                "),r=(0,a.bGB)("i"),(0,a.YCL)(s.$$.fragment),l=(0,a.DhX)(),h.c(),(0,a.Ljt)(r,"class","vc-table-row-icon"),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,a.$Tr)(e,t,u),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(i,o),(0,a.R3I)(i,r),(0,a.yef)(s,r,null),(0,a.R3I)(t,l),h.m(t,null),c=!0},p:function(e,n){var i={};1024&n&&(i.content=e[10].postData),s.$set(i),d===(d=u(e))&&h?h.p(e,n):(h.d(1),(h=d(e))&&(h.c(),h.m(t,null)))},i:function(e){c||((0,a.Ui)(s.$$.fragment,e),c=!0)},o:function(e){(0,a.etI)(s.$$.fragment,e),c=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(s),h.d()}}}function gi(e){for(var t,n=Object.entries(e[10].postData),i=[],o=0;o<n.length;o+=1)i[o]=_i(oi(e,n,o));return{c:function(){for(var e=0;e<i.length;e+=1)i[e].c();t=(0,a.cSb)()},m:function(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);(0,a.$Tr)(e,t,n)},p:function(e,o){if(1040&o){var r;for(n=Object.entries(e[10].postData),r=0;r<n.length;r+=1){var a=oi(e,n,r);i[r]?i[r].p(a,o):(i[r]=_i(a),i[r].c(),i[r].m(t.parentNode,t))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d:function(e){(0,a.RMB)(i,e),e&&(0,a.ogt)(t)}}}function mi(e){var t,n,i,o=e[10].postData+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("pre"),i=(0,a.fLW)(o),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,a.Ljt)(n,"data-scrollable","1"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.R3I)(t,n),(0,a.R3I)(n,i)},p:function(e,t){1024&t&&o!==(o=e[10].postData+"")&&(0,a.rTO)(i,o)},d:function(e){e&&(0,a.ogt)(t)}}}function _i(e){var t,n,i,o,r,s,l,c=e[11]+"",u=e[4](e[12])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),i=(0,a.fLW)(c),o=(0,a.DhX)(),r=(0,a.bGB)("div"),s=(0,a.fLW)(u),l=(0,a.DhX)(),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(r,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(r,"data-scrollable","1"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,c){(0,a.$Tr)(e,t,c),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(t,o),(0,a.R3I)(t,r),(0,a.R3I)(r,s),(0,a.R3I)(t,l)},p:function(e,t){1024&t&&c!==(c=e[11]+"")&&(0,a.rTO)(i,c),1024&t&&u!==(u=e[4](e[12])+"")&&(0,a.rTO)(s,u)},d:function(e){e&&(0,a.ogt)(t)}}}function vi(e){var t,n,i,o,r,s,l,c;s=new he({props:{content:e[10].header}});for(var u=Object.entries(e[10].header),d=[],h=0;h<u.length;h+=1)d[h]=bi(ii(e,u,h));return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("dl"),i=(0,a.bGB)("dt"),o=(0,a.fLW)("Response Headers\n                "),r=(0,a.bGB)("i"),(0,a.YCL)(s.$$.fragment),l=(0,a.DhX)();for(var e=0;e<d.length;e+=1)d[e].c();(0,a.Ljt)(r,"class","vc-table-row-icon"),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(n,"class","vc-table-row vc-left-border")},m:function(e,u){(0,a.$Tr)(e,t,u),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(i,o),(0,a.R3I)(i,r),(0,a.yef)(s,r,null),(0,a.R3I)(t,l);for(var h=0;h<d.length;h+=1)d[h].m(t,null);c=!0},p:function(e,n){var i={};if(1024&n&&(i.content=e[10].header),s.$set(i),1040&n){var o;for(u=Object.entries(e[10].header),o=0;o<u.length;o+=1){var r=ii(e,u,o);d[o]?d[o].p(r,n):(d[o]=bi(r),d[o].c(),d[o].m(t,null))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}},i:function(e){c||((0,a.Ui)(s.$$.fragment,e),c=!0)},o:function(e){(0,a.etI)(s.$$.fragment,e),c=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(s),(0,a.RMB)(d,e)}}}function bi(e){var t,n,i,o,r,s,l,c=e[11]+"",u=e[4](e[12])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),i=(0,a.fLW)(c),o=(0,a.DhX)(),r=(0,a.bGB)("div"),s=(0,a.fLW)(u),l=(0,a.DhX)(),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(r,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,c){(0,a.$Tr)(e,t,c),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(t,o),(0,a.R3I)(t,r),(0,a.R3I)(r,s),(0,a.R3I)(t,l)},p:function(e,t){1024&t&&c!==(c=e[11]+"")&&(0,a.rTO)(i,c),1024&t&&u!==(u=e[4](e[12])+"")&&(0,a.rTO)(s,u)},d:function(e){e&&(0,a.ogt)(t)}}}function Ti(e){var t,n,i,o,r,s=e[10].responseSizeText+"";return{c:function(){t=(0,a.bGB)("div"),(n=(0,a.bGB)("div")).textContent="Size",i=(0,a.DhX)(),o=(0,a.bGB)("div"),r=(0,a.fLW)(s),(0,a.Ljt)(n,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(o,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(t,"class","vc-table-row vc-left-border vc-small")},m:function(e,s){(0,a.$Tr)(e,t,s),(0,a.R3I)(t,n),(0,a.R3I)(t,i),(0,a.R3I)(t,o),(0,a.R3I)(o,r)},p:function(e,t){1024&t&&s!==(s=e[10].responseSizeText+"")&&(0,a.rTO)(r,s)},d:function(e){e&&(0,a.ogt)(t)}}}function Ai(e){var t,n,i,o,r,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y,E,S,C,w,x,M,R,I,D,k,L,O,P,N,$,B,F,U,G,V,H,W,z,j,X,Y,q,K,Q,Z,J,ee,te,ne,ie,oe,re,ae,se,le,ce,ue,de,pe,fe,ge,me,_e=e[10].name+"",ve=e[10].method+"",be=e[10].statusText+"",Te=e[10].costTime+"",Ae=e[10].url+"",ye=e[10].method+"",Ee=e[10].requestType+"",Se=e[10].status+"",Ce=e[10].startTimeText+"",we=(e[10].response||"")+"";function xe(){return e[7](e[10])}b=new he({props:{handler:e[3],content:e[10]}});var Me=null!==e[10].requestHeader&&ui(e),Re=null!==e[10].getData&&hi(e),Ie=null!==e[10].postData&&fi(e),De=null!==e[10].header&&vi(e);ae=new he({props:{content:e[10].response}});var ke=e[10].responseSize>0&&Ti(e);return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("dl"),i=(0,a.bGB)("dd"),o=(0,a.fLW)(_e),r=(0,a.bGB)("dd"),s=(0,a.fLW)(ve),l=(0,a.bGB)("dd"),c=(0,a.fLW)(be),u=(0,a.bGB)("dd"),d=(0,a.fLW)(Te),h=(0,a.DhX)(),p=(0,a.bGB)("div"),f=(0,a.bGB)("div"),g=(0,a.bGB)("dl"),m=(0,a.bGB)("dt"),_=(0,a.fLW)("General\n                "),v=(0,a.bGB)("i"),(0,a.YCL)(b.$$.fragment),T=(0,a.DhX)(),A=(0,a.bGB)("div"),(y=(0,a.bGB)("div")).textContent="URL",E=(0,a.DhX)(),S=(0,a.bGB)("div"),C=(0,a.fLW)(Ae),w=(0,a.DhX)(),x=(0,a.bGB)("div"),(M=(0,a.bGB)("div")).textContent="Method",R=(0,a.DhX)(),I=(0,a.bGB)("div"),D=(0,a.fLW)(ye),k=(0,a.DhX)(),L=(0,a.bGB)("div"),(O=(0,a.bGB)("div")).textContent="Request Type",P=(0,a.DhX)(),N=(0,a.bGB)("div"),$=(0,a.fLW)(Ee),B=(0,a.DhX)(),F=(0,a.bGB)("div"),(U=(0,a.bGB)("div")).textContent="HTTP Status",G=(0,a.DhX)(),V=(0,a.bGB)("div"),H=(0,a.fLW)(Se),W=(0,a.DhX)(),z=(0,a.bGB)("div"),(j=(0,a.bGB)("div")).textContent="Start Time",X=(0,a.DhX)(),Y=(0,a.bGB)("div"),q=(0,a.fLW)(Ce),K=(0,a.DhX)(),Me&&Me.c(),Q=(0,a.DhX)(),Re&&Re.c(),Z=(0,a.DhX)(),Ie&&Ie.c(),J=(0,a.DhX)(),De&&De.c(),ee=(0,a.DhX)(),te=(0,a.bGB)("div"),ne=(0,a.bGB)("dl"),ie=(0,a.bGB)("dt"),oe=(0,a.fLW)("Response\n                "),re=(0,a.bGB)("i"),(0,a.YCL)(ae.$$.fragment),se=(0,a.DhX)(),ke&&ke.c(),le=(0,a.DhX)(),ce=(0,a.bGB)("div"),ue=(0,a.bGB)("pre"),de=(0,a.fLW)(we),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-4"),(0,a.Ljt)(r,"class","vc-table-col"),(0,a.Ljt)(l,"class","vc-table-col"),(0,a.Ljt)(u,"class","vc-table-col"),(0,a.Ljt)(n,"class","vc-table-row vc-group-preview"),(0,a.VHj)(n,"vc-table-row-error",e[10].status>=400),(0,a.Ljt)(v,"class","vc-table-row-icon"),(0,a.Ljt)(m,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(g,"class","vc-table-row vc-left-border"),(0,a.Ljt)(y,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(S,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(A,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(M,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(I,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(x,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(N,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(L,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(U,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(V,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(F,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(j,"class","vc-table-col vc-table-col-2"),(0,a.Ljt)(Y,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,a.Ljt)(z,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(re,"class","vc-table-row-icon"),(0,a.Ljt)(ie,"class","vc-table-col vc-table-col-title"),(0,a.Ljt)(ne,"class","vc-table-row vc-left-border"),(0,a.Ljt)(ue,"class","vc-table-col vc-max-height vc-min-height"),(0,a.Ljt)(ue,"data-scrollable","1"),(0,a.Ljt)(ce,"class","vc-table-row vc-left-border vc-small"),(0,a.Ljt)(p,"class","vc-group-detail"),(0,a.Ljt)(t,"slot","item"),(0,a.Ljt)(t,"class","vc-group"),(0,a.Ljt)(t,"id",pe=e[10].id),(0,a.VHj)(t,"vc-actived",e[10].actived)},m:function(e,he){(0,a.$Tr)(e,t,he),(0,a.R3I)(t,n),(0,a.R3I)(n,i),(0,a.R3I)(i,o),(0,a.R3I)(n,r),(0,a.R3I)(r,s),(0,a.R3I)(n,l),(0,a.R3I)(l,c),(0,a.R3I)(n,u),(0,a.R3I)(u,d),(0,a.R3I)(t,h),(0,a.R3I)(t,p),(0,a.R3I)(p,f),(0,a.R3I)(f,g),(0,a.R3I)(g,m),(0,a.R3I)(m,_),(0,a.R3I)(m,v),(0,a.yef)(b,v,null),(0,a.R3I)(f,T),(0,a.R3I)(f,A),(0,a.R3I)(A,y),(0,a.R3I)(A,E),(0,a.R3I)(A,S),(0,a.R3I)(S,C),(0,a.R3I)(f,w),(0,a.R3I)(f,x),(0,a.R3I)(x,M),(0,a.R3I)(x,R),(0,a.R3I)(x,I),(0,a.R3I)(I,D),(0,a.R3I)(f,k),(0,a.R3I)(f,L),(0,a.R3I)(L,O),(0,a.R3I)(L,P),(0,a.R3I)(L,N),(0,a.R3I)(N,$),(0,a.R3I)(f,B),(0,a.R3I)(f,F),(0,a.R3I)(F,U),(0,a.R3I)(F,G),(0,a.R3I)(F,V),(0,a.R3I)(V,H),(0,a.R3I)(f,W),(0,a.R3I)(f,z),(0,a.R3I)(z,j),(0,a.R3I)(z,X),(0,a.R3I)(z,Y),(0,a.R3I)(Y,q),(0,a.R3I)(p,K),Me&&Me.m(p,null),(0,a.R3I)(p,Q),Re&&Re.m(p,null),(0,a.R3I)(p,Z),Ie&&Ie.m(p,null),(0,a.R3I)(p,J),De&&De.m(p,null),(0,a.R3I)(p,ee),(0,a.R3I)(p,te),(0,a.R3I)(te,ne),(0,a.R3I)(ne,ie),(0,a.R3I)(ie,oe),(0,a.R3I)(ie,re),(0,a.yef)(ae,re,null),(0,a.R3I)(te,se),ke&&ke.m(te,null),(0,a.R3I)(te,le),(0,a.R3I)(te,ce),(0,a.R3I)(ce,ue),(0,a.R3I)(ue,de),fe=!0,ge||(me=(0,a.oLt)(n,"click",xe),ge=!0)},p:function(i,r){e=i,(!fe||1024&r)&&_e!==(_e=e[10].name+"")&&(0,a.rTO)(o,_e),(!fe||1024&r)&&ve!==(ve=e[10].method+"")&&(0,a.rTO)(s,ve),(!fe||1024&r)&&be!==(be=e[10].statusText+"")&&(0,a.rTO)(c,be),(!fe||1024&r)&&Te!==(Te=e[10].costTime+"")&&(0,a.rTO)(d,Te),1024&r&&(0,a.VHj)(n,"vc-table-row-error",e[10].status>=400);var l={};1024&r&&(l.content=e[10]),b.$set(l),(!fe||1024&r)&&Ae!==(Ae=e[10].url+"")&&(0,a.rTO)(C,Ae),(!fe||1024&r)&&ye!==(ye=e[10].method+"")&&(0,a.rTO)(D,ye),(!fe||1024&r)&&Ee!==(Ee=e[10].requestType+"")&&(0,a.rTO)($,Ee),(!fe||1024&r)&&Se!==(Se=e[10].status+"")&&(0,a.rTO)(H,Se),(!fe||1024&r)&&Ce!==(Ce=e[10].startTimeText+"")&&(0,a.rTO)(q,Ce),null!==e[10].requestHeader?Me?(Me.p(e,r),1024&r&&(0,a.Ui)(Me,1)):((Me=ui(e)).c(),(0,a.Ui)(Me,1),Me.m(p,Q)):Me&&((0,a.dvw)(),(0,a.etI)(Me,1,1,(function(){Me=null})),(0,a.gbL)()),null!==e[10].getData?Re?(Re.p(e,r),1024&r&&(0,a.Ui)(Re,1)):((Re=hi(e)).c(),(0,a.Ui)(Re,1),Re.m(p,Z)):Re&&((0,a.dvw)(),(0,a.etI)(Re,1,1,(function(){Re=null})),(0,a.gbL)()),null!==e[10].postData?Ie?(Ie.p(e,r),1024&r&&(0,a.Ui)(Ie,1)):((Ie=fi(e)).c(),(0,a.Ui)(Ie,1),Ie.m(p,J)):Ie&&((0,a.dvw)(),(0,a.etI)(Ie,1,1,(function(){Ie=null})),(0,a.gbL)()),null!==e[10].header?De?(De.p(e,r),1024&r&&(0,a.Ui)(De,1)):((De=vi(e)).c(),(0,a.Ui)(De,1),De.m(p,ee)):De&&((0,a.dvw)(),(0,a.etI)(De,1,1,(function(){De=null})),(0,a.gbL)());var u={};1024&r&&(u.content=e[10].response),ae.$set(u),e[10].responseSize>0?ke?ke.p(e,r):((ke=Ti(e)).c(),ke.m(te,le)):ke&&(ke.d(1),ke=null),(!fe||1024&r)&&we!==(we=(e[10].response||"")+"")&&(0,a.rTO)(de,we),(!fe||1024&r&&pe!==(pe=e[10].id))&&(0,a.Ljt)(t,"id",pe),1024&r&&(0,a.VHj)(t,"vc-actived",e[10].actived)},i:function(e){fe||((0,a.Ui)(b.$$.fragment,e),(0,a.Ui)(Me),(0,a.Ui)(Re),(0,a.Ui)(Ie),(0,a.Ui)(De),(0,a.Ui)(ae.$$.fragment,e),fe=!0)},o:function(e){(0,a.etI)(b.$$.fragment,e),(0,a.etI)(Me),(0,a.etI)(Re),(0,a.etI)(Ie),(0,a.etI)(De),(0,a.etI)(ae.$$.fragment,e),fe=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(b),Me&&Me.d(),Re&&Re.d(),Ie&&Ie.d(),De&&De.d(),(0,a.vpE)(ae),ke&&ke.d(),ge=!1,me()}}}function yi(e){var t,n,i,o;return i=new pn({props:{items:e[1],itemKey:"id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{item:[Ai,function(e){return{10:e.item}},function(e){return e.item?1024:0}],empty:[ci],header:[li]},$$scope:{ctx:e}}}),{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("div"),(0,a.YCL)(i.$$.fragment),(0,a.Ljt)(n,"class","vc-plugin-content"),(0,a.Ljt)(t,"class","vc-table")},m:function(e,r){(0,a.$Tr)(e,t,r),(0,a.R3I)(t,n),(0,a.yef)(i,n,null),o=!0},p:function(e,t){var n=t[0],o={};2&n&&(o.items=e[1]),2098177&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o)},i:function(e){o||((0,a.Ui)(i.$$.fragment,e),o=!0)},o:function(e){(0,a.etI)(i.$$.fragment,e),o=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(i)}}}function Ei(e,n,i){var o;(0,a.FIv)(e,qn,(function(e){return i(6,o=e)}));var r=0,l=function(e){i(0,r=Object.keys(e).length)},c=qn.subscribe(l);l(o);var u=[],d=function(e){(0,a.fxP)(qn,o[e].actived=!o[e].actived,o)};return(0,s.H3)((function(){ni.use()})),(0,s.ev)((function(){c(),ni.unuse()})),e.$$.update=function(){64&e.$$.dirty&&i(1,u=Object.values(o))},[r,u,d,function(e){var n="curl -X "+e.method;return"string"==typeof e.postData?n+=" -d '"+e.postData+"'":"object"==typeof e.postData&&null!==e.postData&&(n+=" -d '"+t.hZ(e.postData)+"'"),n+" '"+e.url+"'"},function(e){return t.Kn(e)||t.kJ(e)?t.hZ(e,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):e},{fixedHeight:!0},o,function(e){return d(e.id)}]}var Si=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,Ei,yi,a.N8,{options:5}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"options",get:function(){return this.$$.ctx[5]}}]),n}(a.f_C),Ci=Si,wi=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).model=Kn.getSingleton(Kn,"VConsoleNetworkModel"),t}(0,r.Z)(t,e);var n=t.prototype;return n.add=function(e){var t=new $n(new Nn);for(var n in e)t[n]=e[n];return t.startTime=t.startTime||Date.now(),t.requestType=t.requestType||"custom",this.model.updateRequest(t.id,t),t},n.update=function(e,t){this.model.updateRequest(e,t)},n.clear=function(){this.model.clearLog()},t}(En),xi=function(e){function t(t,n,i){var o;return void 0===i&&(i={}),(o=e.call(this,t,n,Ci,i)||this).model=Kn.getSingleton(Kn,"VConsoleNetworkModel"),o.exporter=void 0,o.exporter=new wi(t),o}(0,r.Z)(t,e);var n=t.prototype;return n.onReady=function(){e.prototype.onReady.call(this),this.onUpdateOption()},n.onAddTool=function(e){var t=this;e([{name:"Clear",global:!1,onClick:function(e){t.model.clearLog()}}])},n.onRemove=function(){e.prototype.onRemove.call(this),this.model&&this.model.unMock()},n.onUpdateOption=function(){var e,t,n;(null==(e=this.vConsole.option.network)?void 0:e.maxNetworkNumber)!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number(null==(n=this.vConsole.option.network)?void 0:n.maxNetworkNumber)||1e3),null!=(t=this.vConsole.option.network)&&t.ignoreUrlRegExp&&(this.model.ignoreUrlRegExp=this.vConsole.option.network.ignoreUrlRegExp)},t}(re),Mi=__webpack_require__(8679),Ri=__webpack_require__.n(Mi),Ii=(0,Mn.fZ)(),Di=(0,Mn.fZ)(),ki=__webpack_require__(5670),Li={};ki.Z&&ki.Z.locals&&(Li.locals=ki.Z.locals);var Oi,Pi=0,Ni={};Ni.styleTagTransform=b(),Ni.setAttributes=g(),Ni.insert=p().bind(null,"head"),Ni.domAPI=d(),Ni.insertStyleElement=_(),Li.use=function(e){return Ni.options=e||{},Pi++||(Oi=c()(ki.Z,Ni)),Li},Li.unuse=function(){Pi>0&&! --Pi&&(Oi(),Oi=null)};var $i=Li;function Bi(e,t,n){var i=e.slice();return i[8]=t[n],i}function Fi(e,t,n){var i=e.slice();return i[11]=t[n],i}function Ui(e){var t,n,i,o=e[0].nodeType===Node.ELEMENT_NODE&&Gi(e),r=e[0].nodeType===Node.TEXT_NODE&&Zi(e);return{c:function(){t=(0,a.bGB)("div"),o&&o.c(),n=(0,a.DhX)(),r&&r.c(),(0,a.Ljt)(t,"class","vcelm-l"),(0,a.VHj)(t,"vc-actived",e[0]._isActived),(0,a.VHj)(t,"vc-toggle",e[0]._isExpand),(0,a.VHj)(t,"vcelm-noc",e[0]._isSingleLine)},m:function(e,s){(0,a.$Tr)(e,t,s),o&&o.m(t,null),(0,a.R3I)(t,n),r&&r.m(t,null),i=!0},p:function(e,i){e[0].nodeType===Node.ELEMENT_NODE?o?(o.p(e,i),1&i&&(0,a.Ui)(o,1)):((o=Gi(e)).c(),(0,a.Ui)(o,1),o.m(t,n)):o&&((0,a.dvw)(),(0,a.etI)(o,1,1,(function(){o=null})),(0,a.gbL)()),e[0].nodeType===Node.TEXT_NODE?r?r.p(e,i):((r=Zi(e)).c(),r.m(t,null)):r&&(r.d(1),r=null),1&i&&(0,a.VHj)(t,"vc-actived",e[0]._isActived),1&i&&(0,a.VHj)(t,"vc-toggle",e[0]._isExpand),1&i&&(0,a.VHj)(t,"vcelm-noc",e[0]._isSingleLine)},i:function(e){i||((0,a.Ui)(o),i=!0)},o:function(e){(0,a.etI)(o),i=!1},d:function(e){e&&(0,a.ogt)(t),o&&o.d(),r&&r.d()}}}function Gi(e){var t,n,i,o,r,s,l,c,u,d,h=e[0].nodeName+"",p=(e[0].className||e[0].attributes.length)&&Vi(e),f=e[0]._isNullEndTag&&ji(),g=e[0].childNodes.length>0&&Xi(e),m=!e[0]._isNullEndTag&&Qi(e);return{c:function(){t=(0,a.bGB)("span"),n=(0,a.fLW)("<"),i=(0,a.fLW)(h),p&&p.c(),o=(0,a.cSb)(),f&&f.c(),r=(0,a.fLW)(">"),g&&g.c(),s=(0,a.cSb)(),m&&m.c(),l=(0,a.cSb)(),(0,a.Ljt)(t,"class","vcelm-node")},m:function(h,_){(0,a.$Tr)(h,t,_),(0,a.R3I)(t,n),(0,a.R3I)(t,i),p&&p.m(t,null),(0,a.R3I)(t,o),f&&f.m(t,null),(0,a.R3I)(t,r),g&&g.m(h,_),(0,a.$Tr)(h,s,_),m&&m.m(h,_),(0,a.$Tr)(h,l,_),c=!0,u||(d=(0,a.oLt)(t,"click",e[2]),u=!0)},p:function(e,n){(!c||1&n)&&h!==(h=e[0].nodeName+"")&&(0,a.rTO)(i,h),e[0].className||e[0].attributes.length?p?p.p(e,n):((p=Vi(e)).c(),p.m(t,o)):p&&(p.d(1),p=null),e[0]._isNullEndTag?f||((f=ji()).c(),f.m(t,r)):f&&(f.d(1),f=null),e[0].childNodes.length>0?g?(g.p(e,n),1&n&&(0,a.Ui)(g,1)):((g=Xi(e)).c(),(0,a.Ui)(g,1),g.m(s.parentNode,s)):g&&((0,a.dvw)(),(0,a.etI)(g,1,1,(function(){g=null})),(0,a.gbL)()),e[0]._isNullEndTag?m&&(m.d(1),m=null):m?m.p(e,n):((m=Qi(e)).c(),m.m(l.parentNode,l))},i:function(e){c||((0,a.Ui)(g),c=!0)},o:function(e){(0,a.etI)(g),c=!1},d:function(e){e&&(0,a.ogt)(t),p&&p.d(),f&&f.d(),g&&g.d(e),e&&(0,a.ogt)(s),m&&m.d(e),e&&(0,a.ogt)(l),u=!1,d()}}}function Vi(e){for(var t,n=e[0].attributes,i=[],o=0;o<n.length;o+=1)i[o]=zi(Fi(e,n,o));return{c:function(){t=(0,a.bGB)("i");for(var e=0;e<i.length;e+=1)i[e].c();(0,a.Ljt)(t,"class","vcelm-k")},m:function(e,n){(0,a.$Tr)(e,t,n);for(var o=0;o<i.length;o+=1)i[o].m(t,null)},p:function(e,o){if(1&o){var r;for(n=e[0].attributes,r=0;r<n.length;r+=1){var a=Fi(e,n,r);i[r]?i[r].p(a,o):(i[r]=zi(a),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d:function(e){e&&(0,a.ogt)(t),(0,a.RMB)(i,e)}}}function Hi(e){var t,n=e[11].name+"";return{c:function(){t=(0,a.fLW)(n)},m:function(e,n){(0,a.$Tr)(e,t,n)},p:function(e,i){1&i&&n!==(n=e[11].name+"")&&(0,a.rTO)(t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function Wi(e){var t,n,i,o,r,s=e[11].name+"",l=e[11].value+"";return{c:function(){t=(0,a.fLW)(s),n=(0,a.fLW)('="'),i=(0,a.bGB)("i"),o=(0,a.fLW)(l),r=(0,a.fLW)('"'),(0,a.Ljt)(i,"class","vcelm-v")},m:function(e,s){(0,a.$Tr)(e,t,s),(0,a.$Tr)(e,n,s),(0,a.$Tr)(e,i,s),(0,a.R3I)(i,o),(0,a.$Tr)(e,r,s)},p:function(e,n){1&n&&s!==(s=e[11].name+"")&&(0,a.rTO)(t,s),1&n&&l!==(l=e[11].value+"")&&(0,a.rTO)(o,l)},d:function(e){e&&(0,a.ogt)(t),e&&(0,a.ogt)(n),e&&(0,a.ogt)(i),e&&(0,a.ogt)(r)}}}function zi(e){var t,n;function i(e,t){return""!==e[11].value?Wi:Hi}var o=i(e),r=o(e);return{c:function(){t=(0,a.fLW)(" \n            "),r.c(),n=(0,a.cSb)()},m:function(e,i){(0,a.$Tr)(e,t,i),r.m(e,i),(0,a.$Tr)(e,n,i)},p:function(e,t){o===(o=i(e))&&r?r.p(e,t):(r.d(1),(r=o(e))&&(r.c(),r.m(n.parentNode,n)))},d:function(e){e&&(0,a.ogt)(t),r.d(e),e&&(0,a.ogt)(n)}}}function ji(e){var t;return{c:function(){t=(0,a.fLW)("/")},m:function(e,n){(0,a.$Tr)(e,t,n)},d:function(e){e&&(0,a.ogt)(t)}}}function Xi(e){var t,n,i,o,r=[qi,Yi],s=[];function l(e,t){return e[0]._isExpand?1:0}return t=l(e),n=s[t]=r[t](e),{c:function(){n.c(),i=(0,a.cSb)()},m:function(e,n){s[t].m(e,n),(0,a.$Tr)(e,i,n),o=!0},p:function(e,o){var c=t;(t=l(e))===c?s[t].p(e,o):((0,a.dvw)(),(0,a.etI)(s[c],1,1,(function(){s[c]=null})),(0,a.gbL)(),(n=s[t])?n.p(e,o):(n=s[t]=r[t](e)).c(),(0,a.Ui)(n,1),n.m(i.parentNode,i))},i:function(e){o||((0,a.Ui)(n),o=!0)},o:function(e){(0,a.etI)(n),o=!1},d:function(e){s[t].d(e),e&&(0,a.ogt)(i)}}}function Yi(e){for(var t,n,i=e[0].childNodes,o=[],r=0;r<i.length;r+=1)o[r]=Ki(Bi(e,i,r));var s=function(e){return(0,a.etI)(o[e],1,1,(function(){o[e]=null}))};return{c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=(0,a.cSb)()},m:function(e,i){for(var r=0;r<o.length;r+=1)o[r].m(e,i);(0,a.$Tr)(e,t,i),n=!0},p:function(e,n){if(1&n){var r;for(i=e[0].childNodes,r=0;r<i.length;r+=1){var l=Bi(e,i,r);o[r]?(o[r].p(l,n),(0,a.Ui)(o[r],1)):(o[r]=Ki(l),o[r].c(),(0,a.Ui)(o[r],1),o[r].m(t.parentNode,t))}for((0,a.dvw)(),r=i.length;r<o.length;r+=1)s(r);(0,a.gbL)()}},i:function(e){if(!n){for(var t=0;t<i.length;t+=1)(0,a.Ui)(o[t]);n=!0}},o:function(e){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,a.etI)(o[t]);n=!1},d:function(e){(0,a.RMB)(o,e),e&&(0,a.ogt)(t)}}}function qi(e){var t;return{c:function(){t=(0,a.fLW)("...")},m:function(e,n){(0,a.$Tr)(e,t,n)},p:a.ZTd,i:a.ZTd,o:a.ZTd,d:function(e){e&&(0,a.ogt)(t)}}}function Ki(e){var t,n,i;return(t=new to({props:{node:e[8]}})).$on("toggleNode",e[4]),{c:function(){(0,a.YCL)(t.$$.fragment),n=(0,a.DhX)()},m:function(e,o){(0,a.yef)(t,e,o),(0,a.$Tr)(e,n,o),i=!0},p:function(e,n){var i={};1&n&&(i.node=e[8]),t.$set(i)},i:function(e){i||((0,a.Ui)(t.$$.fragment,e),i=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),i=!1},d:function(e){(0,a.vpE)(t,e),e&&(0,a.ogt)(n)}}}function Qi(e){var t,n,i,o,r=e[0].nodeName+"";return{c:function(){t=(0,a.bGB)("span"),n=(0,a.fLW)("</"),i=(0,a.fLW)(r),o=(0,a.fLW)(">"),(0,a.Ljt)(t,"class","vcelm-node")},m:function(e,r){(0,a.$Tr)(e,t,r),(0,a.R3I)(t,n),(0,a.R3I)(t,i),(0,a.R3I)(t,o)},p:function(e,t){1&t&&r!==(r=e[0].nodeName+"")&&(0,a.rTO)(i,r)},d:function(e){e&&(0,a.ogt)(t)}}}function Zi(e){var t,n,i=e[1](e[0].textContent)+"";return{c:function(){t=(0,a.bGB)("span"),n=(0,a.fLW)(i),(0,a.Ljt)(t,"class","vcelm-t vcelm-noc")},m:function(e,i){(0,a.$Tr)(e,t,i),(0,a.R3I)(t,n)},p:function(e,t){1&t&&i!==(i=e[1](e[0].textContent)+"")&&(0,a.rTO)(n,i)},d:function(e){e&&(0,a.ogt)(t)}}}function Ji(e){var t,n,i=e[0]&&Ui(e);return{c:function(){i&&i.c(),t=(0,a.cSb)()},m:function(e,o){i&&i.m(e,o),(0,a.$Tr)(e,t,o),n=!0},p:function(e,n){var o=n[0];e[0]?i?(i.p(e,o),1&o&&(0,a.Ui)(i,1)):((i=Ui(e)).c(),(0,a.Ui)(i,1),i.m(t.parentNode,t)):i&&((0,a.dvw)(),(0,a.etI)(i,1,1,(function(){i=null})),(0,a.gbL)())},i:function(e){n||((0,a.Ui)(i),n=!0)},o:function(e){(0,a.etI)(i),n=!1},d:function(e){i&&i.d(e),e&&(0,a.ogt)(t)}}}function eo(e,t,n){var i;(0,a.FIv)(e,Di,(function(e){return n(3,i=e)}));var o=t.node,r=(0,s.x)(),l=["br","hr","img","input","link","meta"];return(0,s.H3)((function(){$i.use()})),(0,s.ev)((function(){$i.unuse()})),e.$$set=function(e){"node"in e&&n(0,o=e.node)},e.$$.update=function(){9&e.$$.dirty&&o&&(n(0,o._isActived=o===i,o),n(0,o._isNullEndTag=function(e){return l.indexOf(e.nodeName)>-1}(o),o),n(0,o._isSingleLine=0===o.childNodes.length||o._isNullEndTag,o))},[o,function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){o._isNullEndTag||(n(0,o._isExpand=!o._isExpand,o),r("toggleNode",{node:o}))},i,function(t){a.cKT.call(this,e,t)}]}var to=function(t){function n(e){var n;return n=t.call(this)||this,(0,a.S1n)((0,o.Z)(n),e,eo,Ji,a.N8,{node:0}),n}return(0,r.Z)(n,t),(0,e.Z)(n,[{key:"node",get:function(){return this.$$.ctx[0]},set:function(e){this.$$set({node:e}),(0,a.yl1)()}}]),n}(a.f_C),no=to;function io(e){var t,n,i;return(n=new no({props:{node:e[0]}})).$on("toggleNode",e[1]),{c:function(){t=(0,a.bGB)("div"),(0,a.YCL)(n.$$.fragment),(0,a.Ljt)(t,"class","vc-plugin-content")},m:function(e,o){(0,a.$Tr)(e,t,o),(0,a.yef)(n,t,null),i=!0},p:function(e,t){var i={};1&t[0]&&(i.node=e[0]),n.$set(i)},i:function(e){i||((0,a.Ui)(n.$$.fragment,e),i=!0)},o:function(e){(0,a.etI)(n.$$.fragment,e),i=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.vpE)(n)}}}function oo(e,t,n){var i;return(0,a.FIv)(e,Ii,(function(e){return n(0,i=e)})),[i,function(t){a.cKT.call(this,e,t)}]}var ro=function(e){function t(t){var n;return n=e.call(this)||this,(0,a.S1n)((0,o.Z)(n),t,oo,io,a.N8,{}),n}return(0,r.Z)(t,e),t}(a.f_C),ao=ro,so=function(e){function t(t,n,i){var o;return void 0===i&&(i={}),(o=e.call(this,t,n,ao,i)||this).isInited=!1,o.observer=void 0,o.nodeMap=void 0,o}(0,r.Z)(t,e);var n=t.prototype;return n.onShow=function(){this.isInited||this._init()},n.onRemove=function(){e.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,Ii.set(void 0))},n.onAddTool=function(e){var t=this;e([{name:"Expand",global:!1,onClick:function(e){t._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(e){t._collapseActivedNode()}}])},n._init=function(){var e=this;this.isInited=!0,this.nodeMap=new WeakMap;var t=this._generateVNode(document.documentElement);t._isExpand=!0,Di.set(t),Ii.set(t),this.compInstance.$on("toggleNode",(function(e){Di.set(e.detail.node)})),this.observer=new(Ri())((function(t){for(var n=0;n<t.length;n++){var i=t[n];e._isInVConsole(i.target)||e._handleMutation(i)}})),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},n._handleMutation=function(e){switch(e.type){case"childList":e.removedNodes.length>0&&this._onChildRemove(e),e.addedNodes.length>0&&this._onChildAdd(e);break;case"attributes":this._onAttributesChange(e);break;case"characterData":this._onCharacterDataChange(e)}},n._onChildRemove=function(e){var t=this.nodeMap.get(e.target);if(t){for(var n=0;n<e.removedNodes.length;n++){var i=this.nodeMap.get(e.removedNodes[n]);if(i){for(var o=0;o<t.childNodes.length;o++)if(t.childNodes[o]===i){t.childNodes.splice(o,1);break}this.nodeMap.delete(e.removedNodes[n])}}this._refreshStore()}},n._onChildAdd=function(e){var t=this.nodeMap.get(e.target);if(t){for(var n=0;n<e.addedNodes.length;n++){var i=e.addedNodes[n],o=this._generateVNode(i);if(o){var r=void 0,a=i;do{if(null===a.nextSibling)break;a.nodeType===Node.ELEMENT_NODE&&(r=this.nodeMap.get(a.nextSibling)||void 0),a=a.nextSibling}while(void 0===r);if(void 0===r)t.childNodes.push(o);else for(var s=0;s<t.childNodes.length;s++)if(t.childNodes[s]===r){t.childNodes.splice(s,0,o);break}}}this._refreshStore()}},n._onAttributesChange=function(e){this._updateVNodeAttributes(e.target),this._refreshStore()},n._onCharacterDataChange=function(e){var t=this.nodeMap.get(e.target);t&&(t.textContent=e.target.textContent,this._refreshStore())},n._generateVNode=function(e){if(!this._isIgnoredNode(e)){var t={nodeType:e.nodeType,nodeName:e.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(e,t),t.nodeType!=e.TEXT_NODE&&t.nodeType!=e.DOCUMENT_TYPE_NODE||(t.textContent=e.textContent),e.childNodes.length>0){t.childNodes=[];for(var n=0;n<e.childNodes.length;n++){var i=this._generateVNode(e.childNodes[n]);i&&t.childNodes.push(i)}}return this._updateVNodeAttributes(e),t}},n._updateVNodeAttributes=function(e){var t=this.nodeMap.get(e);if(t&&e instanceof Element&&(t.id=e.id||"",t.className=e.className||"",e.hasAttributes&&e.hasAttributes())){t.attributes=[];for(var n=0;n<e.attributes.length;n++)t.attributes.push({name:e.attributes[n].name,value:e.attributes[n].value||""})}},n._expandActivedNode=function(){var e=(0,Mn.U2)(Di);if(e._isExpand)for(var t=0;t<e.childNodes.length;t++)e.childNodes[t]._isExpand=!0;else e._isExpand=!0;this._refreshStore()},n._collapseActivedNode=function(){var e=(0,Mn.U2)(Di);if(e._isExpand){for(var t=!1,n=0;n<e.childNodes.length;n++)e.childNodes[n]._isExpand&&(t=!0,e.childNodes[n]._isExpand=!1);t||(e._isExpand=!1),this._refreshStore()}},n._isIgnoredNode=function(e){if(e.nodeType===e.TEXT_NODE){if(""===e.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,""))return!0}else if(e.nodeType===e.COMMENT_NODE)return!0;return!1},n._isInVConsole=function(e){for(var t=e;void 0!==t;){if("__vconsole"==t.id)return!0;t=t.parentElement||void 0}return!1},n._refreshStore=function(){Ii.update((function(e){return e}))},t}(re);function lo(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function co(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){lo(r,i,o,a,s,"next",e)}function s(e){lo(r,i,o,a,s,"throw",e)}a(void 0)}))}}var uo=__webpack_require__(8270);function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){(0,uo.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fo=function(e){if(!e||0===e.length)return{};for(var t={},n=e.split(";"),i=0;i<n.length;i++){var o=n[i].indexOf("=");if(!(o<0)){var r=n[i].substring(0,o).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),a=n[i].substring(o+1,n[i].length);try{r=decodeURIComponent(r)}catch(e){}try{a=decodeURIComponent(a)}catch(e){}t[r]=a}}return t},go=function(e,t,n){"undefined"!=typeof document&&void 0!==document.cookie&&(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+function(e){void 0===e&&(e={});var t=e,n=t.path,i=t.domain,o=t.expires,r=t.secure,a=t.sameSite,s=["none","lax","strict"].indexOf((a||"").toLowerCase())>-1?a:null;return[null==n?"":";path="+n,null==i?"":";domain="+i,null==o?"":";expires="+o.toUTCString(),void 0===r||!1===r?"":";secure",null===s?"":";SameSite="+s].join("")}(n))},mo=function(){return"undefined"==typeof document||void 0===document.cookie?"":document.cookie},_o=function(){function t(){}var n=t.prototype;return n.key=function(e){return e<this.keys.length?this.keys[e]:null},n.setItem=function(e,t,n){go(e,t,n)},n.getItem=function(e){var t=fo(mo());return Object.prototype.hasOwnProperty.call(t,e)?t[e]:null},n.removeItem=function(e,t){for(var n,i,o=["","/"],r=(null==(n=location)||null==(i=n.hostname)?void 0:i.split("."))||[];r.length>1;)o.push(r.join(".")),r.shift();for(var a=0;a<o.length;a++)for(var s,l,c=(null==(s=location)||null==(l=s.pathname)?void 0:l.split("/"))||[],u="";c.length>0;){u+=("/"===u?"":"/")+c.shift();var d=po(po({},t),{},{path:u,domain:o[a],expires:new Date(0)});go(e,"",d)}},n.clear=function(){for(var e=[].concat(this.keys),t=0;t<e.length;t++)this.removeItem(e[t])},(0,e.Z)(t,[{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){var e=fo(mo());return Object.keys(e).sort()}}]),t}(),vo=function(){function n(){this.keys=[],this.currentSize=0,this.limitSize=0}var i=n.prototype;return i.key=function(e){return e<this.keys.length?this.keys[e]:null},i.prepare=function(){var e=co(At().mark((function e(){var n=this;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){(0,t.qt)("getStorageInfo",{success:function(t){n.keys=t?t.keys.sort():[],n.currentSize=t?t.currentSize:0,n.limitSize=t?t.limitSize:0,e(!0)},fail:function(){i(!1)}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.getItem=function(e){return new Promise((function(n,i){(0,t.qt)("getStorage",{key:e,success:function(e){var t=e.data;if("object"==typeof e.data)try{t=JSON.stringify(e.data)}catch(e){}n(t)},fail:function(e){i(e)}})}))},i.setItem=function(e,n){return new Promise((function(i,o){(0,t.qt)("setStorage",{key:e,data:n,success:function(e){i(e)},fail:function(e){o(e)}})}))},i.removeItem=function(e){return new Promise((function(n,i){(0,t.qt)("removeStorage",{key:e,success:function(e){n(e)},fail:function(e){i(e)}})}))},i.clear=function(){return new Promise((function(e,n){(0,t.qt)("clearStorage",{success:function(t){e(t)},fail:function(e){n(e)}})}))},(0,e.Z)(n,[{key:"length",get:function(){return this.keys.length}}]),n}(),bo={updateTime:(0,Mn.fZ)(0),activedName:(0,Mn.fZ)(null),defaultStorages:(0,Mn.fZ)(["cookies","localStorage","sessionStorage"])},To=function(n){function i(){var e;return(e=n.call(this)||this).storage=new Map,bo.activedName.subscribe((function(e){var t=(0,Mn.U2)(bo.defaultStorages);t.length>0&&-1===t.indexOf(e)&&bo.activedName.set(t[0])})),bo.defaultStorages.subscribe((function(t){-1===t.indexOf((0,Mn.U2)(bo.activedName))&&bo.activedName.set(t[0]),e.updateEnabledStorages()})),e}(0,r.Z)(i,n);var o=i.prototype;return o.getItem=function(){var e=co(At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activedStorage){e.next=2;break}return e.abrupt("return","");case 2:return e.next=4,this.promisify(this.activedStorage.getItem(t));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.setItem=function(){var e=co(At().mark((function e(t,n){var i;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activedStorage){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.promisify(this.activedStorage.setItem(t,n));case 4:return i=e.sent,this.refresh(),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),o.removeItem=function(){var e=co(At().mark((function e(t){var n;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activedStorage){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.promisify(this.activedStorage.removeItem(t));case 4:return n=e.sent,this.refresh(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.clear=function(){var e=co(At().mark((function e(){var t;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activedStorage){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.promisify(this.activedStorage.clear());case 4:return t=e.sent,this.refresh(),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.refresh=function(){bo.updateTime.set(Date.now())},o.getEntries=function(){var e=co(At().mark((function e(){var t,n,i,o,r;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.activedStorage){e.next=3;break}return e.abrupt("return",[]);case 3:if("function"!=typeof t.prepare){e.next=6;break}return e.next=6,t.prepare();case 6:n=[],i=0;case 8:if(!(i<t.length)){e.next=17;break}return o=t.key(i),e.next=12,this.getItem(o);case 12:r=e.sent,n.push([o,r]);case 14:i++,e.next=8;break;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.updateEnabledStorages=function(){var e=(0,Mn.U2)(bo.defaultStorages);e.indexOf("cookies")>-1?void 0!==document.cookie&&this.storage.set("cookies",new _o):this.deleteStorage("cookies"),e.indexOf("localStorage")>-1?window.localStorage&&this.storage.set("localStorage",window.localStorage):this.deleteStorage("localStorage"),e.indexOf("sessionStorage")>-1?window.sessionStorage&&this.storage.set("sessionStorage",window.sessionStorage):this.deleteStorage("sessionStorage"),e.indexOf("wxStorage")>-1?(0,t.H_)()&&this.storage.set("wxStorage",new vo):this.deleteStorage("wxStorage")},o.promisify=function(e){return"string"==typeof e||null==e?Promise.resolve(e):e},o.deleteStorage=function(e){this.storage.has(e)&&this.storage.delete(e)},(0,e.Z)(i,[{key:"activedStorage",get:function(){return this.storage.get((0,Mn.U2)(bo.activedName))}}]),i}(Rn.N);function Ao(e,t,n){var i=e.slice();return i[20]=t[n][0],i[21]=t[n][1],i[23]=n,i}function yo(e){var t;return{c:function(){(t=(0,a.bGB)("div")).textContent="Empty",(0,a.Ljt)(t,"class","vc-plugin-empty")},m:function(e,n){(0,a.$Tr)(e,t,n)},p:a.ZTd,d:function(e){e&&(0,a.ogt)(t)}}}function Eo(e){var t,n,i,o,r,s=e[20]+"",l=e[5](e[21])+"";return{c:function(){t=(0,a.bGB)("div"),n=(0,a.fLW)(s),i=(0,a.DhX)(),o=(0,a.bGB)("div"),r=(0,a.fLW)(l),(0,a.Ljt)(t,"class","vc-table-col"),(0,a.Ljt)(o,"class","vc-table-col vc-table-col-2")},m:function(e,s){(0,a.$Tr)(e,t,s),(0,a.R3I)(t,n),(0,a.$Tr)(e,i,s),(0,a.$Tr)(e,o,s),(0,a.R3I)(o,r)},p:function(e,t){1&t&&s!==(s=e[20]+"")&&(0,a.rTO)(n,s),1&t&&l!==(l=e[5](e[21])+"")&&(0,a.rTO)(r,l)},d:function(e){e&&(0,a.ogt)(t),e&&(0,a.ogt)(i),e&&(0,a.ogt)(o)}}}function So(e){var t,n,i,o,r,s,l;return{c:function(){t=(0,a.bGB)("div"),n=(0,a.bGB)("textarea"),i=(0,a.DhX)(),o=(0,a.bGB)("div"),r=(0,a.bGB)("textarea"),(0,a.Ljt)(n,"class","vc-table-input"),(0,a.Ljt)(t,"class","vc-table-col"),(0,a.Ljt)(r,"class","vc-table-input"),(0,a.Ljt)(o,"class","vc-table-col vc-table-col-2")},m:function(c,u){(0,a.$Tr)(c,t,u),(0,a.R3I)(t,n),(0,a.BmG)(n,e[2]),(0,a.$Tr)(c,i,u),(0,a.$Tr)(c,o,u),(0,a.R3I)(o,r),(0,a.BmG)(r,e[3]),s||(l=[(0,a.oLt)(n,"input",e[11]),(0,a.oLt)(r,"input",e[12])],s=!0)},p:function(e,t){4&t&&(0,a.BmG)(n,e[2]),8&t&&(0,a.BmG)(r,e[3])},d:function(e){e&&(0,a.ogt)(t),e&&(0,a.ogt)(i),e&&(0,a.ogt)(o),s=!1,(0,a.j7q)(l)}}}function Co(e){var t,n,i,o,r,s;return(t=new le.Z({props:{name:"delete"}})).$on("click",(function(){return e[14](e[20])})),i=new he({props:{content:[e[20],e[21]].join("=")}}),(r=new le.Z({props:{name:"edit"}})).$on("click",(function(){return e[15](e[20],e[21],e[23])})),{c:function(){(0,a.YCL)(t.$$.fragment),n=(0,a.DhX)(),(0,a.YCL)(i.$$.fragment),o=(0,a.DhX)(),(0,a.YCL)(r.$$.fragment)},m:function(e,l){(0,a.yef)(t,e,l),(0,a.$Tr)(e,n,l),(0,a.yef)(i,e,l),(0,a.$Tr)(e,o,l),(0,a.yef)(r,e,l),s=!0},p:function(t,n){e=t;var o={};1&n&&(o.content=[e[20],e[21]].join("=")),i.$set(o)},i:function(e){s||((0,a.Ui)(t.$$.fragment,e),(0,a.Ui)(i.$$.fragment,e),(0,a.Ui)(r.$$.fragment,e),s=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),(0,a.etI)(i.$$.fragment,e),(0,a.etI)(r.$$.fragment,e),s=!1},d:function(e){(0,a.vpE)(t,e),e&&(0,a.ogt)(n),(0,a.vpE)(i,e),e&&(0,a.ogt)(o),(0,a.vpE)(r,e)}}}function wo(e){var t,n,i,o;return(t=new le.Z({props:{name:"cancel"}})).$on("click",e[9]),(i=new le.Z({props:{name:"done"}})).$on("click",(function(){return e[13](e[20])})),{c:function(){(0,a.YCL)(t.$$.fragment),n=(0,a.DhX)(),(0,a.YCL)(i.$$.fragment)},m:function(e,r){(0,a.yef)(t,e,r),(0,a.$Tr)(e,n,r),(0,a.yef)(i,e,r),o=!0},p:function(t,n){e=t},i:function(e){o||((0,a.Ui)(t.$$.fragment,e),(0,a.Ui)(i.$$.fragment,e),o=!0)},o:function(e){(0,a.etI)(t.$$.fragment,e),(0,a.etI)(i.$$.fragment,e),o=!1},d:function(e){(0,a.vpE)(t,e),e&&(0,a.ogt)(n),(0,a.vpE)(i,e)}}}function xo(e){var t,n,i,o,r,s,l;function c(e,t){return e[1]===e[23]?So:Eo}var u=c(e),d=u(e),h=[wo,Co],p=[];function f(e,t){return e[1]===e[23]?0:1}return o=f(e),r=p[o]=h[o](e),{c:function(){t=(0,a.bGB)("div"),d.c(),n=(0,a.DhX)(),i=(0,a.bGB)("div"),r.c(),s=(0,a.DhX)(),(0,a.Ljt)(i,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,a.Ljt)(t,"class","vc-table-row")},m:function(e,r){(0,a.$Tr)(e,t,r),d.m(t,null),(0,a.R3I)(t,n),(0,a.R3I)(t,i),p[o].m(i,null),(0,a.R3I)(t,s),l=!0},p:function(e,s){u===(u=c(e))&&d?d.p(e,s):(d.d(1),(d=u(e))&&(d.c(),d.m(t,n)));var l=o;(o=f(e))===l?p[o].p(e,s):((0,a.dvw)(),(0,a.etI)(p[l],1,1,(function(){p[l]=null})),(0,a.gbL)(),(r=p[o])?r.p(e,s):(r=p[o]=h[o](e)).c(),(0,a.Ui)(r,1),r.m(i,null))},i:function(e){l||((0,a.Ui)(r),l=!0)},o:function(e){(0,a.etI)(r),l=!1},d:function(e){e&&(0,a.ogt)(t),d.d(),p[o].d()}}}function Mo(e){for(var t,n,i,o,r=e[0],s=[],l=0;l<r.length;l+=1)s[l]=xo(Ao(e,r,l));var c=function(e){return(0,a.etI)(s[e],1,1,(function(){s[e]=null}))},u=null;return r.length||(u=yo()),{c:function(){t=(0,a.bGB)("div"),(n=(0,a.bGB)("div")).innerHTML='<div class="vc-table-col">Key</div> \n    <div class="vc-table-col vc-table-col-2">Value</div> \n    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>',i=(0,a.DhX)();for(var e=0;e<s.length;e+=1)s[e].c();u&&u.c(),(0,a.Ljt)(n,"class","vc-table-row"),(0,a.Ljt)(t,"class","vc-table")},m:function(e,r){(0,a.$Tr)(e,t,r),(0,a.R3I)(t,n),(0,a.R3I)(t,i);for(var l=0;l<s.length;l+=1)s[l].m(t,null);u&&u.m(t,null),o=!0},p:function(e,n){var i=n[0];if(1007&i){var o;for(r=e[0],o=0;o<r.length;o+=1){var l=Ao(e,r,o);s[o]?(s[o].p(l,i),(0,a.Ui)(s[o],1)):(s[o]=xo(l),s[o].c(),(0,a.Ui)(s[o],1),s[o].m(t,null))}for((0,a.dvw)(),o=r.length;o<s.length;o+=1)c(o);(0,a.gbL)(),!r.length&&u?u.p(e,i):r.length?u&&(u.d(1),u=null):((u=yo()).c(),u.m(t,null))}},i:function(e){if(!o){for(var t=0;t<r.length;t+=1)(0,a.Ui)(s[t]);o=!0}},o:function(e){s=s.filter(Boolean);for(var t=0;t<s.length;t+=1)(0,a.etI)(s[t]);o=!1},d:function(e){e&&(0,a.ogt)(t),(0,a.RMB)(s,e),u&&u.d()}}}function Ro(e,n,i){var o,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))},s=To.getSingleton(To,"VConsoleStorageModel"),l=bo.updateTime;(0,a.FIv)(e,l,(function(e){return i(10,o=e)}));var c=[],u=-1,d="",h="",p=function(){i(1,u=-1),i(2,d=""),i(3,h="")},f=function(e){return r(void 0,void 0,void 0,At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.removeItem(e);case 2:case"end":return t.stop()}}),t)})))},g=function(e){return r(void 0,void 0,void 0,At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d===e){t.next=3;break}return t.next=3,s.removeItem(e);case 3:s.setItem(d,h),p();case 5:case"end":return t.stop()}}),t)})))},m=function(e,t,n){return r(void 0,void 0,void 0,At().mark((function o(){return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i(2,d=e),i(3,h=t),i(1,u=n);case 3:case"end":return o.stop()}}),o)})))};return e.$$.update=function(){1024&e.$$.dirty&&o&&r(void 0,void 0,void 0,At().mark((function e(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.t0=i,e.next=4,s.getEntries();case 4:e.t1=c=e.sent,(0,e.t0)(0,e.t1);case 6:case"end":return e.stop()}}),e)})))},[c,u,d,h,l,function(e){return(0,t.id)(e,1024)},f,g,m,function(){p()},o,function(){d=this.value,i(2,d)},function(){h=this.value,i(3,h)},function(e){return g(e)},function(e){return f(e)},function(e,t,n){return m(e,t,n)}]}var Io=function(e){function t(t){var n;return n=e.call(this)||this,(0,a.S1n)((0,o.Z)(n),t,Ro,Mo,a.N8,{}),n}return(0,r.Z)(t,e),t}(a.f_C),Do=Io,ko=function(e){function n(t,n,i){var o;return void 0===i&&(i={}),(o=e.call(this,t,n,Do,i)||this).model=To.getSingleton(To,"VConsoleStorageModel"),o.onAddTopBarCallback=void 0,o}(0,r.Z)(n,e);var i=n.prototype;return i.onReady=function(){e.prototype.onReady.call(this),this.onUpdateOption()},i.onShow=function(){this.model.refresh()},i.onAddTopBar=function(e){this.onAddTopBarCallback=e,this.updateTopBar()},i.onAddTool=function(e){var t=this;e([{name:"Add",global:!1,onClick:function(){t.model.setItem("new_"+Date.now(),"new_value")}},{name:"Refresh",global:!1,onClick:function(){t.model.refresh()}},{name:"Clear",global:!1,onClick:function(){t.model.clear()}}])},i.onUpdateOption=function(){var e,n=null==(e=this.vConsole.option.storage)?void 0:e.defaultStorages;(0,t.kJ)(n)&&(n=n.length>0?n:["cookies"])!==(0,Mn.U2)(bo.defaultStorages)&&(bo.defaultStorages.set(n),bo.activedName.set(n[0]),this.updateTopBar())},i.updateTopBar=function(){var e=this;if("function"==typeof this.onAddTopBarCallback){for(var t=(0,Mn.U2)(bo.defaultStorages),n=[],i=0;i<t.length;i++){var o=t[i];n.push({name:o[0].toUpperCase()+o.substring(1),data:{name:o},actived:o===(0,Mn.U2)(bo.activedName),onClick:function(t,n){var i=(0,Mn.U2)(bo.activedName);if(n.name===i)return!1;bo.activedName.set(n.name),e.model.refresh()}})}this.onAddTopBarCallback(n)}},n}(re),Lo=function(){function n(e){var o=this;if(this.version="3.15.1",this.isInited=!1,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,n.instance&&n.instance instanceof n)return console.debug("[vConsole] vConsole is already exists."),n.instance;if(n.instance=this,this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"],log:{},network:{},storage:{}},t.Kn(e))for(var r in e)this.option[r]=e[r];void 0!==this.option.maxLogNumber&&(this.option.log.maxLogNumber=this.option.maxLogNumber,console.debug("[vConsole] Deprecated option: `maxLogNumber`, use `log.maxLogNumber` instead.")),void 0!==this.option.onClearLog&&console.debug("[vConsole] Deprecated option: `onClearLog`."),void 0!==this.option.maxNetworkNumber&&(this.option.network.maxNetworkNumber=this.option.maxNetworkNumber,console.debug("[vConsole] Deprecated option: `maxNetworkNumber`, use `network.maxNetworkNumber` instead.")),this._addBuiltInPlugins();var a,s=function(){o.isInited||(o._initComponent(),o._autoRun())};void 0!==document?"loading"===document.readyState?i.bind(window,"DOMContentLoaded",s):s():a=setTimeout((function e(){document&&"complete"==document.readyState?(a&&clearTimeout(a),s()):a=setTimeout(e,1)}),1)}var o=n.prototype;return o._addBuiltInPlugins=function(){this.addPlugin(new wn("default","Log"));var e=this.option.defaultPlugins,n={system:{proto:xn,name:"System"}};if(n.network={proto:xi,name:"Network"},n.element={proto:so,name:"Element"},n.storage={proto:ko,name:"Storage"},e&&t.kJ(e))for(var i=0;i<e.length;i++){var o=n[e[i]];o?this.addPlugin(new o.proto(e[i],o.name)):console.debug("[vConsole] Unrecognized default plugin ID:",e[i])}},o._initComponent=function(){var e=this;if(!i.one("#__vconsole")){var n,o=1*t.cF("switch_x"),r=1*t.cF("switch_y");"string"==typeof this.option.target?n=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(n=this.option.target),n instanceof HTMLElement||(n=document.documentElement),this.compInstance=new ie({target:n,props:{switchButtonPosition:{x:o,y:r}}}),this.compInstance.$on("show",(function(t){t.detail.show?e.show():e.hide()})),this.compInstance.$on("changePanel",(function(t){var n=t.detail.pluginId;e.showPlugin(n)}))}this._updateComponentByOptions()},o._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var e=this.option.theme;e="light"!==e&&"dark"!==e?"":e,this.compInstance.theme=e}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},o.setSwitchPosition=function(e,t){this.compInstance.switchButtonPosition={x:e,y:t}},o._autoRun=function(){for(var e in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[e]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},o._showFirstPluginWhenEmpty=function(){var e=Object.keys(this.pluginList);""===this.compInstance.activedPluginId&&e.length>0&&this.showPlugin(e[0])},o.triggerEvent=function(e,n){var i=this;e="on"+e.charAt(0).toUpperCase()+e.slice(1),t.mf(this.option[e])&&setTimeout((function(){i.option[e].apply(i,n)}),0)},o._initPlugin=function(e){var t=this;e.vConsole=this,this.compInstance.pluginList[e.id]={id:e.id,name:e.name,hasTabPanel:!1,tabOptions:void 0,topbarList:[],toolbarList:[],content:void 0,contentContainer:void 0},this.compInstance.pluginList=this._reorderPluginList(this.compInstance.pluginList),e.trigger("init"),e.trigger("renderTab",(function(n,i){void 0===i&&(i={});var o=t.compInstance.pluginList[e.id];o.hasTabPanel=!0,o.tabOptions=i,n&&(t.compInstance.pluginList[e.id].content=n),t.compInstance.pluginList=t.compInstance.pluginList})),e.trigger("addTopBar",(function(n){if(n){for(var i=[],o=0;o<n.length;o++){var r=n[o];i.push({name:r.name||"Undefined",className:r.className||"",actived:!!r.actived,data:r.data,onClick:r.onClick})}t.compInstance.pluginList[e.id].topbarList=i,t.compInstance.pluginList=t.compInstance.pluginList}})),e.trigger("addTool",(function(n){if(n){for(var i=[],o=0;o<n.length;o++){var r=n[o];i.push({name:r.name||"Undefined",global:!!r.global,data:r.data,onClick:r.onClick})}t.compInstance.pluginList[e.id].toolbarList=i,t.compInstance.pluginList=t.compInstance.pluginList}})),e.isReady=!0,e.trigger("ready")},o._triggerPluginsEvent=function(e){for(var t in this.pluginList)this.pluginList[t].isReady&&this.pluginList[t].trigger(e)},o._triggerPluginEvent=function(e,t){var n=this.pluginList[e];n&&n.isReady&&n.trigger(t)},o._reorderPluginList=function(e){var n=this;if(!t.kJ(this.option.pluginOrder))return e;for(var i=Object.keys(e).sort((function(e,t){var i=n.option.pluginOrder.indexOf(e),o=n.option.pluginOrder.indexOf(t);return i===o?0:-1===i?1:-1===o?-1:i-o})),o={},r=0;r<i.length;r++)o[i[r]]=e[i[r]];return o},o.addPlugin=function(e){return void 0!==this.pluginList[e.id]?(console.debug("[vConsole] Plugin `"+e.id+"` has already been added."),!1):(this.pluginList[e.id]=e,this.isInited&&(this._initPlugin(e),this._showFirstPluginWhenEmpty()),!0)},o.removePlugin=function(e){e=(e+"").toLowerCase();var t=this.pluginList[e];if(void 0===t)return console.debug("[vConsole] Plugin `"+e+"` does not exist."),!1;t.trigger("remove");try{delete this.pluginList[e],delete this.compInstance.pluginList[e]}catch(t){this.pluginList[e]=void 0,this.compInstance.pluginList[e]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==e&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},o.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},o.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},o.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},o.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},o.showPlugin=function(e){this.isInited&&(this.pluginList[e]||console.debug("[vConsole] Plugin `"+e+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=e,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},o.setOption=function(e,n){if("string"==typeof e){for(var i=e.split("."),o=this.option,r=0;r<i.length;r++){if("__proto__"===i[r]||"constructor"===i[r]||"prototype"===i[r])return void console.debug("[vConsole] Cannot set `"+i[r]+"` in `vConsole.setOption()`.");void 0===o[i[r]]&&(o[i[r]]={}),r===i.length-1&&(o[i[r]]=n),o=o[i[r]]}this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else if(t.Kn(e)){for(var a in e)"__proto__"!==a&&"constructor"!==a&&"prototype"!==a?this.option[a]=e[a]:console.debug("[vConsole] Cannot set `"+a+"` in `vConsole.setOption()`.");this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},o.destroy=function(){if(this.isInited){this.isInited=!1,n.instance=void 0;for(var e=Object.keys(this.pluginList),t=e.length-1;t>=0;t--)this.removePlugin(e[t]);this.compInstance.$destroy()}},(0,e.Z)(n,null,[{key:"instance",get:function(){return window.__VCONSOLE_INSTANCE},set:function(e){void 0===e||e instanceof n?window.__VCONSOLE_INSTANCE=e:console.debug("[vConsole] Cannot set `VConsole.instance` because the value is not the instance of VConsole.")}}]),n}();Lo.VConsolePlugin=void 0,Lo.VConsoleLogPlugin=void 0,Lo.VConsoleDefaultPlugin=void 0,Lo.VConsoleSystemPlugin=void 0,Lo.VConsoleNetworkPlugin=void 0,Lo.VConsoleElementPlugin=void 0,Lo.VConsoleStoragePlugin=void 0,Lo.VConsolePlugin=oe,Lo.VConsoleLogPlugin=Cn,Lo.VConsoleDefaultPlugin=wn,Lo.VConsoleSystemPlugin=xn,Lo.VConsoleNetworkPlugin=xi,Lo.VConsoleElementPlugin=so,Lo.VConsoleStoragePlugin=ko;var Oo=Lo}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()},module.exports=n()})(vconsole_min);var vconsole_minExports=vconsole_min.exports;const VConsole=getDefaultExportFromCjs(vconsole_minExports),Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);const static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);function StaticTreeDesc(e,t,n,i,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=e&&e.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}zero$1(base_dist);const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)],put_short=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},send_bits=(e,t,n)=>{e.bi_valid>Buf_size-n?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=n-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},send_code=(e,t,n)=>{send_bits(e,n[2*t],n[2*t+1])},bi_reverse=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},bi_flush=e=>{16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},gen_bitlen=(e,t)=>{const n=t.dyn_tree,i=t.max_code,o=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,h,p,f,g=0;for(h=0;h<=MAX_BITS$1;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<HEAP_SIZE$1;c++)u=e.heap[c],h=n[2*n[2*u+1]+1]+1,h>l&&(h=l,g++),n[2*u+1]=h,u>i||(e.bl_count[h]++,p=0,u>=s&&(p=a[u-s]),f=n[2*u],e.opt_len+=f*(h+p),r&&(e.static_len+=f*(o[2*u+1]+p)));if(0!==g){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(h=l;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--c],d>i||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}},gen_codes=(e,t,n)=>{const i=new Array(MAX_BITS$1+1);let o,r,a=0;for(o=1;o<=MAX_BITS$1;o++)a=a+n[o-1]<<1,i[o]=a;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=bi_reverse(i[t]++,t))}},tr_static_init=()=>{let e,t,n,i,o;const r=new Array(MAX_BITS$1+1);for(n=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=n,e=0;e<1<<extra_lbits[i];e++)_length_code[n++]=i;for(_length_code[n-1]=i,o=0,i=0;i<16;i++)for(base_dist[i]=o,e=0;e<1<<extra_dbits[i];e++)_dist_code[o++]=i;for(o>>=7;i<D_CODES$1;i++)for(base_dist[i]=o<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+o++]=i;for(t=0;t<=MAX_BITS$1;t++)r[t]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,r[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,r[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,r[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,r[8]++;for(gen_codes(static_ltree,L_CODES$1+1,r),e=0;e<D_CODES$1;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=e=>{let t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bi_windup=e=>{e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},smaller=(e,t,n,i)=>{const o=2*t,r=2*n;return e[o]<e[r]||e[o]===e[r]&&i[t]<=i[n]},pqdownheap=(e,t,n)=>{const i=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&smaller(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!smaller(t,i,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=i},compress_block=(e,t,n)=>{let i,o,r,a,s=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+s++],i+=(255&e.pending_buf[e.sym_buf+s++])<<8,o=e.pending_buf[e.sym_buf+s++],0===i?send_code(e,o,t):(r=_length_code[o],send_code(e,r+LITERALS$1+1,t),a=extra_lbits[r],0!==a&&(o-=base_length[r],send_bits(e,o,a)),i--,r=d_code(i),send_code(e,r,n),a=extra_dbits[r],0!==a&&(i-=base_dist[r],send_bits(e,i,a)))}while(s<e.sym_next);send_code(e,END_BLOCK,t)},build_tree=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,r=t.stat_desc.elems;let a,s,l,c=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,a=0;a<r;a++)0!==n[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,o&&(e.static_len-=i[2*l+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)pqdownheap(e,n,a);l=r;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*l]=n[2*a]+n[2*s],e.depth[l]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=l,e.heap[1]=l++,pqdownheap(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(n,c,e.bl_count)},scan_tree=(e,t,n)=>{let i,o,r=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)o=a,a=t[2*(i+1)+1],++s<l&&o===a||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[2*REP_3_6]++):s<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,s=0,r=o,0===a?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4))},send_tree=(e,t,n)=>{let i,o,r=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(o=a,a=t[2*(i+1)+1],!(++s<l&&o===a)){if(s<c)do{send_code(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==r&&(send_code(e,o,e.bl_tree),s--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,s-3,2)):s<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,s-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,s-11,7));s=0,r=o,0===a?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4)}},build_bl_tree=e=>{let t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},send_all_trees=(e,t,n,i)=>{let o;for(send_bits(e,t-257,5),send_bits(e,n-1,5),send_bits(e,i-4,4),o=0;o<i;o++)send_bits(e,e.bl_tree[2*bl_order[o]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,n-1)},detect_data_type=e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS$1;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=e=>{static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)},_tr_stored_block$1=(e,t,n,i)=>{send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),bi_windup(e),put_short(e,n),put_short(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},_tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)},_tr_flush_block$1=(e,t,n,i)=>{let o,r,a=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$1&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),a=build_bl_tree(e),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==t?_tr_stored_block$1(e,t,n,i):e.strategy===Z_FIXED$1||r===o?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)},_tr_tally$1=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[n]+LITERALS$1+1)]++,e.dyn_dtree[2*d_code(t)]++),e.sym_next===e.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,t,n,i)=>{let o=65535&e,r=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[i++]|0,r=r+o|0}while(--a);o%=65521,r%=65521}return o|r<<16};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=(e,t,n,i)=>{const o=crcTable,r=i+n;e^=-1;for(let a=i;a<r;a++)e=e>>>8^o[255&(e^t[a])];return~e};var crc32_1=crc32,messages$1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_tr_init,_tr_stored_block:_tr_stored_block,_tr_flush_block:_tr_flush_block,_tr_tally:_tr_tally,_tr_align:_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH:Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED:Z_FILTERED,Z_HUFFMAN_ONLY:Z_HUFFMAN_ONLY,Z_RLE:Z_RLE,Z_FIXED:Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN:Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(e,t)=>(e.msg=messages$1[t],t),rank=e=>2*e-(e>4?9:0),zero=e=>{let t=e.length;for(;--t>=0;)e[t]=0},slide_hash=e=>{let t,n,i,o=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=o?n-o:0}while(--t);t=o,i=t;do{n=e.prev[--i],e.prev[i]=n>=o?n-o:0}while(--t)};let HASH_ZLIB=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,HASH$1=HASH_ZLIB;const flush_pending=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},flush_block_only=(e,t)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)},put_byte=(e,t)=>{e.pending_buf[e.pending++]=t},putShortMSB=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},read_buf=(e,t,n,i)=>{let o=e.avail_in;return o>i&&(o=i),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=adler32_1(e.adler,t,o,n):2===e.state.wrap&&(e.adler=crc32_1(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},longest_match=(e,t)=>{let n,i,o=e.max_chain_length,r=e.strstart,a=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+MAX_MATCH;let p=c[r+a-1],f=c[r+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+a]===f&&c[n+a-1]===p&&c[n]===c[r]&&c[++n]===c[r+1]){r+=2,n++;do{}while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<h);if(i=MAX_MATCH-(h-r),r=h-MAX_MATCH,i>a){if(e.match_start=t,a=i,i>=s)break;p=c[r+a-1],f=c[r+a]}}}while((t=d[t&u])>l&&0!=--o);return a<=e.lookahead?a:e.lookahead},fill_window=e=>{const t=e.w_size;let n,i,o;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),slide_hash(e),i+=t),0===e.strm.avail_in)break;if(n=read_buf(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=MIN_MATCH)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=HASH$1(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=HASH$1(e,e.ins_h,e.window[o+MIN_MATCH-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)},deflate_stored=(e,t)=>{let n,i,o,r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>o&&(n=o),n<r&&(0===n&&t!==Z_FINISH$3||t===Z_NO_FLUSH$2||n!==i+e.strm.avail_in))break;a=t===Z_FINISH$3&&n===i+e.strm.avail_in?1:0,_tr_stored_block(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,flush_pending(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(read_buf(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?BS_FINISH_DONE:t!==Z_NO_FLUSH$2&&t!==Z_FINISH$3&&0===e.strm.avail_in&&e.strstart===e.block_start?BS_BLOCK_DONE:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(read_buf(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,r=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=r||(i||t===Z_FINISH$3)&&t!==Z_NO_FLUSH$2&&0===e.strm.avail_in&&i<=o)&&(n=i>o?o:i,a=t===Z_FINISH$3&&0===e.strm.avail_in&&n===i?1:0,_tr_stored_block(e,e.block_start,n,a),e.block_start+=n,flush_pending(e.strm)),a?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(e,t)=>{let n,i;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH$1(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do{e.strstart++,e.ins_h=HASH$1(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=HASH$1(e,e.ins_h,e.window[e.strstart+1]);else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(e,t)=>{let n,i,o;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH$1(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=HASH$1(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(e,t)=>{let n,i,o,r;const a=e.window;for(;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(o=e.strstart-1,i=a[o],i===a[++o]&&i===a[++o]&&i===a[++o])){r=e.strstart+MAX_MATCH;do{}while(i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&o<r);e.match_length=MAX_MATCH-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(n=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(e.match_length=0,n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(e,t,n,i,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=o}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=e=>{e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE),this.dyn_dtree=new Uint16Array(2*(2*D_CODES+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==INIT_STATE&&t.status!==GZIP_STATE&&t.status!==EXTRA_STATE&&t.status!==NAME_STATE&&t.status!==COMMENT_STATE&&t.status!==HCRC_STATE&&t.status!==BUSY_STATE&&t.status!==FINISH_STATE?1:0},deflateResetKeep=e=>{if(deflateStateCheck(e))return err(e,Z_STREAM_ERROR$2);e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?GZIP_STATE:t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=-2,_tr_init(t),Z_OK$3},deflateReset=e=>{const t=deflateResetKeep(e);return t===Z_OK$3&&lm_init(e.state),t},deflateSetHeader=(e,t)=>deflateStateCheck(e)||2!==e.state.wrap?Z_STREAM_ERROR$2:(e.state.gzhead=t,Z_OK$3),deflateInit2=(e,t,n,i,o,r)=>{if(!e)return Z_STREAM_ERROR$2;let a=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||r<0||r>Z_FIXED||8===i&&1!==a)return err(e,Z_STREAM_ERROR$2);8===i&&(i=9);const s=new DeflateState;return e.state=s,s.strm=e,s.status=INIT_STATE,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=r,s.method=n,deflateReset(e)},deflateInit=(e,t)=>deflateInit2(e,t,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(e,t)=>{if(deflateStateCheck(e)||t>Z_BLOCK$1||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===FINISH_STATE&&t!==Z_FINISH$3)return err(e,0===e.avail_out?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(flush_pending(e),0===e.avail_out)return n.last_flush=-1,Z_OK$3}else if(0===e.avail_in&&rank(t)<=rank(i)&&t!==Z_FINISH$3)return err(e,Z_BUF_ERROR$1);if(n.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR$1);if(n.status===INIT_STATE&&0===n.wrap&&(n.status=BUSY_STATE),n.status===INIT_STATE){let t=Z_DEFLATED$2+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=Z_HUFFMAN_ONLY||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=PRESET_DICT),t+=31-t%31,putShortMSB(n,t),0!==n.strstart&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),e.adler=1,n.status=BUSY_STATE,flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3}if(n.status===GZIP_STATE)if(e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead)put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,255&n.gzhead.time),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,255&n.gzhead.extra.length),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE;else if(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE,flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3;if(n.status===EXTRA_STATE){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3;t=0,i-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=NAME_STATE}if(n.status===NAME_STATE){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,put_byte(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=COMMENT_STATE}if(n.status===COMMENT_STATE){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i)),flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,put_byte(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-i,i))}n.status=HCRC_STATE}if(n.status===HCRC_STATE){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(flush_pending(e),0!==n.pending))return n.last_flush=-1,Z_OK$3;put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),e.adler=0}if(n.status=BUSY_STATE,flush_pending(e),0!==n.pending)return n.last_flush=-1,Z_OK$3}if(0!==e.avail_in||0!==n.lookahead||t!==Z_NO_FLUSH$2&&n.status!==FINISH_STATE){let i=0===n.level?deflate_stored(n,t):n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,t):n.strategy===Z_RLE?deflate_rle(n,t):configuration_table[n.level].func(n,t);if(i!==BS_FINISH_STARTED&&i!==BS_FINISH_DONE||(n.status=FINISH_STATE),i===BS_NEED_MORE||i===BS_FINISH_STARTED)return 0===e.avail_out&&(n.last_flush=-1),Z_OK$3;if(i===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?_tr_align(n):t!==Z_BLOCK$1&&(_tr_stored_block(n,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),0===e.avail_out))return n.last_flush=-1,Z_OK$3}return t!==Z_FINISH$3?Z_OK$3:n.wrap<=0?Z_STREAM_END$3:(2===n.wrap?(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),put_byte(n,e.adler>>16&255),put_byte(n,e.adler>>24&255),put_byte(n,255&e.total_in),put_byte(n,e.total_in>>8&255),put_byte(n,e.total_in>>16&255),put_byte(n,e.total_in>>24&255)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),flush_pending(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Z_OK$3:Z_STREAM_END$3)},deflateEnd=e=>{if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const t=e.state.status;return e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(e,t)=>{let n=t.length;if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const i=e.state,o=i.wrap;if(2===o||1===o&&i.status!==INIT_STATE||i.lookahead)return Z_STREAM_ERROR$2;if(1===o&&(e.adler=adler32_1(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===o&&(zero(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const r=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,fill_window(i);i.lookahead>=MIN_MATCH;){let e=i.strstart,t=i.lookahead-(MIN_MATCH-1);do{i.ins_h=HASH$1(i,i.ins_h,i.window[e+MIN_MATCH-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=MIN_MATCH-1,fill_window(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=MIN_MATCH-1,i.match_available=0,e.next_in=a,e.input=s,e.avail_in=r,i.wrap=o,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign$2=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)_has(n,t)&&(e[t]=n[t])}}return e},flattenChunks=e=>{let t=0;for(let i=0,o=e.length;i<o;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,o=0,r=e.length;i<r;i++){let t=e[i];n.set(t,o),o+=t.length}return n},common$1={assign:assign$2,flattenChunks:flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let i=0;i<256;i++)_utf8len[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,o,r,a=e.length,s=0;for(o=0;o<a;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(i=e.charCodeAt(o+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),r=0,o=0;r<s;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(i=e.charCodeAt(o+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|63&n):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t};const buf2binstring=(e,t)=>{if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,o;const r=new Array(2*n);for(o=0,i=0;i<n;){let t=e[i++];if(t<128){r[o++]=t;continue}let a=_utf8len[t];if(a>4)r[o++]=65533,i+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&i<n;)t=t<<6|63&e[i++],a--;a>1?r[o++]=65533:t<65536?r[o++]=t:(t-=65536,r[o++]=55296|t>>10&1023,r[o++]=56320|1023&t)}}return buf2binstring(r,o)},utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+_utf8len[e[n]]>t?n:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH:Z_SYNC_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=deflate_1$2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Z_OK$2)throw new Error(messages$1[n]);if(t.header&&deflate_1$2.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=deflate_1$2.deflateSetDictionary(this.strm,e),n!==Z_OK$2)throw new Error(messages$1[n]);this._dict_set=!0}}function deflate$1(e,t){const n=new Deflate$1(t);if(n.push(e,!0),n.err)throw n.msg||messages$1[n.err];return n.result}function deflateRaw$1(e,t){return(t=t||{}).raw=!0,deflate$1(e,t)}function gzip$1(e,t){return(t=t||{}).gzip=!0,deflate$1(e,t)}Deflate$1.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let o,r;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Z_FINISH$2:Z_NO_FLUSH$1,"string"==typeof e?n.input=strings.string2buf(e):"[object ArrayBuffer]"===toString$1.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(r===Z_SYNC_FLUSH||r===Z_FULL_FLUSH)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=deflate_1$2.deflate(n,r),o===Z_STREAM_END$2)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=deflate_1$2.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Z_OK$2;if(0!==n.avail_out){if(r>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Deflate$1.prototype.onData=function(e){this.chunks.push(e)},Deflate$1.prototype.onEnd=function(e){e===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let n,i,o,r,a,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y,E,S,C;const w=e.state;n=e.next_in,S=e.input,i=n+(e.avail_in-5),o=e.next_out,C=e.output,r=o-(t-e.avail_out),a=o+(e.avail_out-257),s=w.dmax,l=w.wsize,c=w.whave,u=w.wnext,d=w.window,h=w.hold,p=w.bits,f=w.lencode,g=w.distcode,m=(1<<w.lenbits)-1,_=(1<<w.distbits)-1;e:do{p<15&&(h+=S[n++]<<p,p+=8,h+=S[n++]<<p,p+=8),v=f[h&m];t:for(;;){if(b=v>>>24,h>>>=b,p-=b,b=v>>>16&255,0===b)C[o++]=65535&v;else{if(!(16&b)){if(64&b){if(32&b){w.mode=TYPE$1;break e}e.msg="invalid literal/length code",w.mode=BAD$1;break e}v=f[(65535&v)+(h&(1<<b)-1)];continue t}for(T=65535&v,b&=15,b&&(p<b&&(h+=S[n++]<<p,p+=8),T+=h&(1<<b)-1,h>>>=b,p-=b),p<15&&(h+=S[n++]<<p,p+=8,h+=S[n++]<<p,p+=8),v=g[h&_];;){if(b=v>>>24,h>>>=b,p-=b,b=v>>>16&255,16&b){if(A=65535&v,b&=15,p<b&&(h+=S[n++]<<p,p+=8,p<b&&(h+=S[n++]<<p,p+=8)),A+=h&(1<<b)-1,A>s){e.msg="invalid distance too far back",w.mode=BAD$1;break e}if(h>>>=b,p-=b,b=o-r,A>b){if(b=A-b,b>c&&w.sane){e.msg="invalid distance too far back",w.mode=BAD$1;break e}if(y=0,E=d,0===u){if(y+=l-b,b<T){T-=b;do{C[o++]=d[y++]}while(--b);y=o-A,E=C}}else if(u<b){if(y+=l+u-b,b-=u,b<T){T-=b;do{C[o++]=d[y++]}while(--b);if(y=0,u<T){b=u,T-=b;do{C[o++]=d[y++]}while(--b);y=o-A,E=C}}}else if(y+=u-b,b<T){T-=b;do{C[o++]=d[y++]}while(--b);y=o-A,E=C}for(;T>2;)C[o++]=E[y++],C[o++]=E[y++],C[o++]=E[y++],T-=3;T&&(C[o++]=E[y++],T>1&&(C[o++]=E[y++]))}else{y=o-A;do{C[o++]=C[y++],C[o++]=C[y++],C[o++]=C[y++],T-=3}while(T>2);T&&(C[o++]=C[y++],T>1&&(C[o++]=C[y++]))}break}if(64&b){e.msg="invalid distance code",w.mode=BAD$1;break e}v=g[(65535&v)+(h&(1<<b)-1)]}}break}}while(n<i&&o<a);T=p>>3,n-=T,p-=T<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<a?a-o+257:257-(o-a),w.hold=h,w.bits=p};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,t,n,i,o,r,a,s)=>{const l=s.bits;let c,u,d,h,p,f,g=0,m=0,_=0,v=0,b=0,T=0,A=0,y=0,E=0,S=0,C=null;const w=new Uint16Array(MAXBITS+1),x=new Uint16Array(MAXBITS+1);let M,R,I,D=null;for(g=0;g<=MAXBITS;g++)w[g]=0;for(m=0;m<i;m++)w[t[n+m]]++;for(b=l,v=MAXBITS;v>=1&&0===w[v];v--);if(b>v&&(b=v),0===v)return o[r++]=20971520,o[r++]=20971520,s.bits=1,0;for(_=1;_<v&&0===w[_];_++);for(b<_&&(b=_),y=1,g=1;g<=MAXBITS;g++)if(y<<=1,y-=w[g],y<0)return-1;if(y>0&&(e===CODES$1||1!==v))return-1;for(x[1]=0,g=1;g<MAXBITS;g++)x[g+1]=x[g]+w[g];for(m=0;m<i;m++)0!==t[n+m]&&(a[x[t[n+m]]++]=m);if(e===CODES$1?(C=D=a,f=20):e===LENS$1?(C=lbase,D=lext,f=257):(C=dbase,D=dext,f=0),S=0,m=0,g=_,p=r,T=b,A=0,d=-1,E=1<<b,h=E-1,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;for(;;){M=g-A,a[m]+1<f?(R=0,I=a[m]):a[m]>=f?(R=D[a[m]-f],I=C[a[m]-f]):(R=96,I=0),c=1<<g-A,u=1<<T,_=u;do{u-=c,o[p+(S>>A)+u]=M<<24|R<<16|I}while(0!==u);for(c=1<<g-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,m++,0==--w[g]){if(g===v)break;g=t[n+a[m]]}if(g>b&&(S&h)!==d){for(0===A&&(A=b),p+=_,T=g-A,y=1<<T;T+A<v&&(y-=w[T+A],!(y<=0));)T++,y<<=1;if(E+=1<<T,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;d=S&h,o[d]=b<<24|T<<16|p-r}}return 0!==S&&(o[p+S]=g-A<<24|64<<16),s.bits=b,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK:Z_BLOCK,Z_TREES:Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR:Z_BUF_ERROR,Z_DEFLATED:Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=(e,t)=>{let n;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,inflateReset(e))},inflateInit2=(e,t)=>{if(!e)return Z_STREAM_ERROR$1;const n=new InflateState;e.state=n,n.strm=e,n.window=null,n.mode=HEAD;const i=inflateReset2(e,t);return i!==Z_OK$1&&(e.state=null),i},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,t,n,i)=>{let o;const r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(t.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>i&&(o=i),r.window.set(t.subarray(n-i,n-i+o),r.wnext),(i-=o)?(r.window.set(t.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0},inflate$2=(e,t)=>{let n,i,o,r,a,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y,E,S=0;const C=new Uint8Array(4);let w,x;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),a=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,h=l,E=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(0===n.wrap){n.mode=TYPEDO;break}for(;u<16;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=crc32_1(n.check,C,2,0),c=0,u=0,n.mode=FLAGS;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((15&c)!==Z_DEFLATED){e.msg="unknown compression method",n.mode=BAD;break}if(c>>>=4,u-=4,y=8+(15&c),0===n.wbits&&(n.wbits=y),y>15||y>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?DICTID:TYPE,c=0,u=0;break;case FLAGS:for(;u<16;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Z_DEFLATED){e.msg="unknown compression method",n.mode=BAD;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=crc32_1(n.check,C,2,0)),c=0,u=0,n.mode=TIME;case TIME:for(;u<32;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=crc32_1(n.check,C,4,0)),c=0,u=0,n.mode=OS;case OS:for(;u<16;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=crc32_1(n.check,C,2,0)),c=0,u=0,n.mode=EXLEN;case EXLEN:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=crc32_1(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(1024&n.flags&&(p=n.length,p>s&&(p=s),p&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+p),y)),512&n.flags&&4&n.wrap&&(n.check=crc32_1(n.check,i,p,r)),s-=p,r+=p,n.length-=p),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(2048&n.flags){if(0===s)break e;p=0;do{y=i[r+p++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y))}while(y&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=crc32_1(n.check,i,p,r)),s-=p,r+=p,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(4096&n.flags){if(0===s)break e;p=0;do{y=i[r+p++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y))}while(y&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=crc32_1(n.check,i,p,r)),s-=p,r+=p,y)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=BAD;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;u<32;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}e.adler=n.check=zswap32(c),c=0,u=0,n.mode=DICT;case DICT:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=s,n.hold=c,n.bits=u,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(n.last){c>>>=7&u,u-=7&u,n.mode=CHECK;break}for(;u<3;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES){c>>>=2,u-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}c>>>=2,u-=2;break;case STORED:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=65535&c,c=0,u=0,n.mode=COPY_,t===Z_TREES)break e;case COPY_:n.mode=COPY;case COPY:if(p=n.length,p){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;o.set(i.subarray(r,r+p),a),s-=p,r+=p,l-=p,a+=p,n.length-=p;break}n.mode=TYPE;break;case TABLE:for(;u<14;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.lens[M[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},E=inftrees(CODES,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,E){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],m=S>>>24,_=S>>>16&255,v=65535&S,!(m<=u);){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(v<16)c>>>=m,u-=m,n.lens[n.have++]=v;else{if(16===v){for(x=m+2;u<x;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=BAD;break}y=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===v){for(x=m+3;u<x;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}c>>>=m,u-=m,y=0,p=3+(7&c),c>>>=3,u-=3}else{for(x=m+7;u<x;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}c>>>=m,u-=m,y=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;p--;)n.lens[n.have++]=y}}if(n.mode===BAD)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,w={bits:n.lenbits},E=inftrees(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,E){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},E=inftrees(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,E){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES)break e;case LEN_:n.mode=LEN;case LEN:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=s,n.hold=c,n.bits=u,inffast(e,h),a=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,i=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],m=S>>>24,_=S>>>16&255,v=65535&S,!(m<=u);){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(_&&!(240&_)){for(b=m,T=_,A=v;S=n.lencode[A+((c&(1<<b+T)-1)>>b)],m=S>>>24,_=S>>>16&255,v=65535&S,!(b+m<=u);){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,n.length=v,0===_){n.mode=LIT;break}if(32&_){n.back=-1,n.mode=TYPE;break}if(64&_){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=15&_,n.mode=LENEXT;case LENEXT:if(n.extra){for(x=n.extra;u<x;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;S=n.distcode[c&(1<<n.distbits)-1],m=S>>>24,_=S>>>16&255,v=65535&S,!(m<=u);){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(!(240&_)){for(b=m,T=_,A=v;S=n.distcode[A+((c&(1<<b+T)-1)>>b)],m=S>>>24,_=S>>>16&255,v=65535&S,!(b+m<=u);){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=m,u-=m,n.back+=m,64&_){e.msg="invalid distance code",n.mode=BAD;break}n.offset=v,n.extra=15&_,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(x=n.extra;u<x;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(0===l)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=o,f=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{o[a++]=g[f++]}while(--p);0===n.length&&(n.mode=LEN);break;case LIT:if(0===l)break e;o[a++]=n.length,l--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=i[r++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?crc32_1(n.check,o,h,a-h):adler32_1(n.check,o,h,a-h)),h=l,4&n.wrap&&(n.flags?c:zswap32(c))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}c=0,u=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=i[r++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=BAD;break}c=0,u=0}n.mode=DONE;case DONE:E=Z_STREAM_END$1;break e;case BAD:E=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;default:return Z_STREAM_ERROR$1}return e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?crc32_1(n.check,o,h,e.next_out-h):adler32_1(n.check,o,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(0===d&&0===h||t===Z_FINISH$1)&&E===Z_OK$1&&(E=Z_BUF_ERROR),E},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,t)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(e,t)=>{const n=t.length;let i,o,r;return inflateStateCheck(e)?Z_STREAM_ERROR$1:(i=e.state,0!==i.wrap&&i.mode!==DICT?Z_STREAM_ERROR$1:i.mode===DICT&&(o=1,o=adler32_1(o,t,n,0),o!==i.check)?Z_DATA_ERROR$1:(r=updatewindow(e,t,n,n),r?(i.mode=MEM,Z_MEM_ERROR$1):(i.havedict=1,Z_OK$1)))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH,Z_FINISH:Z_FINISH,Z_OK:Z_OK,Z_STREAM_END:Z_STREAM_END,Z_NEED_DICT:Z_NEED_DICT,Z_STREAM_ERROR:Z_STREAM_ERROR,Z_DATA_ERROR:Z_DATA_ERROR,Z_MEM_ERROR:Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common$1.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(n!==Z_OK)throw new Error(messages$1[n]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$2.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary),n!==Z_OK)))throw new Error(messages$1[n])}function inflate$1(e,t){const n=new Inflate$1(t);if(n.push(e),n.err)throw n.msg||messages$1[n.err];return n.result}function inflateRaw$1(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate$1.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let r,a,s;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString$2.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),r=inflate_1$2.inflate(n,a),r===Z_NEED_DICT&&o&&(r=inflate_1$2.inflateSetDictionary(n,o),r===Z_OK?r=inflate_1$2.inflate(n,a):r===Z_DATA_ERROR&&(r=Z_NEED_DICT));n.avail_in>0&&r===Z_STREAM_END&&n.state.wrap>0&&0!==e[n.next_in];)inflate_1$2.inflateReset(n),r=inflate_1$2.inflate(n,a);switch(r){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(r),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||r===Z_STREAM_END))if("string"===this.options.to){let e=strings.utf8border(n.output,n.next_out),t=n.next_out-e,o=strings.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(r!==Z_OK||0!==s){if(r===Z_STREAM_END)return r=inflate_1$2.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate:Deflate,deflate:deflate,deflateRaw:deflateRaw,gzip:gzip}=deflate_1$1,{Inflate:Inflate,inflate:inflate,inflateRaw:inflateRaw,ungzip:ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};const isIos=()=>!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isAndroid$1=()=>{const e=navigator.userAgent;return e.indexOf("Android")>-1||e.indexOf("Adr")>-1},throttle$1=(e,t)=>{let n=performance.now();return function(...i){performance.now()-n>=t&&(e(...i),n=performance.now())}};function hexToBase64(e){var t;const n=null===(t=e.match(/.{1,2}/g))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return window.btoa(String.fromCharCode.apply(null,n))}const calSize=e=>{if(e<0)return"0KB";const t=Math.round(e/1024);if(t<1024)return`${t}KB`;return`${(t/1024).toFixed(1)}MB`},getWindowUrlParams=()=>{const e=window.location.href,t=e.substring(e.indexOf("?")+1,e.length).split("&").map((e=>{const t=e.split("=");return{[t[0]]:Number(t[1])}}));return Object.assign({},...t)},showScreenshot=(e,t,n)=>{var i;if(!e||!t||!n)return;const o=n.getBoundingClientRect(),r=o.x,a=o.y,s=o.width,l=o.height,c=document.createElement("img"),u=`screenshot_${Math.random()}`;c.style.width=`${s}px`,c.style.height=`${l}px`,c.style.top=`${a}px`,c.style.left=`${r}px`,c.style.position="absolute",c.style.borderRadius="8px",c.style.zIndex="1",c.style.objectFit="cover",c.className=u,e.startsWith("data:image/png;base64")?c.src=e:c.src=`data:image/png;base64,${e}`;const d=t.getBoundingClientRect(),h=d.width,p=d.height,f=d.x,g=d.y;c.animate([{top:`${a}px`,left:`${r}px`,width:`${s}px`,height:`${l}px`},{top:`${g}px`,left:`${f}px`,width:`${h}px`,height:`${p}px`}],{duration:500,iterations:1,fill:"forwards",easing:"ease"}),null===(i=document.getElementById("operationPage"))||void 0===i||i.appendChild(c),window.setTimeout((()=>{var e;const n=document.getElementsByClassName(u),i=null==n?void 0:n[0].cloneNode(!0);i.style.width=`${h}px`,i.style.height=`${p}px`,i.style.top="0px",i.style.left="0px",i.style.position="relative",null==n||n[0].remove(),null===(e=t.children[0])||void 0===e||e.remove(),t.appendChild(i),i.onclick=()=>{webToApp("goToAlbum","")},console.log("1212"),window.setTimeout((()=>{i.animate([{opacity:1},{opacity:0}],{duration:1e3,iterations:1,fill:"forwards",easing:"ease"}).onfinish=()=>{i.remove()}}),2e3)}),500)};function useDoubleTouchHook(e){let t=!1,n=[0,0],i=[0,0],o=[0,0],r=performance.now();return{touchStart:e=>{e.touches.length>=2&&(t=!0,n=[e.touches[0].clientX,e.touches[1].clientX],i=[e.touches[0].identifier,e.touches[1].identifier],r=performance.now())},touchMove:e=>{t&&e.touches.length>=2&&e.touches[0].identifier===i[0]&&e.touches[1].identifier===i[1]&&(o=[e.touches[0].clientX,e.touches[1].clientX])},touchEnd:()=>{if(t){const i=(n[0]+n[1])/2,a=(o[0]+o[1])/2;t=!1,e&&e(i,a,performance.now()-r)}}}}function formatTime$2(e,t,n){return`${padZero(e)}:${padZero(t)}:${padZero(n)}`}function padZero(e){return e.toString().padStart(2,"0")}function promiseAbort(e){let t=()=>{};const n=new Promise((e=>t=e)),i=Promise.race([e,n]);return i.abort=t,i}function formatDate(e,t=!0){const n=e,i=n.getFullYear(),o=("0"+(n.getMonth()+1)).slice(-2),r=("0"+n.getDate()).slice(-2),a=("0"+n.getHours()).slice(-2),s=("0"+n.getMinutes()).slice(-2),l=("0"+n.getSeconds()).slice(-2);return i+"-"+o+"-"+r+(t?" "+a+":"+s+":"+l:"")}function compareVersions(e,t){const n=e.split(".").map(Number),i=t.split(".").map(Number),o=Math.max(n.length,i.length);for(let r=0;r<o;r++){const e=r<n.length?n[r]:0,t=r<i.length?i[r]:0;if(e>t)return 1;if(e<t)return-1}return 0}function base64ToBlob(e){const t=e.includes(";base64,")?e.split(";base64,")[1]:e,n=atob(t),i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);const o=new Uint8Array(i);return new Blob([o])}function blobToBase64(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=e=>{var n;return t((null===(n=e.target)||void 0===n||null===(n=n.result)||void 0===n?void 0:n.split(",")[1])||"")},i.onerror=()=>n(new Error("转换失败")),i.readAsDataURL(e)}))}function fetchForApp(e){return new Promise((t=>{webToApp("webReqAssets",{url:e},(e=>{const n=base64ToBlob(e);t(n)}))}))}function fetchWithTimeout(e,t=1500,n){return new Promise(((i,o)=>{const r=setTimeout(o,t);fetch(e,n).then((e=>{i(e.blob()),r&&window.clearTimeout(r)}))}))}function encodePako(e){return e?btoa(String.fromCharCode(...pako.gzip(e))):""}function decodePako(e){if(!e)return"";const t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return pako.ungzip(i,{to:"string"})}const ZHBridge=window.ZHBridge||{};window.ZHBridge=ZHBridge,ZHBridge.Core=ZHBridge.Core||function(){let e=1;const t=new Map;let n=[];const i=new Map;return{getAndClearJsActions:function(){const e=JSON.stringify(n);return n=[],e},callJsHandler:function(e){const t=e,n=t.name,o=t.args,r=t.argsCount;if(!n||null==r||r!=o.length)return;const a=i.get(n);if(a){const e=a(o);return null!=e?JSON.stringify(e):void 0}},callbackJs:e=>{if(!e)return;const n=e,i=n.id,o=n.status,r=n.args;if(!i||null==o||null==r)return;const a=t.get(i),s=a.success,l=a.fail;if(!a)return;let c;return o&&s?c=s(r):!o&&l&&(c=l(r)),null!=c?JSON.stringify(c):void 0},registerJsHandler:function(e,t){i.set(e,t)},callNativeHandler:function(i,o,r,a){let s=++e;r||a?t.set(s,{success:r,fail:a}):s=0;const l={id:s,name:i,args:o,argsCount:o.length};window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.ZHBridge&&window.webkit.messageHandlers.ZHBridge.postMessage?window.webkit.messageHandlers.ZHBridge.postMessage(JSON.stringify([l])):window.zhbridge_messageHandlers&&window.zhbridge_messageHandlers.ZHBridge&&window.zhbridge_messageHandlers.ZHBridge.postMessage?window.zhbridge_messageHandlers.ZHBridge.postMessage(JSON.stringify([l])):(n.push(l),function(){const e=document.createElement("iframe");e.setAttribute("src","ZHBridge://__BRIDGE_LOADED__"),e.setAttribute("style","display:none;"),e.setAttribute("height","0px"),e.setAttribute("width","0px"),e.setAttribute("frameborder","0"),document.body.appendChild(e),setTimeout((function(){document.body.removeChild(e)}),0)}())},ready:function(e){e&&document.addEventListener("DOMContentLoaded",e)}}}();const JSToNativeEvents={jsEvent1(){console.log("jsEvent1")},jsEvent2(){console.log("jsEvent2")},webServiceIsOK(){console.log("webServiceIsOK事件触发")},webSendDeviceState(){console.log("webSendDeviceState事件触发")},takePhoto(){console.log("takePhoto事件触发")},takeVideo(){console.log("takeVideo事件触发")},goToAlbum(){console.log("goToAlbum事件触发")},backToApp(){console.log("backToApp事件触发")},webSendRTCSessionDescription(){console.log("webSendRTCSessionDescription事件触发")},webReqAPPNetwork(){console.log("webReqAPPNetwork事件触发")},webSendUwbInfo(){console.log("webSendUwbInfo事件触发")},webReqTurnServerInfo(){console.log("webReqTurnServerInfo事件触发")},webSendCmdRes(){},webSendLidarInfo(){console.log("webSendLidarInfo事件触发")},webReqAPPAbility(){console.log("webReqAPPAbility事件触发")},webSendHideBackBtn(){console.log("webReqAudioAuth 事件触发")},webSendSlamIsOK(){console.log("webSendSlamIsOK 事件触发")},webSendNavFile(){console.log("webSendNavFile 事件触发")},webReqAllNavFileList(){console.log("webReqAllNavFileList 事件触发")},webDelNavFile(){console.log("webDelNavFile 事件触发")},webReqAssets(){console.log("webReqAssets 事件触发")}},JSToNativeEvents$1=new Map(Object.entries(JSToNativeEvents)),inBrowser$1="undefined"!=typeof window,hasSymbol="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,makeSymbol=e=>hasSymbol?Symbol(e):e,generateFormatCacheKey=(e,t,n)=>friendlyJSONstringify({l:e,k:t,s:n}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=e=>"number"==typeof e&&isFinite(e),isDate=e=>"[object Date]"===toTypeString(e),isRegExp=e=>"[object RegExp]"===toTypeString(e),isEmptyObject=e=>isPlainObject(e)&&0===Object.keys(e).length;function warn$1(e,t){"undefined"!=typeof console&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const assign$1=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty$1.call(e,t)}const isArray$1=Array.isArray,isFunction=e=>"function"==typeof e,isString=e=>"string"==typeof e,isBoolean=e=>"boolean"==typeof e,isObject$1=e=>null!==e&&"object"==typeof e,objectToString$1=Object.prototype.toString,toTypeString=e=>objectToString$1.call(e),isPlainObject=e=>"[object Object]"===toTypeString(e),toDisplayString=e=>null==e?"":isArray$1(e)||isPlainObject(e)&&e.toString===objectToString$1?JSON.stringify(e,null,2):String(e),CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(e,t,n={}){const{domain:i,messages:o,args:r}=n,a=new SyntaxError(String(e));return a.code=e,t&&(a.location=t),a.domain=i,a}function defaultOnError(e){throw e}function createPosition(e,t,n){return{line:e,column:t,offset:n}}function createLocation(e,t,n){return{start:e,end:t}}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF="\n",CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const t=e;let n=0,i=1,o=1,r=0;const a=e=>t[e]===CHAR_CR&&t[e+1]===CHAR_LF,s=e=>t[e]===CHAR_PS,l=e=>t[e]===CHAR_LS,c=e=>a(e)||(e=>t[e]===CHAR_LF)(e)||s(e)||l(e),u=e=>a(e)||s(e)||l(e)?CHAR_LF:t[e];function d(){return r=0,c(n)&&(i++,o=0),a(n)&&n++,n++,o++,t[n]}return{index:()=>n,line:()=>i,column:()=>o,peekOffset:()=>r,charAt:u,currentChar:()=>u(n),currentPeek:()=>u(n+r),next:d,peek:function(){return a(n+r)&&r++,r++,t[n+r]},reset:function(){n=0,i=1,o=1,r=0},resetPeek:function(e=0){r=e},skipToPeek:function(){const e=n+r;for(;e!==n;)d();r=0}}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(e,t={}){const n=!1!==t.location,i=createScanner(e),o=()=>i.index(),r=()=>createPosition(i.line(),i.column(),i.index()),a=r(),s=o(),l={currentType:14,offset:s,startLoc:a,endLoc:a,lastType:14,lastOffset:s,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=t;function d(e,t,n,...i){const o=c();if(t.column+=n,t.offset+=n,u){const n=createCompileError(e,createLocation(o.startLoc,t),{domain:ERROR_DOMAIN$1,args:i});u(n)}}function h(e,t,i){e.endLoc=r(),e.currentType=t;const o={type:t};return n&&(o.loc=createLocation(e.startLoc,e.endLoc)),null!=i&&(o.value=i),o}const p=e=>h(e,14);function f(e,t){return e.currentChar()===t?(e.next(),t):(d(CompileErrorCodes.EXPECTED_TOKEN,r(),0,t),"")}function g(e){let t="";for(;e.currentPeek()===CHAR_SP||e.currentPeek()===CHAR_LF;)t+=e.currentPeek(),e.peek();return t}function m(e){const t=g(e);return e.skipToPeek(),t}function _(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||95===t}function v(e,t){const{currentType:n}=t;if(2!==n)return!1;g(e);const i=function(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}("-"===e.currentPeek()?e.peek():e.currentPeek());return e.resetPeek(),i}function b(e){g(e);const t="|"===e.currentPeek();return e.resetPeek(),t}function T(e,t=!0){const n=(t=!1,i="",o=!1)=>{const r=e.currentPeek();return"{"===r?"%"!==i&&t:"@"!==r&&r?"%"===r?(e.peek(),n(t,"%",!0)):"|"===r?!("%"!==i&&!o)||!(i===CHAR_SP||i===CHAR_LF):r===CHAR_SP?(e.peek(),n(!0,CHAR_SP,o)):r!==CHAR_LF||(e.peek(),n(!0,CHAR_LF,o)):"%"===i||t},i=n();return t&&e.resetPeek(),i}function A(e,t){const n=e.currentChar();return n===EOF?EOF:t(n)?(e.next(),n):null}function y(e){return A(e,(e=>{const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t}))}function E(e){return A(e,(e=>{const t=e.charCodeAt(0);return t>=48&&t<=57}))}function S(e){return A(e,(e=>{const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}))}function C(e){let t="",n="";for(;t=E(e);)n+=t;return n}function w(e){let t="";for(;;){const n=e.currentChar();if("{"===n||"}"===n||"@"===n||"|"===n||!n)break;if("%"===n){if(!T(e))break;t+=n,e.next()}else if(n===CHAR_SP||n===CHAR_LF)if(T(e))t+=n,e.next();else{if(b(e))break;t+=n,e.next()}else t+=n,e.next()}return t}function x(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return M(e,t,4);case"U":return M(e,t,6);default:return d(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,r(),0,t),""}}function M(e,t,n){f(e,t);let i="";for(let o=0;o<n;o++){const n=S(e);if(!n){d(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${t}${i}${e.currentChar()}`);break}i+=n}return`\\${t}${i}`}function R(e){m(e);const t=f(e,"|");return m(e),t}function I(e,t){let n=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&d(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),e.next(),n=h(t,2,"{"),m(e),t.braceNest++,n;case"}":return t.braceNest>0&&2===t.currentType&&d(CompileErrorCodes.EMPTY_PLACEHOLDER,r(),0),e.next(),n=h(t,3,"}"),t.braceNest--,t.braceNest>0&&m(e),t.inLinked&&0===t.braceNest&&(t.inLinked=!1),n;case"@":return t.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),n=D(e,t)||p(t),t.braceNest=0,n;default:let i=!0,o=!0,a=!0;if(b(e))return t.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),n=h(t,1,R(e)),t.braceNest=0,t.inLinked=!1,n;if(t.braceNest>0&&(5===t.currentType||6===t.currentType||7===t.currentType))return d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),t.braceNest=0,k(e,t);if(i=function(e,t){const{currentType:n}=t;if(2!==n)return!1;g(e);const i=_(e.currentPeek());return e.resetPeek(),i}(e,t))return n=h(t,5,function(e){m(e);let t="",n="";for(;t=y(e);)n+=t;return e.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),n}(e)),m(e),n;if(o=v(e,t))return n=h(t,6,function(e){m(e);let t="";return"-"===e.currentChar()?(e.next(),t+=`-${C(e)}`):t+=C(e),e.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,r(),0),t}(e)),m(e),n;if(a=function(e,t){const{currentType:n}=t;if(2!==n)return!1;g(e);const i=e.currentPeek()===LITERAL_DELIMITER;return e.resetPeek(),i}(e,t))return n=h(t,7,function(e){m(e),f(e,"'");let t="",n="";const i=e=>e!==LITERAL_DELIMITER&&e!==CHAR_LF;for(;t=A(e,i);)n+="\\"===t?x(e):t;const o=e.currentChar();return o===CHAR_LF||o===EOF?(d(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),o===CHAR_LF&&(e.next(),f(e,"'")),n):(f(e,"'"),n)}(e)),m(e),n;if(!i&&!o&&!a)return n=h(t,13,function(e){m(e);let t="",n="";const i=e=>"{"!==e&&"}"!==e&&e!==CHAR_SP&&e!==CHAR_LF;for(;t=A(e,i);)n+=t;return n}(e)),d(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,n.value),m(e),n}return n}function D(e,t){const{currentType:n}=t;let i=null;const o=e.currentChar();switch(8!==n&&9!==n&&12!==n&&10!==n||o!==CHAR_LF&&o!==CHAR_SP||d(CompileErrorCodes.INVALID_LINKED_FORMAT,r(),0),o){case"@":return e.next(),i=h(t,8,"@"),t.inLinked=!0,i;case".":return m(e),e.next(),h(t,9,".");case":":return m(e),e.next(),h(t,10,":");default:return b(e)?(i=h(t,1,R(e)),t.braceNest=0,t.inLinked=!1,i):function(e,t){const{currentType:n}=t;if(8!==n)return!1;g(e);const i="."===e.currentPeek();return e.resetPeek(),i}(e,t)||function(e,t){const{currentType:n}=t;if(8!==n&&12!==n)return!1;g(e);const i=":"===e.currentPeek();return e.resetPeek(),i}(e,t)?(m(e),D(e,t)):function(e,t){const{currentType:n}=t;if(9!==n)return!1;g(e);const i=_(e.currentPeek());return e.resetPeek(),i}(e,t)?(m(e),h(t,12,function(e){let t="",n="";for(;t=y(e);)n+=t;return n}(e))):function(e,t){const{currentType:n}=t;if(10!==n)return!1;const i=()=>{const t=e.currentPeek();return"{"===t?_(e.peek()):!("@"===t||"%"===t||"|"===t||":"===t||"."===t||t===CHAR_SP||!t)&&(t===CHAR_LF?(e.peek(),i()):_(t))},o=i();return e.resetPeek(),o}(e,t)?(m(e),"{"===o?I(e,t)||i:h(t,11,function(e){const t=(n=!1,i)=>{const o=e.currentChar();return"{"!==o&&"%"!==o&&"@"!==o&&"|"!==o&&o?o===CHAR_SP?i:o===CHAR_LF?(i+=o,e.next(),t(n,i)):(i+=o,e.next(),t(!0,i)):i};return t(!1,"")}(e))):(8===n&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,r(),0),t.braceNest=0,t.inLinked=!1,k(e,t))}}function k(e,t){let n={type:14};if(t.braceNest>0)return I(e,t)||p(t);if(t.inLinked)return D(e,t)||p(t);switch(e.currentChar()){case"{":return I(e,t)||p(t);case"}":return d(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,r(),0),e.next(),h(t,3,"}");case"@":return D(e,t)||p(t);default:if(b(e))return n=h(t,1,R(e)),t.braceNest=0,t.inLinked=!1,n;const{isModulo:i,hasSpace:o}=function(e){const t=g(e),n="%"===e.currentPeek()&&"{"===e.peek();return e.resetPeek(),{isModulo:n,hasSpace:t.length>0}}(e);if(i)return o?h(t,0,w(e)):h(t,4,function(e){m(e);const t=e.currentChar();return"%"!==t&&d(CompileErrorCodes.EXPECTED_TOKEN,r(),0,t),e.next(),"%"}(e));if(T(e))return h(t,0,w(e))}return n}return{nextToken:function(){const{currentType:e,offset:t,startLoc:n,endLoc:a}=l;return l.lastType=e,l.lastOffset=t,l.lastStartLoc=n,l.lastEndLoc=a,l.offset=o(),l.startLoc=r(),i.currentChar()===EOF?h(l,14):k(i,l)},currentOffset:o,currentPosition:r,context:c}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const e=parseInt(t||n,16);return e<=55295||e>=57344?String.fromCodePoint(e):"�"}}}function createParser(e={}){const t=!1!==e.location,{onError:n}=e;function i(e,t,i,o,...r){const a=e.currentPosition();if(a.offset+=o,a.column+=o,n){const e=createCompileError(t,createLocation(i,a),{domain:ERROR_DOMAIN,args:r});n(e)}}function o(e,n,i){const o={type:e,start:n,end:n};return t&&(o.loc={start:i,end:i}),o}function r(e,n,i,o){e.end=n,t&&e.loc&&(e.loc.end=i)}function a(e,t){const n=e.context(),i=o(3,n.offset,n.startLoc);return i.value=t,r(i,e.currentOffset(),e.currentPosition()),i}function s(e,t){const n=e.context(),{lastOffset:i,lastStartLoc:a}=n,s=o(5,i,a);return s.index=parseInt(t,10),e.nextToken(),r(s,e.currentOffset(),e.currentPosition()),s}function l(e,t){const n=e.context(),{lastOffset:i,lastStartLoc:a}=n,s=o(4,i,a);return s.key=t,e.nextToken(),r(s,e.currentOffset(),e.currentPosition()),s}function c(e,t){const n=e.context(),{lastOffset:i,lastStartLoc:a}=n,s=o(9,i,a);return s.value=t.replace(KNOWN_ESCAPES,fromEscapeSequence),e.nextToken(),r(s,e.currentOffset(),e.currentPosition()),s}function u(e){const t=e.context(),n=o(6,t.offset,t.startLoc);let a=e.nextToken();if(9===a.type){const t=function(e){const t=e.nextToken(),n=e.context(),{lastOffset:a,lastStartLoc:s}=n,l=o(8,a,s);return 12!==t.type?(i(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,n.lastStartLoc,0),l.value="",r(l,a,s),{nextConsumeToken:t,node:l}):(null==t.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,n.lastStartLoc,0,getTokenCaption(t)),l.value=t.value||"",r(l,e.currentOffset(),e.currentPosition()),{node:l})}(e);n.modifier=t.node,a=t.nextConsumeToken||e.nextToken()}switch(10!==a.type&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),a=e.nextToken(),2===a.type&&(a=e.nextToken()),a.type){case 11:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=function(e,t){const n=e.context(),i=o(7,n.offset,n.startLoc);return i.value=t,r(i,e.currentOffset(),e.currentPosition()),i}(e,a.value||"");break;case 5:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=l(e,a.value||"");break;case 6:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=s(e,a.value||"");break;case 7:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=c(e,a.value||"");break;default:i(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,t.lastStartLoc,0);const u=e.context(),d=o(7,u.offset,u.startLoc);return d.value="",r(d,u.offset,u.startLoc),n.key=d,r(n,u.offset,u.startLoc),{nextConsumeToken:a,node:n}}return r(n,e.currentOffset(),e.currentPosition()),{node:n}}function d(e){const t=e.context(),n=o(2,1===t.currentType?e.currentOffset():t.offset,1===t.currentType?t.endLoc:t.startLoc);n.items=[];let d=null;do{const o=d||e.nextToken();switch(d=null,o.type){case 0:null==o.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(a(e,o.value||""));break;case 6:null==o.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(s(e,o.value||""));break;case 5:null==o.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(l(e,o.value||""));break;case 7:null==o.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(c(e,o.value||""));break;case 8:const r=u(e);n.items.push(r.node),d=r.nextConsumeToken||null}}while(14!==t.currentType&&1!==t.currentType);return r(n,1===t.currentType?t.lastOffset:e.currentOffset(),1===t.currentType?t.lastEndLoc:e.currentPosition()),n}function h(e){const t=e.context(),{offset:n,startLoc:a}=t,s=d(e);return 14===t.currentType?s:function(e,t,n,a){const s=e.context();let l=0===a.items.length;const c=o(1,t,n);c.cases=[],c.cases.push(a);do{const t=d(e);l||(l=0===t.items.length),c.cases.push(t)}while(14!==s.currentType);return l&&i(e,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,n,0),r(c,e.currentOffset(),e.currentPosition()),c}(e,n,a,s)}return{parse:function(n){const a=createTokenizer(n,assign$1({},e)),s=a.context(),l=o(0,s.offset,s.startLoc);return t&&l.loc&&(l.loc.source=n),l.body=h(a),14!==s.currentType&&i(a,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,s.lastStartLoc,0,n[s.offset]||""),r(l,a.currentOffset(),a.currentPosition()),l}}}function getTokenCaption(e){if(14===e.type)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function createTransformer(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:e=>(n.helpers.add(e),e)}}function traverseNodes(e,t){for(let n=0;n<e.length;n++)traverseNode(e[n],t)}function traverseNode(e,t){switch(e.type){case 1:traverseNodes(e.cases,t),t.helper("plural");break;case 2:traverseNodes(e.items,t);break;case 6:traverseNode(e.key,t),t.helper("linked"),t.helper("type");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named")}}function transform$1(e,t={}){const n=createTransformer(e);n.helper("normalize"),e.body&&traverseNode(e.body,n);const i=n.context();e.helpers=Array.from(i.helpers)}function createCodeGenerator(e,t){const{filename:n,breakLineCode:i,needIndent:o}=t,r={source:e.loc.source,filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:o,indentLevel:0};function a(e,t){r.code+=e}function s(e,t=!0){const n=t?i:"";a(o?n+"  ".repeat(e):n)}return{context:()=>r,push:a,indent:function(e=!0){const t=++r.indentLevel;e&&s(t)},deindent:function(e=!0){const t=--r.indentLevel;e&&s(t)},newline:function(){s(r.indentLevel)},helper:e=>`_${e}`,needIndent:()=>r.needIndent}}function generateLinkedNode(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),generateNode(e,t.key),t.modifier?(e.push(", "),generateNode(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,t){const{helper:n,needIndent:i}=e;e.push(`${n("normalize")}([`),e.indent(i());const o=t.items.length;for(let r=0;r<o&&(generateNode(e,t.items[r]),r!==o-1);r++)e.push(", ");e.deindent(i()),e.push("])")}function generatePluralNode(e,t){const{helper:n,needIndent:i}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(i());const o=t.cases.length;for(let n=0;n<o&&(generateNode(e,t.cases[n]),n!==o-1);n++)e.push(", ");e.deindent(i()),e.push("])")}}function generateResource(e,t){t.body?generateNode(e,t.body):e.push("null")}function generateNode(e,t){const{helper:n}=e;switch(t.type){case 0:generateResource(e,t);break;case 1:generatePluralNode(e,t);break;case 2:generateMessageNode(e,t);break;case 6:generateLinkedNode(e,t);break;case 8:case 7:case 9:case 3:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t)}}const generate=(e,t={})=>{const n=isString(t.mode)?t.mode:"normal",i=isString(t.filename)?t.filename:"message.intl";t.sourceMap;const o=null!=t.breakLineCode?t.breakLineCode:"arrow"===n?";":"\n",r=t.needIndent?t.needIndent:"arrow"!==n,a=e.helpers||[],s=createCodeGenerator(e,{filename:i,breakLineCode:o,needIndent:r});s.push("normal"===n?"function __msg__ (ctx) {":"(ctx) => {"),s.indent(r),a.length>0&&(s.push(`const { ${a.map((e=>`${e}: _${e}`)).join(", ")} } = ctx`),s.newline()),s.push("return "),generateNode(s,e),s.deindent(r),s.push("}");const{code:l,map:c}=s.context();return{ast:e,code:l,map:c?c.toJSON():void 0}};function baseCompile(e,t={}){const n=assign$1({},t),i=createParser(n).parse(e);return transform$1(i,n),generate(i,n)}
/*!
        * devtools-if v9.2.2
        * (c) 2022 kazuya kawaguchi
        * Released under the MIT License.
        */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"},pathStateMachine=[];
/*!
        * core-base v9.2.2
        * (c) 2022 kazuya kawaguchi
        * Released under the MIT License.
        */pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}function getPathCharType(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(isLiteral(t)?stripQuotes(t):"*"+t)}function parse(e){const t=[];let n,i,o,r,a,s,l,c=-1,u=0,d=0;const h=[];function p(){const t=e[c+1];if(5===u&&"'"===t||6===u&&'"'===t)return c++,o="\\"+t,h[0](),!0}for(h[0]=()=>{void 0===i?i=o:i+=o},h[1]=()=>{void 0!==i&&(t.push(i),i=void 0)},h[2]=()=>{h[0](),d++},h[3]=()=>{if(d>0)d--,u=4,h[0]();else{if(d=0,void 0===i)return!1;if(i=formatSubPath(i),!1===i)return!1;h[1]()}};null!==u;)if(c++,n=e[c],"\\"!==n||!p()){if(r=getPathCharType(n),l=pathStateMachine[u],a=l[r]||l.l||8,8===a)return;if(u=a[0],void 0!==a[1]&&(s=h[a[1]],s&&(o=n,!1===s())))return;if(7===u)return t}}const cache=new Map;function resolveWithKeyValue(e,t){return isObject$1(e)?e[t]:null}function resolveValue(e,t){if(!isObject$1(e))return null;let n=cache.get(t);if(n||(n=parse(t),n&&cache.set(t,n)),!n)return null;const i=n.length;let o=e,r=0;for(;r<i;){const e=o[n[r]];if(void 0===e)return null;o=e,r++}return o}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>0===e.length?"":e.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const t=isNumber$1(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$1(e.named.count)||isNumber$1(e.named.n))?isNumber$1(e.named.count)?e.named.count:isNumber$1(e.named.n)?e.named.n:t:t}function normalizeNamed(e,t){t.count||(t.count=e),t.n||(t.n=e)}function createMessageContext(e={}){const t=e.locale,n=getPluralIndex(e),i=isObject$1(e.pluralRules)&&isString(t)&&isFunction(e.pluralRules[t])?e.pluralRules[t]:pluralDefault,o=isObject$1(e.pluralRules)&&isString(t)&&isFunction(e.pluralRules[t])?pluralDefault:void 0,r=e.list||[],a=e.named||{};isNumber$1(e.pluralIndex)&&normalizeNamed(n,a);function s(t){const n=isFunction(e.messages)?e.messages(t):!!isObject$1(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):DEFAULT_MESSAGE)}const l=isPlainObject(e.processor)&&isFunction(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,c=isPlainObject(e.processor)&&isFunction(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,u={list:e=>r[e],named:e=>a[e],plural:e=>e[i(n,e.length,o)],linked:(t,...n)=>{const[i,o]=n;let r="text",a="";1===n.length?isObject$1(i)?(a=i.modifier||a,r=i.type||r):isString(i)&&(a=i||a):2===n.length&&(isString(i)&&(a=i||a),isString(o)&&(r=o||r));let l=s(t)(u);return"vnode"===r&&isArray$1(l)&&a&&(l=l[0]),a?(c=a,e.modifiers?e.modifiers[c]:DEFAULT_MODIFIER)(l,r):l;var c},message:s,type:isPlainObject(e.processor)&&isString(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,interpolate:c,normalize:l};return u}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,t,n){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:n})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(e){return t=>devtools&&devtools.emit(e,t)}function fallbackWithSimple(e,t,n){return[...new Set([n,...isArray$1(t)?t:isObject$1(t)?Object.keys(t):isString(t)?[t]:[n]])]}function fallbackWithLocaleChain(e,t,n){const i=isString(n)?n:DEFAULT_LOCALE,o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let r=o.__localeChainCache.get(i);if(!r){r=[];let e=[n];for(;isArray$1(e);)e=appendBlockToChain(r,e,t);const a=isArray$1(t)||!isPlainObject(t)?t:t.default?t.default:null;e=isString(a)?[a]:a,isArray$1(e)&&appendBlockToChain(r,e,!1),o.__localeChainCache.set(i,r)}return r}function appendBlockToChain(e,t,n){let i=!0;for(let o=0;o<t.length&&isBoolean(i);o++){const r=t[o];isString(r)&&(i=appendLocaleToChain(e,t[o],n))}return i}function appendLocaleToChain(e,t,n){let i;const o=t.split("-");do{i=appendItemToChain(e,o.join("-"),n),o.splice(-1,1)}while(o.length&&!0===i);return i}function appendItemToChain(e,t,n){let i=!1;if(!e.includes(t)&&(i=!0,t)){i="!"!==t[t.length-1];const o=t.replace(/!/g,"");e.push(o),(isArray$1(n)||isPlainObject(n))&&n[o]&&(i=n[o])}return i}const VERSION$2="9.2.2",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,t)=>"text"===t&&isString(e)?e.toUpperCase():"vnode"===t&&isObject$1(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>"text"===t&&isString(e)?e.toLowerCase():"vnode"===t&&isObject$1(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>"text"===t&&isString(e)?capitalize(e):"vnode"===t&&isObject$1(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler,_resolver,_fallbacker;function registerMessageCompiler(e){_compiler=e}function registerMessageResolver(e){_resolver=e}function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const t=isString(e.version)?e.version:VERSION$2,n=isString(e.locale)?e.locale:DEFAULT_LOCALE,i=isArray$1(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||isString(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n,o=isPlainObject(e.messages)?e.messages:{[n]:{}},r=isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},a=isPlainObject(e.numberFormats)?e.numberFormats:{[n]:{}},s=assign$1({},e.modifiers||{},getDefaultLinkedModifiers()),l=e.pluralRules||{},c=isFunction(e.missing)?e.missing:null,u=!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,d=!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,h=!!e.fallbackFormat,p=!!e.unresolving,f=isFunction(e.postTranslation)?e.postTranslation:null,g=isPlainObject(e.processor)?e.processor:null,m=!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,_=!!e.escapeParameter,v=isFunction(e.messageCompiler)?e.messageCompiler:_compiler,b=isFunction(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,T=isFunction(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,A=isObject$1(e.fallbackContext)?e.fallbackContext:void 0,y=isFunction(e.onWarn)?e.onWarn:warn$1,E=e,S=isObject$1(E.__datetimeFormatters)?E.__datetimeFormatters:new Map,C=isObject$1(E.__numberFormatters)?E.__numberFormatters:new Map,w=isObject$1(E.__meta)?E.__meta:{};_cid++;const x={version:t,cid:_cid,locale:n,fallbackLocale:i,messages:o,modifiers:s,pluralRules:l,missing:c,missingWarn:u,fallbackWarn:d,fallbackFormat:h,unresolving:p,postTranslation:f,processor:g,warnHtmlMessage:m,escapeParameter:_,messageCompiler:v,messageResolver:b,localeFallbacker:T,fallbackContext:A,onWarn:y,__meta:w};return x.datetimeFormats=r,x.numberFormats=a,x.__datetimeFormatters=S,x.__numberFormatters=C,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(x,t,w),x}function handleMissing(e,t,n,i,o){const{missing:r,onWarn:a}=e;if(null!==r){const i=r(e,n,t,o);return isString(i)?i:t}return t}function updateFallbackLocale(e,t,n){e.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);function compileToFunction(e,t={}){{const n=(t.onCacheKey||defaultOnCacheKey)(e),i=compileCache[n];if(i)return i;let o=!1;const r=t.onError||defaultOnError;t.onError=e=>{o=!0,r(e)};const{code:a}=baseCompile(e,t),s=new Function(`return ${a}`)();return o?s:compileCache[n]=s}}let code$1=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$1,CoreErrorCodes={INVALID_ARGUMENT:code$1,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(e){return createCompileError(e,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction(e);function translate(e,...t){const{fallbackFormat:n,postTranslation:i,unresolving:o,messageCompiler:r,fallbackLocale:a,messages:s}=e,[l,c]=parseTranslateArgs(...t),u=isBoolean(c.missingWarn)?c.missingWarn:e.missingWarn,d=isBoolean(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,h=isBoolean(c.escapeParameter)?c.escapeParameter:e.escapeParameter,p=!!c.resolvedMessage,f=isString(c.default)||isBoolean(c.default)?isBoolean(c.default)?r?l:()=>l:c.default:n?r?l:()=>l:"",g=n||""!==f,m=isString(c.locale)?c.locale:e.locale;h&&escapeParams(c);let[_,v,b]=p?[l,m,s[m]||{}]:resolveMessageFormat(e,l,m,a,d,u),T=_,A=l;if(p||isString(T)||isMessageFunction(T)||g&&(T=f,A=T),!(p||(isString(T)||isMessageFunction(T))&&isString(v)))return o?NOT_REOSLVED:l;let y=!1;const E=isMessageFunction(T)?T:compileMessageFormat(e,l,v,T,A,(()=>{y=!0}));if(y)return T;const S=evaluateMessage(e,E,createMessageContext(getMessageContextOptions(e,v,b,c))),C=i?i(S,l):S;if(__INTLIFY_PROD_DEVTOOLS__){const t={timestamp:Date.now(),key:isString(l)?l:isMessageFunction(T)?T.key:"",locale:v||(isMessageFunction(T)?T.locale:""),format:isString(T)?T:isMessageFunction(T)?T.source:"",message:C};t.meta=assign$1({},e.__meta,getAdditionalMeta()||{}),translateDevTools(t)}return C}function escapeParams(e){isArray$1(e.list)?e.list=e.list.map((e=>isString(e)?escapeHtml(e):e)):isObject$1(e.named)&&Object.keys(e.named).forEach((t=>{isString(e.named[t])&&(e.named[t]=escapeHtml(e.named[t]))}))}function resolveMessageFormat(e,t,n,i,o,r){const{messages:a,onWarn:s,messageResolver:l,localeFallbacker:c}=e,u=c(e,i,n);let d,h={},p=null;for(let f=0;f<u.length&&(d=u[f],h=a[d]||{},null===(p=l(h,t))&&(p=h[t]),!isString(p)&&!isFunction(p));f++){const n=handleMissing(e,t,d,r,"translate");n!==t&&(p=n)}return[p,d,h]}function compileMessageFormat(e,t,n,i,o,r){const{messageCompiler:a,warnHtmlMessage:s}=e;if(isMessageFunction(i)){const e=i;return e.locale=e.locale||n,e.key=e.key||t,e}if(null==a){const e=()=>i;return e.locale=n,e.key=t,e}const l=a(i,getCompileOptions(e,n,o,i,s,r));return l.locale=n,l.key=t,l.source=i,l}function evaluateMessage(e,t,n){return t(n)}function parseTranslateArgs(...e){const[t,n,i]=e,o={};if(!isString(t)&&!isNumber$1(t)&&!isMessageFunction(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const r=isNumber$1(t)?String(t):(isMessageFunction(t),t);return isNumber$1(n)?o.plural=n:isString(n)?o.default=n:isPlainObject(n)&&!isEmptyObject(n)?o.named=n:isArray$1(n)&&(o.list=n),isNumber$1(i)?o.plural=i:isString(i)?o.default=i:isPlainObject(i)&&assign$1(o,i),[r,o]}function getCompileOptions(e,t,n,i,o,r){return{warnHtmlMessage:o,onError:e=>{throw r&&r(e),e},onCacheKey:e=>generateFormatCacheKey(t,n,e)}}function getMessageContextOptions(e,t,n,i){const{modifiers:o,pluralRules:r,messageResolver:a,fallbackLocale:s,fallbackWarn:l,missingWarn:c,fallbackContext:u}=e,d={locale:t,modifiers:o,pluralRules:r,messages:i=>{let o=a(n,i);if(null==o&&u){const[,,e]=resolveMessageFormat(u,i,t,s,l,c);o=a(e,i)}if(isString(o)){let n=!1;const r=compileMessageFormat(e,i,t,o,i,(()=>{n=!0}));return n?NOOP_MESSAGE_FUNCTION:r}return isMessageFunction(o)?o:NOOP_MESSAGE_FUNCTION}};return e.processor&&(d.processor=e.processor),i.list&&(d.list=i.list),i.named&&(d.named=i.named),isNumber$1(i.plural)&&(d.pluralIndex=i.plural),d}function datetime(e,...t){const{datetimeFormats:n,unresolving:i,fallbackLocale:o,onWarn:r,localeFallbacker:a}=e,{__datetimeFormatters:s}=e,[l,c,u,d]=parseDateTimeArgs(...t),h=isBoolean(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const p=!!u.part,f=isString(u.locale)?u.locale:e.locale,g=a(e,o,f);if(!isString(l)||""===l)return new Intl.DateTimeFormat(f,d).format(c);let m,_={},v=null;for(let A=0;A<g.length&&(m=g[A],_=n[m]||{},v=_[l],!isPlainObject(v));A++)handleMissing(e,l,m,h,"datetime format");if(!isPlainObject(v)||!isString(m))return i?NOT_REOSLVED:l;let b=`${m}__${l}`;isEmptyObject(d)||(b=`${b}__${JSON.stringify(d)}`);let T=s.get(b);return T||(T=new Intl.DateTimeFormat(m,assign$1({},v,d)),s.set(b,T)),p?T.formatToParts(c):T.format(c)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[t,n,i,o]=e,r={};let a,s={};if(isString(t)){const e=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!e)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const n=e[3]?e[3].trim().startsWith("T")?`${e[1].trim()}${e[3].trim()}`:`${e[1].trim()}T${e[3].trim()}`:e[1].trim();a=new Date(n);try{a.toISOString()}catch(l){throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(t)){if(isNaN(t.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);a=t}else{if(!isNumber$1(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);a=t}return isString(n)?r.key=n:isPlainObject(n)&&Object.keys(n).forEach((e=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(e)?s[e]=n[e]:r[e]=n[e]})),isString(i)?r.locale=i:isPlainObject(i)&&(s=i),isPlainObject(o)&&(s=o),[r.key||"",a,r,s]}function clearDateTimeFormat(e,t,n){const i=e;for(const o in n){const e=`${t}__${o}`;i.__datetimeFormatters.has(e)&&i.__datetimeFormatters.delete(e)}}function number(e,...t){const{numberFormats:n,unresolving:i,fallbackLocale:o,onWarn:r,localeFallbacker:a}=e,{__numberFormatters:s}=e,[l,c,u,d]=parseNumberArgs(...t),h=isBoolean(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const p=!!u.part,f=isString(u.locale)?u.locale:e.locale,g=a(e,o,f);if(!isString(l)||""===l)return new Intl.NumberFormat(f,d).format(c);let m,_={},v=null;for(let A=0;A<g.length&&(m=g[A],_=n[m]||{},v=_[l],!isPlainObject(v));A++)handleMissing(e,l,m,h,"number format");if(!isPlainObject(v)||!isString(m))return i?NOT_REOSLVED:l;let b=`${m}__${l}`;isEmptyObject(d)||(b=`${b}__${JSON.stringify(d)}`);let T=s.get(b);return T||(T=new Intl.NumberFormat(m,assign$1({},v,d)),s.set(b,T)),p?T.formatToParts(c):T.format(c)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[t,n,i,o]=e,r={};let a={};if(!isNumber$1(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const s=t;return isString(n)?r.key=n:isPlainObject(n)&&Object.keys(n).forEach((e=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(e)?a[e]=n[e]:r[e]=n[e]})),isString(i)?r.locale=i:isPlainObject(i)&&(a=i),isPlainObject(o)&&(a=o),[r.key||"",s,r,a]}function clearNumberFormat(e,t,n){const i=e;for(const o in n){const e=`${t}__${o}`;i.__numberFormatters.has(e)&&i.__numberFormatters.delete(e)}}"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);
/*!
        * vue-i18n v9.2.2
        * (c) 2022 kazuya kawaguchi
        * Released under the MIT License.
        */
const VERSION$1="9.2.2";function initFeatureFlags(){"boolean"!=typeof __VUE_I18N_FULL_INSTALL__&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),"boolean"!=typeof __VUE_I18N_LEGACY_API__&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}let code=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const TransrateVNodeSymbol=makeSymbol("__transrateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(e){if(!isObject$1(e))return e;for(const t in e)if(hasOwn(e,t))if(t.includes(".")){const n=t.split("."),i=n.length-1;let o=e;for(let e=0;e<i;e++)n[e]in o||(o[n[e]]={}),o=o[n[e]];o[n[i]]=e[t],delete e[t],isObject$1(o[n[i]])&&handleFlatJson(o[n[i]])}else isObject$1(e[t])&&handleFlatJson(e[t]);return e}function getLocaleMessages(e,t){const{messages:n,__i18n:i,messageResolver:o,flatJson:r}=t,a=isPlainObject(n)?n:isArray$1(i)?{}:{[e]:{}};if(isArray$1(i)&&i.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:t,resource:n}=e;t?(a[t]=a[t]||{},deepCopy(n,a[t])):deepCopy(n,a)}else isString(e)&&deepCopy(JSON.parse(e),a)})),null==o&&r)for(const s in a)hasOwn(a,s)&&handleFlatJson(a[s]);return a}const isNotObjectOrIsArray=e=>!isObject$1(e)||isArray$1(e);function deepCopy(e,t){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(t))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const n in e)hasOwn(e,n)&&(isNotObjectOrIsArray(e[n])||isNotObjectOrIsArray(t[n])?t[n]=e[n]:deepCopy(e[n],t[n]))}function getComponentOptions(e){return e.type}function adjustI18nResources(e,t,n){let i=isObject$1(t.messages)?t.messages:{};"__i18nGlobal"in n&&(i=getLocaleMessages(e.locale.value,{messages:i,__i18n:n.__i18nGlobal}));const o=Object.keys(i);if(o.length&&o.forEach((t=>{e.mergeLocaleMessage(t,i[t])})),isObject$1(t.datetimeFormats)){const n=Object.keys(t.datetimeFormats);n.length&&n.forEach((n=>{e.mergeDateTimeFormat(n,t.datetimeFormats[n])}))}if(isObject$1(t.numberFormats)){const n=Object.keys(t.numberFormats);n.length&&n.forEach((n=>{e.mergeNumberFormat(n,t.numberFormats[n])}))}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(t,n,i,o)=>e(n,i,getCurrentInstance()||void 0,o)}const getMetaInfo=()=>{const e=getCurrentInstance();let t=null;return e&&(t=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:t}:null};function createComposer(e={},t){const{__root:n}=e,i=void 0===n;let o=!isBoolean(e.inheritLocale)||e.inheritLocale;const r=ref(n&&o?n.locale.value:isString(e.locale)?e.locale:DEFAULT_LOCALE),a=ref(n&&o?n.fallbackLocale.value:isString(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:r.value),s=ref(getLocaleMessages(r.value,e)),l=ref(isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[r.value]:{}}),c=ref(isPlainObject(e.numberFormats)?e.numberFormats:{[r.value]:{}});let u=n?n.missingWarn:!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,d=n?n.fallbackWarn:!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,h=n?n.fallbackRoot:!isBoolean(e.fallbackRoot)||e.fallbackRoot,p=!!e.fallbackFormat,f=isFunction(e.missing)?e.missing:null,g=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,m=isFunction(e.postTranslation)?e.postTranslation:null,_=n?n.warnHtmlMessage:!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,v=!!e.escapeParameter;const b=n?n.modifiers:isPlainObject(e.modifiers)?e.modifiers:{};let T,A=e.pluralRules||n&&n.pluralRules;T=(()=>{i&&setFallbackContext(null);const t={version:VERSION$1,locale:r.value,fallbackLocale:a.value,messages:s.value,modifiers:b,pluralRules:A,missing:null===g?void 0:g,missingWarn:u,fallbackWarn:d,fallbackFormat:p,unresolving:!0,postTranslation:null===m?void 0:m,warnHtmlMessage:_,escapeParameter:v,messageResolver:e.messageResolver,__meta:{framework:"vue"}};t.datetimeFormats=l.value,t.numberFormats=c.value,t.__datetimeFormatters=isPlainObject(T)?T.__datetimeFormatters:void 0,t.__numberFormatters=isPlainObject(T)?T.__numberFormatters:void 0;const n=createCoreContext(t);return i&&setFallbackContext(n),n})(),updateFallbackLocale(T,r.value,a.value);const y=computed({get:()=>r.value,set:e=>{r.value=e,T.locale=r.value}}),E=computed({get:()=>a.value,set:e=>{a.value=e,T.fallbackLocale=a.value,updateFallbackLocale(T,r.value,e)}}),S=computed((()=>s.value)),C=computed((()=>l.value)),w=computed((()=>c.value));const x=(e,t,o,u,d,p)=>{let f;if(r.value,a.value,s.value,l.value,c.value,__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),i||(T.fallbackContext=n?getFallbackContext():void 0),f=e(T)}finally{setAdditionalMeta(null),i||(T.fallbackContext=void 0)}else f=e(T);if(isNumber$1(f)&&f===NOT_REOSLVED){const[e,i]=t();return n&&h?u(n):d(e)}if(p(f))return f;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)};function M(...e){return x((t=>Reflect.apply(translate,null,[t,...e])),(()=>parseTranslateArgs(...e)),"translate",(t=>Reflect.apply(t.t,t,[...e])),(e=>e),(e=>isString(e)))}const R={normalize:function(e){return e.map((e=>isString(e)||isNumber$1(e)||isBoolean(e)?createTextNode(String(e)):e))},interpolate:e=>e,type:"vnode"};function I(e){return s.value[e]||{}}composerID++,n&&inBrowser$1&&(watch(n.locale,(e=>{o&&(r.value=e,T.locale=e,updateFallbackLocale(T,r.value,a.value))})),watch(n.fallbackLocale,(e=>{o&&(a.value=e,T.fallbackLocale=e,updateFallbackLocale(T,r.value,a.value))})));const D={id:composerID,locale:y,fallbackLocale:E,get inheritLocale(){return o},set inheritLocale(e){o=e,e&&n&&(r.value=n.locale.value,a.value=n.fallbackLocale.value,updateFallbackLocale(T,r.value,a.value))},get availableLocales(){return Object.keys(s.value).sort()},messages:S,get modifiers(){return b},get pluralRules(){return A||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(e){u=e,T.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(e){d=e,T.fallbackWarn=d},get fallbackRoot(){return h},set fallbackRoot(e){h=e},get fallbackFormat(){return p},set fallbackFormat(e){p=e,T.fallbackFormat=p},get warnHtmlMessage(){return _},set warnHtmlMessage(e){_=e,T.warnHtmlMessage=e},get escapeParameter(){return v},set escapeParameter(e){v=e,T.escapeParameter=e},t:M,getLocaleMessage:I,setLocaleMessage:function(e,t){s.value[e]=t,T.messages=s.value},mergeLocaleMessage:function(e,t){s.value[e]=s.value[e]||{},deepCopy(t,s.value[e]),T.messages=s.value},getPostTranslationHandler:function(){return isFunction(m)?m:null},setPostTranslationHandler:function(e){m=e,T.postTranslation=e},getMissingHandler:function(){return f},setMissingHandler:function(e){null!==e&&(g=defineCoreMissingHandler(e)),f=e,T.missing=g},[SetPluralRulesSymbol]:function(e){A=e,T.pluralRules=A}};return D.datetimeFormats=C,D.numberFormats=w,D.rt=function(...e){const[t,n,i]=e;if(i&&!isObject$1(i))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return M(t,n,assign$1({resolvedMessage:!0},i||{}))},D.te=function(e,t){const n=I(isString(t)?t:r.value);return null!==T.messageResolver(n,e)},D.tm=function(e){const t=function(e){let t=null;const n=fallbackWithLocaleChain(T,a.value,r.value);for(let i=0;i<n.length;i++){const o=s.value[n[i]]||{},r=T.messageResolver(o,e);if(null!=r){t=r;break}}return t}(e);return null!=t?t:n&&n.tm(e)||{}},D.d=function(...e){return x((t=>Reflect.apply(datetime,null,[t,...e])),(()=>parseDateTimeArgs(...e)),"datetime format",(t=>Reflect.apply(t.d,t,[...e])),(()=>MISSING_RESOLVE_VALUE),(e=>isString(e)))},D.n=function(...e){return x((t=>Reflect.apply(number,null,[t,...e])),(()=>parseNumberArgs(...e)),"number format",(t=>Reflect.apply(t.n,t,[...e])),(()=>MISSING_RESOLVE_VALUE),(e=>isString(e)))},D.getDateTimeFormat=function(e){return l.value[e]||{}},D.setDateTimeFormat=function(e,t){l.value[e]=t,T.datetimeFormats=l.value,clearDateTimeFormat(T,e,t)},D.mergeDateTimeFormat=function(e,t){l.value[e]=assign$1(l.value[e]||{},t),T.datetimeFormats=l.value,clearDateTimeFormat(T,e,t)},D.getNumberFormat=function(e){return c.value[e]||{}},D.setNumberFormat=function(e,t){c.value[e]=t,T.numberFormats=c.value,clearNumberFormat(T,e,t)},D.mergeNumberFormat=function(e,t){c.value[e]=assign$1(c.value[e]||{},t),T.numberFormats=c.value,clearNumberFormat(T,e,t)},D[InejctWithOption]=e.__injectWithOption,D[TransrateVNodeSymbol]=function(...e){return x((t=>{let n;const i=t;try{i.processor=R,n=Reflect.apply(translate,null,[i,...e])}finally{i.processor=null}return n}),(()=>parseTranslateArgs(...e)),"translate",(t=>t[TransrateVNodeSymbol](...e)),(e=>[createTextNode(e)]),(e=>isArray$1(e)))},D[DatetimePartsSymbol]=function(...e){return x((t=>Reflect.apply(datetime,null,[t,...e])),(()=>parseDateTimeArgs(...e)),"datetime format",(t=>t[DatetimePartsSymbol](...e)),(()=>[]),(e=>isString(e)||isArray$1(e)))},D[NumberPartsSymbol]=function(...e){return x((t=>Reflect.apply(number,null,[t,...e])),(()=>parseNumberArgs(...e)),"number format",(t=>t[NumberPartsSymbol](...e)),(()=>[]),(e=>isString(e)||isArray$1(e)))},D}function convertComposerOptions(e){const t=isString(e.locale)?e.locale:DEFAULT_LOCALE,n=isString(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:t,i=isFunction(e.missing)?e.missing:void 0,o=!isBoolean(e.silentTranslationWarn)&&!isRegExp(e.silentTranslationWarn)||!e.silentTranslationWarn,r=!isBoolean(e.silentFallbackWarn)&&!isRegExp(e.silentFallbackWarn)||!e.silentFallbackWarn,a=!isBoolean(e.fallbackRoot)||e.fallbackRoot,s=!!e.formatFallbackMessages,l=isPlainObject(e.modifiers)?e.modifiers:{},c=e.pluralizationRules,u=isFunction(e.postTranslation)?e.postTranslation:void 0,d=!isString(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,h=!!e.escapeParameterHtml,p=!isBoolean(e.sync)||e.sync;let f=e.messages;if(isPlainObject(e.sharedMessages)){const t=e.sharedMessages;f=Object.keys(t).reduce(((e,n)=>{const i=e[n]||(e[n]={});return assign$1(i,t[n]),e}),f||{})}const{__i18n:g,__root:m,__injectWithOption:_}=e,v=e.datetimeFormats,b=e.numberFormats;return{locale:t,fallbackLocale:n,messages:f,flatJson:e.flatJson,datetimeFormats:v,numberFormats:b,missing:i,missingWarn:o,fallbackWarn:r,fallbackRoot:a,fallbackFormat:s,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:e.messageResolver,inheritLocale:p,__i18n:g,__root:m,__injectWithOption:_}}function createVueI18n(e={},t){{const t=createComposer(convertComposerOptions(e)),n={id:t.id,get locale(){return t.locale.value},set locale(e){t.locale.value=e},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(e){t.fallbackLocale.value=e},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate:()=>[]}},set formatter(e){},get missing(){return t.getMissingHandler()},set missing(e){t.setMissingHandler(e)},get silentTranslationWarn(){return isBoolean(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(e){t.missingWarn=isBoolean(e)?!e:e},get silentFallbackWarn(){return isBoolean(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(e){t.fallbackWarn=isBoolean(e)?!e:e},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(e){t.fallbackFormat=e},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(e){t.setPostTranslationHandler(e)},get sync(){return t.inheritLocale},set sync(e){t.inheritLocale=e},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){t.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(e){t.escapeParameter=e},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(e){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...e){const[n,i,o]=e,r={};let a=null,s=null;if(!isString(n))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const l=n;return isString(i)?r.locale=i:isArray$1(i)?a=i:isPlainObject(i)&&(s=i),isArray$1(o)?a=o:isPlainObject(o)&&(s=o),Reflect.apply(t.t,t,[l,a||s||{},r])},rt:(...e)=>Reflect.apply(t.rt,t,[...e]),tc(...e){const[n,i,o]=e,r={plural:1};let a=null,s=null;if(!isString(n))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const l=n;return isString(i)?r.locale=i:isNumber$1(i)?r.plural=i:isArray$1(i)?a=i:isPlainObject(i)&&(s=i),isString(o)?r.locale=o:isArray$1(o)?a=o:isPlainObject(o)&&(s=o),Reflect.apply(t.t,t,[l,a||s||{},r])},te:(e,n)=>t.te(e,n),tm:e=>t.tm(e),getLocaleMessage:e=>t.getLocaleMessage(e),setLocaleMessage(e,n){t.setLocaleMessage(e,n)},mergeLocaleMessage(e,n){t.mergeLocaleMessage(e,n)},d:(...e)=>Reflect.apply(t.d,t,[...e]),getDateTimeFormat:e=>t.getDateTimeFormat(e),setDateTimeFormat(e,n){t.setDateTimeFormat(e,n)},mergeDateTimeFormat(e,n){t.mergeDateTimeFormat(e,n)},n:(...e)=>Reflect.apply(t.n,t,[...e]),getNumberFormat:e=>t.getNumberFormat(e),setNumberFormat(e,n){t.setNumberFormat(e,n)},mergeNumberFormat(e,n){t.mergeNumberFormat(e,n)},getChoiceIndex:(e,t)=>-1,__onComponentInstanceCreated(t){const{componentInstanceCreatedListener:i}=e;i&&i(t,n)}};return n}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},t){if(1===t.length&&"default"===t[0]){return(e.default?e.default():[]).reduce(((e,t)=>[...e,...isArray$1(t.children)?t.children:[t]]),[])}return t.reduce(((t,n)=>{const i=e[n];return i&&(t[n]=i()),t}),{})}function getFragmentableTag(e){return Fragment}const Translation={name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$1(e)||!isNaN(e)}},baseFormatProps),setup(e,t){const{slots:n,attrs:i}=t,o=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter((e=>"_"!==e)),a={};e.locale&&(a.locale=e.locale),void 0!==e.plural&&(a.plural=isString(e.plural)?+e.plural:e.plural);const s=getInterpolateArg(t,r),l=o[TransrateVNodeSymbol](e.keypath,s,a),c=assign$1({},i);return h(isString(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag(),c,l)}}};function isVNode(e){return isArray$1(e)&&!isString(e[0])}function renderFormatter(e,t,n,i){const{slots:o,attrs:r}=t;return()=>{const t={part:!0};let a={};e.locale&&(t.locale=e.locale),isString(e.format)?t.key=e.format:isObject$1(e.format)&&(isString(e.format.key)&&(t.key=e.format.key),a=Object.keys(e.format).reduce(((t,i)=>n.includes(i)?assign$1({},t,{[i]:e.format[i]}):t),{}));const s=i(e.value,t,a);let l=[t.key];isArray$1(s)?l=s.map(((e,t)=>{const n=o[e.type],i=n?n({[e.type]:e.value,index:t,parts:s}):[e.value];return isVNode(i)&&(i[0].key=`${e.type}-${t}`),i})):isString(s)&&(l=[s]);const c=assign$1({},r);return h(isString(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag(),c,l)}}const NumberFormat={name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const n=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,t,NUMBER_FORMAT_OPTIONS_KEYS,((...e)=>n[NumberPartsSymbol](...e)))}},DatetimeFormat={name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const n=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,t,DATETIME_FORMAT_OPTIONS_KEYS,((...e)=>n[DatetimePartsSymbol](...e)))}};function getComposer$2(e,t){const n=e;if("composition"===e.mode)return n.__getInstance(t)||e.global;{const i=n.__getInstance(t);return null!=i?i.__composer:e.global.__composer}}function vTDirective(e){const t=t=>{const{instance:n,modifiers:i,value:o}=t;if(!n||!n.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const r=getComposer$2(e,n.$),a=parseValue(o);return[Reflect.apply(r.t,r,[...makeParams(a)]),r]};return{created:(n,i)=>{const[o,r]=t(i);inBrowser$1&&e.global===r&&(n.__i18nWatcher=watch(r.locale,(()=>{i.instance&&i.instance.$forceUpdate()}))),n.__composer=r,n.textContent=o},unmounted:e=>{inBrowser$1&&e.__i18nWatcher&&(e.__i18nWatcher(),e.__i18nWatcher=void 0,delete e.__i18nWatcher),e.__composer&&(e.__composer=void 0,delete e.__composer)},beforeUpdate:(e,{value:t})=>{if(e.__composer){const n=e.__composer,i=parseValue(t);e.textContent=Reflect.apply(n.t,n,[...makeParams(i)])}},getSSRProps:e=>{const[n]=t(e);return{textContent:n}}}}function parseValue(e){if(isString(e))return{path:e};if(isPlainObject(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:t,locale:n,args:i,choice:o,plural:r}=e,a={},s=i||{};return isString(n)&&(a.locale=n),isNumber$1(o)&&(a.plural=o),isNumber$1(r)&&(a.plural=r),[t,s,a]}function apply(e,t,...n){const i=isPlainObject(n[0])?n[0]:{},o=!!i.useI18nComponentName;(!isBoolean(i.globalInstall)||i.globalInstall)&&(e.component(o?"i18n":Translation.name,Translation),e.component(NumberFormat.name,NumberFormat),e.component(DatetimeFormat.name,DatetimeFormat)),e.directive("t",vTDirective(t))}function defineMixin(e,t,n){return{beforeCreate(){const i=getCurrentInstance();if(!i)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const n=o.i18n;o.__i18n&&(n.__i18n=o.__i18n),n.__root=t,this===this.$root?this.$i18n=mergeToRoot(e,n):(n.__injectWithOption=!0,this.$i18n=createVueI18n(n))}else o.__i18n?this===this.$root?this.$i18n=mergeToRoot(e,o):this.$i18n=createVueI18n({__i18n:o.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;o.__i18nGlobal&&adjustI18nResources(t,o,o),e.__onComponentInstanceCreated(this.$i18n),n.__setInstance(i,this.$i18n),this.$t=(...e)=>this.$i18n.t(...e),this.$rt=(...e)=>this.$i18n.rt(...e),this.$tc=(...e)=>this.$i18n.tc(...e),this.$te=(e,t)=>this.$i18n.te(e,t),this.$d=(...e)=>this.$i18n.d(...e),this.$n=(...e)=>this.$i18n.n(...e),this.$tm=e=>this.$i18n.tm(e)},mounted(){},unmounted(){const e=getCurrentInstance();if(!e)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(e),delete this.$i18n}}}function mergeToRoot(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[SetPluralRulesSymbol](t.pluralizationRules||e.pluralizationRules);const n=getLocaleMessages(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach((t=>e.mergeLocaleMessage(t,n[t]))),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach((n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n]))),t.numberFormats&&Object.keys(t.numberFormats).forEach((n=>e.mergeNumberFormat(n,t.numberFormats[n]))),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},t){const n=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,i=!isBoolean(e.globalInjection)||e.globalInjection,o=!__VUE_I18N_LEGACY_API__||!n||!!e.allowComposition,r=new Map,[a,s]=createGlobal(e,n),l=makeSymbol("");{const e={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return o},install:(t,...o)=>_asyncToGenerator((function*(){t.__VUE_I18N_SYMBOL__=l,t.provide(t.__VUE_I18N_SYMBOL__,e),!n&&i&&injectGlobalFields(t,e.global),__VUE_I18N_FULL_INSTALL__&&apply(t,e,...o),__VUE_I18N_LEGACY_API__&&n&&t.mixin(defineMixin(s,s.__composer,e));const r=t.unmount;t.unmount=()=>{e.dispose(),r()}}))(),get global(){return s},dispose(){a.stop()},__instances:r,__getInstance:function(e){return r.get(e)||null},__setInstance:function(e,t){r.set(e,t)},__deleteInstance:function(e){r.delete(e)}};return e}}function useI18n(e={}){const t=getCurrentInstance();if(null==t)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&null!=t.appContext.app&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const n=getI18nInstance(t),i=getGlobalComposer(n),o=getComponentOptions(t),r=getScope(e,o);if(__VUE_I18N_LEGACY_API__&&"legacy"===n.mode&&!e.__useComponent){if(!n.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(t,r,i,e)}if("global"===r)return adjustI18nResources(i,e,o),i;if("parent"===r){let o=getComposer(n,t,e.__useComponent);return null==o&&(o=i),o}const a=n;let s=a.__getInstance(t);if(null==s){const n=assign$1({},e);"__i18n"in o&&(n.__i18n=o.__i18n),i&&(n.__root=i),s=createComposer(n),setupLifeCycle(a,t),a.__setInstance(t,s)}return s}function createGlobal(e,t,n){const i=effectScope();{const n=__VUE_I18N_LEGACY_API__&&t?i.run((()=>createVueI18n(e))):i.run((()=>createComposer(e)));if(null==n)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[i,n]}}function getI18nInstance(e){{const t=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return t}}function getScope(e,t){return isEmptyObject(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return"composition"===e.mode?e.global:e.global.__composer}function getComposer(e,t,n=!1){let i=null;const o=t.root;let r=t.parent;for(;null!=r;){const t=e;if("composition"===e.mode)i=t.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const e=t.__getInstance(r);null!=e&&(i=e.__composer,n&&i&&!i[InejctWithOption]&&(i=null))}if(null!=i)break;if(o===r)break;r=r.parent}return i}function setupLifeCycle(e,t,n){onMounted((()=>{}),t),onUnmounted((()=>{e.__deleteInstance(t)}),t)}function useI18nForLegacy(e,t,n,i={}){const o="local"===t,r=shallowRef(null);if(o&&e.proxy&&!e.proxy.$options.i18n&&!e.proxy.$options.__i18n)throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const a=!isBoolean(i.inheritLocale)||i.inheritLocale,s=ref(o&&a?n.locale.value:isString(i.locale)?i.locale:DEFAULT_LOCALE),l=ref(o&&a?n.fallbackLocale.value:isString(i.fallbackLocale)||isArray$1(i.fallbackLocale)||isPlainObject(i.fallbackLocale)||!1===i.fallbackLocale?i.fallbackLocale:s.value),c=ref(getLocaleMessages(s.value,i)),u=ref(isPlainObject(i.datetimeFormats)?i.datetimeFormats:{[s.value]:{}}),d=ref(isPlainObject(i.numberFormats)?i.numberFormats:{[s.value]:{}}),h=o?n.missingWarn:!isBoolean(i.missingWarn)&&!isRegExp(i.missingWarn)||i.missingWarn,p=o?n.fallbackWarn:!isBoolean(i.fallbackWarn)&&!isRegExp(i.fallbackWarn)||i.fallbackWarn,f=o?n.fallbackRoot:!isBoolean(i.fallbackRoot)||i.fallbackRoot,g=!!i.fallbackFormat,m=isFunction(i.missing)?i.missing:null,_=isFunction(i.postTranslation)?i.postTranslation:null,v=o?n.warnHtmlMessage:!isBoolean(i.warnHtmlMessage)||i.warnHtmlMessage,b=!!i.escapeParameter,T=o?n.modifiers:isPlainObject(i.modifiers)?i.modifiers:{},A=i.pluralRules||o&&n.pluralRules;function y(e){return s.value,l.value,c.value,u.value,d.value,e()}const E={get id(){return r.value?r.value.id:-1},locale:computed({get:()=>r.value?r.value.locale.value:s.value,set:e=>{r.value&&(r.value.locale.value=e),s.value=e}}),fallbackLocale:computed({get:()=>r.value?r.value.fallbackLocale.value:l.value,set:e=>{r.value&&(r.value.fallbackLocale.value=e),l.value=e}}),messages:computed((()=>r.value?r.value.messages.value:c.value)),datetimeFormats:computed((()=>u.value)),numberFormats:computed((()=>d.value)),get inheritLocale(){return r.value?r.value.inheritLocale:a},set inheritLocale(e){r.value&&(r.value.inheritLocale=e)},get availableLocales(){return r.value?r.value.availableLocales:Object.keys(c.value)},get modifiers(){return r.value?r.value.modifiers:T},get pluralRules(){return r.value?r.value.pluralRules:A},get isGlobal(){return!!r.value&&r.value.isGlobal},get missingWarn(){return r.value?r.value.missingWarn:h},set missingWarn(e){r.value&&(r.value.missingWarn=e)},get fallbackWarn(){return r.value?r.value.fallbackWarn:p},set fallbackWarn(e){r.value&&(r.value.missingWarn=e)},get fallbackRoot(){return r.value?r.value.fallbackRoot:f},set fallbackRoot(e){r.value&&(r.value.fallbackRoot=e)},get fallbackFormat(){return r.value?r.value.fallbackFormat:g},set fallbackFormat(e){r.value&&(r.value.fallbackFormat=e)},get warnHtmlMessage(){return r.value?r.value.warnHtmlMessage:v},set warnHtmlMessage(e){r.value&&(r.value.warnHtmlMessage=e)},get escapeParameter(){return r.value?r.value.escapeParameter:b},set escapeParameter(e){r.value&&(r.value.escapeParameter=e)},t:function(...e){return r.value?y((()=>Reflect.apply(r.value.t,null,[...e]))):y((()=>""))},getPostTranslationHandler:function(){return r.value?r.value.getPostTranslationHandler():_},setPostTranslationHandler:function(e){r.value&&r.value.setPostTranslationHandler(e)},getMissingHandler:function(){return r.value?r.value.getMissingHandler():m},setMissingHandler:function(e){r.value&&r.value.setMissingHandler(e)},rt:function(...e){return r.value?Reflect.apply(r.value.rt,null,[...e]):""},d:function(...e){return r.value?y((()=>Reflect.apply(r.value.d,null,[...e]))):y((()=>""))},n:function(...e){return r.value?y((()=>Reflect.apply(r.value.n,null,[...e]))):y((()=>""))},tm:function(e){return r.value?r.value.tm(e):{}},te:function(e,t){return!!r.value&&r.value.te(e,t)},getLocaleMessage:function(e){return r.value?r.value.getLocaleMessage(e):{}},setLocaleMessage:function(e,t){r.value&&(r.value.setLocaleMessage(e,t),c.value[e]=t)},mergeLocaleMessage:function(e,t){r.value&&r.value.mergeLocaleMessage(e,t)},getDateTimeFormat:function(e){return r.value?r.value.getDateTimeFormat(e):{}},setDateTimeFormat:function(e,t){r.value&&(r.value.setDateTimeFormat(e,t),u.value[e]=t)},mergeDateTimeFormat:function(e,t){r.value&&r.value.mergeDateTimeFormat(e,t)},getNumberFormat:function(e){return r.value?r.value.getNumberFormat(e):{}},setNumberFormat:function(e,t){r.value&&(r.value.setNumberFormat(e,t),d.value[e]=t)},mergeNumberFormat:function(e,t){r.value&&r.value.mergeNumberFormat(e,t)}};return onBeforeMount((()=>{if(null==e.proxy||null==e.proxy.$i18n)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const n=r.value=e.proxy.$i18n.__composer;"global"===t?(s.value=n.locale.value,l.value=n.fallbackLocale.value,c.value=n.messages.value,u.value=n.datetimeFormats.value,d.value=n.numberFormats.value):o&&function(e){e.locale.value=s.value,e.fallbackLocale.value=l.value,Object.keys(c.value).forEach((t=>{e.mergeLocaleMessage(t,c.value[t])})),Object.keys(u.value).forEach((t=>{e.mergeDateTimeFormat(t,u.value[t])})),Object.keys(d.value).forEach((t=>{e.mergeNumberFormat(t,d.value[t])})),e.escapeParameter=b,e.fallbackFormat=g,e.fallbackRoot=f,e.fallbackWarn=p,e.missingWarn=h,e.warnHtmlMessage=v}(n)})),E}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm"];function injectGlobalFields(e,t){const n=Object.create(null);globalExportProps.forEach((e=>{const i=Object.getOwnPropertyDescriptor(t,e);if(!i)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=isRef(i.value)?{get:()=>i.value.value,set(e){i.value.value=e}}:{get:()=>i.get&&i.get()};Object.defineProperty(n,e,o)})),e.config.globalProperties.$i18n=n,globalExportMethods.forEach((n=>{const i=Object.getOwnPropertyDescriptor(t,n);if(!i||!i.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${n}`,i)}))}if(registerMessageCompiler(compileToFunction),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain),initFeatureFlags(),__INTLIFY_PROD_DEVTOOLS__){const o=getGlobalThis();o.__INTLIFY__=!0,setDevToolsHook(o.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var coreBrowser={exports:{}},blockly$1={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed,hasRequiredBlockly;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(e,t){e.exports=function(){var e,t,n,i,o,r,a,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y,E,S,C,w,x,M,R,I,D,k,L,O,P,N,$,B,F,U,G,V,H,W,z,j,X,Y,q,K,Q,Z,J,ee,te,ne,ie,oe,re,ae,se,le,ce,ue,de,he,pe,fe,ge,me,_e,ve,be,Te,Ae,ye,Ee,Se,Ce,we,xe,Me,Re,Ie,De,ke,Le,Oe,Pe,Ne,$e,Be,Fe,Ue,Ge,Ve,He,We,ze,je,Xe,Ye,qe,Ke,Qe,Ze,Je,et,tt,nt,it,ot,rt,at,st,lt,ct,ut,dt,ht,pt,ft,gt,mt,_t,vt,bt,Tt,At,yt,Et,St,Ct,wt,xt,Mt,Rt,It,Dt,kt,Lt,Ot,Pt,Nt,$t,Bt,Ft,Ut,Gt,Vt,Ht,Wt,zt,jt,Xt,Yt,qt,Kt,Qt,Zt,Jt,en,tn,nn,on,rn,an,sn,ln,cn,un,dn,hn,pn,fn,gn,mn,_n,vn,bn,Tn,An,yn,En,Sn,Cn,wn,xn,Mn,Rn,In,Dn,kn,Ln,On,Pn,Nn,$n,Bn,Fn,Un,Gn,Vn,Hn,Wn,zn,jn,Xn,Yn,qn,Kn,Qn,Zn,Jn,ei,ti,ni,ii,oi,ri,ai,si,li,ci,ui,di,hi,pi,fi,gi,mi,_i,vi,bi,Ti,Ai,yi,Ei,Si,Ci,wi,xi,Mi,Ri,Ii,Di,ki,Li,Oi,Pi,Ni,$i,Bi,Fi,Ui,Gi,Vi,Hi,Wi,zi,ji,Xi,Yi,qi,Ki,Qi,Zi,Ji,eo,to,no,io,oo,ro,ao,so,lo,co,uo,ho,po,fo,go,mo,_o,vo,bo,To,Ao,yo,Eo,So,Co,wo,xo,Mo,Ro,Io,Do,ko,Lo,Oo,Po,No,$o,Bo,Fo,Uo,Go,Vo,Ho,Wo,zo,jo,Xo,Yo,qo,Ko,Qo,Zo,Jo,er,tr,nr,ir,or,rr,ar,sr,lr,cr,ur,dr,hr,pr,fr,gr,mr,_r,vr,br,Tr,Ar,yr,Er,Sr,Cr,wr,xr,Mr,Rr,Ir,Dr,kr,Lr,Or,Pr,Nr,$r,Br,Fr,Ur,Gr,Vr,Hr,Wr,zr,jr,Xr,Yr,qr,Kr,Qr,Zr,Jr,ea,ta,na,ia,oa,ra,aa,sa,la,ca,ua,da,ha,pa,fa,ga,ma,_a,va,ba,Ta,Aa,ya,Ea,Sa,Ca,wa,xa,Ma,Ra,Ia,Da,ka,La={};e=function(e,n,i,o){if(!(e instanceof Ba)&&"string"!=typeof e||""===`${e}`.trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),"string"!=typeof n||""===n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const r=n.toLowerCase();if(!i)throw Error("Can not register a null value");let a=Oa[e],s=Na[e];if(a||(a=Oa[e]=Object.create(null),s=Na[e]=Object.create(null)),t(e,i),!o&&a[r])throw Error('Name "'+r+'" with type "'+e+'" already registered.');a[r]=i,s[r]=n},t=function(e,t){if(e===String(Ba.FIELD)&&"function"!=typeof t.fromJson)throw Error('Type "'+e+'" must have a fromJson function')},n=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const n=Oa[e];n&&n[t]?(delete Oa[e][t],delete Na[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},i=function(e,t,n){e=`${e}`.toLowerCase(),t=t.toLowerCase();const i=Oa[e];if(!i||!i[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",n)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return i[t]},o=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),!!(e=Oa[e])&&!!e[t]},r=function(e,t,n){return i(e,t,n)},a=function(e,t,n){return i(e,t,n)},s=function(e,t,n){e=`${e}`.toLowerCase();var i=Oa[e];if(!i){if(i=`Unable to find [${e}] in the registry.`,n)throw Error(`${i} You must require or register a ${e} plugin.`);return console.warn(i),null}if(!t)return i;e=Na[e],n=Object.create(null);for(const o of Object.keys(i))n[e[o]]=i[o];return n},l=function(e,t,n){return"function"==typeof(t=t.plugins[String(e)]||$a)?t:r(e,t,n)},c=function(e){return Ha[e]||null},u=function(){const e=[];for(const t in Ha)e.push(Ha[t]);return e},d=function(e){Ha[e.id]=e},h=function(e){delete Ha[e.id]},p=function(){return Ua},f=function(e){Ua=e},g=function(){return Wa},m=function(e){Wa=e},_=function(){return Ga},v=function(e){Ga=e},b=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),n=e.getCachedParentSvgSize();var i=t.parentElement;if(i instanceof HTMLElement){var o=i.offsetWidth;i=i.offsetHeight,n.width!==o&&(t.setAttribute("width",o+"px"),e.setCachedParentSvgSize(o,null)),n.height!==i&&(t.setAttribute("height",i+"px"),e.setCachedParentSvgSize(null,i)),e.resize()}},T=function(e,t){const n=Object.create(null),i=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=i.indexOf(e),i.splice(e,i.length-e));for(let o,r=0;o=i[r];r++)n[o.type]?n[o.type]++:n[o.type]=1;return n},A=function(e){return function(){this.jsonInit(e)}},y=function(e){ja.defineBlocksWithJsonArrayInternal(e)},E=function(e){La.defineBlocks$$module$build$src$core$common(La.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},La.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];if(!i){console.warn(`Block definition #${n} in JSON array is ${i}. Skipping`);continue}const o=i.type;o?t[o]={init:A(i)}:console.warn(`Block definition #${n} in JSON array is missing a type attribute. Skipping.`)}return t},La.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const n=e[t];t in Va&&console.warn(`Block definiton "${t}" overwrites previous definition.`),Va[t]=n}},S=function(){return"blockly-"+(ys++).toString(36)},C=function(){return As.genUid()},w=function(e){qa=e},x=function(){return qa},M=function(e){vs.fireInternal(e)},R=function(e){if(L()){if(!_s.length)try{requestAnimationFrame((()=>{setTimeout(I,0)}))}catch(t){setTimeout(I,0)}_s.push(e)}},I=function(){var e=D(_s,!0);_s.length=0;for(let n,i=0;n=e[i];i++)if(n.workspaceId){var t=c(n.workspaceId);t&&t.fireChangeListener(n)}e=new Set(e.map((e=>e.workspaceId)));for(const n of e){if(!n)continue;if(!(e=c(n)))continue;let i;for(t=(e=e.getUndoStack()).length;0<t;t--){const n=e[t-1];if(""===n.group)break;if(void 0===i)i=n.group;else if(n.group!==i)break}i&&t!=e.length-1&&(t=e.splice(t,e.length-t),t=D(t,!0),e.push(...t))}},D=function(e,t){e=e.slice(),t||e.reverse();const n=[],i=Object.create(null);for(let a,s=0;a=e[s];s++)if(!a.isNull()){var o=[a.isUiEvent?ts:a.type,a.blockId,a.workspaceId].join(" "),r=i[o];const e=r?r.event:null;r?a.type===La.MOVE$$module$build$src$core$events$utils&&r.index===s-1?(o=a,e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,o.reason&&(e.reason?(o=new Set(o.reason.concat(e.reason)),e.reason=Array.from(o)):e.reason=o.reason),r.index=s):a.type===La.CHANGE$$module$build$src$core$events$utils&&a.element===e.element&&a.name===e.name?e.newValue=a.newValue:a.type===us?(r=a,e.viewTop=r.viewTop,e.viewLeft=r.viewLeft,e.scale=r.scale,e.oldScale=r.oldScale):a.type===os&&e.type===as||(i[o]={event:a,index:s},n.push(a)):(i[o]={event:a,index:s},n.push(a))}e=n.filter((function(e){return!e.isNull()})),t||e.reverse();for(let a,s=1;a=e[s];s++)a.type===La.CHANGE$$module$build$src$core$events$utils&&"mutation"===a.element&&e.unshift(e.splice(s,1)[0]);return e},k=function(){for(let e,t=0;e=_s[t];t++)e.recordUndo=!1},La.disable$$module$build$src$core$events$utils=function(){Ka++},La.enable$$module$build$src$core$events$utils=function(){Ka--},L=function(){return 0===Ka},La.getGroup$$module$build$src$core$events$utils=function(){return Ya},La.setGroup$$module$build$src$core$events$utils=function(e){vs.setGroupInternal(e)},O=function(e){Ya="boolean"==typeof e?e?C():"":e},P=function(e){const t=[];e=e.getDescendants(!1);for(let n,i=0;n=e[i];i++)t[i]=n.id;return t},N=function(e,t){const n=$(e.type);if(!n)throw Error("Unknown event type.");return n.fromJson(e,t)},$=function(e){const t=r(Ba.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},B=function(e){if((e.type===La.MOVE$$module$build$src$core$events$utils||e.type===La.CREATE$$module$build$src$core$events$utils)&&e.workspaceId){var t=c(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const n=qa;try{qa=!1;const n=e.getParent();if(n&&n.isEnabled()){const t=e.getDescendants(!1);for(let e,n=0;e=t[n];n++)e.setEnabled(!0)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do{e.setEnabled(!1),e=e.getNextBlock()}while(e)}finally{qa=n}}}},F=function(e,t){U(),Hs=setTimeout((function(){t&&t.handleRightClick(e)}),Fs)},U=function(){Hs&&(clearTimeout(Hs),Hs=0)},G=function(){Gs=null},V=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&W(e)},H=function(e){return`${e.pointerId}`},W=function(e){const t=H(e);return Gs?Gs===t:"pointerdown"===e.type&&(Gs=t,!0)},z=function(e,t,n,i,o){function r(e){(o||V(e))&&(n?i.call(n,e):i(e))}const a=[];if(t in Vs)for(let s=0;s<Vs[t].length;s++){const n=Vs[t][s];e.addEventListener(n,r,!1),a.push([e,n,r])}else e.addEventListener(t,r,!1),a.push([e,t,r]);return a},j=function(e,t,n,i){function o(e){n?i.call(n,e):i(e)}const r=[];if(t in Vs)for(let a=0;a<Vs[t].length;a++){const n=Vs[t][a];e.addEventListener(n,o,!1),r.push([e,n,o])}else e.addEventListener(t,o,!1),r.push([e,t,o]);return r},X=function(e){const t=e[e.length-1][2];for(;e.length;){const[t,n,i]=e.pop();t.removeEventListener(n,i,!1)}return t},Y=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||"true"===e.target.getAttribute("data-is-text-input"))return!0;if(e.target instanceof HTMLInputElement)return"text"===(e=e.target).type||"number"===e.type||"email"===e.type||"password"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type;if(e.target instanceof HTMLTextAreaElement)return!0}return!1},q=function(e){return!(!e.ctrlKey||!Ks)||2===e.button},K=function(e,t,n){const i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,n||(n=t.getScreenCTM().inverse()),i.matrixTransform(n)},Q=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Js,y:e.deltaY*Js};case 2:return{x:e.deltaX*el,y:e.deltaY*el}}},Z=function(e,t){return-1!==(t=e.indexOf(t))&&(e.splice(t,1),!0)},J=function(e){if(rl)throw Error("CSS already injected");al+="\n"+e},ee=function(e,t){rl||(rl=!0,e&&(e=t.replace(/[\\/]$/,""),t=al.replace(/<<<PATH>>>/g,e),al="",(e=document.createElement("style")).id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},te=function(e,t,n,i){e=e+" was deprecated in "+t+" and will be deleted in "+n+".",i&&(e+="\nUse "+i+" instead."),cl.has(e)||(cl.add(e),console.warn(e))},ne=function(e,t,n){e=document.createElementNS(hl,`${e}`);for(const i in t)e.setAttribute(i,`${t[i]}`);return n&&n.appendChild(e),e},ie=function(e,t){return!(t=t.split(" ")).every((t=>e.classList.contains(t)))&&(e.classList.add(...t),!0)},oe=function(e,t){e.classList.remove(...t.split(" "))},re=function(e,t){return!(t=t.split(" ")).every((t=>!e.classList.contains(t)))&&(e.classList.remove(...t),!0)},ae=function(e,t){return e.classList.contains(t)},se=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},le=function(e,t){const n=t.nextSibling;if(!(t=t.parentNode))throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},ce=function(e,t){return te("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),e.contains(t)},ue=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},de=function(){ml++,gl||(gl=Object.create(null))},he=function(){--ml||(gl=null)},pe=function(e){const t=e.textContent+"\n"+e.className.baseVal;let n;if(gl&&(n=gl[t]))return n;try{n=e.getComputedTextLength()}catch(i){return 8*e.textContent.length}return gl&&(gl[t]=n),n},fe=function(e,t,n,i){return ge(e,t+"pt",n,i)},ge=function(e,t,n,i){const o=e.textContent;var r;return e=o+"\n"+e.className.baseVal,gl&&(r=gl[e])||(_l||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),_l=r.getContext("2d")),_l.font=n+" "+t+" "+i,r=o?_l.measureText(o).width:0,gl&&(gl[e]=r)),r},me=function(e,t,n,i){const o=document.createElement("span");o.style.font=n+" "+t+" "+i,o.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0",(t=document.createElement("div")).style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(o),t.appendChild(e),document.body.appendChild(t),n={height:0,baseline:0};try{t.style.alignItems="baseline",n.baseline=e.offsetTop-o.offsetTop,t.style.alignItems="flex-end",n.height=e.offsetTop-o.offsetTop}finally{document.body.removeChild(t)}return n},_e=function(e){return yl.getSizeInternal(e)},ve=function(e){if("none"!==Te(e,"display"))return be(e);const t=e.style,n=t.display,i=t.visibility,o=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const r=e.offsetWidth;return e=e.offsetHeight,t.display=n,t.position=o,t.visibility=i,new Al(r,e)},be=function(e){return new Al(e.offsetWidth,e.offsetHeight)},Te=function(e,t){return(e=window.getComputedStyle(e))[t]||e.getPropertyValue(t)},Ae=function(e){const t=new ll(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new ll(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),t.x=e.left+n.x,t.y=e.top+n.y,t},ye=function(){const e=document.body,t=document.documentElement;return new ll(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Ee=function(e){const t=parseFloat(Te(e,"borderLeftWidth")),n=parseFloat(Te(e,"borderRightWidth")),i=parseFloat(Te(e,"borderTopWidth"));return e=parseFloat(Te(e,"borderBottomWidth")),new Tl(i,e,t,n)},Se=function(e,t,n){e=Ce(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},Ce=function(e,t,n){var i=Ae(e),o=Ae(t),r=Ee(t);const a=i.x-o.x-r.left;return i=i.y-o.y-r.top,o=be(e),e=t.clientWidth-o.width,o=t.clientHeight-o.height,r=t.scrollLeft,t=t.scrollTop,n?(r+=a-e/2,t+=i-o/2):(r+=Math.min(a,Math.max(a-e,0)),t+=Math.min(i,Math.max(i-o,0))),new ll(r,t)},we=function(e){const t=new ll(0,0);var n=e.x&&e.getAttribute("x");const i=e.y&&e.getAttribute("y");return n&&(t.x=parseInt(n)),i&&(t.y=parseInt(i)),(n=(n=e.getAttribute("transform"))&&n.match(Sl))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(Cl))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},xe=function(e){let t=0,n=0;for(;e;){const i=we(e);if(t+=i.x,n+=i.y,-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new ll(t,n)},Me=function(){const e=ye();return new Tl(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Re=function(){const e=document.documentElement,t=window;return new ll(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Ie=function(e,t){var n=t.x;t=t.y;const i=e.getInjectionDiv().getBoundingClientRect();return n=new ll(n-i.left,t-i.top),t=e.getOriginOffsetInPixels(),ll.difference(n,t).scale(1/e.scale)},De=function(e,t){var n=t.scale(e.scale);t=n.x,n=n.y;const i=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new ll(t+i.left+e.x,n+i.top+e.y)},ke=function(e){({document:Il=Il,DOMParser:Dl=Dl,XMLSerializer:kl=kl}=e),Ml=new Dl,Rl=new kl},La.createElement$$module$build$src$core$utils$xml=function(e){return Il.createElementNS(Ll,e)},La.createTextNode$$module$build$src$core$utils$xml=function(e){return Il.createTextNode(e)},La.textToDom$$module$build$src$core$utils$xml=function(e){let t=Ml.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Ml.parseFromString(e,"text/html"))&&t.body.firstChild&&"xml"===t.body.firstChild.nodeName.toLowerCase())return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},Le=function(e){return Oe(Rl.serializeToString(e))},Oe=function(e){return e.replace(Ol,(e=>`&#${e.charCodeAt(0)};`))},Pe=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=We(e),e=Ge(e)),Ne(e),e):null},Ne=function(e){const t=e.kind;if(e=e.contents,t&&t!==Bl&&t!==$l)throw Error("Invalid toolbox kind "+t+". Please supply either "+Bl+" or "+$l);if(!e)throw Error("Toolbox must have a contents attribute.")},$e=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Ve(e):[]},Be=function(e){return Vl.hasCategoriesInternal(e)},Fe=function(e){if(!e)return!1;const t=e.kind;return t?t===$l:!!e.contents.filter((function(e){return"CATEGORY"===e.kind.toUpperCase()})).length},Ue=function(e){return!(!e||!e.contents||!e.contents.filter((function(e){return"CATEGORY"===e.kind.toUpperCase()})).length)},Ge=function(e){const t={contents:Ve(e)};return e instanceof Node&&He(e,t),t},Ve=function(e){const t=[];let n=e.childNodes;n||(n=e);for(let i,o=0;i=n[o];o++){if(!i.tagName)continue;e={};const n=i.tagName.toUpperCase();e.kind=n,"BLOCK"===n?e.blockxml=i:i.childNodes&&0<i.childNodes.length&&(e.contents=Ve(i)),He(i,e),t.push(e)}return t},He=function(e,t){for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];-1<i.nodeName.indexOf("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[i.nodeName.replace("css-","")]=i.value):t[i.nodeName]=i.value}},We=function(e){let t=null;if(e)if("string"==typeof e){if(t=La.textToDom$$module$build$src$core$utils$xml(e),"xml"!==t.nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},ze=function(e,t,n,i,o,r){const a=r.scrollbar&&r.scrollbar.canScrollVertically();return e.horizontal===Ul.LEFT?(n=o.absoluteMetrics.left+n,a&&r.RTL&&(n+=xl.scrollbarThickness)):(n=o.absoluteMetrics.left+o.viewMetrics.width-t.width-n,a&&!r.RTL&&(n-=xl.scrollbarThickness)),e.vertical===Fl.TOP?e=o.absoluteMetrics.top+i:(e=o.absoluteMetrics.top+o.viewMetrics.height-t.height-i,r.scrollbar&&r.scrollbar.canScrollHorizontally()&&(e-=xl.scrollbarThickness)),new Tl(e,e+t.height,n,n+t.width)},je=function(e,t){return{horizontal:t.toolboxMetrics.position===Nl.LEFT||e.horizontalLayout&&!e.RTL?Ul.RIGHT:Ul.LEFT,vertical:t.toolboxMetrics.position===Nl.BOTTOM?Fl.TOP:Fl.BOTTOM}},Xe=function(e,t,n,i){const o=e.left,r=e.right-e.left,a=e.bottom-e.top;for(let s=0;s<i.length;s++){const l=i[s];e.intersects(l)&&(e=n===Gl.UP?l.top-a-t:l.bottom+t,e=new Tl(e,e+a,o,o+r),s=-1)}return e},Ye=function(e,t){Kl(e,t)},qe=function(e){Kl=e},Ke=function(e,t){Jl.confirmInternal(e,t)},Qe=function(e,t){Ql(e,t)},Ze=function(e){Ql=e},Je=function(e,t,n){Zl(e,t,n)},et=function(e){Zl=e},tt=function(e){return void 0!==e.getVariableModel},nt=function(e){return void 0!==e.getProcedureDef},it=function(e){return void 0!==e.getProcedureCall&&void 0!==e.renameProcedure},La.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0;n<e.length;n++){const i=e[n].getVarModels();if(i)for(let e=0;e<i.length;e++){const n=i[e];n.getId()&&t.add(n)}}return Array.from(t.values())},La.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let i,o=0;i=e[o];o++){var n=i.getDeveloperVariables;if(n){n=n();for(let e=0;e<n.length;e++)t.add(n[e])}}return Array.from(t.values())},ot=function(e){let t=[];const n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(e){ct(e.getTargetWorkspace())})),t.push(n),e=rt(e),t.concat(e)},rt=function(e){const t=[];if(0<(e=e.getVariablesOfType("")).length){var n=e[e.length-1];if(Va.variables_set){var i=La.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","variables_set"),i.setAttribute("gap",Va.math_change?"8":"24"),i.appendChild(mt(n)),t.push(i)}if(Va.math_change&&((i=La.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","math_change"),i.setAttribute("gap",Va.variables_get?"20":"8"),i.appendChild(mt(n)),n=La.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),i.appendChild(n),t.push(i)),Va.variables_get){e.sort(ic.compareByName);for(let i,o=0;i=e[o];o++)(n=La.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","variables_get"),n.setAttribute("gap","8"),n.appendChild(mt(i)),t.push(n)}}return t},at=function(e){return ac.generateUniqueNameInternal(e)},st=function(e){return lt(rc.charAt(0),e.getAllVariableNames())},lt=function(e,t){if(!t.length)return e;const n=rc;let i="",o=n.indexOf(e);for(;;){let r=!1;for(let n=0;n<t.length;n++)if(t[n].toLowerCase()===e){r=!0;break}if(!r)break;o++,o===n.length&&(o=0,i=`${Number(i)+1}`),e=n.charAt(o)+i}return e},ct=function(e,t,n){function i(n){ut(La.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,n,(function(n){if(n){var r=ht(n,e);if(r){if(r.type===o)var a=La.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",r.name);else a=(a=La.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",r.name).replace("%2",r.type);Ye(a,(function(){i(n)}))}else e.createVariable(n,o),t&&t(n)}else t&&t(null)}))}const o=n||"";i("")},La.renameVariable$$module$build$src$core$variables=function(e,t,n){function i(o){const r=La.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);ut(r,o,(function(o){if(o){var r=dt(o,t.type,e),a=pt(t.name,o,e);if(r||a){var s="";r?s=La.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",r.name).replace("%2",r.type):a&&(s=La.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",o).replace("%2",a)),Ye(s,(function(){i(o)}))}else e.renameVariableById(t.getId(),o),n&&n(o)}else n&&n(null)}))}i("")},ut=function(e,t,n){Je(e,t,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())===La.Msg$$module$build$src$core$msg.RENAME_VARIABLE||e===La.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(e=null),n(e)}))},dt=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let i,o=0;i=n[o];o++)if(i.name.toLowerCase()===e&&i.type!==t)return i;return null},ht=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n,i=0;n=t[i];i++)if(n.name.toLowerCase()===e)return n;return null},pt=function(e,t,n){return n.getProcedureMap().getProcedures().length?ft(e,t,n):gt(e,t,n)},ft=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getProcedureMap().getProcedures();for(const o of n){var i=o.getParameters().filter(tt).map((e=>e.getVariableModel().name));if(i&&(n=i.some((t=>t.toLowerCase()===e)),i=i.some((e=>e.toLowerCase()===t)),n&&i))return o.getName()}return null},gt=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),n=n.getAllBlocks(!1);for(const o of n){if(!nt(o))continue;var i=(n=o.getProcedureDef())[1];const r=i.some((t=>t.toLowerCase()===e));if(i=i.some((e=>e.toLowerCase()===t)),r&&i)return n[0]}return null},mt=function(e){const t=La.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=La.createTextNode$$module$build$src$core$utils$xml(e.name),t.appendChild(e),t},La.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,n,i){let o=La.getVariable$$module$build$src$core$variables(e,t,n,i);return o||(o=_t(e,t,n,i)),o},La.getVariable$$module$build$src$core$variables=function(e,t,n,i){const o=e.getPotentialVariableMap();let r=null;if(t&&(r=e.getVariableById(t),!r&&o&&(r=o.getVariableById(t)),r))return r;if(n){if(void 0===i)throw Error("Tried to look up a variable by name without a type");r=e.getVariable(n,i),!r&&o&&(r=o.getVariable(n,i))}return r},_t=function(e,t,n,i){const o=e.getPotentialVariableMap();return n||(n=at(e.isFlyout?e.targetWorkspace:e)),o?o.createVariable(n,i,t):e.createVariable(n,i,t)},vt=function(e,t){e=e.getAllVariables();const n=[];if(t.length!==e.length)for(let i=0;i<e.length;i++){const o=e[i];-1===t.indexOf(o)&&n.push(o)}return n},bt=function(t,n){e(Ba.PASTER,t,n)},Tt=function(e){n(Ba.PASTER,e)},At=function(e){return Ct(e),St()?(wt(),Promise.resolve()):(vc||(vc=new Promise((e=>{bc=e,Tc=window.requestAnimationFrame((()=>{wt(),e()}))}))),vc)},yt=function(){return vc||Promise.resolve()},Et=function(e){e||window.cancelAnimationFrame(Tc),wt(e),!e&&bc&&bc()},St=function(){return zs},Ct=function(e){_c.add(e);const t=e.getParent();t?Ct(t):mc.add(e)},wt=function(e){const t=e?new Set([e]):new Set([...mc].map((e=>e.workspace))),n=[...mc].filter(Mt).filter((e=>t.has(e.workspace)));for(var i of n)Rt(i);for(const o of t)o.resizeContents();for(const o of n)i=o.getRelativeToSurfaceXY(),o.updateComponentLocations(i);for(const o of n)xt(o);e||(vc=null)},xt=function(e){mc.delete(e),_c.delete(e);for(const t of e.getChildren(!1))xt(t)},Mt=function(e){return!e.isDisposed()&&!e.getParent()},Rt=function(e){if(_c.has(e)){for(const t of e.getChildren(!1))Rt(t);e.renderEfficiently()}},It=function(e,t){const n=La.createElement$$module$build$src$core$utils$xml("xml");var i=Dt(La.allUsedVarModels$$module$build$src$core$variables(e));i.hasChildNodes()&&n.appendChild(i),i=e.getTopComments(!0);for(let o=0;o<i.length;o++)n.appendChild(i[o].toXmlWithXY(t));for(e=e.getTopBlocks(!0),i=0;i<e.length;i++)n.appendChild(kt(e[i],t));return n},Dt=function(e){const t=La.createElement$$module$build$src$core$utils$xml("variables");for(let n=0;n<e.length;n++){const i=e[n],o=La.createElement$$module$build$src$core$utils$xml("variable");o.appendChild(La.createTextNode$$module$build$src$core$utils$xml(i.name)),i.type&&o.setAttribute("type",i.type),o.id=i.getId(),t.appendChild(o)}return t},kt=function(e,t){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;let n=0;if(e.workspace.RTL&&(n=e.workspace.getWidth()),t=Pt(e,t),en(t)){const i=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?n-i.x:i.x))),t.setAttribute("y",String(Math.round(i.y)))}return t},Lt=function(e){if(e.isSerializable()){const t=La.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Ot=function(e,t){for(let n=0;n<e.inputList.length;n++){const i=e.inputList[n];for(let e=0;e<i.fieldRow.length;e++){const n=Lt(i.fieldRow[e]);n&&t.appendChild(n)}}},Pt=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?Pt(t):new DocumentFragment;const n=La.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),t||(n.id=e.id),e.mutationToDom){var i=e.mutationToDom();i&&(i.hasChildNodes()||i.hasAttributes())&&n.appendChild(i)}if(Ot(e,n),i=e.getCommentText()){var o=e.getIcon(Xl.COMMENT),r=o.getBubbleSize();o=o.bubbleIsVisible();var a=La.createElement$$module$build$src$core$utils$xml("comment");a.appendChild(La.createTextNode$$module$build$src$core$utils$xml(i)),a.setAttribute("pinned",`${o}`),a.setAttribute("h",String(r.height)),a.setAttribute("w",String(r.width)),n.appendChild(a)}for(e.data&&((i=La.createElement$$module$build$src$core$utils$xml("data")).appendChild(La.createTextNode$$module$build$src$core$utils$xml(e.data)),n.appendChild(i)),i=0;i<e.inputList.length;i++){var s=void 0;if(o=!0,(r=e.inputList[i]).type!==La.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&r.type!==La.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){a=r.connection.targetBlock(),r.type===La.inputTypes$$module$build$src$core$inputs$input_types.VALUE?s=La.createElement$$module$build$src$core$utils$xml("value"):r.type===La.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(s=La.createElement$$module$build$src$core$utils$xml("statement"));const e=r.connection.getShadowDom();!e||a&&a.isShadow()||s.appendChild(Nt(e,t)),a&&(a=Pt(a,t)).nodeType===dl.ELEMENT_NODE&&(s.appendChild(a),o=!1),s.setAttribute("name",r.name),o||n.appendChild(s)}}let l;return void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&n.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&n.setAttribute("collapsed","true"),e.isEnabled()||n.setAttribute("disabled","true"),e.isDeletable()||e.isShadow()||n.setAttribute("deletable","false"),e.isMovable()||e.isShadow()||n.setAttribute("movable","false"),e.isEditable()||n.setAttribute("editable","false"),(s=e.getNextBlock())&&(i=Pt(s,t)).nodeType===dl.ELEMENT_NODE&&(l=La.createElement$$module$build$src$core$utils$xml("next"),l.appendChild(i),n.appendChild(l)),!(e=e.nextConnection&&e.nextConnection.getShadowDom())||s&&s.isShadow()||l.appendChild(Nt(e,t)),n},Nt=function(e,t){let n,i=e=e.cloneNode(!0);for(;i;)if(t&&"shadow"===i.nodeName&&i.removeAttribute("id"),i.firstChild)i=i.firstChild;else{for(;i&&!i.nextSibling;){let e;n=i,i=i.parentNode,n.nodeType===dl.TEXT_NODE&&""===n.data.trim()&&(null==(e=i)?void 0:e.firstChild)!==n&&se(n)}i&&(n=i,i=i.nextSibling,n.nodeType===dl.TEXT_NODE&&""===n.data.trim()&&se(n))}return e},$t=function(e){return Le(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Bt=function(e){e=$t(e).split("<");let t="";for(let n=1;n<e.length;n++){const i=e[n];"/"===i[0]&&(t=t.substring(2)),e[n]=t+"<"+i,"/"!==i[0]&&"/>"!==i.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},Ft=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=La.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},La.domToWorkspace$$module$build$src$core$xml=function(e,t){let n=0;t.RTL&&(n=t.getWidth());const i=[];de();const o=La.getGroup$$module$build$src$core$events$utils();o||La.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let r=!0;try{for(let o,a=0;o=e.childNodes[a];a++){const e=o.nodeName.toLowerCase(),a=o;if("block"===e||"shadow"===e&&!x()){const e=Gt(a,t);let o;i.push(e.id);const s=parseInt(null!=(o=a.getAttribute("x"))?o:"10",10);let l;const c=parseInt(null!=(l=a.getAttribute("y"))?l:"10",10);isNaN(s)||isNaN(c)||e.moveBy(t.RTL?n-s:s,c,["create"]),r=!1}else{if("shadow"===e)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===e)t.rendered?gc.fromXmlRendered(a,t,n):lc.fromXml(a,t);else if("variables"===e){if(!r)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Vt(a,t),r=!1}}}}finally{La.setGroup$$module$build$src$core$events$utils(o),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&Et(),he()}return M(new($(gs))(t)),i},Ut=function(e,t){if(!t.getBlocksBoundingBox)return La.domToWorkspace$$module$build$src$core$xml(e,t);var n=t.getBlocksBoundingBox();if(e=La.domToWorkspace$$module$build$src$core$xml(e,t),n&&n.top!==n.bottom){var i=n.bottom;n=t.RTL?n.right:n.left;var o=1/0;let r=-1/0,a=1/0;for(let n=0;n<e.length;n++){const i=t.getBlockById(e[n]).getRelativeToSurfaceXY();i.y<a&&(a=i.y),i.x<o&&(o=i.x),i.x>r&&(r=i.x)}for(i=i-a+10,n=t.RTL?n-r:n-o,o=0;o<e.length;o++)t.getBlockById(e[o]).moveBy(n,i,["create"])}return e},La.domToBlock$$module$build$src$core$xml=function(e,t){return e=Gt(e,t),t.rendered&&Et(),e},Gt=function(e,t){La.disable$$module$build$src$core$events$utils();var n=t.getAllVariables();let i;try{if(i=Qt(e,t),t.rendered){const e=i,n=i.getDescendants(!1);e.setConnectionTracking(!1);for(let t=n.length-1;0<=t;t--)n[t].initSvg();for(let t=n.length-1;0<=t;t--)n[t].queueRender();setTimeout((function(){e.disposed||e.setConnectionTracking(!0)}),1),t.resizeContents()}else{const e=i.getDescendants(!1);for(let t=e.length-1;0<=t;t--)e[t].initModel()}}finally{La.enable$$module$build$src$core$events$utils()}if(L()){for(e=vt(t,n),t=0;t<e.length;t++)n=e[t],M(new($(Za))(n));M(new($(La.CREATE$$module$build$src$core$events$utils))(i))}return i},Vt=function(e,t){for(let i=0;i<e.children.length;i++){var n=e.children[i];const o=n.getAttribute("type"),r=n.getAttribute("id");if(!(n=n.textContent))break;t.createVariable(n,o,r)}},Ht=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let n=0;n<e.children.length;n++){const i=e.children[n];if(i.nodeType!==dl.TEXT_NODE)switch(i.nodeName.toLowerCase()){case"mutation":t.mutation.push(i);break;case"comment":t.comment.push(i);break;case"data":t.data.push(i);break;case"title":case"field":t.field.push(i);break;case"value":case"statement":t.input.push(i);break;case"next":t.next.push(i);break;default:console.warn("Ignoring unknown tag: "+i.nodeName)}}return t},Wt=function(e,t){let n=!1;for(let i=0;i<e.length;i++){const o=e[i];t.domToMutation&&(t.domToMutation(o),t.initSvg&&(n=!0))}return n},zt=function(e,t){for(let i=0;i<e.length;i++){var n=e[i];const o=n.textContent,r="true"===n.getAttribute("pinned");let a;const s=parseInt(null!=(a=n.getAttribute("w"))?a:"50",10);let l;n=parseInt(null!=(l=n.getAttribute("h"))?l:"50",10),t.setCommentText(o);const c=t.getIcon(Xl.COMMENT);isNaN(s)||isNaN(n)||c.setBubbleSize(new Al(s,n)),c.setBubbleVisible(r),setTimeout((()=>c.setBubbleVisible(r)),1)}},jt=function(e,t){for(let n=0;n<e.length;n++)t.data=e[n].textContent},Xt=function(e,t){for(let n=0;n<e.length;n++){const i=e[n],o=i.getAttribute("name");o?Zt(t,o,i):console.warn(`Ignoring unnamed field in block ${t.type}`)}},Yt=function(e){let t=null,n=null;for(let i=0;i<e.childNodes.length;i++){const o=e.childNodes[i];en(o)&&("block"===o.nodeName.toLowerCase()?t=o:"shadow"===o.nodeName.toLowerCase()&&(n=o))}return{childBlockElement:t,childShadowElement:n}},qt=function(e,t,n,i){for(let r=0;r<e.length;r++){var o=e[r];const a=o.getAttribute("name"),s=a?n.getInput(a):null;if(!s){console.warn("Ignoring non-existent input "+a+" in block "+i);break}if((o=Yt(o)).childBlockElement){if(!s.connection)throw TypeError("Input connection does not exist.");Qt(o.childBlockElement,t,s.connection,!1)}if(o.childShadowElement){let e;null==(e=s.connection)||e.setShadowDom(o.childShadowElement)}}},Kt=function(e,t,n){for(let i=0;i<e.length;i++){const o=Yt(e[i]);if(o.childBlockElement){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Qt(o.childBlockElement,t,n.nextConnection,!0)}o.childShadowElement&&n.nextConnection&&n.nextConnection.setShadowDom(o.childShadowElement)}},Qt=function(e,t,n,i){var o;const r=e.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+e.outerHTML);var a=null!=(o=e.getAttribute("id"))?o:void 0;o=t.newBlock(r,a),a=Ht(e);const s=Wt(a.mutation,o);if(zt(a.comment,o),jt(a.data,o),n)if(i){if(!o.previousConnection)throw TypeError("Next block does not have previous statement.");n.connect(o.previousConnection)}else if(o.outputConnection)n.connect(o.outputConnection);else{if(!o.previousConnection)throw TypeError("Child block does not have output or previous statement.");n.connect(o.previousConnection)}if(Xt(a.field,o),qt(a.input,t,o,r),Kt(a.next,t,o),s&&o.initSvg(),(t=e.getAttribute("inline"))&&o.setInputsInline("true"===t),(t=e.getAttribute("disabled"))&&o.setEnabled("true"!==t&&"disabled"!==t),(t=e.getAttribute("deletable"))&&o.setDeletable("true"===t),(t=e.getAttribute("movable"))&&o.setMovable("true"===t),(t=e.getAttribute("editable"))&&o.setEditable("true"===t),(t=e.getAttribute("collapsed"))&&o.setCollapsed("true"===t),"shadow"===e.nodeName.toLowerCase()){for(e=o.getChildren(!1),t=0;t<e.length;t++)if(!e[t].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");o.setShadow(!0)}return o},Zt=function(e,t,n){const i=e.getField(t);i?i.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Jt=function(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if("next"===n.nodeName.toLowerCase()){e.removeChild(n);break}}},en=function(e){return e.nodeType===dl.ELEMENT_NODE},tn=function(e){return void 0!==e.saveState&&void 0!==e.loadState},nn=function(t,n){e(Ba.SERIALIZER,t,n)},on=function(e){n(Ba.SERIALIZER,e)},rn=function(e,{addCoordinates:t=!1,addInputBlocks:n=!0,addNextBlocks:i=!0,doFullSerialization:o=!0,saveIds:r=!0}={}){if(e.isInsertionMarker())return null;const a={type:e.type,id:r?e.id:void 0};return t&&sn(e,a),an(e,a),ln(e,a,o),cn(e,a,o),un(e,a,o),n&&dn(e,a,o,r),i&&hn(e,a,o,r),a},an=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.enabled=!1),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),void 0!==e.inputsInline&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},sn=function(e,t){const n=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(n.RTL?n.getWidth()-e.x:e.x),t.y=Math.round(e.y)},ln=function(e,t,n){e.saveExtraState?null!==(e=e.saveExtraState(n))&&(t.extraState=e):e.mutationToDom&&null!==(e=e.mutationToDom())&&(t.extraState=$t(e).replace(' xmlns="https://developers.google.com/blockly/xml"',""))},cn=function(e,t,n){const i=Object.create(null);for(const o of e.getIcons())tn(o)&&(e=o.saveState(n))&&(i[o.getType().toString()]=e);Object.keys(i).length&&(t.icons=i)},un=function(e,t,n){const i=Object.create(null);for(let o=0;o<e.inputList.length;o++){const t=e.inputList[o];for(let e=0;e<t.fieldRow.length;e++){const o=t.fieldRow[e];o.isSerializable()&&(i[o.name]=o.saveState(n))}}Object.keys(i).length&&(t.fields=i)},dn=function(e,t,n,i){const o=Object.create(null);for(let r=0;r<e.inputList.length;r++){const t=e.inputList[r];if(!t.connection)continue;const a=pn(t.connection,n,i);a&&(o[t.name]=a)}Object.keys(o).length&&(t.inputs=o)},hn=function(e,t,n,i){e.nextConnection&&(e=pn(e.nextConnection,n,i))&&(t.next=e)},pn=function(e,t,n){const i=e.getShadowState(!0);if(e=e.targetBlock(),!i&&!e)return null;const o=Object.create(null);return i&&(o.shadow=i),e&&!e.isShadow()&&(o.block=rn(e,{doFullSerialization:t,saveIds:n})),o},fn=function(e,t,{recordUndo:n=!1}={}){return e=gn(e,t,{recordUndo:n}),t.rendered&&Et(),e},gn=function(e,t,{parentConnection:n,isShadow:i=!1,recordUndo:o=!1}={}){const r=x();let a;w(o),(o=La.getGroup$$module$build$src$core$events$utils())||La.setGroup$$module$build$src$core$events$utils(!0),La.disable$$module$build$src$core$events$utils();try{a=mn(e,t,{parentConnection:n,isShadow:i})}finally{La.enable$$module$build$src$core$events$utils()}if(L()&&M(new($(La.CREATE$$module$build$src$core$events$utils))(a)),La.setGroup$$module$build$src$core$events$utils(o),w(r),t.rendered){const e=a;setTimeout((()=>{e.disposed||e.setConnectionTracking(!0)}),1)}return a},mn=function(e,t,{parentConnection:n,isShadow:i=!1}={}){if(!e.type)throw new Sc(e);const o=t.newBlock(e.type,e.id);return o.setShadow(i),_n(o,e),vn(o,e),bn(o,e),Tn(n,o,e),An(o,e),yn(o,e),En(o,e),Sn(o,e),wn(o,t.rendered),o},_n=function(e,t){let n=void 0===t.x?0:t.x;t=void 0===t.y?0:t.y;const i=e.workspace;n=i.RTL?i.getWidth()-n:n,e.moveBy(n,t)},vn=function(e,t){t.collapsed&&e.setCollapsed(!0),!1===t.deletable&&e.setDeletable(!1),!1===t.movable&&e.setMovable(!1),!1===t.editable&&e.setEditable(!1),!1===t.enabled&&e.setEnabled(!1),void 0!==t.inline&&e.setInputsInline(t.inline),void 0!==t.data&&(e.data=t.data)},bn=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(La.textToDom$$module$build$src$core$utils$xml(t.extraState)))},Tn=function(e,t,n){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new xc(n);if(e.type===La.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var i=t.outputConnection;if(!i)throw new Cc("output",t,n)}else if(!(i=t.previousConnection))throw new Cc("previous",t,n);if(!e.connect(i)){const o=t.workspace.connectionChecker;throw new wc(o.getErrorMessage(o.canConnectWithReason(i,e,!1),i,e),e.type===La.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,n)}}},An=function(e,t){if(t.icons){var n=Object.keys(t.icons);for(const o of n){n=t.icons[o];var i=e.getIcon(o);if(!i){if(!(i=r(Ba.ICON,o,!1)))throw new Mc(o,e,t);i=new i(e),e.addIcon(i)}tn(i)&&i.loadState(n)}}},yn=function(e,t){if(t.fields){var n=Object.keys(t.fields);for(let i=0;i<n.length;i++){const o=n[i],r=t.fields[o],a=e.getField(o);a?a.loadState(r):console.warn(`Ignoring non-existant field ${o} in block ${e.type}`)}}},En=function(e,t){if(t.inputs){var n=Object.keys(t.inputs);for(let i=0;i<n.length;i++){const o=n[i],r=e.getInput(o);if(!r||!r.connection)throw new Cc(o,e,t);Cn(r.connection,t.inputs[o])}}},Sn=function(e,t){if(t.next){if(!e.nextConnection)throw new Cc("next",e,t);Cn(e.nextConnection,t.next)}},Cn=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&mn(t.block,e.getSourceBlock().workspace,{parentConnection:e})},wn=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const t of e.getIcons())t.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},xn=function(e){const t=e.workspace,n=La.config$$module$build$src$core$config.snapRadius,i=e.getRelativeToSurfaceXY(),o=new ll(0,0),r=t.getAllBlocks(!1).filter((t=>t.id!=e.id)).map((e=>e.getRelativeToSurfaceXY()));for(;Mn(ll.sum(i,o),r)||Rn(e,o,n);)t.RTL?o.translate(-n,2*n):o.translate(n,2*n);e.moveTo(ll.sum(i,o))},Mn=function(e,t){return t.some((t=>1>=Math.abs(t.x-e.x)&&1>=Math.abs(t.y-e.y)))},Rn=function(e,t,n){return e.getConnections_(!1).some((e=>!!e.closest(n,t).connection))},In=function(e){return te("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),Yc.copyInternal(e)},Dn=function(e){const t=e.toCopyData();let n;return jc=t,Xc=null!=(n=e.workspace)?n:null,t},kn=function(e,t,n){return e&&t?Ln(e,t,n):jc&&Xc?Ln(jc,Xc):null},Ln=function(e,t,n){let i,o,r;return t=null!=(i=t.getRootWorkspace())?i:t,null!=(r=null==(o=a(Ba.PASTER,e.paster,!1))?void 0:o.paste(e,t,n))?r:null},On=function(e){return te("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),Yc.duplicateInternal(e)},Pn=function(e){const t=e.toCopyData();return t?kn(t,e.workspace):null},Nn=function(e,t){e.setAttribute(Jc,t)},$n=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Zc+t,`${n}`)},Bn=function(){return tu},Fn=function(e){if(tu=e,null===e){let e;null==(e=document.querySelector("."+au))||e.remove()}},Un=function(){document.querySelector("."+au)||((tu=document.createElement("div")).className=au,(_()||document.body).appendChild(tu))},Gn=function(e,t,n){Vn(),ou=e,ru=n,(e=tu)&&(e.style.direction=t?"rtl":"ltr",e.style.display="block",t=p(),su=t.getRenderer().getClassName(),lu=t.getTheme().getClassName(),su&&ie(e,su),lu&&ie(e,lu))},Vn=function(){if(Hn()){ou=null;var e=tu;e&&(e.style.display="none",e.style.left="",e.style.top="",ru&&ru(),ru=null,e.textContent="",su&&(re(e,su),su=""),lu&&(re(e,lu),lu=""),p().markFocused())}},Hn=function(){return!!ou},Wn=function(e){ou===e&&Vn()},zn=function(e,t,n){tu.style.left=e+"px",tu.style.top=t+"px",tu.style.height=n+"px"},jn=function(e,t,n,i){const o=Yn(e,t,n);e=Xn(e,t,n,i),0>o?zn(e,0,n.height+o):zn(e,o,n.height)},Xn=function(e,t,n,i){return i?Math.min(Math.max(t.right-n.width,e.left),e.right-n.width):Math.max(Math.min(t.left,e.right-n.width),e.left)},Yn=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},qn=function(e){return!(null==e||!e.repositionForWindowResize)},Kn=function(){qn(ou)&&ou.repositionForWindowResize()||Vn()},Qn=function(){return uu},Zn=function(e){uu=e},Jn=function(e,t,n){if(Gn(du,n,ri),t.length){var i=ei(t,n);hu=i,ti(i,e,n),setTimeout((function(){i.focus()}),1),uu=null}else oi()},ei=function(e,t){const n=new nu;n.setRole(Kc.MENU);for(let i=0;i<e.length;i++){const o=e[i],r=new iu(o.text);r.setRightToLeft(t),r.setRole(Kc.MENUITEM),n.addChild(r),r.setEnabled(o.enabled),o.enabled&&r.onAction((function(){oi(),requestAnimationFrame((()=>{setTimeout((()=>{o.callback(o.scope)}),0)}))}),{})}return n},ti=function(e,t,n){const i=Me();t=new Tl(t.clientY+i.top,t.clientY+i.top,t.clientX+i.left,t.clientX+i.left),ni(e);const o=e.getSize();n&&(t.left+=o.width,t.right+=o.width,i.left+=o.width,i.right+=o.width),jn(i,t,o,n),e.focus()},ni=function(e){var t=Bn();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),ie(t,"blocklyContextMenu"),z(t,"contextmenu",null,ii),e.focus()},ii=function(e){e.preventDefault(),e.stopPropagation()},oi=function(){Wn(du),uu=null},ri=function(){hu&&(hu.dispose(),hu=null)},La.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{let n;La.disable$$module$build$src$core$events$utils();try{n=t instanceof Element?Gt(t,e.workspace):gn(t,e.workspace);const i=e.getRelativeToSurfaceXY();i.x=e.RTL?i.x-La.config$$module$build$src$core$config.snapRadius:i.x+La.config$$module$build$src$core$config.snapRadius,i.y+=2*La.config$$module$build$src$core$config.snapRadius,n.moveBy(i.x,i.y)}finally{La.enable$$module$build$src$core$events$utils()}return L()&&!n.isShadow()&&M(new($(La.CREATE$$module$build$src$core$events$utils))(n)),n.select(),n}},ai=function(e){return{text:La.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){La.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),La.setGroup$$module$build$src$core$events$utils(!1)}}},si=function(e){return{text:La.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const t=e.toCopyData();t&&kn(t,e.workspace)}}},li=function(e,t){const n={enabled:!0};return n.text=La.Msg$$module$build$src$core$msg.ADD_COMMENT,n.callback=function(){const n=new gc(e,La.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,gc.DEFAULT_SIZE,gc.DEFAULT_SIZE);var i=e.getInjectionDiv().getBoundingClientRect();i=new ll(t.clientX-i.left,t.clientY-i.top);const o=e.getOriginOffsetInPixels();(i=ll.difference(i,o)).scale(1/e.scale),n.moveBy(i.x,i.y),e.rendered&&(n.initSvg(),n.render(),n.select())},n},ci=function(e){return e*Math.PI/180},ui=function(e){return 180*e/Math.PI},di=function(e,t,n){if(n<e){const t=n;n=e,e=t}return Math.max(e,Math.min(t,n))},hi=function(){document.querySelector(".blocklyDropDownDiv")||((mu=document.createElement("div")).className="blocklyDropDownDiv",(_()||document.body).appendChild(mu),(_u=document.createElement("div")).className="blocklyDropDownContent",mu.appendChild(_u),(vu=document.createElement("div")).className="blocklyDropDownArrow",mu.appendChild(vu),mu.style.opacity="0",mu.style.transition="transform "+Eu+"s, opacity "+Eu+"s",mu.addEventListener("focusin",(function(){ie(mu,"blocklyFocused")})),mu.addEventListener("focusout",(function(){re(mu,"blocklyFocused")})))},pi=function(e){Mu=e},fi=function(){return Ru},gi=function(){return _u},mi=function(){_u.textContent="",_u.style.width=""},_i=function(e,t){mu.style.backgroundColor=e,mu.style.borderColor=t},vi=function(e,t,n,i){return yi(Ti(t),e,n,i)},bi=function(e,t,n){return Iu=!0,yi(Ai(e),e,t,n)},Ti=function(e){var t=e.getSvgRoot();const n=e.workspace.scale,i=e.height*n;return e=e.width*n,t=Ae(t),new Tl(t.y,t.y+i,t.x,t.x+e)},Ai=function(e){return e=e.getScaledBBox(),new Tl(e.top,e.bottom,e.left,e.right)},yi=function(e,t,n,i){const o=e.left+(e.right-e.left)/2,r=e.bottom;e=e.top,i&&(e+=i);let a=(i=t.getSourceBlock()).workspace;for(;a.options.parentWorkspace;)a=a.options.parentWorkspace;return pi(a.getParentSvg().parentNode),Ei(t,i.RTL,o,r,o,e,n)},Ei=function(e,t,n,i,o,r,a){return Ru=e,Cu=a||null,mu.style.direction=t?"rtl":"ltr",e=p(),wu=e.getRenderer().getClassName(),xu=e.getTheme().getClassName(),wu&&ie(mu,wu),xu&&ie(mu,xu),ki(n,i,o,r)},Si=function(e,t,n,i){return{initialX:(e=xi(e,n.left,n.right,i.width)).divX,initialY:t,finalX:e.divX,finalY:t+yu,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Ci=function(e,t,n,i){return{initialX:(e=xi(e,n.left,n.right,i.width)).divX,initialY:t-i.height,finalX:e.divX,finalY:t-i.height-yu,arrowX:e.arrowX,arrowY:i.height-2*Tu-bu/2,arrowAtTop:!1,arrowVisible:!0}},wi=function(e,t,n){return{initialX:(e=xi(e,t.left,t.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},xi=function(e,t,n,i){return t=di(t,e-i/2,n-i),{arrowX:e=di(n=Au,e=e-bu/2-t,i-n-bu),divX:t}},Mi=function(){return!!Ru},Ri=function(e,t){return Ru===e&&(t?Di():Ii(),!0)},Ii=function(){mu.style.transform="translate(0, 0)",mu.style.opacity="0",Su=setTimeout((function(){Di()}),1e3*Eu),Cu&&(Cu(),Cu=null)},Di=function(){Mi()&&(Su&&clearTimeout(Su),mu.style.transform="",mu.style.left="",mu.style.top="",mu.style.opacity="0",mu.style.display="none",mu.style.backgroundColor="",mu.style.borderColor="",Cu&&(Cu(),Cu=null),mi(),Ru=null,wu&&(re(mu,wu),wu=""),xu&&(re(mu,xu),xu=""),p().markFocused())},ki=function(e,t,n,i){(e=Du.getPositionMetrics(e,t,n,i)).arrowVisible?(vu.style.display="",vu.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",vu.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):vu.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),i=Math.floor(e.finalX);const o=Math.floor(e.finalY);return mu.style.left=t+"px",mu.style.top=n+"px",mu.style.display="block",mu.style.opacity="1",mu.style.transform="translate("+(i-t)+"px,"+(o-n)+"px)",!!e.arrowAtTop},Li=function(){if(Ru){var e=Ru.getSourceBlock();const t=(e=Iu?Ai(Ru):Ti(e)).left+(e.right-e.left)/2;ki(t,e.bottom,t,e.top)}else Ii()},Oi=function(e){if(!(100<e.getDescendants(!1).length)){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete");var i=t.getSvgXY(n);(n=n.cloneNode(!0)).setAttribute("transform","translate("+i.x+","+i.y+")"),t.getParentSvg().appendChild(n),Pi(n,{x:i.x,y:i.y,width:e.width,height:e.height},t.RTL,new Date,t.scale)}},Pi=function(e,t,n,i,o){const r=((new Date).getTime()-i.getTime())/150;1<r?se(e):(e.setAttribute("transform","translate("+(t.x+(n?-1:1)*t.width*o/2*r)+","+(t.y+t.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(Pi,10,e,t,n,i,o))},Ni=function(e){var t=e.workspace;const n=t.scale;if(t.getAudioManager().play("click"),!(1>n)){var i=t.getSvgXY(e.getSvgRoot());e.outputConnection?(i.x+=(e.RTL?3:-3)*n,i.y+=13*n):e.previousConnection&&(i.x+=(e.RTL?-23:23)*n,i.y+=3*n);var o=ne(bl.CIRCLE,{cx:i.x,cy:i.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=ne(bl.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*n},o),t=ne(bl.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},o),e.beginElement(),t.beginElement(),setTimeout((()=>{se(o)}),150)}},$i=function(e){if(Fi(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Ou=e,Bi(e,t,new Date)}},Bi=function(e,t,n){const i=((new Date).getTime()-n.getTime())/200;let o="";1>=i&&(o=`skewX(${Math.round(Math.sin(i*Math.PI*3)*(1-i)*t)})`,Lu=setTimeout(Bi,10,e,t,n)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${o}`)},Fi=function(){Ou&&(Lu&&(clearTimeout(Lu),Lu=null),Ou.getSvgRoot().setAttribute("transform",Ou.getTranslation()),Ou=null)},Ui=function(e,t){return te("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),e.startsWith(t)},Gi=function(e){return e.length?e.reduce((function(e,t){return e.length<t.length?e:t})).length:0},Vi=function(e,t){if(!e.length)return 0;if(1===e.length)return e[0].length;let n,i=0;for(t=t||Gi(e),n=0;n<t;n++){for(var o=e[0][n],r=1;r<e.length;r++)if(o!==e[r][n])return i;" "===o&&(i=n+1)}for(o=1;o<e.length;o++)if((r=e[o][n])&&" "!==r)return i;return t},Hi=function(e,t){if(!e.length)return 0;if(1===e.length)return e[0].length;let n,i=0;for(t=t||Gi(e),n=0;n<t;n++){for(var o=e[0].substr(-n-1,1),r=1;r<e.length;r++)if(o!==e[r].substr(-n-1,1))return i;" "===o&&(i=n+1)}for(o=1;o<e.length;o++)if((r=e[o].charAt(e[o].length-n-1))&&" "!==r)return i;return t},La.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split("\n");for(let n=0;n<e.length;n++)e[n]=Wi(e[n],t);return e.join("\n")},Wi=function(e,t){if(e.length<=t)return e;const n=e.trim().split(/\s+/);for(var i=0;i<n.length;i++)n[i].length>t&&(t=n[i].length);var o=-1/0;let r,a=1;do{i=o,r=e,e=[],o=n.length/a;let s=1;for(let t=0;t<n.length-1;t++)s<(t+1.5)/o?(s++,e[t]=!0):e[t]=!1;e=ji(n,e,t),o=zi(n,e,t),e=Xi(n,e),a++}while(o>i);return r},zi=function(e,t,n){const i=[0],o=[];for(var r=0;r<e.length;r++)i[i.length-1]+=e[r].length,!0===t[r]?(i.push(0),o.push(e[r].charAt(e[r].length-1))):!1===t[r]&&i[i.length-1]++;for(e=Math.max(...i),t=0,r=0;r<i.length;r++)t-=2*Math.pow(Math.abs(n-i[r]),1.5),t-=Math.pow(e-i[r],1.5),-1!==".?!".indexOf(o[r])?t+=n/3:-1!==",;)]}".indexOf(o[r])&&(t+=n/4);return 1<i.length&&i[i.length-1]<=i[i.length-2]&&(t+=.5),t},ji=function(e,t,n){let i,o=zi(e,t,n);for(let r=0;r<t.length-1;r++){if(t[r]===t[r+1])continue;const a=[].concat(t);a[r]=!a[r],a[r+1]=!a[r+1];const s=zi(e,a,n);s>o&&(o=s,i=a)}return i?ji(e,i,n):t},Xi=function(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e[i]),void 0!==t[i]&&n.push(t[i]?"\n":" ");return n.join("")},La.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Yi=function(e){zu=e},qi=function(){return zu},Ki=function(){return ju},Qi=function(){return ad},Zi=function(e){if(e=Ji(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},Ji=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},eo=function(){document.querySelector(".blocklyTooltipDiv")||((ad=document.createElement("div")).className="blocklyTooltipDiv",(_()||document.body).appendChild(ad))},to=function(e){e.mouseOverWrapper_=j(e,"pointerover",null,io),e.mouseOutWrapper_=j(e,"pointerout",null,oo),e.addEventListener("pointermove",ro,!1)},no=function(e){e&&(X(e.mouseOverWrapper_),X(e.mouseOutWrapper_),e.removeEventListener("pointermove",ro))},io=function(e){Xu||(e=Ji(e.currentTarget),Ju!==e&&(so(),ed=null,Ju=e),clearTimeout(qu))},oo=function(e){Xu||(qu=setTimeout((function(){ed=Ju=null,so()}),1),clearTimeout(Ku),Ku=0)},ro=function(e){if(Ju&&Ju.tooltip&&!Xu)if(ju){const t=Qu-e.pageX;e=Zu-e.pageY,Math.sqrt(t*t+e*e)>id&&so()}else ed!==Ju&&(clearTimeout(Ku),Qu=e.pageX,Zu=e.pageY,Ku=setTimeout(fo,od))},ao=function(){ed=Ju=null,so()},so=function(){ju&&(ju=!1,ad&&(ad.style.display="none")),Ku&&(clearTimeout(Ku),Ku=0)},lo=function(){so(),Xu=!0},co=function(){Xu=!1},uo=function(){ad&&Ju&&("function"==typeof zu?zu(ad,Ju):ho())},ho=function(){var e=Zi(Ju);e=(e=La.wrap$$module$build$src$core$utils$string(e,Yu)).split("\n");for(let t=0;t<e.length;t++){const n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),ad.appendChild(n)}},po=function(e){const t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let i=Qu;i=e?i-(td+ad.offsetWidth):i+td;let o=Zu+nd;return o+ad.offsetHeight>n+window.scrollY&&(o-=ad.offsetHeight+2*nd),e?i=Math.max(rd-window.scrollX,i):i+ad.offsetWidth>t+window.scrollX-2*rd&&(i=t-ad.offsetWidth-2*rd),{x:i,y:o}},fo=function(){if(!Xu&&(ed=Ju,ad)){ad.textContent="",uo();var e=Ju.RTL;ad.style.direction=e?"rtl":"ltr",ad.style.display="block",ju=!0;var{x:t,y:n}=po(e);ad.style.left=t+"px",ad.style.top=n+"px"}},go=function(e,t){for(const n in t)e[n]=null!==t[n]&&"object"==typeof t[n]?go(e[n]||Object.create(null),t[n]):t[n];return e},mo=function(e){return void 0!==e.bubbleIsVisible&&void 0!==e.setBubbleVisible},_o=function(){return bd},vo=function(e){bd=e},bo=function(){return Td},To=function(e){Td=e},Ao=function(e){e=`${e}`.toLowerCase().trim();var t=Ad[e];if(t)return t;if(t="#"===(t="0x"===e.substring(0,2)?"#"+e.substring(2):e)[0]?t:"#"+t,/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=t&&256>t&&0<=n&&256>n)?yo(e,t,n):null},yo=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Eo=function(e){return(e=Ao(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},So=function(e,t,n){let i=0,o=0,r=0;if(0===t)r=o=i=n;else{const a=Math.floor(e/60),s=e/60-a;e=n*(1-t);const l=n*(1-t*s);switch(t=n*(1-t*(1-s)),a){case 1:i=l,o=n,r=e;break;case 2:i=e,o=n,r=t;break;case 3:i=e,o=l,r=n;break;case 4:i=t,o=e,r=n;break;case 5:i=n,o=e,r=l;break;case 6:case 0:i=n,o=t,r=e}}return yo(Math.floor(i),Math.floor(o),Math.floor(r))},Co=function(e,t,n){return(e=Ao(e))&&(t=Ao(t))?(e=Eo(e),t=Eo(t),yo(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2])))):null},wo=function(e){return So(e,bd,255*Td)},xo=function(e,t,n){const i=[];var o=e.split("");o.push("");var r=0;e=[];let a=null;for(let c=0;c<o.length;c++){var s=o[c];if(0===r)if("%"===s)(r=e.join(""))&&i.push(r),e.length=0,r=1;else if(n&&"\n"===s){const t=e.join("");t&&i.push(t),e.length=0,i.push(s)}else e.push(s);else if(1===r)"%"===s?(e.push(s),r=0):t&&"0"<=s&&"9">=s?(r=2,a=s,(s=e.join(""))&&i.push(s),e.length=0):"{"===s?r=3:(e.push("%",s),r=0);else if(2===r)if("0"<=s&&"9">=s)a+=s;else{var l=void 0;i.push(parseInt(null!=(l=a)?l:"",10)),c--,r=0}else 3===r&&(""===s?(e.splice(0,0,"%{"),c--,r=0):"}"!==s?e.push(s):(r=e.join(""),/[A-Z]\w*/i.test(r)&&(s=(s=r.toUpperCase()).startsWith("BKY_")?s.substring(4):null)&&s in La.Msg$$module$build$src$core$msg?"string"==typeof(r=La.Msg$$module$build$src$core$msg[s])?Array.prototype.push.apply(i,xo(r,t,n)):t?i.push(`${r}`):i.push(r):i.push("%{"+r+"}"),r=e.length=0))}for((t=e.join(""))&&i.push(t),l=[],e.length=0,o=0;o<i.length;o++)"string"!=typeof i[o]||n&&"\n"===i[o]?((t=e.join(""))&&l.push(t),e.length=0,l.push(i[o])):e.push(i[o]);return(t=e.join(""))&&l.push(t),e.length=0,l},Mo=function(e){return xo(e,!0,!0)},Ro=function(e){return"string"!=typeof e?e:(e=xo(e,!1,!1)).length?String(e[0]):""},Io=function(e){let t=!0;const n=La.Msg$$module$build$src$core$msg,i=e.match(/%{BKY_[A-Z]\w*}/gi);if(i)for(let o=0;o<i.length;o++)void 0===n[i[o].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+i[o]+" in "+e),t=!1);return t},Do=function(e){const t="string"==typeof e?Ro(e):e;var n=Number(t);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:So(n,_o(),255*bo())};if(n=Ao(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!==t&&(n+=' (from "'+e+'")'),Error(n)},ko=function(e){return void 0!==e.getProcedureModel&&void 0!==e.doProcedureUpdate&&void 0!==e.isProcedureDef},Lo=function(e){return void 0!==e.startPublishing&&void 0!==e.stopPublishing},Oo=function(t,n){e(Ba.FIELD,t,n)},Po=function(e){n(Ba.FIELD,e)},La.fromJson$$module$build$src$core$field_registry=function(e){return Md.fromJsonInternal(e)},No=function(e){const t=a(Ba.FIELD,e.type);if(t){if("function"!=typeof t.fromJson)throw new TypeError("returned Field was not a IRegistrableField");return t.fromJson(e)}return console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},$o=function(e){let t=!1;const n=e.map((([e,n])=>"string"==typeof e?[Ro(e),n]:(t=!0,[null!==e.alt?Object.assign({},e,{alt:Ro(e.alt)}):Object.assign({},e),n])));if(t||2>e.length)return{options:n};var i=n.map((([e])=>e)),o=Gi(i);e=Vi(i,o);const r=Hi(i,o);return!e&&!r||o<=e+r?{options:n}:(o=e?i[0].substring(0,e-1):void 0,i=r?i[0].substr(1-r):void 0,{options:Bo(n,e,r),prefix:o,suffix:i})},Bo=function(e,t,n){return e.map((([e,i])=>[e.substring(t,e.length-n),i]))},Fo=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)?"string"!=typeof i[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+i[1]+" in: ",i)):i[0]&&"string"!=typeof i[0]&&"string"!=typeof i[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+i[0]+" in: ",i)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",i))}if(t)throw TypeError("Found invalid FieldDropdown options.")},La.register$$module$build$src$core$extensions=function(e,t){if("string"!=typeof e||""===e.trim())throw Error('Error: Invalid extension name "'+e+'"');if($d[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof t)throw Error('Error: Extension "'+e+'" must be a function');$d[e]=t},La.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||"object"!=typeof t)throw Error('Error: Mixin "'+e+'" must be a object');La.register$$module$build$src$core$extensions(e,(function(){this.mixin(t)}))},La.registerMutator$$module$build$src$core$extensions=function(e,t,n,i){const o='Error when registering mutator "'+e+'": ';Yo(o,t);const r=jo(t,o);if(n&&"function"!=typeof n)throw Error(o+'Extension "'+e+'" is not a function');La.register$$module$build$src$core$extensions(e,(function(){r&&this.setMutator(new La.MutatorIcon$$module$build$src$core$icons$mutator_icon(i||[],this)),this.mixin(t),n&&n.apply(this)}))},Uo=function(e){Go(e)?delete $d[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Go=function(e){return!!$d[e]},Vo=function(e,t,n){const i=$d[e];if("function"!=typeof i)throw Error('Error: Extension "'+e+'" not found.');let o;if(n?Ho(e,t):o=qo(t),i.apply(t),n)Yo('Error after applying mutator "'+e+'": ',t);else if(!Ko(o,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Ho=function(e,t){if(qo(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Wo=function(e,t){return Xo(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},zo=function(e,t){return Xo(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},jo=function(e,t){return Xo(e.compose,e.decompose,t+" compose/decompose")},Xo=function(e,t,n){if(e&&t){if("function"!=typeof e||"function"!=typeof t)throw Error(n+" must be a function");return!0}if(!e&&!t)return!1;throw Error(n+"Must have both or neither functions")},Yo=function(e,t){const n=Wo(t,e),i=zo(t,e);if(!n&&!i)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");jo(t,e)},qo=function(e){const t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.saveExtraState&&t.push(e.saveExtraState),void 0!==e.loadExtraState&&t.push(e.loadExtraState),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},Ko=function(e,t){if((t=qo(t)).length!==e.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0},Qo=function(e){if("object"!=typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)e();else{const t=setInterval((function(){"complete"===document.readyState&&(clearInterval(t),e())}),10)}},La.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const n=[];return function(){-1===n.indexOf(this.type)&&(Zo(this,e,t),n.push(this.type)),this.setTooltip(function(){const n=String(this.getFieldValue(e));return Ro(t[n])}.bind(this))}},Zo=function(e,t,n){var i=e.getField(t);if(i instanceof Id&&!i.isOptionListDynamic()){i=i.getOptions();for(const[,o]of i)void 0===n[o]&&console.warn(`No tooltip mapping for value ${o} of field ${t} of block type ${e.type}.`)}},La.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip(function(){const n=this.getField(t);return Ro(e).replace("%1",n?n.getText():"")}.bind(this))}},Jo=function(){const e=this.tooltip;this.setTooltip(function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}.bind(this))},er=function(e,t){return" "+e+","+t+" "},tr=function(e,t){return" "+e+t.join("")},nr=function(e,t){return" M "+e+","+t+" "},ir=function(e,t){return" m "+e+","+t+" "},or=function(e,t){return" l "+e+","+t+" "},rr=function(e){return" l"+e.join("")},ar=function(e,t){return" "+e+" "+t+" "},sr=function(e,t,n,i){return e+" "+n+" "+n+" "+t+i},lr=function(t,n){e(Ba.ICON,t.toString(),n)},cr=function(e){n(Ba.ICON,e)},ur=function(e){const t=e.getProcedureMap().getProcedures().filter((e=>!e.getReturnTypes())).map((e=>[e.getName(),e.getParameters().map((e=>e.getName())),!1]));e.getBlocksByType("procedures_defnoreturn",!1).forEach((e=>{!ko(e)&&nt(e)&&t.push(e.getProcedureDef())}));const n=e.getProcedureMap().getProcedures().filter((e=>!!e.getReturnTypes())).map((e=>[e.getName(),e.getParameters().map((e=>e.getName())),!0]));return e.getBlocksByType("procedures_defreturn",!1).forEach((e=>{!ko(e)&&nt(e)&&n.push(e.getProcedureDef())})),t.sort(dr),n.sort(dr),[t,n]},dr=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},La.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||La.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!hr(e,t.workspace,t);){const t=e.match(/^(.*?)(\d+)$/);e=t?t[1]+(parseInt(t[2])+1):e+"2"}return e},hr=function(e,t,n){return!pr(e,t,n)},pr=function(e,t,n){for(const i of t.getAllBlocks(!1))if(i!==n&&nt(i)&&La.Names$$module$build$src$core$names.equals(i.getProcedureDef()[0],e))return!0;n=n&&ko(n)?null==n?void 0:n.getProcedureModel():void 0;for(const i of t.getProcedureMap().getProcedures())if(i!==n&&La.Names$$module$build$src$core$names.equals(i.getName(),e))return!0;return!1},La.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new Cd;e=e.trim();const n=La.findLegalName$$module$build$src$core$procedures(e,t);ko(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(n);const i=this.getValue();if(i!==e&&i!==n)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const o=e[t];o.renameProcedure&&o.renameProcedure(i,n)}return n},fr=function(e){function t(e,t){for(let o=0;o<e.length;o++){var i=e[o][0];const r=e[o][1],a=La.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type",t),a.setAttribute("gap","16");const s=La.createElement$$module$build$src$core$utils$xml("mutation");for(s.setAttribute("name",i),a.appendChild(s),i=0;i<r.length;i++){const e=La.createElement$$module$build$src$core$utils$xml("arg");e.setAttribute("name",r[i]),s.appendChild(e)}n.push(a)}}const n=[];if(Va.procedures_defnoreturn){var i=La.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","procedures_defnoreturn"),i.setAttribute("gap","16");var o=La.createElement$$module$build$src$core$utils$xml("field");o.setAttribute("name","NAME"),o.appendChild(La.createTextNode$$module$build$src$core$utils$xml(La.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),i.appendChild(o),n.push(i)}return Va.procedures_defreturn&&((i=La.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","procedures_defreturn"),i.setAttribute("gap","16"),(o=La.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),o.appendChild(La.createTextNode$$module$build$src$core$utils$xml(La.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),i.appendChild(o),n.push(i)),Va.procedures_ifreturn&&((i=La.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","procedures_ifreturn"),i.setAttribute("gap","16"),n.push(i)),n.length&&n[n.length-1].setAttribute("gap","24"),t((e=ur(e))[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),n},gr=function(e){var t=[],n=e.getBlocksByType("procedures_mutatorarg",!1);for(let r,a=0;r=n[a];a++)t.push(r.getFieldValue("NAME"));n=La.createElement$$module$build$src$core$utils$xml("xml");const i=La.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","procedures_mutatorarg");const o=La.createElement$$module$build$src$core$utils$xml("field");o.setAttribute("name","NAME"),t=lt(La.DEFAULT_ARG$$module$build$src$core$procedures,t),t=La.createTextNode$$module$build$src$core$utils$xml(t),o.appendChild(t),i.appendChild(o),n.appendChild(i),e.updateToolbox(n)},mr=function(e){if(e.type===as&&"mutator"===e.bubbleType&&e.isOpen&&e.blockId){var t=(e=c(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!==t&&"procedures_defreturn"!==t||(e=e.getIcon(La.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),gr(e),e.addChangeListener(_r))}},_r=function(e){e.type!==La.CREATE$$module$build$src$core$events$utils&&e.type!==La.DELETE$$module$build$src$core$events$utils&&e.type!==La.CHANGE$$module$build$src$core$events$utils&&e.type!==Qa||(e=c(e.workspaceId),gr(e))},vr=function(e,t){return t.getAllBlocks(!1).filter((t=>br(t,e)||it(t)&&La.Names$$module$build$src$core$names.equals(t.getProcedureCall(),e)))},br=function(e,t){return ko(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&La.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},La.mutateCallers$$module$build$src$core$procedures=function(e){const t=x();var n=e.getProcedureDef()[0];const i=e.mutationToDom(!0);e=vr(n,e.workspace);for(let r,a=0;r=e[a];a++){n=(n=r.mutationToDom())&&Le(n),r.domToMutation&&r.domToMutation(i);var o=r.mutationToDom();n!==(o=o&&Le(o))&&(w(!1),M(new($(La.CHANGE$$module$build$src$core$events$utils))(r,"mutation",null,n,o)),w(t))}},La.getDefinition$$module$build$src$core$procedures=function(e,t){for(const n of t.getAllBlocks(!1))if(ko(n)&&n.isProcedureDef()&&La.Names$$module$build$src$core$names.equals(n.getProcedureModel().getName(),e)||nt(n)&&La.Names$$module$build$src$core$names.equals(n.getProcedureDef()[0],e))return n;return null},Tr=function(e){return e.isDynamic},Ar=function(e){return void 0!==e.pathDown&&void 0!==e.pathUp},yr=function(e){return void 0!==e.pathLeft&&void 0!==e.pathRight},Er=function(e){let t=e.outputConnection;return(!t||e.previousConnection&&e.previousConnection.isConnected())&&(t=e.previousConnection),t},Sr=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},Cr=function(e,t){let n=null;const i=null==(t=t.outputConnection)?void 0:t.getConnectionChecker();for(let o,r=0;o=e.inputList[r];r++){const e=o.connection;let r;if(e&&null!=(r=i)&&r.canConnect(t,e,!1)){if(n)return null;n=e}}return n},wr=function(e,t){let n;for(;n=Cr(e,t);)if(!(e=n.targetBlock())||e.isShadow())return n;return null},xr=function(t,n){e(Ba.RENDERER,t,n)},Mr=function(e){n(Ba.RENDERER,e)},Rr=function(e,t,n){return(e=new(r(Ba.RENDERER,e))(e)).init(t,n),e},Ir=function(e){ct(e.getTargetWorkspace(),void 0,"String")},Dr=function(e){ct(e.getTargetWorkspace(),void 0,"Number")},kr=function(e){ct(e.getTargetWorkspace(),void 0,"Colour")},Lr=function(e){let t=[],n=document.createElement("button");return n.setAttribute("text",La.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),n=document.createElement("button"),n.setAttribute("text",La.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),n=document.createElement("button"),n.setAttribute("text",La.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",Ir),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Dr),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",kr),e=Or(e),t.concat(e)},Or=function(e){const t=[];if(0<(e=e.getAllVariables()).length){if(Va.variables_set_dynamic){var n=e[e.length-1];const i=La.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","variables_set_dynamic"),i.setAttribute("gap","24"),i.appendChild(mt(n)),t.push(i)}if(Va.variables_get_dynamic){e.sort(ic.compareByName);for(let i,o=0;i=e[o];o++)(n=La.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","variables_get_dynamic"),n.setAttribute("gap","8"),n.appendChild(mt(i)),t.push(n)}}return t},Pr=function(e){return void 0!==e.toCopyData},Nr=function(){Pp.registry.register({name:_p.ESCAPE,preconditionFn:e=>!e.options.readOnly,callback:e=>(e.hideChaff(),!0),keyCodes:[Fd.ESC]})},$r=function(){Pp.registry.register({name:_p.DELETE,preconditionFn(e){const t=g();return!e.options.readOnly&&null!=t&&t.isDeletable()},callback:(e,t)=>(t.preventDefault(),!dd.inProgress()&&(g().checkAndDelete(),!0)),keyCodes:[Fd.DELETE,Fd.BACKSPACE]})},Br=function(){const e=Pp.registry.createSerializedKey(Fd.C,[Fd.CTRL]),t=Pp.registry.createSerializedKey(Fd.C,[Fd.ALT]),n=Pp.registry.createSerializedKey(Fd.C,[Fd.META]);Pp.registry.register({name:_p.COPY,preconditionFn(e){const t=g();return!e.options.readOnly&&!dd.inProgress()&&null!=t&&t.isDeletable()&&t.isMovable()&&Pr(t)},callback:(e,t)=>(t.preventDefault(),e.hideChaff(),!(!(t=g())||!Pr(t)||(Np=t.toCopyData(),$p=e,!Np))),keyCodes:[e,t,n]})},Fr=function(){const e=Pp.registry.createSerializedKey(Fd.X,[Fd.CTRL]),t=Pp.registry.createSerializedKey(Fd.X,[Fd.ALT]),n=Pp.registry.createSerializedKey(Fd.X,[Fd.META]);Pp.registry.register({name:_p.CUT,preconditionFn(e){const t=g();return!e.options.readOnly&&!dd.inProgress()&&null!=t&&t instanceof mp&&t.isDeletable()&&t.isMovable()&&!t.workspace.isFlyout},callback(e){const t=g();return!(!t||!Pr(t)||(Np=t.toCopyData(),$p=e,t.checkAndDelete(),0))},keyCodes:[e,t,n]})},Ur=function(){const e=Pp.registry.createSerializedKey(Fd.V,[Fd.CTRL]),t=Pp.registry.createSerializedKey(Fd.V,[Fd.ALT]),n=Pp.registry.createSerializedKey(Fd.V,[Fd.META]);Pp.registry.register({name:_p.PASTE,preconditionFn:e=>!e.options.readOnly&&!dd.inProgress(),callback:()=>!(!Np||!$p||!kn(Np,$p)),keyCodes:[e,t,n]})},Gr=function(){const e=Pp.registry.createSerializedKey(Fd.Z,[Fd.CTRL]),t=Pp.registry.createSerializedKey(Fd.Z,[Fd.ALT]),n=Pp.registry.createSerializedKey(Fd.Z,[Fd.META]);Pp.registry.register({name:_p.UNDO,preconditionFn:e=>!e.options.readOnly&&!dd.inProgress(),callback:e=>(e.hideChaff(),e.undo(!1),!0),keyCodes:[e,t,n]})},Vr=function(){const e=Pp.registry.createSerializedKey(Fd.Z,[Fd.SHIFT,Fd.CTRL]),t=Pp.registry.createSerializedKey(Fd.Z,[Fd.SHIFT,Fd.ALT]),n=Pp.registry.createSerializedKey(Fd.Z,[Fd.SHIFT,Fd.META]),i=Pp.registry.createSerializedKey(Fd.Y,[Fd.CTRL]);Pp.registry.register({name:_p.REDO,preconditionFn:e=>!dd.inProgress()&&!e.options.readOnly,callback:e=>(e.hideChaff(),e.undo(!0),!0),keyCodes:[e,t,n,i]})},Hr=function(){Nr(),$r(),Br(),Fr(),Ur(),Gr(),Vr()},Wr=function(e){const t={id:e.getId(),name:e.getName(),returnTypes:e.getReturnTypes()};return e.getParameters().length?(t.parameters=e.getParameters().map((e=>zr(e))),t):t},zr=function(e){const t={id:e.getId(),name:e.getName()};return e.getTypes().length?(t.types=e.getTypes(),t):t},jr=function(e,t,n,i){if(e=new e(i,n.name,n.id).setReturnTypes(n.returnTypes),!n.parameters)return e;for(const[o,r]of n.parameters.entries())e.insertParameter(Xr(t,r,i),o);return e},Xr=function(e,t,n){return e=new e(n,t.name,t.id),t.types&&e.setTypes(t.types),e},Yr=function(e){const t=Object.create(null),n=s(Ba.SERIALIZER,!0);for(const i in n){let o;const r=null==(o=n[i])?void 0:o.save(e);r&&(t[i]=r)}return t},qr=function(e,t,{recordUndo:n=!1}={}){var i=s(Ba.SERIALIZER,!0);if(i){i=Object.entries(i).sort(((e,t)=>t[1].priority-e[1].priority));var o=x();w(n),(n=La.getGroup$$module$build$src$core$events$utils())||La.setGroup$$module$build$src$core$events$utils(!0),de(),t instanceof ap&&t.setResizesEnabled(!1);for(const[,e]of i.reverse()){let n;null==(n=e)||n.clear(t)}for(let[n,o]of i.reverse())if(e[n]){let i;null==(i=o)||i.load(e[n],t)}t instanceof ap&&t.setResizesEnabled(!0),he(),M(new($(gs))(t)),La.setGroup$$module$build$src$core$events$utils(n),w(o)}},Kr=function(e,t,n){const i=n.getBoundingRectangle(),o=i.right-i.left,r=di(t.top,i.top,t.top+t.height-(i.bottom-i.top))-i.top;let a=t.left;return t=t.left+t.width-o,e.RTL?a=Math.min(t,a):t=Math.max(a,t),!(!(e=di(a,i.left,t)-i.left)&&!r||(n.moveBy(e,r,["inbounds"]),0))},Qr=function(e){return t=>{var n,i=e.getMetricsManager();if(i.hasFixedEdges()&&!e.isDragging())if(-1!==ms.indexOf(null!=(n=t.type)?n:"")){n=i.getScrollMetrics(!0);const o=Zr(e,t);o&&(i=La.getGroup$$module$build$src$core$events$utils()||!1,La.setGroup$$module$build$src$core$events$utils(t.group),Kr(e,n,o)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),La.setGroup$$module$build$src$core$events$utils(i))}else t.type===us&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Jr(e)}},Zr=function(e,t){let n=null;switch(t.type){case La.CREATE$$module$build$src$core$events$utils:case La.MOVE$$module$build$src$core$events$utils:(n=e.getBlockById(t.blockId))&&(n=n.getRootBlock());break;case ds:case fs:n=e.getCommentById(t.commentId)}return n},Jr=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var n=e.getTopBoundedElements();for(let i,o=0;i=n[o];o++)Kr(e,t,i)}},ea=function(e,t){const n=[];for(const i of e.getIcons())mo(i)&&!i.bubbleIsVisible()||(n.push({location:t,icon:i}),i.onLocationChange(t));for(const i of e.getChildren(!1))n.push(...ea(i,ll.sum(t,i.relativeCoords)));return n},ta=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.UNDO,preconditionFn:e=>0<e.workspace.getUndoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!1)},scopeType:fu.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},na=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.REDO,preconditionFn:e=>0<e.workspace.getRedoStack().length?"enabled":"disabled",callback(e){e.workspace.undo(!0)},scopeType:fu.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},ia=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.CLEAN_UP,preconditionFn:e=>e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden",callback(e){e.workspace.cleanUp()},scopeType:fu.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},oa=function(e,t){function n(t){o--,t.setCollapsed(e),0===o&&La.setGroup$$module$build$src$core$events$utils(!1)}let i=0,o=0;La.setGroup$$module$build$src$core$events$utils(!0);for(let r=0;r<t.length;r++){let e=t[r];for(;e;)o++,setTimeout(n.bind(null,e),i),e=e.getNextBlock(),i+=10}},ra=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.COLLAPSE_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(!n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){oa(!0,e.workspace.getTopBlocks(!0))},scopeType:fu.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},aa=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.EXPAND_ALL,preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let n=e[t];for(;n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}}return"disabled"}return"hidden"},callback(e){oa(!1,e.workspace.getTopBlocks(!0))},scopeType:fu.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},sa=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let n=0;n<e.length;n++)sa(e[n],t)}},la=function(e){const t=[];e=e.getTopBlocks(!0);for(let n=0;n<e.length;n++)sa(e[n],t);return t},ca=function(e,t){t?La.setGroup$$module$build$src$core$events$utils(t):(La.setGroup$$module$build$src$core$events$utils(!0),t=La.getGroup$$module$build$src$core$events$utils());const n=e.shift();n&&(n.isDeadOrDying()?ca(e,t):(n.dispose(!1,!0),setTimeout(ca,10,e,t))),La.setGroup$$module$build$src$core$events$utils(!1)},ua=function(){fu.registry.register({displayText:e=>e.workspace?1===(e=la(e.workspace).length)?La.Msg$$module$build$src$core$msg.DELETE_BLOCK:La.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`):"",preconditionFn:e=>e.workspace&&0<la(e.workspace).length?"enabled":"disabled",callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=la(e.workspace);2>t.length?ca(t):Ke(La.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),(function(e){e&&ca(t)}))}},scopeType:fu.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},da=function(){ta(),na(),ia(),ra(),aa(),ua()},ha=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden",callback(e){if(e.block){var t=e.block.toCopyData();t&&kn(t,e.block.workspace)}},scopeType:fu.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},pa=function(){fu.registry.register({displayText:e=>e.block.hasIcon(qd.TYPE)?La.Msg$$module$build$src$core$msg.REMOVE_COMMENT:La.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden",callback(e){(e=e.block).hasIcon(qd.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:fu.ScopeType.BLOCK,id:"blockComment",weight:2})},fa=function(){fu.registry.register({displayText:e=>e.block.getInputsInline()?La.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:La.Msg$$module$build$src$core$msg.INLINE_INPUTS,preconditionFn(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof mf||e.inputList[t]instanceof mf))return"enabled";return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:fu.ScopeType.BLOCK,id:"blockInline",weight:3})},ga=function(){fu.registry.register({displayText:e=>e.block.isCollapsed()?La.Msg$$module$build$src$core$msg.EXPAND_BLOCK:La.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden",callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:fu.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},ma=function(){fu.registry.register({displayText:e=>e.block.isEnabled()?La.Msg$$module$build$src$core$msg.DISABLE_BLOCK:La.Msg$$module$build$src$core$msg.ENABLE_BLOCK,preconditionFn:e=>!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden",callback(e){e=e.block;const t=La.getGroup$$module$build$src$core$events$utils();t||La.setGroup$$module$build$src$core$events$utils(!0),e.setEnabled(!e.isEnabled()),La.setGroup$$module$build$src$core$events$utils(t)},scopeType:fu.ScopeType.BLOCK,id:"blockDisable",weight:5})},_a=function(){fu.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),1===e?La.Msg$$module$build$src$core$msg.DELETE_BLOCK:La.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn:e=>!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden",callback(e){e.block&&e.block.checkAndDelete()},scopeType:fu.ScopeType.BLOCK,id:"blockDelete",weight:6})},va=function(){fu.registry.register({displayText:()=>La.Msg$$module$build$src$core$msg.HELP,preconditionFn:e=>("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden",callback(e){e.block.showHelp()},scopeType:fu.ScopeType.BLOCK,id:"blockHelp",weight:7})},ba=function(){ha(),pa(),fa(),ga(),ma(),_a(),va()},Ta=function(){da(),ba()},Aa=function(e,t){var n=null;let i;if(n="string"==typeof e?document.getElementById(e)||document.querySelector(e):e,!document.contains(n)&&document!==(null==(i=n)?void 0:i.ownerDocument))throw Error("Error: container is not in current document");e=new _d(t||{}),(t=document.createElement("div")).className="injectionDiv",t.tabIndex=0,$n(t,Qc.LABEL,La.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),n.appendChild(t),n=ya(t,e);const o=Ea(t,n,e);return Sa(o),f(o),b(o),t.addEventListener("focusin",(function(){f(o)})),o},ya=function(e,t){e.setAttribute("dir","LTR"),ee(t.hasCss,t.pathToMedia),e=ne(bl.SVG,{xmlns:hl,"xmlns:html":pl,"xmlns:xlink":fl,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const n=ne(bl.DEFS,{},e),i=String(Math.random()).substring(2);return t.gridPattern=hd.createDom(i,t.gridOptions,n),e},Ea=function(e,t,n){n.parentWorkspace=null;const i=(n=new ap(n)).options;n.scale=i.zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground",e));var o=n.getRenderer().getClassName();return o&&ie(e,o),(o=n.getTheme().getClassName())&&ie(e,o),!i.hasCategories&&i.languageTree&&(e=n.addFlyout(bl.SVG),le(e,t)),i.hasTrashcan&&n.addTrashcan(),i.zoomOptions&&i.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(Qr(n)),b(n),Un(),hi(),eo(),n},Sa=function(e){const t=e.options;var n=e.getParentSvg();if(z(n.parentNode,"contextmenu",null,(function(e){Y(e)||e.preventDefault()})),n=z(window,"resize",null,(function(){so(),e.hideComponents(!0),Li(),Kn(),b(e),Jr(e)})),e.setResizeHandlerWrapper(n),wa(),t.languageTree){n=e.getToolbox();const i=e.getFlyout(!0);n?n.init():i&&(i.init(e),i.show(t.languageTree),"function"==typeof i.scrollToStart&&i.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new zp(e,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.horizontal,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&xa(t.pathToMedia,e)},Ca=function(e){const t=p();t&&!(Y(e)||t.rendered&&!t.isVisible())&&Pp.registry.onKeyDown(t,e)},wa=function(){Ff||(z(document,"scroll",null,(function(){const e=u();for(let t,n=0;t=e[n];n++)t instanceof ap&&t.updateInverseScreenCTM()})),z(document,"keydown",null,Ca),j(document,"touchend",null,U),j(document,"touchcancel",null,U),Ys&&z(window,"orientationchange",document,(function(){b(p())}))),Ff=!0},xa=function(e,t){function n(){for(;o.length;){const e=o.pop();e&&X(e)}i.preload()}const i=t.getAudioManager();i.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),i.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),i.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const o=[];o.push(z(document,"pointermove",null,n,!0)),o.push(z(document,"touchstart",null,n,!0))},Ma=function(e){return void 0!==e.getType&&void 0!==e.initView&&void 0!==e.dispose&&void 0!==e.getWeight&&void 0!==e.getSize&&void 0!==e.applyColour&&void 0!==e.hideForInsertionMarker&&void 0!==e.updateEditable&&void 0!==e.updateCollapsed&&void 0!==e.isShownWhenCollapsed&&void 0!==e.setOffsetInBlock&&void 0!==e.onLocationChange&&void 0!==e.onClick},Ra=function(e){return void 0!==e.paste},Ia=function(e){return e.isSelectable()},Da=function(e){p().hideChaff(e)},(ka=ka||{}).scope={},ka.ASSUME_ES5=!1,ka.ASSUME_NO_NATIVE_MAP=!1,ka.ASSUME_NO_NATIVE_SET=!1,ka.SIMPLE_FROUND_POLYFILL=!1,ka.ISOLATE_POLYFILLS=!1,ka.FORCE_POLYFILL_PROMISE=!1,ka.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,ka.defineProperty=ka.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},ka.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof commonjsGlobal&&commonjsGlobal];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},ka.global=ka.getGlobal(this),ka.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),ka.TRUST_ES6_POLYFILLS=!ka.ISOLATE_POLYFILLS||ka.IS_SYMBOL_NATIVE,ka.polyfills={},ka.propertyToPolyfillSymbol={},ka.POLYFILL_PREFIX="$jscp$",ka.polyfill=function(e,t,n,i){t&&(ka.ISOLATE_POLYFILLS?ka.polyfillIsolated(e,t,n,i):ka.polyfillUnisolated(e,t,n,i))},ka.polyfillUnisolated=function(e,t,n,i){for(n=ka.global,e=e.split("."),i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))return;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&ka.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},ka.polyfillIsolated=function(e,t,n,i){var o=e.split(".");e=1===o.length,i=o[0],i=!e&&i in ka.polyfills?ka.polyfills:ka.global;for(var r=0;r<o.length-1;r++){var a=o[r];if(!(a in i))return;i=i[a]}o=o[o.length-1],null!=(t=t(n=ka.IS_SYMBOL_NATIVE&&"es6"===n?i[o]:null))&&(e?ka.defineProperty(ka.polyfills,o,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===ka.propertyToPolyfillSymbol[o]&&(n=1e9*Math.random()>>>0,ka.propertyToPolyfillSymbol[o]=ka.IS_SYMBOL_NATIVE?ka.global.Symbol(o):ka.POLYFILL_PREFIX+n+"$"+o),ka.defineProperty(i,ka.propertyToPolyfillSymbol[o],{configurable:!0,writable:!0,value:t})))},ka.polyfill("globalThis",(function(e){return e||ka.global}),"es_2020","es3"),ka.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},ka.arrayIterator=function(e){return{next:ka.arrayIteratorImpl(e)}},ka.initSymbol=function(){},ka.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},ka.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,i=!1,o={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o},ka.polyfill("Array.prototype.values",(function(e){return e||function(){return ka.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),ka.polyfill("Array.prototype.flat",(function(e){return e||function(e){e=void 0===e?1:e;var t=[];return Array.prototype.forEach.call(this,(function(n){Array.isArray(n)&&0<e?(n=Array.prototype.flat.call(n,e-1),t.push.apply(t,n)):t.push(n)})),t}}),"es9","es5"),ka.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ka.polyfill("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)ka.owns(e,t)&&n.push([t,e[t]]);return n}}),"es8","es3"),ka.polyfill("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)ka.owns(e,t)&&n.push(e[t]);return n}}),"es8","es3");var Oa=Object.create(null),Pa={typeMap:Oa},Na=Object.create(null),$a="default",Ba=class{constructor(e){this.name=e}toString(){return this.name}};Ba.CONNECTION_CHECKER=new Ba("connectionChecker"),Ba.CONNECTION_PREVIEWER=new Ba("connectionPreviewer"),Ba.CURSOR=new Ba("cursor"),Ba.EVENT=new Ba("event"),Ba.FIELD=new Ba("field"),Ba.INPUT=new Ba("input"),Ba.RENDERER=new Ba("renderer"),Ba.TOOLBOX=new Ba("toolbox"),Ba.THEME=new Ba("theme"),Ba.TOOLBOX_ITEM=new Ba("toolboxItem"),Ba.FLYOUTS_VERTICAL_TOOLBOX=new Ba("flyoutsVerticalToolbox"),Ba.FLYOUTS_HORIZONTAL_TOOLBOX=new Ba("flyoutsHorizontalToolbox"),Ba.METRICS_MANAGER=new Ba("metricsManager"),Ba.BLOCK_DRAGGER=new Ba("blockDragger"),Ba.SERIALIZER=new Ba("serializer"),Ba.ICON=new Ba("icon"),Ba.PASTER=new Ba("paster");var Fa={DEFAULT:$a,TEST_ONLY:Pa};Fa.Type=Ba,Fa.getAllItems=s,Fa.getClass=r,Fa.getClassFromOptions=l,Fa.getObject=a,Fa.hasItem=o,Fa.register=e,Fa.unregister=n;var Ua,Ga,Va=Object.create(null),Ha=Object.create(null),Wa=null,za=[],ja={defineBlocksWithJsonArrayInternal:E},Xa={TEST_ONLY:ja};Xa.createBlockDefinitionsFromJsonArray=La.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Xa.defineBlocks=La.defineBlocks$$module$build$src$core$common,Xa.defineBlocksWithJsonArray=y,Xa.draggingConnections=za,Xa.getAllWorkspaces=u,Xa.getBlockTypeCounts=T,Xa.getMainWorkspace=p,Xa.getParentContainer=_,Xa.getSelected=g,Xa.getWorkspaceById=c,Xa.registerWorkspace=d,Xa.setMainWorkspace=f,Xa.setParentContainer=v,Xa.setSelected=m,Xa.svgResize=b,Xa.unregisterWorkpace=h;var Ya,qa,Ka,Qa,Za,Ja,es,ts,ns,is,os,rs,as,ss,ls,cs,us,ds,hs,ps,fs,gs,ms,_s,vs,bs,Ts="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",As={genUid:()=>{const e=Ts.length,t=[];for(let n=0;20>n;n++)t[n]=Ts.charAt(Math.random()*e);return t.join("")}},ys=0,Es={TEST_ONLY:As};Es.genUid=C,Es.getNextUniqueId=S,Ya="",qa=!0,Ka=0,La.CREATE$$module$build$src$core$events$utils="create",La.CREATE$$module$build$src$core$events$utils,La.DELETE$$module$build$src$core$events$utils="delete",La.DELETE$$module$build$src$core$events$utils,La.CHANGE$$module$build$src$core$events$utils="change",La.CHANGE$$module$build$src$core$events$utils,Qa="block_field_intermediate_change",La.MOVE$$module$build$src$core$events$utils="move",La.MOVE$$module$build$src$core$events$utils,Za="var_create",Ja="var_delete",es="var_rename",ts="ui",ns="drag",is="selected",os="click",rs="marker_move",as="bubble_open",ss="trashcan_open",ls="toolbox_item_select",cs="theme_change",us="viewport_change",ds="comment_create",hs="comment_delete",ps="comment_change",fs="comment_move",gs="finished_loading",ms=[La.CREATE$$module$build$src$core$events$utils,La.MOVE$$module$build$src$core$events$utils,ds,fs],vs={FIRE_QUEUE:_s=[],fireNow:I,fireInternal:R,setGroupInternal:O},(bs={BLOCK_CHANGE:La.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:La.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:La.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:ns,BLOCK_FIELD_INTERMEDIATE_CHANGE:Qa,BLOCK_MOVE:La.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:as,BUMP_EVENTS:ms,CHANGE:La.CHANGE$$module$build$src$core$events$utils,CLICK:os,COMMENT_CHANGE:ps,COMMENT_CREATE:ds,COMMENT_DELETE:hs,COMMENT_MOVE:fs,CREATE:La.CREATE$$module$build$src$core$events$utils,DELETE:La.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:gs,MARKER_MOVE:rs,MOVE:La.MOVE$$module$build$src$core$events$utils,SELECTED:is,TEST_ONLY:vs,THEME_CHANGE:cs,TOOLBOX_ITEM_SELECT:ls,TRASHCAN_OPEN:ss,UI:ts,VAR_CREATE:Za,VAR_DELETE:Ja,VAR_RENAME:es,VIEWPORT_CHANGE:us}).clearPendingUndo=k,bs.disable=La.disable$$module$build$src$core$events$utils,bs.disableOrphans=B,bs.enable=La.enable$$module$build$src$core$events$utils,bs.filter=D,bs.fire=M,bs.fromJson=N,bs.get=$,bs.getDescendantIds=P,bs.getGroup=La.getGroup$$module$build$src$core$events$utils,bs.getRecordUndo=x,bs.isEnabled=L,bs.setGroup=La.setGroup$$module$build$src$core$events$utils,bs.setRecordUndo=w;var Ss,Cs,ws=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=La.getGroup$$module$build$src$core$events$utils(),this.recordUndo=x()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,n){return n.isBlank=!1,n.group=e.group||"",n.workspaceId=t.id,n}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=c(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},xs=class extends ws{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=void 0===e,this.workspaceId=e||""}},Ms=class extends xs{constructor(e,t,n){null===(t=e?e.workspace.id:t)&&(t=void 0),super(t),this.type=os,this.blockId=e?e.id:void 0,this.targetType=n}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Ms)).targetType=e.targetType,t.blockId=e.blockId,t}};(Cs=Ss||(Ss={})).BLOCK="block",Cs.WORKSPACE="workspace",Cs.ZOOM_CONTROLS="zoom_controls",e(Ba.EVENT,os,Ms);var Rs,Is,Ds,ks,Ls,Os,Ps,Ns,$s,Bs,Fs=750,Us="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Gs=null,Vs={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Hs=0,Ws={TOUCH_ENABLED:Us,TOUCH_MAP:Vs};Ws.checkTouchIdentifier=W,Ws.clearTouchIdentifier=G,Ws.getTouchIdentifierFromEvent=H,Ws.longStart=F,Ws.longStop=U,Ws.shouldHandleEvent=V,function(e){function t(e){return-1!==n.indexOf(e.toUpperCase())}const n=(Rs=e).toUpperCase();Is=t("JavaFX"),Ds=t("WebKit"),ks=t("Gecko")&&!Ds,Ls=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Os=t("iPad")||t("Macintosh")&&0<e,Ps=t("iPhone")&&!Os,Ns=t("Macintosh"),$s=Os||Ls&&!t("Mobile")||t("Silk"),Bs=!$s&&(Ps||Ls)}(globalThis.navigator&&globalThis.navigator.userAgent||"");var zs=Is,js=ks,Xs=Ls,Ys=Os,qs=Ps,Ks=Ns,Qs=Bs,Zs={ANDROID:Xs,GECKO:js,IPAD:Ys,IPHONE:qs,JavaFx:zs,MAC:Ks,MOBILE:Qs,raw:Rs},Js=40,el=125,tl={};tl.bind=j,tl.conditionalBind=z,tl.getScrollDeltaPixels=Q,tl.isRightButton=q,tl.isTargetInput=Y,tl.mouseToSvg=K,tl.unbind=X;var nl={};nl.removeElem=Z;var il=class{constructor(e){this.name_=e}toString(){return this.name_}};il.POSITIONABLE=new il("positionable"),il.DRAG_TARGET=new il("drag_target"),il.DELETE_AREA=new il("delete_area"),il.AUTOHIDEABLE=new il("autohideable");var ol=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const n=e.component.id;var i;if(!t&&this.componentData.has(n))throw Error('Plugin "'+n+'" with capabilities "'+(null==(i=this.componentData.get(n))?void 0:i.capabilities)+'" already added.');for(this.componentData.set(n,e),t=[],i=0;i<e.capabilities.length;i++){const o=String(e.capabilities[i]).toLowerCase();if(t.push(o),this.capabilityToComponentIds.has(o)){let e;null==(e=this.capabilityToComponentIds.get(o))||e.push(n)}else this.capabilityToComponentIds.set(o,[n])}this.componentData.get(n).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let n=0;n<t.capabilities.length;n++){const i=String(t.capabilities[n]).toLowerCase();Z(this.capabilityToComponentIds.get(i),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');var n,i;this.hasCapability(e,t)?console.warn('Plugin "'+e+'already has capability "'+t+'"'):(t=`${t}`.toLowerCase(),null==(n=this.componentData.get(e))||n.capabilities.push(t),null==(i=this.capabilityToComponentIds.get(t))||i.push(e))}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),Z(this.componentData.get(e).capabilities,t),Z(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+"doesn't have capability \""+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&-1!==this.componentData.get(e).capabilities.indexOf(t)}getComponent(e){let t;return null==(t=this.componentData.get(e))?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),!(e=this.capabilityToComponentIds.get(e)))return[];const n=[];if(t){const t=[];e.forEach((e=>{t.push(this.componentData.get(e))})),t.sort((function(e,t){return e.weight-t.weight})),t.forEach((function(e){n.push(e.component)}))}else e.forEach((e=>{n.push(this.componentData.get(e).component)}));return n}};ol.Capability=il;var rl=!1,al='\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  /* @todo: spec for maximum height. */\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n.blocklyDragging {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don\'t allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Remove the increase and decrease arrows on the field number editor */\ninput.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,\ninput.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=number] {\n  -moz-appearance: textfield;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n\n.blocklyBlockDragSurface {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 80;\n  pointer-events: none;\n}\n',sl={};sl.inject=ee,sl.register=J;var ll=class{constructor(e,t){this.x=e,this.y=t}clone(){return new ll(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t||!(!e||!t)&&e.x===t.x&&e.y===t.y}static distance(e,t){const n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new ll(e.x-t.x,e.y-t.y)}static sum(e,t){return new ll(e.x+t.x,e.y+t.y)}},cl=new Set,ul={};ul.warn=te;var dl,hl="http://www.w3.org/2000/svg",pl="http://www.w3.org/1999/xhtml",fl="http://www.w3.org/1999/xlink";!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"}(dl||(dl={}));var gl=null,ml=0,_l=null,vl={HTML_NS:pl};vl.NodeType=dl,vl.SVG_NS=hl,vl.XLINK_NS=fl,vl.addClass=ie,vl.containsNode=ce,vl.createSvgElement=ne,vl.getFastTextWidth=fe,vl.getFastTextWidthWithSizeString=ge,vl.getTextWidth=pe,vl.hasClass=ae,vl.insertAfter=le,vl.measureFontMetrics=me,vl.removeClass=re,vl.removeClasses=oe,vl.removeNode=se,vl.setCssTransform=ue,vl.startTextWidthCache=de,vl.stopTextWidthCache=he;var bl=class{constructor(e){this.tagName=e}toString(){return this.tagName}};bl.ANIMATE=new bl("animate"),bl.CIRCLE=new bl("circle"),bl.CLIPPATH=new bl("clipPath"),bl.DEFS=new bl("defs"),bl.FECOMPOSITE=new bl("feComposite"),bl.FECOMPONENTTRANSFER=new bl("feComponentTransfer"),bl.FEFLOOD=new bl("feFlood"),bl.FEFUNCA=new bl("feFuncA"),bl.FEGAUSSIANBLUR=new bl("feGaussianBlur"),bl.FEPOINTLIGHT=new bl("fePointLight"),bl.FESPECULARLIGHTING=new bl("feSpecularLighting"),bl.FILTER=new bl("filter"),bl.FOREIGNOBJECT=new bl("foreignObject"),bl.G=new bl("g"),bl.IMAGE=new bl("image"),bl.LINE=new bl("line"),bl.PATH=new bl("path"),bl.PATTERN=new bl("pattern"),bl.POLYGON=new bl("polygon"),bl.RECT=new bl("rect"),bl.SVG=new bl("svg"),bl.TEXT=new bl("text"),bl.TSPAN=new bl("tspan");var Tl=class{constructor(e,t,n,i){this.top=e,this.bottom=t,this.left=n,this.right=i}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)}},Al=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t||!(!e||!t)&&e.width===t.width&&e.height===t.height}},yl={getSizeInternal:ve},El={TEST_ONLY:yl};El.getBorderBox=Ee,El.getComputedStyle=Te,El.getContainerOffsetToScrollInto=Ce,El.getPageOffset=Ae,El.getSize=_e,El.getViewportPageOffset=ye,El.scrollIntoContainerView=Se;var Sl=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Cl=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,wl={TEST_ONLY:{XY_REGEX:Sl,XY_STYLE_REGEX:Cl}};wl.getDocumentScroll=Re,wl.getInjectionDivXY=xe,wl.getRelativeXY=we,wl.getViewportBBox=Me,wl.screenToWsCoordinates=Ie,wl.wsToScreenCoordinates=De;var xl=class{constructor(e,t,n,i,o){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new ll(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new ll(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=n||!1,this.margin=void 0!==o?o:xl.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),i&&(e+=" "+i),this.outerSvg=ne(bl.SVG,{class:e}),i=ne(bl.G,{},this.outerSvg),this.svgBackground=ne(bl.RECT,{class:"blocklyScrollbarBackground"},i),e=Math.floor((xl.scrollbarThickness-5)/2),this.svgHandle=ne(bl.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},i),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),le(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=z(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=z(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=xl.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),X(this.onMouseDownBarWrapper_),X(this.onMouseDownHandleWrapper_),se(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,ue(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){(e||(e=this.workspace.getMetrics()))&&(this.oldHostMetrics&&xl.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics()))}requiresViewResize(e){return!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-2*this.margin;this.pair&&(t-=xl.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=xl.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-xl.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var n=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-2*this.margin;this.pair&&(t-=xl.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-xl.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var n=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*n,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=n/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),G(),this.cleanUp(),q(e))e.stopPropagation();else{var t=K(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var n=xe(this.svgHandle);n=this.horizontal?n.x:n.y;var i=this.handlePosition,o=.95*this.handleLength;t<=n?i-=o:t>=n+this.handleLength&&(i+=o),this.setHandlePosition(this.constrainHandlePosition(i)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),q(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=z(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=z(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){G(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(X(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(X(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||void 0===t)&&this.updateMetrics()}setOrigin(e,t){this.origin=new ll(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};xl.scrollbarThickness=Us?25:15,xl.DEFAULT_SCROLLBAR_MARGIN=.5;var Ml={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Rl={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Il,DOMParser:Dl,XMLSerializer:kl}=globalThis;Dl&&(Ml=new Dl),kl&&(Rl=new kl);var Ll="https://developers.google.com/blockly/xml",Ol=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Pl={NAME_SPACE:Ll};Pl.createElement=La.createElement$$module$build$src$core$utils$xml,Pl.createTextNode=La.createTextNode$$module$build$src$core$utils$xml,Pl.domToText=Le,Pl.injectDependencies=ke,Pl.textToDom=La.textToDom$$module$build$src$core$utils$xml;var Nl,$l="categoryToolbox",Bl="flyoutToolbox";!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(Nl||(Nl={}));var Fl,Ul,Gl,Vl={hasCategoriesInternal:Fe},Hl={};Hl.Position=Nl,Hl.TEST_ONLY=Vl,Hl.convertFlyoutDefToJsonArray=$e,Hl.convertToolboxDefToJson=Pe,Hl.hasCategories=Be,Hl.isCategoryCollapsible=Ue,Hl.parseToolboxTree=We,function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(Fl||(Fl={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(Ul||(Ul={})),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(Gl||(Gl={}));var Wl={};Wl.bumpDirection=Gl,Wl.bumpPositionRect=Xe,Wl.getCornerOppositeToolbox=je,Wl.getStartPositionRect=ze,Wl.horizontalPosition=Ul,Wl.verticalPosition=Fl;var zl={width:96,height:124,url:"sprites.png"},jl=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=ne(bl.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[ol.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&se(this.svgGroup);for(const e of this.boundEvents)X(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new Tl(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var n,i=je(this.workspace,e),o=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(o+=this.LARGE_SPACING+this.HEIGHT),e=ze(i,new Al(this.WIDTH,o),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),i=i.vertical,t=Xe(e,this.MARGIN_VERTICAL,i===Fl.TOP?Gl.DOWN:Gl.UP,t),i===Fl.TOP){var r,a=this.SMALL_SPACING+this.HEIGHT;null==(r=this.zoomInGroup)||r.setAttribute("transform","translate(0, "+a+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING+this.HEIGHT)+")")}else{let e;r=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0,null==(e=this.zoomInGroup)||e.setAttribute("transform","translate(0, "+r+")"),r=r+this.SMALL_SPACING+this.HEIGHT,null==(a=this.zoomOutGroup)||a.setAttribute("transform","translate(0, "+r+")")}this.top=t.top,this.left=t.left,null==(n=this.svgGroup)||n.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=ne(bl.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=ne(bl.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);ne(bl.RECT,{width:32,height:32},t),ne(bl.IMAGE,{width:zl.width,height:zl.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(fl,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.boundEvents.push(z(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=ne(bl.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=ne(bl.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);ne(bl.RECT,{width:32,height:32},t),ne(bl.IMAGE,{width:zl.width,height:zl.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(fl,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.boundEvents.push(z(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),G(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=ne(bl.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=ne(bl.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);ne(bl.RECT,{width:32,height:32},t),ne(bl.IMAGE,{width:zl.width,height:zl.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(fl,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.boundEvents.push(z(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),G(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new($(os))(null,this.workspace.id,"zoom_controls");M(e)}};J("\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n");var Xl=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Xl.MUTATOR=new Xl("mutator"),Xl.WARNING=new Xl("warning"),Xl.COMMENT=new Xl("comment"),function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"}(La.inputTypes$$module$build$src$core$inputs$input_types||(La.inputTypes$$module$build$src$core$inputs$input_types={})),La.inputTypes$$module$build$src$core$inputs$input_types;var Yl,ql,Kl=function(e,t){window.alert(e),t&&t()},Ql=function(e,t){t(window.confirm(e))},Zl=function(e,t,n){n(window.prompt(e,t))},Jl={confirmInternal:Qe},ec={TEST_ONLY:Jl};ec.alert=Ye,ec.confirm=Ke,ec.prompt=Je,ec.setAlert=qe,ec.setConfirm=Ze,ec.setPrompt=et,La.Msg$$module$build$src$core$msg=Object.create(null),Yl=function(e){Object.keys(e).forEach((function(t){La.Msg$$module$build$src$core$msg[t]=e[t]}))},ql={Msg:La.Msg$$module$build$src$core$msg,setLocale:Yl};var tc=class extends ws{constructor(e){super(),this.isBlank=void 0===e,e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new tc)).varId=e.varId,t}},nc=class extends tc{constructor(e){super(e),this.type=Za,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new nc)).varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)}};e(Ba.EVENT,Za,nc);var ic=class{constructor(e,t,n,i){this.workspace=e,this.name=t,this.type=n||"",this.id_=i||C()}getId(){return this.id_}static compareByName(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}},oc="VARIABLE",rc="ijkmnopqrstuvwxyzabcdefgh",ac={generateUniqueNameInternal:st},sc={CATEGORY_NAME:oc,TEST_ONLY:ac,VAR_LETTER_OPTIONS:rc};sc.allDeveloperVariables=La.allDeveloperVariables$$module$build$src$core$variables,sc.allUsedVarModels=La.allUsedVarModels$$module$build$src$core$variables,sc.createVariableButtonHandler=ct,sc.flyoutCategory=ot,sc.flyoutCategoryBlocks=rt,sc.generateUniqueName=at,sc.generateUniqueNameFromOptions=lt,sc.generateVariableFieldDom=mt,sc.getAddedVariables=vt,sc.getOrCreateVariablePackage=La.getOrCreateVariablePackage$$module$build$src$core$variables,sc.getVariable=La.getVariable$$module$build$src$core$variables,sc.nameUsedWithAnyType=ht,sc.nameUsedWithConflictingParam=pt,sc.promptName=ut,sc.renameVariable=La.renameVariable$$module$build$src$core$variables;var lc=class{constructor(e,t,n,i,o){this.workspace=e,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=o&&!e.getCommentById(o)?o:C(),e.addTopComment(this),this.xy_=new ll(0,0),this.height_=n,this.width_=i,this.RTL=e.RTL,this.content_=t,lc.fireCreateEvent(this)}dispose(){this.disposed_||(L()&&M(new($(hs))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(e){this.height_=e}getWidth(){return this.width_}setWidth(e){this.width_=e}getRelativeToSurfaceXY(){return new ll(this.xy_.x,this.xy_.y)}moveBy(e,t){const n=new($(fs))(this);this.xy_.translate(e,t),n.recordNew(),M(n)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(e){this.movable=e}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(e){this.editable=e}getContent(){return this.content_}setContent(e){this.content_!==e&&(M(new($(ps))(this,this.content_,e)),this.content_=e)}toXmlWithXY(e){return(e=this.toXml(e)).setAttribute("x",String(Math.round(this.xy_.x))),e.setAttribute("y",String(Math.round(this.xy_.y))),e.setAttribute("h",String(this.height_)),e.setAttribute("w",String(this.width_)),e}toXml(e){const t=La.createElement$$module$build$src$core$utils$xml("comment");return e||(t.id=this.id),t.textContent=this.getContent(),t}static fireCreateEvent(e){if(L()){const t=La.getGroup$$module$build$src$core$events$utils();t||La.setGroup$$module$build$src$core$events$utils(!0);try{M(new($(ds))(e))}finally{La.setGroup$$module$build$src$core$events$utils(t)}}}static fromXml(e,t){var n=lc.parseAttributes(e);return t=new lc(t,n.content,n.h,n.w,n.id),n=e.getAttribute("x"),e=e.getAttribute("y"),n=n?parseInt(n,10):NaN,e=e?parseInt(e,10):NaN,isNaN(n)||isNaN(e)||t.moveBy(n,e),lc.fireCreateEvent(t),t}static parseAttributes(e){const t=e.getAttribute("h"),n=e.getAttribute("w"),i=e.getAttribute("x"),o=e.getAttribute("y"),r=e.getAttribute("id");if(!r)throw Error("No ID present in XML comment definition.");let a;return{id:r,h:t?parseInt(t):100,w:n?parseInt(n):100,x:i?parseInt(i):NaN,y:o?parseInt(o):NaN,content:null!=(a=e.textContent)?a:""}}},cc=class extends xs{constructor(e,t,n){super(n),this.type=is,this.oldElementId=null!=e?e:void 0,this.newElementId=null!=t?t:void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new cc)).oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};e(Ba.EVENT,is,cc);var uc={};uc.register=bt,uc.unregister=Tt;var dc=class{paste(e,t,n){const i=e.commentState;if(n)i.setAttribute("x",`${n.x}`),i.setAttribute("y",`${n.y}`);else{var o;let e;n=parseInt(null!=(o=i.getAttribute("x"))?o:"0")+50,o=parseInt(null!=(e=i.getAttribute("y"))?e:"0")+50,i.setAttribute("x",`${n}`),i.setAttribute("y",`${o}`)}return gc.fromXmlRendered(e.commentState,t)}};dc.TYPE="workspace-comment",bt(dc.TYPE,new dc);var hc=8,pc=3,fc=2,gc=class extends lc{constructor(e,t,n,i,o){super(e,t,n,i,o),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=ne(bl.G,{class:"blocklyComment"}),this.workspace=e,this.svgRect_=ne(bl.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:pc,ry:pc}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(g()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),L()&&M(new($(hs))(this)),se(this.svgGroup),La.disable$$module$build$src$core$events$utils(),super.dispose(),La.enable$$module$build$src$core$events$utils())}initSvg(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(z(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),z(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea&&this.textarea.select()}pathMouseDown(e){const t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)}showContextMenu(e){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(g()!==this){var e=null;if(g()){e=g().id,La.disable$$module$build$src$core$events$utils();try{g().unselect()}finally{La.enable$$module$build$src$core$events$utils()}}e=new($(is))(e,this.id,this.workspace.id),M(e),m(this),this.addSelect()}}unselect(){if(g()===this){var e=new($(is))(this.id,null,this.workspace.id);M(e),m(null),this.removeSelect(),this.blurFocus()}}addSelect(){ie(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){ie(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){ie(this.svgGroup,"blocklyFocused")}removeFocus(){re(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,n=0,i=this.getSvgRoot();if(i)do{const e=we(i);t+=e.x,n+=e.y,i=i.parentNode}while(i&&!e.hasLayer(i)&&null!==i);return this.xy_=new ll(t,n)}moveBy(e,t){const n=new($(fs))(this),i=this.getRelativeToSurfaceXY();this.translate(i.x+e,i.y+t),this.xy_=new ll(i.x+e,i.y+t),n.recordNew(),M(n),this.workspace.resizeContents()}translate(e,t){this.xy_=new ll(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")}moveDuringDrag(e){e=`translate(${e.x}, ${e.y})`,this.getSvgRoot().setAttribute("transform",e)}moveTo(e,t){this.translate(e,t)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var e=this.getRelativeToSurfaceXY();const t=this.getHeightWidth(),n=e.y,i=e.y+t.height;let o;return this.RTL?(o=e.x-t.width,e=e.x):(o=e.x,e=e.x+t.width),new Tl(n,i,o,e)}updateMovable(){this.isMovable()?ie(this.svgGroup,"blocklyDraggable"):re(this.svgGroup,"blocklyDraggable")}setMovable(e){super.setMovable(e),this.updateMovable()}setEditable(e){super.setEditable(e),this.textarea&&(this.textarea.readOnly=!e)}setDragging(e){e?ie(this.getSvgRoot(),"blocklyDragging"):re(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(e){super.setContent(e),this.textarea&&(this.textarea.value=e)}setDeleteStyle(e){e?ie(this.svgGroup,"blocklyDraggingDelete"):re(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(e){}toXmlWithXY(e){let t=0;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);const n=this.getRelativeToSurfaceXY();return e.setAttribute("x",String(Math.round(this.workspace.RTL?t-n.x:n.x))),e.setAttribute("y",String(Math.round(n.y))),e.setAttribute("h",String(this.getHeight())),e.setAttribute("w",String(this.getWidth())),e}toCopyData(){return{paster:dc.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var e=this.getHeightWidth(),t=this.createEditor();this.svgGroup.appendChild(t),this.svgHandleTarget=ne(bl.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=ne(bl.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:pc,ry:pc}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(e.width,e.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&z(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(z(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),z(this.deleteGroup,"pointerout",this,this.deleteMouseOut),z(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=ne(bl.FOREIGNOBJECT,{x:0,y:gc.TOP_OFFSET,class:"blocklyCommentForeignObject"});const e=document.createElementNS(pl,"body");e.setAttribute("xmlns",pl),e.className="blocklyMinimalBody";const t=document.createElementNS(pl,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea=t,this.foreignObject.appendChild(e),z(t,"wheel",this,(function(e){e.stopPropagation()})),z(t,"change",this,(function(e){this.setContent(t.value)})),this.foreignObject}addResizeDom(){this.resizeGroup=ne(bl.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),ne(bl.POLYGON,{points:`0,${hc} ${hc},${hc} ${hc},0`},this.resizeGroup),ne(bl.LINE,{class:"blocklyResizeLine",x1:hc/3,y1:hc-1,x2:hc-1,y2:hc/3},this.resizeGroup),ne(bl.LINE,{class:"blocklyResizeLine",x1:2*hc/3,y1:hc-1,x2:hc-1,y2:2*hc/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=ne(bl.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=ne(bl.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),ne(bl.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),ne(bl.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(e){this.unbindDragEvents(),q(e)||(this.workspace.startDrag(e,new ll(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=z(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=z(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),e.stopPropagation()}deleteMouseDown(e){this.deleteIconBorder&&ie(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),e.stopPropagation()}deleteMouseOut(e){this.deleteIconBorder&&re(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(e){this.dispose(),e.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(X(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(X(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(e){G(),this.unbindDragEvents()}resizeMouseMove(e){this.autoLayout=!1,e=this.workspace.moveDrag(e),this.setSize(this.RTL?-e.x:e.x,e.y)}resizeComment(){const e=this.getHeightWidth(),t=gc.TOP_OFFSET,n=2*fc;let i,o;if(null==(i=this.foreignObject)||i.setAttribute("width",String(e.width)),null==(o=this.foreignObject)||o.setAttribute("height",String(e.height-t)),this.RTL){let t;null==(t=this.foreignObject)||t.setAttribute("x",String(-e.width))}this.textarea&&(this.textarea.style.width=e.width-n+"px",this.textarea.style.height=e.height-n-t+"px")}setSize(e,t){let n,i,o,r;if(e=Math.max(e,45),t=Math.max(t,20+gc.TOP_OFFSET),this.width_=e,this.height_=t,this.svgRect_.setAttribute("width",`${e}`),this.svgRect_.setAttribute("height",`${t}`),null==(n=this.svgRectTarget)||n.setAttribute("width",`${e}`),null==(i=this.svgRectTarget)||i.setAttribute("height",`${t}`),null==(o=this.svgHandleTarget)||o.setAttribute("width",`${e}`),null==(r=this.svgHandleTarget)||r.setAttribute("height",String(gc.TOP_OFFSET)),this.RTL){let e;this.svgRect_.setAttribute("transform","scale(-1 1)"),null==(e=this.svgRectTarget)||e.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){let n;this.resizeGroup.setAttribute("transform","translate("+(-e+hc)+","+(t-hc)+") scale(-1 1)"),null==(n=this.deleteGroup)||n.setAttribute("transform","translate("+(-e+hc)+",-8) scale(-1 1)")}else{let n;this.resizeGroup.setAttribute("transform","translate("+(e-hc)+","+(t-hc)+")"),null==(n=this.deleteGroup)||n.setAttribute("transform","translate("+(e-hc)+",-8)")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout((()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&ie(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&ie(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))}),0)}blurFocus(){this.focused=!1,setTimeout((()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&re(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&re(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))}),0)}static fromXmlRendered(e,t,n){let i;La.disable$$module$build$src$core$events$utils();try{const o=lc.parseAttributes(e);if(i=new gc(t,o.content,o.h,o.w,o.id),t.rendered&&(i.initSvg(!0),i.render()),!isNaN(o.x)&&!isNaN(o.y))if(t.RTL){const e=n||t.getWidth();i.moveBy(e-o.x,o.y)}else i.moveBy(o.x,o.y)}finally{La.enable$$module$build$src$core$events$utils()}return lc.fireCreateEvent(i),i}};gc.DEFAULT_SIZE=100,gc.TOP_OFFSET=10,J("\n.blocklyCommentForeignObject {\n  position: relative;\n  z-index: 0;\n}\n\n.blocklyCommentRect {\n  fill: #E7DE8E;\n  stroke: #bcA903;\n  stroke-width: 1px;\n}\n\n.blocklyCommentTarget {\n  fill: transparent;\n  stroke: #bcA903;\n}\n\n.blocklyCommentTargetFocused {\n  fill: none;\n}\n\n.blocklyCommentHandleTarget {\n  fill: none;\n}\n\n.blocklyCommentHandleTargetFocused {\n  fill: transparent;\n}\n\n.blocklyFocused>.blocklyCommentRect {\n  fill: #B9B272;\n  stroke: #B9B272;\n}\n\n.blocklySelected>.blocklyCommentTarget {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCommentDeleteIcon {\n  cursor: pointer;\n  fill: #000;\n  display: none;\n}\n\n.blocklySelected > .blocklyCommentDeleteIcon {\n  display: block;\n}\n\n.blocklyDeleteIconShape {\n  fill: #000;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n  stroke: #fc3;\n}\n");var mc=new Set,_c=new WeakSet,vc=null,bc=null,Tc=0,Ac={};Ac.finishQueuedRenders=yt,Ac.queueRender=At,Ac.triggerQueuedRenders=Et;var yc={};yc.appendDomToWorkspace=Ut,yc.blockToDom=Pt,yc.blockToDomWithXY=kt,yc.clearWorkspaceAndLoadFromXml=Ft,yc.deleteNext=Jt,yc.domToBlock=La.domToBlock$$module$build$src$core$xml,yc.domToBlockInternal=Gt,yc.domToPrettyText=Bt,yc.domToText=$t,yc.domToVariables=Vt,yc.domToWorkspace=La.domToWorkspace$$module$build$src$core$xml,yc.variablesToDom=Dt,yc.workspaceToDom=It;var Ec=class extends Error{},Sc=class extends Ec{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Cc=class extends Ec{constructor(e,t,n){super(`The block ${t.toDevString()} is missing a(n) ${e}\nconnection`),this.block=t,this.state=n}},wc=class extends Ec{constructor(e,t,n,i){super(`The block ${n.toDevString()} could not connect its\n${t} to its parent, because: ${e}`),this.childBlock=n,this.childState=i}},xc=class extends Ec{constructor(e){super("Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren"),this.state=e}},Mc=class extends Ec{constructor(e,t,n){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=n}},Rc={};Rc.BadConnectionCheck=wc,Rc.DeserializationError=Ec,Rc.MissingBlockType=Sc,Rc.MissingConnection=Cc,Rc.RealChildOfShadow=xc,Rc.UnregisteredIcon=Mc;var Ic=100,Dc=75,kc=50,Lc={BLOCKS:kc,PROCEDURES:Dc,VARIABLES:Ic},Oc={};Oc.register=nn,Oc.unregister=on;var Pc=class{constructor(){this.priority=kc}save(e){const t=[];for(const n of e.getTopBlocks(!1))(e=rn(n,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const n of e)fn(n,t,{recordUndo:x()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};nn("blocks",new Pc);var Nc={};Nc.BlockSerializer=Pc,Nc.append=fn,Nc.appendInternal=gn,Nc.save=rn;var $c=class extends ws{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new $c)).blockId=e.blockId,t}},Bc=class extends $c{constructor(e){super(e),this.type=La.CREATE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=kt(e),this.ids=P(e),this.json=rn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=$t(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Bc)).xml=La.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Fc(t,this.ids))if(e)fn(this.json,t);else for(e=0;e<this.ids.length;e++){const n=this.ids[e],i=t.getBlockById(n);i?i.dispose(!1):n===this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},Fc=function(e,t){return t.map((t=>e.getBlockById(t))).filter((e=>e&&e.isShadow())).length===t.length};e(Ba.EVENT,La.CREATE$$module$build$src$core$events$utils,Bc);var Uc=class extends xs{constructor(e,t){super(t),this.type=cs,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Uc)).themeName=e.themeName,t}};e(Ba.EVENT,cs,Uc);var Gc,Vc,Hc=class extends xs{constructor(e,t,n,i,o){super(i),this.type=us,this.viewTop=e,this.viewLeft=t,this.scale=n,this.oldScale=o}toJson(){const e=super.toJson();if(void 0===this.viewTop)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.viewLeft)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.scale)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.oldScale)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Hc)).viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};e(Ba.EVENT,us,Hc),Gc=28,La.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Gc,connectingSnapRadius:Gc,currentConnectionPreference:8,bumpDelay:250},La.config$$module$build$src$core$config,function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"}(Vc||(Vc={}));var Wc=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const n=this.calculateIndexForYPos(t);if(n>=this.connections.length)return-1;t=e.y;let i=n;for(;0<=i&&this.connections[i].y===t;){if(this.connections[i]===e)return i;i--}for(i=n;i<this.connections.length&&this.connections[i].y===t;){if(this.connections[i]===e)return i;i++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,n=this.connections.length;for(;t<n;){const i=Math.floor((t+n)/2);if(this.connections[i].y<e)t=i+1;else{if(!(this.connections[i].y>e)){t=i;break}n=i}}return t}removeConnection(e,t){if(-1===(e=this.findIndexOfConnection(e,t)))throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function n(e){const n=o-i[e].x,a=r-i[e].y;return Math.sqrt(n*n+a*a)<=t&&l.push(i[e]),a<t}const i=this.connections,o=e.x,r=e.y;e=0;let a=i.length-2,s=a;for(;e<s;)i[s].y<r?e=s:a=s,s=Math.floor((e+a)/2);const l=[];if(a=e=s,i.length){for(;0<=e&&n(e);)e--;do{a++}while(a<i.length&&n(a))}return l}isInYRange(e,t,n){return Math.abs(this.connections[e].y-t)<=n}searchForClosest(e,t,n){if(!this.connections.length)return{connection:null,radius:t};const i=e.y,o=e.x;e.x=o+n.x,e.y=i+n.y;var r=this.calculateIndexForYPos(e.y);n=null;let a,s=t,l=r-1;for(;0<=l&&this.isInYRange(l,e.y,t);)a=this.connections[l],this.connectionChecker.canConnect(e,a,!0,s)&&(n=a,s=a.distanceFrom(e)),l--;for(;r<this.connections.length&&this.isInYRange(r,e.y,t);)a=this.connections[r],this.connectionChecker.canConnect(e,a,!0,s)&&(n=a,s=a.distanceFrom(e)),r++;return e.x=o,e.y=i,{connection:n,radius:s}}static init(e){const t=[];return t[Vc.INPUT_VALUE]=new Wc(e),t[Vc.OUTPUT_VALUE]=new Wc(e),t[Vc.NEXT_STATEMENT]=new Wc(e),t[Vc.PREVIOUS_STATEMENT]=new Wc(e),t}},zc=class{paste(e,t,n){if(!t.isCapacityAvailable(e.typeCounts))return null;let i;n&&(e.blockState.x=n.x,e.blockState.y=n.y),La.disable$$module$build$src$core$events$utils();try{i=fn(e.blockState,t),xn(i)}finally{La.enable$$module$build$src$core$events$utils()}return i?(L()&&!i.isShadow()&&M(new($(La.CREATE$$module$build$src$core$events$utils))(i)),i.select(),i):i}};zc.TYPE="block",bt(zc.TYPE,new zc);var jc=null,Xc=null,Yc={duplicateInternal:Pn,copyInternal:Dn},qc={};qc.BlockPaster=zc,qc.TEST_ONLY=Yc,qc.copy=In,qc.duplicate=On,qc.paste=kn,qc.registry=uc;var Kc,Qc,Zc="aria-",Jc="role";(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Kc||(Kc={})),function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"}(Qc||(Qc={}));var eu={};eu.Role=Kc,eu.State=Qc,eu.setRole=Nn,eu.setState=$n;var tu,nu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName&&Nn(t,this.roleName),this.element=t;for(let n,i=0;n=this.menuItems[i];i++)t.appendChild(n.createDom());return this.mouseOverHandler=z(t,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=z(t,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=z(t,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=z(t,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=z(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),ie(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),re(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.mouseOverHandler&&(X(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(X(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(X(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(X(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(X(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e,t=0;e=this.menuItems[t];t++)e.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem"))for(let t,n=0;t=this.menuItems[n];n++)if(t.getElement()===e)return t;e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;t&&(t.setHighlighted(!1),this.highlightedItem=null),e&&(e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement(),Se(e.getElement(),t),$n(t,Qc.ACTIVEDESCENDANT,e.getId()))}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){let n;for(e+=t;n=this.menuItems[e];){if(n.isEnabled()){this.setHighlighted(n);break}e+=t}}handleMouseOver(e){(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const t=this.openingCoords;if(this.openingCoords=null,t&&"number"==typeof e.clientX){const n=new ll(e.clientX,e.clientY);if(1>ll.distance(t,n))return}(e=this.getMenuItem(e.target))&&e.performAction()}handleMouseEnter(e){this.focus()}handleMouseLeave(e){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=_e(e);return t.height=e.scrollHeight,t}},iu=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=S(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(n)}return n=this.content,"string"==typeof this.content&&(n=document.createTextNode(this.content)),t.appendChild(n),e.appendChild(t),this.roleName&&Nn(e,this.roleName),$n(e,Qc.SELECTED,this.checkable&&this.checked||!1),$n(e,Qc.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return null!=(e=this.opt_value)?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?(ie(t,"blocklyMenuItemHighlight"),ie(t,"goog-menuitem-highlight")):(re(t,"blocklyMenuItemHighlight"),re(t,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,t){this.actionHandler=e.bind(t)}},ou=null,ru=null,au="blocklyWidgetDiv",su="",lu="",cu={};cu.createDom=Un,cu.getDiv=Bn,cu.hide=Vn,cu.hideIfOwner=Wn,cu.isVisible=Hn,cu.positionWithAnchor=jn,cu.repositionForWindowResize=Kn,cu.show=Gn,cu.testOnly_setDiv=Fn;var uu=null,du={},hu=null,pu={};pu.callbackFactory=La.callbackFactory$$module$build$src$core$contextmenu,pu.commentDeleteOption=ai,pu.commentDuplicateOption=si,pu.dispose=ri,pu.getCurrentBlock=Qn,pu.hide=oi,pu.setCurrentBlock=Zn,pu.show=Jn,pu.workspaceCommentOption=li;var fu=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(e){if(this.registry_.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_.set(e.id,e)}unregister(e){if(!this.registry_.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registry_.delete(e)}getItem(e){let t;return null!=(t=this.registry_.get(e))?t:null}getContextMenuOptions(e,t){const n=[];for(const o of this.registry_.values())if(e===o.scopeType){var i=o.preconditionFn(t);"hidden"!==i&&(i={text:"function"==typeof o.displayText?o.displayText(t):o.displayText,enabled:"enabled"===i,callback:o.callback,scope:t,weight:o.weight},n.push(i))}return n.sort((function(e,t){return e.weight-t.weight})),n}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",e.registry=new e})(fu||(fu={})),fu.ScopeType;var gu={};gu.clamp=di,gu.toDegrees=ui,gu.toRadians=ci;var mu,_u,vu,bu=16,Tu=1,Au=12,yu=16,Eu=.25,Su=null,Cu=null,wu="",xu="",Mu=null,Ru=null,Iu=null,Du={getBoundsInfo:function(){const e=Ae(Mu),t=_e(Mu);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,n,i){const o=Du.getBoundsInfo(),r=_e(mu);return t+r.height<o.bottom?Si(e,t,o,r):i-r.height>o.top?Ci(n,i,o,r):t+r.height<document.documentElement.clientHeight?Si(e,t,o,r):i-r.height>document.documentElement.clientTop?Ci(n,i,o,r):wi(e,o,r)}},ku={ANIMATION_TIME:Eu,ARROW_HORIZONTAL_PADDING:Au,ARROW_SIZE:bu,BORDER_SIZE:Tu,PADDING_Y:yu,TEST_ONLY:Du};ku.clearContent=mi,ku.createDom=hi,ku.getContentDiv=gi,ku.getOwner=fi,ku.getPositionX=xi,ku.hide=Ii,ku.hideIfOwner=Ri,ku.hideWithoutAnimation=Di,ku.isVisible=Mi,ku.repositionForWindowResize=Li,ku.setBoundsElement=pi,ku.setColour=_i,ku.show=Ei,ku.showPositionedByBlock=vi,ku.showPositionedByField=bi;var Lu=null,Ou=null,Pu={};Pu.connectionUiEffect=Ni,Pu.disconnectUiEffect=$i,Pu.disconnectUiStop=Fi,Pu.disposeUiEffect=Oi;var Nu=50,$u=100,Bu=class{constructor(e,t){this.bubble=e,this.workspace=t,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){let e;La.getGroup$$module$build$src$core$events$utils()||La.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1),null==(e=this.workspace.getLayerManager())||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(e,t){t=this.pixelsToWorkspaceUnits_(t),t=ll.sum(this.startXY_,t),this.bubble.moveDuringDrag(t),t=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==t&&(t&&t.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(e){return!(!e||!this.workspace.getComponentManager().hasCapability(e.id,ol.Capability.DELETE_AREA))&&e.wouldDelete(this.bubble,!1)}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(e,t){if(this.dragBubble(e,t),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(t),e=ll.sum(this.startXY_,e)),this.bubble.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){let e;this.bubble.setDragging(!1),null==(e=this.workspace.getLayerManager())||e.moveOffDragLayer(this.bubble,$u)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),La.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof gc){const e=new($(fs))(this.bubble);e.setOldCoordinate(this.startXY_),e.recordNew(),M(e)}}pixelsToWorkspaceUnits_(e){return e=new ll(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}},Fu=30,Uu=!0,Gu=[];Gu[Vc.INPUT_VALUE]=Vc.OUTPUT_VALUE,Gu[Vc.OUTPUT_VALUE]=Vc.INPUT_VALUE,Gu[Vc.NEXT_STATEMENT]=Vc.PREVIOUS_STATEMENT,Gu[Vc.PREVIOUS_STATEMENT]=Vc.NEXT_STATEMENT;var Vu="RENAME_VARIABLE_ID",Hu="DELETE_VARIABLE_ID",Wu={};Wu.commonWordPrefix=Vi,Wu.commonWordSuffix=Hi,Wu.isNumber=La.isNumber$$module$build$src$core$utils$string,Wu.shortestStringLength=Gi,Wu.startsWith=Ui,Wu.wrap=La.wrap$$module$build$src$core$utils$string;var zu=void 0,ju=!1,Xu=!1,Yu=50,qu=0,Ku=0,Qu=0,Zu=0,Ju=null,ed=null,td=0,nd=10,id=10,od=750,rd=5,ad=null,sd={HOVER_MS:od,LIMIT:Yu,MARGINS:rd,OFFSET_X:td,OFFSET_Y:nd,RADIUS_OK:id};sd.bindMouseEvents=to,sd.block=lo,sd.createDom=eo,sd.dispose=ao,sd.getCustomTooltip=qi,sd.getDiv=Qi,sd.getTooltipOfObject=Zi,sd.hide=so,sd.isVisible=Ki,sd.setCustomTooltip=Yi,sd.unbindMouseEvents=no,sd.unblock=co;var ld=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new ll(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){g()&&g().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=ll.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(e.x,this.workspace.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace.scroll(this.workspace.scrollX,e.y)}}},cd=5,ud=6,dd=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new ll(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new ll(0,0),this.healStack=!1}dispose(){G(),co(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)X(e);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new ll(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(),U()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=ll.difference(e,this.mouseDownXY),!this.hasExceededDragRadius&&(this.hasExceededDragRadius=ll.magnitude(this.currentDragDeltaXY)>(this.flyout?La.config$$module$build$src$core$config.flyoutDragRadius:La.config$$module$build$src$core$config.dragRadius))}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||null==(e=this.flyout)||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error("Cannot update dragging from the flyout because the ' +\n          'flyout's target workspace is undefined");return!(this.flyout.isScrollable()&&!this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)||(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),La.getGroup$$module$build$src$core$events$utils()||La.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),0))}updateIsDraggingBubble(){return!!this.startBubble&&(this.startDraggingBubble(),!0)}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new ld(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(l(Ba.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Bu(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Y(e)?this.cancel():(this.gestureHasStarted=!0,Fi(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=fi(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,lo(),this.targetBlock&&this.targetBlock.select(),q(e)?this.handleRightClick(e):("pointerdown"===e.type.toLowerCase()&&"mouse"!==e.pointerType&&F(e,this),this.mouseDownXY=new ll(e.clientX,e.clientY),this.healStack=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(z(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(z(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(z(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&U())}handleMove(e){this.isDragging()&&V(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),U())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!V(e))return;if(this.updateFromEvent(e),U(),this.isEnding_)return void console.log("Trying to end a gesture recursively.");this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(e,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e)}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=H(e);this.cachedPoints.set(t,this.getTouchPoint(e));var n=Array.from(this.cachedPoints.keys());2===n.length&&(t=this.cachedPoints.get(n[0]),n=this.cachedPoints.get(n[1]),this.startDistance=ll.distance(t,n),this.isMultiTouch_=!0,e.preventDefault())}handleTouchMove(e){const t=H(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&2===this.cachedPoints.size?this.handlePinch(e):this.handleMove(e)}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),n=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),n=ll.distance(n,t)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(t=0<(t=n-this.previousScale)?t*cd:t*ud,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const i=this.startWorkspace_,o=K(e,i.getParentSvg(),i.getInverseScreenCTM());i.zoom(o.x,o.y,t)}this.previousScale=n,e.preventDefault()}handleTouchEnd(e){e=H(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new ll(e.pageX,e.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(U(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.doStart(e)}fireWorkspaceClick(e){M(new($(os))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}doBubbleClick(){this.startBubble instanceof gc&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(La.getGroup$$module$build$src$core$events$utils()||La.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const e=new($(os))(this.startBlock,this.startWorkspace_.id,"block");M(e)}this.bringBlockToFront(),La.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,g()&&g().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!(!this.startBlock||this.hasExceededDragRadius||this.isFieldClick()||this.isIconClick())}isFieldClick(){return!!this.startField&&this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose))}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!(this.startBlock||this.startBubble||this.startField||this.hasExceededDragRadius)}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let e,t;return null!=(t=null!=(e=this.blockDragger)?e:this.workspaceDragger)?t:this.bubbleDragger}static inProgress(){const e=u();for(let t,n=0;t=e[n];n++)if(t.currentGesture_)return!0;return!1}},hd=class{constructor(e,t){let n,i,o;this.pattern=e,this.scale=1,this.spacing=null!=(n=t.spacing)?n:0,this.length=null!=(i=t.length)?i:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling,this.snapToGrid=null!=(o=t.snap)&&o}setSpacing(e){this.spacing=e,this.update(this.scale)}setLength(e){this.length=e,this.update(this.scale)}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`);let n=(t=Math.floor(this.spacing/2)+.5)-this.length/2,i=t+this.length/2;t*=e,n*=e,i*=e,this.setLineAttributes(this.line1,e,n,i,t,t),this.setLineAttributes(this.line2,e,t,t,n,i)}setLineAttributes(e,t,n,i,o,r){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${n}`),e.setAttribute("y1",`${o}`),e.setAttribute("x2",`${i}`),e.setAttribute("y2",`${r}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}static createDom(e,t,n){let i,o;if(e=ne(bl.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<(null!=(i=t.length)?i:1)&&0<(null!=(o=t.spacing)?o:0)){let n;ne(bl.LINE,{stroke:t.colour},e),null!=(n=t.length)&&n&&ne(bl.LINE,{stroke:t.colour},e)}else ne(bl.LINE,{},e);return e}},pd=class{constructor(e){this.workspace=e,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),t.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(!t)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");t.dispose(),this.markers.delete(e)}getCursor(){return this.cursor_}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let t,n=0;t=e[n];n++)this.unregisterMarker(t);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};pd.LOCAL_MARKER="local_marker_1";var fd={};fd.deepMerge=go;var gd=class{constructor(t,n,i,o){this.name=t,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=i||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),e(Ba.THEME,t,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(!(e=this.componentStyles[e]))return null;if("string"==typeof e){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const n=new gd(e);let i=t.base;if(i){if("string"==typeof i){let e;i=null!=(e=a(Ba.THEME,i))?e:void 0}i instanceof gd&&(go(n,i),n.name=e)}return go(n.blockStyles,t.blockStyles),go(n.categoryStyles,t.categoryStyles),go(n.componentStyles,t.componentStyles),go(n.fontStyle,t.fontStyle),null!==t.startHats&&(n.startHats=t.startHats),n}},md=new gd("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}}),_d=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,n=!1;var i=!1,o=!1,r=!1,a=!1,s=!1;const l=!!e.readOnly;var c;l||(t=Pe(null!=(c=e.toolbox)?c:null),n=Be(t),i=void 0===(i=e.trashcan)?n:i,o=void 0===(o=e.collapse)?n:o,r=void 0===(r=e.comments)?n:r,a=void 0===(a=e.disable)?n:a,s=void 0===(s=e.sounds)||s),c=e.maxTrashcanContents,i?void 0===c&&(c=32):c=0;const u=!!e.rtl;let d=e.horizontalLayout;void 0===d&&(d=!1);var h="end"!==e.toolboxPosition;h=d?h?Nl.TOP:Nl.BOTTOM:h===u?Nl.RIGHT:Nl.LEFT;let p=e.css;void 0===p&&(p=!0);let f="https://blockly-demo.appspot.com/static/media/";e.media?f=e.media.endsWith("/")?e.media:e.media+"/":"path"in e&&(te("path","Nov 2014","Jul 2023","media"),f=e.path+"media/");const g=e.oneBasedIndex,m=e.renderer||"geras",_=e.plugins||{};let v,b,T,A=e.modalInputs;void 0===A&&(A=!0),this.RTL=u,this.oneBasedIndex=void 0===g||g,this.collapse=o,this.comments=r,this.disable=a,this.readOnly=l,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=null!=(v=e.maxInstances)?v:null,this.modalInputs=A,this.pathToMedia=f,this.hasCategories=n,this.moveOptions=_d.parseMoveOptions_(e,n),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=i,this.maxTrashcanContents=c,this.hasSounds=s,this.hasCss=p,this.horizontalLayout=d,this.languageTree=t,this.gridOptions=_d.parseGridOptions_(e),this.zoomOptions=_d.parseZoomOptions_(e),this.toolboxPosition=h,this.theme=_d.parseThemeOptions_(e),this.renderer=m,this.rendererOverrides=null!=(b=e.rendererOverrides)?b:null,this.parentWorkspace=null!=(T=e.parentWorkspace)?T:null,this.plugins=_}static parseMoveOptions_(e,t){const n=e.move||{},i={};return void 0===n.scrollbars&&void 0===e.scrollbars?i.scrollbars=t:"object"==typeof n.scrollbars?(i.scrollbars={horizontal:!!n.scrollbars.horizontal,vertical:!!n.scrollbars.vertical},i.scrollbars.horizontal&&i.scrollbars.vertical?i.scrollbars=!0:i.scrollbars.horizontal||i.scrollbars.vertical||(i.scrollbars=!1)):i.scrollbars=!!n.scrollbars||!!e.scrollbars,i.wheel=i.scrollbars&&void 0!==n.wheel?!!n.wheel:"object"==typeof i.scrollbars,i.drag=!(!i.scrollbars||void 0!==n.drag&&!n.drag),i}static parseZoomOptions_(e){e=e.zoom||{};const t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:Number(e.startScale),t.maxScale=void 0===e.maxScale?3:Number(e.maxScale),t.minScale=void 0===e.minScale?.3:Number(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),t.pinch=void 0===e.pinch?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions_(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=void 0===e.length?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t}static parseThemeOptions_(e){return"string"==typeof(e=e.theme||md)?a(Ba.THEME,e):e instanceof gd?e:gd.defineTheme(e.name||"builtin"+S(),e)}},vd=class extends $c{constructor(e,t,n,i,o){super(e),this.type=La.CHANGE$$module$build$src$core$events$utils,e&&(this.element=t,this.name=n||void 0,this.oldValue=i,this.newValue=o)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new vd)).element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(t=t.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var n=t.getIcon(Xl.MUTATOR);switch(n&&mo(n)&&n.bubbleIsVisible()&&n.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":n=vd.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(La.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),M(new vd(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?$t(e):""}};e(Ba.EVENT,La.CHANGE$$module$build$src$core$events$utils,vd);var bd=.45,Td=.65,Ad={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},yd={};yd.blend=Co,yd.getHsvSaturation=_o,yd.getHsvValue=bo,yd.hexToRgb=Eo,yd.hsvToHex=So,yd.hueToHex=wo,yd.names=Ad,yd.parse=Ao,yd.rgbToHex=yo,yd.setHsvSaturation=vo,yd.setHsvValue=To;var Ed={};Ed.checkMessageReferences=Io,Ed.parseBlockColour=Do,Ed.replaceMessageReferences=Ro,Ed.tokenizeInterpolation=Mo;var Sd=class{constructor(e,t,n){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Al(0,0),e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Ro(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=ne(bl.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=ne(bl.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=ne(bl.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");to(e),this.mouseDownWrapper_=z(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return null!==(e=this.saveLegacyState(Sd))?e:this.getValue()}loadState(e){this.loadLegacyState(Sd,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?((e=La.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name",this.name||""),Le(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml&&(this.fromXml(La.textToDom$$module$build$src$core$utils$xml(t)),!0)}dispose(){let e;Ri(this),Wn(this),null!=(e=this.getSourceBlock())&&e.isDeadOrDying()||se(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(ie(e,"blocklyEditableText"),re(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(ie(e,"blocklyNonEditableText"),re(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Sd.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();let n=2*(e=void 0!==e?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING),i=t.FIELD_TEXT_HEIGHT,o=0;this.textElement_&&(o=fe(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY),n+=o),this.isFullBlockField()||(i=Math.max(i,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=i,this.size_.width=n,this.positionTextElement_(e,o),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var n,i=this.getConstants(),o=this.size_.height/2;this.textElement_.setAttribute("x",String(null!=(n=this.getSourceBlock())&&n.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(i.FIELD_TEXT_BASELINE_CENTER?o:o-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(this.render_(),0!==this.size_.width&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Al(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Cd;if(this.isFullBlockField()){var n=this.sourceBlock_.getHeightWidth();const i=t.workspace.scale;e=this.getAbsoluteXY_(),t=(n.width+1)*i,n=(n.height+1)*i,js?(e.x+=1.5*i,e.y+=1.5*i):(e.x-=.5*i,e.y-=.5*i)}else n=this.borderRect_.getBoundingClientRect(),e=Ae(this.borderRect_),t=n.width,n=n.height;return new Tl(e.y,e.y+n,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,Sd.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):Sd.NBSP}getText(){const e=this.getText_();return String(null!==e?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(e,t=!0){if(null!==e){var n,i=this.doClassValidation_(e);(e=this.processValidation_(e,i))instanceof Error||(i=null==(n=this.getValidator())?void 0:n.call(this,e),(n=this.processValidation_(e,i))instanceof Error||(e=this.sourceBlock_)&&e.disposed||((i=this.getValue())===n?this.doValueUpdate_(n):(this.doValueUpdate_(n),t&&e&&L()&&M(new($(La.CHANGE$$module$build$src$core$events$utils))(e,"field",this.name||null,i,n)),this.isDirty_&&this.forceRerender())))}}processValidation_(e,t){return null===t?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):void 0===t?e:t}getValue(){return this.value_}doClassValidation_(e){return null==e?null:e}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||""===e||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e}getTooltip(){const e=this.getClickTarget_();return Zi(e||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Ae(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Cd;const n=t.inputList;for(let i=0;i<t.inputList.length;i++){const t=n[i],o=t.fieldRow;for(let n=0;n<o.length;n++)if(o[n]===this){e=t;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg_=e}else this.cursorSvg_=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg_=e}else this.markerSvg_=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Cd;(e=e.workspace).keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(pd.LOCAL_MARKER).draw()}};Sd.NBSP=" ",Sd.SKIP_SETUP=Symbol("SKIP_SETUP");var Cd=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};La.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)}populateVariables(e){e=La.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),La.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let n=e;t===La.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(n=e),e=n.toLowerCase();const i=t===La.NameType$$module$build$src$core$names.VARIABLE||t===La.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const o=this.db.get(t);return o.has(e)?i+o.get(e):(t=this.getDistinctName(n,t),o.set(e,t.substr(i.length)),t)}getUserNames(e){let t;return(e=null==(t=this.db.get(e))?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let n,i,o,r=null;for(;this.dbReverse.has(e+(null!=(n=r)?n:""))||this.reservedWords.has(e+(null!=(i=r)?i:""));)r=r?r+1:2;return e+=null!=(o=r)?o:"",this.dbReverse.add(e),(t===La.NameType$$module$build$src$core$names.VARIABLE||t===La.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!=="0123456789".indexOf(e[0])&&(e="my_"+e)):e=La.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){(e=e.NameType||(e.NameType={})).DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(La.Names$$module$build$src$core$names||(La.Names$$module$build$src$core$names={})),La.NameType$$module$build$src$core$names=La.Names$$module$build$src$core$names.NameType,La.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=La.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,La.NameType$$module$build$src$core$names,La.Names$$module$build$src$core$names;var wd=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t||(super.set(e,t),Lo(t)&&t.startPublishing()),this}delete(e){const t=this.get(e);return(e=super.delete(e))?(Lo(t)&&t.stopPublishing(),e):e}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},xd=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new ll(0,0),this.workspaceLocation=new ll(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=ne(bl.G,{class:"blocklyIconGroup"}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),z(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,to(this.svgRoot)}}dispose(){no(this.svgRoot),se(this.svgRoot)}getWeight(){return-1}getSize(){return new Al(0,0)}setTooltip(e){this.tooltip=null!=e?e:this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",mo(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;null==(e=this.svgRoot)||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=ll.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}setVisible(e){te("setVisible","v10","v11","setBubbleVisible"),mo(this)&&this.setBubbleVisible(e)}},Md={fromJsonInternal:No},Rd={TEST_ONLY:Md};Rd.fromJson=La.fromJson$$module$build$src$core$field_registry,Rd.register=Oo,Rd.unregister=Po;var Id=class extends Sd{constructor(e,t,n){super(Sd.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Sd.SKIP_SETUP&&(Array.isArray(e)?(Fo(e),e=$o(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],n&&this.configure_(n),this.setValue(this.selectedOption[1]),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Id,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=ne(bl.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ie(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!(null!=(e=this.getSourceBlock())&&e.isShadow())}createTextArrow_(){let e,t;this.arrow=ne(bl.TSPAN,{},this.textElement_),this.arrow.appendChild(document.createTextNode(null!=(e=this.getSourceBlock())&&e.RTL?Id.ARROW_CHAR+" ":" "+Id.ARROW_CHAR)),null!=(t=this.getSourceBlock())&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=ne(bl.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(fl,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Cd;this.dropdownCreate(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new ll(e.clientX,e.clientY):null,mi(),e=this.menu_.render(gi()),ie(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),_i(t,this.sourceBlock_.style.colourTertiary)),bi(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Se(this.selectedMenuItem.getElement(),gi(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Cd;const t=new nu;t.setRole(Kc.LISTBOX),this.menu_=t;const n=this.getOptions(!1);this.selectedMenuItem=null;for(let o=0;o<n.length;o++){const[r,a]=n[o];if("object"==typeof r){var i=new Image(r.width,r.height);i.src=r.src,i.alt=r.alt||""}else i=r;(i=new iu(i,a)).setRole(Kc.OPTION),i.setRightToLeft(e.RTL),i.setCheckable(!0),t.addChild(i),i.setChecked(a===this.value_),a===this.value_&&(this.selectedMenuItem=i),i.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){Ri(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return"function"==typeof this.menuGenerator_}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:(e&&this.generatedOptions||(this.generatedOptions=this.menuGenerator_(),Fo(this.generatedOptions)),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some((t=>t[1]===e))?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t,n=0;t=e[n];n++)t[1]===this.value_&&(this.selectedOption=t)}applyColour(){const e=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",e.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=e.colourSecondary:this.arrow.style.fill=e.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&"object"==typeof e?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new Cd;this.imageElement.style.display="",this.imageElement.setAttributeNS(fl,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const n=Number(e.height);e=Number(e.width);var i=!!this.borderRect_;const o=Math.max(i?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+Dd);let r;i=i?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,r=this.svgArrow?this.positionSVGArrow(e+i,o/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):fe(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+r+2*i,this.size_.height=o;let a=0;t.RTL?this.imageElement.setAttribute("x",`${i+r}`):(a=e+r,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${i}`)),this.imageElement.setAttribute("y",String(o/2-n/2)),this.positionTextElement_(a+i,e+r)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();ie(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const n=fe(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let i=0;this.svgArrow&&(i=this.positionSVGArrow(n+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+i+2*t,this.size_.height=e,this.positionTextElement_(t,n)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const n=this.getSourceBlock();if(!n)throw new Cd;const i=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(n.RTL?i:e+o)+","+t+")"),r+o}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return"object"==typeof e?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}};Id.CHECKMARK_OVERHANG=25,Id.MAX_MENU_HEIGHT_VH=.45,Id.ARROW_CHAR="▾";var Dd=10;Oo("field_dropdown",Id);var kd,Ld=class{constructor(e,t,n){this.workspace=e,this.anchor=t,this.ownerRect=n,this.size=new Al(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=ne(bl.G,{},e.getBubbleCanvas()),e=ne(bl.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=ne(bl.PATH,{},e),this.background=ne(bl.RECT,{class:"blocklyDraggable",x:0,y:0,rx:kd.BORDER_WIDTH,ry:kd.BORDER_WIDTH},e),this.contentContainer=ne(bl.G,{},this.svgRoot),z(this.background,"pointerdown",this,this.onMouseDown)}dispose(){se(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,kd.MIN_SIZE),e.height=Math.max(e.height,kd.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;null==(t=this.workspace.getGesture(e))||t.handleBubbleStart(e,this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new Tl(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft(t),i=this.getOptimalRelativeTop(t);const o={x:n,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.size.width-30,y:i};i={x:e.getWidth(),y:i};var a={x:n,y:e.getHeight()};n=e.getWidth()<e.getHeight()?i:a,e=e.getWidth()<e.getHeight()?a:i,i=this.getOverlap(o,t),a=this.getOverlap(r,t);const s=this.getOverlap(n,t);t=this.getOverlap(e,t),i===(t=Math.max(i,a,s,t))?(this.relativeLeft=o.x,this.relativeTop=o.y):a===t?(this.relativeLeft=r.x,this.relativeTop=r.y):s===t?(this.relativeLeft=n.x,this.relativeTop=n.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var n=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(n+this.size.width,t.left+t.width)-Math.max(n,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var n=this.anchor.x-t;n-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):n>e.right&&(t=-(e.right-this.anchor.x))}else{const i=(n=t+this.anchor.x)+this.size.width;n<e.left?t=e.left-this.anchor.x:i>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const n=this.anchor.y+t,i=n+this.size.height;return n<(e=this.getWorkspaceViewRect(e)).top?t=e.top-this.anchor.y:i>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let n=e.top+e.height,i=e.left;return e=e.left+e.width,n-=this.getScrollbarThickness(),this.workspace.RTL?i-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new Tl(t,n,i,e)}getScrollbarThickness(){return xl.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,n=this.size.height/2,i=-this.relativeLeft,o=-this.relativeTop;if(t===i&&n===o)e.push("M "+t+","+n);else{o-=n,i-=t,this.workspace.RTL&&(i*=-1);var r=Math.sqrt(o*o+i*i),a=Math.acos(i/r);0>o&&(a=2*Math.PI-a);var s=a+Math.PI/2;s>2*Math.PI&&(s-=2*Math.PI);var l=Math.sin(s);const c=Math.cos(s);let u=(this.size.width+this.size.height)/kd.TAIL_THICKNESS;u=Math.min(u,this.size.width,this.size.height)/4,i=t+(s=1-kd.ANCHOR_RADIUS/r)*i,o=n+s*o,s=t+u*c;const d=n+u*l;t-=u*c,n-=u*l,(l=a+(l=ci(this.workspace.RTL?-kd.TAIL_ANGLE:kd.TAIL_ANGLE)))>2*Math.PI&&(l-=2*Math.PI),a=Math.sin(l)*r/kd.TAIL_BEND,r=Math.cos(l)*r/kd.TAIL_BEND,e.push("M"+s+","+d),e.push("C"+(s+r)+","+(d+a)+" "+i+","+o+" "+i+","+o),e.push("C"+i+","+o+" "+(t+r)+","+(n+a)+" "+t+","+n)}let c;e.push("z"),null==(c=this.tail)||c.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=null==(e=this.svgRoot)?void 0:e.parentNode;return!(!this.svgRoot||(null==t?void 0:t.lastChild)===this.svgRoot||(null==t||t.appendChild(this.svgRoot),0))}getRelativeToSurfaceXY(){return new ll(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}};kd=Ld,Ld.BORDER_WIDTH=6,Ld.DOUBLE_BORDER=2*kd.BORDER_WIDTH,Ld.MIN_SIZE=kd.DOUBLE_BORDER,Ld.TAIL_THICKNESS=1,Ld.TAIL_ANGLE=20,Ld.TAIL_BEND=4,Ld.ANCHOR_RADIUS=8;var Od,Pd,Nd=class extends Ld{constructor(e,t,n,i){let o,r;super(t,n,i),this.workspace=t,this.anchor=n,this.ownerRect=i,this.autoLayout=!0,t=new _d(e),this.validateWorkspaceOptions(t),this.svgDialog=ne(bl.SVG,{x:Ld.BORDER_WIDTH,y:Ld.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new _d(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(bl.G),this.miniWorkspace.getCanvas()),null==(e=this.miniWorkspace.getFlyout())||e.init(this.miniWorkspace),null==e||e.show(t.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this)),null==(o=this.miniWorkspace.getFlyout())||null==(r=o.getWorkspace())||r.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(20>t.y&&e.moveBy(0,20-t.y),e.RTL){let n=-20;const i=this.miniWorkspace.getFlyout();i&&(n-=i.getWidth()),t.x>n&&e.moveBy(n-t.x,0)}else 20>t.x&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Nd.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Nd.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new Al(t.width+Ld.DOUBLE_BORDER,t.height+Ld.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Nd.MARGIN;e=e.height+Nd.MARGIN;const n=this.miniWorkspace.getFlyout();if(n){const i=n.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,i.height+20),t+=n.getWidth()}return new Al(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=null==(t=this.miniWorkspace.getFlyout())?void 0:t.getWorkspace())for(const n of e.getAllBlocks(!1))n.setStyle(n.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Nd.MINIMUM_VIEW_CHANGE=10,Nd.MARGIN=3*Ld.DOUBLE_BORDER,Od=17,Pd=16,La.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends xd{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return La.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),ne(bl.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),ne(bl.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),ne(bl.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ie(this.svgRoot,"blockly-icon-mutator"))}dispose(){let e;super.dispose(),null==(e=this.miniWorkspaceBubble)||e.dispose()}getWeight(){return La.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Al(Od,Od)}applyColour(){let e,t;super.applyColour(),null==(e=this.miniWorkspaceBubble)||e.setColour(this.sourceBlock.style.colourPrimary),null==(t=this.miniWorkspaceBubble)||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){let t;super.onLocationChange(e),null==(t=this.miniWorkspaceBubble)||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){if(this.bubbleIsVisible()!==e){if(e){let e;this.miniWorkspaceBubble=new Nd(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener(),null==(e=this.miniWorkspaceBubble)||e.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let e;null==(e=this.miniWorkspaceBubble)||e.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}M(new($(as))(this.sourceBlock,e,"mutator"))}}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:null!=(e=this.sourceBlock.workspace.options.rendererOverrides)?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map((e=>({kind:"block",type:e})))}),t}getAnchorLocation(){const e=Od/2;return ll.sum(this.workspaceLocation,new ll(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Tl(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");for(var e of(this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace()),this.rootBlock.getDescendants(!1)))e.queueRender();let t,n,i,o;this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),e=null!=(o=null==(t=this.miniWorkspaceBubble)||null==(n=t.getWorkspace())||null==(i=n.getFlyout())?void 0:i.getWidth())?o:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+Pd):Pd,Pd)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{La.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout((()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()}),0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||e.type===La.CREATE$$module$build$src$core$events$utils||e.type===La.CHANGE$$module$build$src$core$events$utils&&"disabled"===e.element}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=La.getGroup$$module$build$src$core$events$utils();e||La.setGroup$$module$build$src$core$events$utils(!0);var t=vd.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var n=vd.getExtraBlockState_(this.sourceBlock);t!==n&&M(new($(La.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,t,n)),La.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return null==(e=this.miniWorkspaceBubble)?void 0:e.getWorkspace()}static reconnect(e,t,n){return te("MutatorIcon.reconnect","v10","v11","connection.reconnect"),!!e&&e.reconnect(t,n)}static findParentWs(e){return te("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),e.getRootWorkspace()}},La.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Xl.MUTATOR,La.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,La.MutatorIcon$$module$build$src$core$icons$mutator_icon;var $d=Object.create(null),Bd={allExtensions:$d};La.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Jo);var Fd,Ud={TEST_ONLY:Bd};Ud.apply=Vo,Ud.buildTooltipForDropdown=La.buildTooltipForDropdown$$module$build$src$core$extensions,Ud.buildTooltipWithFieldText=La.buildTooltipWithFieldText$$module$build$src$core$extensions,Ud.isRegistered=Go,Ud.register=La.register$$module$build$src$core$extensions,Ud.registerMixin=La.registerMixin$$module$build$src$core$extensions,Ud.registerMutator=La.registerMutator$$module$build$src$core$extensions,Ud.runAfterPageLoad=Qo,Ud.unregister=Uo,function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"}(Fd||(Fd={}));var Gd={};Gd.arc=sr,Gd.curve=tr,Gd.line=rr,Gd.lineOnAxis=ar,Gd.lineTo=or,Gd.moveBy=ir,Gd.moveTo=nr,Gd.point=er;var Vd={};Vd.Coordinate=ll,Vd.KeyCodes=Fd,Vd.Rect=Tl,Vd.Size=Al,Vd.Svg=bl,Vd.aria=eu,Vd.array=nl,Vd.browserEvents=tl,Vd.colour=yd,Vd.deprecation=ul,Vd.dom=vl,Vd.extensions=Ud,Vd.idGenerator=Es,Vd.math=gu,Vd.object=fd,Vd.parsing=Ed,Vd.string=Wu,Vd.style=El,Vd.svgMath=wl,Vd.svgPaths=Gd,Vd.toolbox=Hl,Vd.userAgent=Zs,Vd.xml=Pl;var Hd={};Hd.register=lr,Hd.unregister=cr;var Wd=class extends Ld{constructor(e,t,n,i){super(t,n,i),this.text=e,this.workspace=t,this.anchor=n,this.ownerRect=i,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,se(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createSpans(t,e),this.workspace.RTL&&this.rightAlignSpans(t.getBBox().width,e),t}createParagraph(e){return ne(bl.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Ld.BORDER_WIDTH},e)}createSpans(e,t){return t.split("\n").map((t=>{const n=ne(bl.TSPAN,{dy:"1em",x:Ld.BORDER_WIDTH},e);return t=document.createTextNode(t),n.appendChild(t),n}))}rightAlignSpans(e,t){for(const n of t)n.setAttribute("text-anchor","end"),n.setAttribute("x",`${e+Ld.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Al(e.width+2*Ld.BORDER_WIDTH,e.height+2*Ld.BORDER_WIDTH),!0)}},zd=class extends Ld{constructor(e,t,n){super(e,t,n),this.workspace=e,this.anchor=t,this.ownerRect=n,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Al(160+Ld.DOUBLE_BORDER,80+Ld.DOUBLE_BORDER),this.MIN_SIZE=new Al(45+Ld.DOUBLE_BORDER,20+Ld.DOUBLE_BORDER),({inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer)),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=ne(bl.FOREIGNOBJECT,{x:Ld.BORDER_WIDTH,y:Ld.BORDER_WIDTH},e);const t=document.createElementNS(pl,"body");t.setAttribute("xmlns",pl),t.className="blocklyMinimalBody";const n=document.createElementNS(pl,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),t.appendChild(n),e.appendChild(t),this.bindTextAreaEvents(n),setTimeout((()=>{n.focus()}),0),{inputRoot:e,textArea:n}}bindTextAreaEvents(e){z(e,"wheel",this,(e=>{e.stopPropagation()})),z(e,"focus",this,this.onStartEdit,!0),z(e,"change",this,this.onTextChange)}createResizeHandle(e){e=ne(bl.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},e);const t=2*Ld.BORDER_WIDTH;return ne(bl.POLYGON,{points:`0,${t} ${t},${t} ${t},0`},e),ne(bl.LINE,{class:"blocklyResizeLine",x1:t/3,y1:t-1,x2:t-1,y2:t/3},e),ne(bl.LINE,{class:"blocklyResizeLine",x1:2*t/3,y1:t-1,x2:t-1,y2:2*t/3},e),z(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const n=e.width-Ld.DOUBLE_BORDER,i=e.height-Ld.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${n}`),this.inputRoot.setAttribute("height",`${i}`),this.textArea.style.width=n-4+"px",this.textArea.style.height=i-4+"px",this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Ld.DOUBLE_BORDER}, ${i}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${n}, ${i})`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),q(e)||(this.workspace.startDrag(e,new ll(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=z(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=z(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){G(),this.resizePointerUpListener&&(X(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(X(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=this.workspace.moveDrag(e),this.setSize(new Al(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};J("\n.blocklyCommentTextarea {\n  background-color: #fef49c;\n  border: 0;\n  display: block;\n  margin: 0;\n  outline: 0;\n  padding: 3px;\n  resize: none;\n  text-overflow: hidden;\n}\n");var jd=17,Xd=160,Yd=80,qd=class extends xd{constructor(e){super(e),this.sourceBlock=e,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new Al(Xd,Yd),this.bubbleVisiblity=!1}getType(){return qd.TYPE}initView(e){this.svgRoot||(super.initView(e),ne(bl.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),ne(bl.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),ne(bl.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ie(this.svgRoot,"blockly-icon-comment"))}dispose(){let e,t;super.dispose(),null==(e=this.textInputBubble)||e.dispose(),null==(t=this.textBubble)||t.dispose()}getWeight(){return qd.WEIGHT}getSize(){return new Al(jd,jd)}applyColour(){super.applyColour();const e=this.sourceBlock.style.colourPrimary;let t,n;null==(t=this.textInputBubble)||t.setColour(e),null==(n=this.textBubble)||n.setColour(e)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(e){let t,n;super.onLocationChange(e),e=this.getAnchorLocation(),null==(t=this.textInputBubble)||t.setAnchorLocation(e),null==(n=this.textBubble)||n.setAnchorLocation(e)}setText(e){const t=this.text;let n,i;M(new($(La.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,t,e)),this.text=e,null==(n=this.textInputBubble)||n.setText(this.text),null==(i=this.textBubble)||i.setText(this.text)}getText(){return this.text}setBubbleSize(e){let t;this.bubbleSize=e,null==(t=this.textInputBubble)||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let t,n,i,o;this.text=null!=(t=e.text)?t:"",this.bubbleSize=new Al(null!=(n=e.width)?n:Xd,null!=(i=e.height)?i:Yd),this.bubbleVisiblity=null!=(o=e.pinned)&&o,setTimeout((()=>this.setBubbleVisible(this.bubbleVisiblity)),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(M(new($(La.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){e&&(this.textBubble||this.textInputBubble)||(e||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=e,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(e?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),M(new($(as))(this.sourceBlock,e,"comment"))))}showEditableBubble(){this.textInputBubble=new zd(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener((()=>this.onTextChange())),this.textInputBubble.addSizeChangeListener((()=>this.onSizeChange()))}showNonEditableBubble(){this.textBubble=new Wd(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let e,t;null==(e=this.textInputBubble)||e.dispose(),this.textInputBubble=null,null==(t=this.textBubble)||t.dispose(),this.textBubble=null}getAnchorLocation(){const e=jd/2;return ll.sum(this.workspaceLocation,new ll(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Tl(e.y,e.y+e.height,e.x,e.x+e.width)}};qd.TYPE=Xl.COMMENT,qd.WEIGHT=3,lr(qd.TYPE,qd);var Kd=17,Qd=class extends xd{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Qd.TYPE}initView(e){this.svgRoot||(super.initView(e),ne(bl.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),ne(bl.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),ne(bl.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ie(this.svgRoot,"blockly-icon-warning"))}dispose(){let e;super.dispose(),null==(e=this.textBubble)||e.dispose()}getWeight(){return Qd.WEIGHT}getSize(){return new Al(Kd,Kd)}applyColour(){let e;super.applyColour(),null==(e=this.textBubble)||e.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){let t;super.onLocationChange(e),null==(t=this.textBubble)||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;let n;return e?this.textMap.set(t,e):this.textMap.delete(t),null==(n=this.textBubble)||n.setText(this.getText()),this}getText(){return[...this.textMap.values()].join("\n")}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){if(this.bubbleIsVisible()!==e){if(e)this.textBubble=new Wd(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let e;null==(e=this.textBubble)||e.dispose(),this.textBubble=null}M(new($(as))(this.sourceBlock,e,"warning"))}}getAnchorLocation(){const e=Kd/2;return ll.sum(this.workspaceLocation,new ll(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Tl(e.y,e.y+e.height,e.x,e.x+e.width)}};Qd.TYPE=Xl.WARNING,Qd.WEIGHT=2;var Zd=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},Jd={};Jd.DuplicateIconType=Zd;var eh,th,nh={};nh.CommentIcon=qd,nh.Icon=xd,nh.IconType=Xl,nh.MutatorIcon=La.MutatorIcon$$module$build$src$core$icons$mutator_icon,nh.WarningIcon=Qd,nh.exceptions=Jd,nh.registry=Hd,eh="PROCEDURE",La.DEFAULT_ARG$$module$build$src$core$procedures="x",(th={CATEGORY_NAME:eh,DEFAULT_ARG:La.DEFAULT_ARG$$module$build$src$core$procedures}).ObservableProcedureMap=wd,th.allProcedures=ur,th.findLegalName=La.findLegalName$$module$build$src$core$procedures,th.flyoutCategory=fr,th.getCallers=vr,th.getDefinition=La.getDefinition$$module$build$src$core$procedures,th.isNameUsed=pr,th.isProcedureBlock=ko,th.mutateCallers=La.mutateCallers$$module$build$src$core$procedures,th.mutatorOpenListener=mr,th.rename=La.rename$$module$build$src$core$procedures;var ih=new class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},oh=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=ih.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},rh=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=ih.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(ih.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(ih.isSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const t=this.elements[e];if(ih.isSpacer(t))return t}return null}},ah=class extends rh{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ih.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let i=0;i<this.elements.length;i++){const o=this.elements[i];t+=o.width,ih.isSpacer(o)||(ih.isNextConnection(o)?n=Math.max(n,o.height):e=Math.max(e,o.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.descenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},sh=class extends oh{constructor(e,t){super(e),this.connectionModel=t,this.type|=ih.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},lh=class extends sh{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ih.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},ch=class extends lh{constructor(e,t){super(e,t),this.height=0,this.type|=ih.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},uh=class extends oh{constructor(e,t,n){super(e),this.field=t,this.parentInput=n,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=ih.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},dh=class extends oh{constructor(e){super(e),this.type|=ih.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},hh=class extends oh{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.isVisible=mo(t)&&t.bubbleIsVisible(),this.type|=ih.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},ph=class extends oh{constructor(e,t){super(e),this.type=this.type|ih.SPACER|ih.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},fh=class extends lh{constructor(e,t){super(e,t),this.type|=ih.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},gh=class extends lh{constructor(e,t){super(e,t),this.type|=ih.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},mh=class extends rh{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=ih.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const n=this.elements[t];this.width+=n.width,ih.isInput(n)&&n instanceof lh&&(ih.isStatementInput(n)&&n instanceof gh?e+=n.connectedBlockWidth:ih.isExternalInput(n)&&n instanceof ch&&0!==n.connectedBlockWidth&&(e+=n.connectedBlockWidth-n.connectionWidth)),ih.isSpacer(n)||(this.height=Math.max(this.height,n.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},_h=class extends oh{constructor(e){super(e),this.type|=ih.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},vh=class extends sh{constructor(e,t){super(e,t),this.type|=ih.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},bh=class extends sh{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=ih.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Th=class extends sh{constructor(e,t){super(e,t),this.type|=ih.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Ah=class extends oh{constructor(e,t){super(e),this.type=(t&&"left"!==t?ih.RIGHT_ROUND_CORNER:ih.LEFT_ROUND_CORNER)|ih.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},yh=class extends rh{constructor(e,t,n){super(e),this.height=t,this.width=n,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ih.SPACER|ih.BETWEEN_ROW_SPACER,this.elements=[new ph(this.constants_,n)]}measure(){}},Eh=class extends oh{constructor(e,t){super(e),this.type=(t&&"left"!==t?ih.RIGHT_SQUARE_CORNER:ih.LEFT_SQUARE_CORNER)|ih.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Sh=class extends rh{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ih.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||!!n&&n.getNextBlock()===e}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,n=0;for(let i=0;i<this.elements.length;i++){const o=this.elements[i];t+=o.width,ih.isSpacer(o)||(ih.isHat(o)&&o instanceof dh?n=Math.max(n,o.ascenderHeight):e=Math.max(e,o.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+n,this.capline=this.ascenderHeight=n,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ch=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ir(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const n in t)this.blockStyles[n]=this.validatedBlockStyle_(t[n]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=void 0!==e.startHats?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=me("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&0===e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=Do(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Do(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Do(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return Co("#fff",e,.6)||e}generateTertiaryColour_(e){return Co("#fff",e,.3)||e}dispose(){this.embossFilter&&se(this.embossFilter),this.disabledPattern&&se(this.disabledPattern),this.debugFilter&&se(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH;return{height:e,width:t,path:rr([er(t,e/4),er(2*-t,e/2),er(t,e/4)])}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:tr("c",[er(30,-e),er(70,-e),er(t,0)])}}makePuzzleTab(){function e(e){const i=-(e=e?-1:1);var o=n/2;const r=o+2.5,a=o+.5,s=er(-t,e*o);return o=er(t,e*o),tr("c",[er(0,e*r),er(-t,i*a),s])+tr("s",[er(t,2.5*i),o])}const t=this.TAB_WIDTH,n=this.TAB_HEIGHT,i=e(!0),o=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:n,pathDown:o,pathUp:i}}makeNotch(){function e(e){return rr([er(e*i,n),er(3*e,0),er(e*i,-n)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,i=(t-3)/2,o=e(1),r=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:o,pathRight:r}}makeInsideCorners(){const e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:sr("a","0 0,0",e,er(-e,e)),pathBottom:sr("a","0 0,0",e,er(e,e))}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=ir(0,e)+sr("a","0 0,1",e,er(e,-e)),n=sr("a","0 0,1",e,er(e,e)),i=sr("a","0 0,1",e,er(-e,-e));return{topLeft:t,topRight:n,bottomRight:sr("a","0 0,1",e,er(-e,e)),bottomLeft:i,rightHeight:e}}shapeFor(e){switch(e.type){case Vc.INPUT_VALUE:case Vc.OUTPUT_VALUE:return this.PUZZLE_TAB;case Vc.PREVIOUS_STATEMENT:case Vc.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,n){this.injectCSS_(t,n),this.defs=ne(bl.DEFS,{},e),e=ne(bl.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),ne(bl.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=ne(bl.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),ne(bl.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),ne(bl.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),ne(bl.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=ne(bl.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),ne(bl.RECT,{width:10,height:10,fill:"#aaa"},e),ne(bl.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=ne(bl.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=ne(bl.FECOMPONENTTRANSFER,{result:"outBlur"},e);ne(bl.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),ne(bl.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),ne(bl.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const n=t.join("\n");this.cssNode?this.cssNode.firstChild.textContent=n:((t=document.createElement("style")).id=e,e=document.createTextNode(n),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},wh=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){te("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=ir(e.xPos,this.info_.startY);for(let n,i=0;n=t[i];i++)ih.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ih.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ih.isPreviousConnection(n)&&n instanceof sh?this.outlinePath_+=n.shape.pathLeft:ih.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:ih.isSpacer(n)&&(this.outlinePath_+=ar("h",n.width));this.outlinePath_+=ar("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+ar("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const n=Tr(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=ar("H",t.xPos+t.width)+n+ar("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var n=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+ar("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var i=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=ar("H",n)+t+ar("v",i)+this.constants_.INSIDE_CORNERS.pathBottom+ar("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=ar("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let n=0,i="";for(let o,r=t.length-1;o=t[r];r--)ih.isNextConnection(o)&&o instanceof sh?i+=o.shape.pathRight:ih.isLeftSquareCorner(o)?i+=ar("H",e.xPos):ih.isLeftRoundedCorner(o)?i+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ih.isRightRoundedCorner(o)?(i+=this.constants_.OUTSIDE_CORNERS.bottomRight,n=this.constants_.OUTSIDE_CORNERS.rightHeight):ih.isSpacer(o)&&(i+=ar("h",-1*o.width));this.outlinePath_+=ar("V",e.baseline-n),this.outlinePath_+=i}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Tr(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=ar("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e,t=0;e=this.info_.rows[t];t++)for(let n,i=0;n=e.elements[i];i++)ih.isInlineInput(n)?this.drawInlineInput_(n):(ih.isIcon(n)||ih.isField(n))&&this.layoutField_(n)}layoutField_(e){const t=e.centerline-e.height/2;let n=e.xPos;var i="";this.info_.RTL&&(n=-(n+e.width),e.flipRtl&&(n+=e.width,i="scale(-1 1)")),ih.isIcon(e)?((i=e.icon).setOffsetInBlock(new ll(n,t)),this.info_.isInsertionMarker&&i.hideForInsertionMarker()):((e=e.field.getSvgRoot()).setAttribute("transform","translate("+n+","+t+")"+i),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,n=e.height,i=e.connectionOffsetY,o=e.connectionHeight+i;this.inlinePath_+=nr(e.xPos+e.connectionWidth,e.centerline-n/2)+ar("v",i)+e.shape.pathDown+ar("v",n-o)+ar("h",t-e.connectionWidth)+ar("v",-n)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(null!=t&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements)if(t instanceof sh)if(t.highlighted)this.drawConnectionHighlightPath(t);else{let e,n;null==(n=(e=this.block_.pathObject).removeConnectionHighlight)||n.call(e,t.connectionModel)}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Vc.INPUT_VALUE||t.type===Vc.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const n=t.getSourceBlock();let i,o;null==(o=(i=n.pathObject).addConnectionHighlight)||o.call(i,t,e,t.getOffsetInBlock(),n.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Tr(e.shape)?t=e.shape.pathDown(e.height):Ar(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,ir(0,-e)+ar("v",e)+t+ar("v",e)}getStatementConnectionHighlightPath(e){if(!yr(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ir(-t,0)+ar("h",t)+e.shape.pathLeft+ar("h",t)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(La.Align$$module$build$src$core$inputs$align||(La.Align$$module$build$src$core$inputs$align={})),La.Align$$module$build$src$core$inputs$align;var xh=class extends Sd{constructor(e,t,n){super(Sd.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Sd.SKIP_SETUP&&(n?this.configure_(n):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&ie(this.getTextElement(),this.class)}doClassValidation_(e){return null==e?null:`${e}`}setClass(e){this.textElement_&&(this.class&&re(this.textElement_,this.class),e&&ie(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Ro(e.text),void 0,e)}};Oo("field_label",xh),xh.prototype.DEFAULT_VALUE="";var Mh=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=La.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=La.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return t||""===t&&n?("string"==typeof t&&(t=La.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(t.init(),t.applyColour()),t.name=n,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),e):e}removeField(e,t){for(let n,i=0;n=this.fieldRow[i];i++)if(n.name===e)return n.dispose(),this.fieldRow.splice(i,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let i,o=0;i=this.fieldRow[o];o++)i.setVisible(e);if(this.connection){var n=this.connection;e?t=n.startTrackingAll():n.stopTrackingAll(),(n=n.targetBlock())&&(n.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e,t=0;e=this.fieldRow[t];t++)e.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()}dispose(){for(let e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}};(function(e){(e=e.Align||(e.Align={}))[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(Mh||(Mh={})),La.Align$$module$build$src$core$inputs$input=Mh.Align,{Align:La.Align$$module$build$src$core$inputs$input}.Input=Mh;var Rh=class extends Mh{constructor(e,t){super(e,t),this.name=e,this.type=La.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Ih=class extends Mh{constructor(e,t){super(e,t),this.name=e,this.type=La.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Dh=class extends Mh{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=La.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Vc.NEXT_STATEMENT)}};La.ValueInput$$module$build$src$core$inputs$value_input=class extends Mh{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=La.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Vc.INPUT_VALUE)}},La.ValueInput$$module$build$src$core$inputs$value_input;var kh=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new bh(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Sh(this.constants_),this.bottomRow=new ah(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new mh(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let n,i=0;n=t[i];i++){const t=new hh(this.constants_,n);this.isCollapsed&&!n.isShownWhenCollapsed()||e.elements.push(t)}t=void 0;for(let n,i=0;n=this.block_.inputList[i];i++)if(n.isVisible()){this.shouldStartNewRow_(n,t)&&(this.rows.push(e),e=new mh(this.constants_),this.inputRows.push(e));for(let t,i=0;t=n.fieldRow[i];i++)e.elements.push(new uh(this.constants_,t,n));this.addInput_(n,e),t=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new _h(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let n=this.topRow.hasLeftSquareCorner(this.block_)?Eh:Ah;this.topRow.elements.push(new n(this.constants_)),t?(e=new dh(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Th(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Dh&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,n=this.topRow.hasRightSquareCorner(this.block_)?Eh:Ah,this.topRow.elements.push(new n(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Dh?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Eh(this.constants_)):this.bottomRow.elements.push(new Ah(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new vh(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Eh(this.constants_,"right")):this.bottomRow.elements.push(new Ah(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof La.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new fh(this.constants_,e)),t.hasInlineInput=!0):e instanceof Dh?(t.elements.push(new gh(this.constants_,e)),t.hasStatement=!0):e instanceof La.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ch(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Rh||e instanceof Ih)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),null===t.align&&(t.align=e.align)}shouldStartNewRow_(e,t){return!!t&&(t instanceof Ih||e instanceof Dh||t instanceof Dh||(e instanceof La.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Rh||t instanceof La.ValueInput$$module$build$src$core$inputs$value_input)&&!this.isInline)}addElemSpacing_(){for(let e,t=0;e=this.rows[t];t++){const t=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new ph(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let n=0;n<t.length-1;n++){e.elements.push(t[n]);const i=this.getInRowSpacing_(t[n],t[n+1]);e.elements.push(new ph(this.constants_,i))}e.elements.push(t[t.length-1]),e.endsWithElemSpacer()&&e.elements.push(new ph(this.constants_,this.getInRowSpacing_(t[t.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&ih.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&ih.isInput(e)&&!t){if(ih.isExternalInput(e))return this.constants_.NO_PADDING;if(ih.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ih.isStatementInput(e))return this.constants_.NO_PADDING}return e&&ih.isLeftSquareCorner(e)&&t&&(ih.isPreviousConnection(t)||ih.isNextConnection(t))?t.notchOffset:e&&ih.isLeftRoundedCorner(e)&&t&&(ih.isPreviousConnection(t)||ih.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,n=0;for(let o,r=0;o=this.rows[r];r++){if(o.measure(),t=Math.max(t,o.width),o.hasStatement){var i=o.getLastInput();let t,n;i=o.width-(null!=(n=null==(t=i)?void 0:t.width)?n:0),e=Math.max(e,i)}n=Math.max(n,o.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let o,r=0;o=this.rows[r];r++)o.hasStatement&&(o.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t,n=0;t=this.rows[n];n++)if(t.hasStatement)this.alignStatementRow_(t);else{var e=t.width;0<(e=this.getDesiredRowWidth_(t)-e)&&this.addAlignmentPadding_(t,e),ih.isTopOrBottomRow(t)&&(t.widthWithConnectedBlocks=t.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const n=e.getFirstSpacer(),i=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===La.Align$$module$build$src$core$inputs$align.LEFT&&i)i.width+=t;else if(e.align===La.Align$$module$build$src$core$inputs$align.CENTRE&&n&&i)n.width+=t/2,i.width+=t/2;else if(e.align===La.Align$$module$build$src$core$inputs$align.RIGHT&&n)n.width+=t;else{if(!i)return;i.width+=t}e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var n=e.width-t.width,i=this.statementEdge;0<(n=i-n)&&this.addAlignmentPadding_(e,n),n=e.width,i=this.getDesiredRowWidth_(e),t.width+=i-n,t.height=Math.max(t.height,e.height),e.width+=i-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var n=this.getSpacerRowHeight_(e,t);const i=this.getSpacerRowWidth_(e,t);return n=new yh(this.constants_,n,i),e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return ih.isSpacer(t)?e.yPos+t.height/2:ih.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,ih.isNextConnection(t)?e+t.height/2:e-t.height/2):ih.isTopRow(e)?ih.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let n,i=0;n=e.elements[i];i++)ih.isSpacer(n)&&(n.height=e.height),n.xPos=t,n.centerline=this.getElemCenterline_(e,n),t+=n.width}finalize_(){let e=0,t=0;for(let n,i=0;n=this.rows[i];i++)n.yPos=t,n.xPos=this.startX,t+=n.height,e=Math.max(e,n.widthWithConnectedBlocks),this.recordElemPositions_(n);if(this.outputConnection&&this.block_.nextConnection){const t=this.block_.nextConnection.targetBlock();t&&(e=Math.max(e,t.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if((null==(t=this.outputConnection)?void 0:t.connectionModel)===e)return this.outputConnection;for(const n of this.rows)for(const t of n.elements)if(t instanceof sh&&t.connectionModel===e)return t;return null}},Lh=class{constructor(e,t,n){if(this.wsCoordinate=null,!t)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=Lh.isConnectionType(e),this.location=t,this.processParams(n||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const t=e.getSourceBlock();for(e=t.inputList.indexOf(e),e+=1;e<t.inputList.length;e++){const n=t.inputList[e],i=n.fieldRow;for(let e=0;e<i.length;e++){const t=i[e];if(t.isClickable()||Lh.NAVIGATE_ALL_FIELDS)return Lh.createFieldNode(t)}if(n.connection)return Lh.createInputNode(n)}return null}findNextForField(){var e=this.location,t=e.getParentInput();const n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var i=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;i<n.inputList.length;i++){const o=(t=n.inputList[i]).fieldRow;for(;e<o.length;){if(o[e].isClickable()||Lh.NAVIGATE_ALL_FIELDS)return Lh.createFieldNode(o[e]);e++}if(e=0,t.connection)return Lh.createInputNode(t)}return null}findPrevForInput(){const e=this.location.getParentInput(),t=e.getSourceBlock();for(var n=t.inputList.indexOf(e);0<=n;n--){var i=t.inputList[n];if(i.connection&&i!==e)return Lh.createInputNode(i);for(let e=(i=i.fieldRow).length-1;0<=e;e--){const t=i[e];if(t.isClickable()||Lh.NAVIGATE_ALL_FIELDS)return Lh.createFieldNode(t)}}return null}findPrevForField(){var e=this.location;const t=e.getParentInput(),n=e.getSourceBlock();if(!n)throw Error("The current AST location is not associated with a block");var i=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)-1;0<=i;i--){var o=n.inputList[i];if(o.connection&&o!==t)return Lh.createInputNode(o);for(o=o.fieldRow;-1<e;){if(o[e].isClickable()||Lh.NAVIGATE_ALL_FIELDS)return Lh.createFieldNode(o[e]);e--}0<=i-1&&(e=n.inputList[i-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var t=this.getLocation();if(t.getSourceBlock){var n=t.getSourceBlock();n&&(t=n)}if(!t||t.isDeadOrDying())return null;n=t.getRootBlock(),t=n.workspace.getTopBlocks(!0);for(let i=0;i<t.length;i++)if(n.id===t[i].id)return-1===(e=i+(e?1:-1))||e===t.length?null:Lh.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}findTopASTNodeForBlock(e){const t=Er(e);return t?Lh.createConnectionNode(t):Lh.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const t=Er(e);return t&&t.targetConnection&&t.targetConnection.getParentInput()?Lh.createInputNode(t.targetConnection.getParentInput()):Lh.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let t=0;t<e.length;t++){const n=e[t],i=n.fieldRow;for(let e=0;e<i.length;e++){const t=i[e];if(t.isClickable()||Lh.NAVIGATE_ALL_FIELDS)return Lh.createFieldNode(t)}if(n.connection)return Lh.createInputNode(n)}return null}getSourceBlock(){return this.getType()===Lh.types.BLOCK||this.getType()===Lh.types.STACK?this.getLocation():this.getType()===Lh.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Lh.types.STACK:return this.navigateBetweenStacks(!0);case Lh.types.OUTPUT:return Lh.createBlockNode(this.location.getSourceBlock());case Lh.types.FIELD:return this.findNextForField();case Lh.types.INPUT:return this.findNextForInput();case Lh.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return Lh.createConnectionNode(e);case Lh.types.PREVIOUS:return Lh.createBlockNode(this.location.getSourceBlock());case Lh.types.NEXT:return Lh.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Lh.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return Lh.createStackNode(e[0]);break;case Lh.types.STACK:return this.findTopASTNodeForBlock(this.location);case Lh.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Lh.types.INPUT:return Lh.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Lh.types.STACK:return this.navigateBetweenStacks(!1);case Lh.types.FIELD:return this.findPrevForField();case Lh.types.INPUT:return this.findPrevForInput();case Lh.types.BLOCK:var e=Er(this.location);if(!e)break;return Lh.createConnectionNode(e);case Lh.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return Lh.createConnectionNode(e);break;case Lh.types.NEXT:return Lh.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Lh.types.STACK:var e=this.location,t=e.getRelativeToSurfaceXY();return t=new ll(t.x,t.y+Lh.DEFAULT_OFFSET_Y),Lh.createWorkspaceNode(e.workspace,t);case Lh.types.OUTPUT:return(t=(e=this.location).targetConnection)?Lh.createConnectionNode(t):Lh.createStackNode(e.getSourceBlock());case Lh.types.FIELD:if(!(e=this.location.getSourceBlock()))throw Error("The current AST location is not associated with a block");return Lh.createBlockNode(e);case Lh.types.INPUT:return Lh.createBlockNode(this.location.getSourceBlock());case Lh.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Lh.types.PREVIOUS:case Lh.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case Lh.types.PREVIOUS:case Lh.types.NEXT:case Lh.types.INPUT:case Lh.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Lh(Lh.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const t=e.type;return t===Vc.INPUT_VALUE||t===Vc.NEXT_STATEMENT&&e.getParentInput()?Lh.createInputNode(e.getParentInput()):t===Vc.NEXT_STATEMENT?new Lh(Lh.types.NEXT,e):t===Vc.OUTPUT_VALUE?new Lh(Lh.types.OUTPUT,e):t===Vc.PREVIOUS_STATEMENT?new Lh(Lh.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Lh(Lh.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Lh(Lh.types.BLOCK,e):null}static createStackNode(e){return e?new Lh(Lh.types.STACK,e):null}static createWorkspaceNode(e,t){return t&&e?new Lh(Lh.types.WORKSPACE,e,{wsCoordinate:t}):null}static createTopNode(e){const t=Er(e);return t?Lh.createConnectionNode(t):Lh.createBlockNode(e)}};Lh.NAVIGATE_ALL_FIELDS=!1,Lh.DEFAULT_OFFSET_Y=-20,function(e){(e=e.types||(e.types={})).FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace"}(Lh||(Lh={}));var Oh=class extends xs{constructor(e,t,n,i){let o=e?e.workspace.id:void 0;i&&i.getType()===Lh.types.WORKSPACE&&(o=i.getLocation().id),super(o),this.type=rs,this.blockId=null==e?void 0:e.id,this.oldNode=n||void 0,this.newNode=i,this.isCursor=t}toJson(){const e=super.toJson();if(void 0===this.isCursor)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Oh)).isCursor=e.isCursor,t.blockId=e.blockId,t.oldNode=e.oldNode,t.newNode=e.newNode,t}};e(Ba.EVENT,rs,Oh);var Ph="blocklyCursor",Nh="blocklyMarker",$h=.75,Bh=class{constructor(e,t,n){this.workspace=e,this.marker=n,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=t,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return"cursor"===this.marker.type}createDom(){const e=this.isCursor()?Ph:Nh;return this.svgGroup_=ne(bl.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,t){if(t){this.constants_=this.workspace.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||n,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent(e,t),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const t=e.getLocation().type;e.getType()===Lh.types.BLOCK?this.showWithBlock_(e):e.getType()===Lh.types.OUTPUT?this.showWithOutput_(e):t===Vc.INPUT_VALUE?this.showWithInput_(e):t===Vc.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Lh.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Lh.types.FIELD?this.showWithField_(e):e.getType()===Lh.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Lh.types.STACK&&this.showWithStack_(e)}showWithBlockPrevOutput(e){const t=(e=e.getSourceBlock()).width;var n=e.height,i=n*$h;const o=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(n=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,o,i,n)):e.outputConnection?(i=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,i)):this.positionBlock_(t,o,i),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){const t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()}showWithInput_(e){const t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()}showWithNext_(e){var t=e.getLocation();e=t.getSourceBlock();let n=0;t=t.getOffsetInBlock().y;const i=e.getHeightWidth().width;this.workspace.RTL&&(n=-i),this.positionLine_(n,t,i),this.setParent_(e),this.showCurrent_()}showWithStack_(e){var t=(e=e.getLocation()).getHeightWidth();const n=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;const i=-this.constants_.CURSOR_STACK_PADDING/2,o=-this.constants_.CURSOR_STACK_PADDING/2;let r=i;this.workspace.RTL&&(r=-(n+i)),this.positionRect_(r,o,n,t),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,t,n){if(e=ir(-t,n)+ar("V",-t)+ar("H",e+2*t)+ar("V",n),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=nr(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,t,n){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${t}`),this.markerSvgLine_.setAttribute("width",`${n}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,t,n){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=ir(e,0)+ar("h",-(e-n.width))+ar("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+ar("V",t)+ar("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,t,n,i){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=ir(-t,n)+ar("V",-t)+ar("H",this.constants_.NOTCH_OFFSET_LEFT)+i.pathLeft+ar("H",e+2*t)+ar("V",n),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,t,n,i){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${t}`),this.markerSvgRect_.setAttribute("width",`${n}`),this.markerSvgRect_.setAttribute("height",`${i}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,t){const n=t.getSourceBlock();e=new($(rs))(n,this.isCursor(),e,t),M(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=ne(bl.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=ne(bl.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=ne(bl.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=ne(bl.PATH,{transform:""},this.markerSvg_),this.markerBlock_=ne(bl.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();ne(bl.ANIMATE,e,this.markerSvgLine_),ne(bl.ANIMATE,e,this.markerInput_),ne(bl.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&se(this.svgGroup_)}},Fh=class{constructor(e,t,n){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=n,this.style=t,this.svgRoot=e,this.svgPath=ne(bl.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?ie(this.svgRoot,e):re(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,n,i){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,t,n))return;this.removeConnectionHighlight(e)}t=ne(bl.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:`translate(${n.x}, ${n.y})`+(i?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,t)}currentHighlightMatchesNew(e,t,n){let i;const o=null==(i=this.connectionHighlights.get(e))?void 0:i.getAttribute("d");return e=this.highlightOffsets.get(e),o===t&&ll.equals(e,n)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(se(t),this.connectionHighlights.delete(e))}},Uh=class{constructor(e,t){this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const t=Vc.INPUT_VALUE,n=this.getSourceBlock();var i=e.getSourceBlock();let o,r;if(e.isConnected()&&e.disconnectInternal(!1),this.isConnected()){const e=this.stashShadowState(),t=this.targetBlock();t.isShadow()?t.dispose(!1):(this.disconnectInternal(),o=t),this.applyShadowState(e)}L()&&(r=new($(La.MOVE$$module$build$src$core$events$utils))(i),r.setReason(["connect"])),Sr(this,e),i.setParent(n),r&&(r.recordNew(),M(r)),o&&(e=this.type===t?o.outputConnection:o.previousConnection)&&((i=Uh.getConnectionForOrphanedConnection(i,e))?e.connect(i):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Vc.INPUT_VALUE||this.type===Vc.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=La.getGroup$$module$build$src$core$events$utils();t||La.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),La.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(!t||!n)throw Error("Source connection not connected.");const i=La.getGroup$$module$build$src$core$events$utils();let o;i||La.setGroup$$module$build$src$core$events$utils(!0),L()&&(o=new($(La.MOVE$$module$build$src$core$events$utils))(n.getSourceBlock()),o.setReason(["disconnect"]));const r=this.targetConnection;r&&(r.targetConnection=null),this.targetConnection=null,e&&n.getSourceBlock().setParent(null),o&&(o.recordNew(),M(o)),n.getSourceBlock().isShadow()||t.respawnShadow_(),La.setGroup$$module$build$src$core$events$utils(i)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){return!(this.getSourceBlock().isDeadOrDying()||(t=null==(n=e.getInput(t))?void 0:n.connection,(n=this.targetBlock())&&n!==e||!t||t.targetConnection===this||(t.isConnected()&&t.disconnect(),t.connect(this),0)));var n}targetBlock(){if(this.isConnected()){let e,t;return null!=(t=null==(e=this.targetConnection)?void 0:e.getSourceBlock())?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?Pt(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?rn(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let n=0;n<t.length;n++)if(t[n].connection===this){e=t[n];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let n,i=0;n=e.inputList[i];i++)if(n.connection===this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,(e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(e){var t=this.getSourceBlock();const n=this.getShadowState(),i=this.getShadowDom();if(t.isDeadOrDying()||!n&&!i)return null;if(n)return gn(n,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(i){if(t=Gt(i,t.workspace),e)if(this.type===Vc.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else{if(this.type!==Vc.NEXT_STATEMENT)throw Error("Cannot connect a shadow block to a previous/output connection");if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}return t}return null}serializeShadow(e){e&&(this.shadowDom=Pt(e),this.shadowState=rn(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Vc.OUTPUT_VALUE)return wr(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const n=t.getConnectionChecker();return e&&n.canConnect(t,e,!1)?e:null}};Uh.CAN_CONNECT=0,Uh.REASON_SELF_CONNECTION=1,Uh.REASON_WRONG_TYPE=2,Uh.REASON_TARGET_NULL=3,Uh.REASON_CHECKS_FAILED=4,Uh.REASON_DIFFERENT_WORKSPACES=5,Uh.REASON_SHADOW_PARENT=6,Uh.REASON_DRAG_CHECKS_FAILED=7,Uh.REASON_PREVIOUS_AND_OUTPUT=8;var Gh="_TEMP_COLLAPSED_INPUT",Vh="_TEMP_COLLAPSED_FIELD",Hh={COLLAPSED_FIELD_NAME:Vh,COLLAPSED_INPUT_NAME:Gh},Wh="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",zh=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,m(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){La.disable$$module$build$src$core$events$utils(),this.hidePreview(),La.enable$$module$build$src$core$events$utils();var{local:e,closest:t}=this.activeCandidate;if(e.connect(t),this.topBlock.rendered){const n=e.isSuperior()?t:e,i=this.topBlock.getRootBlock();yt().then((()=>{Ni(n.getSourceBlock()),setTimeout((()=>{i.bringToFront()}),0)}))}}}update(e,t){const n=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!n,t))||this.shouldUpdatePreviews(n,e))&&(La.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(n),this.maybeShowPreview(n),La.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){var t=e.type;let n;La.disable$$module$build$src$core$events$utils();try{if(n=this.workspace.newBlock(t),n.setInsertionMarker(!0),e.saveExtraState){var i=e.saveExtraState(!0);i&&n.loadExtraState&&n.loadExtraState(i)}else if(e.mutationToDom){const t=e.mutationToDom();t&&n.domToMutation&&n.domToMutation(t)}for(t=0;t<e.inputList.length;t++){const o=e.inputList[t];if(o.name===Gh)continue;const r=n.inputList[t];if(!r)throw Error(Wh.replace("%1","an input"));for(i=0;i<o.fieldRow.length;i++){const e=o.fieldRow[i],t=r.fieldRow[i];if(!t)throw Error(Wh.replace("%1","a field"));t.setValue(e.getValue())}}for(const e of n.getDescendants(!1))e.setInsertionMarker(!0);n.setCollapsed(e.isCollapsed()),n.setInputsInline(e.getInputsInline()),n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{La.enable$$module$build$src$core$events$utils()}return n}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),t=this.topBlock.lastConnectionInStack(!0);return t&&t!==this.topBlock.nextConnection&&(e.push(t),this.lastOnStack=t),e}shouldUpdatePreviews(e,t){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:n,closest:i}=this.activeCandidate;if(i===e.closest&&n===e.local)return!1;const o=n.x+t.x-i.x;return t=n.y+t.y-i.y,e.radius<Math.sqrt(o*o+t*t)-La.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let t=this.getStartRadius(),n=null;for(let i=0;i<this.availableConnections.length;i++){const o=this.availableConnections[i],r=o.closest(t,e);r.connection&&(n={closest:r.connection,local:o,radius:r.radius},t=r.radius)}return n}getStartRadius(){return this.activeCandidate?La.config$$module$build$src$core$config.connectingSnapRadius:La.config$$module$build$src$core$config.snapRadius}shouldDelete(e,t){return!(!t||!this.workspace.getComponentManager().hasCapability(t.id,ol.Capability.DELETE_AREA))&&t.wouldDelete(this.topBlock,e)}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var t,n=e.closest;n===(null==(t=this.activeCandidate)?void 0:t.closest)||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const t=this.workspace.getRenderer();switch(t.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case zh.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case zh.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case zh.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}t.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(e){if(this.activeCandidate){const t=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||t||this.wouldDeleteBlock)&&this.hidePreview()}}else this.hidePreview();this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const t=null==(e=this.activeCandidate)?void 0:e.closest;t&&t.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(t)&&t.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:t,closest:n}=e;let i,o=(e=this.lastOnStack&&t===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");try{i=o.getMatchingConnection(t.getSourceBlock(),t)}catch(l){if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),o=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),o=this.firstMarker=this.createMarkerBlock(this.topBlock)),!o)throw Error("Cannot show the insertion marker because there is no insertion marker block");i=o.getMatchingConnection(t.getSourceBlock(),t)}if(!i)throw Error("Cannot show the insertion marker because there is no associated connection");if(i===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.queueRender(),Et(),i.connect(n);const r={x:n.x-i.x,y:n.y-i.y},a=i.getOffsetInBlock().clone(),s=i;yt().then((()=>{let e,t;null==(e=o)||e.positionNearConnection(s,r,a),null==(t=o)||t.getSvgRoot().setAttribute("visibility","visible")})),this.markerConnection=i}hideInsertionMarker(){if(this.markerConnection){var e,t=this.markerConnection,n=t.getSourceBlock(),i=n.outputConnection;if(null!=(e=n.previousConnection)&&e.targetConnection||null!=i&&i.targetConnection)n.unplug(!0);else{let e;null==(e=t.targetBlock())||e.unplug(!1)}if(t.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){La.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{La.enable$$module$build$src$core$events$utils()}}}};(function(e){(e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}))[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(zh||(zh={})),zh.PREVIEW_TYPE;var jh=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())}refreshDom(e,t){const n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Ch}makeRenderInfo_(e){return new kh(this,e)}makeDrawer_(e,t){return new wh(e,t)}makeMarkerDrawer(e,t){return new Bh(e,this.getConstants(),t)}makePathObject(e,t){return new Fh(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,n){return!!Uh.getConnectionForOrphanedConnection(e,n===Vc.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}getConnectionPreviewMethod(e,t,n){return te("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Vc.OUTPUT_VALUE||t.type===Vc.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),t.type)?zh.PREVIEW_TYPE.INSERTION_MARKER:zh.PREVIEW_TYPE.REPLACEMENT_FADE:zh.PREVIEW_TYPE.INSERTION_MARKER}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Xh={};Xh.BottomRow=ah,Xh.Connection=sh,Xh.ConstantProvider=Ch,Xh.Drawer=wh,Xh.ExternalValueInput=ch,Xh.Field=uh,Xh.Hat=dh,Xh.Icon=hh,Xh.InRowSpacer=ph,Xh.InlineInput=fh,Xh.InputConnection=lh,Xh.InputRow=mh,Xh.JaggedEdge=_h,Xh.MarkerSvg=Bh,Xh.Measurable=oh,Xh.NextConnection=vh,Xh.OutputConnection=bh,Xh.PathObject=Fh,Xh.PreviousConnection=Th,Xh.RenderInfo=kh,Xh.Renderer=jh,Xh.RoundCorner=Ah,Xh.Row=rh,Xh.SpacerRow=yh,Xh.SquareCorner=Eh,Xh.StatementInput=gh,Xh.TopRow=Sh,Xh.Types=ih,Xh.init=Rr,Xh.register=xr,Xh.unregister=Mr;var Yh=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&re(e,t),(t=this.theme.getClassName())&&ie(e,t));for(let n,i=0;n=this.subscribedWorkspaces_[i];i++)n.refreshTheme();for(const[n,i]of this.componentDB)for(const o of i){e=o.element,t=o.propertyName;const i=this.theme&&this.theme.getComponentStyle(n);e.style.setProperty(t,i||"")}for(const n of this.subscribedWorkspaces_)n.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces_.push(e)}unsubscribeWorkspace(e){if(!Z(this.subscribedWorkspaces_,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,n){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:n}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(n,t||"")}unsubscribe(e){if(e)for(const[t,n]of this.componentDB){for(let t=n.length-1;0<=t;t--)n[t].element===e&&n.splice(t,1);n.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},qh="VARIABLE_DYNAMIC",Kh={CATEGORY_NAME:qh};Kh.flyoutCategory=Lr,Kh.flyoutCategoryBlocks=Or,Kh.onCreateVariableButtonClick_Colour=kr,Kh.onCreateVariableButtonClick_Number=Dr,Kh.onCreateVariableButtonClick_String=Ir;var Qh=class{canConnect(e,t,n,i){return this.canConnectWithReason(e,t,n,i)===Uh.CAN_CONNECT}canConnectWithReason(e,t,n,i){const o=this.doSafetyChecks(e,t);return o!==Uh.CAN_CONNECT?o:this.doTypeChecks(e,t)?n&&!this.doDragChecks(e,t,i||0)?Uh.REASON_DRAG_CHECKS_FAILED:Uh.CAN_CONNECT:Uh.REASON_CHECKS_FAILED}getErrorMessage(e,t,n){switch(e){case Uh.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Uh.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Uh.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Uh.REASON_TARGET_NULL:return"Target connection is null.";case Uh.REASON_CHECKS_FAILED:return"Connection checks failed. "+t+" expected "+t.getCheck()+", found "+n.getCheck();case Uh.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Uh.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Uh.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Uh.REASON_TARGET_NULL;let n,i,o;return e.isSuperior()?(n=e.getSourceBlock(),i=t.getSourceBlock(),o=t):(i=e.getSourceBlock(),n=t.getSourceBlock(),o=e,e=t),n===i?Uh.REASON_SELF_CONNECTION:o.type!==Gu[e.type]?Uh.REASON_WRONG_TYPE:n.workspace!==i.workspace?Uh.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!i.isShadow()?Uh.REASON_SHADOW_PARENT:o.type===Vc.OUTPUT_VALUE&&i.previousConnection&&i.previousConnection.isConnected()||o.type===Vc.PREVIOUS_STATEMENT&&i.outputConnection&&i.outputConnection.isConnected()?Uh.REASON_PREVIOUS_AND_OUTPUT:Uh.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}doDragChecks(e,t,n){if(e.distanceFrom(t)>n||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Vc.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Vc.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Vc.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Vc.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return-1===za.indexOf(t)}canConnectToPrevious_(e,t){return!(e.targetConnection||-1!==za.indexOf(t)||t.targetConnection&&(!(e=t.targetBlock()).isInsertionMarker()||e.getPreviousBlock()))}};e(Ba.CONNECTION_CHECKER,$a,Qh);var Zh=class extends tc{constructor(e){super(e),this.type=Ja,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Zh)).varType=e.varType,t.varName=e.varName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)}};e(Ba.EVENT,Ja,Zh);var Jh=class extends tc{constructor(e,t){super(e),this.type=es,e&&(this.oldName=e.name,this.newName=void 0===t?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Jh)).oldName=e.oldName,t.newName=e.newName,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)}};e(Ba.EVENT,es,Jh);var ep=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(0!==this.variableMap.size)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.name!==t){var n=this.getVariable(t,e.type),i=this.workspace.getAllBlocks(!1),o=La.getGroup$$module$build$src$core$events$utils();o||La.setGroup$$module$build$src$core$events$utils(!0);try{n&&n.getId()!==e.getId()?this.renameVariableWithConflict_(e,t,n,i):this.renameVariableAndUses_(e,t,i)}finally{La.setGroup$$module$build$src$core$events$utils(o)}}}renameVariableById(e,t){const n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)}renameVariableAndUses_(e,t,n){for(M(new($(es))(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)}renameVariableWithConflict_(e,t,n,i){const o=e.type;for(t!==n.name&&this.renameVariableAndUses_(n,t,i),t=0;t<i.length;t++)i[t].renameVarById(e.getId(),n.getId());M(new($(Ja))(e)),Z(this.variableMap.get(o),e)}createVariable(e,t,n){var i=this.getVariable(e,t);if(i){if(n&&i.getId()!==n)throw Error('Variable "'+e+'" is already in use and its id is "'+i.getId()+'" which conflicts with the passed in id, "'+n+'".');return i}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return i=n||C(),t=t||"",i=new ic(this.workspace,e,t,i),(e=this.variableMap.get(t)||[]).push(i),this.variableMap.delete(t),this.variableMap.set(t,e),M(new($(Za))(i)),i}deleteVariable(e){const t=e.getId(),n=this.variableMap.get(e.type);if(n)for(let i=0;i<n.length;i++)if(n[i].getId()===t){n.splice(i,1),M(new($(Ja))(e)),0===n.length&&this.variableMap.delete(e.type);break}}deleteVariableById(e){const t=this.getVariableById(e);if(t){var n=t.name;const i=this.getVariableUsesById(e);for(let t,o=0;t=i[o];o++)if("procedures_defnoreturn"===t.type||"procedures_defreturn"===t.type)return e=String(t.getFieldValue("NAME")),n=La.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",n).replace("%2",e),void Ye(n);1<i.length?(n=La.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(i.length)).replace("%2",n),Ke(n,(e=>{e&&t&&this.deleteVariableInternal(t,i)}))):this.deleteVariableInternal(t,i)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,t){const n=La.getGroup$$module$build$src$core$events$utils();n||La.setGroup$$module$build$src$core$events$utils(!0);try{for(let e=0;e<t.length;e++)t[e].dispose(!0);this.deleteVariable(e)}finally{La.setGroup$$module$build$src$core$events$utils(n)}}getVariable(e,t){if(t=this.variableMap.get(t||""))for(let n,i=0;n=t[i];i++)if(La.Names$$module$build$src$core$names.equals(n.name,e))return n;return null}getVariableById(e){for(const t of this.variableMap.values())for(const n of t)if(n.getId()===e)return n;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const t=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const n of e.getPotentialVariableMap().variableMap.keys())t.add(n);return t.has("")||t.add(""),Array.from(t.values())}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(t);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map((e=>e.name))}getVariableUsesById(e){const t=[],n=this.workspace.getAllBlocks(!1);for(let i=0;i<n.length;i++){const o=n[i].getVarModels();if(o)for(let r=0;r<o.length;r++)o[r].getId()===e&&t.push(n[i])}return t}},tp=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new wd,this.potentialVariableMap=null,this.id=C(),d(this),this.options=e||new _d({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(l(Ba.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new ep(this)}dispose(){this.listeners.length=0,this.clear(),h(this)}sortObjects_(e,t){const n=Math.sin(ci(tp.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+n*e.x-(t.y+n*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Z(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Z(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&1<e.length&&e.sort(this.sortObjects_.bind(this)),e.filter((function(e){return!e.isInsertionMarker()}))):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Z(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let n=0;n<t.length;n++)e.push(...t[n].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter((function(e){return!e.isInsertionMarker()}))}clear(){this.isClearing=!0;try{const e=La.getGroup$$module$build$src$core$events$utils();for(e||La.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();La.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){this.variableMap.renameVariableById(e,t)}createVariable(e,t,n){return this.variableMap.createVariable(e,t,n)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,t){return this.variableMap.getVariable(e,t)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const n in e){if(e[n]>this.remainingCapacityOfType(n))return!1;t+=e[n]}return!(t>this.remainingCapacity())}hasBlockLimits(){return 1/0!==this.options.maxBlocks||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_;const i=t.pop();if(i){for(var o=[i];t.length&&i.group&&i.group===t[t.length-1].group;){const e=t.pop();e&&o.push(e)}for(t=0;t<o.length;t++)n.push(o[t]);o=D(o,e),w(!1);try{for(n=0;n<o.length;n++)o[n].run(e)}finally{w(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,k()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Z(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return null!=(t=this.commentDB.get(e))?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let n=0;n<t.length;n++)if(!t[n].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new ep(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return c(e)}static getAll(){return u()}};tp.SCAN_ANGLE=3;var np=100,ip=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var n=new globalThis.Audio}catch(o){return}for(let t=0;t<e.length;t++){const o=e[t],r=o.match(/\.(\w+)$/);if(r&&n.canPlayType("audio/"+r[1])){var i=new globalThis.Audio(o);break}}i&&this.sounds.set(t,i)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(void 0!==t?t.then(e.pause).catch((function(){})):e.pause(),Ys||qs)break}}play(e,t){if(!this.muted){var n=this.sounds.get(e);n?(e=new Date,null!==this.lastSound_&&e.getTime()-this.lastSound_.getTime()<np||(this.lastSound_=e,(n=Ys||Xs?n:n.cloneNode()).volume=void 0===t?1:t,n.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},op=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e)),e=this.createLayer(Nu),ie(e,"blocklyBlockCanvas"),e=this.createLayer($u),ie(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=ne(bl.SVG,{class:"blocklyBlockDragSurface",xmlns:hl,"xmlns:html":pl,"xmlns:xlink":fl,version:"1.1"});return e.append(t),ne(bl.G,{},t)}translateLayers(e,t){let n;e=`translate(${e.x}, ${e.y}) scale(${t})`,null==(n=this.dragLayer)||n.setAttribute("transform",e);for(const[,i]of this.layers)i.setAttribute("transform",e)}moveToDragLayer(e){let t;null==(t=this.dragLayer)||t.appendChild(e.getSvgRoot())}moveOffDragLayer(e,t){this.append(e,t)}append(e,t){let n;this.layers.has(t)||this.createLayer(t),null==(n=this.layers.get(t))||n.appendChild(e.getSvgRoot())}createLayer(e){const t=this.workspace.getSvgGroup(),n=ne(bl.G,{});let i=!1;const o=[...this.layers].sort(((e,t)=>e[0]-t[0]));for(const[r,a]of o)if(e<r){t.insertBefore(n,a),i=!0;break}return i||t.appendChild(n),this.layers.set(e,n),n}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(Nu)}getBubbleLayer(){return this.layers.get($u)}},rp=20,ap=class extends tp{constructor(e){let t;super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(l(Ba.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||ap.setTopLevelWorkspaceMetrics_,this.componentManager=new ol,this.connectionDBList=Wc.init(this.connectionChecker),this.audioManager=new ip(e.parentWorkspace),this.grid=this.options.gridPattern?new hd(this.options.gridPattern,e.gridOptions):null,this.markerManager=new pd(this),sc&&ot&&this.registerToolboxCategoryCallback(oc,ot),Kh&&Lr&&this.registerToolboxCategoryCallback(qh,Lr),th&&fr&&(this.registerToolboxCategoryCallback(eh,fr),this.addChangeListener(mr)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Yh(this,this.options.theme||md),this.themeManager_.subscribeWorkspace(this),this.renderer=Rr(this.options.renderer||"geras",this.getTheme(),null!=(t=this.options.rendererOverrides)?t:void 0),this.cachedParentSvgSize=new Al(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=md),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(e){return!!e.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new($(cs))(this.getTheme().name,this.id);M(e)}updateBlockStyles_(e){for(let t,n=0;t=e[n];n++){const e=t.getStyleName();e&&t.setStyle(e)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(e){let t=0,n=0,i=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(i=this.scale);do{const o=we(e);e!==this.getCanvas()&&e!==this.getBubbleCanvas()||(i=1),t+=o.x*i,n+=o.y*i,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new ll(t,n)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Al(e.width,e.height)}getOriginOffsetInPixels(){return xe(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if(-1!==(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=null!=t?t:null),this.svgGroup_=ne(bl.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=ne(bl.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"===e&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new op(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(z(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),z(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(l(Ba.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=l(Ba.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&se(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&se(e.parentNode)}this.resizeHandlerWrapper&&(X(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=ap.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new jl(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const t=new _d({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(l(Ba.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(l(Ba.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(ol.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),n=[];for(let i,o=0;i=e[o];o++){i.position(t,n);const e=i.getBoundingRectangle();e&&n.push(e)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const e=Re();ll.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const n=this.getParentSvg();null!=e&&(this.cachedParentSvgSize.width=e,n.setAttribute("data-cached-width",`${e}`)),null!=t&&(this.cachedParentSvgSize.height=t,n.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if("svg"===e.tagName){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(L()){var e=this.scale,t=-this.scrollY,n=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(t-this.oldTop)&&1>Math.abs(n-this.oldLeft))){var i=new($(us))(t,n,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=n,M(i)}}}translate(e,t){let n,i;null==(n=this.layerManager)||n.translateLayers(new ll(e,t),this.scale),null==(i=this.grid)||i.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.isVisible_=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e||this.hideChaff(!0))}render(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].queueRender();if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].queueRender();yt().then((()=>{this.markerManager.updateMarkers()}))}highlightBlock(e,t){if(void 0===t){for(let e,t=0;e=this.highlightedBlocks[t];t++)e.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=void 0===t||t)?-1===this.highlightedBlocks.indexOf(e)&&this.highlightedBlocks.push(e):Z(this.highlightedBlocks,e),e.setHighlighted(t))}paste(e){if(te("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!e.type&&!e.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const t=La.getGroup$$module$build$src$core$events$utils();let n;t||La.setGroup$$module$build$src$core$events$utils(!0);try{n=e.type?this.pasteBlock_(null,e):"comment"===e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e,null)}finally{La.setGroup$$module$build$src$core$events$utils(t)}return n}pasteBlock_(e,t){let n;La.disable$$module$build$src$core$events$utils();try{let i=0,o=0;if(e){let t,r;n=Gt(e,this),i=parseInt(null!=(t=e.getAttribute("x"))?t:"0"),this.RTL&&(i=-i),o=parseInt(null!=(r=e.getAttribute("y"))?r:"0")}else t&&(n=fn(t,this),i=t.x||10,this.RTL&&(i=this.getWidth()-i),o=t.y||10);if(!isNaN(i)&&!isNaN(o)){let e;do{e=!1;const t=this.getAllBlocks(!1);for(let n,r=0;n=t[r];r++){const t=n.getRelativeToSurfaceXY();if(1>=Math.abs(i-t.x)&&1>=Math.abs(o-t.y)){e=!0;break}}if(!e){const t=n.getConnections_(!1);for(let n,r=0;n=t[r];r++)if(n.closest(La.config$$module$build$src$core$config.snapRadius,new ll(i,o)).connection){e=!0;break}}e&&(i=this.RTL?i-La.config$$module$build$src$core$config.snapRadius:i+La.config$$module$build$src$core$config.snapRadius,o+=2*La.config$$module$build$src$core$config.snapRadius)}while(e);n.moveTo(new ll(i,o))}}finally{La.enable$$module$build$src$core$events$utils()}return L()&&!n.isShadow()&&M(new($(La.CREATE$$module$build$src$core$events$utils))(n)),n.select(),n}pasteWorkspaceComment_(e){let t;La.disable$$module$build$src$core$events$utils();try{t=gc.fromXmlRendered(e,this);let n,i,o=parseInt(null!=(n=e.getAttribute("x"))?n:"0"),r=parseInt(null!=(i=e.getAttribute("y"))?i:"0");isNaN(o)||isNaN(r)||(this.RTL&&(o=-o),t.moveBy(o+50,r+50))}finally{La.enable$$module$build$src$core$events$utils()}return L()&&lc.fireCreateEvent(t),t.select(),t}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()}renameVariableById(e,t){super.renameVariableById(e,t),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,t,n){return e=super.createVariable(e,t,n),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(ol.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t,n=0;t=e[n];n++){const e=t.getClientRect();e&&this.dragTargetAreas.push({component:t,clientRect:e})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t,n=0;t=this.dragTargetAreas[n];n++)if(t.clientRect.contains(e.clientX,e.clientY))return t.component;return null}onMouseDown_(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){(e=K(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY=ll.difference(t,e)}moveDrag(e){return(e=K(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,ll.sum(this.dragDeltaXY,e)}isDragging(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel_(e){if(dd.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var i=Q(e);if(Ks)var o=e.metaKey;t&&(e.ctrlKey||o||!n)?(i=-i.y/50,t=K(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,i)):(t=this.scrollX-i.x,n=this.scrollY-i.y,e.shiftKey&&!i.x&&(t=this.scrollX-i.y,n=this.scrollY),this.scroll(t,n)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new Tl(0,0,0,0);const t=e[0].getBoundingRectangle();for(let i=1;i<e.length;i++){var n=e[i];n.isInsertionMarker&&n.isInsertionMarker()||((n=n.getBoundingRectangle()).top<t.top&&(t.top=n.top),n.bottom>t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left),n.right>t.right&&(t.right=n.right))}return t}cleanUp(){this.setResizesEnabled(!1),La.setGroup$$module$build$src$core$events$utils(!0);const e=this.getTopBlocks(!0);let t=0;for(let n,i=0;n=e[i];i++){if(!n.isMovable())continue;const e=n.getRelativeToSurfaceXY();n.moveBy(-e.x,t-e.y,["cleanup"]),n.snapToGrid(),t=n.getRelativeToSurfaceXY().y+n.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}La.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var t=fu.registry.getContextMenuOptions(fu.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Jn(e,t,this.RTL)}}updateToolbox(e){if(e=Pe(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Be(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(f(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);const i=this.scale*n;if(this.scale!==i){i>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:i<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var o=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=e,r.y=t,e=(r=r.matrixTransform(o.inverse())).x,t=r.y,o=o.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=o.e,this.scrollY=o.f,this.setScale(i)}}zoomCenter(e){var t=this.getMetrics();let n;this.flyout?(n=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(n,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),i=2*rp,o=n.right-n.left+i;if(n=n.bottom-n.top+i,o){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),n+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),o+=this.flyout.getWidth()/this.scale)),t/=o,e/=n,La.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{La.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ie(this.getCanvas(),"blocklyCanvasTransitioning"),ie(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){re(this.getCanvas(),"blocklyCanvasTransitioning"),re(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,n=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,n=-n-e.scrollTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var n=e?this.getBlockById(e):null;if(n){e=n.getRelativeToSurfaceXY(),n=t?{height:n.height,width:n.width}:n.getHeightWidth();var i=this.scale;t=(e.x+(this.RTL?-1:1)*n.width/2)*i,e=(e.y+n.height/2)*i,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,t){this.hideChaff(!0);const n=this.getMetrics();e=Math.min(e,-n.scrollLeft),t=Math.min(t,-n.scrollTop);const i=n.scrollTop+Math.max(0,n.scrollHeight-n.viewHeight);e=Math.max(e,-(n.scrollLeft+Math.max(0,n.scrollWidth-n.viewWidth))),t=Math.max(t,-i),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+n.scrollLeft),-(t+n.scrollTop),!1),e+=n.absoluteLeft,t+=n.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Z(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return null!=(t=this.flyoutButtonCallbacks.get(e))?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const t="pointerdown"===e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new dd(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){so(),Vn(),Di(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(ol.Capability.AUTOHIDEABLE,!0).forEach((t=>t.autoHide(e)))}static setTopLevelWorkspaceMetrics_(e){const t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}},sp=class extends xs{constructor(e,t){super(t),this.type=ss,this.isOpen=e}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new sp)).isOpen=e.isOpen,t}};e(Ba.EVENT,ss,sp);var lp=class extends $c{constructor(e){if(super(e),this.type=La.DELETE$$module$build$src$core$events$utils,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=kt(e),this.ids=P(e),this.wasShadow=e.isShadow(),this.oldJson=rn(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(void 0===this.wasShadow)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=$t(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new lp)).oldXml=La.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||"shadow"===t.oldXml.tagName.toLowerCase(),t.oldJson=e.oldJson,void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const n=this.ids[e],i=t.getBlockById(n);i?i.dispose(!1):n===this.blockId&&console.warn("Can't delete non-existent block: "+n)}else fn(this.oldJson,t)}};e(Ba.EVENT,La.DELETE$$module$build$src$core$events$utils,lp);var cp=class{constructor(e,t,n){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=e,this.id=n&&!e.getBlockById(n)?n:C(),e.setBlockById(this.id,this),this.xy_=new ll(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,!(n=Va[t])||"object"!=typeof n)throw TypeError("Invalid block definition for type: "+t);Object.assign(this,n)}e.addTopBlock(this),e.addTypedBlock(this),new.target===cp&&this.doInit_()}doInit_(){const e=La.getGroup$$module$build$src$core$events$utils();e||La.setGroup$$module$build$src$core$events$utils(!0);const t=x();try{"function"==typeof this.init&&(w(!1),this.init(),w(t)),L()&&M(new($(La.CREATE$$module$build$src$core$events$utils))(this))}finally{La.setGroup$$module$build$src$core$events$utils(e),w(t)}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)}dispose(e){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),L()&&M(new($(La.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,"function"==typeof this.destroy&&this.destroy(),this.childBlocks_.forEach((e=>e.disposeInternal())),this.inputList.forEach((e=>e.dispose())),this.inputList.length=0,this.getConnections_(!0).forEach((e=>e.dispose())),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const e of this.inputList)for(const t of e.fieldRow)t.initModel&&t.initModel()}unplug(e){this.outputConnection&&this.unplugFromRow_(e),this.previousConnection&&this.unplugFromStack_(e)}unplugFromRow_(e){let t,n=null;null!=(t=this.outputConnection)&&t.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(null==(e=e.targetConnection)||e.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):null==e||e.onFailedConnect(n))}getOnlyValueConnection_(){let e=null;for(let t=0;t<this.inputList.length;t++){const n=this.inputList[t].connection;if(n&&n.type===Vc.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e}unplugFromStack_(e){let t=null;var n;if(null!=(n=this.previousConnection)&&n.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),n=this.getNextBlock(),e&&n&&!n.isShadow()){let n,i;null==(e=null!=(i=null==(n=this.nextConnection)?void 0:n.targetConnection)?i:null)||e.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const n=t.targetBlock();if(!n||e&&n.isShadow())return t;t=n.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()===e)return t;return null}getSurroundParent(){let e,t=this;do{if(e=t,t=t.getParent(),!t)return null}while(t.getNextBlock()===e);return t}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do{e=t,t=e.parentBlock_}while(t);return e}getTopStackBlock(){let e,t=this;do{e=t.getPreviousBlock()}while(e&&e.getNextBlock()===t&&(t=e));return t}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let n,i=0;n=this.inputList[i];i++)if(n.connection){var t=n.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),n=!!t;if(n&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!n&&e)throw Error("Block not connected to new parent.");if(n&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Z(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],n=this.getChildren(e);for(let i,o=0;i=n[o];o++)t.push(...i.getDescendants(e));return t}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(e){this.deletable_=e}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(e){this.movable_=e}isDuplicatable(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(T(this,!0))}isShadow(){return this.isShadow_}setShadow(e){this.isShadow_=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(e){this.editable_=e;for(let t,n=0;t=this.inputList[n];n++)for(let e,i=0;e=t.fieldRow[i];i++)e.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,t){const n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!==e.length)throw Error("Connection lists did not match in length.");for(let i=0;i<e.length;i++)if(e[i]===t)return n[i];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return Zi(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(e){e=Do(e),this.hue_=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=e,this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(e){if("string"!=typeof e)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(let t,n=0;t=this.inputList[n];n++)for(let i,o=0;i=t.fieldRow[o];o++)if(i.name===e)return i;return null}getVars(){const e=[];for(let t,n=0;t=this.inputList[n];n++)for(let i,o=0;i=t.fieldRow[o];o++)i.referencesVariables()&&e.push(i.getValue());return e}getVarModels(){const e=[];for(let t,n=0;t=this.inputList[n];n++)for(let i,o=0;i=t.fieldRow[o];o++)if(i.referencesVariables()){const t=this.workspace.getVariableById(i.getValue());t&&e.push(t)}return e}updateVarName(e){for(let t,n=0;t=this.inputList[n];n++)for(let i,o=0;i=t.fieldRow[o];o++)i.referencesVariables()&&e.getId()===i.getValue()&&i.refreshVariableName()}renameVarById(e,t){for(let n,i=0;n=this.inputList[i];i++)for(let o,r=0;o=n.fieldRow[r];r++)o.referencesVariables()&&e===o.getValue()&&o.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)}setPreviousStatement(e,t){if(e)void 0===t&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Vc.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Vc.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)void 0===t&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Vc.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(M(new($(La.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(void 0!==this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Rh&&this.inputList[e]instanceof Rh)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof La.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Rh)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Ih)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(e){if(this.isEnabled()!==e){const t=this.disabled;this.disabled=!e,M(new($(La.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,t,!e))}}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(M(new($(La.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let i=2;i<t.length;i++)"("===t[i-2]&&")"===t[i]&&(t[i-2]=t[i-1],t.splice(i-1,2));let n="";return t=(t=t.reduce(((e,t)=>(e=e+("("===n||")"===t?"":" ")+t,n=t[t.length-1],e)),"")).trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const i of this.inputList)if(i.name!=Gh){for(const e of i.fieldRow)t.push(e.getText());if(i.connection){const o=i.connection.targetBlock();if(o){var n=i.connection;let r=n.getCheck();!r&&n.targetConnection&&(r=n.targetConnection.getCheck()),(n=!!r&&(-1!==r.indexOf("Boolean")||-1!==r.indexOf("Number")))&&t.push("("),t.push(...o.toTokens(e)),n&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new La.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Dh(e,this))}appendDummyInput(e=""){return this.appendInput(new Rh(e,this))}appendEndRowInput(e=""){return this.appendInput(new Ih(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=r(Ba.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var n=0;e["args"+n];){if(void 0===e["message"+n])throw Error(t+`args${n} must have a corresponding message (message${n}).`);n++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t),n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["implicitAlign"+n]||e["lastDummyAlign"+n],t),n++;if(void 0!==e.inputsInline&&(La.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),La.enable$$module$build$src$core$events$utils()),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=Ro(e.tooltip),this.setTooltip(n)),void 0!==e.enableContextMenu&&(this.contextMenu=!!e.enableContextMenu),void 0!==e.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),void 0!==e.helpUrl&&(n=Ro(e.helpUrl),this.setHelpUrl(n)),"string"==typeof e.extensions&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&Vo(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Vo(e[t],this,!1)}jsonInitColour_(e,t){if("colour"in e)if(void 0===e.colour)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch(n){console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle_(e,t){e=e.style;try{this.setStyle(e)}catch(n){console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(void 0!==t&&"boolean"!=typeof t)throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const n in e)void 0!==this[n]&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate_(e,t,n,i){e=Mo(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,n),n=[];for(let o,r=0;o=t[r];r++)if(this.isInputKeyword_(o.type)){if(e=this.inputFromJson_(o,i)){for(let t,i=0;t=n[i];i++)e.appendField(t[0],t[1]);n.length=0}}else(e=this.fieldFromJson_(o))&&n.push([e,o.name])}validateTokens_(e,t){const n=[];let i=0;for(let o=0;o<e.length;o++){const r=e[o];if("number"==typeof r){if(1>r||r>t)throw Error('Block "'+this.type+'": Message index %'+r+" out of range.");if(n[r])throw Error('Block "'+this.type+'": Message index %'+r+" duplicated.");n[r]=!0,i++}}if(i!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments_(e,t,n){const i=[];for(let r=0;r<e.length;r++){var o=e[r];if("number"==typeof o&&(o=t[o-1]),"string"==typeof o)if("\n"===o)o={type:"input_end_row"},n&&(o.align=n);else if(!(o=this.stringToFieldJson_(o)))continue;i.push(o)}return(e=i.length)&&!this.isInputKeyword_(i[e-1].type)&&(e={type:"input_dummy"},n&&(e.align=n),i.push(e)),i}fieldFromJson_(e){const t=La.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t}inputFromJson_(e,t){var n={LEFT:La.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:La.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:La.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:La.Align$$module$build$src$core$inputs$align.CENTRE};let i;switch(e.type){case"input_value":i=this.appendValueInput(e.name);break;case"input_statement":i=this.appendStatementInput(e.name);break;case"input_dummy":i=this.appendDummyInput(e.name);break;case"input_end_row":i=this.appendEndRowInput(e.name);break;default:i=this.appendInputFromRegistry(e.type,e.name)}return i?(e.check&&i.setCheck(e.check),e.align&&(void 0===(n=n[e.align.toUpperCase()])?console.warn(t+"Illegal align value: ",e.align):i.setAlign(n)),i):null}isInputKeyword_(e){return"input_value"===e||"input_statement"===e||"input_dummy"===e||"input_end_row"===e||o(Ba.INPUT,e)}stringToFieldJson_(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var n=-1,i=t?-1:this.inputList.length;for(let o,r=0;o=this.inputList[r];r++)if(o.name===e){if(n=r,-1!==i)break}else if(t&&o.name===t&&(i=r,-1!==n))break;if(-1===n)throw Error('Named input "'+e+'" not found.');if(-1===i)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(n,i)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)}removeInput(e,t){for(let n,i=0;n=this.inputList[i];i++)if(n.name===e)return n instanceof Dh&&this.statementInputCount--,n.dispose(),this.inputList.splice(i,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t,n=0;t=this.inputList[n];n++)if(t.name===e)return t;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return null!=(t=null==(e=this.getIcon(qd.TYPE))?void 0:e.getText())?t:null}setCommentText(e){var t;let n;const i=null!=(n=null==(t=this.getIcon(qd.TYPE))?void 0:t.getText())?n:null;i!==e&&(null!==e?((t=this.getIcon(qd.TYPE))||(t=this.addIcon(new qd(this))),La.disable$$module$build$src$core$events$utils(),t.setText(e),La.enable$$module$build$src$core$events$utils()):this.removeIcon(qd.TYPE),M(new($(La.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,i,e)))}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new Zd(e);return this.icons.push(e),this.icons.sort(((e,t)=>e.getWeight()-t.getWeight())),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return null==(t=this.getIcon(e))||t.dispose(),this.icons=this.icons.filter((t=>!t.getType().equals(e))),!0}hasIcon(e){return this.icons.some((t=>t.getType().equals(e)))}getIcon(e){return e instanceof Xl?this.icons.find((t=>t.getType().equals(e))):this.icons.find((t=>t.getType().toString()===e))}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const i=new($(La.MOVE$$module$build$src$core$events$utils))(this);n&&i.setReason(n),this.xy_.translate(e,t),i.recordNew(),M(i)}makeConnection_(e){return new Uh(this,e)}allInputsFilled(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(let n,i=0;n=this.inputList[i];i++)if(n.connection){var t=n.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return!(t=this.getNextBlock())||t.allInputsFilled(e)}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};cp.COLLAPSED_INPUT_NAME=Gh,cp.COLLAPSED_FIELD_NAME=Vh;var up=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const t=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(t,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},dp=class extends up{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Lh.types.NEXT||e.getType()===Lh.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;let t,n;return e.getType()!==Lh.types.PREVIOUS&&e.getType()!==Lh.types.OUTPUT||(e=e.next()),(e=null!=(n=null==(t=e)?void 0:t.in())?n:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Lh.types.NEXT||e.getType()===Lh.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Lh.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};e(Ba.CURSOR,$a,dp);var hp=class extends dp{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,t){if(!e)return null;const n=e.in()||e.next();return t(n)?n:n?this.getNextNode_(n,t):t(e=this.findSiblingOrParent(e.out()))?e:e?this.getNextNode_(e,t):null}getPreviousNode_(e,t){if(!e)return null;let n=e.prev();return n=n?this.getRightMostChild(n):e.out(),t(n)?n:n?this.getPreviousNode_(n,t):null}validNode_(e){let t=!1;return(e=e&&e.getType())!==Lh.types.OUTPUT&&e!==Lh.types.INPUT&&e!==Lh.types.FIELD&&e!==Lh.types.NEXT&&e!==Lh.types.PREVIOUS&&e!==Lh.types.WORKSPACE||(t=!0),t}findSiblingOrParent(e){if(!e)return null;const t=e.next();return t||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};hp.registrationName="basicCursor",e(Ba.CURSOR,hp.registrationName,hp);var pp=class extends hp{validNode_(e){let t=!1;const n=e&&e.getType();return e&&(e=e.getLocation(),n===Lh.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t}},fp=10,gp=class extends Uh{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[Gu[t]],this.offsetInBlock=new ll(0,0),this.trackedState=gp.TrackedState.WILL_TRACK}dispose(){let e,t;super.dispose(),this.trackedState===gp.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),null==(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var n=!1;if(!t.isMovable()){if(!(t=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,n=!0}var i=g()==t;i||t.addSelect();var o=e.x+La.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*fp)-this.x,r=e.y+La.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*fp)-this.y;n&&(r=-r),t.RTL&&(o=e.x-La.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*fp)-this.x),t.moveBy(o,r,["bump"]),i||t.removeSelect()}}}moveTo(e,t){let n=!1;return this.trackedState===gp.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=gp.TrackedState.TRACKED,n=!0):this.trackedState===gp.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),n=!0),this.x=e,this.y=t,n}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=ll.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===gp.TrackedState.TRACKED||!e&&this.trackedState===gp.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=gp.TrackedState.TRACKED):(this.trackedState===gp.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=gp.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const n=e[t],i=n.getConnections_(!0);for(let e=0;e<i.length;e++)i[e].setTracking(!1);for(const e of n.getIcons())mo(e)&&e.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Vc.INPUT_VALUE&&this.type!==Vc.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let n;t.isCollapsed()?(n=[],t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)):n=t.getConnections_(!0);for(let t=0;t<n.length;t++)e.push(...n[t].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(x()){const n=La.getGroup$$module$build$src$core$events$utils();setTimeout(function(){t.isDisposed()||t.getParent()||(La.setGroup$$module$build$src$core$events$utils(n),this.bumpAwayFrom(e),La.setGroup$$module$build$src$core$events$utils(!1))}.bind(this),La.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:n}=this.getParentAndChildConnections();if(t&&n){var i=t.getSourceBlock(),o=n.getSourceBlock();super.disconnectInternal(e),i.rendered&&i.queueRender(),o.rendered&&(o.updateDisabled(),o.queueRender(),o.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock();const n=t.rendered,i=e.rendered;n&&t.updateDisabled(),i&&e.updateDisabled(),n&&i&&(this.type===Vc.NEXT_STATEMENT||this.type===Vc.PREVIOUS_STATEMENT?e.queueRender():t.queueRender()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(e){return super.setCheck(e),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(e){(e=e.TrackedState||(e.TrackedState={}))[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(gp||(gp={})),gp.TrackedState;var mp=class extends cp{constructor(e,t,n){super(e,t,n),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new ll(0,0),this.workspace=e,this.svgGroup_=ne(bl.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),(e=this.pathObject.svgPath).tooltip=this,to(e),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let t,n=0;t=this.inputList[n];n++)t.init();for(var e of this.getIcons())e.initView(this.createIconPointerDownListener(e)),e.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||z(e,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(g()!==this){var e=null;if(g()){e=g().id,La.disable$$module$build$src$core$events$utils();try{g().unselect()}finally{La.enable$$module$build$src$core$events$utils()}}e=new($(is))(e,this.id,this.workspace.id),M(e),m(this),this.addSelect()}}unselect(){if(g()===this){var e=new($(is))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,M(e),m(null),this.removeSelect()}}setParent(e){const t=this.parentBlock_;if(e!==t){de(),super.setParent(e),he();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var i=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(n):t&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(n,e):this.workspace.getCanvas().appendChild(n),this.translate(i.x,i.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,n=0,i=this.getSvgRoot();if(i)do{const e=we(i);t+=e.x,n+=e.y,i=i.parentNode}while(i&&!e.hasLayer(i));return new ll(t,n)}moveBy(e,t,n){if(this.parentBlock_)throw Error("Block has parent");const i=L();let o=null;i&&(o=new($(La.MOVE$$module$build$src$core$events$utils))(this),n&&o.setReason(n)),e=new ll(e,t),t=this.getRelativeToSurfaceXY(),e=ll.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),i&&o&&(o.recordNew(),M(o)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new ll(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const n=this.getRelativeToSurfaceXY();this.moveBy(e.x-n.x,e.y-n.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),n=t/2,i=this.getRelativeToSurfaceXY();e=Math.round(Math.round((i.x-n)/t)*t+n-i.x),t=Math.round(Math.round((i.y-n)/t)*t+n-i.y),(e||t)&&this.moveBy(e,t,["snap"])}}}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();let n,i;return this.RTL?(n=e.x-t.width,i=e.x):(n=e.x,i=e.x+t.width),new Tl(e.y,e.y+t.height,n,i)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e,t=0;e=this.inputList[t];t++)e.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed_())}updateCollapsed_(){var e=this.isCollapsed();const t=Gh,n=Vh;for(let o,r=0;o=this.inputList[r];r++)o.name!==t&&o.setVisible(!e);for(var i of this.getIcons())i.updateCollapsed();e?(e=this.toString(Fu),(i=this.getField(n))?i.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new xh(e),n)):(this.updateDisabled(),this.removeInput(t))}tab(e,t){const n=new pp;n.setCurNode(Lh.createFieldNode(e)),e=n.getCurNode(),t?n.next():n.prev(),(t=n.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))}onMouseDown_(e){const t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}showHelp(){const e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=fu.registry.getContextMenuOptions(fu.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const t=this.generateContextMenu();t&&t.length&&(Jn(e,t,this.RTL),Zn(this))}updateComponentLocations(e){if(this.rendered){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(ll.sum(e,t.relativeCoords))}}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const n of t.fieldRow)n.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",za.push(...this.getConnections_(!0)),ie(this.svgGroup_,"blocklyDragging")):(za.length=0,re(this.svgGroup_,"blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(e,t){this.isDeadOrDying()||(ao(),oi(),t&&this.rendered&&(this.unplug(e),Oi(this)),super.dispose(!!e),se(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,g()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach((e=>clearTimeout(e))),this.warningTextDb.clear(),this.getIcons().forEach((e=>e.dispose())))}checkAndDelete(){this.workspace.isFlyout||(La.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),La.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:zc.TYPE,blockState:rn(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:T(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let t=0;t<e.length;t++)e[t].applyColour();for(let t,n=0;t=this.inputList[n];n++)for(let e,i=0;e=t.fieldRow[i];i++)e.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let e;null==(e=this.getNextBlock())||e.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const e of this.getChildren(!1))e.updateDisabled()}}getCommentIcon(){let e;return te("getCommentIcon","v10","v11","getIcon"),null!=(e=this.getIcon(qd.TYPE))?e:null}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var n of this.warningTextDb.values())clearTimeout(n);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout((()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))}),100));else if(this.isInFlyout&&(e=null),n=this.getIcon(Qd.TYPE),e){let i=this.getSurroundParent(),o=null;for(;i;)i.isCollapsed()&&(o=i),i=i.getSurroundParent();o&&o.setWarningText(La.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,mp.COLLAPSED_WARNING_ID),n?n.addMessage(e,t):this.addIcon(new Qd(this).addMessage(e,t))}else n&&(t?(n.addMessage("",t),n.getText()||this.removeIcon(Qd.TYPE)):this.removeIcon(Qd.TYPE))}setMutator(e){this.removeIcon(La.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof Qd&&(this.warning=e),e instanceof La.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),this.rendered&&(e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),Et(),this.bumpNeighbours()),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(Qd.TYPE)&&(this.warning=null),e.equals(La.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Et(),this.bumpNeighbours()),t}setEnabled(e){this.isEnabled()!==e&&(super.setEnabled(e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(e){this.rendered&&this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!t)throw Error("Invalid style name: "+e);this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour()}bringToFront(e=!1){let t=this;if(!t.isDeadOrDying())do{const n=t.getSvgRoot(),i=n.parentNode,o=i.childNodes;if(o[o.length-1]!==n&&i.appendChild(n),e)break;t=t.getParent()}while(t)}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(e,t){super.setNextStatement(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(e,t){super.setOutput(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(e){super.setInputsInline(e),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(e,t){return e=super.removeInput(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours()),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(e){return super.appendInput(e),this.rendered&&(this.queueRender(),this.bumpNeighbours()),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),(n=n.targetBlock())&&n.setConnectionTracking(e))}}getConnections_(e){const t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_))for(let n,i=0;n=this.inputList[i];i++)n.connection&&t.push(n.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new gp(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var e=La.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout((()=>{const t=La.getGroup$$module$build$src$core$events$utils();La.setGroup$$module$build$src$core$events$utils(e),this.getRootBlock().bumpNeighboursInternal(),La.setGroup$$module$build$src$core$events$utils(t),this.bumpNeighboursPid=0}),La.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let e;null==(e=t.targetBlock())||e.bumpNeighboursInternal()}for(const n of t.neighbours(La.config$$module$build$src$core$config.snapRadius))n.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&n.isConnected()||(t.isSuperior()?n.bumpAwayFrom(t):t.bumpAwayFrom(n)))}}scheduleSnapAndBump(){const e=La.getGroup$$module$build$src$core$events$utils();setTimeout((()=>{La.setGroup$$module$build$src$core$events$utils(e),this.snapToGrid(),La.setGroup$$module$build$src$core$events$utils(!1)}),La.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(e,t,n){if(e.type===Vc.NEXT_STATEMENT||e.type===Vc.INPUT_VALUE){let i=t.x;t=t.y,i+=n.x-e.getOffsetInBlock().x,t+=n.y-e.getOffsetInBlock().y,this.moveBy(i,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return At(this)}render(){this.queueRender(),Et()}renderEfficiently(){this.rendered=!0,de(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),he(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(pd.LOCAL_MARKER).draw();for(const e of this.inputList)for(const t of e.fieldRow)t.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,t=this.width;var n=this.getNextBlock();if(n){n=n.getHeightWidth();const i=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=n.height-i,t=Math.max(t,n.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}};mp.INLINE=-1,mp.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var _p,vp=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},bp=class extends vp{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e,t){return e instanceof mp?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!t)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Tp=class extends bp{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new _d({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Nl.TOP?Nl.BOTTOM:Nl.TOP,this.flyout=new(l(Ba.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Nl.RIGHT?Nl.LEFT:Nl.RIGHT,this.flyout=new(l(Ba.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){let e;this.svgGroup=ne(bl.G,{class:"blocklyTrash"});const t=String(Math.random()).substring(2);e=ne(bl.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),ne(bl.RECT,{width:Ap,height:yp,y:Ep},e);const n=ne(bl.IMAGE,{width:zl.width,x:-0,height:zl.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return n.setAttributeNS(fl,"xlink:href",this.workspace.options.pathToMedia+zl.url),e=ne(bl.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),ne(bl.RECT,{width:Ap,height:Ep},e),this.svgLid=ne(bl.IMAGE,{width:zl.width,x:-0,height:zl.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(fl,"xlink:href",this.workspace.options.pathToMedia+zl.url),j(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),j(this.svgGroup,"pointerup",this,this.click),j(n,"pointerover",this,this.mouseOver),j(n,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(le(this.flyout.createDom(bl.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[ol.Capability.AUTOHIDEABLE,ol.Capability.DELETE_AREA,ol.Capability.DRAG_TARGET,ol.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&se(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map((function(e){return JSON.parse(e)})),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout((()=>{let n,i;null==(n=this.flyout)||n.show(e),t.cursor="",null==(i=this.workspace.scrollbar)||i.setVisible(!1)}),10),this.fireUiEvent(!0)}}closeFlyout(){var e,t;this.contentsIsOpen()&&(null==(e=this.flyout)||e.hide(),null==(t=this.workspace.scrollbar)||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var n,i=je(this.workspace,e);e=ze(i,new Al(Ap,yp+Ep),Cp,Sp,e,this.workspace),t=Xe(e,Sp,i.vertical===Fl.TOP?Gl.DOWN:Gl.UP,t),this.top=t.top,this.left=t.left,null==(n=this.svgGroup)||n.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Tl(this.top,this.top+yp+Ep,this.left,this.left+Ap)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+Mp-wp;return e=e.left+xp-wp,new Tl(t,t+Ep+yp+2*wp,e,e+Ap+2*wp)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=Dp;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Op),t=kp+this.lidOpen*(Lp-kp),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),Ip/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===Nl.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let n;null==(n=this.svgLid)||n.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Ap-4)+","+(Ep-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Op)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new($(ss))(e,this.workspace.id),M(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||e.type!==La.DELETE$$module$build$src$core$events$utils||e.type!==La.DELETE$$module$build$src$core$events$utils||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),-1===this.contents.indexOf(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(Rp)}}}cleanBlockJson(e){function t(e){if(e){if(delete e.id,delete e.x,delete e.y,delete e.enabled,e.icons&&e.icons.comment){var n=e.icons.comment;delete n.height,delete n.width,delete n.pinned}for(var i in n=e.inputs){var o=n[i];const e=o.block;o=o.shadow,e&&t(e),o&&t(o)}e.next&&(e=(i=e.next).block,i=i.shadow,e&&t(e),i&&t(i))}}return t(e=JSON.parse(JSON.stringify(e))),Object.assign({},{kind:"BLOCK"},e)}},Ap=47,yp=44,Ep=16,Sp=20,Cp=20,wp=10,xp=0,Mp=32,Rp=.1,Ip=80,Dp=4,kp=.4,Lp=.8,Op=45,Pp=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),(t=e.keyCodes)&&0<t.length)for(let n=0;n<t.length;n++)this.addKeyMapping(t[n],e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,n){e=`${e}`;const i=this.keyMap.get(e);if(i&&!n)throw Error(`Shortcut named "${t}" collides with shortcuts "${i}"`);i&&n?i.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,n){const i=this.keyMap.get(e);if(!i)return n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const o=i.indexOf(t);return-1<o?(i.splice(o,1),0===i.length&&this.keyMap.delete(e),!0):(n||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,n]of this.keyMap)e[t]=n;return e}getRegistry(){const e=Object.create(null);for(const[t,n]of this.shortcuts)e[t]=n;return go(Object.create(null),e)}onKeyDown(e,t){var n=this.serializeKeyEvent_(t);if(!(n=this.getShortcutNamesByKeyCode(n)))return!1;for(let i,o=0;i=n[o];o++){const n=this.shortcuts.get(i);let o,r;if(null==(o=n)||!o.preconditionFn||null!=(r=n)&&r.preconditionFn(e)){let i,o;if(null!=(i=n)&&i.callback&&null!=(o=n)&&o.callback(e,t,n))return!0}}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const t=[];for(const[n,i]of this.keyMap)-1<i.indexOf(e)&&t.push(n);return t}serializeKeyEvent_(e){let t="";for(const n in Pp.modifierKeys)e.getModifierState(n)&&(""!==t&&(t+="+"),t+=n);return""!==t&&e.keyCode?t=t+"+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers_(e){for(let t,n=0;t=e[n];n++)if(!(t in Pp.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let n="";if(t){this.checkModifiers_(t);for(const e in Pp.modifierKeys)-1<t.indexOf(Pp.modifierKeys[e])&&(""!==n&&(n+="+"),n+=e)}return""!==n&&e?n=n+"+"+e:e&&(n=`${e}`),n}};Pp.registry=new Pp,function(e){(e=e.modifierKeys||(e.modifierKeys={}))[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Pp||(Pp={})),function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"}(_p||(_p={}));var Np=null,$p=null;Hr();var Bp={};Bp.names=_p,Bp.registerCopy=Br,Bp.registerCut=Fr,Bp.registerDefaultShortcuts=Hr,Bp.registerDelete=$r,Bp.registerEscape=Nr,Bp.registerPaste=Ur,Bp.registerRedo=Vr,Bp.registerUndo=Gr;var Fp=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=Dc}save(e){return(e=e.getProcedureMap().getProcedures().map((e=>Wr(e)))).length?e:null}load(e,t){const n=t.getProcedureMap();for(const i of e)n.add(jr(this.procedureModelClass,this.parameterModelClass,i,t))}clear(e){e.getProcedureMap().clear()}},Up={};Up.ProcedureSerializer=Fp,Up.loadParameter=Xr,Up.loadProcedure=jr,Up.saveParameter=zr,Up.saveProcedure=Wr;var Gp=class{constructor(){this.priority=Ic}save(e){const t=[];for(const n of e.getAllVariables())e={name:n.name,id:n.getId()},n.type&&(e.type=n.type),t.push(e);return t.length?t:null}load(e,t){for(const n of e)t.createVariable(n.name,n.type,n.id)}clear(e){e.getVariableMap().clear()}};nn("variables",new Gp);var Vp={};Vp.VariableSerializer=Gp;var Hp={};Hp.load=qr,Hp.save=Yr;var Wp={blocks:Nc,exceptions:Rc,priorities:Lc,procedures:Up,registry:Oc,variables:Vp,workspaces:Hp},zp=class{constructor(e,t,n,i,o){this.workspace=e,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,n=void 0===n||n;const r=(t=void 0===t||t)&&n;t&&(this.hScroll=new xl(e,!0,r,i,o)),n&&(this.vScroll=new xl(e,!1,r,i,o)),r&&(this.corner_=ne(bl.RECT,{height:xl.scrollbarThickness,width:xl.scrollbarThickness,class:"blocklyScrollbarBackground"}),le(this.corner_,e.getBubbleCanvas()))}dispose(){se(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,n=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===e.viewWidth&&this.oldHostMetrics_.viewHeight===e.viewHeight&&this.oldHostMetrics_.absoluteTop===e.absoluteTop&&this.oldHostMetrics_.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===e.scrollWidth&&this.oldHostMetrics_.viewLeft===e.viewLeft&&this.oldHostMetrics_.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===e.scrollHeight&&this.oldHostMetrics_.viewTop===e.viewTop&&this.oldHostMetrics_.scrollTop===e.scrollTop||(n=!0)):n=t=!0,t||n){try{La.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&n&&this.vScroll.resize(e)}finally{La.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft){let e;null==(e=this.corner_)||e.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteTop!==e.absoluteTop){let e;null==(e=this.corner_)||e.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,n){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(n||void 0===n)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},jp=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),new Al(t,n)}getFlyoutMetrics(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const n=this.getToolboxMetrics(),i=this.getFlyoutMetrics(),o=!!this.workspace_.getToolbox();var r;const a=!(null!=(r=this.workspace_.getFlyout())&&r.autoClose),s=(r=o?n.position:i.position)===Nl.TOP;return r===Nl.LEFT&&(o&&(e+=n.width),a&&(e+=i.width)),s&&(o&&(t+=n.height),a&&(t+=i.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),n=this.getToolboxMetrics(),i=this.getFlyoutMetrics(),o=!!this.workspace_.getToolbox();var r;const a=!(null!=(r=this.workspace_.getFlyout())&&r.autoClose),s=(r=o?n.position:i.position)===Nl.LEFT||r===Nl.RIGHT;return r!==Nl.TOP&&r!==Nl.BOTTOM||(o&&(t.height-=n.height),a&&(t.height-=i.height)),s&&(o&&(t.width-=n.width),a&&(t.width-=i.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const i={};return n||(i.top=e.top,i.bottom=e.top+e.height),t||(i.left=e.left,i.right=e.left+e.width),i}getPaddedContent_(e,t){const n=t.top+t.height,i=t.left+t.width,o=e.width,r=o/2,a=(e=e.height)/2;return{top:Math.min(t.top-a,n-e),bottom:Math.max(n+a,t.top+e),left:Math.min(t.left-r,i-o),right:Math.max(i+r,t.left+o)}}getScrollMetrics(e,t,n){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var i=n||this.getContentMetrics();n=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,i),i=void 0!==n.top?n.top:t.top;const o=void 0!==n.left?n.left:t.left;return{top:i/e,left:o/e,width:((void 0!==n.right?n.right:t.right)-o)/e,height:((void 0!==n.bottom?n.bottom:t.bottom)-i)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),i=this.getAbsoluteMetrics(),o=this.getViewMetrics(),r=this.getContentMetrics(),a=this.getScrollMetrics(!1,o,r);return{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,scrollHeight:a.height,scrollWidth:a.width,scrollTop:a.top,scrollLeft:a.left,viewHeight:o.height,viewWidth:o.width,viewTop:o.top,viewLeft:o.left,absoluteTop:i.top,absoluteLeft:i.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};e(Ba.METRICS_MANAGER,$a,jp);var Xp=class extends ws{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=gs,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};e(Ba.EVENT,gs,Xp);var Yp=class extends xs{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=ns,e&&(this.blockId=e.id,this.isStart=t,this.blocks=n)}toJson(){const e=super.toJson();if(void 0===this.isStart)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(void 0===this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Yp)).isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};e(Ba.EVENT,ns,Yp);var qp={};qp.bumpIntoBounds=Kr,qp.bumpIntoBoundsHandler=Qr,qp.bumpTopObjectsIntoBounds=Jr;var Kp=class{constructor(e,t){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=e,this.workspace_=t,this.connectionPreviewer=new(l(Ba.CONNECTION_PREVIEWER,this.workspace_.options))(e),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=ea(e,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(e,t){let n;La.getGroup$$module$build$src$core$events$utils()||La.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),de(),this.workspace_.setResizesEnabled(!1),Fi(),this.shouldDisconnect_(t)&&this.disconnectBlock_(t,e),this.draggingBlock_.setDragging(!0),null==(n=this.workspace_.getLayerManager())||n.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(e,t){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(t),e=ll.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),$i(this.draggingBlock_)}fireDragStartEvent_(){const e=new($(ns))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));M(e)}drag(e,t){const n=this.draggingBlock_;this.moveBlock(n,t),this.updateDragTargets(e,n),this.wouldDeleteBlock_=this.wouldDeleteBlock(e,n,t),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(n,t)}moveBlock(e,t){t=this.pixelsToWorkspaceUnits_(t),t=ll.sum(this.startXY_,t),e.moveDuringDrag(t)}updateDragTargets(e,t){if(e=this.workspace_.getDragTarget(e),this.dragTarget_!==e){let n;null==(n=this.dragTarget_)||n.onDragExit(t),null==e||e.onDragEnter(t)}null==e||e.onDragOver(t),this.dragTarget_=e}wouldDeleteBlock(e,t,n){return!(!(e=this.workspace_.getDragTarget(e))||!this.workspace_.getComponentManager().hasCapability(e.id,ol.Capability.DELETE_AREA))&&e.wouldDelete(t,!!this.getConnectionCandidate(t,n))}updateConnectionPreview(e,t){t=this.pixelsToWorkspaceUnits_(t);const n=this.connectionCandidate,i=this.getConnectionCandidate(e,t);if(i){this.connectionCandidate=t=n&&this.currCandidateIsBetter(n,t,i)?n:i;var{local:o,neighbour:r}=t;o.type!==Vc.OUTPUT_VALUE&&o.type!==Vc.PREVIOUS_STATEMENT||!r.isConnected()||r.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(e,r.targetBlock(),o.type)?this.connectionPreviewer.previewConnection(o,r):this.connectionPreviewer.previewReplacement(o,r,r.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,t,n){return!!Uh.getConnectionForOrphanedConnection(e,n===Vc.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,n){const{local:i,neighbour:o}=e;e=new ll(i.x,i.y);const r=new ll(o.x,o.y);return t=ll.distance(ll.sum(e,t),r),n.distance>t-La.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let n=this.connectionCandidate?La.config$$module$build$src$core$config.connectingSnapRadius:La.config$$module$build$src$core$config.snapRadius,i=null;for(const o of e){const{connection:e,radius:r}=o.closest(n,t);e&&(i={local:o,neighbour:e,distance:r},n=r)}return i}getLocalConnections(e){const t=e.getConnections_(!1),n=e.lastConnectionInStack(!0);return n&&n!==e.nextConnection&&t.push(n),t}endDrag(e,t){if(this.drag(e,t),this.fireDragEndEvent_(),he(),Fi(),this.connectionPreviewer.hidePreview(),e=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(e=this.getNewLocationAfterDrag_(t).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let t;null==(t=this.workspace_.getLayerManager())||t.moveOffDragLayer(this.draggingBlock_,Nu),this.draggingBlock_.setDragging(!1),e?this.updateBlockAfterMove_():Kr(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),La.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(e){return{delta:e=this.pixelsToWorkspaceUnits_(e),newLocation:ll.sum(this.startXY_,e)}}maybeDeleteBlock_(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),za.length=0,!0)}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(e){const{local:t,neighbour:n}=e;if(t.connect(n),this.draggingBlock_.rendered){const e=t.isSuperior()?n:t,i=this.draggingBlock_.getRootBlock();yt().then((()=>{Ni(e.getSourceBlock()),setTimeout((()=>{i.bringToFront()}),0)}))}}fireDragEndEvent_(){const e=new($(ns))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));M(e)}updateToolboxStyle_(e){const t=this.workspace_.getToolbox();if(t){const n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof t.removeStyle?t.removeStyle(n):e||"function"!=typeof t.addStyle||t.addStyle(n)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var e=new($(La.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);e.setReason(["drag"]),e.oldCoordinate=this.startXY_,e.recordNew(),M(e)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(e){return e=new ll(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e}dragIcons_(){te("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter((e=>e.isInsertionMarker()))}};e(Ba.BLOCK_DRAGGER,$a,Kp);var Qp={};Qp.Bubble=Ld,Qp.MiniWorkspaceBubble=Nd,Qp.TextBubble=Wd,Qp.TextInputBubble=zd;var Zp=class extends $c{constructor(e,t,n,i){super(e),this.type=Qa,this.recordUndo=!1,e&&(this.name=t,this.oldValue=n,this.newValue=i)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Zp)).name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(t=t.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};e(Ba.EVENT,Qa,Zp);var Jp=class extends $c{constructor(e){super(e),this.type=La.MOVE$$module$build$src$core$events$utils,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new Jp)).oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(n=e.oldCoordinate.split(","),t.oldCoordinate=new ll(Number(n[0]),Number(n[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(n=e.newCoordinate.split(","),t.newCoordinate=new ll(Number(n[0]),Number(n[1]))),void 0!==e.reason&&(t.reason=e.reason),void 0!==e.recordUndo&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation_(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const n=t.getParent();return n?(e.parentId=n.id,(t=n.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&ll.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=t.getBlockById(this.blockId);if(n){var i=e?this.newParentId:this.oldParentId,o=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,i){var r=t.getBlockById(i);if(!r)return void console.warn("Can't connect to non-existent block: "+i)}if(n.getParent()&&n.unplug(),e)o=n.getRelativeToSurfaceXY(),n.moveBy(e.x-o.x,e.y-o.y,this.reason);else{let e,i;(!(t=n.outputConnection)||n.previousConnection&&n.previousConnection.isConnected())&&(t=n.previousConnection),n=null==(i=t)?void 0:i.type,o?(n=r.getInput(o))&&(e=n.connection):n===Vc.PREVIOUS_STATEMENT&&(e=r.nextConnection),e&&t?t.connect(e):console.warn("Can't connect to non-existent input: "+o)}}else console.warn("Can't move non-existent block: "+this.blockId)}};e(Ba.EVENT,La.MOVE$$module$build$src$core$events$utils,Jp);var ef,tf=class extends xs{constructor(e,t,n){super(e?e.workspace.id:void 0),this.type=as,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=n)}toJson(){const e=super.toJson();if(void 0===this.isOpen)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new tf)).isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}};(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(ef||(ef={})),e(Ba.EVENT,as,tf);var nf=class extends ws{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=La.getGroup$$module$build$src$core$events$utils(),this.recordUndo=x())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new nf)).commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){var n=e.getEventWorkspace_();if(t){if(t=La.createElement$$module$build$src$core$utils$xml("xml"),!e.xml)throw Error("Ecountered a comment event without proper xml");t.appendChild(e.xml),La.domToWorkspace$$module$build$src$core$xml(t,n)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(e.commentId))?n.dispose():console.warn("Can't uncreate non-existent comment: "+e.commentId)}}},of=class extends nf{constructor(e,t,n){super(e),this.type=ps,e&&(this.oldContents_=void 0===t?"":t,this.newContents_=void 0===n?"":n)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new of)).oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var n=e?this.newContents_:this.oldContents_;if(!n){if(e)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson")}t.setContent(n)}else console.warn("Can't change non-existent comment: "+this.commentId)}};e(Ba.EVENT,ps,of);var rf=class extends nf{constructor(e){super(e),this.type=ds,e&&(this.xml=e.toXmlWithXY())}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=$t(this.xml),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new rf)).xml=La.textToDom$$module$build$src$core$utils$xml(e.xml),t}run(e){nf.CommentCreateDeleteHelper(this,e)}};e(Ba.EVENT,ds,rf);var af=class extends nf{constructor(e){super(e),this.type=hs,e&&(this.xml=e.toXmlWithXY())}run(e){nf.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return e.xml=$t(this.xml),e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new af)).xml=La.textToDom$$module$build$src$core$utils$xml(e.xml),t}};e(Ba.EVENT,hs,af);var sf=class extends nf{constructor(e){super(e),this.type=fs,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,n){return t=super.fromJson(e,t,null!=n?n:new sf),n=e.oldCoordinate.split(","),t.oldCoordinate_=new ll(Number(n[0]),Number(n[1])),n=e.newCoordinate.split(","),t.newCoordinate_=new ll(Number(n[0]),Number(n[1])),t}isNull(){return ll.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(!(e=e?this.newCoordinate_:this.oldCoordinate_))throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var n=t.getRelativeToSurfaceXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};e(Ba.EVENT,fs,sf);var lf=class extends xs{constructor(e,t,n){super(n),this.type=ls,this.oldItem=null!=e?e:void 0,this.newItem=null!=t?t:void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,n){return(t=super.fromJson(e,t,null!=n?n:new lf)).oldItem=e.oldItem,t.newItem=e.newItem,t}};e(Ba.EVENT,ls,lf),La.CHANGE$$module$build$src$core$events$utils,La.CREATE$$module$build$src$core$events$utils,La.DELETE$$module$build$src$core$events$utils,La.MOVE$$module$build$src$core$events$utils,La.CHANGE$$module$build$src$core$events$utils,La.CREATE$$module$build$src$core$events$utils,La.DELETE$$module$build$src$core$events$utils,La.MOVE$$module$build$src$core$events$utils,La.disable$$module$build$src$core$events$utils,La.enable$$module$build$src$core$events$utils,La.getGroup$$module$build$src$core$events$utils,La.setGroup$$module$build$src$core$events$utils;var cf={};cf.Abstract=ws,cf.BLOCK_CHANGE=La.CHANGE$$module$build$src$core$events$utils,cf.BLOCK_CREATE=La.CREATE$$module$build$src$core$events$utils,cf.BLOCK_DELETE=La.DELETE$$module$build$src$core$events$utils,cf.BLOCK_DRAG=ns,cf.BLOCK_FIELD_INTERMEDIATE_CHANGE=Qa,cf.BLOCK_MOVE=La.MOVE$$module$build$src$core$events$utils,cf.BUBBLE_OPEN=as,cf.BUMP_EVENTS=ms,cf.BlockBase=$c,cf.BlockChange=vd,cf.BlockCreate=Bc,cf.BlockDelete=lp,cf.BlockDrag=Yp,cf.BlockFieldIntermediateChange=Zp,cf.BlockMove=Jp,cf.BubbleOpen=tf,cf.BubbleType=ef,cf.CHANGE=La.CHANGE$$module$build$src$core$events$utils,cf.CLICK=os,cf.COMMENT_CHANGE=ps,cf.COMMENT_CREATE=ds,cf.COMMENT_DELETE=hs,cf.COMMENT_MOVE=fs,cf.CREATE=La.CREATE$$module$build$src$core$events$utils,cf.Click=Ms,cf.ClickTarget=Ss,cf.CommentBase=nf,cf.CommentChange=of,cf.CommentCreate=rf,cf.CommentDelete=af,cf.CommentMove=sf,cf.DELETE=La.DELETE$$module$build$src$core$events$utils,cf.FINISHED_LOADING=gs,cf.FinishedLoading=Xp,cf.MARKER_MOVE=rs,cf.MOVE=La.MOVE$$module$build$src$core$events$utils,cf.MarkerMove=Oh,cf.SELECTED=is,cf.Selected=cc,cf.THEME_CHANGE=cs,cf.TOOLBOX_ITEM_SELECT=ls,cf.TRASHCAN_OPEN=ss,cf.ThemeChange=Uc,cf.ToolboxItemSelect=lf,cf.TrashcanOpen=sp,cf.UI=ts,cf.UiBase=xs,cf.VAR_CREATE=Za,cf.VAR_DELETE=Ja,cf.VAR_RENAME=es,cf.VIEWPORT_CHANGE=us,cf.VarBase=tc,cf.VarCreate=nc,cf.VarDelete=Zh,cf.VarRename=Jh,cf.ViewportChange=Hc,cf.clearPendingUndo=k,cf.disable=La.disable$$module$build$src$core$events$utils,cf.disableOrphans=B,cf.enable=La.enable$$module$build$src$core$events$utils,cf.filter=D,cf.fire=M,cf.fromJson=N,cf.get=$,cf.getDescendantIds=P,cf.getGroup=La.getGroup$$module$build$src$core$events$utils,cf.getRecordUndo=x,cf.isEnabled=L,cf.setGroup=La.setGroup$$module$build$src$core$events$utils,cf.setRecordUndo=w;var uf=class extends Ch{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&se(this.selectedGlowFilter),this.replacementGlowFilter&&se(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:tr("c",[er(25,-e),er(71,-e),er(t,0)])}}makeHexagonal(){function e(e,n,i){var o=e/2;return or(-(i=i?-1:1)*(o=o>t?t:o),e=(n?-1:1)*e/2)+or(i*o,e)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:e=>(e/=2)>t?t:e,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}makeRounded(){function e(e,t,i){const o=e>n?e-n:0,r=i===t?"0":"1";return sr("a","0 0,"+r,e=(e>n?n:e)/2,er((i?1:-1)*e,(t?-1:1)*e))+ar("v",(t?-1:1)*o)+sr("a","0 0,"+r,e,er((i?-1:1)*e,(t?-1:1)*e))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width:e=>(e/=2)>t?t:e,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}makeSquared(){function e(e,n,i){e-=2*t;const o=i===n?"0":"1";return sr("a","0 0,"+o,t,er((i?1:-1)*t,(n?-1:1)*t))+ar("v",(n?-1:1)*e)+sr("a","0 0,"+o,t,er((i?-1:1)*t,(n?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:e=>t,height:e=>e,connectionOffsetY:e=>e/2,connectionOffsetX:e=>-e,pathDown:t=>e(t,!1,!1),pathUp:t=>e(t,!0,!1),pathRightDown:t=>e(t,!1,!0),pathRightUp:t=>e(t,!1,!0)}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Vc.INPUT_VALUE:case Vc.OUTPUT_VALUE:if(null!==(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&-1!==t.indexOf("Boolean")?this.HEXAGONAL:(t&&-1!==t.indexOf("Number")||t&&t.indexOf("String"),this.ROUNDED);case Vc.PREVIOUS_STATEMENT:case Vc.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(e){return tr("c",[er(e*o/2,0),er(e*o*3/4,a/2),er(e*o,a)])+rr([er(e*o,r)])+tr("c",[er(e*o/4,a/2),er(e*o/2,a),er(e*o,a)])+ar("h",e*i)+tr("c",[er(e*o/2,0),er(e*o*3/4,-a/2),er(e*o,-a)])+rr([er(e*o,-r)])+tr("c",[er(e*o/4,-a/2),er(e*o/2,-a),er(e*o,-a)])}const t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,i=t/3,o=i/3,r=n/2,a=r/2,s=e(1),l=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:s,pathRight:l}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=sr("a","0 0,0",e,er(-e,e)),n=sr("a","0 0,1",e,er(-e,e));return{width:e,height:e,pathTop:t,pathBottom:sr("a","0 0,0",e,er(e,e)),rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:sr("a","0 0,1",e,er(e,e))}}generateSecondaryColour_(e){return Co("#000",e,.15)||e}generateTertiaryColour_(e){return Co("#000",e,.25)||e}createDom(e,t,n){super.createDom(e,t,n),e=ne(bl.DEFS,{},e),t=ne(bl.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),ne(bl.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),n=ne(bl.FECOMPONENTTRANSFER,{result:"outBlur"},t),ne(bl.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),ne(bl.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),ne(bl.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=ne(bl.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),ne(bl.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=ne(bl.FECOMPONENTTRANSFER,{result:"outBlur"},e),ne(bl.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),ne(bl.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),ne(bl.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),ne(bl.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .goog-menuitem,`,`${e}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},df=class extends wh{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(ih.isSpacer(e)){const i=e.precedesStatement;var t=e.followsStatement;if(i||t){const o=this.constants_.INSIDE_CORNERS;var n=o.rightHeight;return n=e.height-(i?n:0),t=t?o.pathBottomRight:"",e=0<n?ar("V",e.yPos+n):"",void(this.outlinePath_+=t+e+(i?o.pathTopRight:""))}}this.outlinePath_+=ar("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ir(e.xPos,this.info_.startY),this.outlinePath_+=ar("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=ar("V",e.baseline),this.outlinePath_+=ar("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=nr(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-2*e.connectionWidth,n=e.height;return ar("h",t)+e.shape.pathRightDown(n)+ar("h",-t)+e.shape.pathUp(n)+"z"}drawStatementInput_(e){var t=e.getLastInput();const n=t.xPos+t.notchOffset+t.shape.width,i=this.constants_.INSIDE_CORNERS,o=t.shape.pathRight+ar("h",-(t.notchOffset-i.width))+i.pathTop,r=e.height-2*i.height;t=i.pathBottom+ar("h",t.notchOffset-i.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=ar("H",n)+o+ar("v",r)+t+ar("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Vc.NEXT_STATEMENT||t.type===Vc.PREVIOUS_STATEMENT||t.type===Vc.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=t.type===Vc.INPUT_VALUE?nr(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):nr(e.width,-e.height/2)+e.shape.pathDown(e.height);var n,i,o=t.getSourceBlock();null==(i=(n=o.pathObject).addConnectionHighlight)||i.call(n,t,e,t.getOffsetInBlock(),o.RTL)}}},hf=class extends Sd{constructor(e,t,n,i,o,r,a){if(super(Sd.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",n=Number(Ro(n)),t=Number(Ro(t)),isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Al(t,n+hf.Y_PADDING),this.imageHeight=n,"function"==typeof o&&(this.clickHandler=o),e!==Sd.SKIP_SETUP&&(a?this.configure_(a):(this.flipRtl=!!r,this.altText=Ro(i)||""),this.setValue(Ro(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Ro(e.alt))}initView(){this.imageElement=ne(bl.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(fl,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return"string"!=typeof e?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(fl,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};hf.Y_PADDING=1,Oo("field_image",hf),hf.prototype.DEFAULT_VALUE="";var pf=class extends Sd{constructor(e,t,n){super(Sd.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),void 0!==e.spellcheck&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new Cd;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Cd;let t;return this.fullBlockClickTarget_=!(null==(t=this.getConstants())||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&L()&&M(new($(La.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new Cd;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.style.colourTertiary)):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return null!=(e=this.getConstants())&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(re(e,"blocklyInvalidInput"),$n(e,Qc.INVALID,!1)):(ie(e,"blocklyInvalidInput"),$n(e,Qc.INVALID,!0))}if(!(e=this.getSourceBlock()))throw new Cd;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Qs||Xs||Ys)?this.showPromptEditor_():this.showInlineEditor_(t)}showPromptEditor_(){Je(La.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),(e=>{null!==e&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)}))}showInlineEditor_(e){const t=this.getSourceBlock();if(!t)throw new Cd;Gn(this,t.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Cd;La.setGroup$$module$build$src$core$events$utils(!0);const t=Bn();var n=this.getClickTarget_();if(!n)throw Error("A click target has not been set.");ie(n,"editing"),(n=document.createElement("input")).className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);const i=this.workspace_.getScale();var o=this.getConstants().FIELD_TEXT_FONTSIZE*i+"pt";return t.style.fontSize=o,n.style.fontSize=o,o=pf.BORDERRADIUS*i+"px",this.isFullBlockField()&&(o=((o=this.getScaledBBox()).bottom-o.top)/2+"px",e=e.getParent()?e.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,n.style.border=1*i+"px solid "+e,t.style.borderRadius=o,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*i+"px")),n.style.borderRadius=o,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(n),n}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&L()&&null!==this.valueWhenEditorWasOpened_&&this.valueWhenEditorWasOpened_!==this.value_&&(M(new($(La.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),La.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=Bn().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,!(e=this.getClickTarget_()))throw Error("A click target has not been set.");re(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper_=z(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=z(e,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(X(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(X(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(e){"Enter"===e.key?(Vn(),Di()):"Escape"===e.key?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Vn(),Di()):"Tab"===e.key&&(Vn(),Di(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange_(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&L()&&this.value_!==e&&M(new($(Qa))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){var e=this.getSourceBlock();if(!e)throw new Cd;const t=Bn(),n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",e=new ll(e.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=e.x+"px",t.style.top=e.y+"px"}repositionForWindowResize(){const e=this.getSourceBlock();return e instanceof mp&&(Kr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),e)||this.resizeEditor_(),!0)}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};pf.BORDERRADIUS=4;var ff=class extends pf{constructor(e,t,n){super(e,t,n)}doClassValidation_(e){return void 0===e?null:`${e}`}static fromJson(e){return new this(Ro(e.text),void 0,e)}};Oo("field_input",ff),ff.prototype.DEFAULT_VALUE="";var gf=class extends ah{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},mf=class extends gh{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},_f=class extends oh{constructor(e){super(e),this.width=this.height=0,this.type|=ih.getType("RIGHT_CONNECTION")}},vf=class extends Sh{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},bf=class extends kh{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new vf(this.constants_),this.bottomRow=new gf(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new _f(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return!!t&&(t instanceof Ih||e instanceof Dh||t instanceof Dh||(e instanceof La.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Rh||e instanceof Ih)&&(!this.isInline||this.isMultiRow))}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&ih.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&ih.isLeftRoundedCorner(e)&&t&&(ih.isPreviousConnection(t)||ih.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&ih.isLeftSquareCorner(e)&&t&&ih.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(ih.isTopRow(e)&&ih.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const n=ih.isInputRow(e)&&e.hasStatement,i=ih.isInputRow(t)&&t.hasStatement;return i||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),i&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):ih.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ih.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const n=this.width-this.startX;return ih.isInputRow(e)&&e.hasStatement||ih.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n}getElemCenterline_(e,t){if(e.hasStatement&&!ih.isSpacer(t)&&!ih.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ih.isInlineInput(t)&&t instanceof lh){const n=t.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof Rh||e instanceof Ih)&&t.hasDummyInput&&t.align===La.Align$$module$build$src$core$inputs$align.LEFT&&e.align===La.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof Dh)return t.elements.push(new mf(this.constants_,e)),t.hasStatement=!0,void(null===t.align&&(t.align=e.align));super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let n;for(let t=0;t<e.elements.length;t++){const i=e.elements[t];if(ih.isSpacer(i)&&(n=i),ih.isField(i)&&i instanceof uh&&i.parentInput===this.rightAlignedDummyInputs.get(e))break}if(n)return n.width+=t,void(e.width+=t)}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let o=2;o<this.rows.length-1;o+=2){var n=this.rows[o-1];const r=this.rows[o];var i=this.rows[o+1];if(n=2===o?!!this.topRow.hasPreviousConnection:!!n.followsStatement,i=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement,ih.isInputRow(r)&&r.hasStatement){let n,i;r.measure(),t=r.width-(null!=(i=null==(n=r.getLastInput())?void 0:n.width)?i:0)+e}else if(n&&(2===o||i)&&ih.isInputRow(r)&&!r.hasStatement){i=r.xPos,n=null;for(let e=0;e<r.elements.length;e++){const o=r.elements[e];ih.isSpacer(o)&&(n=o),n&&(ih.isField(o)||ih.isInput(o))&&i<t&&!(ih.isField(o)&&o instanceof uh&&(o.field instanceof xh||o.field instanceof hf))&&(n.width+=t-i),i+=o.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,n=0;n<this.rows.length;n++){const e=this.rows[n];e.yPos=t,t+=e.height}this.height=t,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(n),n=e.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(n),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=n,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=n,this.width+=n+e,this.widthWithChildren+=n+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var n=this.rows[t];if(!ih.isInputRow(n))continue;e=n.elements[n.elements.length-2];let i=this.getNegativeSpacing_(n.elements[1]),o=this.getNegativeSpacing_(e);e=i+o;const r=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<r&&(i=(e=this.width-r)/2,o=e/2),n.elements.unshift(new ph(this.constants_,-i)),n.elements.push(new ph(this.constants_,-o))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)n=this.rows[t],ih.isTopOrBottomRow(n)&&(n.elements[1].width-=e),n.width-=e,n.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var n=this.outputConnection.shape.type;const i=this.constants_;if(1<this.inputRows.length)return n===i.SHAPES.ROUND?(n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,t-(n=this.height/2>n?n:this.height/2)*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)))):0;if(ih.isInlineInput(e)&&e instanceof lh){const o=e.connectedBlock;return null==(e=o?o.pathObject.outputShapeType:e.shape.type)||o&&o.outputConnection&&(o.statementInputCount||o.nextConnection)||n===i.SHAPES.HEXAGONAL&&n!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]}return ih.isField(e)&&e instanceof uh?n===i.SHAPES.ROUND&&e.field instanceof ff?t-2.75*i.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:ih.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let i=2;i<this.rows.length-1;i+=2){const o=this.rows[i-1],r=this.rows[i],a=this.rows[i+1];var e=2===i,t=i+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement;if(e?this.topRow.hasPreviousConnection:o.followsStatement){var n=r.elements[1];if(n=3===r.elements.length&&n instanceof uh&&(n.field instanceof xh||n.field instanceof hf),!e&&n)o.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(e||t){if(t){for(e=!1,t=0;t<r.elements.length;t++)if((n=r.elements[t])instanceof lh&&ih.isInlineInput(n)&&n.connectedBlock&&!n.connectedBlock.isShadow()&&40<=n.connectedBlock.getHeightWidth().height){e=!0;break}e&&(o.height-=this.constants_.SMALL_PADDING,a.height-=this.constants_.SMALL_PADDING)}}else o.height+=this.constants_.SMALL_PADDING}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Tf=class extends Bh{constructor(e,t,n){super(e,t,n),this.markerCircle=null}showWithInputOutput(e){const t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(t),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){const t=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,t){let n,i;null==(n=this.markerCircle)||n.setAttribute("cx",`${e}`),null==(i=this.markerCircle)||i.setAttribute("cy",`${t}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=ne(bl.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();ne(bl.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){let t,n;if(super.applyColour_(e),null==(t=this.markerCircle)||t.setAttribute("fill",this.colour_),null==(n=this.markerCircle)||n.setAttribute("stroke",this.colour_),this.isCursor()){let t;e=this.colour_+";transparent;transparent;",null==(t=this.markerCircle)||t.firstElementChild.setAttribute("values",e)}}},Af=class extends Fh{constructor(e,t,n){super(e,t,n),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=n}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.style.colourTertiary);for(const n of this.outlines.values())n.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){(e=this.getOutlinePath(e)).setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,ne(bl.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,n;null==(t=this.outlines.get(e))||null==(n=t.parentNode)||n.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},yf=class extends jh{constructor(e){super(e)}makeConstants_(){return new uf}makeRenderInfo_(e){return new bf(this,e)}makeDrawer_(e,t){return new df(e,t)}makeMarkerDrawer(e,t){return new Tf(e,this.getConstants(),t)}makePathObject(e,t){return new Af(e,t,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,t,n){return te("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),t.type===Vc.OUTPUT_VALUE?e.isConnected()?zh.PREVIEW_TYPE.REPLACEMENT_FADE:zh.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,t,n)}};xr("zelos",yf);var Ef={};Ef.BottomRow=gf,Ef.ConstantProvider=uf,Ef.Drawer=df,Ef.MarkerSvg=Tf,Ef.PathObject=Af,Ef.RenderInfo=bf,Ef.Renderer=yf,Ef.RightConnectionShape=_f,Ef.StatementInput=mf,Ef.TopRow=vf,Ta();var Sf={};Sf.registerCleanup=ia,Sf.registerCollapse=ra,Sf.registerCollapseExpandBlock=ga,Sf.registerComment=pa,Sf.registerDefaultOptions=Ta,Sf.registerDelete=_a,Sf.registerDeleteAll=ua,Sf.registerDisable=ma,Sf.registerDuplicate=ha,Sf.registerExpand=aa,Sf.registerHelp=va,Sf.registerInline=fa,Sf.registerRedo=na,Sf.registerUndo=ta;var Cf,wf=class extends pf{constructor(e,t,n){super(Sd.SKIP_SETUP),this.clockwise=wf.CLOCKWISE,this.offset=wf.OFFSET,this.wrap=wf.WRAP,this.round=wf.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){switch(super.configure_(e),e.mode){case Cf.COMPASS:this.clockwise=!0,this.offset=90;break;case Cf.PROTRACTOR:this.clockwise=!1,this.offset=0}e.clockwise&&(this.clockwise=e.clockwise),e.offset&&(this.offset=e.offset),e.wrap&&(this.wrap=e.wrap),e.round&&(this.round=e.round)}initView(){super.initView(),this.symbol_=ne(bl.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(e){super.showEditor_(e,Qs||Xs||Ys),e=this.dropdownCreate(),gi().appendChild(e),this.sourceBlock_ instanceof mp&&_i(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),bi(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const e=ne(bl.SVG,{xmlns:hl,"xmlns:html":pl,"xmlns:xlink":fl,version:"1.1",height:2*wf.HALF+"px",width:2*wf.HALF+"px"});e.style.touchAction="none";const t=ne(bl.CIRCLE,{cx:wf.HALF,cy:wf.HALF,r:wf.RADIUS,class:"blocklyAngleCircle"},e);this.gauge=ne(bl.PATH,{class:"blocklyAngleGauge"},e),this.line=ne(bl.LINE,{x1:wf.HALF,y1:wf.HALF,class:"blocklyAngleLine"},e);for(let n=0;360>n;n+=15)ne(bl.LINE,{x1:wf.HALF+wf.RADIUS,y1:wf.HALF,x2:wf.HALF+wf.RADIUS-(0==n%45?10:5),y2:wf.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+wf.HALF+","+wf.HALF+")"},e);return this.boundEvents.push(z(e,"click",this,this.hide)),this.boundEvents.push(z(t,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(z(t,"pointermove",this,this.onMouseMove_,!0)),e}dropdownDispose(){for(const e of this.boundEvents)X(e);this.boundEvents.length=0,this.line=this.gauge=null}hide(){Ri(this),Vn()}onMouseMove_(e){var t=this.gauge.ownerSVGElement.getBoundingClientRect();const n=e.clientX-t.left-wf.HALF;e=e.clientY-t.top-wf.HALF,t=Math.atan(-e/n),isNaN(t)||(t=ui(t),0>n?t+=180:0<e&&(t+=360),t=this.clockwise?this.offset+360-t:360-(this.offset-t),this.displayMouseOrKeyboardValue(t))}displayMouseOrKeyboardValue(e){if(this.round&&(e=Math.round(e/this.round)*this.round),(e=this.wrapValue(e))!==this.value_){const t=this.value_;this.setEditorValue_(e,!1),this.sourceBlock_&&L()&&this.value_!==t&&M(new($(Qa))(this.sourceBlock_,this.name||null,t,this.value_))}}updateGraph(){if(this.gauge&&this.line){var e=Number(this.getText())+this.offset,t=ci(e%360);e=["M ",wf.HALF,",",wf.HALF];var n=wf.HALF,i=wf.HALF;if(!isNaN(t)){const o=Number(this.clockwise),r=ci(this.offset),a=Math.cos(r)*wf.RADIUS,s=Math.sin(r)*-wf.RADIUS;o&&(t=2*r-t),n+=Math.cos(t)*wf.RADIUS,i-=Math.sin(t)*wf.RADIUS,t=Math.abs(Math.floor((t-r)/Math.PI)%2),o&&(t=1-t),e.push(" l ",a,",",s," A ",wf.RADIUS,",",wf.RADIUS," 0 ",t," ",o," ",n,",",i," z")}this.gauge.setAttribute("d",e.join("")),this.line.setAttribute("x2",`${n}`),this.line.setAttribute("y2",`${i}`)}}onHtmlInputKeyDown_(e){super.onHtmlInputKeyDown_(e);var t=this.getSourceBlock();if(!t)throw new Cd;let n=0;switch(e.key){case"ArrowLeft":n=t.RTL?1:-1;break;case"ArrowRight":n=t.RTL?-1:1;break;case"ArrowDown":n=-1;break;case"ArrowUp":n=1}n&&(t=this.getValue(),this.displayMouseOrKeyboardValue(t+n*this.round),e.preventDefault(),e.stopPropagation())}doClassValidation_(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue(e)}wrapValue(e){return 0>(e%=360)&&(e+=360),e>this.wrap&&(e-=360),e}static fromJson(e){return new this(e.angle,void 0,e)}};wf.HALF=50,wf.RADIUS=wf.HALF-1,wf.CLOCKWISE=!1,wf.OFFSET=0,wf.WRAP=360,wf.ROUND=15,Oo("field_angle",wf),wf.prototype.DEFAULT_VALUE=0,J("\n.blocklyAngleCircle {\n  stroke: #444;\n  stroke-width: 1;\n  fill: #ddd;\n  fill-opacity: 0.8;\n}\n\n.blocklyAngleMarks {\n  stroke: #444;\n  stroke-width: 1;\n}\n\n.blocklyAngleGauge {\n  fill: #f88;\n  fill-opacity: 0.8;\n  pointer-events: none;\n}\n\n.blocklyAngleLine {\n  stroke: #f00;\n  stroke-width: 2;\n  stroke-linecap: round;\n  pointer-events: none;\n}\n"),function(e){e.COMPASS="compass",e.PROTRACTOR="protractor"}(Cf||(Cf={}));var xf=class extends Sd{constructor(e,t,n){super(Sd.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=xf.CHECK_CHAR,e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(xf);return null!==e?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();ie(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||xf.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(e){return"string"==typeof e?"TRUE"===e:!!e}static fromJson(e){return new this(e.checked,void 0,e)}};xf.CHECK_CHAR="✓",Oo("field_checkbox",xf),xf.prototype.DEFAULT_VALUE=!1;var Mf=class extends Sd{constructor(e,t,n){super(Sd.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.colourOptions&&(this.colours=e.colourOptions),e.colourTitles&&(this.titles=e.colourTitles),e.columns&&(this.columns=e.columns)}initView(){this.size_=new Al(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Cd;const t=this.getConstants();return e.isSimpleReporter()&&!(null==t||!t.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const e=this.getSourceBlock();if(!e)throw new Cd;if(this.fieldGroup_){var t=this.borderRect_;if(!t)throw Error("The border rect has not been initialized");this.isFullBlockField()?(t.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getValue()),e.pathObject.svgPath.setAttribute("stroke","#fff")):(t.style.display="block",t.style.fill=this.getValue())}}getSize(){let e;return null!=(e=this.getConstants())&&e.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const e=this.getSourceBlock();if(!e)throw new Cd;e.applyColour()}updateSize_(e){var t=this.getConstants();this.isFullBlockField()?(e=2*(null!=e?e:0),t=t.FIELD_TEXT_HEIGHT):(e=t.FIELD_COLOUR_DEFAULT_WIDTH,t=t.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=t,this.size_.width=e,this.positionBorderRect_()}doClassValidation_(e){return"string"!=typeof e?null:Ao(e)}getText(){let e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e}setColours(e,t){return this.colours=e,t&&(this.titles=t),this}setColumns(e){return this.columns=e,this}showEditor_(){this.dropdownCreate(),gi().appendChild(this.picker),bi(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(e){null!==(e=(e=e.target)&&e.getAttribute("data-colour"))&&(this.setValue(e),Ri(this))}onKeyDown(e){let t=!0;var n;switch(e.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(n=this.getHighlighted())&&null!==(n=n.getAttribute("data-colour"))&&this.setValue(n),Di();break;default:t=!1}t&&e.stopPropagation()}moveHighlightBy(e,t){if(this.highlightedIndex){var n=this.colours||Mf.COLOURS,i=this.columns||Mf.COLUMNS,o=this.highlightedIndex%i,r=Math.floor(this.highlightedIndex/i);o+=e,r+=t,0>e?0>o&&0<r?(o=i-1,r--):0>o&&(o=0):0<e?o>i-1&&r<Math.floor(n.length/i)-1?(o=0,r++):o>i-1&&o--:0>t?0>r&&(r=0):0<t&&r>Math.floor(n.length/i)-1&&(r=Math.floor(n.length/i)-1),this.setHighlightedCell(this.picker.childNodes[r].childNodes[o],r*i+o)}}onMouseMove(e){const t=(e=e.target)&&Number(e.getAttribute("data-index"));null!==t&&t!==this.highlightedIndex&&this.setHighlightedCell(e,t)}onMouseEnter(){let e;null==(e=this.picker)||e.focus({preventScroll:!0})}onMouseLeave(){var e;null==(e=this.picker)||e.blur(),(e=this.getHighlighted())&&re(e,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const e=this.columns||Mf.COLUMNS,t=this.picker.childNodes[Math.floor(this.highlightedIndex/e)];return t?t.childNodes[this.highlightedIndex%e]:null}setHighlightedCell(e,t){const n=this.getHighlighted();n&&re(n,"blocklyColourHighlighted"),ie(e,"blocklyColourHighlighted"),this.highlightedIndex=t,(e=e.getAttribute("id"))&&this.picker&&$n(this.picker,Qc.ACTIVEDESCENDANT,e)}dropdownCreate(){const e=this.columns||Mf.COLUMNS,t=this.colours||Mf.COLOURS,n=this.titles||Mf.TITLES,i=this.getValue(),o=document.createElement("table");let r;o.className="blocklyColourTable",o.tabIndex=0,o.dir="ltr",Nn(o,Kc.GRID),$n(o,Qc.EXPANDED,!0),$n(o,Qc.ROWCOUNT,Math.floor(t.length/e)),$n(o,Qc.COLCOUNT,e);for(let a=0;a<t.length;a++){0==a%e&&(r=document.createElement("tr"),Nn(r,Kc.ROW),o.appendChild(r));const s=document.createElement("td");r.appendChild(s),s.setAttribute("data-colour",t[a]),s.title=n[a]||t[a],s.id=S(),s.setAttribute("data-index",`${a}`),Nn(s,Kc.GRIDCELL),$n(s,Qc.LABEL,t[a]),$n(s,Qc.SELECTED,t[a]===i),s.style.backgroundColor=t[a],t[a]===i&&(s.className="blocklyColourSelected",this.highlightedIndex=a)}this.boundEvents.push(z(o,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(z(o,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(z(o,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(z(o,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(z(o,"keydown",this,this.onKeyDown,!1)),this.picker=o}dropdownDispose(){for(const e of this.boundEvents)X(e);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(e){return new this(e.colour,void 0,e)}};Mf.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Mf.TITLES=[],Mf.COLUMNS=7,Mf.prototype.DEFAULT_VALUE=Mf.COLOURS[0],Oo("field_colour",Mf),J("\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: 0.5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n");var Rf=class extends xh{constructor(e,t,n){super(String(null!=e?e:""),t,n),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Ro(e.text),void 0,e)}};Oo("field_label_serializable",Rf);var If=class extends ff{constructor(e,t,n){super(Sd.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,e!==Sd.SKIP_SETUP&&(n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.maxLines&&this.setMaxLines(e.maxLines)}toXml(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e}fromXml(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))}saveState(){const e=this.saveLegacyState(If);return null!==e?e:this.getValue()}loadState(e){this.loadLegacyState(Sd,e)||this.setValue(e)}initView(){this.createBorderRect_(),this.textGroup=ne(bl.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const e=this.getSourceBlock();if(!e)throw new Cd;let t=this.getText();if(!t)return Sd.NBSP;const n=t.split("\n");t="";const i=this.isOverflowedY_?this.maxLines_:n.length;for(let o=0;o<i;o++){let e=n[o];e.length>this.maxDisplayLength?e=e.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&o===i-1&&(e=e.substring(0,e.length-3)+"..."),e=e.replace(/\s/g,Sd.NBSP),t+=e,o!==i-1&&(t+="\n")}return e.RTL&&(t+="‏"),t}doValueUpdate_(e){super.doValueUpdate_(e),null!==this.value_&&(this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_)}render_(){var e=this.getSourceBlock();if(!e)throw new Cd;for(var t,n=this.textGroup;t=n.firstChild;)n.removeChild(t);t=this.getDisplayText_().split("\n");let i=0;for(let o=0;o<t.length;o++){const e=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;ne(bl.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:i+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},n).appendChild(document.createTextNode(t[o])),i+=e}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?ie(n,"blocklyHtmlTextAreaInputOverflowedY"):re(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(e.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(re(e,"blocklyInvalidInput"),$n(e,Qc.INVALID,!1)):(ie(e,"blocklyInvalidInput"),$n(e,Qc.INVALID,!0)))}updateSize_(){var e=this.textGroup.childNodes;const t=this.getConstants().FIELD_TEXT_FONTSIZE,n=this.getConstants().FIELD_TEXT_FONTWEIGHT,i=this.getConstants().FIELD_TEXT_FONTFAMILY;let o=0,r=0;for(var a=0;a<e.length;a++){var s=fe(e[a],t,n,i);s>o&&(o=s),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<a?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(e=String(this.value_).split("\n"),a=ne(bl.TEXT,{class:"blocklyText blocklyMultilineText"}),s=0;s<e.length;s++){e[s].length>this.maxDisplayLength&&(e[s]=e[s].substring(0,this.maxDisplayLength)),a.textContent=e[s];const r=fe(a,t,n,i);r>o&&(o=r)}o+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${o}`),this.borderRect_.setAttribute("height",`${r}`)),this.size_.width=o,this.size_.height=r,this.positionBorderRect_()}showEditor_(e,t){super.showEditor_(e,t),this.forceRerender()}widgetCreate_(){const e=Bn(),t=this.workspace_.getScale(),n=document.createElement("textarea");n.className="blocklyHtmlInput blocklyHtmlTextAreaInput",n.setAttribute("spellcheck",String(this.spellcheck_));var i=this.getConstants().FIELD_TEXT_FONTSIZE*t+"pt";e.style.fontSize=i,n.style.fontSize=i,n.style.borderRadius=ff.BORDERRADIUS*t+"px",i=this.getConstants().FIELD_BORDER_RECT_X_PADDING*t;const o=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*t/2;return n.style.padding=o+"px "+i+"px "+o+"px "+i+"px",i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n.style.lineHeight=i*t+"px",e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.setAttribute("data-untyped-default-value",String(this.value_)),n.setAttribute("data-old-value",""),js?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n}setMaxLines(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(e){"Enter"!==e.key&&super.onHtmlInputKeyDown_(e)}static fromJson(e){return new this(Ro(e.text),void 0,e)}};Oo("field_multilinetext",If),J("\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n");var Df=class extends pf{constructor(e,t,n,i,o,r){super(Sd.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Sd.SKIP_SETUP&&(r?this.configure_(r):this.setConstraints(t,n,i),this.setValue(e),o&&this.setValidator(o))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,n){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(n),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);-1!==t.indexOf("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const n=t.indexOf(".");this.decimalPlaces=-1===n?e?0:null:t.length-n-1}getPrecision(){return this.precision_}doClassValidation_(e){return null===e?null:(e=(e=(e=`${e}`.replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e)?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!==this.decimalPlaces&&(e=Number(e.toFixed(this.decimalPlaces))),e))}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,$n(e,Qc.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,$n(e,Qc.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Oo("field_number",Df),Df.prototype.DEFAULT_VALUE=0;var kf=class extends Id{constructor(e,t,n,i,o){super(Sd.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=kf.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new Al(0,0),e!==Sd.SKIP_SETUP&&(o?this.configure_(o):this.setTypes(n,i),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Cd;this.variable||(e=La.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Cd;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==e.type)}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Cd;const n=e.getAttribute("id"),i=e.textContent,o=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=La.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,n,i,o),null!==o&&o!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+$t(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var t=this.saveLegacyState(kf);return null!==t||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.name,t.type=this.variable.type)),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Cd;this.loadLegacyState(kf,e)||(e=La.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(null===e)return null;var t=this.getSourceBlock();if(!t)throw new Cd;return(t=La.getVariable$$module$build$src$core$variables(t.workspace,e))?(t=t.type,this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Cd;this.variable=La.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(0===(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,t=""){if(Array.isArray(e)){let n=!1;for(let i=0;i<e.length;i++)e[i]===t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(null!==e)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===Vu)return void La.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);if(e===Hu)return void this.sourceBlock_.workspace.deleteVariableById(this.variable.getId())}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Ro(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var n=this.getVariableTypes(),i=0;i<n.length;i++){const e=this.sourceBlock_.workspace.getVariablesOfType(n[i]);t=t.concat(e)}for(t.sort(ic.compareByName),n=[],i=0;i<t.length;i++)n[i]=[t[i].name,t[i].getId()];return n.push([La.Msg$$module$build$src$core$msg.RENAME_VARIABLE,Vu]),La.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&n.push([La.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),Hu]),n}};Oo("field_variable",kf);var Lf=class{constructor(e,t,n,i){this.workspace=e,this.targetWorkspace=t,this.isLabel_=i,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=n.text,this.position=new ll(0,0),this.callbackKey=n.callbackKey||n.callbackkey,this.cssClass=n["web-class"]||null,this.info=n}createDom(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";let t;this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=ne(bl.G,{class:e},this.workspace.getCanvas()),this.isLabel_||(t=ne(bl.RECT,{class:"blocklyFlyoutButtonShadow",rx:Lf.BORDER_RADIUS,ry:Lf.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=ne(bl.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Lf.BORDER_RADIUS,ry:Lf.BORDER_RADIUS},this.svgGroup);const n=ne(bl.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var i=Ro(this.text);this.workspace.RTL&&(i+="‏"),n.textContent=i,this.isLabel_&&(this.svgText=n,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const o=Te(n,"fontSize"),r=Te(n,"fontWeight"),a=Te(n,"fontFamily");if(this.width=ge(n,o,r,a),i=me(i,o,r,a),this.height=i.height,!this.isLabel_){let e,n;this.width+=2*Lf.TEXT_MARGIN_X,this.height+=2*Lf.TEXT_MARGIN_Y,null==(e=t)||e.setAttribute("width",String(this.width)),null==(n=t)||n.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),n.setAttribute("x",String(this.width/2)),n.setAttribute("y",String(this.height/2-i.height/2+i.baseline)),this.updateTransform(),this.onMouseUpWrapper=z(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&X(this.onMouseUpWrapper),this.svgGroup&&se(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Lf.TEXT_MARGIN_X=5,Lf.TEXT_MARGIN_Y=2,Lf.BORDER_RADIUS=4,J("\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n");var Of,Pf=class extends jp{constructor(e,t){super(e),this.flyout_=t}getBoundingBox_(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,n){return t=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*n)/e,width:(t.width+t.left+n)/e,top:0,left:0}}};!function(e){e.BLOCK="block",e.BUTTON="button"}(Of||(Of={}));var Nf=class extends bp{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ap(e),this.workspace_.setMetricsManager(new Pf(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=C(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=ne(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=ne(bl.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new zp(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(z(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(z(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[ol.Capability.AUTOHIDEABLE,ol.Capability.DELETE_AREA,ol.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)X(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&se(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(e){const t=e!==this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}updateDisplay(){let e,t;e=!!this.containerVisible&&this.isVisible(),this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none"),null==(t=this.workspace_.scrollbar)||t.setContainerVisible(e)}positionAt_(e,t,n,i){let o,r;null==(o=this.svgGroup_)||o.setAttribute("width",`${e}`),null==(r=this.svgGroup_)||r.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&ue(this.svgGroup_,"translate("+n+"px,"+i+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(n,i),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)X(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),"string"==typeof e&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=$e(e),e=this.createFlyoutInfo(e),Et(this.workspace_),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const t=[],n=[];this.permanentlyDisabled.length=0;const i=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const o of e){if("custom"in o){e=this.getDynamicCategoryContents(o.custom),e=$e(e);const{contents:i,gaps:r}=this.createFlyoutInfo(e);t.push(...i),n.push(...r)}switch(o.kind.toUpperCase()){case"BLOCK":e=o;const r=this.createFlyoutBlock(e);t.push({type:Of.BLOCK,block:r}),this.addBlockGap(e,n,i);break;case"SEP":this.addSeparatorGap(o,n,i);break;case"LABEL":e=this.createButton(o,!0),t.push({type:Of.BUTTON,button:e}),n.push(i);break;case"BUTTON":e=this.createButton(o,!1),t.push({type:Of.BUTTON,button:e}),n.push(i)}}return{contents:t,gaps:n}}getDynamicCategoryContents(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,t){return new Lf(this.workspace_,this.targetWorkspace,e,t)}createFlyoutBlock(e){let t;return e.blockxml?(e="string"==typeof e.blockxml?La.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(t=this.getRecycledBlock(e.getAttribute("type")))||(t=Gt(e,this.workspace_))):(t=this.getRecycledBlock(e.type),t||(void 0===e.enabled&&(e.enabled="true"!==e.disabled&&!0!==e.disabled),t=gn(e,this.workspace_))),t.isEnabled()||this.permanentlyDisabled.push(t),t}getRecycledBlock(e){let t=-1;for(let n=0;n<this.recycledBlocks.length;n++)if(this.recycledBlocks[n].type===e){t=n;break}return-1===t?void 0:this.recycledBlocks.splice(t,1)[0]}addBlockGap(e,t,n){let i;e.gap?i=parseInt(String(e.gap)):e.blockxml&&(e="string"==typeof e.blockxml?La.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,i=parseInt(e.getAttribute("gap"))),t.push(!i||isNaN(i)?n:i)}addSeparatorGap(e,t,n){e=parseInt(String(e.gap)),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(n)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let n,i=0;n=e[i];i++)this.blockIsRecyclable_(n)?this.recycleBlock(n):n.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const t=this.mats[e];t&&(no(t),se(t))}this.mats.length=0;for(let n,i=0;n=this.buttons_[i];i++)n.dispose();let t;this.buttons_.length=0,null==(t=this.workspace_.getPotentialVariableMap())||t.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const t=e.getRelativeToSurfaceXY();e.moveBy(-t.x,-t.y),this.recycledBlocks.push(e)}addBlockListeners_(e,t,n){this.listeners.push(z(e,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(z(n,"pointerdown",null,this.blockMouseDown(t))),this.listeners.push(j(e,"pointerenter",t,(()=>{this.targetWorkspace.isDragging()||t.addSelect()}))),this.listeners.push(j(e,"pointerleave",t,(()=>{this.targetWorkspace.isDragging()||t.removeSelect()}))),this.listeners.push(j(n,"pointerenter",t,(()=>{this.targetWorkspace.isDragging()||t.addSelect()}))),this.listeners.push(j(n,"pointerleave",t,(()=>{this.targetWorkspace.isDragging()||t.removeSelect()})))}blockMouseDown(e){return t=>{const n=this.targetWorkspace.getGesture(t);n&&(n.setStartBlock(e),n.handleFlyoutStart(t,this))}}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let t=null;La.disable$$module$build$src$core$events$utils();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{La.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=vt(this.targetWorkspace,n),L()){for(La.setGroup$$module$build$src$core$events$utils(!0),n=0;n<e.length;n++){const t=e[n];M(new($(Za))(t))}M(new($(La.CREATE$$module$build$src$core$events$utils))(t))}return this.autoClose?this.hide():this.filterForCapacity(),t}initFlyoutButton_(e,t,n){const i=e.createDom();e.moveTo(t,n),e.show(),this.listeners.push(z(i,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,t,n,i,o){return(t=ne(bl.RECT,{"fill-opacity":0,x:t,y:n,height:i.height,width:i.width})).tooltip=e,to(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),this.rectMap_.set(e,t),this.mats[o]=t}moveRectToBlock_(e,t){const n=t.getHeightWidth();e.setAttribute("width",String(n.width)),e.setAttribute("height",String(n.height)),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",String(t.y)),e.setAttribute("x",String(this.RTL?t.x-n.width:t.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let t,n=0;t=e[n];n++)if(-1===this.permanentlyDisabled.indexOf(t)){const e=this.targetWorkspace.isCapacityAvailable(T(t));for(;t;)t.setEnabled(e),t=t.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const n=rn(e);return t.setResizesEnabled(!1),t=fn(n,t),this.positionNewBlock(e,t),t}positionNewBlock(e,t){const n=this.targetWorkspace;var i=n.getOriginOffsetInPixels(),o=this.workspace_.getOriginOffsetInPixels();(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),o=ll.sum(o,e),(i=ll.difference(o,i)).scale(1/n.scale),t.moveTo(new ll(i.x,i.y))}};Nf.FlyoutItemType=Of;var $f=class extends Nf{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),i=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(n.left+(n.width-i.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();e=e.getToolboxMetrics();const i=this.toolboxPosition_===Nl.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?i?e.height:n.height-this.height_:i?0:n.height:i?0:n.height+t.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Nl.TOP,i=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(i.push("h",e+2*this.CORNER_RADIUS),i.push("v",t),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",-e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),i.push("h",e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",t),i.push("h",-e-2*this.CORNER_RADIUS)),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setX(this.RTL?1/0:0)}wheel_(e){var t=Q(e);if(t=t.x||t.y){const e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics();let i;t=e.getViewMetrics().left-n.left+t,null==(i=this.workspace_.scrollbar)||i.setX(t),Vn(),Di()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let i=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(let s,l=0;s=e[l];l++)if("block"===s.type){var o=s.block,r=o.getDescendants(!1);for(let t,n=0;t=r[n];n++)t.isInFlyout=!0;r=o.getSvgRoot();const e=o.getHeightWidth();var a=o.outputConnection?this.tabWidth_:0;a=this.RTL?i+e.width:i-a,o.moveBy(a,n),a=this.createRect_(o,a,n,e,l),i+=e.width+t[l],this.addBlockListeners_(r,o,a)}else"button"===s.type&&(o=s.button,this.initFlyoutButton_(o,i,n),i+=o.width+t[l])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===Nl.TOP?new Tl(-1e9,t+e.height,-1e9,1e9):new Tl(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const t=this.workspace_.getTopBlocks(!1);for(let i,o=0;i=t[o];o++)e=Math.max(e,i.getHeightWidth().height);const n=this.buttons_;for(let i,o=0;i=n[o];o++)e=Math.max(e,i.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=xl.scrollbarThickness,this.height_!==e){for(let e,n=0;e=t[n];n++)this.rectMap_.has(e)&&this.moveRectToBlock_(this.rectMap_.get(e),e);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Nl.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};e(Ba.FLYOUTS_HORIZONTAL_TOOLBOX,$a,$f);var Bf=class extends Nf{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),i=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(n.top+(n.height-i.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),n=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Nl.LEFT?e.width:n.width-this.width_:this.toolboxPosition_===Nl.LEFT?0:n.width:this.toolboxPosition_===Nl.LEFT?0:n.width+t.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}}setBackgroundPath(e,t){const n=this.toolboxPosition_===Nl.RIGHT;var i=e+this.CORNER_RADIUS;(i=["M "+(n?i:0)+",0"]).push("h",n?-e:e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",Math.max(0,t)),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",n?e:-e),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))}scrollToStart(){let e;null==(e=this.workspace_.scrollbar)||e.setY(0)}wheel_(e){var t=Q(e);if(t.y){const e=this.workspace_.getMetricsManager(),n=e.getScrollMetrics();let i;t=e.getViewMetrics().top-n.top+t.y,null==(i=this.workspace_.scrollbar)||i.setY(t),Vn(),Di()}e.preventDefault(),e.stopPropagation()}layout_(e,t){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const i=this.RTL?n:n+this.tabWidth_;for(let s,l=0;s=e[l];l++)if("block"===s.type){var o=s.block,r=o.getDescendants(!1);for(let t,n=0;t=r[n];n++)t.isInFlyout=!0;r=o.getSvgRoot();const e=o.getHeightWidth();var a=o.outputConnection?i-this.tabWidth_:i;o.moveBy(a,n),a=this.createRect_(o,this.RTL?a-e.width:a,n,e,l),this.addBlockListeners_(r,o,a),n+=e.height+t[l]}else"button"===s.type&&(o=s.button,this.initFlyoutButton_(o,i,n),n+=o.height+t[l])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===Nl.LEFT?new Tl(-1e9,1e9,-1e9,t+e.width):new Tl(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var t=this.workspace_.getTopBlocks(!1);for(let i,o=0;i=t[o];o++){var n=i.getHeightWidth().width;i.outputConnection&&(n-=this.tabWidth_),e=Math.max(e,n)}for(let i,o=0;i=this.buttons_[o];o++)e=Math.max(e,i.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=xl.scrollbarThickness,this.width_!==e){for(let i,o=0;i=t[o];o++){if(this.RTL){n=i.getRelativeToSurfaceXY().x;let t=e/this.workspace_.scale-this.MARGIN;i.outputConnection||(t-=this.tabWidth_),i.moveBy(t-n,0)}this.rectMap_.has(i)&&this.moveRectToBlock_(this.rectMap_.get(i),i)}if(this.RTL)for(let n,i=0;n=this.buttons_[i];i++)t=n.getPosition().y,n.moveTo(e/this.workspace_.scale-n.width-this.MARGIN-this.tabWidth_,t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Nl.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Bf.registryName="verticalFlyout",e(Ba.FLYOUTS_VERTICAL_TOOLBOX,$a,Bf),La.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=p());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let n,i=0;n=e[i];i++){let e=this.blockToCode(n);Array.isArray(e)&&(e=e[0]),e&&(n.outputConnection&&(e=this.scrubNakedValue(e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e=this.injectId(this.STATEMENT_PREFIX,n)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e+=this.injectId(this.STATEMENT_SUFFIX,n))),t.push(e))}return t=t.join("\n"),(t=(t=(t=this.finish(t)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let n=0;n<e.length;n++){const i=e[n].getCommentText();i&&t.push(i)}return t.length&&t.push(""),t.join("\n")}blockToCode(e,t){if(!1===this.isInitialized&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=this.forBlock[e.type];if(!n&&this[e.type]&&(te("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),n=this[e.type]),"function"!=typeof n)throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(n=n.call(e,e,this),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)}valueToCode(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var i=e.getInputTargetBlock(t);if(!i)return"";if(""===(t=this.blockToCode(i)))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${i.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+i.type);if(!e)return"";i=!1;var o=Math.floor(n);const r=Math.floor(t);if(o<=r&&(o!==r||0!==o&&99!==o))for(i=!0,o=0;o<this.ORDER_OVERRIDES.length;o++)if(this.ORDER_OVERRIDES[o][0]===n&&this.ORDER_OVERRIDES[o][1]===t){i=!1;break}return i&&(e="("+e+")"),e}statementToCode(e,t){if(e=e.getInputTargetBlock(t),"string"!=typeof(t=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const n=this.nameDB_.getDistinctName(e,La.NameType$$module$build$src$core$names.PROCEDURE);let i;for(this.functionNames_[e]=n,Array.isArray(t)&&(t=t.join("\n")),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,n);i!==t;)i=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,La.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,La.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,n){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},La.CodeGenerator$$module$build$src$core$generator;var Ff=!1,Uf={};Uf.Align=La.Align$$module$build$src$core$inputs$align,Uf.DummyInput=Rh,Uf.EndRowInput=Ih,Uf.Input=Mh,Uf.StatementInput=Dh,Uf.ValueInput=La.ValueInput$$module$build$src$core$inputs$value_input,Uf.inputTypes=La.inputTypes$$module$build$src$core$inputs$input_types;var Gf="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Vf=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,n){La.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=n,n.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{La.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){La.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{La.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Vc.PREVIOUS_STATEMENT||t.type===Vc.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof yf)}previewMarker(e,t){const n=e.getSourceBlock(),i=this.createInsertionMarker(n),o=this.getMatchingConnection(n,i,e);if(!o)throw Error("Could not create insertion marker to preview connection");i.queueRender(),Et(),o.connect(t);const r={x:t.x-o.x,y:t.y-o.y},a=o.getOffsetInBlock().clone();return yt().then((()=>{null==i||i.positionNearConnection(o,r,a),null==i||i.getSvgRoot().setAttribute("visibility","visible")})),o}createInsertionMarker(e){const t=this.workspace.newBlock(e.type);if(t.setInsertionMarker(!0),e.saveExtraState){var n=e.saveExtraState(!0);n&&t.loadExtraState&&t.loadExtraState(n)}else e.mutationToDom&&(n=e.mutationToDom())&&t.domToMutation&&t.domToMutation(n);for(n=0;n<e.inputList.length;n++){const i=e.inputList[n];if(i.name===Gh)continue;const o=t.inputList[n];if(!o)throw Error(Gf.replace("%1","an input"));for(let e=0;e<i.fieldRow.length;e++){const t=i.fieldRow[e],n=o.fieldRow[e];if(!n)throw Error(Gf.replace("%1","a field"));n.setValue(t.getValue())}}for(const i of t.getDescendants(!1))i.setInsertionMarker(!0);return t.setCollapsed(e.isCollapsed()),t.setInputsInline(e.getInputsInline()),t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden"),t}getMatchingConnection(e,t,n){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let i=0;i<e.length;i++)if(e[i]===n)return t[i];return null}hidePreview(){La.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{La.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),n=t.outputConnection;let i;if(null!=(i=t.previousConnection)&&i.targetConnection||null!=n&&n.targetConnection)t.unplug(!0);else{let t;null==(t=e.targetBlock())||t.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};e(Ba.CONNECTION_PREVIEWER,$a,Vf);var Hf=class extends Ch{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Wf=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+"\n"+this.inlineSteps_}drawTopCorner(e){this.steps_+=ir(e.xPos,this.info_.startY);for(let t,n=0;t=e.elements[n];n++)ih.isLeftSquareCorner(t)?this.steps_+=this.highlightConstants_.START_POINT:ih.isLeftRoundedCorner(t)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ih.isPreviousConnection(t)?this.steps_+=this.notchPaths_.pathLeft:ih.isHat(t)?this.steps_+=this.startPaths_.path(this.RTL_):ih.isSpacer(t)&&0!==t.width&&(this.steps_+=ar("H",t.xPos+t.width-this.highlightOffset));this.steps_+=ar("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+ar("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const n=e.height-t.connectionHeight;this.steps_+=nr(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+ar("v",n)}else this.steps_+=nr(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const n=e.height-2*this.insideCornerPaths_.height;this.steps_+=nr(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+ar("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+or(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=nr(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+or(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof yh&&e.followsStatement&&(this.steps_+=ar("H",t)),this.RTL_&&(this.steps_+=ar("H",t),e.height>this.highlightOffset&&(this.steps_+=ar("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=ar("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];ih.isLeftSquareCorner(t)?this.steps_+=nr(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):ih.isLeftRoundedCorner(t)&&(this.steps_+=nr(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=nr(this.info_.startX,e):(this.steps_+=nr(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=ar("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,ih.isLeftRoundedCorner(e.elements[0])?this.steps_+=ar("V",this.outsideCornerPaths_.height):this.steps_+=ar("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,n=e.xPos+e.connectionWidth;var i=e.centerline-e.height/2;const o=e.width-e.connectionWidth,r=i+t;this.RTL_?(i=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=nr(n-t,r)+ar("v",i)+this.puzzleTabPaths_.pathDown(this.RTL_)+ar("v",e)+ar("h",o)):this.inlineSteps_+=nr(e.xPos+e.width+t,r)+ar("v",e.height)+ar("h",-o)+nr(n,i+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},zf=class extends wh{constructor(e,t){super(e,t),this.highlighter_=new Wf(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=ar("H",e.xPos+e.width)+ar("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(null!=t&&t.connectionModel){let n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},jf=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=ir(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,i=ir(n,n)+sr("a","0 0,0",e,er(-n-t,e-n)),o=sr("a","0 0,0",e+t,er(e+t,e+t)),r=ir(n,-n)+sr("a","0 0,0",e+t,er(e-n,n+t));return{width:e+t,height:e,pathTop:e=>e?i:"",pathBottom:e=>e?o:r}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,i=ir(n,n)+sr("a","0 0,1",e-t,er(e-n,-n+t)),o=ir(t,e)+sr("a","0 0,1",e-t,er(e,-e+t)),r=-n,a=ir(n,r)+sr("a","0 0,1",e-t,er(-n+t,-r-e));return{height:e,topLeft:e=>e?i:o,bottomLeft:()=>a}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=ir(-2,3.4-t)+or(-.45*e,-2.1),i=ar("v",2.5)+ir(.97*-e,2.5)+tr("q",[er(.05*-e,10),er(.3*e,9.5)])+ir(.67*e,-1.9)+ar("v",2.5),o=ar("v",-1.5)+ir(-.92*e,-.5)+tr("q",[er(-.19*e,-5.5),er(0,-11)])+ir(.92*e,1),r=ir(-5,t-.7)+or(.46*e,-2.1);return{width:e,height:t,pathUp:e=>e?n:o,pathDown:e=>e?i:r}}makeNotch(){return{pathLeft:ar("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:or(5.1,2.6)+ir(-10.2,6.8)+or(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=ir(25,-8.7)+tr("c",[er(29.7,-6.2),er(57.2,-.5),er(75,8.7)]),n=tr("c",[er(17.8,-9.2),er(45.3,-14.9),er(75,-8.7)])+nr(100.5,e+.5);return{path:e=>e?t:n}}},Xf=class extends fh{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Yf=class extends gh{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},qf=class extends kh{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Dh||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof La.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Xf(this.constants_,e)),t.hasInlineInput=!0):e instanceof Dh?(t.elements.push(new Yf(this.constants_,e)),t.hasStatement=!0):e instanceof La.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ch(this.constants_,e)),t.hasExternalInput=!0):(e instanceof Rh||e instanceof Ih)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||null!==t.align||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let n,i=0;n=this.rows[i];i++)n.hasExternalInput&&(e=!0);for(let n,i=0;n=this.rows[i];i++){var t=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new ph(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let e=0;e<t.length-1;e++){n.elements.push(t[e]);const i=this.getInRowSpacing_(t[e],t[e+1]);n.elements.push(new ph(this.constants_,i))}n.elements.push(t[t.length-1]),n.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&n.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),n.elements.push(new ph(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&ih.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&ih.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&ih.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ih.isInput(e)&&(!t||ih.isStatementInput(t)))return ih.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:ih.isIcon(e)?2*this.constants_.LARGE_PADDING+1:ih.isHat(e)?this.constants_.NO_PADDING:ih.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ih.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ih.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ih.isInput(e)&&!t){if(ih.isExternalInput(e))return this.constants_.NO_PADDING;if(ih.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ih.isStatementInput(e))return this.constants_.NO_PADDING}if(!ih.isInput(e)&&t&&ih.isInput(t)){if(ih.isField(e)&&e.isEditable){if(ih.isInlineInput(t)||ih.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(ih.isInlineInput(t)||ih.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(ih.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ih.isIcon(e)&&t&&!ih.isInput(t))return this.constants_.LARGE_PADDING;if(ih.isInlineInput(e)&&t&&ih.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ih.isLeftSquareCorner(e)&&t){if(ih.isHat(t))return this.constants_.NO_PADDING;if(ih.isPreviousConnection(t))return t.notchOffset;if(ih.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ih.isLeftRoundedCorner(e)&&t){if(ih.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(ih.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ih.isField(e)&&t&&ih.isField(t)&&e.isEditable===t.isEditable||t&&ih.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return ih.isTopRow(e)&&ih.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ih.isTopRow(e)||ih.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(ih.isSpacer(t))return e.yPos+t.height/2;if(ih.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ih.isNextConnection(t)?e+t.height/2:e-t.height/2;if(ih.isTopRow(e))return ih.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return ih.isField(t)||ih.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=ih.isInlineInput(t)?n+t.height/2:n+e.height/2,n}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,n=null;for(let i,o=this.rows.length-1;i=this.rows[o];o--)t.set(i,e),ih.isInputRow(i)&&(i.hasStatement&&this.alignStatementRow_(i),n&&n.hasStatement&&i.width<n.width?t.set(i,n.width):e=i.hasStatement?i.width:Math.max(e,i.width),n=i);e=0;for(let i,o=0;i=this.rows[o];o++)i.hasStatement?e=this.getDesiredRowWidth_(i):ih.isSpacer(i)?i.width=Math.max(e,t.get(i)):(n=i.width,0<(e=Math.max(e,t.get(i))-n)&&this.addAlignmentPadding_(i,e),e=i.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let i,o=0;i=this.rows[o];o++){i.yPos=t,i.xPos=this.startX,t+=i.height,e=Math.max(e,i.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;i===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(i)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Kf=class extends Fh{constructor(e,t,n){super(e,t,n),this.constants=n,this.colourDark="#000000",this.svgPathDark=ne(bl.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=ne(bl.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Co("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Qf=class extends jh{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t){super.refreshDom(e,t),this.getHighlightConstants().init()}makeConstants_(){return new Hf}makeRenderInfo_(e){return new qf(this,e)}makeDrawer_(e,t){return new zf(e,t)}makePathObject(e,t){return new Kf(e,t,this.getConstants())}makeHighlightConstants_(){return new jf(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};xr("geras",Qf);var Zf={};Zf.ConstantProvider=Hf,Zf.Drawer=zf,Zf.HighlightConstantProvider=jf,Zf.Highlighter=Wf,Zf.InlineInput=Xf,Zf.PathObject=Kf,Zf.RenderInfo=qf,Zf.Renderer=Qf,Zf.StatementInput=Yf;var Jf=class extends Ch{constructor(){super(),te("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},eg=class extends wh{constructor(e,t){super(e,t),te("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},tg=class extends kh{constructor(e,t){super(e,t),te("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},ng=class extends jh{constructor(e){super(e),te("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new Jf}makeRenderInfo_(e){return new tg(this,e)}makeDrawer_(e,t){return new eg(e,t)}};xr("minimalist",ng);var ig={};ig.ConstantProvider=Jf,ig.Drawer=eg,ig.RenderInfo=tg,ig.Renderer=ng;var og=class extends kh{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const i=this.rows[t];var n=i.elements;if(i.elements=[],i.startsWithElemSpacer()&&i.elements.push(new ph(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let e=0;e<n.length-1;e++){i.elements.push(n[e]);const t=this.getInRowSpacing_(n[e],n[e+1]);i.elements.push(new ph(this.constants_,t))}i.elements.push(n[n.length-1]),i.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&i.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),i.elements.push(new ph(this.constants_,n)))}}}getInRowSpacing_(e,t){if(!e)return t&&ih.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&ih.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&ih.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ih.isInput(e)&&!t)return ih.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:ih.isIcon(e)?2*this.constants_.LARGE_PADDING+1:ih.isHat(e)?this.constants_.NO_PADDING:ih.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ih.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ih.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ih.isInput(e)&&!t){if(ih.isExternalInput(e))return this.constants_.NO_PADDING;if(ih.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ih.isStatementInput(e))return this.constants_.NO_PADDING}if(!ih.isInput(e)&&t&&ih.isInput(t)){if(ih.isField(e)&&e.isEditable){if(ih.isInlineInput(t)||ih.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(ih.isInlineInput(t)||ih.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(ih.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ih.isIcon(e)&&t&&!ih.isInput(t))return this.constants_.LARGE_PADDING;if(ih.isInlineInput(e)&&t&&ih.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ih.isLeftSquareCorner(e)&&t){if(ih.isHat(t))return this.constants_.NO_PADDING;if(ih.isPreviousConnection(t)||ih.isNextConnection(t))return t.notchOffset}return ih.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:ih.isField(e)&&t&&ih.isField(t)&&e.isEditable===t.isEditable||t&&ih.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return ih.isTopRow(e)&&ih.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ih.isTopRow(e)||ih.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(ih.isSpacer(t))return e.yPos+t.height/2;if(ih.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ih.isNextConnection(t)?e+t.height/2:e-t.height/2;if(ih.isTopRow(e))return ih.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let n=e.yPos;return ih.isField(t)&&e.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):n+e.height/2}finalize_(){let e=0,t=0;for(var n=0;n<this.rows.length;n++){const o=this.rows[n];o.yPos=t,o.xPos=this.startX,t+=o.height,e=Math.max(e,o.widthWithConnectedBlocks);var i=t-this.topRow.ascenderHeight;o===this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,t+=i),this.recordElemPositions_(o)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,n.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},rg=class extends jh{constructor(e){super(e)}makeRenderInfo_(e){return new og(this,e)}};xr("thrasos",rg);var ag={};ag.RenderInfo=og,ag.Renderer=rg;var sg=new gd("zelos",{colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}}),lg={Classic:md,Zelos:sg},cg=class{constructor(e,t,n){this.id_=e.toolboxitemid||S(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},ug=class extends cg{constructor(e,t,n){super(e,t,n),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),"true"===this.toolboxItemDef_.hidden&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(n)}}parseCategoryDef_(e){this.name_="name"in e?Ro(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Nn(this.htmlDiv_,Kc.TREEITEM),$n(this.htmlDiv_,Qc.SELECTED,!1),$n(this.htmlDiv_,Qc.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Nn(this.iconDom_,Kc.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&$n(this.htmlDiv_,Qc.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ie(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&ie(e,t),t=ug.nestedPadding*this.getLevel()+"px",this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&ie(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ie(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&ie(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=ug.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle_(t);if(e)return this.parseColour_(e)}return""}getColourfromStyle_(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(e){if(null==(e=Ro(e))||""===e)return"";var t=Number(e);return isNaN(t)?(t=Ao(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):wo(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&oe(e,t),(t=this.cssConfig_.openicon)&&ie(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&oe(e,t),(t=this.cssConfig_.closedicon)&&ie(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const e=this.parseColour_(ug.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||e,t&&ie(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&re(this.rowDiv_,t);$n(this.htmlDiv_,Qc.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_="string"==typeof e?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:$e(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){se(this.htmlDiv_)}};ug.registrationName="category",ug.nestedPadding=19,ug.borderWidth=8,ug.defaultBackgroundColour="#57e",J('\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n'),e(Ba.TOOLBOX_ITEM,ug.registrationName,ug);var dg=class extends cg{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),t=this.cssConfig_.container;return t&&ie(e,t),this.htmlDiv_=e}getDiv(){return this.htmlDiv_}dispose(){se(this.htmlDiv_)}};dg.registrationName="sep",J('\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n'),e(Ba.TOOLBOX_ITEM,dg.registrationName,dg);var hg=class extends ug{constructor(e,t,n){super(e,t,n),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let n=0;n<t.length;n++){const i=t[n];!o(Ba.TOOLBOX_ITEM,i.kind)||i.kind.toLowerCase()===dg.registrationName&&e?(this.flyoutItems_.push(i),e=!0):(this.createToolboxItem_(i),e=!1)}}}}createToolboxItem_(e){let t=e.kind;"CATEGORY"===t.toUpperCase()&&Ue(e)&&(t=hg.registrationName),e=new(r(Ba.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded("true"===this.toolboxItemDef_.expanded||!0===this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Nn(this.subcategoriesDiv_,Kc.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),$n(this.htmlDiv_,Qc.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&ie(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var n=this.cssConfig_.contents;for(n&&ie(t,n),n=0;n<e.length;n++){const i=e[n];i.init();const o=i.getDiv();if(t.appendChild(o),i.getClickTarget){let e;null==(e=i.getClickTarget())||e.setAttribute("id",i.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let e;null==(e=this.parentToolbox_.getFlyout())||e.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}$n(this.htmlDiv_,Qc.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let n=0;n<t.length;n++)t[n].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};hg.registrationName="collapsibleCategory",e(Ba.TOOLBOX_ITEM,hg.registrationName,hg);var pg=class extends bp{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),le(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[ol.Capability.AUTOHIDEABLE,ol.Capability.DELETE_AREA,ol.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Nn(this.contentsDiv_,Kc.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),ie(e,"blocklyToolboxDiv"),ie(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return ie(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=z(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=z(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(q(e)||e.target===this.HtmlDiv)p().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t)).isSelectable()&&(this.setSelectedItem(t),t.onClick(e)),p().hideChaff(!0)}G()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext_();break;case"ArrowUp":t=this.selectPrevious_();break;case"ArrowLeft":t=this.selectParent_();break;case"ArrowRight":t=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=new _d({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?l(Ba.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):l(Ba.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e;for(let t=0;t<this.contents_.length;t++){const e=this.contents_[t];e&&e.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let n=0;n<e.length;n++)this.createToolboxItem_(e[n],t);this.contentsDiv_.appendChild(t)}createToolboxItem_(e,t){var n=e.kind;"CATEGORY"===n.toUpperCase()&&Ue(e)&&(n=hg.registrationName),(n=r(Ba.TOOLBOX_ITEM,n.toLowerCase()))&&((e=new n(e,this)).init(),this.addToolboxItem_(e),(n=e.getDiv())&&t.appendChild(n),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&ie(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&re(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,n=t+e.height,i=e.left;return e=i+e.width,this.toolboxPosition===Nl.TOP?new Tl(-1e7,n,-1e7,1e7):this.toolboxPosition===Nl.BOTTOM?new Tl(t,1e7,-1e7,1e7):this.toolboxPosition===Nl.LEFT?new Tl(-1e7,1e7,-1e7,e):new Tl(-1e7,1e7,i,1e7)}wouldDelete(e,t){return e instanceof mp?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Nl.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===Nl.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Nl.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition===Nl.TOP?e.scrollY+t.height:e.scrollY),b(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!Ia(e)||(this.shouldDeselectItem_(t,e)&&null!==t&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&null!==e&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))}shouldDeselectItem_(e,t){return null!==e&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return null!==t&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),$n(this.contentsDiv_,Qc.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),$n(this.contentsDiv_,Qc.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e)}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(e,t){const n=e&&e.getName();let i=t&&t.getName();e===t&&(i=null),e=new($(ls))(n,i,this.workspace_.id),M(e)}selectParent_(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let t=this.contents_[e];for(;t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)X(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),se(this.HtmlDiv))}};J('\n.blocklyToolboxDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n'),e(Ba.TOOLBOX,$a,pg);var fg="10.4.3",gg=La.Align$$module$build$src$core$inputs$align.LEFT,mg=La.Align$$module$build$src$core$inputs$align.CENTRE,_g=La.Align$$module$build$src$core$inputs$align.RIGHT,vg=Vc.INPUT_VALUE,bg=Vc.OUTPUT_VALUE,Tg=Vc.NEXT_STATEMENT,Ag=Vc.PREVIOUS_STATEMENT,yg=La.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,Eg=Nl.TOP,Sg=Nl.BOTTOM,Cg=Nl.LEFT,wg=Nl.RIGHT;tp.prototype.newBlock=function(e,t){return new cp(this,e,t)},ap.prototype.newBlock=function(e,t){return new mp(this,e,t)},ap.newTrashcan=function(e){return new Tp(e)},gc.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(si(this)),t.push(ai(this))),Jn(e,t,this.RTL)}},Nd.prototype.newWorkspaceSvg=function(e){return new ap(e)},La.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=(e=ur(e))[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],La.Names$$module$build$src$core$names.NameType.PROCEDURE)};var xg=Vc,Mg={ALIGN_CENTRE:mg,ALIGN_LEFT:gg,ALIGN_RIGHT:_g};return Mg.ASTNode=Lh,Mg.BasicCursor=hp,Mg.Block=cp,Mg.BlockDragger=Kp,Mg.BlockSvg=mp,Mg.Blocks=Va,Mg.Bubble=Ld,Mg.BubbleDragger=Bu,Mg.COLLAPSED_FIELD_NAME=Vh,Mg.COLLAPSED_INPUT_NAME=Gh,Mg.COLLAPSE_CHARS=Fu,Mg.CodeGenerator=La.CodeGenerator$$module$build$src$core$generator,Mg.CollapsibleToolboxCategory=hg,Mg.ComponentManager=ol,Mg.Connection=Uh,Mg.ConnectionChecker=Qh,Mg.ConnectionDB=Wc,Mg.ConnectionType=Vc,Mg.ContextMenu=pu,Mg.ContextMenuItems=Sf,Mg.ContextMenuRegistry=fu,Mg.Css=sl,Mg.Cursor=dp,Mg.DELETE_VARIABLE_ID=Hu,Mg.DRAG_STACK=Uu,Mg.DUMMY_INPUT=yg,Mg.DeleteArea=bp,Mg.DragTarget=vp,Mg.DropDownDiv=ku,Mg.Events=cf,Mg.Extensions=Ud,Mg.Field=Sd,Mg.FieldAngle=wf,Mg.FieldCheckbox=xf,Mg.FieldColour=Mf,Mg.FieldDropdown=Id,Mg.FieldImage=hf,Mg.FieldLabel=xh,Mg.FieldLabelSerializable=Rf,Mg.FieldMultilineInput=If,Mg.FieldNumber=Df,Mg.FieldTextInput=ff,Mg.FieldVariable=kf,Mg.Flyout=Nf,Mg.FlyoutButton=Lf,Mg.FlyoutMetricsManager=Pf,Mg.Generator=La.CodeGenerator$$module$build$src$core$generator,Mg.Gesture=dd,Mg.Grid=hd,Mg.HorizontalFlyout=$f,Mg.INPUT_VALUE=vg,Mg.Input=Mh,Mg.InsertionMarkerManager=zh,Mg.InsertionMarkerPreviewer=Vf,Mg.Marker=up,Mg.MarkerManager=pd,Mg.Menu=nu,Mg.MenuItem=iu,Mg.MetricsManager=jp,Mg.Msg=La.Msg$$module$build$src$core$msg,Mg.NEXT_STATEMENT=Tg,Mg.Names=La.Names$$module$build$src$core$names,Mg.OPPOSITE_TYPE=Gu,Mg.OUTPUT_VALUE=bg,Mg.Options=_d,Mg.PREVIOUS_STATEMENT=Ag,Mg.PROCEDURE_CATEGORY_NAME=eh,Mg.Procedures=th,Mg.RENAME_VARIABLE_ID=Vu,Mg.RenderedConnection=gp,Mg.Scrollbar=xl,Mg.ScrollbarPair=zp,Mg.ShortcutItems=Bp,Mg.ShortcutRegistry=Pp,Mg.TOOLBOX_AT_BOTTOM=Sg,Mg.TOOLBOX_AT_LEFT=Cg,Mg.TOOLBOX_AT_RIGHT=wg,Mg.TOOLBOX_AT_TOP=Eg,Mg.TabNavigateCursor=pp,Mg.Theme=gd,Mg.ThemeManager=Yh,Mg.Themes=lg,Mg.Toolbox=pg,Mg.ToolboxCategory=ug,Mg.ToolboxItem=cg,Mg.ToolboxSeparator=dg,Mg.Tooltip=sd,Mg.Touch=Ws,Mg.Trashcan=Tp,Mg.UnattachedFieldError=Cd,Mg.VARIABLE_CATEGORY_NAME=oc,Mg.VARIABLE_DYNAMIC_CATEGORY_NAME=qh,Mg.VERSION=fg,Mg.VariableMap=ep,Mg.VariableModel=ic,Mg.Variables=sc,Mg.VariablesDynamic=Kh,Mg.VerticalFlyout=Bf,Mg.WidgetDiv=cu,Mg.Workspace=tp,Mg.WorkspaceAudio=ip,Mg.WorkspaceComment=lc,Mg.WorkspaceCommentSvg=gc,Mg.WorkspaceDragger=ld,Mg.WorkspaceSvg=ap,Mg.Xml=yc,Mg.ZoomControls=jl,Mg.blockAnimations=Pu,Mg.blockRendering=Xh,Mg.browserEvents=tl,Mg.bubbles=Qp,Mg.bumpObjects=qp,Mg.clipboard=qc,Mg.common=Xa,Mg.config=La.config$$module$build$src$core$config,Mg.connectionTypes=xg,Mg.constants=Hh,Mg.defineBlocksWithJsonArray=y,Mg.dialog=ec,Mg.fieldRegistry=Rd,Mg.geras=Zf,Mg.getMainWorkspace=p,Mg.getSelected=g,Mg.hasBubble=mo,Mg.hideChaff=Da,Mg.icons=nh,Mg.inject=Aa,Mg.inputTypes=La.inputTypes$$module$build$src$core$inputs$input_types,Mg.inputs=Uf,Mg.isCopyable=Pr,Mg.isIcon=Ma,Mg.isObservable=Lo,Mg.isPaster=Ra,Mg.isSerializable=tn,Mg.isVariableBackedParameterModel=tt,Mg.minimalist=ig,Mg.procedures=th,Mg.registry=Fa,Mg.renderManagement=Ac,Mg.serialization=Wp,Mg.setLocale=Yl,Mg.setParentContainer=v,Mg.svgResize=b,Mg.thrasos=ag,Mg.uiPosition=Wl,Mg.utils=Vd,Mg.zelos=Ef,Object.defineProperties(Mg,{HSV_SATURATION:{get:function(){return te("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),_o()},set:function(e){te("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),vo(e)}},HSV_VALUE:{get:function(){return te("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),bo()},set:function(e){te("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),To(e)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:ql}),Mg.__namespace__=La,Mg}()}(blockly_compressed)),blockly_compressed.exports}function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(e,t){e.exports=requireBlockly_compressed()}(blockly$1)),blockly$1.exports}!function(e,t){e.exports=requireBlockly()}(coreBrowser);var coreBrowserExports=exports("k",coreBrowser.exports),en$2={exports:{}};!function(e,t){e.exports=function(){var e=e||{Msg:Object.create(null)};return e.Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DIALOG_CANCEL="Cancel",e.Msg.DIALOG_OK="OK",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="÷",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="×",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg}()}(en$2);var enExports=en$2.exports;const en$1=getDefaultExportFromCjs(enExports),En=_mergeNamespaces({__proto__:null,default:en$1},[enExports]);var zhHans$1={exports:{}};!function(e,t){e.exports=function(){var e=e||{Msg:Object.create(null)};return e.Msg.ADD_COMMENT="添加注释",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="不能删除变量“%1”，因为它是函数“%2”定义的一部分",e.Msg.CHANGE_VALUE_TITLE="更改值：",e.Msg.CLEAN_UP="整理块",e.Msg.COLLAPSED_WARNINGS_WARNING="已收起的信息块内包含警告。",e.Msg.COLLAPSE_ALL="折叠块",e.Msg.COLLAPSE_BLOCK="折叠块",e.Msg.COLOUR_BLEND_COLOUR1="颜色1",e.Msg.COLOUR_BLEND_COLOUR2="颜色2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="比例",e.Msg.COLOUR_BLEND_TITLE="混合",e.Msg.COLOUR_BLEND_TOOLTIP="把两种颜色以一个给定的比例(0.0-1.0)进行混合。",e.Msg.COLOUR_PICKER_HELPURL="https://zh.wikipedia.org/wiki/颜色",e.Msg.COLOUR_PICKER_TOOLTIP="从调色板中选择一种颜色。",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="随机颜色",e.Msg.COLOUR_RANDOM_TOOLTIP="随机选择一种颜色。",e.Msg.COLOUR_RGB_BLUE="蓝色",e.Msg.COLOUR_RGB_GREEN="绿色",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="红色",e.Msg.COLOUR_RGB_TITLE="颜色",e.Msg.COLOUR_RGB_TOOLTIP="通过指定红色、绿色和蓝色的量创建一种颜色。所有的值必须在0和100之间。",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="跳出循环",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="继续下一轮循环",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="跳出包含它的循环。",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="跳过本轮循环的剩余部分，并继进行续下一轮循环。",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="警告：这个块只能在循环内使用。",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="遍历列表 %2 里的每一项 %1",e.Msg.CONTROLS_FOREACH_TOOLTIP="遍历列表中的每一项，将变量“%1”设为所选项，并执行一些语句。",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="变量 %1 从 %2 数到 %3 每次增加 %4",e.Msg.CONTROLS_FOR_TOOLTIP="让变量“%1”记录开始数到结束数之间指定间隔的值，并执行指定的块。",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="在这个if语句块中增加一个条件。",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="在这个if语句块中添加一个最终的，包括所有其余情况的条件。",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="增加、删除或重新排列各节来重新配置这个if语句块。",e.Msg.CONTROLS_IF_MSG_ELSE="否则",e.Msg.CONTROLS_IF_MSG_ELSEIF="否则如果",e.Msg.CONTROLS_IF_MSG_IF="如果",e.Msg.CONTROLS_IF_TOOLTIP_1="如果值为真，执行一些语句。",e.Msg.CONTROLS_IF_TOOLTIP_2="如果值为真，则执行第一块语句。否则，则执行第二块语句。",e.Msg.CONTROLS_IF_TOOLTIP_3="如果第一个值为真，则执行第一块的语句。否则，如果第二个值为真，则执行第二块的语句。",e.Msg.CONTROLS_IF_TOOLTIP_4="如果第一个值为真，则执行第一块对语句。否则，如果第二个值为真，则执行语句的第二块。如果没有值为真，则执行最后一块的语句。",e.Msg.CONTROLS_REPEAT_HELPURL="https://zh.wikipedia.org/wiki/For循环",e.Msg.CONTROLS_REPEAT_INPUT_DO="执行",e.Msg.CONTROLS_REPEAT_TITLE="重复 %1 次",e.Msg.CONTROLS_REPEAT_TOOLTIP="多次执行一些语句。",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="重复直到条件满足",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="当条件满足时重复",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="只要值为假，就一直循环执行一些语句。",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="只要值为真，就一直循环执行一些语句。",e.Msg.DELETE_ALL_BLOCKS="删除所有 %1 个块吗？",e.Msg.DELETE_BLOCK="删除块",e.Msg.DELETE_VARIABLE="删除变量“%1”",e.Msg.DELETE_VARIABLE_CONFIRMATION="要删除对变量“%2”的%1个引用吗？",e.Msg.DELETE_X_BLOCKS="删除 %1 个块",e.Msg.DIALOG_CANCEL="取消",e.Msg.DIALOG_OK="确认",e.Msg.DISABLE_BLOCK="禁用块",e.Msg.DUPLICATE_BLOCK="复制",e.Msg.DUPLICATE_COMMENT="复制注释",e.Msg.ENABLE_BLOCK="启用块",e.Msg.EXPAND_ALL="展开块",e.Msg.EXPAND_BLOCK="展开块",e.Msg.EXTERNAL_INPUTS="外部输入",e.Msg.HELP="帮助",e.Msg.INLINE_INPUTS="单行输入",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="创建空列表",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="返回一个列表，长度为 0，不包含任何数据记录",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="列表",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="增加、删除或重新排列各部分以此重新配置这个列表块。",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="创建列表，内容：",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="将一个项添加到列表中。",e.Msg.LISTS_CREATE_WITH_TOOLTIP="建立一个具有任意数量项目的列表。",e.Msg.LISTS_GET_INDEX_FIRST="第一项",e.Msg.LISTS_GET_INDEX_FROM_END="倒数第#项",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="取得",e.Msg.LISTS_GET_INDEX_GET_REMOVE="取得并移除",e.Msg.LISTS_GET_INDEX_LAST="最后一项",e.Msg.LISTS_GET_INDEX_RANDOM="随机的一项",e.Msg.LISTS_GET_INDEX_REMOVE="移除",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="返回列表中的第一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="返回在列表中的指定位置的项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="返回列表中的最后一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="返回列表中的随机一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="移除并返回列表中的第一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="移除并返回列表中的指定位置的项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="移除并返回列表中的最后一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="移除并返回列表中的随机一项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="移除列表中的第一项",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="移除在列表中的指定位置的项。",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="移除列表中的最后一项",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="删除列表中的随机一项。",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="到倒数第#项",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="到第#项",e.Msg.LISTS_GET_SUBLIST_END_LAST="到最后一项",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="获取子列表，从第一项",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="获取子列表，从倒数第#项",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="获取子列表，从第#项",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="复制列表中指定的部分。",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1是最后一项。",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1是第一项。",e.Msg.LISTS_INDEX_OF_FIRST="寻找第一次出现的项",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="寻找最后一次出现的项",e.Msg.LISTS_INDEX_OF_TOOLTIP="返回在列表中的第一/最后一个匹配项的索引值。如果找不到项目则返回%1。",e.Msg.LISTS_INLIST="在列表中",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1是空的",e.Msg.LISTS_ISEMPTY_TOOLTIP="如果改列表为空，则返回真。",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="%1的长度",e.Msg.LISTS_LENGTH_TOOLTIP="返回列表的长度。",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="建立列表使用项 %1 重复 %2 次",e.Msg.LISTS_REPEAT_TOOLTIP="建立包含指定重复次数的值的列表。",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="倒转%1",e.Msg.LISTS_REVERSE_TOOLTIP="倒转一个列表，返回副本。",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="值为",e.Msg.LISTS_SET_INDEX_INSERT="插入在",e.Msg.LISTS_SET_INDEX_SET="设置",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="在列表的起始处添加该项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="在列表中指定位置插入项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="在列表的末尾处添加该项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="在列表的随机位置插入该项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="设置列表中的第一项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="设置在列表中指定位置的项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="设置列表中的最后一项。",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="设置列表中的随机一项。",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="升序",e.Msg.LISTS_SORT_ORDER_DESCENDING="降序",e.Msg.LISTS_SORT_TITLE="排序%1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="排序一个列表，返回副本。",e.Msg.LISTS_SORT_TYPE_IGNORECASE="按字母（忽略大小写）",e.Msg.LISTS_SORT_TYPE_NUMERIC="按数字",e.Msg.LISTS_SORT_TYPE_TEXT="按字母",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="从文本制作列表",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="将列表合并为文本",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="加入文本列表至一个文本，由分隔符分隔。",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="将文本按指定的分隔符拆分为文本组成的列表。",e.Msg.LISTS_SPLIT_WITH_DELIMITER="分隔符：",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="返回 true 或 false。",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://zh.wikipedia.org/wiki/不等",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="如果两个输入结果相等，则返回真。",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="如果第一个输入结果比第二个大，则返回真。",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="如果第一个输入结果大于或等于第二个输入结果，则返回真。",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="如果第一个输入结果比第二个小，则返回真。",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="如果第一个输入结果小于或等于第二个输入结果，则返回真。",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="如果两个输入结果不相等，则返回真。",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="非 %1",e.Msg.LOGIC_NEGATE_TOOLTIP="如果输入结果为false，则返回true；如果输入结果为true，则返回false。",e.Msg.LOGIC_NULL="空",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="返回空值。",e.Msg.LOGIC_OPERATION_AND="并且",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="或",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="如果两个输入结果都为真，则返回真。",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="如果至少有一个输入结果为真，则返回真。",e.Msg.LOGIC_TERNARY_CONDITION="断言",e.Msg.LOGIC_TERNARY_HELPURL="https://zh.wikipedia.org/wiki/条件运算符",e.Msg.LOGIC_TERNARY_IF_FALSE="如果为 false",e.Msg.LOGIC_TERNARY_IF_TRUE="如果为 true",e.Msg.LOGIC_TERNARY_TOOLTIP="检查“断言”里的条件语句。如果条件为真，则返回“如果为真”的值，否则，则返回“如果为假”的值。",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://zh.wikipedia.org/wiki/算术",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="返回两个数的和。",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="返回两个数的商。",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="返回两个数的差。",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="返回两个数的积。",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="返回第一个数的第二个数次幂。",e.Msg.MATH_ATAN2_HELPURL="https://zh.wikipedia.org/wiki/反正切2",e.Msg.MATH_ATAN2_TITLE="点(x:%1,y:%2)的方位角",e.Msg.MATH_ATAN2_TOOLTIP="返回点（X，Y）的反正切值，范围为-180到180度。",e.Msg.MATH_CHANGE_HELPURL="https://zh.wikipedia.org/wiki/加法",e.Msg.MATH_CHANGE_TITLE="给 %1 加 %2",e.Msg.MATH_CHANGE_TOOLTIP="把数加到变量“%1”。",e.Msg.MATH_CONSTANT_HELPURL="https://zh.wikipedia.org/wiki/数学常数",e.Msg.MATH_CONSTANT_TOOLTIP="返回一个以下常见常数：π (3.141…)、e (2.718…)、φ (1.618…)、根号2 (1.414…)、根号½ (0.707…)或∞ (无穷)。",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="将 %1 限制在 最低 %2 到最高 %3 之间",e.Msg.MATH_CONSTRAIN_TOOLTIP="把一个数限制在指定的极限（含）之间。",e.Msg.MATH_DIVISION_SYMBOL="÷",e.Msg.MATH_IS_DIVISIBLE_BY="可整除被",e.Msg.MATH_IS_EVEN="是偶数",e.Msg.MATH_IS_NEGATIVE="是负数",e.Msg.MATH_IS_ODD="是奇数",e.Msg.MATH_IS_POSITIVE="是正数",e.Msg.MATH_IS_PRIME="是质数",e.Msg.MATH_IS_TOOLTIP="检查一个数是否是偶数、奇数、质数、整数、正数、负数，或者是否能被某数整除。返回真或假。",e.Msg.MATH_IS_WHOLE="是整数",e.Msg.MATH_MODULO_HELPURL="https://zh.wikipedia.org/wiki/模除",e.Msg.MATH_MODULO_TITLE="%1 ÷ %2 的余数",e.Msg.MATH_MODULO_TOOLTIP="返回两个数相除的余数。",e.Msg.MATH_MULTIPLICATION_SYMBOL="×",e.Msg.MATH_NUMBER_HELPURL="https://zh.wikipedia.org/wiki/数",e.Msg.MATH_NUMBER_TOOLTIP="一个数。",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="列表的平均",e.Msg.MATH_ONLIST_OPERATOR_MAX="列表的最大数",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="列表的中位数",e.Msg.MATH_ONLIST_OPERATOR_MIN="列表的最小数",e.Msg.MATH_ONLIST_OPERATOR_MODE="列表的众数",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="列表的随机项",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="列表的标准差",e.Msg.MATH_ONLIST_OPERATOR_SUM="列表的和",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="返回列表内数值的平均（算术平均）。",e.Msg.MATH_ONLIST_TOOLTIP_MAX="返回列表内的最大数。",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="返回列表内数的中位数。",e.Msg.MATH_ONLIST_TOOLTIP_MIN="返回列表内的最小数。",e.Msg.MATH_ONLIST_TOOLTIP_MODE="返回列表中的出现次数最多的项的列表。",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="返回列表内的一个随机元素。",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="返回列表的标准差。",e.Msg.MATH_ONLIST_TOOLTIP_SUM="返回列表内的所有数的和。",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://zh.wikipedia.org/wiki/随机数生成器",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="随机小数",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="返回一个从0.0（含）到1.0（不含）之间的随机数。",e.Msg.MATH_RANDOM_INT_HELPURL="https://zh.wikipedia.org/wiki/随机数生成器",e.Msg.MATH_RANDOM_INT_TITLE="从 %1 到 %2 范围内的随机整数",e.Msg.MATH_RANDOM_INT_TOOLTIP="返回两个指定的极限（含）之间的随机整数。",e.Msg.MATH_ROUND_HELPURL="https://zh.wikipedia.org/wiki/数值修约",e.Msg.MATH_ROUND_OPERATOR_ROUND="四舍五入",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="向下舍入",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="向上舍入",e.Msg.MATH_ROUND_TOOLTIP="数向上或向下取整。",e.Msg.MATH_SINGLE_HELPURL="https://zh.wikipedia.org/wiki/平方根",e.Msg.MATH_SINGLE_OP_ABSOLUTE="绝对值",e.Msg.MATH_SINGLE_OP_ROOT="平方根",e.Msg.MATH_SINGLE_TOOLTIP_ABS="返回一个数的绝对值。",e.Msg.MATH_SINGLE_TOOLTIP_EXP="返回e的一个数次幂。",e.Msg.MATH_SINGLE_TOOLTIP_LN="返回一个数的自然对数。",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="返回一个数的以10为底的对数。",e.Msg.MATH_SINGLE_TOOLTIP_NEG="返回一个数的相反数。",e.Msg.MATH_SINGLE_TOOLTIP_POW10="返回10的一个数次幂。",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="返回一个数的平方根。",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="反余弦",e.Msg.MATH_TRIG_ASIN="反正弦",e.Msg.MATH_TRIG_ATAN="反正切",e.Msg.MATH_TRIG_COS="余弦",e.Msg.MATH_TRIG_HELPURL="https://zh.wikipedia.org/wiki/三角函数",e.Msg.MATH_TRIG_SIN="正弦",e.Msg.MATH_TRIG_TAN="正切",e.Msg.MATH_TRIG_TOOLTIP_ACOS="返回一个数的反余弦。",e.Msg.MATH_TRIG_TOOLTIP_ASIN="返回一个数的反正弦。",e.Msg.MATH_TRIG_TOOLTIP_ATAN="返回一个数的反正切。",e.Msg.MATH_TRIG_TOOLTIP_COS="返回角度（非弧度）的余弦。",e.Msg.MATH_TRIG_TOOLTIP_SIN="返回角度（非弧度）的正弦。",e.Msg.MATH_TRIG_TOOLTIP_TAN="返回角度（非弧度）的正切。",e.Msg.NEW_COLOUR_VARIABLE="创建颜色变量...",e.Msg.NEW_NUMBER_VARIABLE="创建数变量...",e.Msg.NEW_STRING_VARIABLE="创建字符串变量...",e.Msg.NEW_VARIABLE="创建变量...",e.Msg.NEW_VARIABLE_TITLE="新变量的名称：",e.Msg.NEW_VARIABLE_TYPE_TITLE="新变量的类型：",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="允许声明",e.Msg.PROCEDURES_BEFORE_PARAMS="与：",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程序",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="运行用户定义的函数“%1”。",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://zh.wikipedia.org/wiki/子程序",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="运行用户定义的函数“%1”，并使用它的输出值。",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="与：",e.Msg.PROCEDURES_CREATE_DO="创建“%1”",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="描述该功能...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://zh.wikipedia.org/wiki/子程序",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="做点什么",e.Msg.PROCEDURES_DEFNORETURN_TITLE="至",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="创建一个不带输出值的函数。",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://zh.wikipedia.org/wiki/子程序",e.Msg.PROCEDURES_DEFRETURN_RETURN="返回",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="创建一个有输出值的函数。",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="警告：此函数具有重复参数。",e.Msg.PROCEDURES_HIGHLIGHT_DEF="突出显示函数定义",e.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="如果值为真，则返回第二个值。",e.Msg.PROCEDURES_IFRETURN_WARNING="警告：这个块只能在函数内部使用。",e.Msg.PROCEDURES_MUTATORARG_TITLE="输入名称：",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="添加函数输入。",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="输入",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="添加、移除或重新排此函数的输入。",e.Msg.REDO="重做",e.Msg.REMOVE_COMMENT="删除注释",e.Msg.RENAME_VARIABLE="重命名变量...",e.Msg.RENAME_VARIABLE_TITLE="将所有“%1”变量重命名为:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="在%1之后加上文本%2",e.Msg.TEXT_APPEND_TOOLTIP="将一些文本追加到变量“%1”里。",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="转为小写",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="转为首字母大写",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="转为大写",e.Msg.TEXT_CHANGECASE_TOOLTIP="用不同的大小写模式复制并返回这段文字。",e.Msg.TEXT_CHARAT_FIRST="获取第一个字符",e.Msg.TEXT_CHARAT_FROM_END="获取倒数第#个字符",e.Msg.TEXT_CHARAT_FROM_START="获取第#个字符",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="获取最后一个字符",e.Msg.TEXT_CHARAT_RANDOM="获取随机一个字符",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="在文本%1 里 %2",e.Msg.TEXT_CHARAT_TOOLTIP="返回位于指定位置的字符。",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="计算%1在%2里出现的次数",e.Msg.TEXT_COUNT_TOOLTIP="计算在一段文本中，某个部分文本重复出现了多少次。",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="将一个项添加到文本中。",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="拼接",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="添加、移除或重新排列各节来重新配置这个文本块。",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="到倒数第#个字符",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="到第#个字符",e.Msg.TEXT_GET_SUBSTRING_END_LAST="到最后一个字符",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="从文本",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="获取子串，从第一个字符",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="获取子串，从倒数第#个字符",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="获取子串，从第#个字符",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="返回文本中指定的一部分。",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="寻找第一次出现的文本",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="寻找最后一次出现的文本",e.Msg.TEXT_INDEXOF_TITLE="在文本 %1 里 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="返回第一个文本段在第二个文本段中的第一/最后一个匹配项的起始位置。如果未找到，则返回%1。",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1是空的",e.Msg.TEXT_ISEMPTY_TOOLTIP="如果给定的文本为空，则返回真。",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="创建文本，内容：",e.Msg.TEXT_JOIN_TOOLTIP="通过串起任意数量的项以建立一段文本。",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="%1的长度",e.Msg.TEXT_LENGTH_TOOLTIP="返回给定文本的字母数（包括空格）。",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="输出%1",e.Msg.TEXT_PRINT_TOOLTIP="打印指定的文字、数或其他值。",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="提示用户输入一个数。",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="要求用户输入一些文本。",e.Msg.TEXT_PROMPT_TYPE_NUMBER="提示输入数并显示消息",e.Msg.TEXT_PROMPT_TYPE_TEXT="要求输入文本，并显示提示消息",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="把%3中的%1替换为%2",e.Msg.TEXT_REPLACE_TOOLTIP="在一段文本中，将出现过的某部分文本都替换掉。",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="倒转文本%1",e.Msg.TEXT_REVERSE_TOOLTIP="将文本中各个字符的顺序倒转。",e.Msg.TEXT_TEXT_HELPURL="https://zh.wikipedia.org/wiki/字符串",e.Msg.TEXT_TEXT_TOOLTIP="一个字、词或一行文本。",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="消除其两侧的空格",e.Msg.TEXT_TRIM_OPERATOR_LEFT="消除其左侧的空格",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="消除其右侧的空格",e.Msg.TEXT_TRIM_TOOLTIP="从某一端或同时从两端删除多余的空白，并返回这段文字的一个副本。",e.Msg.TODAY="今天",e.Msg.UNDO="撤销",e.Msg.UNNAMED_KEY="未命名",e.Msg.VARIABLES_DEFAULT_NAME="项目",e.Msg.VARIABLES_GET_CREATE_SET="创建“设定%1”",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="返回此变量的值。",e.Msg.VARIABLES_SET="赋值 %1 为 %2",e.Msg.VARIABLES_SET_CREATE_GET="创建“获得%1”",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="设置此变量，以使它和输入值相等。",e.Msg.VARIABLE_ALREADY_EXISTS="名字叫“%1”的变量已经存在了。",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="名字叫“%1”的变量已经有了另一个类型：“%2”。",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="名为“%1”的变量已经作为参数存在于流程“%2”中。",e.Msg.WORKSPACE_ARIA_LABEL="Blockly工作区",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="说点什么...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg}()}(zhHans$1);var zhHansExports=zhHans$1.exports;const zhHans=getDefaultExportFromCjs(zhHansExports),ZHS=_mergeNamespaces({__proto__:null,default:zhHans},[zhHansExports]),en={bodyHeight:"stand height",footHeight:"raise height",bodyTemperature:"body temperature",motorTemperature:"motor temperature",emergencyStop:"STOP",speedLevel:"running speed",low:"low",middle:"middle",high:"high",otherControl:"other controls",lamp:"light",volume:"volume",uwbText:"side follow",moreFunction:"more function",avoidance:"avoidance",specialFunction:"special function",frontSomersault:"front somersault",spanMode:"span mode",handstand:"handstand",prompt:"note",specialFunctionModalText1:"please enter the key of special function",specialFunctionModalText2:"please contact Unitree for the key",cancel:"cancel",sure:"confirm",sure_execute_btn:"Confirm execution",execute:"execute",motionStateTitle:"Sport mode adjustment",action:"action",mode:"mode",autoRecovery:"Auto Recovery",toastMsg_1:"Photo timeout",toastMsg_2:"in emergency stop, cancel it!",toastMsg_3:"please don't leave this page during recording",toastMsg_4:"switch to robot's view",toastMsg_5:"switch to holistic view",toastMsg_6:"open avoidance successful",toastMsg_7:"close avoidance successful",toastMsg_8:"wrong password",toastMsg_9:"Please click standing first to exit the damping state",toastMsg_10:"The robot dog is locked, please unlock it first",toastMsg_11:"Executing other instructions",toastMsg_12:"No feedback on the execution of action instructions",toastMsg_13:"The last video recording is being processed, please wait!",toastMsg_14:"Please connect the device first",toastMsg_15:"Instruction ",toastMsg_16:"execution failure",toastMsg_17:"In motion, please execute later",toastMsg_18:"The battery is too low, please charge in time",toastMsg_19:"Cannot perform a turnover in the current state.",toastMsg_20:"Operation failed",toastMsg_21:"This function needs requires space , please ensure  no people or objects within a 2-meter radius around the robotic dog . Otherwise, Unitree Technology will not be responsible for any resulting losses or consequences.",toastMsg_22:"This jump function is dangerous action, please make sure no people or objects in the semicircle with a diameter of 2 meters in front of  robot. Unitree Technology will not be responsible for any resulting losses or consequences",toastMsg_23:"Crossing mode is a dangerous function. After activated on App, it will only take effect when double click B button and push joystick by the handle remote control   (if the joystick is not pushed within 5 seconds, it will automatically exit to prevent accidents). When using it, make sure no people in the semicircle with a diameter of 2 meters in front of  robot. Unitree Technology will not be responsible for any resulting losses or consequences",toastMsg_24:"Please confirm whether to squat",toastMsg_25:"Please confirm whether to stand up",toastMsg_26:"Please confirm whether to stand up",toastMsg_27:"Please confirm whether to enter damping",toastMsg_28:"Please confirm whether to sit down",toastMsg_29:"Please confirm that you are currently in the damping state",toastMsg_30:"There is no handshake action at the moment",active_turnOver:"roll over",active_stretch:"stretch",active_shakeHands:"Handshake",active_happy:"cheer",active_showHeart:"show heart",active_pounceForward:"pounce",active_jumpForward:"jump",active_sitDown:"sit down",active_lieDown:"lying down",active_newYear:"greet",active_rollOver:"roll around",active_dance1:"dance1",active_dance2:"dance2",active_wave:"Wave",active_turnWave:"Turn and wave",active_step:"Step",active_stand:"Stand",active_squat:"Squat",active_freeWalk:"free walk",active_squatUp:"Squat-Up",active_lieUp:"Lie Up",active_shakeHands_1:"Handshake (stretch)",active_shakeHands_2:"Handshake (return)",active_highFive:"High Five",active_hug:"Hug",active_hightWave:"High Wave",active_lowWave:"Face Wave",active_clamp:"Clap",active_blowKiss:"Left Kiss",active_makeHeartBothHands:"Arm heart",active_makeHeartSingleHands:"Right Heart",active_ultramanRay:"X-Ray",active_bothHandsUp:"Hands Up",active_singleHandsUp:"Right Hand Up",active_refuse:"Reject",active_releaseArm:"Release Arm",model_damping:"Damping",model_stand:"stand up",model_walkStair:"classic mode",model_locking:"lock on",model_unlock:"unlock",model_pose:"pose",model_keepMoving:"keep walking",model_run:"run",model_run_g1:"Run",model_keepRunning:"keep running",model_climbingStairs:"climb stairs",model_monthStart:"moon walk",model_sideStep:"one side",model_crossStep:"cross step",model_runSideBySide:"bound",model_batteryLife:"battery life",model_all_terrain:"all terrain",model_special:"special",model_zeroTorque:"Zero Torque",model_preparation:"Preparation",model_seating:"Seating",model_debug:"Debug",model_walk:"Walk",model_walk2:"Walk(Control waist)",robot_errors_val_100_1:"Control Command Timeout",robot_errors_val_100_2:"Motor overcurrent",robot_errors_val_100_16:"Battery communication error",robot_errors_val_100_32:"Joint Starting Anomaly",robot_errors_val_100_64:"MCU communication error",robot_errors_val_100_128:"Motor communication error",robot_errors_val_200_1:"Left rear fan stalled",robot_errors_val_200_2:"Right rear fan stalled",robot_errors_val_200_4:"Front fan stalled",robot_errors_val_3xx_1:"Overcurrent",robot_errors_val_3xx_2:"Phase Leakage",robot_errors_val_3xx_4:"MOS Over Temperature",robot_errors_val_3xx_8:"Bus undervoltage",robot_errors_val_3xx_16:"Winding overheating",robot_errors_val_3xx_32:"Encoder Communication Error",robot_errors_val_3xx_64:"Encoder abnormal",robot_errors_val_3xx_256:"Motor communication interruption",robot_errors_val_3xx_4096:"Command Anomaly",robot_errors_val_3xx_65536:"Status Anomaly",robot_errors_val_3xx_16777216:"Motor humidity Anomaly",robot_errors_val_3xx_33554432:"Encoder Remote",robot_errors_val_3xx_67108864:"MOS Almost Overheat",robot_errors_val_3xx_134217728:"Encoder Close",robot_errors_val_3xx_268435456:"Winding Almost Overheat",robot_errors_val_3xx_w_2:"Overvoltage",robot_errors_val_3xx_w_4:"Driver overheating",robot_errors_val_3xx_w_32:"Encoder abnormal",robot_errors_val_3xx_w_64:"Calibration Data Abnormality",robot_errors_val_3xx_w_128:"Abnormal Reset",robot_errors_val_3xx_w_16777216:"Motor timeout protection",robot_errors_val_400_1:"Motor rotate speed abnormal",robot_errors_val_400_2:"PointCloud data abnormal",robot_errors_val_400_4:"Serial port data abnormal.",robot_errors_val_500_1:"UWB serial port open abnormal",robot_errors_val_500_2:"robot dog information retrieval  abnormal",rightFrontLeg:"RF",leftFrontLeg:"LF",rightRearLeg:"RR",leftRearLeg:"LR",rightFrontWheel:"RF wheel",leftFrontWheel:"LF wheel",rightRearWheel:"RR wheel",leftRearWheel:"LR wheel",bodyJoint:"body motor",thighJoint:"thigh motor",calfJoint:"calf motor",fault:"fault",warn:"warn",videoEnd:"Recording completed",robot_view:"Enter robot programming mode",simulator_view:"Enter simulation programming mode",robot_view_msg1:"The machine is not connected and cannot enter the robot programming mode.",program_msg_1:"Executing instructions, please wait.",photo_over:"Photography completed",program_msg_2:"The last recording has not ended",start_video:"Start recording",program_msg_3:"The video source is empty and cannot be recorded",video_fail:"Recording failed",videoFront:"Front",videoBack:"Back",Blockly:{programming:"Programming",soldier_menu_1:"Motion",soldier_menu_2:"Action",soldier_menu_3:"Mode",soldier_menu_4:"Media",soldier_menu_5:"Light",soldier_menu_6:"Control",soldier_menu_7:"Functions",move_cmd:"Move %1 %2 meters",move_cmd2:"Move %2 meters in a %1 degree direction",rotate_cmd:"Rotate %1 degrees",rotate_cmd2:"Rotate %1 %2 revolutions",step_cmd:"Step in place for %1 seconds",go:"go",move:"move",forward:"forward",back:"back",left:"left",right:"right",meter:"meter",to:"to",degree:"degree",rotate:"rotate",lap:"lap",step_in_place_for:"step in place for",seconds:"seconds",roll:"Roll",pitch:"Pitch",yaw:"Yaw",bodyHeight:"BodyHeight",maintain:"Maintain",pose_cmd:"Static Pose %1%2s",pose_cmd1:"Roll %1° | Pitch %2°",pose_cmd2:"Yaw %1° | Body Height%2m",pose_dynamic_cmd:"Dynamic Pose %1%2s",pose_dynamic_cmd1:"Roll %1° | %2",pose_dynamic_cmd2:"Pitch %1° | %2",pose_dynamic_cmd3:"Yaw %1° | %2",pose_dynamic_cmd4:"Body Height %1m | %2",pose_dynamic_linear:"linear",pose_dynamic_ease:"ease",pose_dynamic_easein:"ease-in",pose_dynamic_easeout:"ease-out",pose_dynamic_step:"step",stretch:"Stretch",shakeHands:"ShakeHands",showHeart:"ShowHeart",jumpForward:"JumpForward",wallow:"Wallow",frontPounce:"FrontPounce",newYear:"Greet",dance1:"Dance1",dance2:"Dance2",runMode:"RunMode",walkMode:"WalkMode",resume_standing:"Resume standing",damping:"Damping",lock_joints:"Stand tall and lock joints",lock_down:"Squat and lock joints",sit_down:"Sit down",sit_recover:"Recover from sitting",photo:"Take photo",video:"Record video",headlight_color:"Headlight color",turn_on_headlight_illumination:"Turn on headlight illumination",restore_default_headlight:"Restore default headlight",waiting:"Waiting %1 seconds",defFunction:"Defining function",function:"Function",startProgram:"Start",SimulatorPlay:"Simulator",RobotPlay:"Robot",exec:"Exec",singleStep:"Step",stop:"Pause",finish:"Stop",save:"Save",msg_1:"Program execution error, please check your program",modal_1:"Please enter function name",tip_1:"Only uppercase and lowercase letters, numbers, and underscores",tip_2:"This name is already defined"},Slam:{noMap:"No Map",goToAddMap:"Add Map",createMapTitle:"Create Map",mapNamePlaceholder:"Please enter a map name",mapNameRepeat:"The map name is already in use",timeout:"Request Timeout",chargeBtnText_1:"Mark Charging Point",chargeBtnText_2:"Clear Charging Point",chargeBtnText_3:"Mark Patrol Point",modifyMapName:"Modify Map Name",initialization:"Initialization",createBtn:"Create Now",menu_1:"Maps",menu_2:"Patrol",menu_3:"Single",menu_4:"Recharge",btn_1:"Start Patrol",btn_2:"Start Recharging",btn_3:"Start Navigation",next:"Next step",text_show_1:"realtime location",text_show_2:"patrol time",text_show_3:"task progress",task_1:"Pause",task_2:"Photo",task_3:"Video",roadNetWork:"road netWork",editRoadNetWork:"edit",addRoadNetWork:"add",add:"add",edit:"edit",del:"delete",yaw:"Yaw",msg_1:"Whether to edit the road network?",msg_2:"Confirm to delete this map?",msg_3:"Confirm to load this map?",msg_4:"Are you sure to clear the road network? This operation is irreversible!",msg_5:"The map is saved successfully and enters road network editing.",msg_6:"Whether to save the road network?",msg_7:"Initialize positioning first",msg_8:"Click on the map to mark the target point",msg_9:"Click the target point again to set the point task",msg_10:"Click and drag to set lines between points",msg_11:"Long press to delete points",msg_12:"Click Next to edit the road network",msg_13:"Please set machine positioning",msg_14:"Initial positioning completed",msg_15:"Positioning has been initialized",msg_16:"No road network has been created for this map",msg_17:"Please select target point",msg_18:"There are no patrolable points in the road network!",msg_19:"Number of patrol missions",msg_20:"Charging point location not marked",msg_21:"Patrol mission ends",msg_22:"Map name not set",msg_23:"Executable Tasks",msg_24:"Name cannot exceed 10 characters",msg_25:'Cannot contain special characters \\/:*?<>"丨',msg_26:"Cannot be empty",msg_27:"Cannot be less than 0",msg_28:"This map has not added charging stations",msg_29:"Please add patrol point information on the map",msg_30:"Cannot contain emoticons",msg_31:"It is currently charging. Do you want to confirm the execution?",msg_32:"Relocation failed",msg_33:"Failed to enable relocation node",msg_34:"There are obstacles nearby, please be careful",msg_35:"Radar anomaly",msg_36:"Please connect the path between points",msg_37:"Executing stand command",msg_38:"Do you want to go and recharge your batteries?",msg_39:"Please reselect the target point",msg_40:"Initialization failed",msg_41:"Synchronization completed",msg_42:"Navigation task interrupted",help_tip_1:"Please mark the location and direction of the machine on the map: long press the pointer and drag the pointer to mark the direction",help_tip_2:"App navigation is not industry-level. To ensure a good experience, please build a map within a 50*50 meter space."}},zh={bodyHeight:"机身高度",footHeight:"抬腿高度",bodyTemperature:"机身温度",motorTemperature:"电机温度",emergencyStop:"急停",speedLevel:"移动速度",low:"低",middle:"中",high:"高",otherControl:"其他控制",lamp:"灯光",volume:"音量",uwbText:"伴随",moreFunction:"更多功能",avoidance:"避障",specialFunction:"特种功能",frontSomersault:"前空翻",handstand:"倒立",spanMode:"跨越模式",prompt:"提示",specialFunctionModalText1:"请输入特种功能密钥",specialFunctionModalText2:"密钥请咨询宇树获取",cancel:"取消",sure:"确定",sure_execute_btn:"确定执行",execute:"执行",enter:"进入",quit:"退出",motionStateTitle:"运动状态调节",action:"动作",mode:"模式",toastMsg_1:"拍照超时",toastMsg_2:"当前处于急停状态，请解除急停状态！",toastMsg_3:"录制过程请勿离开此页面",toastMsg_4:"切换到机器视角",toastMsg_5:"切换到全局视角",toastMsg_6:"避障开启成功",toastMsg_7:"避障关闭成功",toastMsg_8:"密码错误",toastMsg_9:"请先点击站立，退出阻尼状态",toastMsg_10:"已锁定，请先解锁",toastMsg_11:"正在执行其他指令",toastMsg_12:"未得到动作指令执行回馈",toastMsg_13:"上一段视频录制正在处理中，请稍后！",toastMsg_14:"请先连接设备",toastMsg_15:"指令",toastMsg_16:"执行失败",toastMsg_17:"正在处于运动中，请稍后执行",toastMsg_18:"电量过低，请及时充电",toastMsg_19:"当前状态不可执行翻身",toastMsg_20:"操作失败",toastMsg_21:"恢复站立功能需要翻身空间，机器狗周围直径2m圆圈内请勿有人或物品，避免不必要的人员伤亡和财产损失，否则宇树科技不承担所引发的一切损失及后果！",toastMsg_22:"前跳功能为危险动作，请开启前务必确保机器狗前方直径2米的半圆内没有任何障碍物（尤其不能有人），若因为非规范操作造成人员伤亡或财产损失，宇树科技不承担所引发的一切损失及后果！",toastMsg_23:"跨越模式是危险功能，App开启后需要遥控器双击B并推杆才会真正起效（若5s没有推杆会自动退出，防止发生危险），注意使用时前方直径2米的半圆内不能有人，若因为非规范使用造成人员伤亡或财产损失，宇树科技不承担所引发的一切损失及后果！",toastMsg_24:"请确认是否下蹲",toastMsg_25:"请确认是否蹲起",toastMsg_26:"请确认是否躺起",toastMsg_27:"请确认进入阻尼",toastMsg_28:"请确认是否落座",toastMsg_29:"请确认当前处于阻尼状态",toastMsg_30:"当前没有握手动作",active_turnOver:"翻身",active_stretch:"伸懒腰",active_shakeHands:"握手",active_happy:"开心",active_showHeart:"比心",active_pounceForward:"扑人",active_jumpForward:"前跳",active_sitDown:"坐下",active_lieDown:"卧倒",active_newYear:"拜年",active_rollOver:"打滚",active_dance1:"舞蹈1",active_dance2:"舞蹈2",active_wave:"挥手",active_turnWave:"转身挥手",active_step:"踏步",active_stand:"站立",active_squat:"下蹲",active_squatUp:"蹲起",active_freeWalk:"灵动",active_lieUp:"躺起",active_shakeHands_1:"握手(伸)",active_shakeHands_2:"握手(回)",active_highFive:"击掌",active_hug:"拥抱",active_hightWave:"高举挥手",active_lowWave:"胸前挥手",active_clamp:"鼓掌",active_blowKiss:"左手飞吻",active_makeHeartBothHands:"双手比心",active_makeHeartSingleHands:"右手比心",active_ultramanRay:"光波",active_bothHandsUp:"双手平举",active_singleHandsUp:"右手平举",active_refuse:"双手打X",active_releaseArm:"释放动作",model_damping:"阻尼",model_stand:"站立",model_walkStair:"经典",model_locking:"锁定",model_unlock:"解锁",model_pose:"摆姿势",model_keepMoving:"持续走路",model_run:"跑步",model_run_g1:"走跑",model_keepRunning:"持续跑步",model_climbingStairs:"爬楼梯",model_monthStart:"月球步",model_sideStep:"侧边步",model_crossStep:"交叉步",model_runSideBySide:"并腿跑",model_batteryLife:"续航",model_all_terrain:"全地形",model_special:"特殊模式",model_zeroTorque:"零力矩",model_preparation:"预备",model_seating:"落座",model_debug:"调试",model_walk:"走路",model_walk2:"走路(控腰)",autoRecovery:"自动翻身",robot_errors_val_100_1:"运控命令超时",robot_errors_val_100_2:"电机过流",robot_errors_val_100_16:"电池通信异常",robot_errors_val_100_32:"启动关节异常",robot_errors_val_100_64:"MCU通信异常",robot_errors_val_100_128:"电机通信异常",robot_errors_val_200_1:"左后方风扇堵转",robot_errors_val_200_2:"右后方风扇堵转",robot_errors_val_200_4:"前置风扇堵转",robot_errors_val_3xx_1:"过流",robot_errors_val_3xx_2:"相漏电",robot_errors_val_3xx_4:"MOS过温",robot_errors_val_3xx_8:"母线欠压",robot_errors_val_3xx_16:"绕组过热",robot_errors_val_3xx_32:"编码器通讯错误",robot_errors_val_3xx_64:"编码器异常",robot_errors_val_3xx_256:"电机通信中断",robot_errors_val_3xx_4096:"命令异常",robot_errors_val_3xx_65536:"状态异常",robot_errors_val_3xx_16777216:"电机湿度异常",robot_errors_val_3xx_33554432:"编码器偏远",robot_errors_val_3xx_67108864:"MOS即将过温",robot_errors_val_3xx_134217728:"编码器偏近",robot_errors_val_3xx_268435456:"绕组即将过温",robot_errors_val_3xx_w_2:"过压",robot_errors_val_3xx_w_4:"驱动过热",robot_errors_val_3xx_w_32:"编码器异常",robot_errors_val_3xx_w_64:"校准数据异常",robot_errors_val_3xx_w_128:"异常复位",robot_errors_val_3xx_w_16777216:"电机超时保护",robot_errors_val_400_1:"电机转速异常",robot_errors_val_400_2:"点云数据异常",robot_errors_val_400_4:"串口数据异常",robot_errors_val_500_1:"UWB串口打开异常",robot_errors_val_500_2:"机器人状态信息获取异常",rightFrontLeg:"RF",leftFrontLeg:"LF",rightRearLeg:"RR",leftRearLeg:"LR",rightFrontWheel:"RF wheel",leftFrontWheel:"LF wheel",rightRearWheel:"RR wheel",leftRearWheel:"LR wheel",bodyJoint:"机身电机",thighJoint:"大腿电机",calfJoint:"小腿电机",fault:"故障",warn:"警告",videoEnd:"录制完成",robot_view:"进入真机编程模式",simulator_view:"进入仿真编程模式",robot_view_msg1:"未连接机器，不能进入真机编程模式",program_msg_1:"正在执行指令，请稍等",photo_over:"拍照完成",program_msg_2:"上一次录制未结束",start_video:"开始录制",program_msg_3:"视频源为空，无法录制",video_fail:"录制失败",videoFront:"前",videoBack:"后",Blockly:{programming:"编程",soldier_menu_1:"运动控制",soldier_menu_2:"动作执行",soldier_menu_3:"模式设置",soldier_menu_4:"多媒体",soldier_menu_5:"灯效",soldier_menu_6:"控制语句",soldier_menu_7:"函数体",go:"往",move:"移动",forward:"前",back:"后",left:"左",right:"右",meter:"米",move_cmd:"往 %1 移动 %2 米",move_cmd2:"向 %1 移动 %2 米",rotate_cmd:"旋转 %1 度",rotate_cmd2:"往 %1 转 %2 圈",step_cmd:"原地踏步 %1 秒",to:"向",degree:"度",rotate:"旋转",lap:"圈",step_in_place_for:"原地踏步",seconds:"秒",roll:"翻滚",pitch:"俯仰",yaw:"偏航",bodyHeight:"机身高度",maintain:"维持",pose_cmd:"静态姿势%1%2秒",pose_cmd1:"翻滚%1° | 俯仰%2°",pose_cmd2:"偏航%1° | 机身高度%2m",pose_dynamic_cmd:"动态姿势%1%2秒",pose_dynamic_cmd1:"翻滚 %1° | %2",pose_dynamic_cmd2:"俯仰 %1° | %2",pose_dynamic_cmd3:"偏航 %1° | %2",pose_dynamic_cmd4:"机身高度 %1m | %2",pose_dynamic_linear:"线性",pose_dynamic_ease:"渐入渐出",pose_dynamic_easein:"渐入",pose_dynamic_easeout:"渐出",pose_dynamic_step:"阶跃",stretch:"伸懒腰",shakeHands:"握手",showHeart:"比心",jumpForward:"前跳",frontPounce:"前扑",wallow:"打滚",newYear:"拜年",dance1:"舞蹈1",dance2:"舞蹈2",runMode:"跑步模式",walkMode:"行走模式",resume_standing:"恢复站立",damping:"阻尼",lock_joints:"站高并锁定",lock_down:"蹲下并锁定",sit_down:"坐下",sit_recover:"坐姿站起",photo:"拍照",video:"录像",headlight_color:"头灯颜色",turn_on_headlight_illumination:"开启头灯照明",restore_default_headlight:"恢复默认头灯",waiting:"等待 %1 秒",defFunction:"定义函数",function:"函数",startProgram:"开始",SimulatorPlay:"仿真执行",RobotPlay:"真机执行",exec:"执行",singleStep:"单步",stop:"暂停",finish:"结束",save:"保存",msg_1:"程序执行出错，请检查您的程序",modal_1:"请输入函数名称",tip_1:"只能包含大小写字母、数字、下划线",tip_2:"此名称已被定义"},Slam:{noMap:"暂无地图",goToAddMap:"去添加",createMapTitle:"地图创建",mapNamePlaceholder:"请输入地图名称",mapNameRepeat:"该地图名称已使用",timeout:"请求超时",chargeBtnText_1:"标记充电桩",chargeBtnText_2:"清除充电桩",chargeBtnText_3:"标记巡逻点",modifyMapName:"修改地图名称",createBtn:"立即创建",initialization:"初始化",menu_1:"地图管理",menu_2:"巡逻任务",menu_3:"单点导航",menu_4:"回充",btn_1:"开始巡逻",btn_2:"开始回充",btn_3:"开始导航",next:"下一步",text_show_1:"实时位置",text_show_2:"巡逻时间",text_show_3:"任务进度",task_1:"停顿",task_2:"拍照",task_3:"录像",roadNetWork:"路网",editRoadNetWork:"编辑路网",addRoadNetWork:"添加路网",add:"添加",edit:"编辑",del:"删除",yaw:"偏航角",msg_1:"是否编辑路网？",msg_2:"确认删除该地图？",msg_3:"确认加载该地图？",msg_4:"是否确认清除路网，此操作不可恢复！",msg_5:"地图保存成功，进入路网编辑",msg_6:"是否保存路网？",msg_7:"先进行初始化定位",msg_8:"点击地图标记目标点",msg_9:"再次点击目标点可以设置点任务",msg_10:"点击并拖动可以设置点之间的线",msg_11:"长按可删除点",msg_12:"点击下一步，进行路网编辑",msg_13:"请设置机器定位",msg_14:"初始化定位完成",msg_15:"已经初始化定位",msg_16:"此地图还未创建路网",msg_17:"请选择目标点",msg_18:"路网中没有可巡逻的点！",msg_19:"巡逻任务次数",msg_20:"未标记充电点位置",msg_21:"巡逻任务结束",msg_22:"未设置地图名称",msg_23:"可执行任务",msg_24:"名称不可超过10个字符",msg_25:'不可包含特殊字符 \\/:*?<>"丨',msg_26:"不能为空",msg_27:"不能小于0",msg_28:"此地图未添加充电点",msg_29:"请在地图上添加巡逻点信息",msg_30:"不能包含表情字符",msg_31:"目前正在充电，是否确认执行？",msg_32:"重定位失败",msg_33:"开启重定位节点失败",msg_34:"附近有障碍物，请注意",msg_35:"雷达异常",msg_36:"请连接点与点之间的路径",msg_37:"正在执行指令",msg_38:"是否要前去充点电进行充电？",msg_39:"请重新选择目标点",msg_40:"初始化失败",msg_41:"同步完成",msg_42:"导航任务中断",help_tip_1:"请在地图上标记机器的位置和方向：长按标记点并拖动指针标记方向",help_tip_2:"App导航非行业级，为保证良好体验，请在50*50米的空间内建图"}},CustomZh=zh.Blockly,CustomEn=en.Blockly,setBlocklyLocale=e=>{if("zh"===e)coreBrowserExports.setLocale(ZHS),coreBrowserExports.setLocale(CustomZh);else coreBrowserExports.setLocale(En),coreBrowserExports.setLocale(CustomEn)},messages={en:en,zh:zh},i18n=createI18n({locale:"en",fallbackLocale:"en",messages:messages});function t(e){return i18n.global.t(e)}setBlocklyLocale("en");const setBlocklyLang=setBlocklyLocale,useMainStore=exports("ac",defineStore("main",{state:()=>({webRtc:void 0,sn:"",userid:"",reqUrl:"",language:"en",specialPwd:"",windowWidth:0,windowHeight:0,webIsInView:void 0,programData:{}}),actions:{updateWindowInfo(e,t){this.windowWidth=e,this.windowHeight=t},updateUrl(e){this.reqUrl=e},updateSN(e){this.sn=e},updateUserId(e){this.userid=e},updateSpecialPwd(e){this.specialPwd=e},updateLanguage(e){this.language=e,i18n.global.locale=e,setBlocklyLang(e)},updateWebRTC(e){this.webRtc=e},updateWebInView(e){this.webIsInView=e},updateProgramData(e){this.programData=e}}}));var SPORT_STATE=(e=>(e.Damp="damping",e.BalanceStand="balanceStand",e.Sit="sit",e.LieDown="lieDown",e.Pose="pose",e.JointLock="jointLock",e.Locomotion="locomotion",e.RecoveryStand="recoveryStand",e.FrontJump="frontJump",e.FrontFlip="frontFlip",e.FrontPounce="frontPounce",e.Dance="dance",e.Idle="idle",e.Reserve="reserve",e.Walk="walk",e.ContinuousWalk="continuousWalk",e.Run="run",e.WalkStair="walkStair",e.ContinuousRun="continuousRun",e.Stair="stair",e.StandOut="standOut",e.AllTerrain="allTerrain",e.Special="special",e.FreeWalk="freeWalk",e.ZeroTorque="zeroTorque",e.Seating="seating",e.Preparation="preparation",e.Walk_G1="walk_g1",e.Walk2_G1="walk2_g1",e.Run_G1="run_g1",e.Step_G1="step",e.Stand_G1="stand",e.Squat_G1="squat",e.SquatUp_G1="squatUp",e.LieUp_G1="lieUp",e))(SPORT_STATE||{}),SPORT_GAIT=(e=>(e.Idle="idle",e.Walk="walk",e.Run="run",e.Stair="stair",e.ForwardDownStair="forwardDownStair",e.Adjust="adjust",e))(SPORT_GAIT||{}),DataChannelType=(e=>(e.VALIDATION="validation",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.MSG="msg",e.REQUEST="req",e.RESPONSE="res",e.VID="vid",e.AUD="aud",e.ERR="err",e.HEARTBEAT="heartbeat",e.RTC_INNER_REQ="rtc_inner_req",e.RTC_REPORT="rtc_report",e.ADD_ERROR="add_error",e.RM_ERROR="rm_error",e.ERRORS="errors",e))(DataChannelType||{});const useDeviceStore=exports("u",defineStore("device",{state:()=>({mode:"",topLeft:0,sn:"",networkStatus:"Undefined",series:"G1",sportMode:"ai",deviceInfo:{},imuState:{},motorState:{},bmsState:{},errors:[],emergencyStopState:!1,currSportModel:SPORT_STATE.Idle,lastActiveCmd:[],sportCmdLoading:!1,multipleState:{},sportState:{time:0,mode:0,g1_task_id:4,gaitType:0,dance:0,continuousGait:0,bodyHeight:0,footRaiseHeight:0,speedLevel:0,errorCode:0,g1ArmStateData:{}},sportSpeed:0,robotOdom:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:0}}}),actions:{updateInfo(e){if("G1"==this.series||"H1"==this.series&&"-2"==this.mode){const t=this.deviceInfo;this.deviceInfo=_objectSpread(_objectSpread({},e),{},{bms_state:t.bms_state||{},main_board_state:t.main_board_state||{}})}else this.deviceInfo=e,this.updateIMUState(e.imu_state||{}),this.updateMotorState(e.motor_state||{}),this.updateBmsState(e.bms_state||{})},updateSN(e){this.sn=e},updateTopLeft(e){this.topLeft=Number(e)},updateSportSpeed(e){this.sportSpeed=e},updateSeries(e){this.series=e},updateSportMode(e){this.sportMode=e},updateSportState(e){this.sportState=_objectSpread(_objectSpread({time:performance.now()},e),{},{g1ArmStateData:this.sportState.g1ArmStateData||{}})},updateRobotOdom(e){this.robotOdom=e},updateSportModel(e){this.currSportModel=e},updateMultipleState(e){this.multipleState=e},updateLastActiveCmd(e){this.lastActiveCmd=e},updateSportCmdLoading(e){this.sportCmdLoading=e},updateMode(e){this.mode=e},updateNetworkStats(e){this.networkStatus=e},updateIMUState(e){this.imuState=e},updateMotorState(e){this.motorState=e},updateBmsState(e){this.bmsState=e},updateG1BmsState(e){this.deviceInfo.bms_state=e,this.updateBmsState(e)},updateG1MainBoardState(e){this.deviceInfo.main_board_state=e},updateErrors(e){if(e.type===DataChannelType.ERRORS)this.errors=e.data;else if(e.type===DataChannelType.ADD_ERROR){const t=`${e.data[1]}${e.data[2]}`;!this.errors.some((e=>{const n=`${e[1]}${e[2]}`;return t===n}))&&this.errors.push(e.data)}else if(e.type===DataChannelType.RM_ERROR){const t=`${e.data[1]}${e.data[2]}`;this.errors=this.errors.filter((e=>{const n=`${e[1]}${e[2]}`;return t!==n}))}},updateEmergencyStopState(e){this.emergencyStopState=e},updateG1ArmState(e){this.sportState.g1ArmStateData=JSON.parse(e),this.sportState.time=performance.now()}}})),NativeToJSEvents={appSendSn(){console.log("appSendMsg")},appSendReqUrl(){console.log("appSendReqUrl")},appSendRoute(){console.log("appSendRoute")},appSendWebviewState(e){console.log(`浏览器${"0"===e?"消息在":"进入到"}用户视野`)},appSendStatusBarShow(){console.log("appSendStatusBarShow")},appReqDeviceState(){console.log("appSendMsg")},appReqRTCSessionDescription(){console.log("appReqRTCSessionDescription")},appReqRTCSessionDescriptionInit(){console.log("appReqRTCSessionDescriptionInit")},appReqDeviceInfo:()=>useDeviceStore().deviceInfo,appReqCpu(){console.log("appReqCpu")},appReqBms(){console.log("appReqBms");return useDeviceStore().bmsState},appReqIMU(){console.log("appReqIMU");return useDeviceStore().imuState},appReqMotor(){console.log("appReqMotor");return useDeviceStore().motorState},appReqDisk(){console.log("appReqDisk")},appReqMem(){console.log("appReqMem")},appReqRadar(){console.log("appReqRadar")},appSendOpenUwbSubscribe(){console.log("appSendOpenUwbSubscribe")},appSendCmdToGo2(){console.log("appSendCmdToGo2")},appSendTurnServerInfo(){console.log("appSendTurnServerInfo")},appSendBreakRTC(){console.log("appSendBreakRTC")},appSendNetwork(){console.log("appSendNetwork")},appUpdateNetwork(){console.log("appUpdateNetwork")},appSendTopicSubscribe(){console.log("appSendTopicSubscribe")},appSendRocker(){console.log("appSendRocker")},appSendJoystick(){console.log("appSendJoystick")},appAndroidSendVideoOK(){console.log("appAndroidSendVideoOK")},appSendReportResult(){console.log("appSendReportResult")},appSendCmdToGo2WithoutCb(){console.log("appSendCmdToGo2WithoutCb")},appReqHeart:()=>1},NativeToJSEvents$1=new Map(Object.entries(NativeToJSEvents));class APPCommunication{constructor(){_defineProperty(this,"initOverCallback",(()=>{})),console.log("开始监听与注册事件"),this.init().then((()=>{this.initOverCallback&&this.initOverCallback()}))}init(){return new Promise((e=>{this.registerEvents(),this.defSendEvents(),window.setTimeout(e,0)}))}plugin(){return{install:e=>{e.config.globalProperties.$appCommunication=this}}}registerEvents(){const{runAppToWebEvtCbs:e}=this;for(const t of NativeToJSEvents$1.keys()){APPCommunication.appToWebEvents.set(t,[]);const n=n=>{const i=isJsonString(n)?JSON.parse(n):n,o=NativeToJSEvents$1.get(t)(i);return o?JSON.stringify(o):e(t,i)};isIos()?ZHBridge.Core.registerJsHandler(t,n):isAndroid$1()&&(window[t]=n)}}static onAppToWebEvt(e,t){var n;null===(n=APPCommunication.appToWebEvents.get(e))||void 0===n||n.push(t)}static removeAppToWebEvt(e,t){const n=APPCommunication.appToWebEvents.get(e);if(n&&n.length>0){const e=n.indexOf(t);e>=0&&n.splice(e,1)}}runAppToWebEvtCbs(e,t){const n=APPCommunication.appToWebEvents.get(e),i=(null==n?void 0:n.map((e=>e(t))))||[];return i.length>1?i:null==i?void 0:i[i.length-1]}defSendEvents(){for(const e of JSToNativeEvents$1.keys())APPCommunication.webToAppEvents.set(e,((t,n)=>{JSToNativeEvents$1.get(e)(t);try{if(isIos())ZHBridge.Core.callNativeHandler(e,[t],(function(e){if(n){const t=e.flat(1/0);n(Array.isArray(t)?t[0]:t)}}));else if(isAndroid$1()&&null!=window.android&&void 0!==window.android){const i=window.android[e](t);n&&n(i)}}catch(i){console.log(i)}}))}onInitOver(e){this.initOverCallback=e}}function listenAppToWeb(e,t){APPCommunication.onAppToWebEvt(e,t)}function removeAppToWebLister(e,t){APPCommunication.removeAppToWebEvt(e,t)}function webToApp(e,t,n){return new Promise((i=>{var o;null===(o=APPCommunication.webToAppEvents.get(e))||void 0===o||o(JSON.stringify(t),n),i()})).catch((e=>console.log("报错",e)))}function isJsonString(e){try{if("object"==typeof JSON.parse(e))return!0}catch(t){}return!1}
/*!
        * vue-router v4.2.2
        * (c) 2023 Eduardo San Martin Morote
        * @license MIT
        */_defineProperty(APPCommunication,"webToAppEvents",new Map),_defineProperty(APPCommunication,"appToWebEvents",new Map);const isBrowser="undefined"!=typeof window;function isESModule(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const assign=Object.assign;function applyToParams(e,t){const n={};for(const i in t){const o=t[i];n[i]=isArray(o)?o.map(e):e(o)}return n}const noop$2=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let i,o={},r="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(i=t.slice(0,l),r=t.slice(l+1,s>-1?s:t.length),o=e(r)),s>-1&&(i=i||t.slice(0,s),a=t.slice(s,t.length)),i=resolveRelativePath(null!=i?i:t,n),{fullPath:i+(r&&"?")+r+a,path:i,query:o,hash:a}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function isSameRouteLocation(e,t,n){const i=t.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&isSameRouteRecord(t.matched[i],n.matched[o])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),o=i[i.length-1];".."!==o&&"."!==o||i.push("");let r,a,s=n.length-1;for(r=0;r<i.length;r++)if(a=i[r],"."!==a){if(".."!==a)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var NavigationType,NavigationType2,NavigationDirection,NavigationDirection2;function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),removeTrailingSlash(e)}NavigationType2=NavigationType||(NavigationType={}),NavigationType2.pop="pop",NavigationType2.push="push",NavigationDirection2=NavigationDirection||(NavigationDirection={}),NavigationDirection2.back="back",NavigationDirection2.forward="forward",NavigationDirection2.unknown="";const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const n=e.el,i="string"==typeof n&&n.startsWith("#"),o="string"==typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=getElementPosition(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:n,search:i,hash:o}=t,r=e.indexOf("#");if(r>-1){let t=o.includes(e.slice(r))?e.slice(r).length:1,n=o.slice(t);return"/"!==n[0]&&(n="/"+n),stripBase(n,"")}return stripBase(n,e)+i+o}function useHistoryListeners(e,t,n,i){let o=[],r=[],a=null;const s=({state:r})=>{const s=createCurrentLocation(e,location),l=n.value,c=t.value;let u=0;if(r){if(n.value=s,t.value=r,a&&a===l)return void(a=null);u=c?r.position-c.position:0}else i(s);o.forEach((e=>{e(n.value,l,{delta:u,type:NavigationType.pop,direction:u?u>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(assign({},e.state,{scroll:computeScrollPosition()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:function(){a=n.value},listen:function(e){o.push(e);const t=()=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)};return r.push(t),t},destroy:function(){for(const e of r)e();r=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}}}function buildState(e,t,n,i=!1,o=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:n}=window,i={value:createCurrentLocation(e,n)},o={value:t.state};function r(i,r,a){const s=e.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+i:createBaseLocation()+e+i;try{t[a?"replaceState":"pushState"](r,"",l),o.value=r}catch(err){console.error(err),n[a?"replace":"assign"](l)}}return o.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:i,state:o,push:function(e,n){const a=assign({},o.value,t.state,{forward:e,scroll:computeScrollPosition()});r(a.current,a,!0),r(e,assign({},buildState(i.value,e,null),{position:a.position+1},n),!1),i.value=e},replace:function(e,n){r(e,assign({},t.state,buildState(o.value.back,e,o.value.forward,!0),n,{position:o.value.position}),!0),i.value=e}}}function createWebHistory(e){const t=useHistoryStateNavigation(e=normalizeBase(e)),n=useHistoryListeners(e,t.state,t.location,t.replace);const i=assign({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:createHref.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function createWebHashHistory(e){return(e=location.host?e||location.pathname+location.search:"").includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return"string"==typeof e||e&&"object"==typeof e}function isRouteName(e){return"string"==typeof e||"symbol"==typeof e}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType,NavigationFailureType2;function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(null==t||!!(e.type&t))}NavigationFailureType2=NavigationFailureType||(NavigationFailureType={}),NavigationFailureType2[NavigationFailureType2.aborted=4]="aborted",NavigationFailureType2[NavigationFailureType2.cancelled=8]="cancelled",NavigationFailureType2[NavigationFailureType2.duplicated=16]="duplicated";const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign({},BASE_PATH_PARSER_OPTIONS,t),i=[];let o=n.start?"^":"";const r=[];for(const s of e){const e=s.length?[]:[90];n.strict&&!s.length&&(o+="/");for(let t=0;t<s.length;t++){const i=s[t];let a=40+(n.sensitive?.25:0);if(0===i.type)t||(o+="/"),o+=i.value.replace(REGEX_CHARS_RE,"\\$&"),a+=40;else if(1===i.type){const{value:e,repeatable:n,optional:l,regexp:c}=i;r.push({name:e,repeatable:n,optional:l});const u=c||BASE_PARAM_PATTERN;if(u!==BASE_PARAM_PATTERN){a+=10;try{new RegExp(`(${u})`)}catch(err){throw new Error(`Invalid custom RegExp for param "${e}" (${u}): `+err.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;t||(d=l&&s.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),o+=d,a+=20,l&&(a+=-8),n&&(a+=-20),".*"===u&&(a+=-50)}e.push(a)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const a=new RegExp(o,n.sensitive?"":"i");return{re:a,score:i,keys:r,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",o=r[i-1];n[o.name]=e&&o.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",i=!1;for(const o of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of o)if(0===e.type)n+=e.value;else if(1===e.type){const{value:r,repeatable:a,optional:s}=e,l=r in t?t[r]:"";if(isArray(l)&&!a)throw new Error(`Provided param "${r}" is an array but it is not repeatable (* or + modifiers)`);const c=isArray(l)?l.join("/"):l;if(!c){if(!s)throw new Error(`Missing required param "${r}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function comparePathParserScore(e,t){let n=0;const i=e.score,o=t.score;for(;n<i.length&&n<o.length;){const e=compareScoreArray(i[n],o[n]);if(e)return e;n++}if(1===Math.abs(o.length-i.length)){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(o))return-1}return o.length-i.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if("/"===e)return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,i=n;const o=[];let r;function a(){r&&o.push(r),r=[]}let s,l=0,c="",u="";function d(){c&&(0===n?r.push({type:0,value:c}):1===n||2===n||3===n?(r.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),c="")}function h(){c+=s}for(;l<e.length;)if(s=e[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(c&&d(),a()):":"===s?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:"("===s?n=2:VALID_PARAM_RE.test(s)?h():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==u[u.length-1]?u=u.slice(0,-1)+s:n=3:u+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,u="";break;default:t("Unknown state")}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),a(),o}function createRouteRecordMatcher(e,t,n){const i=tokensToParser(tokenizePath(e.path),n),o=assign(i,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function createRouterMatcher(e,t){const n=[],i=new Map;function o(e,n,i){const s=!i,l=normalizeRouteRecord(e);l.aliasOf=i&&i.record;const c=mergeOptions(t,e),u=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(assign({},l,{components:i?i.record.components:l.components,path:e,aliasOf:i?i.record:l}))}let d,h;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&i+u)}if(d=createRouteRecordMatcher(t,n,c),i?i.alias.push(d):(h=h||d,h!==d&&h.alias.push(d),s&&e.name&&!isAliasRecord(d)&&r(e.name)),l.children){const e=l.children;for(let t=0;t<e.length;t++)o(e[t],d,i&&i.children[t])}i=i||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&a(d)}return h?()=>{r(h)}:noop$2}function r(e){if(isRouteName(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(r),t.alias.forEach(r))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(r),e.alias.forEach(r))}}function a(e){let t=0;for(;t<n.length&&comparePathParserScore(e,n[t])>=0&&(e.record.path!==n[t].record.path||!isRecordChildOf(e,n[t]));)t++;n.splice(t,0,e),e.record.name&&!isAliasRecord(e)&&i.set(e.record.name,e)}return t=mergeOptions({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:function(e,t){let o,r,a,s={};if("name"in e&&e.name){if(o=i.get(e.name),!o)throw createRouterError(1,{location:e});a=o.record.name,s=assign(paramsFromLocation(t.params,o.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&paramsFromLocation(e.params,o.keys.map((e=>e.name)))),r=o.stringify(s)}else if("path"in e)r=e.path,o=n.find((e=>e.re.test(r))),o&&(s=o.parse(r),a=o.record.name);else{if(o=t.name?i.get(t.name):n.find((e=>e.re.test(t.path))),!o)throw createRouterError(1,{location:e,currentLocation:t});a=o.record.name,s=assign({},t.params,e.params),r=o.stringify(s)}const l=[];let c=o;for(;c;)l.unshift(c.record),c=c.parent;return{name:a,path:r,params:s,matched:l,meta:mergeMetaFields(l)}},removeRoute:r,getRoutes:function(){return n},getRecordMatcher:function(e){return i.get(e)}}}function paramsFromLocation(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="boolean"==typeof n?n:n[i];return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce(((e,t)=>assign(e,t.meta)),{})}function mergeOptions(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function isRecordChildOf(e,t){return t.children.some((t=>t===e||isRecordChildOf(e,t)))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return null==e?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode$1(e){try{return decodeURIComponent(""+e)}catch(err){}return""+e}function parseQuery(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const e=n[i].replace(PLUS_RE," "),o=e.indexOf("="),r=decode$1(o<0?e:e.slice(0,o)),a=o<0?null:decode$1(e.slice(o+1));if(r in t){let e=t[r];isArray(e)||(e=t[r]=[e]),e.push(a)}else t[r]=a}return t}function stringifyQuery(e){let t="";for(let n in e){const i=e[n];if(n=encodeQueryKey(n),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}(isArray(i)?i.map((e=>e&&encodeQueryValue(e))):[i&&encodeQueryValue(i)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function normalizeQuery(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=isArray(i)?i.map((e=>null==e?null:""+e)):null==i?i:""+i)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function guardToPromiseFn(e,t,n,i,o){const r=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise(((a,s)=>{const l=e=>{!1===e?s(createRouterError(4,{from:n,to:t})):e instanceof Error?s(e):isRouteLocation(e)?s(createRouterError(2,{from:t,to:e})):(r&&i.enterCallbacks[o]===r&&"function"==typeof e&&r.push(e),a())},c=e.call(i&&i.instances[o],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch((e=>s(e)))}))}function extractComponentsGuards(e,t,n,i){const o=[];for(const r of e)for(const e in r.components){let a=r.components[e];if("beforeRouteEnter"===t||r.instances[e])if(isRouteComponent(a)){const s=(a.__vccOpts||a)[t];s&&o.push(guardToPromiseFn(s,n,i,r,e))}else{let s=a();o.push((()=>s.then((o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${r.path}"`));const a=isESModule(o)?o.default:o;r.components[e]=a;const s=(a.__vccOpts||a)[t];return s&&guardToPromiseFn(s,n,i,r,e)()}))))}}return o}function isRouteComponent(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),i=computed((()=>t.resolve(unref(e.to)))),o=computed((()=>{const{matched:e}=i.value,{length:t}=e,o=e[t-1],r=n.matched;if(!o||!r.length)return-1;const a=r.findIndex(isSameRouteRecord.bind(null,o));if(a>-1)return a;const s=getOriginalPath(e[t-2]);return t>1&&getOriginalPath(o)===s&&r[r.length-1].path!==s?r.findIndex(isSameRouteRecord.bind(null,e[t-2])):a})),r=computed((()=>o.value>-1&&includesParams(n.params,i.value.params))),a=computed((()=>o.value>-1&&o.value===n.matched.length-1&&isSameRouteLocationParams(n.params,i.value.params)));return{route:i,href:computed((()=>i.value.href)),isActive:r,isExactActive:a,navigate:function(n={}){return guardEvent(n)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$2):Promise.resolve()}}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:i}=inject(routerKey),o=computed((()=>({[getLinkClass(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:h("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const i=t[n],o=e[n];if("string"==typeof i){if(i!==o)return!1}else if(!isArray(o)||o.length!==i.length||i.some(((e,t)=>e!==o[t])))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>null!=e?e:null!=t?t:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=inject(routerViewLocationKey),o=computed((()=>e.route||i.value)),r=inject(viewDepthKey,0),a=computed((()=>{let e=unref(r);const{matched:t}=o.value;let n;for(;(n=t[e])&&!n.components;)e++;return e})),s=computed((()=>o.value.matched[a.value]));provide(viewDepthKey,computed((()=>a.value+1))),provide(matchedRouteKey,s),provide(routerViewLocationKey,o);const l=ref();return watch((()=>[l.value,s.value,e.name]),(([e,t,n],[i,o,r])=>{t&&(t.instances[n]=e,o&&o!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=o.leaveGuards),t.updateGuards.size||(t.updateGuards=o.updateGuards))),!e||!t||o&&isSameRouteRecord(t,o)&&i||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=o.value,r=e.name,a=s.value,c=a&&a.components[r];if(!c)return normalizeSlot(n.default,{Component:c,route:i});const u=a.props[r],d=u?!0===u?i.params:"function"==typeof u?u(i):u:null,p=h(c,assign({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[r]=null)},ref:l}));return normalizeSlot(n.default,{Component:p,route:i})||p}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,i=e.stringifyQuery||stringifyQuery,o=e.history,r=useCallbacks(),a=useCallbacks(),s=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=applyToParams.bind(null,(e=>""+e)),d=applyToParams.bind(null,encodeParam),h=applyToParams.bind(null,decode$1);function p(e,r){if(r=assign({},r||l.value),"string"==typeof e){const i=parseURL(n,e,r.path),a=t.resolve({path:i.path},r),s=o.createHref(i.fullPath);return assign(i,a,{params:h(a.params),hash:decode$1(i.hash),redirectedFrom:void 0,href:s})}let a;if("path"in e)a=assign({},e,{path:parseURL(n,e.path,r.path).path});else{const t=assign({},e.params);for(const e in t)null==t[e]&&delete t[e];a=assign({},e,{params:d(t)}),r.params=d(r.params)}const s=t.resolve(a,r),c=e.hash||"";s.params=u(h(s.params));const p=stringifyURL(i,assign({},e,{hash:encodeHash(c),path:s.path})),f=o.createHref(p);return assign({fullPath:p,hash:c,query:i===stringifyQuery?normalizeQuery(e.query):e.query||{}},s,{redirectedFrom:void 0,href:f})}function f(e){return"string"==typeof e?parseURL(n,e,l.value.path):assign({},e)}function g(e,t){if(c!==e)return createRouterError(8,{from:t,to:e})}function m(e){return v(e)}function _(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"==typeof n?n(e):n;return"string"==typeof i&&(i=i.includes("?")||i.includes("#")?i=f(i):{path:i},i.params={}),assign({query:e.query,hash:e.hash,params:"path"in i?{}:e.params},i)}}function v(e,t){const n=c=p(e),o=l.value,r=e.state,a=e.force,s=!0===e.replace,u=_(n);if(u)return v(assign(f(u),{state:"object"==typeof u?assign({},r,u.state):r,force:a,replace:s}),t||n);const d=n;let h;return d.redirectedFrom=t,!a&&isSameRouteLocation(i,o,n)&&(h=createRouterError(16,{to:d,from:o}),I(o,o,!0,!1)),(h?Promise.resolve(h):A(d,o)).catch((e=>isNavigationFailure(e)?isNavigationFailure(e,2)?e:R(e):M(e,d,o))).then((e=>{if(e){if(isNavigationFailure(e,2))return v(assign({replace:s},f(e.to),{state:"object"==typeof e.to?assign({},r,e.to.state):r,force:a}),t||d)}else e=E(d,o,!0,s,r);return y(d,o,e),e}))}function b(e,t){const n=g(e,t);return n?Promise.reject(n):Promise.resolve()}function T(e){const t=L.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function A(e,t){let n;const[i,o,s]=extractChangingRecords(e,t);n=extractComponentsGuards(i.reverse(),"beforeRouteLeave",e,t);for(const r of i)r.leaveGuards.forEach((i=>{n.push(guardToPromiseFn(i,e,t))}));const l=b.bind(null,e,t);return n.push(l),P(n).then((()=>{n=[];for(const i of r.list())n.push(guardToPromiseFn(i,e,t));return n.push(l),P(n)})).then((()=>{n=extractComponentsGuards(o,"beforeRouteUpdate",e,t);for(const i of o)i.updateGuards.forEach((i=>{n.push(guardToPromiseFn(i,e,t))}));return n.push(l),P(n)})).then((()=>{n=[];for(const i of e.matched)if(i.beforeEnter&&!t.matched.includes(i))if(isArray(i.beforeEnter))for(const o of i.beforeEnter)n.push(guardToPromiseFn(o,e,t));else n.push(guardToPromiseFn(i.beforeEnter,e,t));return n.push(l),P(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=extractComponentsGuards(s,"beforeRouteEnter",e,t),n.push(l),P(n)))).then((()=>{n=[];for(const i of a.list())n.push(guardToPromiseFn(i,e,t));return n.push(l),P(n)})).catch((e=>isNavigationFailure(e,8)?e:Promise.reject(e)))}function y(e,t,n){for(const i of s.list())T((()=>i(e,t,n)))}function E(e,t,n,i,r){const a=g(e,t);if(a)return a;const s=t===START_LOCATION_NORMALIZED,c=isBrowser?history.state:{};n&&(i||s?o.replace(e.fullPath,assign({scroll:s&&c&&c.scroll},r)):o.push(e.fullPath,r)),l.value=e,I(e,t,n,s),R()}let S;let C,w=useCallbacks(),x=useCallbacks();function M(e,t,n){R(e);const i=x.list();return i.length?i.forEach((i=>i(e,t,n))):console.error(e),Promise.reject(e)}function R(e){return C||(C=!e,S||(S=o.listen(((e,t,n)=>{if(!O.listening)return;const i=p(e),r=_(i);if(r)return void v(assign(r,{replace:!0}),i).catch(noop$2);c=i;const a=l.value;isBrowser&&saveScrollPosition(getScrollKey(a.fullPath,n.delta),computeScrollPosition()),A(i,a).catch((e=>isNavigationFailure(e,12)?e:isNavigationFailure(e,2)?(v(e.to,i).then((e=>{isNavigationFailure(e,20)&&!n.delta&&n.type===NavigationType.pop&&o.go(-1,!1)})).catch(noop$2),Promise.reject()):(n.delta&&o.go(-n.delta,!1),M(e,i,a)))).then((e=>{(e=e||E(i,a,!1))&&(n.delta&&!isNavigationFailure(e,8)?o.go(-n.delta,!1):n.type===NavigationType.pop&&isNavigationFailure(e,20)&&o.go(-1,!1)),y(i,a,e)})).catch(noop$2)}))),w.list().forEach((([t,n])=>e?n(e):t())),w.reset()),e}function I(t,n,i,o){const{scrollBehavior:r}=e;if(!isBrowser||!r)return Promise.resolve();const a=!i&&getSavedScrollPosition(getScrollKey(t.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return nextTick().then((()=>r(t,n,a))).then((e=>e&&scrollToPosition(e))).catch((e=>M(e,t,n)))}const D=e=>o.go(e);let k;const L=new Set,O={currentRoute:l,listening:!0,addRoute:function(e,n){let i,o;return isRouteName(e)?(i=t.getRecordMatcher(e),o=n):o=e,t.addRoute(o,i)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:p,options:e,push:m,replace:function(e){return m(assign(f(e),{replace:!0}))},go:D,back:()=>D(-1),forward:()=>D(1),beforeEach:r.add,beforeResolve:a.add,afterEach:s.add,onError:x.add,isReady:function(){return C&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise(((e,t)=>{w.add([e,t])}))},install(e){e.component("RouterLink",RouterLink),e.component("RouterView",RouterView),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!k&&l.value===START_LOCATION_NORMALIZED&&(k=!0,m(o.location).catch((e=>{})));const t={};for(const i in START_LOCATION_NORMALIZED)t[i]=computed((()=>l.value[i]));e.provide(routerKey,this),e.provide(routeLocationKey,reactive(t)),e.provide(routerViewLocationKey,l);const n=e.unmount;L.add(e),e.unmount=function(){L.delete(e),L.size<1&&(c=START_LOCATION_NORMALIZED,S&&S(),S=null,l.value=START_LOCATION_NORMALIZED,k=!1,C=!1),n()}}};function P(e){return e.reduce(((e,t)=>e.then((()=>T(t)))),Promise.resolve())}return O}function extractChangingRecords(e,t){const n=[],i=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const r=t.matched[a];r&&(e.matched.find((e=>isSameRouteRecord(e,r)))?i.push(r):n.push(r));const s=e.matched[a];s&&(t.matched.find((e=>isSameRouteRecord(e,s)))||o.push(s))}return[n,i,o]}function useRouter(){return inject(routerKey)}function useRoute(){return inject(routeLocationKey)}const _sfc_main$O={name:"Toast",props:{title:{type:String,default:"我是toast"}},setup:()=>({})},_export_sfc=exports("i",((e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n})),_hoisted_1$K={class:"toast-wrap"},_hoisted_2$E={class:"toast"};function _sfc_render$2(e,t,n,i,o,r){return openBlock(),createElementBlock("div",_hoisted_1$K,[createBaseVNode("div",_hoisted_2$E,toDisplayString$1(n.title),1)])}const Toast=_export_sfc(_sfc_main$O,[["render",_sfc_render$2],["__scopeId","data-v-0d16d3e3"]]),div$1=document.createElement("div");div$1.setAttribute("class","toast-wrapper"),document.body.appendChild(div$1);let timer=null;const ToastMsg=exports("ae",(e=>{let t,n;"string"==typeof e?(t=e||"我是默认文案",n=3e3):(t=e.title||"我是默认文案",n=e.duration||1500);const i=createVNode(Toast,{title:t});render(null,div$1),render(i,div$1),timer&&window.clearTimeout(timer),timer=window.setTimeout((()=>{render(null,div$1)}),n)}));var RTC_TOPIC=exports("R",(e=>(e.LOW_STATE="rt/lf/lowstate",e.MULTIPLE_STATE="rt/multiplestate",e.FRONT_PHOTO_REQ="rt/api/front_videohub/request",e.BACK_PHOTO_REQ="rt/api/back_videohub/request",e.G1_FRONT_PHOTO_REQ="rt/api/videohub/request",e.FRONT_VIDEO_HUB="rt/front_videohub/videostream",e.BACK_VIDEO_HUB="rt/back_videohub/videostream",e.NORMAL_FRONT_VIDEO_HUB="rt/frontvideostream",e.ULIDAR="rt/utlidar/voxel_map",e.ULIDAR_ARRAY="rt/utlidar/voxel_map_compressed",e.ULIDAR_STATE="rt/utlidar/lidar_state",e.ROBOTODOM="rt/utlidar/robot_pose",e.UWB_REQ="rt/api/uwbswitch/request",e.UWB_STATE="rt/uwbstate",e.LOW_CMD="rt/lowcmd",e.WIRELESS_CONTROLLER="rt/wirelesscontroller",e.SPORT_MOD="rt/api/sport/request",e.CONFIG="rt/api/config/request",e.G1_ARM_SPORT_MOD="rt/api/arm/request",e.SPORT_MOD_STATE="rt/sportmodestate",e.LF_SPORT_MOD_STATE="rt/lf/sportmodestate",e.BASH_REQ="rt/api/bashrunner/request",e.SELF_TEST="rt/selftest",e.GRID_MAP="rt/mapping/grid_map",e.SERVICE_STATE="rt/servicestate",e.GPT_FEEDBACK="rt/gptflowfeedback",e.VUI="rt/api/vui/request",e.OBSTACLES_AVOID="rt/api/obstacles_avoid/request",e.SLAM_QT_COMMAND="rt/qt_command",e.SLAM_ADD_NODE="rt/qt_add_node",e.SLAM_ADD_EDGE="rt/qt_add_edge",e.SLAM_QUERY_ALL_NODE="rt/query_result_node",e.SLAM_QUERY_ALL_EDGE="rt/query_result_edge",e.SLAM_QT_NOTICE="rt/qt_notice",e.SLAM_PC_TO_IMAGE_LOCAL="rt/pctoimage_local",e.SLAM_BUILD_MAP_ODOMETRY="rt/lio_sam_ros2/mapping/odometry",e.SLAM_RELOCATION_ODOMETRY="rt/lio_sam_ros2/mapping/re_location_odometry",e.G1_DEX3_LEFT_STATE="rt/lf/dex3/left/state",e.G1_DEX3_RIGHT_STATE="rt/lf/dex3/right/state",e.MAIN_BOARD_STATE="rt/lf/mainboardstate",e.BMS_STATE="rt/lf/bmsstate",e.DOUBLE_IMU="rt/lf/lowstate_doubleimu",e.SECONDARY_IMU_LF="rt/lf/secondary_imu",e.SECONDARY_IMU="rt/secondary_imu",e.LOG_SYSTEM_OUTBOUND="rt/log_system_outbound",e.G1_ARM_ACTION_STATE="rt/arm/action/state",e.SLAM_OPERATE_REQUEST="rt/api/slam_operate/request",e.SLAM_MAPPING_POINTS="rt/unitree/slam_mapping/points",e.SLAM_MAPPING_ODOM="rt/unitree/slam_mapping/odom",e.SLAM_RELOCATION_POINTS="rt/unitree/slam_relocation/points",e.SLAM_RELOCATION_ODOM="rt/unitree/slam_relocation/odom",e.SLAM_INFO="rt/slam_info",e.SLAM_KEY_INFO="rt/slam_key_info",e.GPT_REQUEST="rt/api/gpt/request",e))(RTC_TOPIC||{}));class WebRTC{constructor(e){_defineProperty(this,"pc",void 0),_defineProperty(this,"config",void 0),_defineProperty(this,"videoDomIdMap",void 0),_defineProperty(this,"videoDom",void 0),_defineProperty(this,"dataChannelLabel",void 0),_defineProperty(this,"channel",void 0),_defineProperty(this,"VidTrackEventMap",void 0),_defineProperty(this,"AudTrackEvent",void 0),_defineProperty(this,"onMsgListerFns",void 0),_defineProperty(this,"onConnectionStateListerFns",void 0),_defineProperty(this,"onConnectedListerFns",void 0),_defineProperty(this,"onChannelOpenFns",void 0),_defineProperty(this,"onCloseListerFns",void 0),_defineProperty(this,"timeoutTimer",void 0),_defineProperty(this,"heartbeatTimer",void 0),_defineProperty(this,"heartbeatResponse",void 0),_defineProperty(this,"localDescriptionCache",void 0),_defineProperty(this,"msgCallbacks",new Map),_defineProperty(this,"validationFns",[]),_defineProperty(this,"validationResult","FAIL"),_defineProperty(this,"currAudioStream",void 0),_defineProperty(this,"chunkDataTemp",void 0),this.config={},this.pc=null,this.channel=null,this.videoDomIdMap=new Map,this.dataChannelLabel=e,this.VidTrackEventMap=new Map,this.AudTrackEvent=null,this.onMsgListerFns=[],this.onChannelOpenFns=[],this.onConnectionStateListerFns=[],this.onConnectedListerFns=[],this.onCloseListerFns=[],this.timeoutTimer=0,this.heartbeatTimer=0,this.heartbeatResponse=0,this.localDescriptionCache=void 0,this.currAudioStream=new MediaStream,this.chunkDataTemp=new Map}init(e="B2",t,n){if(this.close(),t&&n){if(!n.user||!n.passwd||!n.realm)return Promise.reject(new Error("没有得到有效turnserver信息"));this.config={iceServers:[{urls:[n.realm],username:n.user,credential:n.passwd}],iceTransportPolicy:"all",sdpSemantics:"unified-plan"}}else if(t&&!n)return Promise.reject(new Error("没有得到有效turnserver信息"));return console.log("开始初始化RTC， "+(t?"有turnServer":"无turnServer")),this.pc=new RTCPeerConnection(t&&n?this.config:{sdpSemantics:"unified-plan"}),console.logGreen("===当前系列==",e),"B2"===e&&(this.pc.addTransceiver("video",{direction:"recvonly"}),this.pc.addTransceiver("video",{direction:"recvonly"})),this.pc.addTransceiver("video",{direction:"recvonly"}),this.pc.addTransceiver("audio",{direction:"sendrecv"}),this.pc.addEventListener("track",(t=>{console.log("track 信息 ===>",t),["G1","H1"].includes(e)?"video"===t.track.kind?this.VidTrackEventMap.set("unitreeFrontVideoStream",t):this.AudTrackEvent=t:"video"===t.track.kind?this.VidTrackEventMap.set(t.streams[0].id,t):this.AudTrackEvent=t})),void 0!==this.pc.onconnectionstatechange?this.pc.addEventListener("connectionstatechange",(()=>{var e;this.timeoutTimer&&window.clearTimeout(this.timeoutTimer);const t=null===(e=this.pc)||void 0===e?void 0:e.connectionState;console.logWithTime(`RTC连接状态：${t}`),this.onConnectionStateListerFns.forEach((e=>e&&e(t)))})):this.pc.addEventListener("iceconnectionstatechange",(e=>{var t;this.timeoutTimer&&window.clearTimeout(this.timeoutTimer);const n=null===(t=this.pc)||void 0===t?void 0:t.iceConnectionState;console.logWithTime(`RTC连接状态：${n}`),this.onConnectionStateListerFns.forEach((e=>e&&e(n)))})),this.channel=this.pc.createDataChannel(this.dataChannelLabel||"data"),this.channel.onopen=()=>{this.onChannelOpenFns.forEach((e=>e&&e("open"))),this.heartbeatResponse=performance.now(),this.startHeartbeat()},this.channel.onclose=()=>{this.onChannelOpenFns.forEach((e=>e&&e("closed"))),this.heartbeatTimer&&window.clearInterval(this.heartbeatTimer)},this.channel.onmessage=e=>{try{if(!e.data)return;const t="string"==typeof e.data?JSON.parse(e.data):this.dealArrayBuffer(e.data);this.runResolveForTopic(t),t.type===DataChannelType.HEARTBEAT?this.heartbeatResponse=performance.now():this.onMsgListerFns.forEach((e=>e&&e(t)))}catch(t){console.error("WebRTC 数据解析出错",t)}},this.initSDP()}dealArrayBuffer(e){const t=new Uint16Array(e.slice(0,2)),n=new Uint16Array(e.slice(2,4));return 2===t[0]&&0===n[0]?this.dealArrayBufferForLidar(e.slice(4)):this.dealArrayBufferForNormal(e)}dealArrayBufferForNormal(e){const t=new Uint16Array(e.slice(0,2)),n=e.slice(4,4+t[0]),i=e.slice(4+t[0]),o=new TextDecoder("utf-8"),r=JSON.parse(o.decode(n));return r.data.data=i,r}dealArrayBufferForLidar(e){const t=new Uint32Array(e.slice(0,4)),n=e.slice(8,8+t[0]),i=e.slice(8+t[0]),o=new TextDecoder("utf-8"),r=JSON.parse(o.decode(n));return r.data.data=i,r}onConnect(e){var t=this;return _asyncToGenerator((function*(){return t.connect(e).catch((e=>{throw console.error(e),e}))}))()}connect(e){return new Promise(((t,n)=>{if(!this.pc)return console.error("pc 为null"),void n("pc 为null");this.timeoutTimer=window.setTimeout((()=>{console.log("rtc连接超过5秒，触发失败"),n("RTC连接无法得到状态响应")}),5e3),console.log("开始连接RTC..."),this.pc.setRemoteDescription(e).catch((e=>n(e)))}))}initSDP(){var e=this;return new Promise(function(){var t=_asyncToGenerator((function*(t,n){if(!e.pc)return console.error("pc 为null"),void n("pc 为null");const i=e.pc;console.log("开始createOffer...");const o=yield i.createOffer();yield i.setLocalDescription(o);const r=window.setTimeout(n.bind(null,"生成本地SDP超时"),3e3);yield new Promise((function(e){if("complete"===i.iceGatheringState)e(null);else{let t=function(){"complete"===i.iceGatheringState&&(i.removeEventListener("icegatheringstatechange",t),e(null))};i.addEventListener("icegatheringstatechange",t)}})),window.clearTimeout(r);const a=i.localDescription;return e.localDescriptionCache={sdp:a.sdp,type:a.type},console.log("已经生成本地SDP完成......"),t(a),a}));return function(e,n){return t.apply(this,arguments)}}())}getConnectionState(){var e,t,n;return void 0!==(null===(e=this.pc)||void 0===e?void 0:e.onconnectionstatechange)?null===(t=this.pc)||void 0===t?void 0:t.connectionState:null===(n=this.pc)||void 0===n?void 0:n.iceConnectionState}getChannelState(){var e,t;return"open"===(null===(e=this.channel)||void 0===e?void 0:e.readyState)?"SUCCESS"===this.validationResult?"open":"closed":null===(t=this.channel)||void 0===t?void 0:t.readyState}playVideo(e="B2",t,n){const{VidTrackEventMap:i}=this,o=i.get("unitreeFrontVideoStream"),r=document.getElementById(t||"unitreeFrontVideoStream");if(r?(r.srcObject=(null==o?void 0:o.streams[0])||null,r.load(),console.log("前置视频 video挂载完成")):console.error("未找到前置视频流video Dom"),"B2"==e){const e=i.get("unitreeBackVideoStream"),t=document.getElementById(n||"unitreeBackVideoStream");t?(t.srcObject=(null==e?void 0:e.streams[0])||null,t.load(),console.log("后置视频 video挂载完成")):console.error("未找到后置视频流video Dom")}return this}getVideoTrackId(e){const t=this.VidTrackEventMap.get(e);return t?t.receiver.track.id:null}playAudio(e){if(!e)return;const t=document.getElementById(e);if(t){if(this.AudTrackEvent)return t.srcObject=this.AudTrackEvent.streams[0]||null,t.play(),console.log("audio挂载完成"),this;console.error("正在获取资源...")}else console.error("未找到多Audio媒体元素")}getVideoStream(e){const{VidTrackEventMap:t}=this,n=t.get(e);return n?n.streams[0]:(console.error("未获取到视频资源"),null)}subscribe(e){var t;"open"===(null===(t=this.channel)||void 0===t?void 0:t.readyState)?this.channel.send(JSON.stringify({type:DataChannelType.SUBSCRIBE,topic:e})):console.error("数据通道未打开")}unsubscribe(e){var t;"open"===(null===(t=this.channel)||void 0===t?void 0:t.readyState)?this.channel.send(JSON.stringify({type:DataChannelType.UNSUBSCRIBE,topic:e})):console.error("数据通道未打开")}startHeartbeat(){this.heartbeatTimer=window.setInterval((()=>{var e,t;const n=new Date;"open"===(null===(e=this.channel)||void 0===e?void 0:e.readyState)&&(null===(t=this.channel)||void 0===t||t.send(JSON.stringify({type:DataChannelType.HEARTBEAT,data:{timeInStr:formatDate(n),timeInNum:Math.floor(n.valueOf()/1e3)}})))}),2e3)}publish(e,t,n){return new Promise(((i,o)=>{var r,a;"open"===(null===(r=this.channel)||void 0===r?void 0:r.readyState)?(this.channel.send(JSON.stringify({type:n||DataChannelType.MSG,topic:e,data:t})),this.saveResolve(n||DataChannelType.MSG,e,i,t.uuid||(null==t||null===(a=t.header)||void 0===a||null===(a=a.identity)||void 0===a?void 0:a.id))):(console.error("数据通道未打开",e),o("数据通道未打开"))}))}publishWithoutCb(e,t,n){var i;"open"===(null===(i=this.channel)||void 0===i?void 0:i.readyState)?this.channel.send(JSON.stringify({type:n||DataChannelType.MSG,topic:e,data:t})):console.error("数据通道未打开")}publishReq(e,t){const n=this.UUID(),i={};return null!=t&&t.body?i.body=t.body:i.body="",null!=t&&t.uuid?i.uuid=t.uuid:i.uuid=n,this.publish(e,i,DataChannelType.REQUEST)}publishReqNew(e,t){const n=(new Date).valueOf()%2**31+Math.floor(1e3*Math.random());if(null==t||!t.api_id)return console.error("请携带app id"),Promise.reject("请携带app id");const i={header:{identity:{id:t.id||n,api_id:(null==t?void 0:t.api_id)||0}},parameter:""};return null!=t&&t.data&&(i.parameter="string"==typeof t.data?t.data:JSON.stringify(t.data)),null!=t&&t.priority&&(i.header.policy={priority:1}),this.publish(e,i,DataChannelType.REQUEST)}publishReqNewForSlam(e,t){const n=(new Date).valueOf()%2**31+Math.floor(1e3*Math.random());if(null==t||!t.api_id)return console.error("请携带app id"),Promise.reject("请携带app id");const i={header:{identity:{id:t.id||n,api_id:(null==t?void 0:t.api_id)||0}},parameter:""};return null!=t&&t.data&&(i.parameter="string"==typeof t.data?t.data:JSON.stringify({data:t.data})),null!=t&&t.priority&&(i.header.policy={priority:1}),this.publish(e,i,DataChannelType.REQUEST)}getRTCTransportSpeed(){var e;return null===(e=this.pc)||void 0===e?void 0:e.getStats()}UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}saveResolve(e,t,n,i){const o=this.dealMsgKey(e,t,i),r=this.msgCallbacks.get(o);r?r.push(n):this.msgCallbacks.set(o,[n])}runResolveForTopic(e){var t,n,i,o;if(null==e||!e.type)return;const r=this.dealMsgKey(e.type,e.topic||"",(null==e||null===(t=e.data)||void 0===t?void 0:t.uuid)||(null==e||null===(n=e.data)||void 0===n||null===(n=n.header)||void 0===n||null===(n=n.identity)||void 0===n?void 0:n.id)||(null==e||null===(i=e.info)||void 0===i?void 0:i.uuid));if(null!==(o=e.data)&&void 0!==o&&null!==(o=o.content_info)&&void 0!==o&&o.enable_chunking){const{chunk_index:t,total_chunk_num:n}=e.data.content_info;if(void 0===n||0===n)throw new Error("分段数据总段数为0");if(void 0===t)throw new Error("分段数据不存在当前段索引");const i=e.data.data;if(t<n){const e=this.chunkDataTemp.get(r);return void(e?e.push(i):this.chunkDataTemp.set(r,[i]))}{const t=this.chunkDataTemp.get(r);e.data.data=this.mergeArrayBuffers([...t||[],i]),this.chunkDataTemp.delete(r)}}const a=this.msgCallbacks.get(r);a&&(a.forEach((t=>t&&t(e))),this.msgCallbacks.delete(r))}dealMsgKey(e,t,n){return n||`${e} $ ${t}`}mergeArrayBuffers(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let i=0;for(const o of e){const e=new Uint8Array(o);n.set(e,i),i+=e.byteLength}return n.buffer}onConnectionStateChange(e){this.onConnectionStateListerFns.push(e)}removeConnectionStateListen(e){const{onConnectionStateListerFns:t}=this,n=t.indexOf(e);n>=0&&t.splice(n,1)}onConnectedOK(e){this.onConnectedListerFns.push(e)}onMessage(e){this.onMsgListerFns.push(e)}removeMessageListen(e){const{onMsgListerFns:t}=this,n=t.indexOf(e);n>=0&&t.splice(n,1)}onChannelOpen(e){this.onChannelOpenFns.push(e)}onValidationOK(e){this.validationFns.push(e)}removeValidationOKListen(e){const{validationFns:t}=this,n=t.indexOf(e);n>=0&&t.splice(n,1)}onClose(e){this.onCloseListerFns.push(e)}validationOK(){this.validationResult="SUCCESS",this.validationFns.forEach((e=>e&&e()))}getValidationState(){return this.validationResult}hasIceServer(){return!!this.config.iceServers}hasInstance(){return!!this.pc}close(){if(this.hasInstance()){var e,t;for(const e of this.VidTrackEventMap.keys()){var n;null===(n=this.VidTrackEventMap.get(e))||void 0===n||n.streams[0].getTracks().forEach((e=>{e.stop()}))}this.timeoutTimer&&window.clearTimeout(this.timeoutTimer),this.heartbeatTimer&&window.clearInterval(this.heartbeatTimer),null===(e=this.pc)||void 0===e||e.close(),this.pc=null,null===(t=this.channel)||void 0===t||t.close(),this.channel=null,this.config={},this.validationResult="FAIL",this.onCloseListerFns.forEach((e=>e&&e()))}}}var blockly={exports:{}},browser={exports:{}},blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed,hasRequiredBlocks;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(e,t){e.exports=function(e){var t=e.__namespace__,n=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),i={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!==this.type&&"variables_get_reporter_dynamic"!==this.type||(i={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:o(this)},a=this.getField("VAR").getText(),a={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",a),enabled:!0,callback:r(this)},e.unshift(i),e.unshift(a));else{if("variables_get_dynamic"===this.type)var n="variables_set_dynamic",i=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else n="variables_get_dynamic",i=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var a=this.getField("VAR");n={type:n,fields:{VAR:a.saveState(!0)}},e.push({enabled:0<this.workspace.remainingCapacity(),text:i.replace("%1",a.getText()),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.getVariable$$module$build$src$core$variables(this.workspace,e),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},o=function(e){return function(){const n=e.workspace,i=e.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(n,i)}},r=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",i),t.defineBlocks$$module$build$src$core$common(n);var a={blocks:n},s=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),l={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!==this.type&&"variables_get_reporter"!==this.type||(i={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:c(this)},o=this.getField("VAR").getText(),o={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",o),enabled:!0,callback:u(this)},e.unshift(i),e.unshift(o));else{if("variables_get"===this.type)var n="variables_set",i=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else n="variables_get",i=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var o=this.getField("VAR");n={type:n,fields:{VAR:o.saveState(!0)}},e.push({enabled:0<this.workspace.remainingCapacity(),text:i.replace("%1",o.getText()),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}}},c=function(e){return function(){const n=e.workspace,i=e.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(n,i)}},u=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",l),t.defineBlocks$$module$build$src$core$common(s);var d={blocks:s},h=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),p={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");var n=this.getInput("AT1")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",`${n}`),n=this.getInput("AT2")instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",`${n}`),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2===e&&t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const i=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});i.setValidator((function(t){const i="FROM_START"===t||"FROM_END"===t;if(i!==n){const n=this.getSourceBlock();return n.updateAt_(e,i),n.setFieldValue(t,"WHERE"+e),null}})),this.getInput("AT"+e).appendField(i,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};h.text_getSubstring=p,h.text_changeCase={init:function(){const e=[[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},h.text_trim={init:function(){const e=[[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},h.text_print={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var f={updateType_:function(e){this.outputConnection.setCheck("NUMBER"===e?"Number":"String")},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};h.text_prompt_ext=Object.assign({},f,{init:function(){var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator((e=>{this.updateType_(e)})),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER))}});var g=Object.assign({},f,{init:function(){this.mixin(m);var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator((e=>{this.updateType_(e)})),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER))}});h.text_prompt=g,h.text_count={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},h.text_replace={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},h.text_reverse={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var m={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(let t,n=0;t=this.inputList[n];n++)for(let i,o=0;i=t.fieldRow[o];o++)if(e===i.name)return t.insertFieldAt(o,this.newQuote_(!0)),void t.insertFieldAt(o+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,t.fromJson$$module$build$src$core$field_registry({type:"field_image",src:e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:e?"“":"”"})}},_=function(){this.mixin(m),this.quoteField_("TEXT")},v={itemCount_:0,mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",`${this.itemCount_}`),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("text_create_join_container");t.initSvg();let n=t.getInput("STACK").connection;for(let i=0;i<this.itemCount_;i++){const t=e.newBlock("text_create_join_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){const n=this.getInput("ADD"+t).connection.targetConnection;n&&-1===e.indexOf(n)&&n.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let n;null==(n=e[t])||n.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&n.appendField(t.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},b=function(){this.mixin(m),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};t.register$$module$build$src$core$extensions("text_append_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var T=function(){this.setTooltip((()=>t.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1")))},A={isAt_:!1,mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("at",`${this.isAt_}`),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},y=function(){this.getField("WHERE").setValidator((function(e){e="FROM_START"===e||"FROM_END"===e;const t=this.getSourceBlock();e!==t.isAt_&&t.updateAt_(e)})),this.updateAt_(!0),this.setTooltip((()=>{var e=this.getFieldValue("WHERE");let n=t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"===e||"FROM_END"===e)&&(e="FROM_START"===e?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(n+="  "+e.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),n}))};t.register$$module$build$src$core$extensions("text_indexOf_tooltip",T),t.register$$module$build$src$core$extensions("text_quotes",_),t.registerMixin$$module$build$src$core$extensions("quote_image_mixin",m),t.registerMutator$$module$build$src$core$extensions("text_join_mutator",v,b),t.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",A,y),t.defineBlocks$$module$build$src$core$common(h);var E={blocks:h},S={},C={setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e="";this.arguments_.length&&(e=t.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.disable$$module$build$src$core$events$utils();try{this.setFieldValue(e,"PARAMS")}finally{t.enable$$module$build$src$core$events$utils()}},mutationToDom:function(e){const n=t.createElement$$module$build$src$core$utils$xml("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(let i=0;i<this.argumentVarModels_.length;i++){const o=t.createElement$$module$build$src$core$utils$xml("arg"),r=this.argumentVarModels_[i];o.setAttribute("name",r.name),o.setAttribute("varid",r.getId()),e&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[i]),n.appendChild(o)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let i,o=0;i=e.childNodes[o];o++)if("arg"===i.nodeName.toLowerCase()){var n=i;const e=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(e),null!==(n=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,n,e,""))?this.argumentVarModels_.push(n):console.log(`Failed to create a variable named "${e}", ignoring.`)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const e=Object.create(null);if(this.argumentVarModels_.length){e.params=[];for(let t=0;t<this.argumentVarModels_.length;t++)e.params.push({name:this.argumentVarModels_[t].name,id:this.argumentVarModels_[t].getId()})}return this.hasStatements_||(e.hasStatements=!1),e},loadExtraState:function(e){if(this.arguments_=[],this.argumentVarModels_=[],e.params)for(let i=0;i<e.params.length;i++){var n=e.params[i];n=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,n.id,n.name,""),this.arguments_.push(n.name),this.argumentVarModels_.push(n)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(!1!==e.hasStatements)},decompose:function(e){const n=t.createElement$$module$build$src$core$utils$xml("block");n.setAttribute("type","procedures_mutatorcontainer");var i=t.createElement$$module$build$src$core$utils$xml("statement");i.setAttribute("name","STACK"),n.appendChild(i);for(let r=0;r<this.arguments_.length;r++){const e=t.createElement$$module$build$src$core$utils$xml("block");e.setAttribute("type","procedures_mutatorarg");var o=t.createElement$$module$build$src$core$utils$xml("field");o.setAttribute("name","NAME");const n=t.createTextNode$$module$build$src$core$utils$xml(this.arguments_[r]);o.appendChild(n),e.appendChild(o),o=t.createElement$$module$build$src$core$utils$xml("next"),e.appendChild(o),i.appendChild(e),i=o}return e=t.domToBlock$$module$build$src$core$xml(n,e),"procedures_defreturn"===this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.mutateCallers$$module$build$src$core$procedures(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let n=e.getInputTargetBlock("STACK");for(;n&&!n.isInsertionMarker();){var i=n.getFieldValue("NAME");this.arguments_.push(i),i=this.workspace.getVariable(i,""),this.argumentVarModels_.push(i),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}if(this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"===e,this.hasStatements_!==e))if(e){var o;this.setStatements_(!0),null==(o=this.statementConnection_)||o.reconnect(this,"STACK"),this.statementConnection_=null}else o=this.getInput("STACK").connection,(this.statementConnection_=o.targetConnection)&&((o=o.targetBlock()).unplug(),o.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var i=this.workspace.getVariableById(e);if(""===i.type){i=i.name,n=this.workspace.getVariableById(n);var o=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=n.name,this.argumentVarModels_[t]=n,o=!0);o&&(this.displayRenamedVar_(i,n.name),t.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(e){const n=e.name;let i,o=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e.getId()&&(i=this.arguments_[t],this.arguments_[t]=n,o=!0);o&&(this.displayRenamedVar_(i,n),t.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(e,n){this.updateParams_();var i=this.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(i&&i.bubbleIsVisible()){i=i.getWorkspace().getAllBlocks(!1);for(let o,r=0;o=i[r];r++)"procedures_mutatorarg"===o.type&&t.Names$$module$build$src$core$names.equals(e,o.getFieldValue("NAME"))&&o.setFieldValue(n,"NAME")}},customContextMenu:function(e){if(!this.isInFlyout){var n=this.getFieldValue("NAME"),i={type:this.callType_,extraState:{name:n,params:this.arguments_}};if(e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",n),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,i)}),!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++){const o={type:"variables_get",fields:{VAR:{name:(i=this.argumentVarModels_[n]).name,id:i.getId(),type:i.type}}};e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i.name),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,o)})}}}};S.procedures_defnoreturn=Object.assign({},C,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),S.procedures_defreturn=Object.assign({},C,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.Align$$module$build$src$core$inputs$input.RIGHT).appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var w={init:function(){this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};S.procedures_mutatorcontainer=w;var x={init:function(){const e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:t.DEFAULT_ARG$$module$build$src$core$procedures});e.setValidator(this.validator_),e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var t=this.getSourceBlock();const n=t.workspace.getRootWorkspace();if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;const i=(t.workspace.targetWorkspace||t.workspace).getAllBlocks(!1),o=e.toLowerCase();for(let r=0;r<i.length;r++){if(i[r].id===this.getSourceBlock().id)continue;const e=i[r].getFieldValue("NAME");if(e&&e.toLowerCase()===o)return null}return t.isInFlyout||((t=n.getVariable(e,""))&&t.name!==e&&n.renameVariableById(t.getId(),e),t||(t=n.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(t)),e},deleteIntermediateVars_:function(e){const t=this.getSourceBlock().workspace.getRootWorkspace();if(t)for(let n=0;n<this.createdVariables_.length;n++){const i=this.createdVariables_[n];i.name!==e&&t.deleteVariableById(i.getId())}}};S.procedures_mutatorarg=x;var M={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.Names$$module$build$src$core$names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var i=t.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((i=(i=i&&i.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&i.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),e.join("\n")===this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!==e.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let e=0;e<this.arguments_.length;e++){var o=this.getInput("ARG"+e);o&&(o=o.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=o,i&&o&&-1===n.indexOf(this.quarkIds_[e])&&(o.disconnect(),o.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],e=0;e<this.arguments_.length;e++)i=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[e],""),this.argumentVarModels_.push(i);if(this.updateShape_(),this.quarkIds_=n)for(n=0;n<this.arguments_.length;n++)if((e=this.quarkIds_[n])in this.quarkConnections_){let t;null!=(t=this.quarkConnections_[e])&&t.reconnect(this,"ARG"+n)||delete this.quarkConnections_[e]}}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.disable$$module$build$src$core$events$utils();try{n.setValue(this.arguments_[e])}finally{t.enable$$module$build$src$core$events$utils()}}else n=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[e]}),this.appendValueInput("ARG"+e).setAlign(t.Align$$module$build$src$core$inputs$input.RIGHT).appendField(n,"ARGNAME"+e).init()}for(e=this.arguments_.length;this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("name",this.getProcedureCall());for(let n=0;n<this.arguments_.length;n++){const i=t.createElement$$module$build$src$core$utils$xml("arg");i.setAttribute("name",this.arguments_[n]),e.appendChild(i)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];const n=[];for(let i,o=0;i=e.childNodes[o];o++)"arg"===i.nodeName.toLowerCase()&&(t.push(i.getAttribute("name")),n.push(i.getAttribute("paramId")));this.setProcedureParameters_(t,n)},saveExtraState:function(){const e=Object.create(null);return e.name=this.getProcedureCall(),this.arguments_.length&&(e.params=this.arguments_),e},loadExtraState:function(e){if(this.renameProcedure(this.getProcedureCall(),e.name),e=e.params){const t=[];t.length=e.length,t.fill(null),this.setProcedureParameters_(e,t)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type===t.CREATE$$module$build$src$core$events$utils&&-1!==e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=t.getDefinition$$module$build$src$core$procedures(n,this.workspace))||n.type===this.defType_&&JSON.stringify(n.getVars())===JSON.stringify(this.arguments_)||(n=null),!n){t.setGroup$$module$build$src$core$events$utils(e.group),e=t.createElement$$module$build$src$core$utils$xml("xml"),(n=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",this.defType_);var i=this.getRelativeToSurfaceXY(),o=i.y+2*t.config$$module$build$src$core$config.snapRadius;n.setAttribute("x",`${i.x+t.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),n.setAttribute("y",`${o}`),i=this.mutationToDom(),n.appendChild(i),(i=t.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),o=this.getProcedureCall();const r=t.findLegalName$$module$build$src$core$procedures(o,this);o!==r&&this.renameProcedure(o,r),i.appendChild(t.createTextNode$$module$build$src$core$utils$xml(o)),n.appendChild(i),e.appendChild(n),t.domToWorkspace$$module$build$src$core$xml(e,this.workspace),t.setGroup$$module$build$src$core$events$utils(!1)}}else e.type===t.DELETE$$module$build$src$core$events$utils?(n=this.getProcedureCall(),t.getDefinition$$module$build$src$core$procedures(n,this.workspace)||(t.setGroup$$module$build$src$core$events$utils(e.group),this.dispose(!0),t.setGroup$$module$build$src$core$events$utils(!1))):e.type===t.CHANGE$$module$build$src$core$events$utils&&"disabled"===e.element&&(n=this.getProcedureCall(),(n=t.getDefinition$$module$build$src$core$procedures(n,this.workspace))&&n.id===e.blockId&&((n=t.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),t.setGroup$$module$build$src$core$events$utils(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.setGroup$$module$build$src$core$events$utils(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n=this.getProcedureCall(),i=this.workspace;e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const e=t.getDefinition$$module$build$src$core$procedures(n,i);e&&(i.centerOnBlock(e.id),e.select())}})}}};S.procedures_callnoreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),S.procedures_callreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var R={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("value",String(Number(this.hasReturnValue_))),e},domToMutation:function(e){this.hasReturnValue_="1"===e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(!(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==t.MOVE$$module$build$src$core$events$utils)){var n=!1,i=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(i.type)){n=!0;break}i=i.getSurroundParent()}while(i);n?("procedures_defnoreturn"===i.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==i.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(i=t.getGroup$$module$build$src$core$events$utils(),t.setGroup$$module$build$src$core$events$utils(e.group),this.setEnabled(n),t.setGroup$$module$build$src$core$events$utils(i))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};S.procedures_ifreturn=R,t.defineBlocks$$module$build$src$core$common(S);var I={blocks:S},D=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),k={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};t.register$$module$build$src$core$extensions("math_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",k));var L={mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation"),n="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",String(n)),e},domToMutation:function(e){e="true"===e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){const t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},O=function(){this.getField("PROPERTY").setValidator((function(e){e="DIVISIBLE_BY"===e,this.getSourceBlock().updateShape_(e)}))};t.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",L,O),t.register$$module$build$src$core$extensions("math_change_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var P={updateType_:function(e){"MODE"===e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){if(null===(e=e.getAttribute("op")))throw new TypeError("xmlElement had no op attribute");this.updateType_(e)}},N=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))};t.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",P,N),t.defineBlocks$$module$build$src$core$common(D);var $={blocks:D},B=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),F={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};t.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",F));var U={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};t.register$$module$build$src$core$extensions("controls_flow_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",U));var G={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR"),i=n.getVariable().name;this.isCollapsed()||null===i||(n={type:"variables_get",fields:{VAR:n.saveState(!0)}},e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)}))}}};t.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",G),t.register$$module$build$src$core$extensions("controls_for_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.register$$module$build$src$core$extensions("controls_forEach_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var V=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),H={getSurroundLoop:function(){let e=this;do{if(V.has(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){var n=this.workspace;if(n.isDragging&&!n.isDragging()&&e.type===t.MOVE$$module$build$src$core$events$utils&&(n=!!this.getSurroundLoop(),this.setWarningText(n?null:t.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const i=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(e.group),this.setEnabled(n),t.setGroup$$module$build$src$core$events$utils(i)}}};t.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",H),t.defineBlocks$$module$build$src$core$common(B);var W={blocks:B,loopTypes:V},z=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),j={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};t.register$$module$build$src$core$extensions("logic_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",j));var X={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=t.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&e.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&e.setAttribute("else","1"),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=Object.create(null);return this.elseifCount_&&(e.elseIfCount=this.elseifCount_),this.elseCount_&&(e.hasElse=!0),e},loadExtraState:function(e){this.elseifCount_=e.elseIfCount||0,this.elseCount_=e.hasElse?1:0,this.updateShape_()},decompose:function(e){const t=e.newBlock("controls_if_if");t.initSvg();let n=t.nextConnection;for(let i=1;i<=this.elseifCount_;i++){const t=e.newBlock("controls_if_elseif");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const t=[null],n=[null];let i=null;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,i=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,i)},saveConnections:function(e){e=e.nextConnection.targetBlock();let t=1;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t);const i=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=i&&i.connection.targetConnection,t++;break;case"controls_if_else":n=this.getInput("ELSE"),e.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}},rebuildShape_:function(){const e=[null],t=[null];let n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(let i=1;this.getInput("IF"+i);i++){const n=this.getInput("IF"+i),o=this.getInput("DO"+i);e.push(n.connection.targetConnection),t.push(o.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);e++)this.removeInput("IF"+e),this.removeInput("DO"+e);for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,t,n){for(let i=1;i<=this.elseifCount_;i++){let n,o;null==(n=e[i])||n.reconnect(this,"IF"+i),null==(o=t[i])||o.reconnect(this,"DO"+i)}null==n||n.reconnect(this,"ELSE")}};t.registerMutator$$module$build$src$core$extensions("controls_if_mutator",X,null,["controls_if_elseif","controls_if_else"]);var Y=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1}.bind(this))};t.register$$module$build$src$core$extensions("controls_if_tooltip",Y);var q={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A");const i=this.getInputTargetBlock("B");n&&i&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,i.outputConnection)&&(t.setGroup$$module$build$src$core$events$utils(e.group),(e=this.prevBlocks_[0])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(n=this.prevBlocks_[1])!==i&&(i.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},K=function(){this.mixin(q)};t.register$$module$build$src$core$extensions("logic_compare",K);var Q={prevParentConnection_:null,onchange:function(e){const n=this.getInputTargetBlock("THEN"),i=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((n||i)&&o)for(let r=0;2>r;r++){const a=1===r?n:i;a&&!a.workspace.connectionChecker.doTypeChecks(a.outputConnection,o)&&(t.setGroup$$module$build$src$core$events$utils(e.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours()):(a.unplug(),a.bumpNeighbours()),t.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=o}};t.registerMixin$$module$build$src$core$extensions("logic_ternary",Q),t.defineBlocks$$module$build$src$core$common(z);var Z=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),J={init:function(){this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",String(this.itemCount_)),e},domToMutation:function(e){if(!(e=e.getAttribute("items")))throw new TypeError("element did not have items");this.itemCount_=parseInt(e,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("lists_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let i=0;i<this.itemCount_;i++){const t=e.newBlock("lists_create_with_item");if(t.initSvg(),!t.previousConnection)throw Error("itemBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){const n=this.getInput("ADD"+t).connection.targetConnection;n&&-1===e.indexOf(n)&&n.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let n;null==(n=e[t])||n.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);let i;e.valueConnection_=null==(i=n)?void 0:i.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&n.appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}};Z.lists_create_with=J;var ee={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};Z.lists_create_with_container=ee;var te={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};Z.lists_create_with_item=te;var ne={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),!(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})))throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(e,"END"),this.setInputsInline(!0),this.setTooltip((()=>t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1")))}};Z.lists_indexOf=ne;var ie={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator((function(e){e="REMOVE"===e,this.getSourceBlock().updateStatement_(e)})),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip((()=>{const e=this.getFieldValue("MODE"),n=this.getFieldValue("WHERE");let i="";switch(e+" "+n){case"GET FROM_START":case"GET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(i+="  "+("FROM_START"===n?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i}))},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("statement",String(!this.outputConnection));const n=this.getInput("AT")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(n)),e},domToMutation:function(e){const t="true"===e.getAttribute("statement");this.updateStatement_(t),e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(e){e.isStatement?this.updateStatement_(!0):"string"==typeof e&&this.domToMutation(t.textToDom$$module$build$src$core$utils$xml(e))},updateStatement_:function(e){e!==!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const n=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});n.setValidator((function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}})),this.getInput("AT").appendField(n,"WHERE"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};Z.lists_getIndex=ie;var oe={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip((()=>{const e=this.getFieldValue("MODE"),n=this.getFieldValue("WHERE");let i="";switch(e+" "+n){case"SET FROM_START":case"SET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(i+="  "+t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i}))},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation"),n=this.getInput("AT")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(n)),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const n=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});n.setValidator((function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}})),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}};Z.lists_setIndex=oe;var re={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");var n=this.getInput("AT1")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",String(n)),n=this.getInput("AT2")instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",String(n)),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e,n){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),n?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);const i=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});i.setValidator((function(t){const i="FROM_START"===t||"FROM_END"===t;if(i!==n){const n=this.getSourceBlock();return n.updateAt_(e,i),n.setFieldValue(t,"WHERE"+e),null}})),this.getInput("AT"+e).appendField(i,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};Z.lists_getSublist=re,Z.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Z.lists_split={init:function(){const e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!e)throw Error("field_dropdown not found");e.setValidator((e=>{this.updateType_(e)})),this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((()=>{const e=this.getFieldValue("MODE");if("SPLIT"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)}))},updateType_:function(e){if(this.getFieldValue("MODE")!==e){const e=this.getInput("INPUT").connection;e.setShadowDom(null);const t=e.targetBlock();t&&(e.disconnect(),t.isShadow()?t.dispose(!1):this.bumpNeighbours())}"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},t.defineBlocks$$module$build$src$core$common(Z);var ae={blocks:Z},se=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);t.defineBlocks$$module$build$src$core$common(se);var le={blocks:se},ce={blocks:Object.assign({},se,Z,z,B,D,S,s,n),colour:le,lists:ae,loops:W,math:$,procedures:I,texts:E,variables:d,variablesDynamic:a};return ce.__namespace__=t,ce}(requireBlockly_compressed())}(blocks_compressed)),blocks_compressed.exports}function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(e,t){e.exports=requireBlocks_compressed()}(blocks)),blocks.exports}var javascript={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(e,t){e.exports=function(e){var t,n,i=e.__namespace__,o=function(e,n){return[n.quote_(e.getFieldValue("COLOUR")),t.ATOMIC]},r=function(e,n){return[n.provideFunction_("colourRandom",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * Math.pow(2, 24));\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`)+"()",t.FUNCTION_CALL]},a=function(e,n){const i=n.valueToCode(e,"RED",t.NONE)||0,o=n.valueToCode(e,"GREEN",t.NONE)||0;return e=n.valueToCode(e,"BLUE",t.NONE)||0,[n.provideFunction_("colourRgb",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+i+", "+o+", "+e+")",t.FUNCTION_CALL]},s=function(e,n){const i=n.valueToCode(e,"COLOUR1",t.NONE)||"'#000000'",o=n.valueToCode(e,"COLOUR2",t.NONE)||"'#000000'";return e=n.valueToCode(e,"RATIO",t.NONE)||.5,[n.provideFunction_("colourBlend",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+i+", "+o+", "+e+")",t.FUNCTION_CALL]},l=function(e,n){return["[]",t.ATOMIC]},c=function(e,n){const i=Array(e.itemCount_);for(let o=0;o<e.itemCount_;o++)i[o]=n.valueToCode(e,"ADD"+o,t.NONE)||"null";return["["+i.join(", ")+"]",t.ATOMIC]},u=function(e,n){return[n.provideFunction_("listsRepeat",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n}\n`)+"("+(n.valueToCode(e,"ITEM",t.NONE)||"null")+", "+(e=n.valueToCode(e,"NUM",t.NONE)||"0")+")",t.FUNCTION_CALL]},d=function(e,n){return[(n.valueToCode(e,"VALUE",t.MEMBER)||"[]")+".length",t.MEMBER]},h=function(e,n){return["!"+(n.valueToCode(e,"VALUE",t.MEMBER)||"[]")+".length",t.LOGICAL_NOT]},p=function(e,n){const i="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",o=n.valueToCode(e,"FIND",t.NONE)||"''";return n=(n.valueToCode(e,"VALUE",t.MEMBER)||"[]")+"."+i+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.ADDITION]:[n,t.FUNCTION_CALL]},f=function(e,n){const i=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START";var r=n.valueToCode(e,"VALUE","RANDOM"===o?t.NONE:t.MEMBER)||"[]";switch(o){case"FIRST":if("GET"===i)return[r+"[0]",t.MEMBER];if("GET_REMOVE"===i)return[r+".shift()",t.MEMBER];if("REMOVE"===i)return r+".shift();\n";break;case"LAST":if("GET"===i)return[r+".slice(-1)[0]",t.MEMBER];if("GET_REMOVE"===i)return[r+".pop()",t.MEMBER];if("REMOVE"===i)return r+".pop();\n";break;case"FROM_START":if(e=n.getAdjusted(e,"AT"),"GET"===i)return[r+"["+e+"]",t.MEMBER];if("GET_REMOVE"===i)return[r+".splice("+e+", 1)[0]",t.FUNCTION_CALL];if("REMOVE"===i)return r+".splice("+e+", 1);\n";break;case"FROM_END":if(e=n.getAdjusted(e,"AT",1,!0),"GET"===i)return[r+".slice("+e+")[0]",t.FUNCTION_CALL];if("GET_REMOVE"===i)return[r+".splice("+e+", 1)[0]",t.FUNCTION_CALL];if("REMOVE"===i)return r+".splice("+e+", 1);";break;case"RANDOM":if(r=n.provideFunction_("listsGetRandomItem",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n  var x = Math.floor(Math.random() * list.length);\n  if (remove) {\n    return list.splice(x, 1)[0];\n  } else {\n    return list[x];\n  }\n}\n`)+"("+r+", "+("GET"!==i)+")","GET"===i||"GET_REMOVE"===i)return[r,t.FUNCTION_CALL];if("REMOVE"===i)return r+";\n"}throw Error("Unhandled combination (lists_getIndex).")},g=function(e,n){function o(){if(r.match(/^\w+$/))return"";const e=n.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),t="var "+e+" = "+r+";\n";return r=e,t}let r=n.valueToCode(e,"LIST",t.MEMBER)||"[]";const a=e.getFieldValue("MODE")||"GET";var s=e.getFieldValue("WHERE")||"FROM_START";const l=n.valueToCode(e,"TO",t.ASSIGNMENT)||"null";switch(s){case"FIRST":if("SET"===a)return r+"[0] = "+l+";\n";if("INSERT"===a)return r+".unshift("+l+");\n";break;case"LAST":if("SET"===a)return o()+(r+"[")+r+".length - 1] = "+l+";\n";if("INSERT"===a)return r+".push("+l+");\n";break;case"FROM_START":if(e=n.getAdjusted(e,"AT"),"SET"===a)return r+"["+e+"] = "+l+";\n";if("INSERT"===a)return r+".splice("+e+", 0, "+l+");\n";break;case"FROM_END":if(e=n.getAdjusted(e,"AT",1,!1,t.SUBTRACTION),s=o(),"SET"===a)return s+(r+"[")+r+".length - "+e+"] = "+l+";\n";if("INSERT"===a)return s+(r+".splice(")+r+".length - "+e+", 0, "+l+");\n";break;case"RANDOM":if(e=o(),e+="var "+(s=n.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+r+".length);\n","SET"===a)return e+(r+"[")+s+"] = "+l+";\n";if("INSERT"===a)return e+(r+".splice(")+s+", 0, "+l+");\n"}throw Error("Unhandled combination (lists_setIndex).")},m=function(e,n){var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},o=n.valueToCode(e,"LIST",t.MEMBER)||"[]";const r=e.getFieldValue("WHERE1"),a=e.getFieldValue("WHERE2");if("FIRST"===r&&"LAST"===a)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!==r&&"FROM_START"===a){switch(r){case"FROM_START":i=n.getAdjusted(e,"AT1");break;case"FROM_END":i=o+".length - "+(i=n.getAdjusted(e,"AT1",1,!1,t.SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(a){case"FROM_START":n=n.getAdjusted(e,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=n.getAdjusted(e,"AT2",0,!1,t.SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+i+", "+n+")"}else{const t=n.getAdjusted(e,"AT1");e=n.getAdjusted(e,"AT2"),o=n.provideFunction_("subsequence"+i[r]+i[a],`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===r||"FROM_START"===r?", at1":""}${"FROM_END"===a||"FROM_START"===a?", at2":""}) {\n  var start = ${fe("sequence",r,"at1")};\n  var end = ${fe("sequence",a,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+o+("FROM_END"===r||"FROM_START"===r?", "+t:"")+("FROM_END"===a||"FROM_START"===a?", "+e:"")+")"}return[o,t.FUNCTION_CALL]},_=function(e,n){const i=n.valueToCode(e,"LIST",t.FUNCTION_CALL)||"[]",o="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[i+".slice().sort("+(n=n.provideFunction_("listsGetSortCompare",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n  var compareFuncs = {\n    'NUMERIC': function(a, b) {\n        return Number(a) - Number(b); },\n    'TEXT': function(a, b) {\n        return String(a) > String(b) ? 1 : -1; },\n    'IGNORE_CASE': function(a, b) {\n        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },\n  };\n  var compare = compareFuncs[type];\n  return function(a, b) { return compare(a, b) * direction; };\n}\n      `))+'("'+e+'", '+o+"))",t.FUNCTION_CALL]},v=function(e,n){let i=n.valueToCode(e,"INPUT",t.MEMBER);if(n=n.valueToCode(e,"DELIM",t.NONE)||"''","SPLIT"===(e=e.getFieldValue("MODE")))i||(i="''"),e="split";else{if("JOIN"!==e)throw Error("Unknown mode: "+e);i||(i="[]"),e="join"}return[i+"."+e+"("+n+")",t.FUNCTION_CALL]},b=function(e,n){return[(n.valueToCode(e,"LIST",t.FUNCTION_CALL)||"[]")+".slice().reverse()",t.FUNCTION_CALL]},T=function(e,n){var i=0;let o="";n.STATEMENT_PREFIX&&(o+=n.injectId(n.STATEMENT_PREFIX,e));do{const r=n.valueToCode(e,"IF"+i,t.NONE)||"false";let a=n.statementToCode(e,"DO"+i);n.STATEMENT_SUFFIX&&(a=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)+a),o+=(0<i?" else ":"")+"if ("+r+") {\n"+a+"}",i++}while(e.getInput("IF"+i));return(e.getInput("ELSE")||n.STATEMENT_SUFFIX)&&(i=n.statementToCode(e,"ELSE"),n.STATEMENT_SUFFIX&&(i=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)+i),o+=" else {\n"+i+"}"),o+"\n"},A=function(e,n){const i={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],o="=="===i||"!="===i?t.EQUALITY:t.RELATIONAL;return[(n.valueToCode(e,"A",o)||"0")+" "+i+" "+(e=n.valueToCode(e,"B",o)||"0"),o]},y=function(e,n){const i="AND"===e.getFieldValue("OP")?"&&":"||",o="&&"===i?t.LOGICAL_AND:t.LOGICAL_OR;let r=n.valueToCode(e,"A",o);return e=n.valueToCode(e,"B",o),r||e?(n="&&"===i?"true":"false",r||(r=n),e||(e=n)):e=r="false",[r+" "+i+" "+e,o]},E=function(e,n){const i=t.LOGICAL_NOT;return["!"+(n.valueToCode(e,"BOOL",i)||"true"),i]},S=function(e,n){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",t.ATOMIC]},C=function(e,n){return["null",t.ATOMIC]},w=function(e,n){return[(n.valueToCode(e,"IF",t.CONDITIONAL)||"false")+" ? "+(n.valueToCode(e,"THEN",t.CONDITIONAL)||"null")+" : "+(e=n.valueToCode(e,"ELSE",t.CONDITIONAL)||"null"),t.CONDITIONAL]},x=function(e,n){let o;o=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):n.valueToCode(e,"TIMES",t.ASSIGNMENT)||"0";let r=n.statementToCode(e,"DO");r=n.addLoopTrap(r,e),e="";const a=n.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let s=o;return o.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(o)||(s=n.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),e+="var "+s+" = "+o+";\n"),e+"for (var "+a+" = 0; "+a+" < "+s+"; "+a+"++) {\n"+r+"}\n"},M=function(e,n){const i="UNTIL"===e.getFieldValue("MODE");let o=n.valueToCode(e,"BOOL",i?t.LOGICAL_NOT:t.NONE)||"false",r=n.statementToCode(e,"DO");return r=n.addLoopTrap(r,e),i&&(o="!"+o),"while ("+o+") {\n"+r+"}\n"},R=function(e,n){var o=n.getVariableName(e.getFieldValue("VAR")),r=n.valueToCode(e,"FROM",t.ASSIGNMENT)||"0",a=n.valueToCode(e,"TO",t.ASSIGNMENT)||"0";const s=n.valueToCode(e,"BY",t.ASSIGNMENT)||"1";let l=n.statementToCode(e,"DO");if(l=n.addLoopTrap(l,e),i.isNumber$$module$build$src$core$utils$string(r)&&i.isNumber$$module$build$src$core$utils$string(a)&&i.isNumber$$module$build$src$core$utils$string(s))e="for ("+o+" = "+r+"; "+o+((n=Number(r)<=Number(a))?" <= ":" >= ")+a+"; "+o,e=1===(o=Math.abs(Number(s)))?e+(n?"++":"--"):e+(n?" += ":" -= ")+o,e+=") {\n"+l+"}\n";else{e="";let t=r;r.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(r)||(t=n.nameDB_.getDistinctName(o+"_start",i.NameType$$module$build$src$core$names.VARIABLE),e+="var "+t+" = "+r+";\n"),r=a,a.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(a)||(e+="var "+(r=n.nameDB_.getDistinctName(o+"_end",i.NameType$$module$build$src$core$names.VARIABLE))+" = "+a+";\n"),e+="var "+(a=n.nameDB_.getDistinctName(o+"_inc",i.NameType$$module$build$src$core$names.VARIABLE))+" = ",e=i.isNumber$$module$build$src$core$utils$string(s)?e+(Math.abs(Number(s))+";\n"):e+"Math.abs("+s+");\n",e+="if ("+t+" > "+r+") {\n",e=(e+=n.INDENT+a+" = -"+a+";\n")+"}\nfor ("+o+" = "+t+"; "+a+" >= 0 ? "+o+" <= "+r+" : "+o+" >= "+r+"; "+o+" += "+a+") {\n"+l+"}\n"}return e},I=function(e,n){const o=n.getVariableName(e.getFieldValue("VAR"));var r=n.valueToCode(e,"LIST",t.ASSIGNMENT)||"[]";let a=n.statementToCode(e,"DO");a=n.addLoopTrap(a,e),e="";let s=r;return r.match(/^\w+$/)||(s=n.nameDB_.getDistinctName(o+"_list",i.NameType$$module$build$src$core$names.VARIABLE),e+="var "+s+" = "+r+";\n"),r=n.nameDB_.getDistinctName(o+"_index",i.NameType$$module$build$src$core$names.VARIABLE),a=n.INDENT+o+" = "+s+"["+r+"];\n"+a,e+"for (var "+r+" in "+s+") {\n"+a+"}\n"},D=function(e,t){let n="";if(t.STATEMENT_PREFIX&&(n+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(n+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX){const i=e.getSurroundLoop();i&&!i.suppressPrefixSuffix&&(n+=t.injectId(t.STATEMENT_PREFIX,i))}switch(e.getFieldValue("FLOW")){case"BREAK":return n+"break;\n";case"CONTINUE":return n+"continue;\n"}throw Error("Unknown flow statement.")},k=function(e,n){return e=Number(e.getFieldValue("NUM")),[String(e),0<=e?t.ATOMIC:t.UNARY_NEGATION]},L=function(e,n){var i={ADD:[" + ",t.ADDITION],MINUS:[" - ",t.SUBTRACTION],MULTIPLY:[" * ",t.MULTIPLICATION],DIVIDE:[" / ",t.DIVISION],POWER:[null,t.NONE]}[e.getFieldValue("OP")];const o=i[0];i=i[1];const r=n.valueToCode(e,"A",i)||"0";return e=n.valueToCode(e,"B",i)||"0",o?[r+o+e,i]:["Math.pow("+r+", "+e+")",t.FUNCTION_CALL]},O=function(e,n){const i=e.getFieldValue("OP");let o;if("NEG"===i)return"-"===(e=n.valueToCode(e,"NUM",t.UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,t.UNARY_NEGATION];switch(e="SIN"===i||"COS"===i||"TAN"===i?n.valueToCode(e,"NUM",t.DIVISION)||"0":n.valueToCode(e,"NUM",t.NONE)||"0",i){case"ABS":o="Math.abs("+e+")";break;case"ROOT":o="Math.sqrt("+e+")";break;case"LN":o="Math.log("+e+")";break;case"EXP":o="Math.exp("+e+")";break;case"POW10":o="Math.pow(10,"+e+")";break;case"ROUND":o="Math.round("+e+")";break;case"ROUNDUP":o="Math.ceil("+e+")";break;case"ROUNDDOWN":o="Math.floor("+e+")";break;case"SIN":o="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":o="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":o="Math.tan("+e+" / 180 * Math.PI)"}if(o)return[o,t.FUNCTION_CALL];switch(i){case"LOG10":o="Math.log("+e+") / Math.log(10)";break;case"ASIN":o="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":o="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":o="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+i)}return[o,t.DIVISION]},P=function(e,n){return{PI:["Math.PI",t.MEMBER],E:["Math.E",t.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.DIVISION],SQRT2:["Math.SQRT2",t.MEMBER],SQRT1_2:["Math.SQRT1_2",t.MEMBER],INFINITY:["Infinity",t.ATOMIC]}[e.getFieldValue("CONSTANT")]},N=function(e,n){var i={EVEN:[" % 2 === 0",t.MODULUS,t.EQUALITY],ODD:[" % 2 === 1",t.MODULUS,t.EQUALITY],WHOLE:[" % 1 === 0",t.MODULUS,t.EQUALITY],POSITIVE:[" > 0",t.RELATIONAL,t.RELATIONAL],NEGATIVE:[" < 0",t.RELATIONAL,t.RELATIONAL],DIVISIBLE_BY:[null,t.MODULUS,t.EQUALITY],PRIME:[null,t.NONE,t.FUNCTION_CALL]};const o=e.getFieldValue("PROPERTY"),[r,a,s]=i[o];return i=n.valueToCode(e,"NUMBER_TO_CHECK",a)||"0",[e="PRIME"===o?n.provideFunction_("mathIsPrime",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) === 0 || n % (x + 1) === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n`)+"("+i+")":"DIVISIBLE_BY"===o?i+" % "+(e=n.valueToCode(e,"DIVISOR",t.MODULUS)||"0")+" === 0":i+r,s]},$=function(e,n){const i=n.valueToCode(e,"DELTA",t.ADDITION)||"0";return(e=n.getVariableName(e.getFieldValue("VAR")))+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+i+";\n"},B=function(e,n){var i=e.getFieldValue("OP");switch(i){case"SUM":e=n.valueToCode(e,"LIST",t.MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e="Math.min.apply(null, "+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"AVERAGE":e=(i=n.provideFunction_("mathMean",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;\n}\n`))+"("+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"MEDIAN":e=(i=n.provideFunction_("mathMedian",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  var localList = myList.filter(function (x) {return typeof x === 'number';});\n  if (!localList.length) return null;\n  localList.sort(function(a, b) {return b - a;});\n  if (localList.length % 2 === 0) {\n    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n  } else {\n    return localList[(localList.length - 1) / 2];\n  }\n}\n`))+"("+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"MODE":e=(i=n.provideFunction_("mathModes",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(values) {\n  var modes = [];\n  var counts = [];\n  var maxCount = 0;\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var found = false;\n    var thisCount;\n    for (var j = 0; j < counts.length; j++) {\n      if (counts[j][0] === value) {\n        thisCount = ++counts[j][1];\n        found = true;\n        break;\n      }\n    }\n    if (!found) {\n      counts.push([value, 1]);\n      thisCount = 1;\n    }\n    maxCount = Math.max(thisCount, maxCount);\n  }\n  for (var j = 0; j < counts.length; j++) {\n    if (counts[j][1] === maxCount) {\n        modes.push(counts[j][0]);\n    }\n  }\n  return modes;\n}\n`))+"("+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"STD_DEV":e=(i=n.provideFunction_("mathStandardDeviation",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n  var n = numbers.length;\n  if (!n) return null;\n  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\n  var variance = 0;\n  for (var j = 0; j < n; j++) {\n    variance += Math.pow(numbers[j] - mean, 2);\n  }\n  variance = variance / n;\n  return Math.sqrt(variance);\n}\n`))+"("+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;case"RANDOM":e=(i=n.provideFunction_("mathRandomList",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(list) {\n  var x = Math.floor(Math.random() * list.length);\n  return list[x];\n}\n`))+"("+(e=n.valueToCode(e,"LIST",t.NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+i)}return[e,t.FUNCTION_CALL]},F=function(e,n){return[(n.valueToCode(e,"DIVIDEND",t.MODULUS)||"0")+" % "+(e=n.valueToCode(e,"DIVISOR",t.MODULUS)||"0"),t.MODULUS]},U=function(e,n){return["Math.min(Math.max("+(n.valueToCode(e,"VALUE",t.NONE)||"0")+", "+(n.valueToCode(e,"LOW",t.NONE)||"0")+"), "+(e=n.valueToCode(e,"HIGH",t.NONE)||"Infinity")+")",t.FUNCTION_CALL]},G=function(e,n){const i=n.valueToCode(e,"FROM",t.NONE)||"0";return e=n.valueToCode(e,"TO",t.NONE)||"0",[n.provideFunction_("mathRandomInt",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n  if (a > b) {\n    // Swap a and b to ensure a is smaller.\n    var c = a;\n    a = b;\n    b = c;\n  }\n  return Math.floor(Math.random() * (b - a + 1) + a);\n}\n`)+"("+i+", "+e+")",t.FUNCTION_CALL]},V=function(e,n){return["Math.random()",t.FUNCTION_CALL]},H=function(e,n){const i=n.valueToCode(e,"X",t.NONE)||"0";return["Math.atan2("+(n.valueToCode(e,"Y",t.NONE)||"0")+", "+i+") / Math.PI * 180",t.DIVISION]},W=function(e,n){const i=n.getProcedureName(e.getFieldValue("NAME"));var o="";n.STATEMENT_PREFIX&&(o+=n.injectId(n.STATEMENT_PREFIX,e)),n.STATEMENT_SUFFIX&&(o+=n.injectId(n.STATEMENT_SUFFIX,e)),o&&(o=n.prefixLines(o,n.INDENT));let r="";n.INFINITE_LOOP_TRAP&&(r=n.prefixLines(n.injectId(n.INFINITE_LOOP_TRAP,e),n.INDENT));const a=n.statementToCode(e,"STACK");let s=n.valueToCode(e,"RETURN",t.NONE)||"",l="";a&&s&&(l=o),s&&(s=n.INDENT+"return "+s+";\n");const c=[],u=e.getVars();for(let t=0;t<u.length;t++)c[t]=n.getVariableName(u[t]);return o="function "+i+"("+c.join(", ")+") {\n"+o+r+a+l+s+"}",o=n.scrub_(e,o),n.definitions_["%"+i]=o,null},z=function(e,n){const i=n.getProcedureName(e.getFieldValue("NAME")),o=[],r=e.getVars();for(let a=0;a<r.length;a++)o[a]=n.valueToCode(e,"ARG"+a,t.NONE)||"null";return[i+"("+o.join(", ")+")",t.FUNCTION_CALL]},j=function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+";\n"},X=function(e,n){let i="if ("+(n.valueToCode(e,"CONDITION",t.NONE)||"false")+") {\n";return n.STATEMENT_SUFFIX&&(i+=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,e),n.INDENT)),e.hasReturnValue_?(e=n.valueToCode(e,"VALUE",t.NONE)||"null",i+=n.INDENT+"return "+e+";\n"):i+=n.INDENT+"return;\n",i+"}\n"},Y=function(e,n){return[n.quote_(e.getFieldValue("TEXT")),t.ATOMIC]},q=function(e,n){return e=n.multiline_quote_(e.getFieldValue("TEXT")),n=-1!==e.indexOf("+")?t.ADDITION:t.ATOMIC,[e,n]},K=function(e,n){switch(e.itemCount_){case 0:return["''",t.ATOMIC];case 1:return e=n.valueToCode(e,"ADD0",t.NONE)||"''",Ae(e);case 2:var i=n.valueToCode(e,"ADD0",t.NONE)||"''";return e=n.valueToCode(e,"ADD1",t.NONE)||"''",[Ae(i)[0]+" + "+Ae(e)[0],t.ADDITION];default:i=Array(e.itemCount_);for(let o=0;o<e.itemCount_;o++)i[o]=n.valueToCode(e,"ADD"+o,t.NONE)||"''";return["["+i.join(",")+"].join('')",t.FUNCTION_CALL]}},Q=function(e,n){const i=n.getVariableName(e.getFieldValue("VAR"));return e=n.valueToCode(e,"TEXT",t.NONE)||"''",i+" += "+Ae(e)[0]+";\n"},Z=function(e,n){return[(n.valueToCode(e,"VALUE",t.MEMBER)||"''")+".length",t.MEMBER]},J=function(e,n){return["!"+(n.valueToCode(e,"VALUE",t.MEMBER)||"''")+".length",t.LOGICAL_NOT]},ee=function(e,n){const i="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",o=n.valueToCode(e,"FIND",t.NONE)||"''";return n=(n.valueToCode(e,"VALUE",t.MEMBER)||"''")+"."+i+"("+o+")",e.workspace.options.oneBasedIndex?[n+" + 1",t.ADDITION]:[n,t.FUNCTION_CALL]},te=function(e,n){const i=e.getFieldValue("WHERE")||"FROM_START",o=n.valueToCode(e,"VALUE","RANDOM"===i?t.NONE:t.MEMBER)||"''";switch(i){case"FIRST":return[o+".charAt(0)",t.FUNCTION_CALL];case"LAST":return[o+".slice(-1)",t.FUNCTION_CALL];case"FROM_START":return[o+".charAt("+(e=n.getAdjusted(e,"AT"))+")",t.FUNCTION_CALL];case"FROM_END":return[o+".slice("+(e=n.getAdjusted(e,"AT",1,!0))+").charAt(0)",t.FUNCTION_CALL];case"RANDOM":return[n.provideFunction_("textRandomLetter",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(text) {\n  var x = Math.floor(Math.random() * text.length);\n  return text[x];\n}\n`)+"("+o+")",t.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},ne=function(e,n){var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const o=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2");var a="FROM_END"!==o&&"LAST"!==o&&"FROM_END"!==r&&"LAST"!==r,s=n.valueToCode(e,"STRING",a?t.MEMBER:t.NONE)||"''";if("FIRST"===o&&"LAST"===r)return[s,t.NONE];if(s.match(/^'?\w+'?$/)||a){switch(o){case"FROM_START":i=n.getAdjusted(e,"AT1");break;case"FROM_END":i=s+".length - "+(i=n.getAdjusted(e,"AT1",1,!1,t.SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":n=n.getAdjusted(e,"AT2",1);break;case"FROM_END":n=s+".length - "+(n=n.getAdjusted(e,"AT2",0,!1,t.SUBTRACTION));break;case"LAST":n=s+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}s=s+".slice("+i+", "+n+")"}else a=n.getAdjusted(e,"AT1"),e=n.getAdjusted(e,"AT2"),s=n.provideFunction_("subsequence"+i[o]+i[r],`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===o||"FROM_START"===o?", at1":""}${"FROM_END"===r||"FROM_START"===r?", at2":""}) {\n  var start = ${ye("sequence",o,"at1")};\n  var end = ${ye("sequence",r,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+s+("FROM_END"===o||"FROM_START"===o?", "+a:"")+("FROM_END"===r||"FROM_START"===r?", "+e:"")+")";return[s,t.FUNCTION_CALL]},ie=function(e,n){const i={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=n.valueToCode(e,"TEXT",i?t.MEMBER:t.NONE)||"''",[i?e+i:n.provideFunction_("textToTitleCase",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(str) {\n  return str.replace(/\\S+/g,\n      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\n}\n`)+"("+e+")",t.FUNCTION_CALL]},oe=function(e,n){const i={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+i,t.FUNCTION_CALL]},re=function(e,n){return"window.alert("+(n.valueToCode(e,"TEXT",t.NONE)||"''")+");\n"},ae=function(e,n){return n="window.prompt("+(e.getField("TEXT")?n.quote_(e.getFieldValue("TEXT")):n.valueToCode(e,"TEXT",t.NONE)||"''")+")","NUMBER"===e.getFieldValue("TYPE")&&(n="Number("+n+")"),[n,t.FUNCTION_CALL]},se=function(e,n){const i=n.valueToCode(e,"TEXT",t.NONE)||"''";return e=n.valueToCode(e,"SUB",t.NONE)||"''",[n.provideFunction_("textCount",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {\n  if (needle.length === 0) {\n    return haystack.length + 1;\n  } else {\n    return haystack.split(needle).length - 1;\n  }\n}\n`)+"("+i+", "+e+")",t.FUNCTION_CALL]},le=function(e,n){const i=n.valueToCode(e,"TEXT",t.NONE)||"''",o=n.valueToCode(e,"FROM",t.NONE)||"''";return e=n.valueToCode(e,"TO",t.NONE)||"''",[n.provideFunction_("textReplace",`\nfunction ${n.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {\n  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')\n                 .replace(/\\x08/g, '\\\\x08');\n  return haystack.replace(new RegExp(needle, 'g'), replacement);\n}\n`)+"("+i+", "+o+", "+e+")",t.FUNCTION_CALL]},ce=function(e,n){return[(n.valueToCode(e,"TEXT",t.MEMBER)||"''")+".split('').reverse().join('')",t.FUNCTION_CALL]},ue=function(e,n){return[n.getVariableName(e.getFieldValue("VAR")),t.ATOMIC]},de=function(e,n){const i=n.valueToCode(e,"VALUE",t.ASSIGNMENT)||"0";return n.getVariableName(e.getFieldValue("VAR"))+" = "+i+";\n"};(n=t||(t={}))[n.ATOMIC=0]="ATOMIC",n[n.NEW=1.1]="NEW",n[n.MEMBER=1.2]="MEMBER",n[n.FUNCTION_CALL=2]="FUNCTION_CALL",n[n.INCREMENT=3]="INCREMENT",n[n.DECREMENT=3]="DECREMENT",n[n.BITWISE_NOT=4.1]="BITWISE_NOT",n[n.UNARY_PLUS=4.2]="UNARY_PLUS",n[n.UNARY_NEGATION=4.3]="UNARY_NEGATION",n[n.LOGICAL_NOT=4.4]="LOGICAL_NOT",n[n.TYPEOF=4.5]="TYPEOF",n[n.VOID=4.6]="VOID",n[n.DELETE=4.7]="DELETE",n[n.AWAIT=4.8]="AWAIT",n[n.EXPONENTIATION=5]="EXPONENTIATION",n[n.MULTIPLICATION=5.1]="MULTIPLICATION",n[n.DIVISION=5.2]="DIVISION",n[n.MODULUS=5.3]="MODULUS",n[n.SUBTRACTION=6.1]="SUBTRACTION",n[n.ADDITION=6.2]="ADDITION",n[n.BITWISE_SHIFT=7]="BITWISE_SHIFT",n[n.RELATIONAL=8]="RELATIONAL",n[n.IN=8]="IN",n[n.INSTANCEOF=8]="INSTANCEOF",n[n.EQUALITY=9]="EQUALITY",n[n.BITWISE_AND=10]="BITWISE_AND",n[n.BITWISE_XOR=11]="BITWISE_XOR",n[n.BITWISE_OR=12]="BITWISE_OR",n[n.LOGICAL_AND=13]="LOGICAL_AND",n[n.LOGICAL_OR=14]="LOGICAL_OR",n[n.CONDITIONAL=15]="CONDITIONAL",n[n.ASSIGNMENT=16]="ASSIGNMENT",n[n.YIELD=17]="YIELD",n[n.COMMA=18]="COMMA",n[n.NONE=99]="NONE";var he=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(e="JavaScript"){super(e),this.ORDER_OVERRIDES=[[t.FUNCTION_CALL,t.MEMBER],[t.FUNCTION_CALL,t.FUNCTION_CALL],[t.MEMBER,t.MEMBER],[t.MEMBER,t.FUNCTION_CALL],[t.LOGICAL_NOT,t.LOGICAL_NOT],[t.MULTIPLICATION,t.MULTIPLICATION],[t.ADDITION,t.ADDITION],[t.LOGICAL_AND,t.LOGICAL_AND],[t.LOGICAL_OR,t.LOGICAL_OR]],this.isInitialized=!1;for(const n in t)"string"!=typeof(e=t[n])&&(this["ORDER_"+n]=e);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(e){super.init(e),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const t=[];var n=i.allDeveloperVariables$$module$build$src$core$variables(e);for(let o=0;o<n.length;o++)t.push(this.nameDB_.getName(n[o],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(e=i.allUsedVarModels$$module$build$src$core$variables(e),n=0;n<e.length;n++)t.push(this.nameDB_.getName(e[n].getId(),i.NameType$$module$build$src$core$names.VARIABLE));t.length&&(this.definitions_.variables="var "+t.join(", ")+";"),this.isInitialized=!0}finish(e){const t=Object.values(this.definitions_);return super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e}scrubNakedValue(e){return e+";\n"}quote_(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")}scrub_(e,t,n=!1){let o="";if(!e.outputConnection||!e.outputConnection.targetConnection){var r=e.getCommentText();r&&(r=i.wrap$$module$build$src$core$utils$string(r,this.COMMENT_WRAP-3),o+=this.prefixLines(r+"\n","// "));for(let t=0;t<e.inputList.length;t++)e.inputList[t].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(r=e.inputList[t].connection.targetBlock())&&(r=this.allNestedComments(r))&&(o+=this.prefixLines(r,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),o+t+(n=n?"":this.blockToCode(e))}getAdjusted(e,n,o=0,r=!1,a=t.NONE){e.workspace.options.oneBasedIndex&&o--;const s=e.workspace.options.oneBasedIndex?"1":"0";let l=a;return 0<o?l=t.ADDITION:0>o?l=t.SUBTRACTION:r&&(l=t.UNARY_NEGATION),e=this.valueToCode(e,n,l)||s,0!==o||r?i.isNumber$$module$build$src$core$utils$string(e)?(e=String(Number(e)+o),r&&(e=String(-Number(e))),e):(0<o?e=`${e} + ${o}`:0>o&&(e=`${e} - ${-o}`),r&&(e=o?`-(${e})`:`-${e}`),Math.floor(a)>=Math.floor(l)&&(e=`(${e})`),e):e}},pe={};pe.colour_blend=s,pe.colour_picker=o,pe.colour_random=r,pe.colour_rgb=a;var fe=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n},ge={};ge.lists_create_empty=l,ge.lists_create_with=c,ge.lists_getIndex=f,ge.lists_getSublist=m,ge.lists_indexOf=p,ge.lists_isEmpty=h,ge.lists_length=d,ge.lists_repeat=u,ge.lists_reverse=b,ge.lists_setIndex=g,ge.lists_sort=_,ge.lists_split=v;var me={};me.controls_if=T,me.controls_ifelse=T,me.logic_boolean=S,me.logic_compare=A,me.logic_negate=E,me.logic_null=C,me.logic_operation=y,me.logic_ternary=w;var _e={};_e.controls_flow_statements=D,_e.controls_for=R,_e.controls_forEach=I,_e.controls_repeat=x,_e.controls_repeat_ext=x,_e.controls_whileUntil=M;var ve={};ve.math_arithmetic=L,ve.math_atan2=H,ve.math_change=$,ve.math_constant=P,ve.math_constrain=U,ve.math_modulo=F,ve.math_number=k,ve.math_number_property=N,ve.math_on_list=B,ve.math_random_float=V,ve.math_random_int=G,ve.math_round=O,ve.math_single=O,ve.math_trig=O;var be={};be.procedures_callnoreturn=j,be.procedures_callreturn=z,be.procedures_defnoreturn=W,be.procedures_defreturn=W,be.procedures_ifreturn=X;var Te=/^\s*'([^']|\\')*'\s*$/,Ae=function(e){return Te.test(e)?[e,t.ATOMIC]:["String("+e+")",t.FUNCTION_CALL]},ye=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n},Ee={};Ee.text=Y,Ee.text_append=Q,Ee.text_changeCase=ie,Ee.text_charAt=te,Ee.text_count=se,Ee.text_getSubstring=ne,Ee.text_indexOf=ee,Ee.text_isEmpty=J,Ee.text_join=K,Ee.text_length=Z,Ee.text_multiline=q,Ee.text_print=re,Ee.text_prompt=ae,Ee.text_prompt_ext=ae,Ee.text_replace=le,Ee.text_reverse=ce,Ee.text_trim=oe;var Se={};Se.variables_get=ue,Se.variables_set=de;var Ce={};Ce.variables_get_dynamic=ue,Ce.variables_set_dynamic=de;var we=new he,xe=Object.assign({},pe,ge,me,_e,ve,be,Ee,Se,Ce);for(const Re in xe)we.forBlock[Re]=xe[Re];var Me={};return Me.JavascriptGenerator=he,Me.Order=t,Me.javascriptGenerator=we,Me.__namespace__=i,Me}(requireBlockly_compressed())}(javascript_compressed)),javascript_compressed.exports}!function(e,t){e.exports=requireJavascript_compressed()}(javascript);var javascriptExports=exports("l",javascript.exports),hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(e,t){e.exports=function(e,t,n,i){return e.setLocale(t),e}(coreBrowserExports,enExports,requireBlocks())}(browser)),browser.exports}!function(e,t){e.exports=requireBrowser()}(blockly);var blocklyExports=exports("G",blockly.exports);const Blockly=exports("B",getDefaultExportFromCjs(blocklyExports)),RTCPeerConnectionStateMap=new Map([["new","Creating connection"],["connecting","Connecting"],["connected","Connected"],["failed","Connection Failed"],["closed","Connection Closed"],["disconnected","Disconnect"],["error","Connection Error"]]),ROBOT_ERRORS_MAP=new Map([["100,1","robot_errors_val_100_1"],["100,2","robot_errors_val_100_2"],["100,16","robot_errors_val_100_16"],["100,32","robot_errors_val_100_32"],["100,64","robot_errors_val_100_64"],["100,128","robot_errors_val_100_128"],["3xx,1","robot_errors_val_3xx_1"],["3xx,2","robot_errors_val_3xx_2"],["3xx,4","robot_errors_val_3xx_4"],["3xx,8","robot_errors_val_3xx_8"],["3xx,16","robot_errors_val_3xx_16"],["3xx,32","robot_errors_val_3xx_32"],["3xx,64","robot_errors_val_3xx_64"],["3xx,256","robot_errors_val_3xx_256"],["3xx,4096","robot_errors_val_3xx_4096"],["3xx,65536","robot_errors_val_3xx_65536"],["3xx,16777216","robot_errors_val_3xx_16777216"],["3xx,33554432","robot_errors_val_3xx_33554432"],["3xx,67108864","robot_errors_val_3xx_67108864"],["3xx,134217728","robot_errors_val_3xx_134217728"],["3xx,268435456","robot_errors_val_3xx_268435456"],["3xx_w,1","robot_errors_val_3xx_1"],["3xx_w,2","robot_errors_val_3xx_w_2"],["3xx_w,4","robot_errors_val_3xx_w_4"],["3xx_w,8","robot_errors_val_3xx_8"],["3xx_w,16","robot_errors_val_3xx_16"],["3xx_w,32","robot_errors_val_3xx_w_32"],["3xx_w,64","robot_errors_val_3xx_w_64"],["3xx_w,128","robot_errors_val_3xx_w_128"],["3xx_w,256","robot_errors_val_3xx_256"],["3xx_w,4096","robot_errors_val_3xx_4096"],["3xx_w,65536","robot_errors_val_3xx_65536"],["3xx_w,16777216","robot_errors_val_3xx_w_16777216"]]);var SPORT_CMD=exports("S",(e=>(e[e.Damp=1001]="Damp",e[e.BalanceStand=1002]="BalanceStand",e[e.StopMove=1003]="StopMove",e[e.StandUp=1004]="StandUp",e[e.StandDown=1005]="StandDown",e[e.RecoveryStand=1006]="RecoveryStand",e[e.Euler=1007]="Euler",e[e.Move=1008]="Move",e[e.Sit=1009]="Sit",e[e.RiseSit=1010]="RiseSit",e[e.SwitchGait=1011]="SwitchGait",e[e.Trigger=1012]="Trigger",e[e.BodyHeight=1013]="BodyHeight",e[e.FootRaiseHeight=1014]="FootRaiseHeight",e[e.SpeedLevel=1015]="SpeedLevel",e[e.Hello=1016]="Hello",e[e.Stretch=1017]="Stretch",e[e.TrajectoryFollow=1018]="TrajectoryFollow",e[e.ContinuousGait=1019]="ContinuousGait",e[e.Content=1020]="Content",e[e.Wallow=1021]="Wallow",e[e.Dance1=1022]="Dance1",e[e.Dance2=1023]="Dance2",e[e.GetBodyHeight=1024]="GetBodyHeight",e[e.GetFootRaiseHeight=1025]="GetFootRaiseHeight",e[e.GetSpeedLevel=1026]="GetSpeedLevel",e[e.SwitchJoystick=1027]="SwitchJoystick",e[e.Pose=1028]="Pose",e[e.Scrape=1029]="Scrape",e[e.FrontFlip=1030]="FrontFlip",e[e.FrontJump=1031]="FrontJump",e[e.FrontPounce=1032]="FrontPounce",e[e.WiggleHips=1033]="WiggleHips",e[e.GetState=1034]="GetState",e[e.EconomicGait=1035]="EconomicGait",e[e.FingerHeart=1036]="FingerHeart",e[e.StandOut=1039]="StandOut",e[e.FreeWalk=1045]="FreeWalk",e[e.WalkStair=1049]="WalkStair",e[e.FastWalk=1050]="FastWalk",e[e.FreeEuler=1051]="FreeEuler",e[e.G1State=7101]="G1State",e[e.G1BalanceState=7102]="G1BalanceState",e[e.G1UpperLimbs=7106]="G1UpperLimbs",e))(SPORT_CMD||{}));function appRTCSetting$1(e,t,n,i){listenAppToWeb("appReqRTCSessionDescriptionInit",(n=>{console.log("收到APP发过来的SDP",n),"connected"!==e.getConnectionState()?n?e.onConnect(n).catch((e=>{console.log("RTC连接失败",e),t({state:"error",message:"WebRTC local connection failed",code:"-100"})})):(console.log("收到APP的SDP无效，重新发送请求"),t({state:"error",message:"SDP is invalid",code:"-100"})):console.logPurple("当前已经处于连接成功，忽略此次SDP接受")})),listenAppToWeb("appSendTurnServerInfo",(n=>{function o(o,r){e.init((null==i?void 0:i.value)||"B2",o,r).then((()=>{const t=_objectSpread({},e.localDescriptionCache);o&&(t.turnserver=n),console.log("发送给SDP 给 APP",t),webToApp("webSendRTCSessionDescription",t)})).catch((e=>{console.error("RTC初始化失败",e),t({state:"error",message:"Local SDP creation on the web side failed",code:"-100"})}))}console.log("收到了APP发过来的turnserver用户名和密码",n),n?o(!0,n):(console.log("turnserver信息为空，判断为无需turnserver直接生成sdp"),o(!1))})),listenAppToWeb("appReqDeviceState",(()=>{if(!e)return{state:"new",message:RTCPeerConnectionStateMap.get("new")};const t=e.getConnectionState();if(!t)return{state:"error",message:"无状态"};return{state:t,message:RTCPeerConnectionStateMap.get(t)}})),listenAppToWeb("appSendOpenUwbSubscribe",(t=>{e&&"connected"===e.getConnectionState()&&"open"===e.getChannelState()&&("1"===t?e.subscribe(RTC_TOPIC.UWB_STATE):e.unsubscribe(RTC_TOPIC.UWB_STATE))})),listenAppToWeb("appSendTopicSubscribe",(t=>{if(e&&"connected"===e.getConnectionState()&&"open"===e.getChannelState()){if(!t.topic)throw new Error("topic不可为空");"1"===t.state?e.subscribe(t.topic):e.unsubscribe(t.topic)}})),listenAppToWeb("appSendCmdToGo2",(t=>{e&&"connected"===e.getConnectionState()&&"open"===e.getChannelState()&&(console.log(`%c 监听到APP发过来的指令 ${t.topic}`,"color: #29b6f6"),t.topic&&t.api_id&&(console.log("%c 完整参数","color: #29b6f6",t),e.publishReqNew(t.topic,{api_id:t.api_id,data:t.data,id:t.id,priority:!!t.priority}).then((e=>{console.log("rtc 返回",e);const t={id:e.data.header.identity.id,api_id:e.data.header.identity.api_id,topic:e.topic,code:e.data.header.status.code,data:e.data.data};console.log("发送APP",t),webToApp("webSendCmdRes",t)}))))})),listenAppToWeb("appSendCmdToGo2WithoutCb",(t=>{e&&"connected"===e.getConnectionState()&&"open"===e.getChannelState()&&(console.log(`%c 监听到APP发过来的非请求响应指令 ${t.topic}`,"color: #29b6f6"),e.publishWithoutCb(t.topic||"",t.data,DataChannelType.MSG))})),listenAppToWeb("appSendBreakRTC",(()=>{window.setTimeout((()=>{t({state:"closed",message:"Receive 'appSendBreakRTC' request from APP and disconnect RTC",code:"-99"})}),1e3)})),listenAppToWeb("appSendNetwork",(e=>{console.log("收到了APP发送过来的网络切换指令, 即将刷新sdp",e),t({state:"closed",message:"Receive 'appSendNetwork' request from APP and disconnect RTC",code:"-98"})})),listenAppToWeb("appSendRocker",(t=>{t&&dealRocker(e,t)})),listenAppToWeb("appSendJoystick",(t=>{t&&dealJoystick(e,t)})),listenAppToWeb("appSendReportResult",(e=>{console.log("流量结果",e)})),addVideoListener(e,n)}const dealRocker=(e,t)=>{const n=t.split(",").map((e=>Number(e))),i=new Uint8Array(n),o=new Float32Array(i.slice(0,4).buffer)[0],r=new Float32Array(i.slice(12,16).buffer)[0],a=new Float32Array(i.slice(4,8).buffer)[0],s=new Float32Array(i.slice(8,12).buffer)[0],l=i[16],c=i[17],u=l>>1&1,d=l>>5&1,h=1&l,p=l>>4&1,f=l>>2&1,g=l>>3&1,m=l>>6&1,_=l>>7&1;console.log(l);const v=binaryToUint16([h,u,f,g,p,d,m,_,1&c,c>>1&1,c>>2&1,c>>3&1,c>>4&1,c>>5&1,c>>6&1,c>>7&1]);console.log(o,r,a,s,v),dealJoystick(e,{lx:o,ly:r,rx:a,ry:s,keys:v})},dealJoystick=(e,t)=>{null==e||e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,t)};function binaryToUint16(e){let t=0;for(let n=e.length-1;n>=0;n--){t=t<<1|e[n]}return t}function addVideoListener(e,t){const n=useDeviceStore(),{series:i}=storeToRefs(n);let o=!1;const r=n=>{console.log("-==-=-=-=-=-==",null==t?void 0:t.value,n,o),null!=t&&t.value&&("SUCCESS"===(null==e?void 0:e.getValidationState())?(o=n,routeSetting(e,t,n,i)):null==e||e.onValidationOK((()=>r(n))))};e.onValidationOK((()=>{null!=t&&t.value&&o&&["operation","/operation"].includes(null==t?void 0:t.value)&&operation_route_setting(e,!0,i)})),listenAppToWeb("appSendWebviewState",(e=>{console.log("接收到appSendWebviewState",e),"0"===e&&(r(!1),o=!1),"1"===e&&(r(!0),o=!0)}))}function switchLowStateFrequency(e,t){e.publish("",{req_type:"disable_traffic_saving",instruction:t?"on":"off"},DataChannelType.RTC_INNER_REQ)}function routeSetting(e,t,n,i){["operation","/operation"].includes(t.value)&&operation_route_setting(e,n,i),["programming","/programming"].includes(t.value)&&programming_route_setting(e,n,i),["slam","/slam"].includes(t.value)&&slam_route_setting(e,n,i),["newSlam","/newSlam"].includes(t.value)&&slam_route_setting(e,n,i)}function switchVideoTrack(e,t,n,i){["G1","H1"].includes(t.value)?null==e||e.publish(RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB,n?"on":"off",DataChannelType.VID):("front"===i&&(null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,n?"on":"off",DataChannelType.VID)),"back"===i||null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,n?"on":"off",DataChannelType.VID),null==e||e.publish(RTC_TOPIC.BACK_VIDEO_HUB,n?"on":"off",DataChannelType.VID))}function operation_route_setting(e,t,n){t?(switchVideoTrack(e,n,!0),e.subscribe(RTC_TOPIC.MULTIPLE_STATE),null==e||e.playVideo(n.value),switchLowStateFrequency(e,!0)):(switchVideoTrack(e,n,!1),e.unsubscribe(RTC_TOPIC.MULTIPLE_STATE),switchLowStateFrequency(e,!1)),console.log("视频开关",t?"on":"off")}function programming_route_setting(e,t,n){var i;t?(switchVideoTrack(e,n,!0),null==e||e.subscribe(RTC_TOPIC.ROBOTODOM)):(switchVideoTrack(e,n,!1),null==e||e.unsubscribe(RTC_TOPIC.ROBOTODOM),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.hide(),null===(i=Blockly.WidgetDiv.getDiv())||void 0===i||i.remove(),Blockly.WidgetDiv.hide());console.log("视频开关",t?"on":"off")}function slam_route_setting(e,t,n){t?switchLowStateFrequency(e,!0):(switchVideoTrack(e,n,!1,"front"),switchLowStateFrequency(e,!1))}var ansi_up$1={},exports$1;exports$1=ansi_up$1,function(e,t){if("string"!=typeof exports$1.nodeName)t(exports$1);else{var n={};t(n),e.AnsiUp=n.default}}(commonjsGlobal,(function(e){var t,n=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};!function(e){e[e.EOS=0]="EOS",e[e.Text=1]="Text",e[e.Incomplete=2]="Incomplete",e[e.ESC=3]="ESC",e[e.Unknown=4]="Unknown",e[e.SGR=5]="SGR",e[e.OSCURL=6]="OSCURL"}(t||(t={}));var i=function(){function e(){this.VERSION="5.2.1",this.setup_palettes(),this._use_classes=!1,this.bold=!1,this.italic=!1,this.underline=!1,this.fg=this.bg=null,this._buffer="",this._url_whitelist={http:1,https:1},this._escape_html=!0}return Object.defineProperty(e.prototype,"use_classes",{get:function(){return this._use_classes},set:function(e){this._use_classes=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url_whitelist",{get:function(){return this._url_whitelist},set:function(e){this._url_whitelist=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"escape_html",{get:function(){return this._escape_html},set:function(e){this._escape_html=e},enumerable:!1,configurable:!0}),e.prototype.setup_palettes=function(){var e=this;this.ansi_colors=[[{rgb:[0,0,0],class_name:"ansi-black"},{rgb:[187,0,0],class_name:"ansi-red"},{rgb:[0,187,0],class_name:"ansi-green"},{rgb:[187,187,0],class_name:"ansi-yellow"},{rgb:[0,0,187],class_name:"ansi-blue"},{rgb:[187,0,187],class_name:"ansi-magenta"},{rgb:[0,187,187],class_name:"ansi-cyan"},{rgb:[255,255,255],class_name:"ansi-white"}],[{rgb:[85,85,85],class_name:"ansi-bright-black"},{rgb:[255,85,85],class_name:"ansi-bright-red"},{rgb:[0,255,0],class_name:"ansi-bright-green"},{rgb:[255,255,85],class_name:"ansi-bright-yellow"},{rgb:[85,85,255],class_name:"ansi-bright-blue"},{rgb:[255,85,255],class_name:"ansi-bright-magenta"},{rgb:[85,255,255],class_name:"ansi-bright-cyan"},{rgb:[255,255,255],class_name:"ansi-bright-white"}]],this.palette_256=[],this.ansi_colors.forEach((function(t){t.forEach((function(t){e.palette_256.push(t)}))}));for(var t=[0,95,135,175,215,255],n=0;n<6;++n)for(var i=0;i<6;++i)for(var o=0;o<6;++o){var r={rgb:[t[n],t[i],t[o]],class_name:"truecolor"};this.palette_256.push(r)}for(var a=8,s=0;s<24;++s,a+=10){var l={rgb:[a,a,a],class_name:"truecolor"};this.palette_256.push(l)}},e.prototype.escape_txt_for_html=function(e){return this._escape_html?e.replace(/[&<>"']/gm,(function(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"'"===e?"&#x27;":void 0})):e},e.prototype.append_buffer=function(e){var t=this._buffer+e;this._buffer=t},e.prototype.get_next_packet=function(){var e={kind:t.EOS,text:"",url:""},i=this._buffer.length;if(0==i)return e;var r,a,s,l,c=this._buffer.indexOf("");if(-1==c)return e.kind=t.Text,e.text=this._buffer,this._buffer="",e;if(c>0)return e.kind=t.Text,e.text=this._buffer.slice(0,c),this._buffer=this._buffer.slice(c),e;if(0==c){if(i<3)return e.kind=t.Incomplete,e;var u=this._buffer.charAt(1);if("["!=u&&"]"!=u&&"("!=u)return e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;if("["==u){if(this._csi_regex||(this._csi_regex=o(n(["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          [                      # CSI\n                          ([<-?]?)              # private-mode char\n                          ([d;]*)                    # any digits or semicolons\n                          ([ -/]?               # an intermediate modifier\n                          [@-~])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          [                      # CSI\n                          [ -~]*                # anything legal\n                          ([\0-:])              # anything illegal\n                        )\n                    "],["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \\x1b\\[                      # CSI\n                          ([\\x3c-\\x3f]?)              # private-mode char\n                          ([\\d;]*)                    # any digits or semicolons\n                          ([\\x20-\\x2f]?               # an intermediate modifier\n                          [\\x40-\\x7e])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \\x1b\\[                      # CSI\n                          [\\x20-\\x7e]*                # anything legal\n                          ([\\x00-\\x1f:])              # anything illegal\n                        )\n                    "]))),null===(p=this._buffer.match(this._csi_regex)))return e.kind=t.Incomplete,e;if(p[4])return e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;""!=p[1]||"m"!=p[3]?e.kind=t.Unknown:e.kind=t.SGR,e.text=p[2];var d=p[0].length;return this._buffer=this._buffer.slice(d),e}if("]"==u){if(i<4)return e.kind=t.Incomplete,e;if("8"!=this._buffer.charAt(2)||";"!=this._buffer.charAt(3))return e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;this._osc_st||(this._osc_st=(r=n(["\n                        (?:                         # legal sequence\n                          (\\)                    # ESC                           |                           # alternate\n                          ()                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\0-]                 # anything illegal\n                          |                           # alternate\n                          [\b-]                 # anything illegal\n                          |                           # alternate\n                          [-]                 # anything illegal\n                        )\n                    "],["\n                        (?:                         # legal sequence\n                          (\\x1b\\\\)                    # ESC \\\n                          |                           # alternate\n                          (\\x07)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\\x00-\\x06]                 # anything illegal\n                          |                           # alternate\n                          [\\x08-\\x1a]                 # anything illegal\n                          |                           # alternate\n                          [\\x1c-\\x1f]                 # anything illegal\n                        )\n                    "]),a=r.raw[0],s=/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,l=a.replace(s,""),new RegExp(l,"g"))),this._osc_st.lastIndex=0;var h=this._osc_st.exec(this._buffer);if(null===h)return e.kind=t.Incomplete,e;if(h[3])return e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e;var p,f=this._osc_st.exec(this._buffer);return null===f?(e.kind=t.Incomplete,e):f[3]?(e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e):(this._osc_regex||(this._osc_regex=o(n(["\n                        ^                           # beginning of line\n                                                    #\n                        ]8;                    # OSC Hyperlink\n                        [ -:<-~]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([!-~]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\\)                  # ESC                           |                           # alternate\n                          (?:)                    # BEL (what xterm did)\n                        )\n                        ([ -~]+)              # TEXT capture\n                        ]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\\)                  # ESC                           |                           # alternate\n                          (?:)                    # BEL (what xterm did)\n                        )\n                    "],["\n                        ^                           # beginning of line\n                                                    #\n                        \\x1b\\]8;                    # OSC Hyperlink\n                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([\\x21-\\x7e]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                        ([\\x20-\\x7e]+)              # TEXT capture\n                        \\x1b\\]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                    "]))),null===(p=this._buffer.match(this._osc_regex))?(e.kind=t.ESC,e.text=this._buffer.slice(0,1),this._buffer=this._buffer.slice(1),e):(e.kind=t.OSCURL,e.url=p[1],e.text=p[2],d=p[0].length,this._buffer=this._buffer.slice(d),e))}if("("==u)return e.kind=t.Unknown,this._buffer=this._buffer.slice(3),e}},e.prototype.ansi_to_html=function(e){this.append_buffer(e);for(var n=[];;){var i=this.get_next_packet();if(i.kind==t.EOS||i.kind==t.Incomplete)break;i.kind!=t.ESC&&i.kind!=t.Unknown&&(i.kind==t.Text?n.push(this.transform_to_html(this.with_state(i))):i.kind==t.SGR?this.process_ansi(i):i.kind==t.OSCURL&&n.push(this.process_hyperlink(i)))}return n.join("")},e.prototype.with_state=function(e){return{bold:this.bold,italic:this.italic,underline:this.underline,fg:this.fg,bg:this.bg,text:e.text}},e.prototype.process_ansi=function(e){for(var t=e.text.split(";");t.length>0;){var n=t.shift(),i=parseInt(n,10);if(isNaN(i)||0===i)this.fg=this.bg=null,this.bold=!1,this.italic=!1,this.underline=!1;else if(1===i)this.bold=!0;else if(3===i)this.italic=!0;else if(4===i)this.underline=!0;else if(22===i)this.bold=!1;else if(23===i)this.italic=!1;else if(24===i)this.underline=!1;else if(39===i)this.fg=null;else if(49===i)this.bg=null;else if(i>=30&&i<38)this.fg=this.ansi_colors[0][i-30];else if(i>=40&&i<48)this.bg=this.ansi_colors[0][i-40];else if(i>=90&&i<98)this.fg=this.ansi_colors[1][i-90];else if(i>=100&&i<108)this.bg=this.ansi_colors[1][i-100];else if((38===i||48===i)&&t.length>0){var o=38===i,r=t.shift();if("5"===r&&t.length>0){var a=parseInt(t.shift(),10);a>=0&&a<=255&&(o?this.fg=this.palette_256[a]:this.bg=this.palette_256[a])}if("2"===r&&t.length>2){var s=parseInt(t.shift(),10),l=parseInt(t.shift(),10),c=parseInt(t.shift(),10);if(s>=0&&s<=255&&l>=0&&l<=255&&c>=0&&c<=255){var u={rgb:[s,l,c],class_name:"truecolor"};o?this.fg=u:this.bg=u}}}}},e.prototype.transform_to_html=function(e){var t=e.text;if(0===t.length)return t;if(t=this.escape_txt_for_html(t),!e.bold&&!e.italic&&!e.underline&&null===e.fg&&null===e.bg)return t;var n=[],i=[],o=e.fg,r=e.bg;e.bold&&n.push("font-weight:bold"),e.italic&&n.push("font-style:italic"),e.underline&&n.push("text-decoration:underline"),this._use_classes?(o&&("truecolor"!==o.class_name?i.push(o.class_name+"-fg"):n.push("color:rgb("+o.rgb.join(",")+")")),r&&("truecolor"!==r.class_name?i.push(r.class_name+"-bg"):n.push("background-color:rgb("+r.rgb.join(",")+")"))):(o&&n.push("color:rgb("+o.rgb.join(",")+")"),r&&n.push("background-color:rgb("+r.rgb+")"));var a="",s="";return i.length&&(a=' class="'+i.join(" ")+'"'),n.length&&(s=' style="'+n.join(";")+'"'),"<span"+s+a+">"+t+"</span>"},e.prototype.process_hyperlink=function(e){var t=e.url.split(":");return t.length<1?"":this._url_whitelist[t[0]]?'<a href="'+this.escape_txt_for_html(e.url)+'">'+this.escape_txt_for_html(e.text)+"</a>":""},e}();function o(e){var t=e.raw[0].replace(/^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm,"");return new RegExp(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}));const AnsiUp=getDefaultExportFromCjs(ansi_up$1);var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var i=!0}catch(r){}var o=nativeObjectToString$1.call(e);return i&&(t?e[symToStringTag$1]=n:delete e[symToStringTag$1]),o}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return null!=e&&"object"==typeof e}var symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}var reWhitespace=/\s/;function trimmedEndIndex(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var reTrimStart=/^\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var now$3=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(e,t,n){var i,o,r,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function p(t){var n=i,r=o;return i=o=void 0,c=t,a=e.apply(r,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=r}function g(){var e=now$3();if(f(e))return m(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?nativeMin(n,r-(e-c)):n}(e))}function m(e){return s=void 0,h&&i?p(e):(i=o=void 0,a)}function _(){var e=now$3(),n=f(e);if(i=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?p(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=toNumber(t)||0,isObject(n)&&(u=!!n.leading,r=(d="maxWait"in n)?nativeMax(toNumber(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=l=o=s=void 0},_.flush=function(){return void 0===s?a:m(now$3())},_}var numberTag="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==numberTag}var FUNC_ERROR_TEXT="Expected a function";function throttle(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return isObject(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),debounce(e,t,{leading:i,maxWait:t,trailing:o})}const useRTC=exports("af",((e,t,n)=>{if(void 0===n&&(n=!0),t)return n?"SUCCESS"===t.getValidationState()?e.bind(null,t):function(...n){if("SUCCESS"===t.getValidationState())return e.call(null,t,...n);t.onValidationOK(e.bind(null,t,...n))}:e.bind(null,t);{const{webRtc:t}=storeToRefs(useMainStore());return function(...i){const o=()=>{var o;n?"SUCCESS"===(o=null==t?void 0:t.value).getValidationState()?e(o,...i):o.onValidationOK(e.bind(null,o,...i)):e(null==t?void 0:t.value,...i)};null!=t&&t.value?o():watch((()=>null==t?void 0:t.value),(()=>{null!=t&&t.value&&o()}))}}}));function slamReqProcessor$1(e){const t=new Map;let n=0;return{sendSlamReq:(i,o)=>(o.seq_=`index:${++n};${o.seq_||""}`,new Promise((r=>{useRTC((e=>e.publish(i,o,DataChannelType.MSG)),e)(),t.set(`${n}`,r)}))),dealMsg:e=>{const n=dealSlamNotice(e.data||""),i=t.get(`${n.index}`);return i&&2!=n.feedback&&i(n),n}}}function dealSlamNotice(e){const t=e.split(";"),n={};return t.forEach((e=>{if(!e)return;const t=e.split(":");n[t[0]]=""!==t[1]&&IsStringNum(t[1])?Number(t[1]):t[1]})),n}function IsStringNum(e){return!isNaN(Number(e))}const genCommandParam$1=()=>({seq_:"",command_:0,attribute_:0,floor_index_:[],pcdmap_index_:[],topomap_index_:[],node_edge_name_:[],quaternion_x_:0,quaternion_y_:0,quaternion_z_:0,quaternion_w_:0,euler_roll_:0,euler_pitch_:0,euler_yaw_:0,translation_x_:0,translation_y_:0,translation_z_:0,state_1_:[],state_2_:[]});function slamReqParamsFactory$1(){return{genParam_deletePcdMap:(e,t)=>{const n=genCommandParam$1();return n.command_=1,n.attribute_=3,n.floor_index_=[e],n.pcdmap_index_=[t],n},genParam_deleteTopMap:(e,t,n)=>{const i=genCommandParam$1();return i.command_=1,i.attribute_=4,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],i},genParam_queryPcdMapList:()=>{const e=genCommandParam$1();return e.command_=2,e.attribute_=4,console.logBlue("发送获取pcd地图请求",JSON.stringify(e)),e},genParam_queryTopMapList:()=>{const e=genCommandParam$1();return e.command_=2,e.attribute_=5,e},genParam_queryCurrMapInfo:()=>{const e=genCommandParam$1();return e.command_=2,e.attribute_=6,e},genParam_queryNodeEdgeList:(e,t,n)=>{const i=genCommandParam$1();return i.command_=2,i.attribute_=7,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],console.logBlue("发送查询拓扑点边信息和task、topoJson信息求",JSON.stringify(i)),i},genParam_startBuildMap:()=>{const e=genCommandParam$1();return e.command_=3,e},genParam_endBuildMap:(e,t)=>{const n=genCommandParam$1();return n.command_=4,n.floor_index_=[1],n.pcdmap_index_=[e],n.seq_=`pcdName:${t};`,console.logBlue("发送结束建图请求",JSON.stringify(n)),n},genParam_loadMap:(e,t,n="image")=>{const i=genCommandParam$1();return i.command_=5,i.floor_index_=[e],i.pcdmap_index_=[t],i.attribute_="grid"===n?1:0,console.logBlue("发送加载地图请求",`pcdMapIndex ${t}`),i},genParam_enableRelocation:()=>{const e=genCommandParam$1();return e.command_=6,console.logBlue("开启重定位节点",JSON.stringify(e)),e},genParam_initRelocation:(e,t)=>{const n=genCommandParam$1();return n.command_=7,n.quaternion_x_=e.x,n.quaternion_y_=e.y,n.quaternion_z_=e.z,n.quaternion_w_=e.w,n.translation_x_=t.x,n.translation_y_=t.y,n.translation_z_=t.z,console.logBlue("发送重定位初始化",JSON.stringify(n)),n},genParam_saveNodeEdgeToMap:(e,t,n)=>{const i=genCommandParam$1();return i.command_=16,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],i},genParam_loadTopMap:(e,t,n)=>{const i=genCommandParam$1();return i.command_=17,i.floor_index_=[e],i.pcdmap_index_=[t],n&&(i.topomap_index_=[n]),i},genParam_turnOnNavigation:()=>{const e=genCommandParam$1();return e.command_=8,console.logBlue("发送开启导航节点请求",JSON.stringify(e)),e},genParam_singlePointNavigation:e=>{const t=genCommandParam$1();return t.command_=9,t.node_edge_name_=[e],t},genParam_anyPointNavigation:(e,t)=>{const n=genCommandParam$1();return n.command_=9,n.attribute_=1,n.translation_x_=e.x,n.translation_y_=e.y,n.translation_z_=e.z,n.euler_yaw_=t,console.logBlue("发送 任意点导航 请求",t),n},genParam_multiPointCircularNavigation:()=>{const e=genCommandParam$1();return e.command_=10,console.logBlue("发送多点循环导航请求(默认-不⽤给⽬标点信息，逐个点依次前往)"),e},genParam_multiPointCircularNavigationPlus:(e,t)=>{const n=genCommandParam$1();return n.command_=11,t&&(n.attribute_=255),n.node_edge_name_=[...e],console.logBlue("发送多点循环导航(根据接收到的⽬标点列表进⾏循环导航) 请求"),n},genParam_returnCharge:()=>{const e=genCommandParam$1();return e.command_=12,console.logBlue("发送回充请求",JSON.stringify(e)),e},genParam_pauseNavigation:()=>{const e=genCommandParam$1();return e.command_=13,e},genParam_recoverNavigation:()=>{const e=genCommandParam$1();return e.command_=14,e},genParam_returnToStartPoint:()=>{const e=genCommandParam$1();return e.command_=15,e},genParam_closeAll:()=>{const e=genCommandParam$1();return e.command_=99,e},genParam_addNode:(e,t,n,i,o)=>{const r={node_name_:[],node_position_x_:[],node_position_y_:[],node_position_z_:[],node_yaw_:[],node_attribute_:[],undefined_:[],node_state_2_:[],node_state_3_:[]};return i.forEach((e=>{r.node_name_.push(e.name),r.node_position_x_.push(e.position.x),r.node_position_y_.push(e.position.y),r.node_position_z_.push(0),r.node_yaw_.push(void 0===e.yaw?999:e.yaw),r.node_attribute_.push(9e3===e.name?2:9001===e.name?1:0),r.undefined_.push(0),r.node_state_2_.push(t),r.node_state_3_.push(1)})),console.log("添加点信息",{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};${o}`,node_:r}),{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};${o}`,node_:r}},genParam_addEdge:(e,t,n,i)=>{const o={edge_name_:[],start_node_name_:[],end_node_name_:[],edge_length_:[],dog_stats_:[],dog_back_stats_:[],dog_speed_:[],edge_state_:[],edge_state_1_:[],edge_state_2_:[],edge_state_3_:[],edge_state_4_:[]};return i.forEach((e=>{o.edge_name_.push(e.name),o.start_node_name_.push(e.startNodeName),o.end_node_name_.push(e.endNodeName),o.edge_length_.push(e.distance),o.dog_stats_.push(0),o.dog_back_stats_.push(0),o.dog_speed_.push(1),o.edge_state_.push(0),o.edge_state_1_.push(0),o.edge_state_2_.push(0),o.edge_state_3_.push(0),o.edge_state_4_.push(0)})),console.log("添加边信息",{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};`,edge_:o}),{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};`,edge_:o}},genParam_editPCDMapName:(e,t,n)=>{const i=genCommandParam$1();return i.command_=19,i.floor_index_=[e],i.pcdmap_index_=[t],i.seq_=`pcdName:${n};`,console.logBlue("修改地图名称请求",`pcdMapIndex ${t}`),i},genParam_getPCDMapForIndex:(e,t,n="image")=>{const i=genCommandParam$1();return i.command_=20,i.floor_index_=[e],i.pcdmap_index_=[t],i.attribute_="grid"===n?1:0,console.logBlue("加载指定地图请求",`pcdMapIndex ${t}`),i},genParam_setChunksSetting:(e,t)=>{const n=genCommandParam$1();return n.command_=21,n.seq_=`imageChunks:${e};gridChunks:${t};`,n},genParam_mapTypeSetting:(e,t,n=0,i=0)=>{const o=genCommandParam$1();return o.command_=18,o.seq_=`mappingImage:${e};mappingGrid:${t};relocationImage:${n};relocationGrid:${i};`,o},genParam_queryVersion:()=>{const e=genCommandParam$1();return e.command_=22,e}}}const genParam_queryVersion=()=>{const e=genCommandParam$1();return e.command_=22,e};var cryptoJs={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=exports("E",getAugmentedNamespace(__viteBrowserExternal$1));var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==commonjsGlobal&&commonjsGlobal.crypto&&(n=commonjsGlobal.crypto),!n&&"function"==typeof commonjsRequire)try{n=require$$0}catch(err){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(err){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(err){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},s=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=a<<24-(i+r)%4*8}else for(var s=0;s<o;s+=4)t[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),c=r.enc={},u=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(n,t)}},h=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,o=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,r);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(o,d);n=o.splice(0,c),i.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=r.algo={};return r}(Math),n)}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(e,t){var n;e.exports=(n=requireCore(),function(e){var t=n,i=t.lib,o=i.Base,r=i.WordArray,a=t.x64={};a.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var o=e[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),n)}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(e,t){var n;e.exports=(n=requireCore(),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,i=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,i=[],o=0;o<n;o++)i[o>>>2]|=e[o]<<24-o%4*8;t.call(this,i,n)}else t.apply(this,arguments)};i.prototype=e}}(),n.lib.WordArray)}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(e,t){var n;e.exports=(n=requireCore(),function(){var e=n,t=e.lib.WordArray,i=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var r=t[o>>>2]>>>16-o%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var n=e.length,i=[],o=0;o<n;o++)i[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return t.create(i,2*n)}},i.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2){var a=o(t[r>>>2]>>>16-r%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,i=[],r=0;r<n;r++)i[r>>>1]|=o(e.charCodeAt(r)<<16-r%2*16);return t.create(i,2*n)}}}(),n.enc.Utf16)}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(e,t){var n;e.exports=(n=requireCore(),function(){var e=n,t=e.lib.WordArray;function i(e,n,i){for(var o=[],r=0,a=0;a<n;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;o[r>>>2]|=s<<24-r%4*8,r++}return t.create(o,r)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var o=[],r=0;r<n;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<n;s++)o.push(i.charAt(a>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<n.length;r++)o[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return i(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(e,t){var n;e.exports=(n=requireCore(),function(){var e=n,t=e.lib.WordArray;function i(e,n,i){for(var o=[],r=0,a=0;a<n;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;o[r>>>2]|=s<<24-r%4*8,r++}return t.create(o,r)}e.enc.Base64url={stringify:function(e,t=!0){var n=e.words,i=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,l=0;l<4&&a+.75*l<i;l++)r.push(o.charAt(s>>>6*(3-l)&63));var c=o.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e,t=!0){var n=e.length,o=t?this._safe_map:this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<o.length;a++)r[o.charCodeAt(a)]=a}var s=o.charAt(64);if(s){var l=e.indexOf(s);-1!==l&&(n=l)}return i(e,n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),n.enc.Base64url)}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(e,t){var n;e.exports=(n=requireCore(),function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=a.MD5=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r=this._hash.words,a=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],v=e[t+7],b=e[t+8],T=e[t+9],A=e[t+10],y=e[t+11],E=e[t+12],S=e[t+13],C=e[t+14],w=e[t+15],x=r[0],M=r[1],R=r[2],I=r[3];x=c(x,M,R,I,a,7,s[0]),I=c(I,x,M,R,l,12,s[1]),R=c(R,I,x,M,p,17,s[2]),M=c(M,R,I,x,f,22,s[3]),x=c(x,M,R,I,g,7,s[4]),I=c(I,x,M,R,m,12,s[5]),R=c(R,I,x,M,_,17,s[6]),M=c(M,R,I,x,v,22,s[7]),x=c(x,M,R,I,b,7,s[8]),I=c(I,x,M,R,T,12,s[9]),R=c(R,I,x,M,A,17,s[10]),M=c(M,R,I,x,y,22,s[11]),x=c(x,M,R,I,E,7,s[12]),I=c(I,x,M,R,S,12,s[13]),R=c(R,I,x,M,C,17,s[14]),x=u(x,M=c(M,R,I,x,w,22,s[15]),R,I,l,5,s[16]),I=u(I,x,M,R,_,9,s[17]),R=u(R,I,x,M,y,14,s[18]),M=u(M,R,I,x,a,20,s[19]),x=u(x,M,R,I,m,5,s[20]),I=u(I,x,M,R,A,9,s[21]),R=u(R,I,x,M,w,14,s[22]),M=u(M,R,I,x,g,20,s[23]),x=u(x,M,R,I,T,5,s[24]),I=u(I,x,M,R,C,9,s[25]),R=u(R,I,x,M,f,14,s[26]),M=u(M,R,I,x,b,20,s[27]),x=u(x,M,R,I,S,5,s[28]),I=u(I,x,M,R,p,9,s[29]),R=u(R,I,x,M,v,14,s[30]),x=d(x,M=u(M,R,I,x,E,20,s[31]),R,I,m,4,s[32]),I=d(I,x,M,R,b,11,s[33]),R=d(R,I,x,M,y,16,s[34]),M=d(M,R,I,x,C,23,s[35]),x=d(x,M,R,I,l,4,s[36]),I=d(I,x,M,R,g,11,s[37]),R=d(R,I,x,M,v,16,s[38]),M=d(M,R,I,x,A,23,s[39]),x=d(x,M,R,I,S,4,s[40]),I=d(I,x,M,R,a,11,s[41]),R=d(R,I,x,M,f,16,s[42]),M=d(M,R,I,x,_,23,s[43]),x=d(x,M,R,I,T,4,s[44]),I=d(I,x,M,R,E,11,s[45]),R=d(R,I,x,M,w,16,s[46]),x=h(x,M=d(M,R,I,x,p,23,s[47]),R,I,a,6,s[48]),I=h(I,x,M,R,v,10,s[49]),R=h(R,I,x,M,C,15,s[50]),M=h(M,R,I,x,m,21,s[51]),x=h(x,M,R,I,E,6,s[52]),I=h(I,x,M,R,f,10,s[53]),R=h(R,I,x,M,A,15,s[54]),M=h(M,R,I,x,l,21,s[55]),x=h(x,M,R,I,b,6,s[56]),I=h(I,x,M,R,w,10,s[57]),R=h(R,I,x,M,_,15,s[58]),M=h(M,R,I,x,S,21,s[59]),x=h(x,M,R,I,g,6,s[60]),I=h(I,x,M,R,y,10,s[61]),R=h(R,I,x,M,p,15,s[62]),M=h(M,R,I,x,T,21,s[63]),r[0]=r[0]+x|0,r[1]=r[1]+M|0,r[2]=r[2]+R|0,r[3]=r[3]+I|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var r=e.floor(i/4294967296),a=i;n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,i,o,r,a){var s=e+(t&n|~t&i)+o+a;return(s<<r|s>>>32-r)+t}function u(e,t,n,i,o,r,a){var s=e+(t&i|n&~i)+o+a;return(s<<r|s>>>32-r)+t}function d(e,t,n,i,o,r,a){var s=e+(t^n^i)+o+a;return(s<<r|s>>>32-r)+t}function h(e,t,n,i,o,r,a){var s=e+(n^(t|~i))+o+a;return(s<<r|s>>>32-r)+t}t.MD5=r._createHelper(l),t.HmacMD5=r._createHmacHelper(l)}(Math),n.MD5)}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(e,t){var n,i,o,r,a,s,l,c;e.exports=(c=requireCore(),i=(n=c).lib,o=i.WordArray,r=i.Hasher,a=n.algo,s=[],l=a.SHA1=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],l=n[4],c=0;c<80;c++){if(c<16)s[c]=0|e[t+c];else{var u=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=u<<1|u>>>31}var d=(i<<5|i>>>27)+l+s[c];d+=c<20?1518500249+(o&r|~o&a):c<40?1859775393+(o^r^a):c<60?(o&r|o&a|r&a)-1894007588:(o^r^a)-899497514,l=a,a=r,r=o<<30|o>>>2,o=i,i=d}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=r._createHelper(l),n.HmacSHA1=r._createHmacHelper(l),c.SHA1)}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(e,t){var n;e.exports=(n=requireCore(),function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,o=0;o<64;)t(i)&&(o<8&&(s[o]=n(e.pow(i,.5))),l[o]=n(e.pow(i,1/3)),o++),i++}();var c=[],u=a.SHA256=r.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],u=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=c[p-2],_=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=g+c[p-7]+_+c[p-16]}var v=i&o^i&r^o&r,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),T=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+l[p]+c[p];h=d,d=u,u=s,s=a+T|0,a=r,r=o,o=i,i=T+(b+v)|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(u),t.HmacSHA256=r._createHmacHelper(u)}(Math),n.SHA256)}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(e,t){var n,i,o,r,a,s;e.exports=(s=requireCore(),requireSha256(),i=(n=s).lib.WordArray,o=n.algo,r=o.SHA256,a=o.SHA224=r.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=r._createHelper(a),n.HmacSHA224=r._createHmacHelper(a),s.SHA224)}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(e,t){var n;e.exports=(n=requireCore(),requireX64Core(),function(){var e=n,t=e.lib.Hasher,i=e.x64,o=i.Word,r=i.WordArray,a=e.algo;function s(){return o.create.apply(o,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var u=a.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],u=n[5],d=n[6],h=n[7],p=i.high,f=i.low,g=o.high,m=o.low,_=r.high,v=r.low,b=a.high,T=a.low,A=s.high,y=s.low,E=u.high,S=u.low,C=d.high,w=d.low,x=h.high,M=h.low,R=p,I=f,D=g,k=m,L=_,O=v,P=b,N=T,$=A,B=y,F=E,U=S,G=C,V=w,H=x,W=M,z=0;z<80;z++){var j,X,Y=c[z];if(z<16)X=Y.high=0|e[t+2*z],j=Y.low=0|e[t+2*z+1];else{var q=c[z-15],K=q.high,Q=q.low,Z=(K>>>1|Q<<31)^(K>>>8|Q<<24)^K>>>7,J=(Q>>>1|K<<31)^(Q>>>8|K<<24)^(Q>>>7|K<<25),ee=c[z-2],te=ee.high,ne=ee.low,ie=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=c[z-7],ae=re.high,se=re.low,le=c[z-16],ce=le.high,ue=le.low;X=(X=(X=Z+ae+((j=J+se)>>>0<J>>>0?1:0))+ie+((j+=oe)>>>0<oe>>>0?1:0))+ce+((j+=ue)>>>0<ue>>>0?1:0),Y.high=X,Y.low=j}var de,he=$&F^~$&G,pe=B&U^~B&V,fe=R&D^R&L^D&L,ge=I&k^I&O^k&O,me=(R>>>28|I<<4)^(R<<30|I>>>2)^(R<<25|I>>>7),_e=(I>>>28|R<<4)^(I<<30|R>>>2)^(I<<25|R>>>7),ve=($>>>14|B<<18)^($>>>18|B<<14)^($<<23|B>>>9),be=(B>>>14|$<<18)^(B>>>18|$<<14)^(B<<23|$>>>9),Te=l[z],Ae=Te.high,ye=Te.low,Ee=H+ve+((de=W+be)>>>0<W>>>0?1:0),Se=_e+ge;H=G,W=V,G=F,V=U,F=$,U=B,$=P+(Ee=(Ee=(Ee=Ee+he+((de+=pe)>>>0<pe>>>0?1:0))+Ae+((de+=ye)>>>0<ye>>>0?1:0))+X+((de+=j)>>>0<j>>>0?1:0))+((B=N+de|0)>>>0<N>>>0?1:0)|0,P=L,N=O,L=D,O=k,D=R,k=I,R=Ee+(me+fe+(Se>>>0<_e>>>0?1:0))+((I=de+Se|0)>>>0<de>>>0?1:0)|0}f=i.low=f+I,i.high=p+R+(f>>>0<I>>>0?1:0),m=o.low=m+k,o.high=g+D+(m>>>0<k>>>0?1:0),v=r.low=v+O,r.high=_+L+(v>>>0<O>>>0?1:0),T=a.low=T+N,a.high=b+P+(T>>>0<N>>>0?1:0),y=s.low=y+B,s.high=A+$+(y>>>0<B>>>0?1:0),S=u.low=S+U,u.high=E+F+(S>>>0<U>>>0?1:0),w=d.low=w+V,d.high=C+G+(w>>>0<V>>>0?1:0),M=h.low=M+W,h.high=x+H+(M>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(e,t){var n,i,o,r,a,s,l,c;e.exports=(c=requireCore(),requireX64Core(),requireSha512(),i=(n=c).x64,o=i.Word,r=i.WordArray,a=n.algo,s=a.SHA512,l=a.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=s._createHelper(l),n.HmacSHA384=s._createHmacHelper(l),c.SHA384)}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(e,t){var n;e.exports=(n=requireCore(),requireX64Core(),function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.x64.Word,s=t.algo,l=[],c=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,r=0;r<24;r++){for(var s=0,d=0,h=0;h<7;h++){if(1&o){var p=(1<<h)-1;p<32?d^=1<<p:s^=1<<p-32}128&o?o=o<<1^113:o<<=1}u[r]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var h=s.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,o=0;o<i;o++){var r=e[t+2*o],a=e[t+2*o+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(M=n[o]).high^=a,M.low^=r}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var p=0,f=0,g=0;g<5;g++)p^=(M=n[h+5*g]).high,f^=M.low;var m=d[h];m.high=p,m.low=f}for(h=0;h<5;h++){var _=d[(h+4)%5],v=d[(h+1)%5],b=v.high,T=v.low;for(p=_.high^(b<<1|T>>>31),f=_.low^(T<<1|b>>>31),g=0;g<5;g++)(M=n[h+5*g]).high^=p,M.low^=f}for(var A=1;A<25;A++){var y=(M=n[A]).high,E=M.low,S=l[A];S<32?(p=y<<S|E>>>32-S,f=E<<S|y>>>32-S):(p=E<<S-32|y>>>64-S,f=y<<S-32|E>>>64-S);var C=d[c[A]];C.high=p,C.low=f}var w=d[0],x=n[0];for(w.high=x.high,w.low=x.low,h=0;h<5;h++)for(g=0;g<5;g++){var M=n[A=h+5*g],R=d[A],I=d[(h+1)%5+5*g],D=d[(h+2)%5+5*g];M.high=R.high^~I.high&D.high,M.low=R.low^~I.low&D.low}M=n[0];var k=u[s];M.high^=k.high,M.low^=k.low}},_doFinalize:function(){var t=this._data,n=t.words;this._nDataBytes;var i=8*t.sigBytes,r=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,c=[],u=0;u<l;u++){var d=a[u],h=d.high,p=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(h)}return new o.init(c,s)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=r._createHelper(h),t.HmacSHA3=r._createHmacHelper(h)}(Math),n.SHA3)}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(e,t){var n;e.exports=(n=requireCore(),
/** @preserve
      			(c) 2012 by Cédric Mesnil. All rights reserved.

      			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

      			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

      			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      			*/
function(e){var t=n,i=t.lib,o=i.WordArray,r=i.Hasher,a=t.algo,s=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),p=a.RIPEMD160=r.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r,a,p,T,A,y,E,S,C,w,x,M=this._hash.words,R=d.words,I=h.words,D=s.words,k=l.words,L=c.words,O=u.words;for(y=r=M[0],E=a=M[1],S=p=M[2],C=T=M[3],w=A=M[4],n=0;n<80;n+=1)x=r+e[t+D[n]]|0,x+=n<16?f(a,p,T)+R[0]:n<32?g(a,p,T)+R[1]:n<48?m(a,p,T)+R[2]:n<64?_(a,p,T)+R[3]:v(a,p,T)+R[4],x=(x=b(x|=0,L[n]))+A|0,r=A,A=T,T=b(p,10),p=a,a=x,x=y+e[t+k[n]]|0,x+=n<16?v(E,S,C)+I[0]:n<32?_(E,S,C)+I[1]:n<48?m(E,S,C)+I[2]:n<64?g(E,S,C)+I[3]:f(E,S,C)+I[4],x=(x=b(x|=0,O[n]))+w|0,y=w,w=C,C=b(S,10),S=E,E=x;x=M[1]+p+C|0,M[1]=M[2]+T+w|0,M[2]=M[3]+A+y|0,M[3]=M[4]+r+E|0,M[4]=M[0]+a+S|0,M[0]=x},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,r=o.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function _(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(p),t.HmacRIPEMD160=r._createHmacHelper(p)}(),n.RIPEMD160)}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(e,t){var n;e.exports=(n=requireCore(),void function(){var e=n,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,l=a.words,c=0;c<n;c++)s[c]^=1549556828,l[c]^=909522486;r.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(e,t){var n;e.exports=(n=requireCore(),requireSha1(),requireHmac(),function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,r=e.algo,a=r.SHA1,s=r.HMAC,l=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),r=o.create(),a=o.create([1]),l=r.words,c=a.words,u=n.keySize,d=n.iterations;l.length<u;){var h=i.update(t).finalize(a);i.reset();for(var p=h.words,f=p.length,g=h,m=1;m<d;m++){g=i.finalize(g),i.reset();for(var _=g.words,v=0;v<f;v++)p[v]^=_[v]}r.concat(h),c[0]++}return r.sigBytes=4*u,r}});e.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)}}(),n.PBKDF2)}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(e,t){var n;e.exports=(n=requireCore(),requireSha1(),requireHmac(),function(){var e=n,t=e.lib,i=t.Base,o=t.WordArray,r=e.algo,a=r.MD5,s=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,r=i.hasher.create(),a=o.create(),s=a.words,l=i.keySize,c=i.iterations;s.length<l;){n&&r.update(n),n=r.update(e).finalize(t),r.reset();for(var u=1;u<c;u++)n=r.finalize(n),r.reset();a.concat(n)}return a.sigBytes=4*l,a}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),n.EvpKDF)}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(e,t){var n;e.exports=(n=requireCore(),requireEvpkdf(),void(n.lib.Cipher||function(e){var t=n,i=t.lib,o=i.Base,r=i.WordArray,a=i.BufferedBlockAlgorithm,s=t.enc;s.Utf8;var l=s.Base64,c=t.algo.EvpKDF,u=i.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:_}return function(t){return{encrypt:function(n,i,o){return e(i).encrypt(t,n,i,o)},decrypt:function(n,i,o){return e(i).decrypt(t,n,i,o)}}}}()});i.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},h=i.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var t=h.extend();function n(t,n,i){var o,r=this._iv;r?(o=r,this._iv=e):o=this._prevBlock;for(var a=0;a<i;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,o=i.blockSize;n.call(this,e,t,o),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,o=i.blockSize,r=e.slice(t,t+o);i.decryptBlock(e,t),n.call(this,e,t,o),this._prevBlock=r}}),t}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,o=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(o);var l=r.create(a,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:f}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(i,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var g=i.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?r.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=r.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},_=i.SerializableCipher=o.extend({cfg:o.extend({format:m}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i),r=o.finalize(t),a=o.cfg;return g.create({ciphertext:r,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,n,i){i||(i=r.random(8));var o=c.create({keySize:t+n}).compute(e,i),a=r.create(o.words.slice(t),4*n);return o.sigBytes=4*t,g.create({key:o,iv:a,salt:i})}},b=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:v}),encrypt:function(e,t,n,i){var o=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize);i.iv=o.iv;var r=_.encrypt.call(this,e,t,o.key,i);return r.mixIn(o),r},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var o=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=o.iv,_.decrypt.call(this,e,t,o.key,i)}})}()))}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,i){var o,r=this._iv;r?(o=r.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize;t.call(this,e,n,o,i),this._prevBlock=e.slice(n,n+o)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize,r=e.slice(n,n+o);t.call(this,e,n,o,i),this._prevBlock=r}}),e}(),n.mode.CFB)}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(e,t){var n,i,o;e.exports=(o=requireCore(),requireCipherCore(),o.mode.CTR=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter;o&&(r=this._counter=o.slice(0),this._iv=void 0);var a=r.slice(0);n.encryptBlock(a,0),r[i-1]=r[i-1]+1|0;for(var s=0;s<i;s++)e[t+s]^=a[s]}}),n.Decryptor=i,n),o.mode.CTR)}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),
/** @preserve
      			 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
      			 * derived from CryptoJS.mode.CTR
      			 * Jan Hruby jhruby.web@gmail.com
      			 */
n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}return e}function i(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var o=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),i(a);var s=a.slice(0);n.encryptBlock(s,0);for(var l=0;l<o;l++)e[t+l]^=s[l]}});return e.Decryptor=o,e}(),n.mode.CTRGladman)}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(e,t){var n,i,o;e.exports=(o=requireCore(),requireCipherCore(),o.mode.OFB=(n=o.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var a=0;a<i;a++)e[t+a]^=r[a]}}),n.Decryptor=i,n),o.mode.OFB)}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(e,t){var n,i;e.exports=(i=requireCore(),requireCipherCore(),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),i.mode.ECB)}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,i=4*t,o=i-n%i,r=n+o-1;e.clamp(),e.words[r>>>2]|=o<<24-r%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.Iso10126={pad:function(e,t){var i=4*t,o=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},n.pad.ZeroPadding)}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(e,t){var n,i,o,r;e.exports=(r=requireCore(),requireCipherCore(),i=(n=r).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},r.format.Hex)}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(e,t){var n;e.exports=(n=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,o=[],r=[],a=[],s=[],l=[],c=[],u=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var f=i^i<<1^i<<2^i<<3^i<<4;f=f>>>8^255&f^99,o[n]=f,r[f]=n;var g=e[n],m=e[g],_=e[m],v=257*e[f]^16843008*f;a[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,l[n]=v<<8|v>>>24,c[n]=v,v=16843009*_^65537*m^257*g^16843008*n,u[f]=v<<24|v>>>8,d[f]=v<<16|v>>>16,h[f]=v<<8|v>>>24,p[f]=v,n?(n=g^e[e[e[_^g]]],i^=e[e[i]]):n=i=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],a=0;a<i;a++)a<n?r[a]=t[a]:(c=r[a-1],a%n?n>6&&a%n==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=o[(c=c<<8|c>>>24)>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=f[a/n|0]<<24),r[a]=r[a-n]^c);for(var s=this._invKeySchedule=[],l=0;l<i;l++){if(a=i-l,l%4)var c=r[a];else c=r[a-4];s[l]=l<4||a<=4?c:u[o[c>>>24]]^d[o[c>>>16&255]]^h[o[c>>>8&255]]^p[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,l,c,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,o,r,a,s){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<l;f++){var g=i[c>>>24]^o[u>>>16&255]^r[d>>>8&255]^a[255&h]^n[p++],m=i[u>>>24]^o[d>>>16&255]^r[h>>>8&255]^a[255&c]^n[p++],_=i[d>>>24]^o[h>>>16&255]^r[c>>>8&255]^a[255&u]^n[p++],v=i[h>>>24]^o[c>>>16&255]^r[u>>>8&255]^a[255&d]^n[p++];c=g,u=m,d=_,h=v}g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[p++],m=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[p++],_=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[p++],v=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++],e[t]=g,e[t+1]=m,e[t+2]=_,e[t+3]=v},keySize:8});e.AES=t._createHelper(g)}(),n.AES)}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(e,t){var n;e.exports=(n=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var e=n,t=e.lib,i=t.WordArray,o=t.BlockCipher,r=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=a[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],r=0;r<16;r++){var c=o[r]=[],u=l[r];for(n=0;n<24;n++)c[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var i=0;i<16;i++){for(var o=n[i],r=this._lBlock,a=this._rBlock,s=0,l=0;l<8;l++)s|=c[l][((a^o[l])&u[l])>>>0];this._lBlock=a,this._rBlock=r^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=o._createHelper(d);var f=r.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(i.create(t)),this._des2=d.createEncryptor(i.create(n)),this._des3=d.createEncryptor(i.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(f)}(),n.TripleDES)}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(e,t){var n;e.exports=(n=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;o=0;for(var r=0;o<256;o++){var a=o%n,s=t[a>>>2]>>>24-a%4*8&255;r=(r+i[o]+s)%256;var l=i[o];i[o]=i[r],i[r]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,n=this._j,i=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[n],e[n]=r,i|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,i}e.RC4=t._createHelper(o);var a=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});e.RC4Drop=t._createHelper(a)}(),n.RC4)}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(e,t){var n;e.exports=(n=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=[],r=[],a=[],s=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)o[n]^=i[n+4&7];if(t){var r=t.words,a=r[0],s=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(o[0]^=c,o[1]^=d,o[2]^=u,o[3]^=h,o[4]^=c,o[5]^=d,o[6]^=u,o[7]^=h,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,s=i>>>16,l=((o*o>>>17)+o*s>>>15)+s*s,c=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(s)}(),n.Rabbit)}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(e,t){var n;e.exports=(n=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,o=[],r=[],a=[],s=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)l.call(this);for(o=0;o<8;o++)i[o]^=n[o+4&7];if(t){var r=t.words,a=r[0],s=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(i[0]^=c,i[1]^=d,i[2]^=u,i[3]^=h,i[4]^=c,i[5]^=d,i[6]^=u,i[7]^=h,o=0;o<4;o++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)r[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,s=i>>>16,l=((o*o>>>17)+o*s>>>15)+s*s,c=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(s)}(),n.RabbitLegacy)}(rabbitLegacy)),rabbitLegacy.exports}!function(e,t){var n;e.exports=(n=requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),n)}(cryptoJs),requireAes(),requireEncBase64();var encUtf8={exports:{}};!function(e,t){e.exports=requireCore().enc.Utf8}(encUtf8);var md5Exports=requireMd5();const MD5=getDefaultExportFromCjs(md5Exports);requireModeEcb();var padPkcs7={exports:{}};function encryptByMd5(e){return MD5(e).toString()}!function(e,t){var n;e.exports=(n=requireCore(),requireCipherCore(),n.pad.Pkcs7)}(padPkcs7);const ansi_up=new AnsiUp;function appRTCSetting(e,t,n){const i=useDeviceStore(),{series:o,mode:r,sportMode:a}=storeToRefs(i);e.onConnectionStateChange(((e,n)=>{let i=RTCPeerConnectionStateMap.get(e),o="0";switch(e){case"connecting":default:o="0";break;case"connected":case"completed":o="1";break;case"failed":case"disconnected":case"closed":o="-99";break;case"error":o="-100",i=n}webToApp("webSendDeviceState",{state:e,message:i,code:o}),["disconnected","failed","error","closed"].includes(e)&&t()})),e.onValidationOK((()=>{e.subscribe(RTC_TOPIC.LOW_STATE),e.subscribe(RTC_TOPIC.LF_SPORT_MOD_STATE),e.subscribe(RTC_TOPIC.SLAM_QT_NOTICE),e.subscribe(RTC_TOPIC.SLAM_PC_TO_IMAGE_LOCAL),e.subscribe(RTC_TOPIC.SLAM_RELOCATION_ODOMETRY),e.subscribe(RTC_TOPIC.SLAM_QUERY_ALL_NODE),e.subscribe(RTC_TOPIC.SLAM_QUERY_ALL_EDGE),"G1"==o.value&&(e.subscribe(RTC_TOPIC.G1_ARM_ACTION_STATE),e.subscribe(RTC_TOPIC.MAIN_BOARD_STATE),e.subscribe(RTC_TOPIC.BMS_STATE)),"H1"==o.value&&"-2"==r.value&&(e.subscribe(RTC_TOPIC.MAIN_BOARD_STATE),e.subscribe(RTC_TOPIC.BMS_STATE))}));const s=generateRTCMessageFilter(e,i);e.onMessage((e=>{var t;null===(t=s[e.type])||void 0===t||t.call(s,e)}));const l=()=>{console.logWithTime("开始发送网络类型请求");const t=(new Date).valueOf()%2**31+Math.floor(1e3*Math.random());e.publish("",{req_type:"public_network_status",uuid:t.toString()},DataChannelType.RTC_INNER_REQ).then((t=>{var n;console.logGreen("网络连接类型数据",t);const o=null===(n=t.info)||void 0===n?void 0:n.status;if(console.logGreen(`status状态${o}`),o&&"Undefined"!==o&&"NetworkStatus.DISCONNECTED"!==o){console.logGreen("开始网络分析");const t="NetworkStatus.ON_4G_CONNECTED"===o?"4G":"NetworkStatus.ON_WIFI_CONNECTED"===o?e.hasIceServer()?"STA-T":"STA-L":o;console.logGreen(`分析结果${t}`),webToApp("webSendCmdRes",{topic:"public_network_status",data:JSON.stringify({status:t}),id:"0"}),console.logGreen("发送连接类型给APP---\x3e",t),i.updateNetworkStats(t)}else window.setTimeout(l,500)}))},c=()=>{console.logGreen("RTC 连接成功，开始获取网络连接状态");const e=n.value;console.logGreen("当前是 "+("1"===e?"外网模式":"0"===e?"内网模式":"本地开发")),"0"===e?(webToApp("webSendCmdRes",{topic:"public_network_status",data:JSON.stringify({status:"AP"}),id:"0"}),console.log("发送连接类型给APP---\x3eAP"),i.updateNetworkStats("AP")):l()},u=t=>{if(RTC_TOPIC.SLAM_QT_NOTICE!==t.topic)return;if(["H1","G1"].includes(o.value))return;const n=dealSlamNotice(t.data||"");if(console.logRed("slam 版本号",n,n.version),9999==n.index){const t="B2"===o.value&&a.value.includes("-w")?"1.0.11":"1.1.2.0";webToApp("webSendSlamIsOK",{value:1==n.feedback&&n.version&&compareVersions(n.version,t)>=0?"1":"0"}),e.removeMessageListen(u)}};e.onValidationOK((()=>{c(),(()=>{e.onMessage(u);const t=genParam_queryVersion();t.seq_=`index:9999;${t.seq_||""}`,e.publish(RTC_TOPIC.SLAM_QT_COMMAND,t,DataChannelType.MSG)})()})),listenAppToWeb("appUpdateNetwork",(e=>{n.value=e,c()})),console.log("rtc设置完成")}function generateRTCMessageFilter(e,t){return{[DataChannelType.VALIDATION]:fn_VALIDATION.bind(null,e),[DataChannelType.ERR]:fn_ERR.bind(null,e),[DataChannelType.MSG]:fn_MSG.bind(null,t),[DataChannelType.ADD_ERROR]:fn_ERR_OPERA.bind(null,t),[DataChannelType.RM_ERROR]:fn_ERR_OPERA.bind(null,t),[DataChannelType.ERRORS]:fn_ERR_OPERA.bind(null,t),[DataChannelType.RTC_REPORT]:fn_REPORT.bind(null,e),[DataChannelType.RTC_INNER_REQ]:fn_INNER_REQ.bind(null,e),[DataChannelType.SUBSCRIBE]:void 0,[DataChannelType.UNSUBSCRIBE]:void 0,[DataChannelType.REQUEST]:void 0,[DataChannelType.RESPONSE]:void 0,[DataChannelType.VID]:void 0,[DataChannelType.AUD]:void 0,[DataChannelType.HEARTBEAT]:void 0}}const encryptKey=e=>hexToBase64(encryptByMd5(`Unitree${"B2"===useDeviceStore().series?"B2":"Go2"}_${e}`));let RTC_ValidationKey="";function fn_VALIDATION(e,t){"Validation Ok."===t.data?e.validationOK():(RTC_ValidationKey=t.data,e.publish("",encryptKey(t.data),DataChannelType.VALIDATION))}function fn_ERR(e,t){"Validation Needed."===t.info&&e.publish("",encryptKey(RTC_ValidationKey),DataChannelType.VALIDATION)}const throttleFnMap=new Map,throttleFn=(e,t,n)=>{const i=throttleFnMap.get(t);if(i)i(e);else{const i=throttle((e=>e&&e()),n||1e3);throttleFnMap.set(t,i),i(e)}};function fn_MSG(e,t){if(t.topic)switch(t.topic){case RTC_TOPIC.LOW_STATE:throttleFn((()=>e.updateInfo(t.data)),RTC_TOPIC.LOW_STATE,1e3);break;case RTC_TOPIC.MAIN_BOARD_STATE:throttleFn((()=>{e.updateG1MainBoardState(t.data)}),RTC_TOPIC.MAIN_BOARD_STATE,1e3);break;case RTC_TOPIC.BMS_STATE:throttleFn((()=>{e.updateG1BmsState(t.data)}),RTC_TOPIC.BMS_STATE,1e3);break;case RTC_TOPIC.G1_ARM_ACTION_STATE:throttleFn((()=>{e.updateG1ArmState(t.data)}),RTC_TOPIC.G1_ARM_ACTION_STATE,300);break;case RTC_TOPIC.UWB_STATE:case RTC_TOPIC.ULIDAR_STATE:case RTC_TOPIC.SERVICE_STATE:case RTC_TOPIC.GPT_FEEDBACK:case RTC_TOPIC.G1_DEX3_LEFT_STATE:case RTC_TOPIC.G1_DEX3_RIGHT_STATE:case RTC_TOPIC.DOUBLE_IMU:case RTC_TOPIC.SECONDARY_IMU:case RTC_TOPIC.SECONDARY_IMU_LF:case RTC_TOPIC.LOG_SYSTEM_OUTBOUND:webToApp("webSendCmdRes",{topic:t.topic,data:"string"==typeof t.data?t.data:JSON.stringify(t.data),id:"0"});break;case RTC_TOPIC.SELF_TEST:webToApp("webSendCmdRes",{topic:t.topic,data:`<span style="color: rgb(255,255,255)">${ansi_up.ansi_to_html(t.data)}</span>`,id:"0"});break;case RTC_TOPIC.LF_SPORT_MOD_STATE:"G1"!==e.series&&e.updateSportSpeed(Math.abs(t.data.velocity[0])),throttleFn((()=>{e.updateSportState({mode:t.data.mode||t.data.fsm_id,g1_task_id:t.data.task_id,gaitType:t.data.gait_type,dance:t.data.progress,continuousGait:1&t.data.error_code,bodyHeight:t.data.body_height,footRaiseHeight:t.data.foot_raise_height,speedLevel:t.data.progress,errorCode:t.data.error_code})}),RTC_TOPIC.LF_SPORT_MOD_STATE,300);break;case RTC_TOPIC.ROBOTODOM:throttleFn((()=>e.updateRobotOdom(t.data.pose)),RTC_TOPIC.ROBOTODOM,300);break;case RTC_TOPIC.MULTIPLE_STATE:throttleFn((()=>{e.updateMultipleState(JSON.parse(t.data))}),RTC_TOPIC.MULTIPLE_STATE,1e3)}}function fn_ERR_OPERA(e,t){webToApp("webSendCmdRes",{topic:t.type,data:JSON.stringify(t.data),id:"0"}),e.updateErrors({type:t.type,data:t.data})}function fn_REPORT(e,t){console.log("===接收到上报",t),webToApp("webSendCmdRes",{topic:t.type,data:JSON.stringify(t.info),id:"0"})}function fn_INNER_REQ(e,t){"rtt_probe_send_from_mechine"===t.info.req_type&&e.publishWithoutCb("",t.info,DataChannelType.RTC_INNER_REQ)}function appRTCStart(e,t,n,i){"1"===i?(console.log("当前是外网模式，向APP发送请求turnserver用户名密码"),webToApp("webReqTurnServerInfo","")):"0"===i&&(console.log("当前是AP模式，本地开始生成SDP"),e.init(n.value,!1).then((()=>{const t=_objectSpread({},e.localDescriptionCache);webToApp("webSendRTCSessionDescription",t),console.log("发送给SDP 给 APP",t)})).catch((e=>{console.error("RTC初始化失败",e),t({state:"error",message:"Web端本地SDP创建失败",code:"-100"})})))}let videoTransformWorker;function initAppSetting(e,t){const n=useMainStore(),i=useDeviceStore(),{series:o}=storeToRefs(i),r=ref(e||"");console.log("-------------🚥开始初始化APP🚥-------------");const a=new WebRTC;function s(e){e&&webToApp("webSendDeviceState",e),console.log("🔴 开始刷新SDP，先问APP获取网络状态 🔴"),a.close(),window.setTimeout((()=>{i.updateInfo({})}),1e3),webToApp("webReqAPPNetwork","",(e=>{const t=JSON.parse(e);console.logGreen("收到APP推送的当前网络模式",t.network),r.value=t.network,console.logGray("收到了app的系列",t.series),i.updateSeries(t.series||"B2"),"1"===t.network?(console.log("当前是外网模式，向APP发送请求turnserver用户名密码"),webToApp("webReqTurnServerInfo","")):"0"===t.network&&(console.log("当前是AP模式，本地开始生成SDP"),a.init(t.series,!1).then((()=>{const e=_objectSpread({},a.localDescriptionCache);console.log("刷新SDP完成，发送给APP新的SDP"),webToApp("webSendRTCSessionDescription",e)})).catch((e=>{console.log("初始化失败",e),window.setTimeout(s,500)})))}))}appRTCSetting(a,s,r),appRTCSetting$1(a,s,t,o),console.log("即将开始第一次连接"),appRTCStart(a,s,o,e),n.updateWebRTC(a)}videoTransformWorker=new Worker(new URL("/assets/videoTransform.worker-BhlxVsgU.js",module.meta.url)),videoTransformWorker.onmessage=e=>{console.log("录制完成"),ToastMsg(t("videoEnd")),webToApp("takeVideo",{data:e.data})},window.videoTransformWorker=videoTransformWorker;const _hoisted_1$J=createStaticVNode('<svg aria-hidden="true"><defs><polygon id="path-1" points="0 0 48 0 48 75.0634406 0 75.0634406"></polygon><linearGradient id="linearGradient-3" x1="47.4027699%" y1="6.60366861%" x2="54.0895808%" y2="80.2169048%"><stop stop-color="#98A5F5" offset="0%"></stop><stop stop-color="#495ABF" offset="100%"></stop></linearGradient><polygon id="path-4" points="0 0 16.2474537 0 16.2474537 15.7482241 0 15.7482241"></polygon><linearGradient id="PSgrad_0" x1="0%" x2="76.604%" y1="64.279%" y2="0%"><stop offset="0%" stop-color="rgb(102,231,190)" stop-opacity="1"></stop><stop offset="100%" stop-color="rgb(104,121,228)" stop-opacity="1"></stop></linearGradient></defs></svg>',1),_sfc_main$N=defineComponent({__name:"App",setup(e){const t=useRouter(),n=getWindowUrlParams(),i=useMainStore(),o=useDeviceStore(),r=ref("/operation"),a=function(){n.w&&n.h?i.updateWindowInfo(n.w,n.h):i.updateWindowInfo(window.innerWidth,window.innerHeight)};return a(),window.addEventListener("resize",a),onBeforeMount((()=>{webToApp("webReqAPPNetwork","",(e=>{const t=JSON.parse(e);console.log("接收到第一次的网络状态信息，"+t.network),console.logGray("收到了app的系列",t.series),o.updateSeries(t.series||"B2"),initAppSetting(t.network,r)}))})),listenAppToWeb("appSendRoute",(e=>e?(r.value=e.url,t.push({path:e.url,query:n}),function(e){var t,n;o.updateSN(e.sn),o.updateMode(e.mode),o.updateTopLeft(e.topLeft),o.updateSportMode(e.sportmode),console.log("设备型号",e.mode),console.log("设备sn",e,e.sn),i.updateLanguage(e.language),i.updateUserId(e.userid),e.debugger&&"1"==e.debugger?null===(t=window.vconsole)||void 0===t||t.showSwitch():null===(n=window.vconsole)||void 0===n||n.hideSwitch()}(e),"跳转成功"):"请传入路由参数")),listenAppToWeb("appSendWebviewState",(e=>{"0"===e&&i.updateWebInView(!1),"1"===e&&i.updateWebInView(!0)})),i.updateLanguage("zh"),(e,t)=>{const n=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[createVNode(n,null,{default:withCtx((({Component:e,route:t})=>[(openBlock(),createBlock(KeepAlive,null,[t.meta.keepAlive?(openBlock(),createBlock(resolveDynamicComponent(e),{key:t.name})):createCommentVNode("",!0)],1024)),t.meta.keepAlive?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(e),{key:t.name}))])),_:1}),_hoisted_1$J],64)}}});function registerAppErrorLister(e){window.onerror=function(e,t,n,i,o){console.log("捕获到异常：",{message:e,source:t,lineno:n,colno:i,error:o})},window.addEventListener("unhandledrejection",(function(e){e.reason&&"TypeError"===e.reason.name&&"Importing a module script failed."===e.reason.message&&window.location.reload()})),e&&(e.config.errorHandler=(e,t,n)=>{throw console.log("Vue错误",e,t,n),e})}function getPackageTime(){return new Promise((e=>{const t=new URL("./time.json",module.meta.url).href,n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="blob",n.onload=function(){if(200==this.status){const t=new FileReader;t.onload=function(){e(t.result)},t.readAsText(this.response)}},n.send()}))}const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(e,t,n){let i=Promise.resolve();function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then((t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))},_withScopeId$j=e=>(pushScopeId("data-v-c1b4bb76"),e=e(),popScopeId(),e),_hoisted_1$I={class:"index-wrapper"},_hoisted_2$D=_withScopeId$j((()=>createBaseVNode("button",{class:"btn"},"GO >",-1))),textData="\n这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文\n这是一段中文这是一段中文这是一段中文这是一段中文这是一这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是阿德尽快回复不涉及放大手机卡合法刚发合计数搭嘎放大手机啊刚发萨达合计开发过手打看哈激发干撒登记开发很尬受打击发哈水电费会撒娇喝咖啡的洒基合法干撒登记很发达撒激发手打国际法凯撒电极法国际卡大健康好巴食空间分布撒激发随机发受打击合法巴萨几哈不打击是吧传达会手机茶吧机色卡本一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文\n这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是阿德尽快回复不涉及放大手机卡合法刚发合计数搭嘎放大手机啊刚发萨达合计开发过手打看哈激发干撒登记开发很尬受打击发哈水电费会撒娇喝咖啡的洒基合法干撒登记很发达撒激发手打国际法凯撒电极法国际卡大健康好巴食空间分布撒激发随机发受打击合法巴萨几哈不打击是吧传达会手机茶吧机色卡本一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文\n这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是阿德尽快回复不涉及放大手机卡合法刚发合计数搭嘎放大手机啊刚发萨达合计开发过手打看哈激发干撒登记开发很尬受打击发哈水电费会撒娇喝咖啡的洒基合法干撒登记很发达撒激发手打国际法凯撒电极法国际卡大健康好巴食空间分布撒激发随机发受打击合法巴萨几哈不打击是吧传达会手机茶吧机色卡本一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文这是一段中文",_sfc_main$M=defineComponent({__name:"Index",setup:e=>(console.logRed(textData.length),onMounted((()=>{})),(e,t)=>{const n=resolveComponent("RouterLink");return openBlock(),createElementBlock("div",_hoisted_1$I,[createVNode(n,{to:"/operation"},{default:withCtx((()=>[_hoisted_2$D])),_:1})])})}),Index=_export_sfc(_sfc_main$M,[["__scopeId","data-v-c1b4bb76"]]),_hoisted_1$H={"aria-hidden":"true"},_hoisted_2$C=["xlink:href","fill"],__default__=defineComponent({name:"SvgIcon"}),_sfc_main$L=defineComponent(_objectSpread(_objectSpread({},__default__),{},{props:{name:{},color:{default:"currentColor"}},setup(e){const t=e,n=computed((()=>`#icon/${t.name}`));return(e,t)=>(openBlock(),createElementBlock("svg",_hoisted_1$H,[createBaseVNode("use",{"xlink:href":unref(n),fill:e.color},null,8,_hoisted_2$C)]))}}));class Rocker{constructor(e,t){return _defineProperty(this,"canvasId",void 0),_defineProperty(this,"x",void 0),_defineProperty(this,"y",void 0),_defineProperty(this,"w",void 0),_defineProperty(this,"h",void 0),_defineProperty(this,"D",void 0),_defineProperty(this,"d",void 0),_defineProperty(this,"scale",void 0),_defineProperty(this,"scale_w",void 0),_defineProperty(this,"scale_h",void 0),_defineProperty(this,"scale_d",void 0),_defineProperty(this,"scale_D",void 0),_defineProperty(this,"textures",void 0),_defineProperty(this,"spriteData",void 0),_defineProperty(this,"centerX",void 0),_defineProperty(this,"centerY",void 0),_defineProperty(this,"centerCanvasX",void 0),_defineProperty(this,"centerCanvasY",void 0),_defineProperty(this,"centerScreenX",void 0),_defineProperty(this,"centerScreenY",void 0),_defineProperty(this,"isActive",void 0),_defineProperty(this,"pointerId",void 0),_defineProperty(this,"angle",void 0),_defineProperty(this,"lightD",void 0),_defineProperty(this,"lightX",void 0),_defineProperty(this,"lightY",void 0),_defineProperty(this,"lightCenterX",void 0),_defineProperty(this,"lightCenterY",void 0),_defineProperty(this,"isShowLight",void 0),_defineProperty(this,"flexible",void 0),_defineProperty(this,"event",void 0),_defineProperty(this,"canvas",void 0),_defineProperty(this,"ctx",void 0),_defineProperty(this,"actionFn",void 0),_defineProperty(this,"actionStopFn",void 0),_defineProperty(this,"disable",void 0),this.canvasId=e,this.w=0,this.h=0,this.D=180,this.d=80,this.scale=1,this.scale_w=0,this.scale_h=0,this.scale_d=0,this.scale_D=0,this.isShowLight=!0,this.flexible=!1,this.textures=new Map,t&&Object.assign(this,t),this.spriteData=new Map,this.x=0,this.y=0,this.centerX=0,this.centerY=0,this.centerCanvasX=0,this.centerCanvasY=0,this.centerScreenX=0,this.centerScreenY=0,this.isActive=!1,this.pointerId=0,this.angle=-90*Math.PI/180,this.event=new Map,this.lightD=0,this.lightX=0,this.lightY=0,this.lightCenterX=0,this.lightCenterY=0,this.disable=!1,this.init(),this}hidpi_canvas(){const{ctx:e,canvas:t}=this;if(!t)return window.devicePixelRatio;const n=(null==e?void 0:e.backingStorePixelRatio)||(null==e?void 0:e.webkitBackingStorePixelRatio)||(null==e?void 0:e.mozBackingStorePixelRatio)||(null==e?void 0:e.msBackingStorePixelRatio)||(null==e?void 0:e.oBackingStorePixelRatio)||(null==e?void 0:e.backingStorePixelRatio)||1,i=(window.devicePixelRatio||1)/n;return i>1&&(t.style.height=t.height+"px",t.style.width=t.width+"px",t.width*=i,t.height*=i),i}init(){if(this.canvas=document.getElementById(this.canvasId),!this.canvas)return;const e=this.hidpi_canvas();this.ctx=this.canvas.getContext("2d"),this.isShowLight&&this.growCanvas(),this.w=this.canvas.width/e,this.h=this.canvas.height/e,window.addEventListener("resize",this.reset.bind(this)),this.reset(),this.load().then(this.render.bind(this)),this.canvas.addEventListener("webglcontextlost",(e=>{e.preventDefault(),this.init()}),!1)}load(){const{textures:e,spriteData:t}=this;if(!e)return Promise.reject();let n=0;return new Promise(((i,o)=>{for(const r of e.keys()){const a=new Image;null==t||t.set(r,a),a.onload=()=>{++n==e.size&&i()},a.onerror=()=>{console.error(`rocker.ts: ==> 图片：${a.src}  加载失败`),o()},a.src=e.get(r)||""}}))}isExternalLink(e){return!!e&&/^https?:\/\//.test(e)}growCanvas(){if(!this.canvas)return;const e=this.canvas.width,t=this.canvas.height;this.canvas.setAttribute("width",""+1.2*e),this.canvas.setAttribute("height",""+1.2*t)}reset(){if(!this.canvas)return;this.scale_w=this.w*this.scale,this.scale_h=this.w*this.scale,this.D=this.w>=this.h?this.h:this.w,this.isShowLight&&(this.D=this.D/1.2),this.scale_D=this.D*this.scale,this.scale_d=this.d*this.scale;const e=this.canvas.getBoundingClientRect();this.x=e.x,this.y=e.y,this.centerScreenX=this.x+this.scale_w/2,this.centerScreenY=this.y+this.scale_h/2,this.isShowLight&&(this.lightD=this.D+4,this.lightX=(this.w-this.lightD)/2,this.lightY=(this.h-this.lightD)/2,this.lightCenterX=this.lightX+this.lightD/2,this.lightCenterY=this.lightY+this.lightD/2)}drawBackground(){const{w:e,h:t,ctx:n}=this;n.fillStyle="rgb(24,13,50)",n.fillRect(0,0,e,t)}render(){const{ctx:e,w:t,h:n,d:i}=this;if(!e)return;this.centerX=this.centerCanvasX=(t-i)/2,this.centerY=this.centerCanvasY=(n-i)/2,this.draw();const o=e.canvas;return o.addEventListener("pointerdown",this._mousedown.bind(this),!1),o.addEventListener("pointermove",this._mousemove.bind(this),!1),o.addEventListener("pointercancel",this._mouseup.bind(this),!1),o.addEventListener("pointerup",this._mouseup.bind(this),!1),this}on(e,t){var n;null===(n=this.event)||void 0===n||n.set(e,((...e)=>t&&t([...e])))}_mousedown(e){const{scale_d:t,flexible:n,disable:i}=this;if(!i){if(this.reset(),n)this.pointerId=e.pointerId,this.isActive=!0;else{const n=e.clientX,i=e.clientY,o=Math.abs(this.centerScreenX-n),r=Math.abs(this.centerScreenY-i);Math.sqrt(Math.pow(o,2)+Math.pow(r,2))<=t/2&&(this.isActive=!0,this.pointerId=e.pointerId)}return e.stopPropagation(),!1}}_mousemove(e){if(!this.disable){if(this.isActive&&e.pointerId===this.pointerId){const t=e.clientX,n=e.clientY;this.limitToCircle({x:t,y:n},this.D/2-this.d/2)}return e.preventDefault(),e.stopPropagation(),!1}}_mouseup(e){if(!this.disable)return this.resetMouseUp(),e.stopPropagation(),!1}resetMouseUp(){const{w:e,h:t,d:n,actionStopFn:i}=this;this.isActive=!1,this.centerX=(e-n)/2,this.centerY=(t-n)/2,this.angle=-90*Math.PI/180,this.draw(),i&&i()}limitToCircle(e,t){var n;const{centerScreenX:i,centerScreenY:o,centerCanvasX:r,centerCanvasY:a,actionFn:s}=this,l=e.x-i,c=e.y-o,u=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));this.angle=Math.atan2(c,l),null!==(n=this.event)&&void 0!==n&&n.has("change")&&this.event.get("change")(this.angle,Math.min(u,t)/t),u<t?(this.centerX=e.x-i+r,this.centerY=e.y-o+a):(this.centerX=r+Math.cos(this.angle)*t,this.centerY=a+Math.sin(this.angle)*t),s&&s(this.angle,u<t?u/t:1,u,t),this.draw()}drawDpiBegin(){const{canvas:e,ctx:t,w:n,h:i}=this;if(!e||!t)return;t.save();const o=window.devicePixelRatio;e.setAttribute("width",""+n*o),e.setAttribute("height",""+i*o),e.style.width=n+"px",e.style.height=i+"px",t.scale(o,o)}drawDpiEnd(){var e;null===(e=this.ctx)||void 0===e||e.restore()}draw(){var e;this.drawDpiBegin(),null===(e=this.ctx)||void 0===e||e.clearRect(0,0,this.w,this.y),this.drawOuter(),this.drawCenter(),!this.isShowLight||!this.isActive||this.drawLight(),this.drawDpiEnd()}drawOuter(){const{ctx:e,spriteData:t,D:n,w:i,h:o}=this;e&&(e.save(),e.drawImage((null==t?void 0:t.get("rocker0"))||new Image,(i-n)/2,(o-n)/2,n,n),e.restore())}drawCenter(){const{ctx:e,spriteData:t,d:n,centerX:i,centerY:o}=this;e&&(e.save(),e.drawImage((null==t?void 0:t.get("rocker1"))||new Image,i,o,n,n),e.restore())}drawLight(){const{ctx:e,lightD:t,lightCenterX:n,lightCenterY:i,angle:o}=this;if(!e)return;e.save(),e.lineCap="round";const r=e.createLinearGradient(t/2,0,t/2,t);r.addColorStop(0,"rgba(134, 161, 255, 1)"),r.addColorStop(1,"rgba(134, 161, 255, 1)"),e.strokeStyle=r,e.lineWidth=3,e.shadowOffsetX=0,e.shadowOffsetY=-10,e.shadowBlur=12,e.shadowColor="rgba(78, 103, 255, 0.8)",e.translate(n,i);const a=90*Math.PI/180;e.rotate(o+a/2),e.translate(-n,-i),e.arc(n,i,t/2,0,.5*-Math.PI,!0),e.stroke(),e.restore()}setDisable(e){this.disable=e,e&&this.resetMouseUp()}}const _sfc_main$K=defineComponent({__name:"Joystick",props:{dWidth:{default:80},joystickBgImg:{default:new URL("/assets/joystick_body-DZ42oiGQ.png",module.meta.url).href},joystickActiveImg:{default:new URL("/assets/joystick_active-w_UGRFQY.png",module.meta.url).href},scale:{default:1},isShowLight:{type:Boolean,default:!0},actionFn:{type:Function,default:void 0},disable:{type:Boolean,default:!1}},emits:["angleChange","actionStop"],setup(e,{emit:t}){const n=e,i=ref(),o=`joystick-${Math.random().toString(36).slice(-6)}`,r=(e,i,...o)=>{n.actionFn&&n.actionFn(e,i,...o),t("angleChange",e,i,...o)};function a(e){if(e.startsWith("svg:")){const t=document.getElementById(`icon/${e.replace("svg:","")}`);console.log(t.viewBox);const n=null==t?void 0:t.innerHTML,i=`\n    <svg  width="${t.viewBox.baseVal.width}px" height="${t.viewBox.baseVal.height}px" viewBox="0 0 ${t.viewBox.baseVal.width} ${t.viewBox.baseVal.height}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      ${n}\n    </svg>\n    `;return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(i)))}return e}let s;return onMounted((()=>{s=new Rocker(o,{isShowLight:n.isShowLight,d:n.dWidth,scale:n.scale,flexible:!0,textures:new Map([["rocker0",a(n.joystickBgImg)],["rocker1",a(n.joystickActiveImg)]]),actionFn:r,actionStopFn:()=>{t("actionStop")}})})),watch((()=>n.disable),(e=>{var t;return null===(t=s)||void 0===t?void 0:t.setDisable(e)})),(e,t)=>(openBlock(),createElementBlock("canvas",{id:o,ref_key:"canvasRef",ref:i,style:{"user-select":"none","touch-action":"none"}},null,512))}}),_sfc_main$J=defineComponent({__name:"Joystick2",props:{scale:{}},emits:["angleChange","actionStop"],setup(e,{emit:t}){const n=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVQAAAFVCAMAAACHEOciAAAA1VBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADi4uIAAAAAAAAAAADe3t4AAADr6+sODg4AAAAAAADp6enb29sAAADY2Nj////y8vJGRkb7+/tjY2PT09Pm5uYlJSU2Njb09PRqamr4+PjU1NR4eHhwcHDn5+eioqJTU1P9/f3k5OTPz8+BgYHv7+/Nzc3FxcXy8vLq6urR0dHa2trOzs7U1NTBwcG8vLyvr6/Z2dm/v7+YmJjd3d2JiYnd3d2lpaWOjo7e3t7c3Nyzs7NaWlr4e+aFAAAAR3RSTlMwACwjBycbHi4RKY8WCgyOFI8yIRmPjw+Pj488j0OOjzU5j0WPgkhIfl0/j4+ATI97d4KBjIuIe3NsXYdxV3lNgFZTj3BnP4EKIjgAAA0oSURBVHja7J1rVxJRFIbfuQ8IhEAgogSaCJUk4D3tXv//JzUOWJkxMwzvHA6yH1urVcvlh2fts29zBmFojF0s5cq1mut6nletWtXgL9et1Qq5UtE2NEZHqXaj7FYd00ckvulU3UKjaOiHXlJLBc8xsSCm4xVKWkWuLlKLOdcysQSm5ZZ1iVodpJZqgU8KvlUrGatn1VJzrgMyjpczVslqpRYLDjLCqa0uFaxQas4zkSnmqgJ2VVLLFpRglQ31rERqzvIxl2fhVbHU0KhqLLV5QLFU2zWxEkxPYd1SKjXnYIU4ytKAOqm2Z2LF+IrCVZXUkgUtsBqGApRIzTnQhryCLKBAamHl5/4xZs3Iluyl1jRTeo/vGlmSrVT9ovQBP8tozVKqvkozTgLZSdVbaai1YGRDdlIbeWiPmc34mpVUW5O+NA6naPDJSKqLtcEz+PCl6p9MH+PzUytfalGj8SkZ+ZJBhC91rU5+NjmAL7W0BjX/f5i0RQtfqoe1pWow4EttrFWB4jetTKnPIEw5mZUvtbim2fRv8oRRgCm14OM5QNiykKSuz1Qaj2MbBBhSSyayp/XpUwvZ4xOaK4bUAhTQG+/tjb9UkD2ukQK21CoU0Os3A9RYtYwUUKXaeShgOH7bfBuwe6PCqpmiC2BKzflQwHCyN+O9Eqt+2UgMX2oNKuj1Dw52D3aDPwcH4wir2iTWpaR6UEGvv/0XLyOs6pJYl5FqQQXHn18+YkuNVceIhSRVfYnC4ed3W4+ZDJRYNWPnAL7UogkVHB69eML5ACowS0YkfKkNHxEQne6EnH+4vDy9PDqf/asHFfiR20C+1Jwipyftdvvs9q5VwZTO8Poo+K+jYyghorXiS80hAqbTs7OrJ1H55sfF2YkiqwUjAq7UMlRQ6Z1e/OjiP3RuLk6GFRAgLANJUgtQwvHtbQtz6F5fHROsEsYAktQalNAdDBFB7+4N5rByq/9K1cZp57Ab8w37HSjBM6KJl6rL2deJmFiNl6pHjdKMiGoVI1Wccjqrp1L16E/1YzYFpJSqw2yqI7OJlS+1uLlOgXC7wpdqr/VdqWXxi5lIfQYXewj7Va7UZ3MLJS0OSepzutS3PNZCUvUZTvXGSypVGlT+EABppviNFaTwL4KZTKoUfn4LAClSi+FypDYgLLYFgEynC+LbBKlr965p1uTjpUpCXRh3WalFCE9oxEmVDpXfrULWKPzVCmTkT0N5CanSTUX0VSmlViGkSQCQUYqfACCHn98BQCp/SqpppJYgpBwBIG0/PwFAZv7UuItKteWpVDz2PKlSpfjNKmQ5xa9VkM00f18NWaTwb1dAZil+WwVpp/htFSRQ+TtASKAuh5dQqvT9C4VqnNT1/QRkArxQhQQqf1iFBCo/VCGbFH6oQgKVH6qQHnVp/CdS5XV+/qvrkEDlbwAg6yn+JQDIHpW/V4U8lua/CAC5PMV/WgWZUPkDAKSf4i+rIZdS+F0VpEzxSxXkAgW/VEHKFL9UQcoUfwEAmaZI5P8n1YawFMU/UuX081tVyOnnt6qQ088//5DTzz//kNPPP/+Q088//5DTz+//IR89xcN5kCpzP5EHqfLCNOj7P8hlHyLVmVTZ+fObKkhDxW+qIA0Vv6mCPO9nYk2lyrU0Jv5UqqRUflKF3PWjUgilyrNpgN2pQrpUKuZvqRCoj/8hgz/AHv8hL/hyce+lSusPsNt/SJ0CvVJB6hTolQrycUlkGoHUjf1dqFlRCKTK1p+MF0iVB6lk8oFU2fuR8QOpUvzZ2AZkmcqmZEAmfzY5A9JRsakZkI6KjWdA1ilsLANy25eNaUDaVDoGpE2lYy8gtdXFBtN5s4BUG8moHA872GA6x18rSEYp+ErG15tjbDStwVckIxd8JWJ/NKhgo6kMRwmtllFO6HT0BhtOd3RyhyQUUEjk9PRsgI1ncHG0jwS4cJM4vWxftLDxtEbt0yRWPXgJftjlTvsWAm7aO5eHiMVKILV1Wt9pDyHg8KRdT2DVQjU+TrfqOycbXvqnVG536lsfW/FSLUTT/fgqkHoNIWAQSH0Va9WBFed0O5B6fgchoHde33q3/fnnclJb/d3tl1v1D1L7Q7ofgkjd3u1H68jDiXb6ejeI1BdHklKnHIVSX/db6aV2Jnuv7yP1xSmEkNMXodS9SZRVE3nMp9/cCyP12whCyCiUevC2OemmlPql2Xw7jdQrCCFXs0htNm+ipDqYy/dA6jSnSkc143oaqYHUj5V0Um+azVlOlSF1xu3D8W9epyxUncnD8ZecOmP0cPzHrSipFubTGofHX6r/k+o/3k/f/O+PQ6l16VMf96mRTuGgikirk+lEtdEPUv/QmU5Uk30sIxU/++Hs/wlCwOH5vdRJb9l9arcfRGr9B4Rf7N3tahpBGAXgc8y6uuJKiVLzJ9JQYqKQQkHEUoQQaO//krrWppFddMad82/PcwmHGXa+9n0r+0Ooz78RCjVHwPr1cJ4Kq/yojv6e1wiYYoZwqtXJf8cv/Y/WL3eff35DSI4xIlK9W3hPVVltFq9LBM1QIGz5uNh2+s3P0Zfd4nGJsDEmiLB82byh8962mydEKFAiLtVd54fq7W67QowJMkR5+t75JyrREZQg4ux/3aPTHlZ7xMnAod+nxri9j36fSnCESOtOHwA8fI3NtEf4J2q1PuHyaWpTwrVT1XLC1RPVPhGuS6M2dxEFvYxw3wQ1Eu7vI9Yj4ZK0YjckXI9eLCfhbslihQso6mUkXOVfa0gSbvCl1ScJ903SGpCEeydojUnCXT60SpJwPxqpIStw5ySpPitwjy+p/F+oLvUtNGcF7poqxQO4u7fSiAdw21Slwf9QfVAlU/AAbkWtxL9A9/jU6Z+E6lYfIuP3UN03Wad8D9UdvmV6PALdi15m8BGqF1UqxUmobketMeRpqO7yKzH9CNXzXz37CXr+q2c/Qc9/9ewn6Pmvnv0EPf/Vs58g6fW/wqARqm+qkk0aofpSJdWI9VB9/pds3AzV5/+pWAvVS9V001qo/lQJzGuh+lOVrsdaqP5UpZs1Q/WuKtGQl0KdwVrIm6F6VZUqa4bqVVWiKc+F6gcArZUXQ/VPVW30eSZUn1W3VzRD9VBNNGId6KGqHqgEPVTT9HkuVB+rtDZnA+ihqh6oBD1Uk0zCofqx+pVueDZUb6vaKkOh+gnA1Qa8GKrPVVsYZoFQfQVwvRnjQvWPFfF6vBiqN6ttFBdD9Q5Ase4Ph5r5YiWkvC5U1wCJkDMuVL+s+MPOHeQoDAQxFMVNQ0hEIiSQuP9N2bEBYbtgRfsf4Wk0qSoCegsoak4AbhtFzV7lNoGhZlh1a6CoGVbdZgM1r1ZoXUFQ8w/AruEb1DUrwLs2CTUrgNMRImpuAHIHfIvac68ml2kbNT+u/NoFKmoWK7UJBmouK1ILbNR8DEhqXUfNtCp2h46aaVXrBg81RwDeHjpqHlZaCwzUPKykWndRs1mxTit+jYpt9BFgho+affVzZ/wINd8GfnYEXNQMVqQrSBpq3lsnA6qMmpM1MTVRo1o49XPUrFaFRYqjRpWbFlCj+mLaQeKoUaV/pzXUPK3IM6qEGlViWkPNFkDm0yJqNlZiWkMd/G2ACbQ66qDftDyDVEcd9Wp9mlFuh3rrH3/C0lbQCGqx/rdrgLFG1VEHG60e5NzZTsJQFIXhtXECVNCiBVNP01oHKIPITJhCAN//kUSQQWO4gLWTRr/0otd/mn12k6ZHsoe9ov6fb1dO5TCQA6X+3GDd44jiRNUfrF7FwU7+s48vERqnhKiab1d+YYQdKgMHGjJyOAjBVRwKTL9jPPzKC/udAAriF0IAIVAaAUG11TWehZ8sZ9aqvkBB8lIYIBynUBCU3cbbyN/ualn+S7fVKG+aRujUZ0TV3wJM1XVzjeqsYkLHccLQPBc6T67rlgPwxbJCAqHJgM+07VzOztl272mu17QXeuum0Vn4t0F4EjHQBe30wiQ9mV/L2+YYdLEr4YEwnYEuGJY+nZfO59fiNj22sBKlRWoDQpVKgs20r2+3XNcHy6aRnKb8qEprgBm+bqnzn9MzIYOwXZ6ALBg+rPGbJlPCBqHjH1jh9PF+4TFfsQBE9YBagWi4iYPqfXp/N1fMj5ZNI7fufwdRcZxhVy0qND06FhUQJakTctVabcptmsyKEoiaLDWrZ4xHTZoQNRBFicj+gemjWnvZjRgEgihaRfMwyEYteST//59mQpJ95kHTc3Zsr2pHz0w6OarXrEE5FThZdfeN3ZSTgdN1V4eXcnE60MBRvFwInQcNgCZidvCTHXKkCdBKFSyVKq2AVh6b66eOdABNXYIFpNIUaE0FpkRpDTRn2TXtkfbANVQ2TLbJHrkEuEzPDdO0fHEZcKWoEvB2YUx0IXC1qKW9MWjRg2t5iDpcWcLrA8010gMnUYe+l7ThGa3sl4+ed76iDrFrPlPAv4R0ZvWU85vDqH9ir3rLRVILIWz4td0fLUnJN63dXcwfjqN+si+HiP+8Sj0hnwAAAABJRU5ErkJggg==",module.meta.url).href,i=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAABLFBMVEUAAADi4uLr6+vc3Nz09PTZ2dnV1dX7+/vk5OTo6Ojx8fHt7e34+PjS0tLR0dHPz8/m5ubf39/v7+/Ly8v+/v7////Nzc3V1dXOzs77+/v19fX////R0dHOzs7e3t719fX8/Pzs7Oz////o6Oj8/Pz6+vrg4OC6urr8/Pza2trj4+P19fXX19fe3t7v7+/Nzc3f39/t7e36+vr29vbY2Nje3t7Pz8/8/Pz7+/vT09P8/Pz09PT+/v7S0tLMzMzs7OzPz8/R0dHs7OzR0dHLy8vQ0NDNzc3T09Pl5eXj4+Px8fH5+fnR0dH19fXX19fLy8v8/Pzr6+vw8PD+/v7V1dXR0dHe3t7z8/PLy8vq6urLy8v+/v7Jycn5+fnNzc3d3d39/f39/f3T09Pm5uYIMLtuAAAAZHRSTlMAj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj48EjBkUYQaPjSckGYNPPDEoFAwFi0hEMI2Mf3t1dHBtamFgWFRTSkhBPjc2MS0nHxGIW008LRGHhYSAgH58enhybmpnZ2ZmWlBORz82NDM+1Ho3igAAA7lJREFUaN610gdb4kAQBuCPkFAVBAztaNI57J7ds/frvff//x9uILoxbrImIfsyDzM7u7OYJ8I9/bRwUj06qp4UTnUErLj//etSPsfkl75+3y8iGN3981c5W6/O97uYUO/wcz4nkP982IN/xfOz3IPy20X4U9jIp9M5Cu5jNFmd3yjAu+JG5eYSO7e/cqOyUYQ3vZ/5tCf5nz14UF1Ke7ZUhWsXFTaWSqcoRDVTuYA7px9SPn04hQvV5ynfnlfxoMNKyo3p1DQF16sc4gFPp9nwKDPG2poJf+YphAbTExuI//7JiZ7hb2SaPqMvlk3WHhWM0WP9+b9wUJtnAxQsM+ZarFKFreJZJCBnRdjovY8E5r0O3nYkQNvgHEUCdYR7yi8jY1pEY2hBYam5bJ61zr8sw2pbC9gFLArzWsDmC7jriRa4J7ijpklQ4x5A3iOcaFKc4NZ6eEwLaxbUsPSpoDCzecZ+fh03ugthKbQuDL/CkvyCYTksyTLGCmFpChgZhKV5jJGPYWk+gujj/6FMOENBxb3aXLPMcZ5f6AGoZXjsQkHNiOZrAAahkUzI2KCCwpLZvsOeaH4AYN1ygQA742FvHcBySKJlAJmQRAvAdUiqImohqWq4Ckl1hVYsFoqFKMaZw/pcj9XC+RYu2QGfxPOXeByT6rH8H/gXi83EZhhajFByW4vnL3Ew40l8Jk7h/vwBWnELY5hdRGHfM4nnr3Acl+oY9bhUBejxuBJXKCx91jNrlrkzonkdeKMQdtARO8OtRfNvAHxRJPoCYE6RaA5AS5GoBaCrSNQFWVGkWQERv4SkkqSY4BWQYyXJLuNQk/Wd9pznjzG2mJRkEYa5pCRzMNSpziazY1RwqEnB14zTfB03VsxN+vKJn1/BrWEikU1kKYxMKAl7hKu5s0MwbxMSvIXpICHBAUz6opsJNaFSJFxa1HHHcDRI02NGbZsJO2dZ8/MtWHxSA/YJVp2sGqhsB/fsqoHaBWdNDdAaeNcv1MC8uIaNthqYNmztynoBzJaqTt37OKE9x/4WHJWm7KgUdrVDrwRn+trUxNZ0CJRLk95fKkNs03o+OhWlMGq+z9ebeNBOVGx8GYVtvQMXhs+iPj0bwpXOatSX1Q5c0n/0o571f+hwr+75IVbr8OZ3I+pB4zc8K+/d/YnZ6CyFQ93YK8MPvfma5o1LCKsNrPe6qcO39rf+rFD/WxuTKf8pNZxub5T+lBGEerP0ju57NPuIwsj9d6VmHYHqtJt7O1ubm1s7e812B279B9LXBppsIQFaAAAAAElFTkSuQmCC",module.meta.url).href,{sportCmdLoading:o,emergencyStopState:r,currSportModel:a}=storeToRefs(useDeviceStore()),s=computed((()=>a.value===SPORT_STATE.JointLock));return(e,a)=>{const l=_sfc_main$K;return openBlock(),createElementBlock("div",{class:normalizeClass(["joystick-box",(unref(o)||unref(r)||unref(s))&&"disable"])},[createVNode(l,{class:"joystick-component","d-width":40,"joystick-bg-img":unref(n),"joystick-active-img":unref(i),width:"124",height:"124",scale:e.scale,disable:unref(o)||unref(r)||unref(s),onAngleChange:a[0]||(a[0]=(e,n,...i)=>t("angleChange",e,n,...i)),onActionStop:a[1]||(a[1]=()=>t("actionStop"))},null,8,["joystick-bg-img","joystick-active-img","scale","disable"])],2)}}}),Joystick2=_export_sfc(_sfc_main$J,[["__scopeId","data-v-2c162195"]]);var _a$1;const isClient="undefined"!=typeof window;function resolveUnref(e){return"function"==typeof e?e():unref(e)}function useToggle(e=!1,t={}){const{truthyValue:n=!0,falsyValue:i=!1}=t,o=isRef(e),r=ref(e);function a(e){if(arguments.length)return r.value=e,r.value;{const e=resolveUnref(n);return r.value=r.value===e?resolveUnref(i):e,r.value}}return o?a:[r,a]}isClient&&(null==(_a$1=null==window?void 0:window.navigator)?void 0:_a$1.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const _imports_0$6=exports("_","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAxCAYAAADJP8l8AAAAAXNSR0IArs4c6QAACP1JREFUWEelmHtQU9kdx++5IfcmmMTYCkHs2EEdW9ABjA3ZiLu6WxdZdaZKGXCs7oLCKLJpozNAfYNMpgHkNWAX6gryMCJqQRnGUTvaf3DtaONMpTO1FRQR8dlUQx6QhNv53b0nPVyTFbeZydw8bu7nfr+/x/mdIOr9H4j4SbDX/GednZ2ydevW/Vwul+dSFOV3u93NFRUVfyZ/MB10SABFUTS+wIkTJ2Tp6ekfKpXKwwghHUVRHMdx16qrqw++D1AMg/f4CSz++127djFmszlFqVQWSCSSZRRFSQHo9/tv1NfX75sucDowurGxUZGRkfHZzJkzixBCsVg1x3GjHo+ntry8vHk6wO+CBVS2tbXNWrt2baparc6naXqpAAMr7U6ns8Fms53MyMh48i4g/p48wmuIVwC2d+/e8N27d2+YNWvWr8PCwhZTFCUR4vZ8bGys7cqVK3/YuXPn05cvX05+FzCUsgBMo9FIysvL1WvWrFkbERFhomkabITfcZOTky8dDkdTfX39VwcOHPgPfEZRVEjgu2C0RqOh6+rqIlNSUtJVKlUeQujH2MbJyckXb968OdPd3X08Ozv7sQALCQxmI2khvKaLi4uVRqMxU4jZQkLZv1+/fm29ePFiS1FR0fCzZ88moQ5DKZwWzGg0hhcWFn4aHR1dQtP0fELZK7vdfqaxsbFh//79L8BCUp3Y0nfCIiIiJAcPHlSnpaV9EhkZuVsqlcYTsCd2u727u7u7NScn55HQBHgbyWcwCC7it2zs7e2du3z58s0qlepXhLJJn8838Pjx46aOjo7LR44cee52uwGEYXAES3nwW51CiMUUGCRIUVGROjs7e7tKpdpJ03QUnMdxnN/r9f7zwYMHjSUlJZdPnz7tIJQFA/qDtacpsLi4OEllZeXcpKSkTWq1Opum6XkE7O8DAwPNhw8fvnT27FmnCCa2k1eJiziojRCz1tbWucnJyV8oFIochNBsnI1+v//R4OBgfUVFxaXjx4+/ESyE65B2kvGbAhR3Dz71L1269KPk5OQchULxOUIoUlAw6ff7H4+MjDQVFhZ2njlzZoxYZgAADwwKxE74jLc0jGxTAAJlVVVVURs2bDDNmDEjXYDBuT6v1zswPDzccujQoQunTp3CMSOVkVaSwIBCWD5wLHnYsWPH5qampn6uUCh2IYRmYhu9Xu+9hw8fNpvN5t6WlhawET+wjUHjJi4LRqglPlk6OjqiUlNTc1Uq1Q6EkJqw8enQ0FC9yWTq6unpwQkSShnZXabYCspkANLr9dKampqFcXFxXyiVygyEkEbIxvHx8fG7jx49Ol1dXX2loaHh9TSUYeCUooeEAqAcYCdPntTGxMQUMQzzIUJohnDRCbfb/Y3NZvt9Xl7e7bt373r/HxhfFrNnz1b29vb+JCEhoZRl2U+FtYy3yu12/+XmzZtH8/LybPfu3fPhWIZqWzgTxe2M7Droxo0bSVqttpBl2c8oigoXLuYdHx/vv379emlBQcHf+vv7gykT2xXSRqKJU8jhcDQoFIqtBMzn8Xj+arPZ6jdv3tw3NDSEawsnCF4BxLUmrjnyPMhe/vdoYmLiG6lU+gERG8+rV6/Obt++3XLhwgXIRn4FFxU0vhiGwFEMJHvp/4Cjo6OFkZGRMB7ghgwj3dORkRGr0WhsFkpADCQBJBSrDgrj+2dpaWnstm3bMjUazQ6JRAJQfmr1+/0vBgcHvzKbzRdaW1vtokTAwGDKMFRco99aSlGUxmQy/aCgoCB7zpw5XyKE5Nhen883Cp1lz5491p6eHmhjYguDWUp2Hfwaw/n4QIFLMjMzZ5aUlPxy/vz526VSKSxB0Hk4n8/3bHR01FpVVdVWU1MDY4NYndhSMTAA4y2lKApshDlSYjAYwmtra9fEx8d/ybLsAqHTgMMwq/S0t7c3mkymIWjigsX4GCxhSEsDOTkFCKr0en14dXX1Jzqdbl9YWNicQHfmOJfdbrfW1dXVFhcXPxOUkkAMFduIE46/FAkEC0EprdPp5DU1NR8lJSUdhERCCPGzDwy3dru98/z58w07duwYIZS+l0I+hhiGVw6dTidramr6xaJFiyCmMQIUJupXDofjfHd3d11WVhYMuWQMxeUQqD/sFNw5rORvAeGEVatWhZeVlX2cmJhoYhgG5s9v2wXHOV0u18Wurq6SrVu3jhKJRM6hZPJMyVKYU2DVD1hK7vtSUlJmWCyWjxcvXryHYRicvWDv67GxsRNXr149np6eDvaStoYsDVD4Q8JOPobE7oiP8+rVq2WlpaXJS5cuzWdZlhx+Rx0ORxvsIbKysnAikav+W8UPQFjVAYRVksDApmbevHmSc+fOfZSQkFDAMExgl8RxnMPpdJ7q7e2t2bRp0xNyHyGUzhQoXBBmFmynWCGeUfnY6fV6pqGhYVVsbKyRZVnYB/L7eoip0+lsvnXr1td5eXmDwtoZVCkAlYSNGAhH8ejIQw0GA2OxWLQ6nW63XC5PIqB2t9vdc+fOnboVK1b8I5RSuCiME2TCYEvJI7kH4aKioiRWq1WbnJxcyjDMT4nttcvj8fzx2rVrv1u/fv1wMCg/0wRRKIaKJ3RuyZIlTHt7++rY2NjfCFD+pjiOc7tcrnP9/f21W7Zs+df9+/dhWgjYCyexBDCUUgwM/BcDF9+4caMC/iJZsGBBPsMw0HtxTB1ut7vr9u3bR1euXPmAmHX45QkG4WA2kgmEkwefF2jGBoOBrays1Gm12gKWZROIP4jGXC6X1Wq1WnJzc5+T2zU86n9vqFqtpi9fvrwyPj7eKJPJEoUSg5tyejyezr6+vqP5+fnDkL14b4EbOZmd+AbESkm1bylNTEzMl8vlBkKpx+VytcNQlpaWNiBOfTJWpGJ8I+I6xXsSHhwTE0O3tLT8TK/X/1YqlWoRQjimY06n82uz2VxLZh9OiOlCg9Up30P7+vo+0Gq1e1iW1SGEIEeg99osFsshfIdkneHPgsVUnMXkuYHFJDo6WtLe3p5oMBj2yWQyaA7cxMTEn8rKyo6IQTiW3wca6LsAWLhwId3U1JSwbNmyHHgPe8rc3Nwb/wUq8nfRT5ZTKAAAAABJRU5ErkJggg==");
/*!
       * better-scroll / core
       * (c) 2016-2023 ustbhuangyi
       * Released under the MIT License.
       */
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},extendStatics(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var propertiesConfig=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function warn(e){console.error("[BScroll warn]: "+e)}var inBrowser="undefined"!=typeof window,ua=inBrowser&&navigator.userAgent.toLowerCase(),isWeChatDevTools=!(!ua||!/wechatdevtools/.test(ua)),isAndroid=ua&&ua.indexOf("android")>0,isIOSBadVersion=function(){if("string"==typeof ua){var e=/os (\d\d?_\d(_\d)?)/.exec(ua);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));return!!(13===t[0]&&t[1]>=4)}return!1}(),supportsPassive=!1;if(inBrowser){var EventName="test-passive";try{var opts={};Object.defineProperty(opts,"passive",{get:function(){supportsPassive=!0}}),window.addEventListener(EventName,(function(){}),opts)}catch(e){}}function getNow(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var extend=function(e,t){for(var n in t)e[n]=t[n];return e};function isUndef(e){return null==e}function between(e,t,n){return e<t?t:e>n?n:e}var elementStyle=inBrowser&&document.createElement("div").style,vendor=function(){if(!inBrowser)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==elementStyle[n.value])return n.key}return!1}();function prefixStyle(e){return!1===vendor?e:"standard"===vendor?"transitionEnd"===e?"transitionend":e:vendor+e.charAt(0).toUpperCase()+e.substr(1)}function getElement(e){return"string"==typeof e?document.querySelector(e):e}function addEvent(e,t,n,i){var o=supportsPassive?{passive:!1,capture:!!i}:!!i;e.addEventListener(t,n,o)}function removeEvent(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}function maybePrevent(e){e.cancelable&&e.preventDefault()}function offset(e){for(var t=0,n=0;e;)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}vendor&&"standard"!==vendor&&vendor.toLowerCase();var transform=prefixStyle("transform"),transition=prefixStyle("transition"),hasPerspective=inBrowser&&prefixStyle("perspective")in elementStyle,hasTouch=inBrowser&&("ontouchstart"in window||isWeChatDevTools),hasTransition=inBrowser&&transition in elementStyle,style={transform:transform,transitionTimingFunction:prefixStyle("transitionTimingFunction"),transitionDuration:prefixStyle("transitionDuration"),transitionDelay:prefixStyle("transitionDelay"),transformOrigin:prefixStyle("transformOrigin"),transitionEnd:prefixStyle("transitionEnd"),transitionProperty:prefixStyle("transitionProperty")},eventTypeMap={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function getRect(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function preventDefaultExceptionFn(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var tagExceptionFn=preventDefaultExceptionFn;function tap(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)}function click(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var i,o={};n&&(o.screenX=n.screenX||0,o.screenY=n.screenY||0,o.clientX=n.clientX||0,o.clientY=n.clientY||0);var r={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey};if("undefined"!=typeof MouseEvent)try{i=new MouseEvent(t,extend(__assign({bubbles:true,cancelable:true},r),o))}catch(e){a()}else a();function a(){(i=document.createEvent("Event")).initEvent(t,true,true),extend(i,o)}i.forwardedTouchEvent=!0,i._constructed=!0,e.target.dispatchEvent(i)}function dblclick(e){click(e,"dblclick")}var ease={swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},DEFAULT_INTERVAL=1e3/60,windowCompat=inBrowser&&window;function noop$1(){}var requestAnimationFrame$1=inBrowser?windowCompat.requestAnimationFrame||windowCompat.webkitRequestAnimationFrame||windowCompat.mozRequestAnimationFrame||windowCompat.oRequestAnimationFrame||function(e){return window.setTimeout(e,e.interval||DEFAULT_INTERVAL)}:noop$1,cancelAnimationFrame$1=inBrowser?windowCompat.cancelAnimationFrame||windowCompat.webkitCancelAnimationFrame||windowCompat.mozCancelAnimationFrame||windowCompat.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:noop$1,noop=function(e){},sharedPropertyDefinition={enumerable:!0,configurable:!0,get:noop,set:noop},getProperty=function(e,t){for(var n=t.split("."),i=0;i<n.length-1;i++)if("object"!=typeof(e=e[n[i]])||!e)return;var o=n.pop();return"function"==typeof e[o]?function(){return e[o].apply(e,arguments)}:e[o]},setProperty=function(e,t,n){for(var i,o=t.split("."),r=0;r<o.length-1;r++)e[i=o[r]]||(e[i]={}),e=e[i];e[o.pop()]=n};function propertiesProxy(e,t,n){sharedPropertyDefinition.get=function(){return getProperty(this,t)},sharedPropertyDefinition.set=function(e){setProperty(this,t,e)},Object.defineProperty(e,n,sharedPropertyDefinition)}var EventEmitter=function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var i=this;void 0===n&&(n=this),this.hasType(e);var o=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];i.off(e,o);var s=t.apply(n,r);if(!0===s)return s};return o.fn=t,this.on(e,o),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var o,r=i.length,a=__spreadArrays(i),s=0;s<r;s++){var l=a[s],c=l[0],u=l[1];if(c&&!0===(o=c.apply(u,t)))return o}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t=this.eventTypes;t[e]===e||warn('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map((function(e){return JSON.stringify(e)}))+"]")},e}(),EventRegister=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(addEvent)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(removeEvent)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(i){e(n,i.name,t,!!i.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),CustomOptions=function(){},OptionsConstructor=function(e){function t(){var t=e.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=hasTouch,t.disableTouch=!hasTouch,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return __extends(t,e),t.prototype.merge=function(e){if(!e)return this;for(var t in e)"bounce"!==t?this[t]=e[t]:this.bounce=this.resolveBounce(e[t]);return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&hasPerspective?" translateZ(1px)":"",this.useTransition=this.useTransition&&hasTransition,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(e){var t={top:!0,right:!0,bottom:!0,left:!0};return"object"==typeof e?extend(t,e):e?t:{top:!1,right:!1,bottom:!1,left:!1}},t}(CustomOptions),ActionsHandler=function(){function e(e,t){this.wrapper=e,this.options=t,this.hooks=new EventEmitter(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return e.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,o=e.click,r=this.wrapper,a=t?r:window,s=[],l=[],c=!i,u=!n;o&&s.push({name:"click",handler:this.click.bind(this),capture:!0}),c&&(s.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),u&&(s.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new EventRegister(r,s),this.targetEventRegister=new EventRegister(a,l)},e.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,o=n.stopPropagation,r=n.preventDefaultException;({start:function(){return i&&!preventDefaultExceptionFn(e.target,r)},end:function(){return i&&!preventDefaultExceptionFn(e.target,r)},move:function(){return i}})[t]()&&e.preventDefault(),o&&e.stopPropagation()},e.prototype.setInitiated=function(e){void 0===e&&(e=0),this.initiated=e},e.prototype.start=function(e){var t=eventTypeMap[e.type];if(!this.initiated||this.initiated===t)if(this.setInitiated(t),tagExceptionFn(e.target,this.options.tagException))this.setInitiated();else if((2!==t||0===e.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}},e.prototype.move=function(e){if(eventTypeMap[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e:e})){var o=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=this.pointX-o,s=this.pointY-r,l=this.options.autoEndDistance;(a>document.documentElement.clientWidth-l||s>document.documentElement.clientHeight-l||a<l||s<l)&&this.end(e)}}},e.prototype.end=function(e){eventTypeMap[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},e.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},e.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},e.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},e}(),translaterMetaData={x:["translateX","px"],y:["translateY","px"]},Translater=function(){function e(e){this.setContent(e),this.hooks=new EventEmitter(["beforeTranslate","translate"])}return e.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null)[style.transform].split(")")[0].split(", ");return{x:+(e[12]||e[4])||0,y:+(e[13]||e[5])||0}},e.prototype.translate=function(e){var t=[];Object.keys(e).forEach((function(n){if(translaterMetaData[n]){var i=translaterMetaData[n][0];if(i){var o=translaterMetaData[n][1],r=e[n];t.push(i+"("+r+o+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[style.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),Base=function(){function e(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new EventEmitter(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return e.prototype.translate=function(e){this.translater.translate(e)},e.prototype.setPending=function(e){this.pending=e},e.prototype.setForceStopped=function(e){this.forceStopped=e},e.prototype.setCallStop=function(e){this.callStopWhenPending=e},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},e.prototype.clearTimer=function(){this.timer&&(cancelAnimationFrame$1(this.timer),this.timer=0)},e.prototype.destroy=function(){this.hooks.destroy(),cancelAnimationFrame$1(this.timer)},e}(),isValidPostion=function(e,t,n,i){var o=function(e,t){var n=e-t;return n>0?-1:n<0?1:0},r=o(t.x,e.x),a=o(t.y,e.y),s=n.x-i.x,l=n.y-i.y;return r*s<=0&&a*l<=0},Transition=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.startProbe=function(e,t){var n=this,i=e,o=function(){var r=n.translater.getComputedPosition();isValidPostion(e,t,r,i)&&n.hooks.trigger(n.hooks.eventTypes.move,r),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,r)),i=r,n.pending&&(n.timer=requestAnimationFrame$1(o))};this.callStopWhenPending&&this.setCallStop(!1),cancelAnimationFrame$1(this.timer),o()},t.prototype.transitionTime=function(e){void 0===e&&(e=0),this.style[style.transitionDuration]=e+"ms",this.hooks.trigger(this.hooks.eventTypes.time,e)},t.prototype.transitionTimingFunction=function(e){this.style[style.transitionTimingFunction]=e,this.hooks.trigger(this.hooks.eventTypes.timeFunction,e)},t.prototype.transitionProperty=function(){this.style[style.transitionProperty]=style.transform},t.prototype.move=function(e,t,n,i){this.setPending(n>0),this.transitionTimingFunction(i),this.transitionProperty(),this.transitionTime(n),this.translate(t);var o=3===this.options.probeType;n&&o&&this.startProbe(e,t),n||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,t),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),cancelAnimationFrame$1(this.timer);var t=this.translater.getComputedPosition(),n=t.x,i=t.y;this.transitionTime(),this.translate({x:n,y:i}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:i})}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Base),Animation$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.move=function(e,t,n,i){if(!n)return this.translate(t),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,t),void this.hooks.trigger(this.hooks.eventTypes.end,t);this.animate(e,t,n,i)},t.prototype.animate=function(e,t,n,i){var o=this,r=getNow(),a=r+n,s=3===this.options.probeType,l=function(){var c=getNow();if(c>=a)return o.translate(t),s&&o.hooks.trigger(o.hooks.eventTypes.move,t),void o.hooks.trigger(o.hooks.eventTypes.end,t);var u=i(c=(c-r)/n),d={};Object.keys(t).forEach((function(n){var i=e[n],o=t[n];d[n]=(o-i)*u+i})),o.translate(d),s&&o.hooks.trigger(o.hooks.eventTypes.move,d),o.pending&&(o.timer=requestAnimationFrame$1(l)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,t))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),cancelAnimationFrame$1(this.timer),l()},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),cancelAnimationFrame$1(this.timer);var t=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Base);function createAnimater(e,t,n){var i=n.useTransition,o={};return Object.defineProperty(o,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),i?new Transition(e,t,o):new Animation$2(e,t,o)}var Behavior=function(){function e(e,t,n){this.wrapper=e,this.options=n,this.hooks=new EventEmitter(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return e.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},e.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},e.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},e.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},e.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n=n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+e*t:n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},e.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},e.prototype.momentum=function(e,t,n,i,o,r,a){void 0===a&&(a=this.options);var s=e-t,l=Math.abs(s)/n,c=a.deceleration,u=a.swipeBounceTime,d=a.swipeTime,h={destination:e+l*l/c*(s<0?-1:1),duration:Math.min(d,2*l/c),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,h,s),h.destination<i?(h.destination=r?Math.max(i-r/4,i-r/h.rate*l):i,h.duration=u):h.destination>o&&(h.destination=r?Math.min(o+r/4,o+r/h.rate*l):o,h.duration=u),h.destination=Math.round(h.destination),h},e.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},e.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,o="static"===window.getComputedStyle(this.wrapper,null).position,r=getRect(this.wrapper);this.wrapperSize=this.wrapper["width"===n?"clientWidth":"clientHeight"],this.setContent(e);var a=getRect(this.content);this.contentSize=a[n],this.relativeOffset=a[i],o&&(this.relativeOffset-=r[i]),this.computeBoundary(),this.setDirection(0)},e.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},e.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},e.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},e.prototype.updatePosition=function(e){this.currentPos=e},e.prototype.getCurrentPos=function(){return this.currentPos},e.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos);return{position:e,inBoundary:e===this.getCurrentPos()}},e.prototype.adjustPosition=function(e){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos):e=this.minScrollPos,e},e.prototype.updateStartPos=function(){this.startPos=this.currentPos},e.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},e.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},e.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),_a,_b,_c,_d,PassthroughHandlers=(_a={},_a.yes=function(e){return!0},_a.no=function(e){return maybePrevent(e),!1},_a),DirectionMap=(_b={},_b.horizontal=(_c={},_c.yes="horizontal",_c.no="vertical",_c),_b.vertical=(_d={},_d.yes="vertical",_d.no="horizontal",_d),_b),DirectionLockAction=function(){function e(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return e.prototype.reset=function(){this.directionLocked=""},e.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},e.prototype.adjustDelta=function(e,t){return"horizontal"===this.directionLocked?t=0:"vertical"===this.directionLocked&&(e=0),{deltaX:e,deltaY:t}},e.prototype.computeDirectionLock=function(e,t){""!==this.directionLocked||this.freeScroll||(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},e.prototype.handleEventPassthrough=function(e){var t=DirectionMap[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return PassthroughHandlers.yes(e);if(this.eventPassthrough===t.no)return PassthroughHandlers.no(e)}return!1},e}(),applyQuadrantTransformation=function(e,t,n){return 2===n?[t,-e]:3===n?[-e,-t]:4===n?[-t,e]:[e,t]},ScrollerActions=function(){function e(e,t,n,i,o){this.hooks=new EventEmitter(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=o,this.directionLockAction=new DirectionLockAction(o.directionLockThreshold,o.freeScroll,o.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return e.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(t){return!e.enabled||e.handleStart(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(t){var n=t.deltaX,i=t.deltaY,o=t.e;if(!e.enabled)return!0;var r=applyQuadrantTransformation(n,i,e.options.quadrant),a={deltaX:r[0],deltaY:r[1]};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,a),e.handleMove(a.deltaX,a.deltaY,o)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(t){return!e.enabled||e.handleEnd(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(t){e.enabled&&!t._constructed&&e.handleClick(t)}))},e.prototype.handleStart=function(e){var t=getNow();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},e.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),o=this.scrollBehaviorY.getAbsDist(t),r=getNow();if(this.checkMomentum(i,o,r))return!0;if(this.directionLockAction.checkMovingDirection(i,o,n))return this.actionsHandler.setInitiated(),!0;var a=this.directionLockAction.adjustDelta(e,t),s=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(a.deltaX),c=this.scrollBehaviorY.getCurrentPos(),u=this.scrollBehaviorY.move(a.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var d=l!==s||u!==c;this.contentMoved||d||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&d&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&d&&(this.animater.translate({x:l,y:u}),this.dispatchScroll(r))}}},e.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},e.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},e.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=getNow();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},e.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,o=i.minScrollPos,r=i.maxScrollPos,a=this.scrollBehaviorY,s=a.minScrollPos,l=a.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),{x:t=between(t,r,o),y:n=between(n,l,s)}},e.prototype.handleClick=function(e){preventDefaultExceptionFn(e.target,this.options.preventDefaultException)||(maybePrevent(e),e.stopPropagation())},e.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},e.prototype.refresh=function(){this.endTime=0},e.prototype.destroy=function(){this.hooks.destroy()},e}();function createActionsHandlerOptions(e){return["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(t,n){return t[n]=e[n],t}),{})}function createBehaviorOptions(e,t,n,i){var o=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(t,n){return t[n]=e[n],t}),{});return o.scrollable=!!e[t],o.bounces=n,o.rect=i,o}function bubbling(e,t,n){n.forEach((function(n){var i,o;"string"==typeof n?i=o=n:(i=n.source,o=n.target),e.on(i,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.trigger.apply(t,__spreadArrays([o],e))}))}))}function isSamePoint(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(e[o]!==t[o])return!1}return!0}var MIN_SCROLL_DISTANCE=1,Scroller=function(){function e(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new EventEmitter(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i=this.options.bounce,o=i.left,r=i.right,a=i.top,s=i.bottom;this.scrollBehaviorX=new Behavior(e,t,createBehaviorOptions(n,"scrollX",[o,r],{size:"width",position:"left"})),this.scrollBehaviorY=new Behavior(e,t,createBehaviorOptions(n,"scrollY",[a,s],{size:"height",position:"top"})),this.translater=new Translater(this.content),this.animater=createAnimater(this.content,this.translater,this.options),this.actionsHandler=new ActionsHandler(this.options.bindToTarget?this.content:e,createActionsHandlerOptions(this.options)),this.actions=new ScrollerActions(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var l=this.resize.bind(this);this.resizeRegister=new EventRegister(window,[{name:"orientationchange",handler:l},{name:"resize",handler:l}]),this.registerTransitionEnd(),this.init()}return e.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){e.togglePointerEvents(!0)}))},e.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new EventRegister(this.content,[{name:style.transitionEnd,handler:this.transitionEnd.bind(this)}])},e.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,(function(t){e.options.translateZ&&t.push(e.options.translateZ)})),t.on(t.eventTypes.translate,(function(t){var n=e.getCurrentPos();e.updatePositions(t),!0!==e.actions.ensuringInteger?t.x===n.x&&t.y===n.y||e.togglePointerEvents(!1):e.actions.ensuringInteger=!1}))},e.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))})),bubbling(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},e.prototype.bindActions=function(){var e=this,t=this.actions;bubbling(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,(function(n,i){return e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),!!e.hooks.trigger(e.hooks.eventTypes.end,i)||(!(t.fingerMoved||(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),!e.checkClick(n)))||(e.resetPosition(e.options.bounceTime,ease.bounce)?(e.animater.setForceStopped(!1),!0):void 0))})),t.hooks.on(t.hooks.eventTypes.scrollEnd,(function(n,i){var o=Math.abs(n.x-e.scrollBehaviorX.startPos),r=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,o,r))return e.animater.setForceStopped(!1),void e.hooks.trigger(e.hooks.eventTypes.flick);e.momentum(n,i)?e.animater.setForceStopped(!1):(t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1))}))},e.prototype.checkFlick=function(e,t,n){if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>1||t>1))return!0},e.prototype.momentum=function(e,t){var n={time:0,easing:ease.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),o=this.scrollBehaviorY.end(t);if(n.newX=isUndef(i.destination)?n.newX:i.destination,n.newY=isUndef(o.destination)?n.newY:o.destination,n.time=Math.max(i.duration,o.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=ease.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},e.prototype.checkClick=function(e){var t=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var o=n.delay,r=void 0===o?300:o;getNow()-this.lastClickTime<r&&(i=!0,dblclick(e))}return this.options.tap&&tap(e,this.options.tap),this.options.click&&!preventDefaultExceptionFn(e.target,this.options.preventDefaultException)&&click(e),this.lastClickTime=i?null:getNow(),!0}return!1},e.prototype.resize=function(){var e=this;this.actions.enabled&&(isAndroid&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.hooks.trigger(e.hooks.eventTypes.resize)}),this.options.resizePolling))},e.prototype.transitionEnd=function(e){e.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,ease.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},e.prototype.togglePointerEvents=function(e){void 0===e&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var o=t[i];o.isBScrollContainer||(o.style.pointerEvents=n)}},e.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=offset(this.wrapper)},e.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},e.prototype.scrollBy=function(e,t,n,i){void 0===n&&(n=0);var o=this.getCurrentPos(),r=o.x,a=o.y;i=i||ease.bounce,e+=r,t+=a,this.scrollTo(e,t,n,i)},e.prototype.scrollTo=function(e,t,n,i,o){void 0===n&&(n=0),void 0===i&&(i=ease.bounce),void 0===o&&(o={start:{},end:{}});var r=this.options.useTransition?i.style:i.fn,a=this.getCurrentPos(),s=__assign({x:a.x,y:a.y},o.start),l=__assign({x:e,y:t},o.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!isSamePoint(s,l)){var c=Math.abs(l.x-s.x),u=Math.abs(l.y-s.y);c<MIN_SCROLL_DISTANCE&&u<MIN_SCROLL_DISTANCE&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(s,l,n,r)}},e.prototype.scrollToElement=function(e,t,n,i,o){var r=getElement(e),a=offset(r),s=function(e,t,n){return"number"==typeof e?e:e?Math.round(t/2-n/2):0};n=s(n,r.offsetWidth,this.wrapper.offsetWidth),i=s(i,r.offsetHeight,this.wrapper.offsetHeight);var l=function(e,t,n,i){return e-=t,e=i.adjustPosition(e-n)};a.left=l(a.left,this.wrapperOffset.left,n,this.scrollBehaviorX),a.top=l(a.top,this.wrapperOffset.top,i,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,r,a)||this.scrollTo(a.left,a.top,t,o)},e.prototype.resetPosition=function(e,t){void 0===e&&(e=0),void 0===t&&(t=ease.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,o=n.inBoundary,r=this.scrollBehaviorY.checkInBoundary(),a=r.position,s=r.inBoundary;return(!o||!s)&&(isIOSBadVersion&&this.reflow(),this.scrollTo(i,a,e,t),!0)},e.prototype.reflow=function(){this._reflow=this.content.offsetHeight},e.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},e.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},e.prototype.enable=function(){this.actions.enabled=!0},e.prototype.disable=function(){cancelAnimationFrame$1(this.animater.timer),this.actions.enabled=!1},e.prototype.destroy=function(){var e=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach((function(t){return e[t].destroy()}))},e}(),BScrollConstructor=function(e){function t(t,n){var i=e.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,o=getElement(t);return o?(i.plugins={},i.options=(new OptionsConstructor).merge(n).process(),i.setContent(o).valid?(i.hooks=new EventEmitter(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(o),i):i):(warn("Can not resolve the wrapper DOM."),i)}return __extends(t,e),t.use=function(e){var n=e.pluginName;return t.plugins.some((function(t){return e===t.ctor}))?t:isUndef(n)?(warn("Plugin Class must specify plugin's name in static property by 'pluginName' field."),t):(t.pluginsMap[n]=!0,t.plugins.push({name:n,applyOrder:e.applyOrder,ctor:e}),t)},t.prototype.setContent=function(e){var t=!1,n=!0,i=e.children[this.options.specifiedIndexAsContent];return i?(t=this.content!==i)&&(this.content=i):(warn("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:t}},t.prototype.init=function(e){var t=this;this.wrapper=e,e.isBScrollContainer=!0,this.scroller=new Scroller(e,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){t.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(propertiesConfig),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,i={x:n.startX,y:n.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,i)||this.scroller.scrollTo(i.x,i.y)},t.prototype.applyPlugins=function(){var e=this,n=this.options;t.plugins.sort((function(e,t){var n,i=((n={}).pre=-1,n.post=1,n);return(e.applyOrder?i[e.applyOrder]:0)-(t.applyOrder?i[t.applyOrder]:0)})).forEach((function(t){var i=t.ctor;n[t.name]&&"function"==typeof i&&(e.plugins[t.name]=new i(e))}))},t.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.blur()}))},t.prototype.eventBubbling=function(){bubbling(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},t.prototype.refreshWithoutReset=function(e){this.scroller.refresh(e),this.hooks.trigger(this.hooks.eventTypes.refresh,e),this.trigger(this.eventTypes.refresh,e)},t.prototype.proxy=function(e){var t=this;e.forEach((function(e){var n=e.key,i=e.sourceKey;propertiesProxy(t,i,n)}))},t.prototype.refresh=function(){var e=this.setContent(this.wrapper),t=e.contentChanged;if(e.valid){var n=this.content;this.refreshWithoutReset(n),t&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,n),this.trigger(this.eventTypes.contentChanged,n)),this.scroller.resetPosition()}},t.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},t.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},t.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},t.prototype.eventRegister=function(e){this.registerType(e)},t.plugins=[],t.pluginsMap={},t}(EventEmitter);function createBScroll(e,t){return new BScrollConstructor(e,t)}createBScroll.use=BScrollConstructor.use,createBScroll.plugins=BScrollConstructor.plugins,createBScroll.pluginsMap=BScrollConstructor.pluginsMap;var BScroll=createBScroll;const _withScopeId$i=e=>(pushScopeId("data-v-dd4b030d"),e=e(),popScopeId(),e),_hoisted_1$G={id:"slamMapPage",class:"map_page"},_hoisted_2$B={class:"title_bar"},_hoisted_3$s=_withScopeId$i((()=>createBaseVNode("img",{class:"icon-back",src:_imports_0$6,style:{width:"9px",height:"17px"}},null,-1))),_hoisted_4$n=[_hoisted_3$s],_hoisted_5$h={class:"page_title"},_hoisted_6$e=_withScopeId$i((()=>createBaseVNode("div",{class:"btn_async"},"同步地图",-1))),_hoisted_7$d=[_hoisted_6$e],_hoisted_8$d=["onClick"],_hoisted_9$8={class:"preview_img"},_hoisted_10$6=["src"],_hoisted_11$5=["src"],_hoisted_12$3={class:"operation"},_hoisted_13$3={class:"map_name"},_hoisted_14$3={class:"map_name_info"},_hoisted_15$2={class:"name"},_hoisted_16$2={key:0,class:"time"},_hoisted_17$2=["onClick"],_hoisted_18$2={class:"btn_wrap"},_hoisted_19$2=["onClick"],_hoisted_20$1=["onClick"],_hoisted_21$1={key:0,class:"select_map"},_hoisted_22$1={class:"modal"},_hoisted_23$1=_withScopeId$i((()=>createBaseVNode("div",{class:"title"},"地图同步",-1))),_hoisted_24$1={class:"opera"},_sfc_main$I=defineComponent({__name:"MapList",props:{visible:{type:Boolean,default:!1},mapList:{default:()=>[]}},emits:["back","add","del","edit","editName","selectMap","asyncToRobot","asyncFormRobot"],setup(e,{emit:t}){const n=e,[i,o]=useToggle(!1),r=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAdRJREFUaEPtWVtuAzEI9J6s4WRtTkZysrasnMpywDv4EW0q8heJhRnAYxtvadGPmb9SSp/Z/ZWI5P/03zbdY3bIzN+VbyKi2+x4Swgw8yWlxEEAKFdUQEvSKVoogxAVkX52qcgMApWKmQJgtpCiIjCJUQIVeCnyTRho1fYQkO8hEiMEFPA7biJSsbYIlBtRSR4lITIq7dfMYOnYAt9KXFOFehwqgKT8hxtYb6xDGe11DEj4n8lIjEMCEsXblx7w2X997IDXG0TAImEtrA4C5XqBwYshTKAiIT0ti/mwtxEyxZ4j5nfPydVFAAHzapsg8OqM1/GiAlGBwQzsLZRlzHQ1Sy69WFu4Hpi2xjZexjOPs15QqD3/AisOg9ZnVyGgbePaB0umClogMKn7px4C0DEazXDLzrhPqJ+8fws9aCELZkZ2PT4QcYmNzJPRFbZRgRVZ9fiMCniytcLWVYG8Q35kICuulO4xJkzAM+7zZnpkjAkReOuxysjQCa3ESIzVo0Xp6QsyJukl8X+Hu8Y9ATpSn2W83j3uGyGQr7hPo/2e94HyqRTKfHU0H3pmLdZEc4wJySiqJjMJoDGDgHEpj5f607XQrMeQmtiSNaBIoUvF0OyL3Q9Y9E4yt4s8egAAAABJRU5ErkJggg==",module.meta.url).href,{topLeft:a}=storeToRefs(useDeviceStore()),s=ref();let l;return onMounted((()=>{l=new BScroll(s.value,{scrollX:!0,probeType:3,click:!0})})),watch((()=>n.mapList),(()=>setTimeout((()=>l.refresh()),300)),{deep:!0}),(e,n)=>{const l=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$G,[createBaseVNode("div",_hoisted_2$B,[createBaseVNode("div",{class:"btn-back",onClick:n[0]||(n[0]=()=>t("back"))},_hoisted_4$n),createBaseVNode("span",_hoisted_5$h,toDisplayString$1(e.$t("Slam.menu_1")),1),createBaseVNode("div",{class:"btn-extra",onClick:n[1]||(n[1]=()=>unref(o)())},_hoisted_7$d)]),createBaseVNode("div",{ref_key:"listWrap",ref:s,class:"map_list"},[createBaseVNode("div",{class:"list_wrapper",style:normalizeStyle({paddingLeft:`${unref(a)+20}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.mapList,((n,i)=>(openBlock(),createElementBlock("div",{key:i,class:"map_item",onClick:()=>{n.isSelected||t("selectMap",i)}},[createBaseVNode("div",_hoisted_9$8,[n.pcdImageUrl?(openBlock(),createElementBlock("img",{key:1,class:"map_img",src:n.pcdImageUrl||""},null,8,_hoisted_11$5)):(openBlock(),createElementBlock("img",{key:0,class:"loading_img",src:unref(r)},null,8,_hoisted_10$6))]),createBaseVNode("div",_hoisted_12$3,[createBaseVNode("div",_hoisted_13$3,[createBaseVNode("div",_hoisted_14$3,[createBaseVNode("span",_hoisted_15$2,toDisplayString$1(n.pcdMapName||e.$t("Slam.msg_22")),1),n.createTime?(openBlock(),createElementBlock("span",_hoisted_16$2,toDisplayString$1(n.createTime),1)):createCommentVNode("",!0)]),createBaseVNode("div",{class:"map_name_edit",onClick:withModifiers((()=>t("editName",i)),["stop"])},[createVNode(l,{name:"slam/icon_edit",style:{width:"15px",height:"16px"}})],8,_hoisted_17$2)]),createBaseVNode("div",_hoisted_18$2,[createBaseVNode("div",{class:"btn_add_route",onClick:withModifiers((()=>t("edit",i)),["stop"])},[createVNode(l,{name:"slam/icon_add_route",style:{width:"16px",height:"14px"}}),createTextVNode(" "+toDisplayString$1(`${n.hasTopMap?e.$t("Slam.editRoadNetWork"):e.$t("Slam.addRoadNetWork")}`),1)],8,_hoisted_19$2),createBaseVNode("div",{class:"btn_del",onClick:withModifiers((()=>t("del",i)),["stop"])},[createVNode(l,{name:"slam/icon_del",style:{width:"14px",height:"14px"}}),createTextVNode(" "+toDisplayString$1(e.$t("Slam.del")),1)],8,_hoisted_20$1)])]),1==e.mapList.length&&0==i||n.isSelected?(openBlock(),createElementBlock("div",_hoisted_21$1,[createVNode(l,{name:"slam/icon_select_map",style:{width:"36px",height:"36px"}})])):createCommentVNode("",!0)],8,_hoisted_8$d)))),128))],4)],512),createBaseVNode("div",{class:"btn_add_map",onClick:n[2]||(n[2]=()=>t("add","slamMapPage"))},[createVNode(l,{name:"slam/icon_btn_add_map"})]),createBaseVNode("div",{class:normalizeClass(["async_modal_wrapper",unref(i)&&"show"]),onClick:n[5]||(n[5]=withModifiers((()=>unref(o)(!1)),["stop"]))},[createBaseVNode("div",_hoisted_22$1,[_hoisted_23$1,createBaseVNode("div",_hoisted_24$1,[createBaseVNode("div",{class:"btn cancel",onClick:n[3]||(n[3]=()=>t("asyncToRobot"))}," 本机同步至机器狗 "),createBaseVNode("div",{class:"btn sure",onClick:n[4]||(n[4]=()=>t("asyncFormRobot"))}," 机器狗同步至本机 ")])])],2)])}}}),MapList$1=_export_sfc(_sfc_main$I,[["__scopeId","data-v-dd4b030d"]]),_imports_0$5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAICAYAAADJEc7MAAAAAXNSR0IArs4c6QAAAONJREFUKFOFzrFKA1EQheH/NGokV5t9hw37AlqIFoKmEAN2sbFLGUECElKEaGftEwg+irBgZaNbGCy2XAhsZTky4SqJik45c76ZUVEU7TRN+8BA0jN/lJmtAxdlWW6qqqqQJMkY2AbOJE1/s2a2ClwCx3Vd9+QhM1sDRsARcCLpbRGb2QpwBbSBrqSXOYzYN058I7AjaRb7nrkGToEDSa/e/4Ix1ABugD1gS9K7mfl758C+X/o8tAQjbgK3QAbcA0PgUNLT4vs/YMQBuAN2gQ7wIMn+hR7I83wjhNDKsuzxO/L5B+wPRjzYvdDMAAAAAElFTkSuQmCC";var TaskType=(e=>(e[e.Stand=1]="Stand",e[e.Photo=2]="Photo",e[e.Video=3]="Video",e))(TaskType||{});const TaskTypeMap={1:"task_1",2:"task_2",3:"task_3"},_hoisted_1$F=["value","onClick"],_sfc_main$H=defineComponent({__name:"Input",props:{value:{default:"3"}},emits:["update:value"],setup(e,{emit:t}){const n=ref(),i=()=>{let e=n.value.value.replace(/\D/g,"");n.value.value=e,t("update:value",e)},o=()=>{n.value.value?parseInt(n.value.value)>60&&(n.value.value="60",t("update:value","60")):(n.value.value="0",t("update:value","0"))};return(e,t)=>(openBlock(),createElementBlock("input",{ref_key:"inputRef",ref:n,class:"custom-input",value:e.value,type:"number",maxlength:"5",max:"100",min:"1",onInput:i,onBlur:o,onClick:withModifiers((e=>!1),["stop"])},null,40,_hoisted_1$F))}}),_withScopeId$h=e=>(pushScopeId("data-v-68682856"),e=e(),popScopeId(),e),_hoisted_1$E={class:"all_task_list_wrap"},_hoisted_2$A=_withScopeId$h((()=>createBaseVNode("span",null,"s",-1))),_hoisted_3$r=_withScopeId$h((()=>createBaseVNode("span",null,"s",-1))),_sfc_main$G=defineComponent({__name:"AllTaskList",emits:["select"],setup(e,{emit:t}){const n=ref("3"),i=ref("3"),o=(e,n)=>{t("select",e,n)};return(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$E,[createBaseVNode("div",null,[createBaseVNode("div",{class:"all_task_list_item",onClick:t[1]||(t[1]=()=>o(unref(TaskType).Stand,unref(n)))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_1")),1),createVNode(_sfc_main$H,{value:unref(n),"onUpdate:value":t[0]||(t[0]=e=>isRef(n)?n.value=e:null)},null,8,["value"]),_hoisted_2$A]),createBaseVNode("div",{class:"all_task_list_item",onClick:t[2]||(t[2]=()=>o(unref(TaskType).Photo))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_2")),1)]),createBaseVNode("div",{class:"all_task_list_item",onClick:t[4]||(t[4]=()=>o(unref(TaskType).Video,unref(i)))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_3")),1),createVNode(_sfc_main$H,{value:unref(i),"onUpdate:value":t[3]||(t[3]=e=>isRef(i)?i.value=e:null)},null,8,["value"]),_hoisted_3$r])])]))}}),AllTaskList$1=_export_sfc(_sfc_main$G,[["__scopeId","data-v-68682856"]]),_withScopeId$g=e=>(pushScopeId("data-v-80b8a553"),e=e(),popScopeId(),e),_hoisted_1$D=_withScopeId$g((()=>createBaseVNode("div",{class:"title_wrapper"},null,-1))),_hoisted_2$z={class:"form_input"},_hoisted_3$q={class:"form_input"},_hoisted_4$m={class:"btn_wrapper"},_hoisted_5$g=_withScopeId$g((()=>createBaseVNode("span",null,"取消",-1))),_hoisted_6$d=[_hoisted_5$g],_hoisted_7$c=_withScopeId$g((()=>createBaseVNode("span",null,"确定",-1))),_hoisted_8$c=[_hoisted_7$c],_sfc_main$F=defineComponent({__name:"GuidedInfoWindow",props:{currPointId:{},currGuided:{},visible:{}},emits:["close","sure"],setup(e,{emit:t}){const n=e,i=ref(""),o=ref(""),r=()=>{t("sure",{title:i.value,content:o.value}),t("close")};return watch((()=>n.currPointId.value),(()=>{var e,t,r;null!==(e=n.currGuided)&&void 0!==e&&e.value&&(i.value=(null===(t=n.currGuided.value)||void 0===t?void 0:t.title)||"",o.value=(null===(r=n.currGuided.value)||void 0===r?void 0:r.content)||"")}),{immediate:!0}),(e,n)=>{var a;return openBlock(),createElementBlock("div",{class:normalizeClass(["guided_info_window",(null===(a=e.visible)||void 0===a?void 0:a.value)&&"show"])},[_hoisted_1$D,createBaseVNode("div",_hoisted_2$z,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>isRef(i)?i.value=e:null),type:"text",placeholder:"请输入导览信息"},null,512),[[vModelText,unref(i)]])]),createBaseVNode("div",_hoisted_3$q,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":n[1]||(n[1]=e=>isRef(o)?o.value=e:null),class:"custom_h",placeholder:"请输入导览信息"},null,512),[[vModelText,unref(o)]])]),createBaseVNode("div",_hoisted_4$m,[createBaseVNode("div",{class:"btn_cancel",onClick:n[2]||(n[2]=()=>t("close"))},_hoisted_6$d),createBaseVNode("div",{class:"btn_confirm",onClick:r},_hoisted_8$c)])],2)}}}),GuidedInfoWindow=_export_sfc(_sfc_main$F,[["__scopeId","data-v-80b8a553"]]),_withScopeId$f=e=>(pushScopeId("data-v-35e4765c"),e=e(),popScopeId(),e),_hoisted_1$C={class:"task_wrapper"},_hoisted_2$y=_withScopeId$f((()=>createBaseVNode("div",{class:"title"},"导览信息",-1))),_hoisted_3$p=_withScopeId$f((()=>createBaseVNode("span",null,"编辑导览信息",-1))),_hoisted_4$l=[_hoisted_3$p],_hoisted_5$f={class:"title",style:{"margin-top":"10px"}},_hoisted_6$c={class:"task_list_wrapper"},_hoisted_7$b={class:"curr_selected_task"},_hoisted_8$b=["onClick"],_hoisted_9$7=["onClick"],_hoisted_10$5={key:0,style:{"margin-left":"4px"}},_hoisted_11$4=["onClick"],_hoisted_12$2=_withScopeId$f((()=>createBaseVNode("img",{src:_imports_0$5},null,-1))),_hoisted_13$2=[_hoisted_12$2],_hoisted_14$2={class:"all_task_list"},_sfc_main$E=defineComponent({__name:"Task",props:{currPointId:{}},setup(e,{expose:t}){const n=e,[i,o]=useToggle(!1),r=ref(),a=new Map,s=ref([]),l=ref(),c=computed((()=>n.currPointId));let u,d=ref(0);const p=()=>{s.value.push({type:TaskType.Stand,data:"3",open:!1}),window.setTimeout((()=>u.refresh()),300)},f=e=>{s.value[e].open=!s.value[e].open,window.setTimeout((()=>u.refresh()),300)},g=e=>{l.value=e;const t=a.get(d.value);t&&(t.guidedInfo=e)};return watch((()=>n.currPointId),(e=>{e?(e=>{const t=a.get(e);if(t)s.value=t.taskList,l.value=t.guidedInfo;else{const t=[];s.value=t,a.set(e,{taskList:t,guidedInfo:{}})}d.value=e})(e):d.value=0})),onMounted((()=>{u=new BScroll(r.value,{scrollY:!0,probeType:3,click:!0}),function(){const e=document.getElementById("guidedModalWrapper");if(!e)return;const t=h(createVNode(GuidedInfoWindow,{visible:i,currPointId:c,currGuided:l,onSure:g,onClose:()=>i.value=!1},null));e&&render(t,e)}()})),t({delPoint:e=>{a.delete(e),d.value===e&&(s.value=[])},getAllTaskJson:()=>{const e={};for(const[t,n]of a.entries())e[`${t}`]=n;return e},initTaskList:e=>{a.clear(),e.forEach((([e,t])=>{var n,i;const o=parseInt(e),r=(t.task||[]).map((e=>({type:e.type,data:e.data,open:!1}))),s={title:decodePako((null===(n=t.guided)||void 0===n?void 0:n.title)||""),content:decodePako((null===(i=t.guided)||void 0===i?void 0:i.content)||"")};a.set(o,{taskList:r,guidedInfo:s})}))},queryPointTask:e=>a.get(e)}),(e,t)=>{const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$C,[_hoisted_2$y,createBaseVNode("div",{class:"btn_ai_info",onClick:t[0]||(t[0]=()=>unref(o)(!0))},_hoisted_4$l),createBaseVNode("div",_hoisted_5$f,toDisplayString$1(e.$t("Slam.msg_23")),1),createBaseVNode("div",{ref_key:"listRef",ref:r,class:"task_list"},[createBaseVNode("div",_hoisted_6$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),((t,i)=>(openBlock(),createElementBlock("div",{key:i,class:normalizeClass(["task_item",t.open?"open":"close"])},[createBaseVNode("div",_hoisted_7$b,[createBaseVNode("div",{class:"curr_task_del_btn",onClick:()=>(e=>{s.value.splice(e,1),window.setTimeout((()=>u.refresh()),300)})(i)},[createVNode(n,{name:"slam/icon_del_task"})],8,_hoisted_8$b),createBaseVNode("span",{onClick:()=>f(i)},[createBaseVNode("span",null,toDisplayString$1(e.$t(`Slam.${unref(TaskTypeMap)[t.type]}`)),1),[unref(TaskType).Stand,unref(TaskType).Video].includes(t.type)?(openBlock(),createElementBlock("span",_hoisted_10$5,toDisplayString$1(t.data)+"s ",1)):createCommentVNode("",!0)],8,_hoisted_9$7),createBaseVNode("div",{class:"arrow_wrap",onClick:()=>f(i)},_hoisted_13$2,8,_hoisted_11$4)]),createBaseVNode("div",_hoisted_14$2,[createVNode(AllTaskList$1,{onSelect:(e,t)=>((e,t,n)=>{s.value[e]={type:t,data:n,open:!1}})(i,e,t)},null,8,["onSelect"])])],2)))),128)),createBaseVNode("div",{class:"add_task_btn",onClick:p},[createVNode(n,{name:"slam/icon_add_task"})])])],512)])}}}),Task$1=_export_sfc(_sfc_main$E,[["__scopeId","data-v-35e4765c"]]),_imports_0$4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAl9JREFUaEPdWltywyAMNCdr88etmtyKv6Ync0cOeDDmsXq4duqZTicJiF20EiDsJqNn9v5zmib6+8hM0md6nvH/T/rNhXC3GNppjETQXxG4xNSDOmnIiAjM3tPsEXDL5yEhwiJgMOMIYRYRmMDs/bdCKgjwvM3ThXBDOg0JxFkn8Gc8NxdCSgDV8bsEDtI6dyK6kmoSuAj4RLZJokrgZNm0PFSVU4vAzPXzX7R3Iezw7r4Asg0FVVphLXGnYO3Z3mWnDQFA96sbgbYccqvGAflupFQS6Elnx96IxC5AByrY4FgJAGCqiwvQr+eJanaZvR/F4NovJzDqREBaA0r2RipbKaAXAsxZVA0c3WFhY4kFCQGtJyzAL2cM2i8lAoh8Si1LgEj6NGOIZOSY8tGQMAUfgdy0BFA5HQH+NbbSA93NVrRdPTIajfskAlYHFfgkZQT+FciGBJpyygPHEPxKQJKB2KurYL2B9lLkgbcnYBUDp0nIisBbB3Evzx+ZRk3WAWSRQtpAQVs0WgjQEU5a9+EA47RFyTzefzMX8zM3kDWzqembe2axkzzAkZEFADMb/+NIiS7ztcKScm/T8sRI0vtDPRALVymr0LqyKqesC41i4QqFrY3XpKVFcthR5UV5aTHlqAN2qOjC1G0HFXdjLIykZAKIaQQvr6NZiQlA05x3wZFJSVIy1ACt9ZVdMWUkzpST7pKvOIyPFhfLmbe7Zj2wolAjTLc0JJnu1WrecXhPXBtFuX1oeQo+kqoJFEFOH6XvTbBnvGQv8kDHK+mn9MpN+boN/U6v3JDGYZn0gusXUNC97eOr7cQAAAAASUVORK5CYII=",_hoisted_1$B={class:"tip_body"},_hoisted_2$x=["innerHTML"],_sfc_main$D=defineComponent({__name:"Tip",emits:["update:visible"],setup(e,{expose:t,emit:n}){const i=ref(!1),o=ref("");let r=0;const a=(e=3)=>{r&&window.clearTimeout(r),r=window.setTimeout((()=>{i.value=!1,n("update:visible",!1)}),1e3*e)},s=()=>{i.value=!1};return t({showTip:(e,t=3)=>{i.value?(i.value=!1,window.setTimeout((()=>{o.value=e,i.value=!0,a(t)}),300)):(o.value=e,i.value=!0,a(t))}}),(e,t)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["tip_wrapper",!unref(i)&&"hide"])},[createBaseVNode("div",_hoisted_1$B,[createBaseVNode("div",{innerHTML:unref(o)||""},null,8,_hoisted_2$x),createBaseVNode("img",{class:"icon_close",src:_imports_0$4,onClick:s})])],2))}}),Tip$1=_export_sfc(_sfc_main$D,[["__scopeId","data-v-f5eace10"]]),_imports_0$3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAyCAYAAABLXmvvAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAMgAAAADOcPUAAAACwElEQVRYCb2XT2xNQRSH31Vi0aqEICF2doQSsZB00U0X1MIGGyIkSISQiNjZ2NnQSKzFyrJaEjZsbPwpXQliU3QhWChSSXm+89z7cjuduWfmvpk3ycm7c+Y3v29mOqfvvqzh2ZrN5iTS7Z5yTXZLE7TGgQ4QsdprjHqXeJEbjWOeOk02h+BglmU/NWGD1S0nvkba7gkVWAgAHogEvVN4en0CfRAB/B6Pfi+giBBvJP50CP7N/J0mVLtcR5mgaUxPs3+Ry/TcTDr7rDIj5Ig6aWNOgGsA2lAnROZOE6tc/lXH2EntzgM8xBF/c4GteVa6kvhF1G2XrMZaEtrJukTmSfllGsM6zsSnNcEzzFtrNdWSTNxSEyr1PqT5F+O2y1X3Ul3hMj0qjIM+WfEy4nONHT9mTk8IbKkh3kd/jZHz6cpLwjngPtoJTubNAiETJ2rsNmTKfcStk2lfexLrWcU0EXRkC1Ze3ZlieJDdzoqsfLmO0E8FncF7pIAKuN3Y8duQMwvQ/kC7ow0qPzAwGGAUIpXalgu7qBVHXbd2FxkaifMc77iR+99lRX2EHEfsdsMKLJLQjscm4nePqL6oCJ5EBr/Cr6/YmOtTXm/WMdiuZ4dwA/lnHjopm138XT85fMLSLO4yoTW5J7F+W7VecXsw/KhQpWxGwrajqDHcr0Bl+KxiEz6M6UMFPBruqswAuIn4WwGWb7PqslEY1mFMr1ZAXzKmlo3VuCqJqfw8/eIAy2WTEovfMD7sgM6SH4hPzB0xt/1Hmye/NyV0q2O3Z5JBxRjoTQv4emroCqDfDfA4/eK7Ow0fwCkDOkm/Nw2t5ApkqgT+wLO8faZtQHaXoFI229ISc3dAt3OwlM2ebkFXA5vLwae7AhUIwAs59Fo3ofIK9I64S6Qtm/KugA0TL4j0ZWOAR4GmLxsD2g90cznXjed/V7yu8dTOct4AAAAASUVORK5CYII=";var Easing=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return this.None(e)},Out:function(e){return this.None(e)},InOut:function(e){return this.None(e)}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Easing.Bounce.In(2*e):.5*Easing.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),now$2=function(){return performance.now()},Group$3=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=now$2()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],r=!t;o&&!1===o.update(e,r)&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=Interpolation.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e}}},Sequence=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),mainGroup=new Group$3,Tween$2=function(){function e(e,t){void 0===t&&(t=mainGroup),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=now$2()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,n,i,o){for(var r in n){var a=e[r],s=Array.isArray(a),l=s?"array":typeof a,c=!s&&Array.isArray(n[r]);if("undefined"!==l&&"function"!==l){if(c){if(0===(m=n[r]).length)continue;for(var u=[a],d=0,h=m.length;d<h;d+=1){var p=this._handleRelativeValue(a,m[d]);if(isNaN(p)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}u.push(p)}c&&(n[r]=u)}if("object"!==l&&!s||!a||c)(void 0===t[r]||o)&&(t[r]=a),s||(t[r]*=1),i[r]=c?n[r].slice().reverse():t[r]||0;else{t[r]=s?[]:{};var f=a;for(var g in f)t[r][g]=f[g];i[r]=s?[]:{};var m=n[r];if(!this._isDynamic){var _={};for(var g in m)_[g]=m[g];n[r]=m=_}this._setupProperties(f,t[r],m,i[r],o)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=now$2()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=now$2()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=mainGroup),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=Easing.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=Interpolation.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=now$2()),void 0===t&&(t=!0),this._isPaused)return!0;var n,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var r=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,r),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var o in n)if(void 0!==t[o]){var r=t[o]||0,a=n[o],s=Array.isArray(e[o]),l=Array.isArray(a);!s&&l?e[o]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[o],r,a,i):"number"==typeof(a=this._handleRelativeValue(r,a))&&(e[o]=r+(a-r)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}();Sequence.nextId;var TWEEN=mainGroup;TWEEN.getAll.bind(TWEEN),TWEEN.removeAll.bind(TWEEN),TWEEN.add.bind(TWEEN),TWEEN.remove.bind(TWEEN);var update=TWEEN.update.bind(TWEEN);function Tween$1(e,t,n,i,o){new Tween$2(e).to(t,n).easing(Easing.Quadratic.InOut).onUpdate((e=>i&&i(e))).onComplete((()=>o&&o())).start(),function e(){update(),requestAnimationFrame(e)}()}const _hoisted_1$A={key:0,class:"power-wrapper"},_hoisted_2$w={class:"power-img"},_hoisted_3$o={key:1,class:"power-blot"},_hoisted_4$k={key:2,class:"icon-blot",src:_imports_0$3},_hoisted_5$e={key:3,class:"power-num"},_sfc_main$C=defineComponent({__name:"Power",setup(e){const{series:t,mode:n}=storeToRefs(useDeviceStore()),i=ref(0),[o,r]=useToggle(!1),a=inject("webRTC");let s=!0;const l=throttle((e=>{var t,n,a,l;s?(Tween$1({val:0},{val:(null===(a=e.bms_state)||void 0===a?void 0:a.soc)||0},1e3,(e=>{i.value=Math.floor(e.val)})),s=!1):i.value=(null===(l=e.bms_state)||void 0===l?void 0:l.soc)||0;(null===(t=e.bms_state)||void 0===t?void 0:t.current)>0&&!o.value?r(!0):(null===(n=e.bms_state)||void 0===n?void 0:n.current)<0&&o.value&&r(!1)}),1e3);useRTC((e=>{null==e||e.onMessage((e=>{"msg"===e.type&&("G1"==t.value||"H1"==t.value&&"-2"==n.value?e.topic===RTC_TOPIC.BMS_STATE&&l({bms_state:e.data}):e.topic===RTC_TOPIC.LOW_STATE&&l(e.data))}))}),a)();return(e,n)=>{return"H1"!==unref(t)?(openBlock(),createElementBlock("div",_hoisted_1$A,[createBaseVNode("div",_hoisted_2$w,[unref(o)?(openBlock(),createElementBlock("div",_hoisted_3$o)):(openBlock(),createElementBlock("div",{key:0,class:"power-surplus",style:normalizeStyle({width:`${unref(i)}%`,backgroundColor:""+(r=unref(i),!r||r<0?"white":r<=33?"#FF3D3D":r<=66?"#FCD335":"#42CF55")})},null,4)),unref(o)?(openBlock(),createElementBlock("img",_hoisted_4$k)):(openBlock(),createElementBlock("span",_hoisted_5$e,toDisplayString$1(unref(i))+"%",1))])])):createCommentVNode("",!0);var r}}}),Power=exports("P",_export_sfc(_sfc_main$C,[["__scopeId","data-v-9bf4cf65"]])),_hoisted_1$z={class:"slam_top_bar_wrapper"},_hoisted_2$v={class:"left"},_hoisted_3$n={class:"title"},_hoisted_4$j={class:"right"},_sfc_main$B=defineComponent({__name:"TopBar",props:{title:{}},emits:["close"],setup(e,{emit:t}){const{topLeft:n}=storeToRefs(useDeviceStore()),i=()=>{t("close"),webToApp("backToApp","")};return(e,t)=>{const o=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$z,[createBaseVNode("div",{class:"top_bar_cont",style:normalizeStyle({paddingLeft:`${Math.max(unref(n),30)}px`})},[createBaseVNode("div",_hoisted_2$v,[createBaseVNode("div",{class:"btn-back",onClick:i},[createVNode(o,{class:"icon-back",name:"slam/icon_left_arrow"})]),createBaseVNode("span",_hoisted_3$n,toDisplayString$1(e.title),1)]),createBaseVNode("div",_hoisted_4$j,[createVNode(Power)])],4)])}}}),TopBar$2=_export_sfc(_sfc_main$B,[["__scopeId","data-v-bf914954"]]),_hoisted_1$y={class:"video-wrapper"},_hoisted_2$u=["id"],_sfc_main$A=defineComponent({__name:"VideoSlam",props:{isPhoto:{type:Boolean},photoImg:{},videoType:{},videoId:{},visible:{type:Boolean}},emits:["update:isPhoto"],setup(e,{emit:t}){const n=e,i=inject("webRTC"),{series:o}=storeToRefs(useDeviceStore()),r=ref(),a=ref();let s=0;const l=()=>{useRTC((e=>{"connected"===(null==e?void 0:e.getConnectionState())?e.playVideo(o.value,n.videoId):null==e||e.onConnectionStateChange((t=>{"connected"===t&&e.playVideo(o.value,n.videoId)}))}),i)()},c=()=>{n.visible&&(null==i||i.publish(["G1","H1"].includes(o.value)?RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB:RTC_TOPIC.FRONT_VIDEO_HUB,"on",DataChannelType.VID),l())},u=useRTC((e=>{null==i||i.onValidationOK(c),r.value&&(r.value.oncanplaythrough=()=>{console.log("开始播放视频")},r.value.onerror=()=>{console.log("video ---  onerror")},r.value.onemptied=()=>{var e;console.log("video ---  onemptied"),null===(e=document.getElementById(n.videoId))||void 0===e||e.play()},r.value.onloadeddata=()=>{console.log("video ---  onloadeddata"),s&&window.clearTimeout(s)},r.value.onloadedmetadata=()=>{console.log("video ---  onloadedmetadata"),s&&window.clearTimeout(s)},n.visible&&l())}),i);return onMounted(u),onUnmounted((()=>{null==i||i.removeValidationOKListen(c)})),listenAppToWeb("appSendWebviewState",(e=>{"0"===e&&s&&window.clearTimeout(s),"1"===e&&(s=window.setTimeout((()=>{console.log("开启视频后，十秒未出现画面，再次挂载视频流"),useRTC((e=>{e.playVideo(o.value)}),i)}),1e4))})),watch((()=>n.visible),(e=>{e&&l()})),watch((()=>n.isPhoto),(e=>{e&&window.setTimeout((()=>{t("update:isPhoto",!1)}),500)})),watch((()=>n.photoImg),(e=>{e&&showScreenshot(n.photoImg,document.getElementById("album-entrance"),a.value)})),onUnmounted((()=>{window.clearInterval(0)})),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$y,[createBaseVNode("video",{id:e.videoId,ref_key:"videoRef",ref:r,name:"unitreeVideoDom",class:"video-class",autoplay:"false",loop:"",muted:"",playsinline:"true","webkit-playsinline":"true","x5-playsinline":"true","x-webkit-airplay":"true"},null,8,_hoisted_2$u)]))}}),VideoSlam$1=_export_sfc(_sfc_main$A,[["__scopeId","data-v-d059a4e5"]]);function mitt(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map((function(e){e(n)})),(i=e.get("*"))&&i.slice().map((function(e){e(t,n)}))}}}const bus=mitt(),REVISION="160",MOUSE={ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=exports("Y",2),CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=exports("a7",303),EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;
/**
       * @license
       * Copyright 2010-2023 Three.js Authors
       * SPDX-License-Identifier: MIT
       */class EventDispatcher{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD$1=Math.PI/180,RAD2DEG$1=180/Math.PI;function generateUUID(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(_lut[255&e]+_lut[e>>8&255]+_lut[e>>16&255]+_lut[e>>24&255]+"-"+_lut[255&t]+_lut[t>>8&255]+"-"+_lut[t>>16&15|64]+_lut[t>>24&255]+"-"+_lut[63&n|128]+_lut[n>>8&255]+"-"+_lut[n>>16&255]+_lut[n>>24&255]+_lut[255&i]+_lut[i>>8&255]+_lut[i>>16&255]+_lut[i>>24&255]).toLowerCase()}function clamp(e,t,n){return Math.max(t,Math.min(n,e))}function euclideanModulo(e,t){return(e%t+t)%t}function mapLinear(e,t,n,i,o){return i+(e-t)*(o-i)/(n-t)}function inverseLerp(e,t,n){return e!==t?(n-e)/(t-e):0}function lerp(e,t,n){return(1-n)*e+n*t}function damp(e,t,n,i){return lerp(e,t,1-Math.exp(-n*i))}function pingpong(e,t=1){return t-Math.abs(euclideanModulo(e,2*t)-t)}function smoothstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}function smootherstep(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)}function randInt(e,t){return e+Math.floor(Math.random()*(t-e+1))}function randFloat(e,t){return e+Math.random()*(t-e)}function randFloatSpread(e){return e*(.5-Math.random())}function seededRandom(e){void 0!==e&&(_seed=e);let t=_seed+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function degToRad(e){return e*DEG2RAD$1}function radToDeg(e){return e*RAD2DEG$1}function isPowerOfTwo(e){return!(e&e-1)&&0!==e}function ceilPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function floorPowerOfTwo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function setQuaternionFromProperEuler(e,t,n,i,o){const r=Math.cos,a=Math.sin,s=r(n/2),l=a(n/2),c=r((t+i)/2),u=a((t+i)/2),d=r((t-i)/2),h=a((t-i)/2),p=r((i-t)/2),f=a((i-t)/2);switch(o){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function denormalize(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function normalize$3(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD:DEG2RAD$1,RAD2DEG:RAD2DEG$1,generateUUID:generateUUID,clamp:clamp,euclideanModulo:euclideanModulo,mapLinear:mapLinear,inverseLerp:inverseLerp,lerp:lerp,damp:damp,pingpong:pingpong,smoothstep:smoothstep,smootherstep:smootherstep,randInt:randInt,randFloat:randFloat,randFloatSpread:randFloatSpread,seededRandom:seededRandom,degToRad:degToRad,radToDeg:radToDeg,isPowerOfTwo:isPowerOfTwo,ceilPowerOfTwo:ceilPowerOfTwo,floorPowerOfTwo:floorPowerOfTwo,setQuaternionFromProperEuler:setQuaternionFromProperEuler,normalize:normalize$3,denormalize:denormalize};class Vector2{constructor(e=0,t=0){Vector2.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),o=this.x-e.x,r=this.y-e.y;return this.x=o*n-r*i+e.x,this.y=o*i+r*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}exports("a2",Vector2);class Matrix3{constructor(e,t,n,i,o,r,a,s,l){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,o,r,a,s,l)}set(e,t,n,i,o,r,a,s,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=o,c[5]=s,c[6]=n,c[7]=r,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,r=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],g=i[3],m=i[6],_=i[1],v=i[4],b=i[7],T=i[2],A=i[5],y=i[8];return o[0]=r*f+a*_+s*T,o[3]=r*g+a*v+s*A,o[6]=r*m+a*b+s*y,o[1]=l*f+c*_+u*T,o[4]=l*g+c*v+u*A,o[7]=l*m+c*b+u*y,o[2]=d*f+h*_+p*T,o[5]=d*g+h*v+p*A,o[8]=d*m+h*b+p*y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*r*c-t*a*l-n*o*c+n*a*s+i*o*l-i*r*s}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*r-a*l,d=a*s-c*o,h=l*o-r*s,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(a*n-i*r)*f,e[3]=d*f,e[4]=(c*t-i*s)*f,e[5]=(i*o-a*t)*f,e[6]=h*f,e[7]=(n*s-l*t)*f,e[8]=(r*t-n*o)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,o,r,a){const s=Math.cos(o),l=Math.sin(o);return this.set(n*s,n*l,-n*(s*r+l*a)+r+e,-i*l,i*s,-i*(-l*r+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(_m3.makeScale(e,t)),this}rotate(e){return this.premultiply(_m3.makeRotation(-e)),this}translate(e,t){return this.premultiply(_m3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function createElementNS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function createCanvasElement(){const e=createElementNS("canvas");return e.style.display="block",e}const _cache={};function warnOnce(e){e in _cache||(_cache[e]=!0,console.warn(e))}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=(new Matrix3).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=(new Matrix3).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,toReference:e=>e,fromReference:e=>e},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,toReference:e=>e.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:e=>e.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,toReference:e=>e.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:e=>e.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!SUPPORTED_WORKING_COLOR_SPACES.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=COLOR_SPACES[t].toReference;return(0,COLOR_SPACES[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return COLOR_SPACES[e].primaries},getTransfer:function(e){return e===NoColorSpace?LinearTransfer:COLOR_SPACES[e].transfer}};function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_canvas&&(_canvas=createElementNS("canvas")),_canvas.width=e.width,_canvas.height=e.height;const n=_canvas.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_canvas}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=createElementNS("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),o=i.data;for(let e=0;e<o.length;e++)o[e]=255*SRGBToLinear(o[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*SRGBToLinear(t[e]/255)):t[e]=SRGBToLinear(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _sourceId=0;class Source{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(serializeImage(i[t].image)):e.push(serializeImage(i[t]))}else e=serializeImage(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ImageUtils.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,n=ClampToEdgeWrapping,i=ClampToEdgeWrapping,o=LinearFilter,r=LinearMipmapLinearFilter,a=RGBAFormat,s=UnsignedByteType,l=Texture.DEFAULT_ANISOTROPY,c=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=o,this.minFilter=r,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(e){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=UVMapping,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(e=0,t=0,n=0,i=1){Vector4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,o=this.w,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i+r[12]*o,this.y=r[1]*t+r[5]*n+r[9]*i+r[13]*o,this.z=r[2]*t+r[6]*n+r[10]*i+r[14]*o,this.w=r[3]*t+r[7]*n+r[11]*i+r[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,o;const r=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],p=s[9],f=s[2],g=s[6],m=s[10];if(Math.abs(c-d)<r&&Math.abs(u-f)<r&&Math.abs(p-g)<r){if(Math.abs(c+d)<a&&Math.abs(u+f)<a&&Math.abs(p+g)<a&&Math.abs(l+h+m-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,_=(m+1)/2,v=(c+d)/4,b=(u+f)/4,T=(p+g)/4;return e>s&&e>_?e<r?(n=0,i=.707106781,o=.707106781):(n=Math.sqrt(e),i=v/n,o=b/n):s>_?s<r?(n=.707106781,i=0,o=.707106781):(i=Math.sqrt(s),n=v/i,o=T/i):_<r?(n=.707106781,i=.707106781,o=0):(o=Math.sqrt(_),n=b/o,i=T/o),this.set(n,i,o,t),this}let _=Math.sqrt((g-p)*(g-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(u-f)/_,this.z=(d-c)/_,this.w=Math.acos((l+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Texture(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Source(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Data3DTexture extends Texture{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,o,r,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=o[r+0],h=o[r+1],p=o[r+2],f=o[r+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==d||l!==h||c!==p){let e=1-a;const t=s*d+l*h+c*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const o=Math.sqrt(i),r=Math.atan2(o,t*n);e=Math.sin(e*r)/o,a=Math.sin(a*r)/o}const o=a*n;if(s=s*e+d*o,l=l*e+h*o,c=c*e+p*o,u=u*e+f*o,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,o,r){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=o[r],d=o[r+1],h=o[r+2],p=o[r+3];return e[t]=a*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-s*u,e[t+3]=c*p-a*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,o=e._z,r=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(o/2),d=s(n/2),h=s(i/2),p=s(o/2);switch(r){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],o=t[8],r=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(o-l)*e,this._z=(r-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(i+r)/e,this._z=(o+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(o-l)/e,this._x=(i+r)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(r-i)/e,this._x=(o+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,o=e._z,r=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+r*a+i*l-o*s,this._y=i*c+r*s+o*a-n*l,this._z=o*c+r*l+n*s-i*a,this._w=r*c-n*a-i*s-o*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,o=this._z,r=this._w;let a=r*e._w+n*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=r,this._x=n,this._y=i,this._z=o,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*r+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*o+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=r*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=o*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(o),n*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}exports("Q",Quaternion);class Vector3{constructor(e=0,t=0,n=0){Vector3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*i,this.y=o[1]*t+o[4]*n+o[7]*i,this.z=o[2]*t+o[5]*n+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,o=e.elements,r=1/(o[3]*t+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*i+o[12])*r,this.y=(o[1]*t+o[5]*n+o[9]*i+o[13])*r,this.z=(o[2]*t+o[6]*n+o[10]*i+o[14])*r,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,o=e.x,r=e.y,a=e.z,s=e.w,l=2*(r*i-a*n),c=2*(a*t-o*i),u=2*(o*n-r*t);return this.x=t+s*l+r*u-a*c,this.y=n+s*c+a*l-o*u,this.z=i+s*u+o*c-r*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i,this.y=o[1]*t+o[5]*n+o[9]*i,this.z=o[2]*t+o[6]*n+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,o=e.z,r=t.x,a=t.y,s=t.z;return this.x=i*s-o*a,this.y=o*r-n*s,this.z=n*a-i*r,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _vector$c.copy(this).projectOnVector(e),this.sub(_vector$c)}reflect(e){return this.sub(_vector$c.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}exports("V",Vector3);const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),t=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_vector$b.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_vector$b.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_vector$b.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,_vector$b):_vector$b.fromBufferAttribute(i,t),_vector$b.applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$b);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),_box$4.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),_box$4.copy(n.boundingBox)),_box$4.applyMatrix4(e.matrixWorld),this.union(_box$4)}const i=e.children;for(let o=0,r=i.length;o<r;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_vector$b),_vector$b.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$4.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let t=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)&&(t=[1,0,0,0,1,0,0,0,1],!!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)&&(_triangleNormal.crossVectors(_f0,_f1),t=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$b).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(_vector$b).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(e,t,n,i,o){for(let r=0,a=e.length-3;r<=a;r+=3){_testAxis.fromArray(e,r);const a=o.x*Math.abs(_testAxis.x)+o.y*Math.abs(_testAxis.y)+o.z*Math.abs(_testAxis.z),s=t.dot(_testAxis),l=n.dot(_testAxis),c=i.dot(_testAxis);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(e=new Vector3,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):_box$3.setFromPoints(e).getCenter(n);let i=0;for(let o=0,r=e.length;o<r;o++)i=Math.max(i,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$6.subVectors(e,this.center);const t=_v1$6.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(_v1$6,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(_v2$3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(e.center).sub(_v2$3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,t=new Vector3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$a)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_vector$a.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector$a.copy(this.origin).addScaledVector(this.direction,t),_vector$a.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){_segCenter.copy(e).add(t).multiplyScalar(.5),_segDir.copy(t).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const o=.5*e.distanceTo(t),r=-this.direction.dot(_segDir),a=_diff.dot(this.direction),s=-_diff.dot(_segDir),l=_diff.lengthSq(),c=Math.abs(1-r*r);let u,d,h,p;if(c>0)if(u=r*s-a,d=r*a-s,p=o*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+r*d+2*a)+d*(r*u+d+2*s)+l}else d=o,u=Math.max(0,-(r*d+a)),h=-u*u+d*(d+2*s)+l;else d=-o,u=Math.max(0,-(r*d+a)),h=-u*u+d*(d+2*s)+l;else d<=-p?(u=Math.max(0,-(-r*o+a)),d=u>0?-o:Math.min(Math.max(-o,-s),o),h=-u*u+d*(d+2*s)+l):d<=p?(u=0,d=Math.min(Math.max(-o,-s),o),h=d*(d+2*s)+l):(u=Math.max(0,-(r*o+a)),d=u>0?o:Math.min(Math.max(-o,-s),o),h=-u*u+d*(d+2*s)+l);else d=r>0?-o:o,u=Math.max(0,-(r*d+a)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(_segCenter).addScaledVector(_segDir,d),h}intersectSphere(e,t){_vector$a.subVectors(e.center,this.origin);const n=_vector$a.dot(this.direction),i=_vector$a.dot(_vector$a)-n*n,o=e.radius*e.radius;if(i>o)return null;const r=Math.sqrt(o-i),a=n-r,s=n+r;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,o,r,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(o=(e.min.y-d.y)*c,r=(e.max.y-d.y)*c):(o=(e.max.y-d.y)*c,r=(e.min.y-d.y)*c),n>r||o>i?null:((o>n||isNaN(n))&&(n=o),(r<i||isNaN(i))&&(i=r),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,_vector$a)}intersectTriangle(e,t,n,i,o){_edge1.subVectors(t,e),_edge2.subVectors(n,e),_normal$1.crossVectors(_edge1,_edge2);let r,a=this.direction.dot(_normal$1);if(a>0){if(i)return null;r=1}else{if(!(a<0))return null;r=-1,a=-a}_diff.subVectors(this.origin,e);const s=r*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(s<0)return null;const l=r*this.direction.dot(_edge1.cross(_diff));if(l<0)return null;if(s+l>a)return null;const c=-r*_diff.dot(_normal$1);return c<0?null:this.at(c/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(e,t,n,i,o,r,a,s,l,c,u,d,h,p,f,g){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,o,r,a,s,l,c,u,d,h,p,f,g)}set(e,t,n,i,o,r,a,s,l,c,u,d,h,p,f,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=i,m[1]=o,m[5]=r,m[9]=a,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=d,m[3]=h,m[7]=p,m[11]=f,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/_v1$5.setFromMatrixColumn(e,0).length(),o=1/_v1$5.setFromMatrixColumn(e,1).length(),r=1/_v1$5.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,o=e.z,r=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(o),u=Math.sin(o);if("XYZ"===e.order){const e=r*c,n=r*u,i=a*c,o=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+i*l,t[5]=e-o*l,t[9]=-a*s,t[2]=o-e*l,t[6]=i+n*l,t[10]=r*s}else if("YXZ"===e.order){const e=s*c,n=s*u,i=l*c,o=l*u;t[0]=e+o*a,t[4]=i*a-n,t[8]=r*l,t[1]=r*u,t[5]=r*c,t[9]=-a,t[2]=n*a-i,t[6]=o+e*a,t[10]=r*s}else if("ZXY"===e.order){const e=s*c,n=s*u,i=l*c,o=l*u;t[0]=e-o*a,t[4]=-r*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=r*c,t[9]=o-e*a,t[2]=-r*l,t[6]=a,t[10]=r*s}else if("ZYX"===e.order){const e=r*c,n=r*u,i=a*c,o=a*u;t[0]=s*c,t[4]=i*l-n,t[8]=e*l+o,t[1]=s*u,t[5]=o*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*s,t[10]=r*s}else if("YZX"===e.order){const e=r*s,n=r*l,i=a*s,o=a*l;t[0]=s*c,t[4]=o-e*u,t[8]=i*u+n,t[1]=u,t[5]=r*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-o*u}else if("XZY"===e.order){const e=r*s,n=r*l,i=a*s,o=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+o,t[5]=r*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=o*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,t,n){const i=this.elements;return _z.subVectors(e,t),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(n,_z),0===_x.lengthSq()&&(1===Math.abs(n.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(n,_z)),_x.normalize(),_y.crossVectors(_z,_x),i[0]=_x.x,i[4]=_y.x,i[8]=_z.x,i[1]=_x.y,i[5]=_y.y,i[9]=_z.y,i[2]=_x.z,i[6]=_y.z,i[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,o=this.elements,r=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],g=n[10],m=n[14],_=n[3],v=n[7],b=n[11],T=n[15],A=i[0],y=i[4],E=i[8],S=i[12],C=i[1],w=i[5],x=i[9],M=i[13],R=i[2],I=i[6],D=i[10],k=i[14],L=i[3],O=i[7],P=i[11],N=i[15];return o[0]=r*A+a*C+s*R+l*L,o[4]=r*y+a*w+s*I+l*O,o[8]=r*E+a*x+s*D+l*P,o[12]=r*S+a*M+s*k+l*N,o[1]=c*A+u*C+d*R+h*L,o[5]=c*y+u*w+d*I+h*O,o[9]=c*E+u*x+d*D+h*P,o[13]=c*S+u*M+d*k+h*N,o[2]=p*A+f*C+g*R+m*L,o[6]=p*y+f*w+g*I+m*O,o[10]=p*E+f*x+g*D+m*P,o[14]=p*S+f*M+g*k+m*N,o[3]=_*A+v*C+b*R+T*L,o[7]=_*y+v*w+b*I+T*O,o[11]=_*E+v*x+b*D+T*P,o[15]=_*S+v*M+b*k+T*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],o=e[12],r=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+o*s*u-i*l*u-o*a*d+n*l*d+i*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+o*r*d-i*r*h+i*l*c-o*s*c)+e[11]*(+t*l*u-t*a*h-o*r*u+n*r*h+o*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*d+i*r*u-n*r*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],g=e[14],m=e[15],_=u*g*l-f*d*l+f*s*h-a*g*h-u*s*m+a*d*m,v=p*d*l-c*g*l-p*s*h+r*g*h+c*s*m-r*d*m,b=c*f*l-p*u*l+p*a*h-r*f*h-c*a*m+r*u*m,T=p*u*s-c*f*s-p*a*d+r*f*d+c*a*g-r*u*g,A=t*_+n*v+i*b+o*T;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const y=1/A;return e[0]=_*y,e[1]=(f*d*o-u*g*o-f*i*h+n*g*h+u*i*m-n*d*m)*y,e[2]=(a*g*o-f*s*o+f*i*l-n*g*l-a*i*m+n*s*m)*y,e[3]=(u*s*o-a*d*o-u*i*l+n*d*l+a*i*h-n*s*h)*y,e[4]=v*y,e[5]=(c*g*o-p*d*o+p*i*h-t*g*h-c*i*m+t*d*m)*y,e[6]=(p*s*o-r*g*o-p*i*l+t*g*l+r*i*m-t*s*m)*y,e[7]=(r*d*o-c*s*o+c*i*l-t*d*l-r*i*h+t*s*h)*y,e[8]=b*y,e[9]=(p*u*o-c*f*o-p*n*h+t*f*h+c*n*m-t*u*m)*y,e[10]=(r*f*o-p*a*o+p*n*l-t*f*l-r*n*m+t*a*m)*y,e[11]=(c*a*o-r*u*o-c*n*l+t*u*l+r*n*h-t*a*h)*y,e[12]=T*y,e[13]=(c*f*i-p*u*i+p*n*d-t*f*d-c*n*g+t*u*g)*y,e[14]=(p*a*i-r*f*i-p*n*s+t*f*s+r*n*g-t*a*g)*y,e[15]=(r*u*i-c*a*i+c*n*s-t*u*s-r*n*d+t*a*d)*y,this}scale(e){const t=this.elements,n=e.x,i=e.y,o=e.z;return t[0]*=n,t[4]*=i,t[8]*=o,t[1]*=n,t[5]*=i,t[9]*=o,t[2]*=n,t[6]*=i,t[10]*=o,t[3]*=n,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),o=1-n,r=e.x,a=e.y,s=e.z,l=o*r,c=o*a;return this.set(l*r+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*r,0,l*s-i*a,c*s+i*r,o*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,o,r){return this.set(1,n,o,0,e,1,r,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,o=t._x,r=t._y,a=t._z,s=t._w,l=o+o,c=r+r,u=a+a,d=o*l,h=o*c,p=o*u,f=r*c,g=r*u,m=a*u,_=s*l,v=s*c,b=s*u,T=n.x,A=n.y,y=n.z;return i[0]=(1-(f+m))*T,i[1]=(h+b)*T,i[2]=(p-v)*T,i[3]=0,i[4]=(h-b)*A,i[5]=(1-(d+m))*A,i[6]=(g+_)*A,i[7]=0,i[8]=(p+v)*y,i[9]=(g-_)*y,i[10]=(1-(d+f))*y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let o=_v1$5.set(i[0],i[1],i[2]).length();const r=_v1$5.set(i[4],i[5],i[6]).length(),a=_v1$5.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],_m1$2.copy(this);const s=1/o,l=1/r,c=1/a;return _m1$2.elements[0]*=s,_m1$2.elements[1]*=s,_m1$2.elements[2]*=s,_m1$2.elements[4]*=l,_m1$2.elements[5]*=l,_m1$2.elements[6]*=l,_m1$2.elements[8]*=c,_m1$2.elements[9]*=c,_m1$2.elements[10]*=c,t.setFromRotationMatrix(_m1$2),n.x=o,n.y=r,n.z=a,this}makePerspective(e,t,n,i,o,r,a=WebGLCoordinateSystem){const s=this.elements,l=2*o/(t-e),c=2*o/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(a===WebGLCoordinateSystem)h=-(r+o)/(r-o),p=-2*r*o/(r-o);else{if(a!==WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-r/(r-o),p=-r*o/(r-o)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,o,r,a=WebGLCoordinateSystem){const s=this.elements,l=1/(t-e),c=1/(n-i),u=1/(r-o),d=(t+e)*l,h=(n+i)*c;let p,f;if(a===WebGLCoordinateSystem)p=(r+o)*u,f=-2*u;else{if(a!==WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=o*u,f=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,t=0,n=0,i=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,o=i[0],r=i[4],a=i[8],s=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(clamp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-r,o)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,o),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(s,o));break;case"ZYX":this._y=Math.asin(-clamp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,o)):(this._x=0,this._z=Math.atan2(-r,l));break;case"YZX":this._z=Math.asin(clamp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-clamp(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _matrix$1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix$1,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}exports("F",Euler),Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const e=new Vector3,t=new Euler,n=new Quaternion,i=new Vector3(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,t){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?_target.copy(e):_target.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),i&&(_m1$1.extractRotation(i.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_removedEvent)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let o=0,r=i.length;o<r;o++)i[o].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function o(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];o(e.shapes,i)}else o(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(o(e.materials,this.material[n]));i.material=t}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(o(e.animations,n))}}if(t){const t=r(e.geometries),i=r(e.materials),o=r(e.textures),a=r(e.images),s=r(e.shapes),l=r(e.skeletons),c=r(e.animations),u=r(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),o.length>0&&(n.textures=o),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function r(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}exports("aa",Object3D),Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1;class Triangle{constructor(e=new Vector3,t=new Vector3,n=new Vector3){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),_v0$1.subVectors(e,t),i.cross(_v0$1);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,n,i,o){_v0$1.subVectors(i,t),_v1$3.subVectors(n,t),_v2$2.subVectors(e,t);const r=_v0$1.dot(_v0$1),a=_v0$1.dot(_v1$3),s=_v0$1.dot(_v2$2),l=_v1$3.dot(_v1$3),c=_v1$3.dot(_v2$2),u=r*l-a*a;if(0===u)return o.set(0,0,0),null;const d=1/u,h=(l*s-a*c)*d,p=(r*c-a*s)*d;return o.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,_v3$1)&&(_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1)}static getUV(e,t,n,i,o,r,a,s){return!1===warnedGetUV&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(e,t,n,i,o,r,a,s)}static getInterpolation(e,t,n,i,o,r,a,s){return null===this.getBarycoord(e,t,n,i,_v3$1)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(o,_v3$1.x),s.addScaledVector(r,_v3$1.y),s.addScaledVector(a,_v3$1.z),s)}static isFrontFacing(e,t,n,i){return _v0$1.subVectors(n,t),_v1$3.subVectors(e,t),_v0$1.cross(_v1$3).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),.5*_v0$1.cross(_v1$3).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,o){return!1===warnedGetUV&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),Triangle.getInterpolation(e,this.a,this.b,this.c,t,n,i,o)}getInterpolation(e,t,n,i,o){return Triangle.getInterpolation(e,this.a,this.b,this.c,t,n,i,o)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,o=this.c;let r,a;_vab.subVectors(i,n),_vac.subVectors(o,n),_vap.subVectors(e,n);const s=_vab.dot(_vap),l=_vac.dot(_vap);if(s<=0&&l<=0)return t.copy(n);_vbp.subVectors(e,i);const c=_vab.dot(_vbp),u=_vac.dot(_vbp);if(c>=0&&u<=c)return t.copy(i);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return r=s/(s-c),t.copy(n).addScaledVector(_vab,r);_vcp.subVectors(e,o);const h=_vab.dot(_vcp),p=_vac.dot(_vcp);if(p>=0&&h<=p)return t.copy(o);const f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(_vac,a);const g=c*p-h*u;if(g<=0&&u-c>=0&&h-p>=0)return _vbc.subVectors(o,i),a=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(_vbc,a);const m=1/(g+f+d);return r=f*m,a=d*m,t.copy(n).addScaledVector(_vab,r).addScaledVector(_vac,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Color{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=SRGBColorSpace){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ColorManagement.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=ColorManagement.workingColorSpace){return this.r=e,this.g=t,this.b=n,ColorManagement.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=ColorManagement.workingColorSpace){if(e=euclideanModulo(e,1),t=clamp(t,0,1),n=clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,o=2*n-i;this.r=hue2rgb(o,i,e+1/3),this.g=hue2rgb(o,i,e),this.b=hue2rgb(o,i,e-1/3)}return ColorManagement.toWorkingColorSpace(this,i),this}setStyle(e,t=SRGBColorSpace){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const r=i[1],a=i[2];switch(r){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],o=n.length;if(3===o)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=SRGBColorSpace){const n=_colorKeywords[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),e),65536*Math.round(clamp(255*_color.r,0,255))+256*Math.round(clamp(255*_color.g,0,255))+Math.round(clamp(255*_color.b,0,255))}getHexString(e=SRGBColorSpace){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),t);const n=_color.r,i=_color.g,o=_color.b,r=Math.max(n,i,o),a=Math.min(n,i,o);let s,l;const c=(a+r)/2;if(a===r)s=0,l=0;else{const e=r-a;switch(l=c<=.5?e/(r+a):e/(2-r-a),r){case n:s=(i-o)/e+(i<o?6:0);break;case i:s=(o-n)/e+2;break;case o:s=(n-i)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),t),e.r=_color.r,e.g=_color.g,e.b=_color.b,e}getStyle(e=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),e);const t=_color.r,n=_color.g,i=_color.b;return e!==SRGBColorSpace?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(_hslA),this.setHSL(_hslA.h+e,_hslA.s+t,_hslA.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_hslA),e.getHSL(_hslB);const n=lerp(_hslA.h,_hslB.h,t),i=lerp(_hslA.s,_hslB.s,t),o=lerp(_hslA.l,_hslB.l,t);return this.setHSL(n,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*i,this.g=o[1]*t+o[4]*n+o[7]*i,this.b=o[2]*t+o[5]*n+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}exports("U",Color);const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(n.blending=this.blending),this.side!==FrontSide&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(n.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(n.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(n.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),o=i(e.images);t.length>0&&(n.textures=t),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class MeshBasicMaterial extends Material{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _tables=_generateTables();function _generateTables(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),o=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,o[l]=24,o[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,o[l]=-e-1,o[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,o[l]=13,o[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,o[l]=24,o[256|l]=24):(i[l]=31744,i[256|l]=64512,o[l]=13,o[256|l]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;!(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,r[l]=e|t}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:o,mantissaTable:r,exponentTable:a,offsetTable:s}}function toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=clamp(e,-65504,65504),_tables.floatView[0]=e;const t=_tables.uint32View[0],n=t>>23&511;return _tables.baseTable[n]+((8388607&t)>>_tables.shiftTable[n])}function fromHalfFloat(e){const t=e>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[t]+(1023&e)]+_tables.exponentTable[t],_tables.floatView[0]}const DataUtils={toHalfFloat:toHalfFloat,fromHalfFloat:fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_vector2$1.fromBufferAttribute(this,t),_vector2$1.applyMatrix3(e),this.setXY(t,_vector2$1.x,_vector2$1.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix3(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix4(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyNormalMatrix(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.transformDirection(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=denormalize(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=normalize$3(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array),i=normalize$3(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,o){return e*=this.itemSize,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array),i=normalize$3(i,this.array),o=normalize$3(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),e}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Int32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Float32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float32Array(e),t,n)}}let _id$2=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Matrix3).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1.makeRotationFromQuaternion(e),this.applyMatrix4(_m1),this}rotateX(e){return _m1.makeRotationX(e),this.applyMatrix4(_m1),this}rotateY(e){return _m1.makeRotationY(e),this.applyMatrix4(_m1),this}rotateZ(e){return _m1.makeRotationZ(e),this.applyMatrix4(_m1),this}translate(e,t,n){return _m1.makeTranslation(e,t,n),this.applyMatrix4(_m1),this}scale(e,t,n){return _m1.makeScale(e,t,n),this.applyMatrix4(_m1),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Float32BufferAttribute(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];_box$2.setFromBufferAttribute(e),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vector3,1/0);if(e){const n=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(e),t)for(let e=0,o=t.length;e<o;e++){const n=t[e];_boxMorphTargets.setFromBufferAttribute(n),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(n);let i=0;for(let t=0,o=e.count;t<o;t++)_vector$8.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(_vector$8));if(t)for(let o=0,r=t.length;o<r;o++){const r=t[o],a=this.morphTargetsRelative;for(let t=0,o=r.count;t<o;t++)_vector$8.fromBufferAttribute(r,t),a&&(_offset.fromBufferAttribute(e,t),_vector$8.add(_offset)),i=Math.max(i,n.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,o=t.normal.array,r=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let C=0;C<a;C++)l[C]=new Vector3,c[C]=new Vector3;const u=new Vector3,d=new Vector3,h=new Vector3,p=new Vector2,f=new Vector2,g=new Vector2,m=new Vector3,_=new Vector3;function v(e,t,n){u.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),p.fromArray(r,2*e),f.fromArray(r,2*t),g.fromArray(r,2*n),d.sub(u),h.sub(u),f.sub(p),g.sub(p);const o=1/(f.x*g.y-g.x*f.y);isFinite(o)&&(m.copy(d).multiplyScalar(g.y).addScaledVector(h,-f.y).multiplyScalar(o),_.copy(h).multiplyScalar(f.x).addScaledVector(d,-g.x).multiplyScalar(o),l[e].add(m),l[t].add(m),l[n].add(m),c[e].add(_),c[t].add(_),c[n].add(_))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let C=0,w=b.length;C<w;++C){const e=b[C],t=e.start;for(let i=t,o=t+e.count;i<o;i+=3)v(n[i+0],n[i+1],n[i+2])}const T=new Vector3,A=new Vector3,y=new Vector3,E=new Vector3;function S(e){y.fromArray(o,3*e),E.copy(y);const t=l[e];T.copy(t),T.sub(y.multiplyScalar(y.dot(t))).normalize(),A.crossVectors(E,t);const n=A.dot(c[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}for(let C=0,w=b.length;C<w;++C){const e=b[C],t=e.start;for(let i=t,o=t+e.count;i<o;i+=3)S(n[i+0]),S(n[i+1]),S(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new BufferAttribute(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Vector3,o=new Vector3,r=new Vector3,a=new Vector3,s=new Vector3,l=new Vector3,c=new Vector3,u=new Vector3;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);i.fromBufferAttribute(t,h),o.fromBufferAttribute(t,p),r.fromBufferAttribute(t,f),c.subVectors(r,o),u.subVectors(i,o),c.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),o.fromBufferAttribute(t,e+1),r.fromBufferAttribute(t,e+2),c.subVectors(r,o),u.subVectors(i,o),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_vector$8.fromBufferAttribute(e,t),_vector$8.normalize(),e.setXYZ(t,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,o=e.normalized,r=new n.constructor(t.length*i);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)r[s++]=n[a++]}return new BufferAttribute(r,i,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,n=this.index.array,i=this.attributes;for(const a in i){const o=e(i[a],n);t.setAttribute(a,o)}const o=this.morphAttributes;for(const a in o){const i=[],r=o[a];for(let t=0,o=r.length;t<o;t++){const o=e(r[t],n);i.push(o)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let a=0,s=r.length;a<s;a++){const e=r[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const i={};let o=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];n.push(o.toJSON(e.data))}n.length>0&&(i[s]=n,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(e.data.groups=JSON.parse(JSON.stringify(r)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const o=e.morphAttributes;for(const l in o){const e=[],n=o[l];for(let i=0,o=n.length;i<o;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const r=e.groups;for(let l=0,c=r.length;l<c;l++){const e=r[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,t=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,o=n.morphAttributes.position,r=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){_morphA.set(0,0,0);for(let n=0,i=o.length;n<i;n++){const i=a[n],s=o[n];0!==i&&(_tempA.fromBufferAttribute(s,e),r?_morphA.addScaledVector(_tempA,i):_morphA.addScaledVector(_tempA.sub(t),i))}t.add(_morphA)}return t}raycast(e,t){const n=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$6.copy(n.boundingSphere),_sphere$6.applyMatrix4(o),_ray$3.copy(e.ray).recast(e.near),!1===_sphere$6.containsPoint(_ray$3.origin)){if(null===_ray$3.intersectSphere(_sphere$6,_sphereHitAt))return;if(_ray$3.origin.distanceToSquared(_sphereHitAt)>(e.far-e.near)**2)return}_inverseMatrix$3.copy(o).invert(),_ray$3.copy(e.ray).applyMatrix4(_inverseMatrix$3),null!==n.boundingBox&&!1===_ray$3.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,_ray$3)}}_computeIntersections(e,t,n){let i;const o=this.geometry,r=this.material,a=o.index,s=o.attributes.position,l=o.attributes.uv,c=o.attributes.uv1,u=o.attributes.normal,d=o.groups,h=o.drawRange;if(null!==a)if(Array.isArray(r))for(let p=0,f=d.length;p<f;p++){const o=d[p],s=r[o.materialIndex];for(let r=Math.max(o.start,h.start),d=Math.min(a.count,Math.min(o.start+o.count,h.start+h.count));r<d;r+=3){i=checkGeometryIntersection(this,s,e,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,t.push(i))}}else{for(let o=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);o<s;o+=3){i=checkGeometryIntersection(this,r,e,n,l,c,u,a.getX(o),a.getX(o+1),a.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),t.push(i))}}else if(void 0!==s)if(Array.isArray(r))for(let p=0,f=d.length;p<f;p++){const o=d[p],a=r[o.materialIndex];for(let r=Math.max(o.start,h.start),d=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));r<d;r+=3){i=checkGeometryIntersection(this,a,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,t.push(i))}}else{for(let o=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);o<a;o+=3){i=checkGeometryIntersection(this,r,e,n,l,c,u,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),t.push(i))}}}}function checkIntersection(e,t,n,i,o,r,a,s){let l;if(l=t.side===BackSide?i.intersectTriangle(a,r,o,!0,s):i.intersectTriangle(o,r,a,t.side===FrontSide,s),null===l)return null;_intersectionPointWorld.copy(s),_intersectionPointWorld.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(_intersectionPointWorld);return c<n.near||c>n.far?null:{distance:c,point:_intersectionPointWorld.clone(),object:e}}function checkGeometryIntersection(e,t,n,i,o,r,a,s,l,c){e.getVertexPosition(s,_vA$1),e.getVertexPosition(l,_vB$1),e.getVertexPosition(c,_vC$1);const u=checkIntersection(e,t,n,i,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(u){o&&(_uvA$1.fromBufferAttribute(o,s),_uvB$1.fromBufferAttribute(o,l),_uvC$1.fromBufferAttribute(o,c),u.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),r&&(_uvA$1.fromBufferAttribute(r,s),_uvB$1.fromBufferAttribute(r,l),_uvC$1.fromBufferAttribute(r,c),u.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),u.uv2=u.uv1),a&&(_normalA.fromBufferAttribute(a,s),_normalB.fromBufferAttribute(a,l),_normalC.fromBufferAttribute(a,c),u.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:s,b:l,c:c,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,e.normal),u.face=e}return u}class BoxGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,i=1,o=1,r=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:o,depthSegments:r};const a=this;i=Math.floor(i),o=Math.floor(o),r=Math.floor(r);const s=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,o,r,p,f,g,m,_){const v=r/g,b=p/m,T=r/2,A=p/2,y=f/2,E=g+1,S=m+1;let C=0,w=0;const x=new Vector3;for(let a=0;a<S;a++){const r=a*b-A;for(let s=0;s<E;s++){const d=s*v-T;x[e]=d*i,x[t]=r*o,x[n]=y,l.push(x.x,x.y,x.z),x[e]=0,x[t]=0,x[n]=f>0?1:-1,c.push(x.x,x.y,x.z),u.push(s/g),u.push(1-a/m),C+=1}}for(let a=0;a<m;a++)for(let e=0;e<g;e++){const t=d+e+E*a,n=d+e+E*(a+1),i=d+(e+1)+E*(a+1),o=d+(e+1)+E*a;s.push(t,n,o),s.push(n,i,o),w+=6}a.addGroup(h,w,_),h+=w,d+=C}p("z","y","x",-1,-1,n,t,e,r,o,0),p("z","y","x",1,-1,n,t,-e,r,o,1),p("x","z","y",1,1,e,n,t,i,r,2),p("x","z","y",1,-1,e,n,-t,i,r,3),p("x","y","z",1,-1,e,t,n,i,o,4),p("x","y","z",-1,-1,e,t,-n,i,o,5),this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cloneUniforms(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const o=e[n][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=o.clone():Array.isArray(o)?t[n][i]=o.slice():t[n][i]=o}}return t}function mergeUniforms(e){const t={};for(let n=0;n<e.length;n++){const i=cloneUniforms(e[n]);for(const e in i)t[e]=i[e]}return t}function cloneUniformsGroups(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function getUnlitUniformColorSpace(e){return null===e.getRenderTarget()?e.outputColorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",default_fragment="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class ShaderMaterial extends Material{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class PerspectiveCamera extends Camera{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*RAD2DEG$1*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*DEG2RAD$1*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*RAD2DEG$1*Math.atan(Math.tan(.5*DEG2RAD$1*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,o,r){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*DEG2RAD$1*this.fov)/this.zoom,n=2*t,i=this.aspect*n,o=-.5*i;const r=this.view;if(null!==this.view&&this.view.enabled){const e=r.fullWidth,a=r.fullHeight;o+=r.offsetX*i/e,t-=r.offsetY*n/a,i*=r.width/e,n*=r.height/a}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}exports("W",PerspectiveCamera);const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new PerspectiveCamera(fov,aspect,e,t);i.layers=this.layers,this.add(i);const o=new PerspectiveCamera(fov,aspect,e,t);o.layers=this.layers,this.add(o);const r=new PerspectiveCamera(fov,aspect,e,t);r.layers=this.layers,this.add(r);const a=new PerspectiveCamera(fov,aspect,e,t);a.layers=this.layers,this.add(a);const s=new PerspectiveCamera(fov,aspect,e,t);s.layers=this.layers,this.add(s);const l=new PerspectiveCamera(fov,aspect,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,o,r,a,s]=t;for(const l of t)this.remove(l);if(e===WebGLCoordinateSystem)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),r.up.set(0,0,1),r.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==WebGPUCoordinateSystem)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),r.up.set(0,0,-1),r.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,r,a,s,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,o),e.setRenderTarget(n,1,i),e.render(t,r),e.setRenderTarget(n,2,i),e.render(t,a),e.setRenderTarget(n,3,i),e.render(t,s),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(e,t,n,i,o,r,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:CubeReflectionMapping,n,i,o,r,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:LinearFilter}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new BoxGeometry(5,5,5),o=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:BackSide,blending:NoBlending});o.uniforms.tEquirect.value=t;const r=new Mesh(i,o),a=t.minFilter;t.minFilter===LinearMipmapLinearFilter&&(t.minFilter=LinearFilter);return new CubeCamera(1,10,this).update(e,r),t.minFilter=a,r.geometry.dispose(),r.material.dispose(),this}clear(e,t,n,i){const o=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(o)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=_vector1.subVectors(n,t).cross(_vector2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(_vector1),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||_normalMatrix.getNormalMatrix(e),i=this.coplanarPoint(_vector1).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(e=new Plane,t=new Plane,n=new Plane,i=new Plane,o=new Plane,r=new Plane){this.planes=[e,t,n,i,o,r]}set(e,t,n,i,o,r){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(o),a[5].copy(r),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=WebGLCoordinateSystem){const n=this.planes,i=e.elements,o=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],g=i[11],m=i[12],_=i[13],v=i[14],b=i[15];if(n[0].setComponents(s-o,d-l,g-h,b-m).normalize(),n[1].setComponents(s+o,d+l,g+h,b+m).normalize(),n[2].setComponents(s+r,d+c,g+p,b+_).normalize(),n[3].setComponents(s-r,d-c,g-p,b-_).normalize(),n[4].setComponents(s-a,d-u,g-f,b-v).normalize(),t===WebGLCoordinateSystem)n[5].setComponents(s+a,d+u,g+f,b+v).normalize();else{if(t!==WebGPUCoordinateSystem)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,f,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),_sphere$5.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),_sphere$5.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(e){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let o=0;o<6;o++){if(t[o].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(_vector$7.x=i.normal.x>0?e.max.x:e.min.x,_vector$7.y=i.normal.y>0?e.max.y:e.min.y,_vector$7.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let e=null,t=!1,n=null,i=null;function o(t,r){n(t,r),i=e.requestAnimationFrame(o)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(o),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function WebGLAttributes(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,o){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const r=i.get(t);if(void 0===r)i.set(t,function(t,i){const o=t.array,r=t.usage,a=o.byteLength,s=e.createBuffer();let l;if(e.bindBuffer(i,s),e.bufferData(i,o,r),t.onUploadCallback(),o instanceof Float32Array)l=e.FLOAT;else if(o instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(o instanceof Int16Array)l=e.SHORT;else if(o instanceof Uint32Array)l=e.UNSIGNED_INT;else if(o instanceof Int32Array)l=e.INT;else if(o instanceof Int8Array)l=e.BYTE;else if(o instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);l=e.UNSIGNED_BYTE}return{buffer:s,type:l,bytesPerElement:o.BYTES_PER_ELEMENT,version:t.version,size:a}}(t,o));else if(r.version<t.version){if(r.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,o){const r=i.array,a=i._updateRange,s=i.updateRanges;if(e.bindBuffer(o,t),-1===a.count&&0===s.length&&e.bufferSubData(o,0,r),0!==s.length){for(let t=0,i=s.length;t<i;t++){const i=s[t];n?e.bufferSubData(o,i.start*r.BYTES_PER_ELEMENT,r,i.start,i.count):e.bufferSubData(o,i.start*r.BYTES_PER_ELEMENT,r.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==a.count&&(n?e.bufferSubData(o,a.offset*r.BYTES_PER_ELEMENT,r,a.offset,a.count):e.bufferSubData(o,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(r.buffer,t,o),r.version=t.version}}}}class PlaneGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const o=e/2,r=t/2,a=Math.floor(n),s=Math.floor(i),l=a+1,c=s+1,u=e/a,d=t/s,h=[],p=[],f=[],g=[];for(let m=0;m<c;m++){const e=m*d-r;for(let t=0;t<l;t++){const n=t*u-o;p.push(n,-e,0),f.push(0,0,1),g.push(t/a),g.push(1-m/s)}}for(let m=0;m<s;m++)for(let e=0;e<a;e++){const t=e+l*m,n=e+l*(m+1),i=e+1+l*(m+1),o=e+1+l*m;h.push(t,n,o),h.push(n,i,o)}this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}var alphahash_fragment="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex="#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex="#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex="vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_vertex="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",envmap_physical_pars_fragment="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",lights_toon_fragment="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const vertex$h="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",fragment$h="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",vertex$g="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",fragment$g="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",vertex$f="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",fragment$f="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",vertex$e="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",fragment$e="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",vertex$d="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",fragment$d="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",vertex$c="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",fragment$c="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",vertex$b="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",fragment$b="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",vertex$a="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",fragment$a="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$9="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$9="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$8="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",fragment$8="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$7="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",fragment$7="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",vertex$6="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$6="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$5="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",fragment$5="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$4="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$4="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",vertex$3="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",fragment$3="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",vertex$2="#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",fragment$2="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",vertex$1="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",fragment$1="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",ShaderChunk={alphahash_fragment:alphahash_fragment,alphahash_pars_fragment:alphahash_pars_fragment,alphamap_fragment:alphamap_fragment,alphamap_pars_fragment:alphamap_pars_fragment,alphatest_fragment:alphatest_fragment,alphatest_pars_fragment:alphatest_pars_fragment,aomap_fragment:aomap_fragment,aomap_pars_fragment:aomap_pars_fragment,batching_pars_vertex:batching_pars_vertex,batching_vertex:batching_vertex,begin_vertex:begin_vertex,beginnormal_vertex:beginnormal_vertex,bsdfs:bsdfs,iridescence_fragment:iridescence_fragment,bumpmap_pars_fragment:bumpmap_pars_fragment,clipping_planes_fragment:clipping_planes_fragment,clipping_planes_pars_fragment:clipping_planes_pars_fragment,clipping_planes_pars_vertex:clipping_planes_pars_vertex,clipping_planes_vertex:clipping_planes_vertex,color_fragment:color_fragment,color_pars_fragment:color_pars_fragment,color_pars_vertex:color_pars_vertex,color_vertex:color_vertex,common:common,cube_uv_reflection_fragment:cube_uv_reflection_fragment,defaultnormal_vertex:defaultnormal_vertex,displacementmap_pars_vertex:displacementmap_pars_vertex,displacementmap_vertex:displacementmap_vertex,emissivemap_fragment:emissivemap_fragment,emissivemap_pars_fragment:emissivemap_pars_fragment,colorspace_fragment:colorspace_fragment,colorspace_pars_fragment:colorspace_pars_fragment,envmap_fragment:envmap_fragment,envmap_common_pars_fragment:envmap_common_pars_fragment,envmap_pars_fragment:envmap_pars_fragment,envmap_pars_vertex:envmap_pars_vertex,envmap_physical_pars_fragment:envmap_physical_pars_fragment,envmap_vertex:envmap_vertex,fog_vertex:fog_vertex,fog_pars_vertex:fog_pars_vertex,fog_fragment:fog_fragment,fog_pars_fragment:fog_pars_fragment,gradientmap_pars_fragment:gradientmap_pars_fragment,lightmap_fragment:lightmap_fragment,lightmap_pars_fragment:lightmap_pars_fragment,lights_lambert_fragment:lights_lambert_fragment,lights_lambert_pars_fragment:lights_lambert_pars_fragment,lights_pars_begin:lights_pars_begin,lights_toon_fragment:lights_toon_fragment,lights_toon_pars_fragment:lights_toon_pars_fragment,lights_phong_fragment:lights_phong_fragment,lights_phong_pars_fragment:lights_phong_pars_fragment,lights_physical_fragment:lights_physical_fragment,lights_physical_pars_fragment:lights_physical_pars_fragment,lights_fragment_begin:lights_fragment_begin,lights_fragment_maps:lights_fragment_maps,lights_fragment_end:lights_fragment_end,logdepthbuf_fragment:logdepthbuf_fragment,logdepthbuf_pars_fragment:logdepthbuf_pars_fragment,logdepthbuf_pars_vertex:logdepthbuf_pars_vertex,logdepthbuf_vertex:logdepthbuf_vertex,map_fragment:map_fragment,map_pars_fragment:map_pars_fragment,map_particle_fragment:map_particle_fragment,map_particle_pars_fragment:map_particle_pars_fragment,metalnessmap_fragment:metalnessmap_fragment,metalnessmap_pars_fragment:metalnessmap_pars_fragment,morphcolor_vertex:morphcolor_vertex,morphnormal_vertex:morphnormal_vertex,morphtarget_pars_vertex:morphtarget_pars_vertex,morphtarget_vertex:morphtarget_vertex,normal_fragment_begin:normal_fragment_begin,normal_fragment_maps:normal_fragment_maps,normal_pars_fragment:normal_pars_fragment,normal_pars_vertex:normal_pars_vertex,normal_vertex:normal_vertex,normalmap_pars_fragment:normalmap_pars_fragment,clearcoat_normal_fragment_begin:clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps:clearcoat_normal_fragment_maps,clearcoat_pars_fragment:clearcoat_pars_fragment,iridescence_pars_fragment:iridescence_pars_fragment,opaque_fragment:opaque_fragment,packing:packing,premultiplied_alpha_fragment:premultiplied_alpha_fragment,project_vertex:project_vertex,dithering_fragment:dithering_fragment,dithering_pars_fragment:dithering_pars_fragment,roughnessmap_fragment:roughnessmap_fragment,roughnessmap_pars_fragment:roughnessmap_pars_fragment,shadowmap_pars_fragment:shadowmap_pars_fragment,shadowmap_pars_vertex:shadowmap_pars_vertex,shadowmap_vertex:shadowmap_vertex,shadowmask_pars_fragment:shadowmask_pars_fragment,skinbase_vertex:skinbase_vertex,skinning_pars_vertex:skinning_pars_vertex,skinning_vertex:skinning_vertex,skinnormal_vertex:skinnormal_vertex,specularmap_fragment:specularmap_fragment,specularmap_pars_fragment:specularmap_pars_fragment,tonemapping_fragment:tonemapping_fragment,tonemapping_pars_fragment:tonemapping_pars_fragment,transmission_fragment:transmission_fragment,transmission_pars_fragment:transmission_pars_fragment,uv_pars_fragment:uv_pars_fragment,uv_pars_vertex:uv_pars_vertex,uv_vertex:uv_vertex,worldpos_vertex:worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(e,t,n,i,o,r,a){const s=new Color(0);let l,c,u=!0===r?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(_rgb,getUnlitUniformColorSpace(e)),i.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),u=t,f(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(s,u)},render:function(r,g){let m=!1,_=!0===g.isScene?g.background:null;if(_&&_.isTexture){_=(g.backgroundBlurriness>0?n:t).get(_)}null===_?f(s,u):_&&_.isColor&&(f(_,1),m=!0);const v=e.xr.getEnvironmentBlendMode();"additive"===v?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===v&&i.buffers.color.setClear(0,0,0,0,a),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),_&&(_.isCubeTexture||_.mapping===CubeUVReflectionMapping)?(void 0===c&&(c=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=ColorManagement.getTransfer(_.colorSpace)!==SRGBTransfer,d===_&&h===_.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=_,h=_.version,p=e.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(void 0===l&&(l=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(l)),l.material.uniforms.t2D.value=_,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=ColorManagement.getTransfer(_.colorSpace)!==SRGBTransfer,!0===_.matrixAutoUpdate&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),d===_&&h===_.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=_,h=_.version,p=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function WebGLBindingStates(e,t,n,i){const o=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==r,s={},l=p(null);let c=l,u=!1;function d(t){return i.isWebGL2?e.bindVertexArray(t):r.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):r.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],i=[];for(let r=0;r<o;r++)t[r]=0,n[r]=0,i[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function g(e){m(e,0)}function m(n,o){const r=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(r[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==o){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,o),s[n]=o}}function _(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,o=n.length;i<o;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function v(t,n,i,o,r,a,s){!0===s?e.vertexAttribIPointer(t,n,i,r,a):e.vertexAttribPointer(t,n,i,o,r,a)}function b(){T(),u=!0,c!==l&&(c=l,d(c.object))}function T(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(o,l,h,b,T){let A=!1;if(a){const t=function(t,n,o){const a=!0===o.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=p(i.isWebGL2?e.createVertexArray():r.createVertexArrayOES()),c[a]=u);return u}(b,h,l);c!==t&&(c=t,d(c.object)),A=function(e,t,n,i){const o=c.attributes,r=t.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){const t=o[l];let n=r[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(o,b,h,T),A&&function(e,t,n,i){const o={},r=t.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){let t=r[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),o[l]=n,a++}}c.attributes=o,c.attributesNum=a,c.index=i}(o,b,h,T)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,A=!0)}null!==T&&n.update(T,e.ELEMENT_ARRAY_BUFFER),(A||u)&&(u=!1,function(o,r,a,s){if(!1===i.isWebGL2&&(o.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=a.getAttributes(),u=r.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&o.instanceMatrix&&(a=o.instanceMatrix),"instanceColor"===t&&o.instanceColor&&(a=o.instanceColor)),void 0!==a){const t=a.normalized,l=a.itemSize,c=n.get(a);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===i.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||a.gpuType===IntType);if(a.isInterleavedBufferAttribute){const n=a.data,i=n.stride,c=a.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==o.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)g(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)v(r.location+e,l/r.locationSize,d,t,i*h,(c+l/r.locationSize*e)*h,p)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,a.meshPerAttribute);!0!==o.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)g(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)v(r.location+e,l/r.locationSize,d,t,l*h,l/r.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}_()}(o,l,h,b),null!==T&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(T).buffer))},reset:b,resetDefaultState:T,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:g,disableUnusedAttributes:_}}function WebGLBufferRenderer(e,t,n,i){const o=i.isWebGL2;let r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=function(i,a,s){if(0===s)return;let l,c;if(o)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,i,a,s),n.update(a,r,s)},this.renderMultiDraw=function(e,i,o){if(0===o)return;const a=t.get("WEBGL_multi_draw");if(null===a)for(let t=0;t<o;t++)this.render(e[t],i[t]);else{a.multiDrawArraysWEBGL(r,e,0,i,0,o);let t=0;for(let e=0;e<o;e++)t+=i[e];n.update(t,r,1)}}}function WebGLCapabilities(e,t,n){let i;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const r="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=r||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),_=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=d>0,b=r||t.has("OES_texture_float");return{isWebGL2:r,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:_,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:v&&b,maxSamples:r?e.getParameter(e.MAX_SAMPLES):0}}function WebGLClipping(e){const t=this;let n=null,i=0,o=!1,r=!1;const a=new Plane,s=new Matrix3,l={value:null,needsUpdate:!1};function c(e,n,i,o){const r=null!==e?e.length:0;let c=null;if(0!==r){if(c=l.value,!0!==o||null===c){const t=i+4*r,o=n.matrixWorldInverse;s.getNormalMatrix(o),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==r;++n,l+=4)a.copy(e[n]).applyMatrix4(o,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=r,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||o;return o=t,i=e.length,n},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const d=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!o||null===d||0===d.length||r&&!p)r?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=r?0:i,t=4*e;let o=f.clippingState||null;l.value=o,o=c(d,s,t,u);for(let i=0;i!==t;++i)o[i]=n[i];f.clippingState=o,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function WebGLCubeMaps(e){let t=new WeakMap;function n(e,t){return t===EquirectangularReflectionMapping?e.mapping=CubeReflectionMapping:t===EquirectangularRefractionMapping&&(e.mapping=CubeRefractionMapping),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const o=t.get(n);void 0!==o&&(t.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture){const r=o.mapping;if(r===EquirectangularReflectionMapping||r===EquirectangularRefractionMapping){if(t.has(o)){return n(t.get(o).texture,o.mapping)}{const r=o.image;if(r&&r.height>0){const a=new WebGLCubeRenderTarget(r.height/2);return a.fromEquirectangularTexture(e,o),t.set(o,a),o.addEventListener("dispose",i),n(a.texture,o.mapping)}return null}}}return o},dispose:function(){t=new WeakMap}}}class OrthographicCamera extends Camera{constructor(e=-1,t=1,n=1,i=-1,o=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=o,this.far=r,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,o,r){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=n-e,r=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=e*this.view.offsetX,r=o+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(o,r,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},i=_createRenderTarget(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(i)),this._blurMaterial=_getBlurShader(i,e,t)}return i}_compileMaterial(e){const t=new Mesh(this._lodPlanes[0],e);this._renderer.compile(t,_flatCamera)}_sceneToCubeUV(e,t,n,i){const o=new PerspectiveCamera(90,1,t,n),r=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(_clearColor),s.toneMapping=NoToneMapping,s.autoClear=!1;const u=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),d=new Mesh(new BoxGeometry,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(_clearColor),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(o.up.set(0,r[f],0),o.lookAt(a[f],0,0)):1===t?(o.up.set(0,0,r[f]),o.lookAt(0,a[f],0)):(o.up.set(0,r[f],0),o.lookAt(0,0,a[f]));const n=this._cubeSize;_setViewport(i,t*n,f>2?n:0,n,n),s.setRenderTarget(i),h&&s.render(d,o),s.render(e,o)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const o=i?this._cubemapMaterial:this._equirectMaterial,r=new Mesh(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const a=this._cubeSize;_setViewport(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(r,_flatCamera)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=_axisDirections[(i-1)%_axisDirections.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,o){const r=this._pingPongRenderTarget;this._halfBlur(e,r,t,n,i,"latitudinal",o),this._halfBlur(r,e,n,n,i,"longitudinal",o)}_halfBlur(e,t,n,i,o,r,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==r&&"longitudinal"!==r&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Mesh(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*MAX_SAMPLES-1),p=o/h,f=isFinite(o)?1+Math.floor(3*p):MAX_SAMPLES;f>MAX_SAMPLES&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${MAX_SAMPLES}`);const g=[];let m=0;for(let b=0;b<MAX_SAMPLES;++b){const e=b/p,t=Math.exp(-e*e/2);g.push(t),0===b?m+=t:b<f&&(m+=2*t)}for(let b=0;b<g.length;b++)g[b]=g[b]/m;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=g,u.latitudinal.value="latitudinal"===r,a&&(u.poleAxis.value=a);const{_lodMax:_}=this;u.dTheta.value=h,u.mipInt.value=_-n;const v=this._sizeLods[i];_setViewport(t,3*v*(i>_-LOD_MIN?i-_+LOD_MIN:0),4*(this._cubeSize-v),3*v,2*v),s.setRenderTarget(t),s.render(c,_flatCamera)}}function _createPlanes(e){const t=[],n=[],i=[];let o=e;const r=e-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let a=0;a<r;a++){const r=Math.pow(2,o);n.push(r);let s=1/r;a>e-LOD_MIN?s=EXTRA_LOD_SIGMA[a-e+LOD_MIN-1]:0===a&&(s=0),i.push(s);const l=1/(r-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,g=2,m=1,_=new Float32Array(f*p*h),v=new Float32Array(g*p*h),b=new Float32Array(m*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];_.set(i,f*p*e),v.set(d,g*p*e);const o=[e,e,e,e,e,e];b.set(o,m*p*e)}const T=new BufferGeometry;T.setAttribute("position",new BufferAttribute(_,f)),T.setAttribute("uv",new BufferAttribute(v,g)),T.setAttribute("faceIndex",new BufferAttribute(b,m)),t.push(T),o>LOD_MIN&&o--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function _createRenderTarget(e,t,n){const i=new WebGLRenderTarget(e,t,n);return i.texture.mapping=CubeUVReflectionMapping,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _setViewport(e,t,n,i,o){e.viewport.set(t,n,i,o),e.scissor.set(t,n,i,o)}function _getBlurShader(e,t,n){const i=new Float32Array(MAX_SAMPLES),o=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const o=t.get(n);void 0!==o&&(t.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture){const r=o.mapping,a=r===EquirectangularReflectionMapping||r===EquirectangularRefractionMapping,s=r===CubeReflectionMapping||r===CubeRefractionMapping;if(a||s){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let i=t.get(o);return null===n&&(n=new PMREMGenerator(e)),i=a?n.fromEquirectangular(o,i):n.fromCubemap(o,i),t.set(o,i),i.texture}if(t.has(o))return t.get(o).texture;{const r=o.image;if(a&&r&&r.height>0||s&&r&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(r)){null===n&&(n=new PMREMGenerator(e));const r=a?n.fromEquirectangular(o):n.fromCubemap(o);return t.set(o,r),o.addEventListener("dispose",i),r.texture}return null}}}return o},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function WebGLExtensions(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function WebGLGeometries(e,t,n,i){const o={},r=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);for(const n in s.morphAttributes){const e=s.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}s.removeEventListener("dispose",a),delete o[s.id];const l=r.get(s);l&&(t.remove(l),r.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,o=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],o=e[t+1],r=e[t+2];n.push(i,o,o,r,r,i)}}else{if(void 0===o)return;{const e=o.array;a=o.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,o=t+2;n.push(e,i,i,o,o,e)}}}const s=new(arrayNeedsUint32(n)?Uint32BufferAttribute:Uint16BufferAttribute)(n,1);s.version=a;const l=r.get(e);l&&t.remove(l),r.set(e,s)}return{get:function(e,t){return!0===o[t.id]||(t.addEventListener("dispose",a),o[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const r in i)t.update(i[r],e.ARRAY_BUFFER);const o=n.morphAttributes;for(const r in o){const n=o[r];for(let i=0,o=n.length;i<o;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=r.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return r.get(e)}}}function WebGLIndexedBufferRenderer(e,t,n,i){const o=i.isWebGL2;let r,a,s;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*s),n.update(i,r,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,d;if(o)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](r,l,a,i*s,c),n.update(l,r,c)},this.renderMultiDraw=function(e,i,o){if(0===o)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<o;t++)this.render(e[t]/s,i[t]);else{l.multiDrawElementsWEBGL(r,i,0,a,e,0,o);let t=0;for(let e=0;e<o;e++)t+=i[e];n.update(t,r,1)}}}function WebGLInfo(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,o){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=o*(n/3);break;case e.LINES:t.lines+=o*(n/2);break;case e.LINE_STRIP:t.lines+=o*(n-1);break;case e.LINE_LOOP:t.lines+=o*n;break;case e.POINTS:t.points+=o*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function numericalSort(e,t){return e[0]-t[0]}function absNumericalSort(e,t){return Math.abs(t[1])-Math.abs(e[1])}function WebGLMorphtargets(e,t,n){const i={},o=new Float32Array(8),r=new WeakMap,a=new Vector4,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=r.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const _=void 0!==c.morphAttributes.position,v=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,T=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],y=c.morphAttributes.color||[];let E=0;!0===_&&(E=1),!0===v&&(E=2),!0===b&&(E=3);let S=c.attributes.position.count*E,C=1;S>t.maxTextureSize&&(C=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const w=new Float32Array(S*C*4*p),x=new DataArrayTexture(w,S,C,p);x.type=FloatType,x.needsUpdate=!0;const M=4*E;for(let I=0;I<p;I++){const D=T[I],k=A[I],L=y[I],O=S*C*4*I;for(let P=0;P<D.count;P++){const N=P*M;!0===_&&(a.fromBufferAttribute(D,P),w[O+N+0]=a.x,w[O+N+1]=a.y,w[O+N+2]=a.z,w[O+N+3]=0),!0===v&&(a.fromBufferAttribute(k,P),w[O+N+4]=a.x,w[O+N+5]=a.y,w[O+N+6]=a.z,w[O+N+7]=0),!0===b&&(a.fromBufferAttribute(L,P),w[O+N+8]=a.x,w[O+N+9]=a.y,w[O+N+10]=a.z,w[O+N+11]=4===L.itemSize?a.w:1)}}function R(){x.dispose(),r.delete(c),c.removeEventListener("dispose",R)}f={count:p,texture:x,size:new Vector2(S,C)},r.set(c,f),c.addEventListener("dispose",R)}let g=0;for(let $=0;$<d.length;$++)g+=d[$];const m=c.morphTargetsRelative?1:1-g;u.getUniforms().setValue(e,"morphTargetBaseInfluence",m),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const B=void 0===d?0:d.length;let F=i[c.id];if(void 0===F||F.length!==B){F=[];for(let W=0;W<B;W++)F[W]=[W,0];i[c.id]=F}for(let z=0;z<B;z++){const j=F[z];j[0]=z,j[1]=d[z]}F.sort(absNumericalSort);for(let X=0;X<8;X++)X<B&&F[X][1]?(s[X][0]=F[X][0],s[X][1]=F[X][1]):(s[X][0]=Number.MAX_SAFE_INTEGER,s[X][1]=0);s.sort(numericalSort);const U=c.morphAttributes.position,G=c.morphAttributes.normal;let V=0;for(let Y=0;Y<8;Y++){const q=s[Y],K=q[0],Q=q[1];K!==Number.MAX_SAFE_INTEGER&&Q?(U&&c.getAttribute("morphTarget"+Y)!==U[K]&&c.setAttribute("morphTarget"+Y,U[K]),G&&c.getAttribute("morphNormal"+Y)!==G[K]&&c.setAttribute("morphNormal"+Y,G[K]),o[Y]=Q,V+=Q):(U&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),G&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),o[Y]=0)}const H=c.morphTargetsRelative?1:1-V;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",o)}}}}function WebGLObjects(e,t,n,i){let o=new WeakMap;function r(e){const t=e.target;t.removeEventListener("dispose",r),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=i.render.frame,l=a.geometry,c=t.get(a,l);if(o.get(c)!==s&&(t.update(c),o.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",r)&&a.addEventListener("dispose",r),o.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),o.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;o.get(e)!==s&&(e.update(),o.set(e,s))}return c},dispose:function(){o=new WeakMap}}}class DepthTexture extends Texture{constructor(e,t,n,i,o,r,a,s,l,c){if((c=void 0!==c?c:DepthFormat)!==DepthFormat&&c!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===DepthFormat&&(n=UnsignedIntType),void 0===n&&c===DepthStencilFormat&&(n=UnsignedInt248Type),super(null,i,o,r,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:NearestFilter,this.minFilter=void 0!==s?s:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1);emptyShadowTexture.compareFunction=LessEqualCompare;const emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(e,t,n){const i=e[0];if(i<=0||i>0)return e;const o=t*n;let r=arrayCacheF32[o];if(void 0===r&&(r=new Float32Array(o),arrayCacheF32[o]=r),0!==t){i.toArray(r,0);for(let i=1,o=0;i!==t;++i)o+=n,e[i].toArray(r,o)}return r}function arraysEqual(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function copyArray(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function allocTexUnits(e,t){let n=arrayCacheI32[t];void 0===n&&(n=new Int32Array(t),arrayCacheI32[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function setValueV1f(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function setValueV2f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2fv(this.addr,t),copyArray(n,t)}}function setValueV3f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(arraysEqual(n,t))return;e.uniform3fv(this.addr,t),copyArray(n,t)}}function setValueV4f(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4fv(this.addr,t),copyArray(n,t)}}function setValueM2(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;mat2array.set(i),e.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(n,i)}}function setValueM3(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;mat3array.set(i),e.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(n,i)}}function setValueM4(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(arraysEqual(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),copyArray(n,t)}else{if(arraysEqual(n,i))return;mat4array.set(i),e.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(n,i)}}function setValueV1i(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function setValueV2i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2iv(this.addr,t),copyArray(n,t)}}function setValueV3i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;e.uniform3iv(this.addr,t),copyArray(n,t)}}function setValueV4i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4iv(this.addr,t),copyArray(n,t)}}function setValueV1ui(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function setValueV2ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(arraysEqual(n,t))return;e.uniform2uiv(this.addr,t),copyArray(n,t)}}function setValueV3ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(arraysEqual(n,t))return;e.uniform3uiv(this.addr,t),copyArray(n,t)}}function setValueV4ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(arraysEqual(n,t))return;e.uniform4uiv(this.addr,t),copyArray(n,t)}}function setValueT1(e,t,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(e.uniform1i(this.addr,o),i[0]=o);const r=this.type===e.SAMPLER_2D_SHADOW?emptyShadowTexture:emptyTexture;n.setTexture2D(t||r,o)}function setValueT3D1(e,t,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(e.uniform1i(this.addr,o),i[0]=o),n.setTexture3D(t||empty3dTexture,o)}function setValueT6(e,t,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(e.uniform1i(this.addr,o),i[0]=o),n.setTextureCube(t||emptyCubeTexture,o)}function setValueT2DArray1(e,t,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(e.uniform1i(this.addr,o),i[0]=o),n.setTexture2DArray(t||emptyArrayTexture,o)}function getSingularSetter(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(e,t){e.uniform1fv(this.addr,t)}function setValueV2fArray(e,t){const n=flatten(t,this.size,2);e.uniform2fv(this.addr,n)}function setValueV3fArray(e,t){const n=flatten(t,this.size,3);e.uniform3fv(this.addr,n)}function setValueV4fArray(e,t){const n=flatten(t,this.size,4);e.uniform4fv(this.addr,n)}function setValueM2Array(e,t){const n=flatten(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function setValueM3Array(e,t){const n=flatten(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function setValueM4Array(e,t){const n=flatten(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function setValueV1iArray(e,t){e.uniform1iv(this.addr,t)}function setValueV2iArray(e,t){e.uniform2iv(this.addr,t)}function setValueV3iArray(e,t){e.uniform3iv(this.addr,t)}function setValueV4iArray(e,t){e.uniform4iv(this.addr,t)}function setValueV1uiArray(e,t){e.uniform1uiv(this.addr,t)}function setValueV2uiArray(e,t){e.uniform2uiv(this.addr,t)}function setValueV3uiArray(e,t){e.uniform3uiv(this.addr,t)}function setValueV4uiArray(e,t){e.uniform4uiv(this.addr,t)}function setValueT1Array(e,t,n){const i=this.cache,o=t.length,r=allocTexUnits(n,o);arraysEqual(i,r)||(e.uniform1iv(this.addr,r),copyArray(i,r));for(let a=0;a!==o;++a)n.setTexture2D(t[a]||emptyTexture,r[a])}function setValueT3DArray(e,t,n){const i=this.cache,o=t.length,r=allocTexUnits(n,o);arraysEqual(i,r)||(e.uniform1iv(this.addr,r),copyArray(i,r));for(let a=0;a!==o;++a)n.setTexture3D(t[a]||empty3dTexture,r[a])}function setValueT6Array(e,t,n){const i=this.cache,o=t.length,r=allocTexUnits(n,o);arraysEqual(i,r)||(e.uniform1iv(this.addr,r),copyArray(i,r));for(let a=0;a!==o;++a)n.setTextureCube(t[a]||emptyCubeTexture,r[a])}function setValueT2DArrayArray(e,t,n){const i=this.cache,o=t.length,r=allocTexUnits(n,o);arraysEqual(i,r)||(e.uniform1iv(this.addr,r),copyArray(i,r));for(let a=0;a!==o;++a)n.setTexture2DArray(t[a]||emptyArrayTexture,r[a])}function getPureArraySetter(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=getSingularSetter(t.type)}}class PureArrayUniform{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=getPureArraySetter(t.type)}}class StructuredUniform{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let o=0,r=i.length;o!==r;++o){const r=i[o];r.setValue(e,t[r.id],n)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,n){const i=e.name,o=i.length;for(RePathPart.lastIndex=0;;){const r=RePathPart.exec(i),a=RePathPart.lastIndex;let s=r[1];const l="]"===r[2],c=r[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===o){addUniform(n,void 0===c?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new StructuredUniform(s),addUniform(n,e)),n=e}}}class WebGLUniforms{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);parseUniform(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const o=this.map[t];void 0!==o&&o.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let o=0,r=t.length;o!==r;++o){const r=t[o],a=n[r.id];!1!==a.needsUpdate&&r.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,o=e.length;i!==o;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function WebGLShader(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(e,t){const n=e.split("\n"),i=[],o=Math.max(t-6,0),r=Math.min(t+6,n.length);for(let a=o;a<r;a++){const e=a+1;i.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return i.join("\n")}function getEncodingComponents(e){const t=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),n=ColorManagement.getPrimaries(e);let i;switch(t===n?i="":t===P3Primaries&&n===Rec709Primaries?i="LinearDisplayP3ToLinearSRGB":t===Rec709Primaries&&n===P3Primaries&&(i="LinearSRGBToLinearDisplayP3"),e){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[i,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}function getShaderErrors(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),o=e.getShaderInfoLog(t).trim();if(i&&""===o)return"";const r=/ERROR: 0:(\d+)/.exec(o);if(r){const i=parseInt(r[1]);return n.toUpperCase()+"\n\n"+o+"\n\n"+handleSource(e.getShaderSource(t),i)}return o}function getTexelEncodingFunction(e,t){const n=getEncodingComponents(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function getToneMappingFunction(e,t){let n;switch(t){case LinearToneMapping:n="Linear";break;case ReinhardToneMapping:n="Reinhard";break;case CineonToneMapping:n="OptimizedCineon";break;case ACESFilmicToneMapping:n="ACESFilmic";break;case AgXToneMapping:n="AgX";break;case CustomToneMapping:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function generateExtensions(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateVertexExtensions(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(filterEmptyLine).join("\n")}function generateDefines(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function fetchAttributeLocations(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const i=e.getActiveAttrib(t,o),r=i.name;let a=1;i.type===e.FLOAT_MAT2&&(a=2),i.type===e.FLOAT_MAT3&&(a=3),i.type===e.FLOAT_MAT4&&(a=4),n[r]={type:i.type,location:e.getAttribLocation(t,r),locationSize:a}}return n}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(e,t){let n=ShaderChunk[t];if(void 0===n){const e=shaderChunkMap.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=ShaderChunk[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return resolveIncludes(n)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(e,t,n,i){let o="";for(let r=parseInt(t);r<parseInt(n);r++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return o}function generatePrecision(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function generateShadowMapTypeDefine(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===PCFShadowMap?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===PCFSoftShadowMap?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===VSMShadowMap&&(t="SHADOWMAP_TYPE_VSM"),t}function generateEnvMapTypeDefine(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:t="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:t="ENVMAP_TYPE_CUBE_UV"}return t}function generateEnvMapModeDefine(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap&&e.envMapMode===CubeRefractionMapping)t="ENVMAP_MODE_REFRACTION";return t}function generateEnvMapBlendingDefine(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case MultiplyOperation:t="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:t="ENVMAP_BLENDING_MIX";break;case AddOperation:t="ENVMAP_BLENDING_ADD"}return t}function generateCubeUVSize(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}function WebGLProgram(e,t,n,i){const o=e.getContext(),r=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=generateShadowMapTypeDefine(n),c=generateEnvMapTypeDefine(n),u=generateEnvMapModeDefine(n),d=generateEnvMapBlendingDefine(n),h=generateCubeUVSize(n),p=n.isWebGL2?"":generateExtensions(n),f=generateVertexExtensions(n),g=generateDefines(r),m=o.createProgram();let _,v,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(filterEmptyLine).join("\n"),_.length>0&&(_+="\n"),v=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(filterEmptyLine).join("\n"),v.length>0&&(v+="\n")):(_=[generatePrecision(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),v=[p,generatePrecision(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",n.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",n.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),a=resolveIncludes(a),a=replaceLightNums(a,n),a=replaceClippingPlaneNums(a,n),s=resolveIncludes(s),s=replaceLightNums(s,n),s=replaceClippingPlaneNums(s,n),a=unrollLoops(a),s=unrollLoops(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",_=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,v=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const T=b+_+a,A=b+v+s,y=WebGLShader(o,o.VERTEX_SHADER,T),E=WebGLShader(o,o.FRAGMENT_SHADER,A);function S(t){if(e.debug.checkShaderErrors){const n=o.getProgramInfoLog(m).trim(),i=o.getShaderInfoLog(y).trim(),r=o.getShaderInfoLog(E).trim();let a=!0,s=!0;if(!1===o.getProgramParameter(m,o.LINK_STATUS))if(a=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(o,m,y,E);else{const e=getShaderErrors(o,y,"vertex"),t=getShaderErrors(o,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(m,o.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==r||(s=!1);s&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:_},fragmentShader:{log:r,prefix:v}})}o.deleteShader(y),o.deleteShader(E),C=new WebGLUniforms(o,m),w=fetchAttributeLocations(o,m)}let C,w;o.attachShader(m,y),o.attachShader(m,E),void 0!==n.index0AttributeName?o.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(m,0,"position"),o.linkProgram(m),this.getUniforms=function(){return void 0===C&&S(this),C},this.getAttributes=function(){return void 0===w&&S(this),w};let x=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===x&&(x=o.getProgramParameter(m,COMPLETION_STATUS_KHR)),x},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=programIdCount++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=y,this.fragmentShader=E,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(n),r=this._getShaderCacheForMaterial(e);return!1===r.has(i)&&(r.add(i),i.usedTimes++),!1===r.has(o)&&(r.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new WebGLShaderStage(e),t.set(e,n)),n}}class WebGLShaderStage{constructor(e){this.id=_id$1++,this.code=e,this.usedTimes=0}}function WebGLPrograms(e,t,n,i,o,r,a){const s=new Layers,l=new WebGLShaderCache,c=[],u=o.isWebGL2,d=o.logarithmicDepthBuffer,h=o.vertexTextures;let p=o.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(r,s,c,m,_){const v=m.fog,b=_.geometry,T=r.isMeshStandardMaterial?m.environment:null,A=(r.isMeshStandardMaterial?n:t).get(r.envMap||T),y=A&&A.mapping===CubeUVReflectionMapping?A.image.height:null,E=f[r.type];null!==r.precision&&(p=o.getMaxPrecision(r.precision),p!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",p,"instead."));const S=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,C=void 0!==S?S.length:0;let w,x,M,R,I=0;if(void 0!==b.morphAttributes.position&&(I=1),void 0!==b.morphAttributes.normal&&(I=2),void 0!==b.morphAttributes.color&&(I=3),E){const e=ShaderLib[E];w=e.vertexShader,x=e.fragmentShader}else w=r.vertexShader,x=r.fragmentShader,l.update(r),M=l.getVertexShaderID(r),R=l.getFragmentShaderID(r);const D=e.getRenderTarget(),k=!0===_.isInstancedMesh,L=!0===_.isBatchedMesh,O=!!r.map,P=!!r.matcap,N=!!A,$=!!r.aoMap,B=!!r.lightMap,F=!!r.bumpMap,U=!!r.normalMap,G=!!r.displacementMap,V=!!r.emissiveMap,H=!!r.metalnessMap,W=!!r.roughnessMap,z=r.anisotropy>0,j=r.clearcoat>0,X=r.iridescence>0,Y=r.sheen>0,q=r.transmission>0,K=z&&!!r.anisotropyMap,Q=j&&!!r.clearcoatMap,Z=j&&!!r.clearcoatNormalMap,J=j&&!!r.clearcoatRoughnessMap,ee=X&&!!r.iridescenceMap,te=X&&!!r.iridescenceThicknessMap,ne=Y&&!!r.sheenColorMap,ie=Y&&!!r.sheenRoughnessMap,oe=!!r.specularMap,re=!!r.specularColorMap,ae=!!r.specularIntensityMap,se=q&&!!r.transmissionMap,le=q&&!!r.thicknessMap,ce=!!r.gradientMap,ue=!!r.alphaMap,de=r.alphaTest>0,he=!!r.alphaHash,pe=!!r.extensions,fe=!!b.attributes.uv1,ge=!!b.attributes.uv2,me=!!b.attributes.uv3;let _e=NoToneMapping;return r.toneMapped&&(null!==D&&!0!==D.isXRRenderTarget||(_e=e.toneMapping)),{isWebGL2:u,shaderID:E,shaderType:r.type,shaderName:r.name,vertexShader:w,fragmentShader:x,defines:r.defines,customVertexShaderID:M,customFragmentShaderID:R,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:p,batching:L,instancing:k,instancingColor:k&&null!==_.instanceColor,supportsVertexTextures:h,outputColorSpace:null===D?e.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:LinearSRGBColorSpace,map:O,matcap:P,envMap:N,envMapMode:N&&A.mapping,envMapCubeUVHeight:y,aoMap:$,lightMap:B,bumpMap:F,normalMap:U,displacementMap:h&&G,emissiveMap:V,normalMapObjectSpace:U&&r.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:U&&r.normalMapType===TangentSpaceNormalMap,metalnessMap:H,roughnessMap:W,anisotropy:z,anisotropyMap:K,clearcoat:j,clearcoatMap:Q,clearcoatNormalMap:Z,clearcoatRoughnessMap:J,iridescence:X,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:Y,sheenColorMap:ne,sheenRoughnessMap:ie,specularMap:oe,specularColorMap:re,specularIntensityMap:ae,transmission:q,transmissionMap:se,thicknessMap:le,gradientMap:ce,opaque:!1===r.transparent&&r.blending===NormalBlending,alphaMap:ue,alphaTest:de,alphaHash:he,combine:r.combine,mapUv:O&&g(r.map.channel),aoMapUv:$&&g(r.aoMap.channel),lightMapUv:B&&g(r.lightMap.channel),bumpMapUv:F&&g(r.bumpMap.channel),normalMapUv:U&&g(r.normalMap.channel),displacementMapUv:G&&g(r.displacementMap.channel),emissiveMapUv:V&&g(r.emissiveMap.channel),metalnessMapUv:H&&g(r.metalnessMap.channel),roughnessMapUv:W&&g(r.roughnessMap.channel),anisotropyMapUv:K&&g(r.anisotropyMap.channel),clearcoatMapUv:Q&&g(r.clearcoatMap.channel),clearcoatNormalMapUv:Z&&g(r.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&g(r.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&g(r.iridescenceMap.channel),iridescenceThicknessMapUv:te&&g(r.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&g(r.sheenColorMap.channel),sheenRoughnessMapUv:ie&&g(r.sheenRoughnessMap.channel),specularMapUv:oe&&g(r.specularMap.channel),specularColorMapUv:re&&g(r.specularColorMap.channel),specularIntensityMapUv:ae&&g(r.specularIntensityMap.channel),transmissionMapUv:se&&g(r.transmissionMap.channel),thicknessMapUv:le&&g(r.thicknessMap.channel),alphaMapUv:ue&&g(r.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(U||z),vertexColors:r.vertexColors,vertexAlphas:!0===r.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUv1s:fe,vertexUv2s:ge,vertexUv3s:me,pointsUvs:!0===_.isPoints&&!!b.attributes.uv&&(O||ue),fog:!!v,useFog:!0===r.fog,fogExp2:v&&v.isFogExp2,flatShading:!0===r.flatShading,sizeAttenuation:!0===r.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:C,morphTextureStride:I,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:_e,useLegacyLights:e._useLegacyLights,decodeVideoTexture:O&&!0===r.map.isVideoTexture&&ColorManagement.getTransfer(r.map.colorSpace)===SRGBTransfer,premultipliedAlpha:r.premultipliedAlpha,doubleSided:r.side===DoubleSide,flipSided:r.side===BackSide,useDepthPacking:r.depthPacking>=0,depthPacking:r.depthPacking||0,index0AttributeName:r.index0AttributeName,extensionDerivatives:pe&&!0===r.extensions.derivatives,extensionFragDepth:pe&&!0===r.extensions.fragDepth,extensionDrawBuffers:pe&&!0===r.extensions.drawBuffers,extensionShaderTextureLOD:pe&&!0===r.extensions.shaderTextureLOD,extensionClipCullDistance:pe&&r.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=ShaderLib[t];n=UniformsUtils.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,o=c.length;e<o;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new WebGLProgram(e,n,t,r),c.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function WebGLProperties(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function painterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(){const e=[];let t=0;const n=[],i=[],o=[];function r(n,i,o,r,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:o,groupOrder:r,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=o,l.groupOrder=r,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:o,init:function(){t=0,n.length=0,i.length=0,o.length=0},push:function(e,t,a,s,l,c){const u=r(e,t,a,s,l,c);a.transmission>0?i.push(u):!0===a.transparent?o.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=r(e,t,a,s,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?o.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||painterSortStable),i.length>1&&i.sort(t||reversePainterSortStable),o.length>1&&o.sort(t||reversePainterSortStable)}}}function WebGLRenderLists(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let o;return void 0===i?(o=new WebGLRenderList,e.set(t,[o])):n>=i.length?(o=new WebGLRenderList,i.push(o)):o=i[n],o},dispose:function(){e=new WeakMap}}}function UniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Vector3,color:new Color};break;case"SpotLight":n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return e[t.id]=n,n}}}function ShadowUniformsCache(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function WebGLLights(e,t){const n=new UniformsCache,i=ShadowUniformsCache(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)o.probe.push(new Vector3);const r=new Vector3,a=new Matrix4,s=new Matrix4;return{setup:function(r,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)o.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,g=0,m=0,_=0,v=0,b=0,T=0;r.sort(shadowCastingAndTexturingLightsFirst);const A=!0===a?Math.PI:1;for(let e=0,t=r.length;e<t;e++){const t=r[e],a=t.color,y=t.intensity,E=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*y*A,l+=a.g*y*A,c+=a.b*y*A;else if(t.isLightProbe){for(let e=0;e<9;e++)o.probe[e].addScaledVector(t.sh.coefficients[e],y);T++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*A),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,o.directionalShadow[u]=n,o.directionalShadowMap[u]=S,o.directionalShadowMatrix[u]=t.shadow.matrix,g++}o.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(y*A),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,o.spot[h]=e;const r=t.shadow;if(t.map&&(o.spotLightMap[v]=t.map,v++,r.updateMatrices(t),t.castShadow&&b++),o.spotLightMatrix[h]=r.matrix,t.castShadow){const e=i.get(t);e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,o.spotShadow[h]=e,o.spotShadowMap[h]=S,_++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),o.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*A),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,o.pointShadow[d]=n,o.pointShadowMap[d]=S,o.pointShadowMatrix[d]=t.shadow.matrix,m++}o.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y*A),e.groundColor.copy(t.groundColor).multiplyScalar(y*A),o.hemi[f]=e,f++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(o.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,o.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(o.rectAreaLTC1=UniformsLib.LTC_HALF_1,o.rectAreaLTC2=UniformsLib.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(o.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,o.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=UniformsLib.LTC_HALF_1,o.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=s,o.ambient[1]=l,o.ambient[2]=c;const y=o.hash;y.directionalLength===u&&y.pointLength===d&&y.spotLength===h&&y.rectAreaLength===p&&y.hemiLength===f&&y.numDirectionalShadows===g&&y.numPointShadows===m&&y.numSpotShadows===_&&y.numSpotMaps===v&&y.numLightProbes===T||(o.directional.length=u,o.spot.length=h,o.rectArea.length=p,o.point.length=d,o.hemi.length=f,o.directionalShadow.length=g,o.directionalShadowMap.length=g,o.pointShadow.length=m,o.pointShadowMap.length=m,o.spotShadow.length=_,o.spotShadowMap.length=_,o.directionalShadowMatrix.length=g,o.pointShadowMatrix.length=m,o.spotLightMatrix.length=_+v-b,o.spotLightMap.length=v,o.numSpotLightShadowsWithMaps=b,o.numLightProbes=T,y.directionalLength=u,y.pointLength=d,y.spotLength=h,y.rectAreaLength=p,y.hemiLength=f,y.numDirectionalShadows=g,y.numPointShadows=m,y.numSpotShadows=_,y.numSpotMaps=v,y.numLightProbes=T,o.version=nextVersion++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=o.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=o.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=o.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(t.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=o.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),i++}else if(t.isHemisphereLight){const e=o.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:o}}function WebGLRenderState(e,t){const n=new WebGLLights(e,t),i=[],o=[];return{init:function(){i.length=0,o.length=0},state:{lightsArray:i,shadowsArray:o,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){o.push(e)}}}function WebGLRenderStates(e,t){let n=new WeakMap;return{get:function(i,o=0){const r=n.get(i);let a;return void 0===r?(a=new WebGLRenderState(e,t),n.set(i,[a])):o>=r.length?(a=new WebGLRenderState(e,t),r.push(a)):a=r[o],a},dispose:function(){n=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vertex="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragment="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function WebGLShadowMap(e,t,n){let i=new Frustum;const o=new Vector2,r=new Vector2,a=new Vector4,s=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),l=new MeshDistanceMaterial,c={},u=n.maxTextureSize,d={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},h=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new BufferGeometry;f.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Mesh(f,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let _=this.type;function v(n,i){const r=t.update(g);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new WebGLRenderTarget(o.x,o.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,p,g,null)}function b(t,n,i,o){let r=null;const a=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)r=a;else if(r=!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=r.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let o=i[t];void 0===o&&(o=r.clone(),i[t]=o,n.addEventListener("dispose",A)),r=o}if(r.visible=n.visible,r.wireframe=n.wireframe,r.side=o===VSMShadowMap?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],r.alphaMap=n.alphaMap,r.alphaTest=n.alphaTest,r.map=n.map,r.clipShadows=n.clipShadows,r.clippingPlanes=n.clippingPlanes,r.clipIntersection=n.clipIntersection,r.displacementMap=n.displacementMap,r.displacementScale=n.displacementScale,r.displacementBias=n.displacementBias,r.wireframeLinewidth=n.wireframeLinewidth,r.linewidth=n.linewidth,!0===i.isPointLight&&!0===r.isMeshDistanceMaterial){e.properties.get(r).light=i}return r}function T(n,o,r,a,s){if(!1===n.visible)return;if(n.layers.test(o.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===VSMShadowMap)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=b(n,d,a,s);n.onBeforeShadow(e,n,o,r,i,t,u),e.renderBufferDirect(r,null,i,t,n,u),n.onAfterShadow(e,n,o,r,i,t,u)}}}else if(l.visible){const t=b(n,l,a,s);n.onBeforeShadow(e,n,o,r,i,t,null),e.renderBufferDirect(r,null,i,t,n,null),n.onAfterShadow(e,n,o,r,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)T(l[e],o,r,a,s)}function A(e){e.target.removeEventListener("dispose",A);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,s){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(NoBlending),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=_!==VSMShadowMap&&this.type===VSMShadowMap,f=_===VSMShadowMap&&this.type!==VSMShadowMap;for(let g=0,m=t.length;g<m;g++){const l=t[g],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;o.copy(c.mapSize);const d=c.getFrameExtents();if(o.multiply(d),r.copy(c.mapSize),(o.x>u||o.y>u)&&(o.x>u&&(r.x=Math.floor(u/d.x),o.x=r.x*d.x,c.mapSize.x=r.x),o.y>u&&(r.y=Math.floor(u/d.y),o.y=r.y*d.y,c.mapSize.y=r.y)),null===c.map||!0===p||!0===f){const e=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};null!==c.map&&c.map.dispose(),c.map=new WebGLRenderTarget(o.x,o.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const m=c.getViewportCount();for(let e=0;e<m;e++){const t=c.getViewport(e);a.set(r.x*t.x,r.y*t.y,r.x*t.z,r.y*t.w),h.viewport(a),c.updateMatrices(l,e),i=c.getFrustum(),T(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===VSMShadowMap&&v(c,s),c.needsUpdate=!1}_=this.type,m.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function WebGLState(e,t,n){const i=n.isWebGL2;const o=new function(){let t=!1;const n=new Vector4;let i=null;const o=new Vector4(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,r,a,s){!0===s&&(t*=a,i*=a,r*=a),n.set(t,i,r,a),!1===o.equals(n)&&(e.clearColor(t,i,r,a),o.copy(n))},reset:function(){t=!1,i=null,o.set(-1,0,0,0)}}},r=new function(){let t=!1,n=null,i=null,o=null;return{setTest:function(t){t?V(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case NeverDepth:e.depthFunc(e.NEVER);break;case AlwaysDepth:e.depthFunc(e.ALWAYS);break;case LessDepth:e.depthFunc(e.LESS);break;case LessEqualDepth:e.depthFunc(e.LEQUAL);break;case EqualDepth:e.depthFunc(e.EQUAL);break;case GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case GreaterDepth:e.depthFunc(e.GREATER);break;case NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){o!==t&&(e.clearDepth(t),o=t)},reset:function(){t=!1,n=null,i=null,o=null}}},a=new function(){let t=!1,n=null,i=null,o=null,r=null,a=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?V(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&o===n&&r===a||(e.stencilFunc(t,n,a),i=t,o=n,r=a)},setOp:function(t,n,i){a===t&&s===n&&l===i||(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,o=null,r=null,a=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],p=null,f=!1,g=null,m=null,_=null,v=null,b=null,T=null,A=null,y=new Color(0,0,0),E=0,S=!1,C=null,w=null,x=null,M=null,R=null;const I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,k=0;const L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(L)[1]),D=k>=1):-1!==L.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),D=k>=2);let O=null,P={};const N=e.getParameter(e.SCISSOR_BOX),$=e.getParameter(e.VIEWPORT),B=(new Vector4).fromArray(N),F=(new Vector4).fromArray($);function U(t,n,o,r){const a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<o;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}const G={};function V(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function H(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}G[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),G[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(G[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),G[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),r.setClear(1),a.setClear(0),V(e.DEPTH_TEST),r.setFunc(LessEqualDepth),X(!1),Y(CullFaceBack),V(e.CULL_FACE),j(NoBlending);const W={[AddEquation]:e.FUNC_ADD,[SubtractEquation]:e.FUNC_SUBTRACT,[ReverseSubtractEquation]:e.FUNC_REVERSE_SUBTRACT};if(i)W[MinEquation]=e.MIN,W[MaxEquation]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[MinEquation]=e.MIN_EXT,W[MaxEquation]=e.MAX_EXT)}const z={[ZeroFactor]:e.ZERO,[OneFactor]:e.ONE,[SrcColorFactor]:e.SRC_COLOR,[SrcAlphaFactor]:e.SRC_ALPHA,[SrcAlphaSaturateFactor]:e.SRC_ALPHA_SATURATE,[DstColorFactor]:e.DST_COLOR,[DstAlphaFactor]:e.DST_ALPHA,[OneMinusSrcColorFactor]:e.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:e.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:e.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:e.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:e.CONSTANT_COLOR,[OneMinusConstantColorFactor]:e.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:e.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,n,i,o,r,a,s,l,c,u){if(t!==NoBlending){if(!1===f&&(V(e.BLEND),f=!0),t===CustomBlending)r=r||n,a=a||i,s=s||o,n===m&&r===b||(e.blendEquationSeparate(W[n],W[r]),m=n,b=r),i===_&&o===v&&a===T&&s===A||(e.blendFuncSeparate(z[i],z[o],z[a],z[s]),_=i,v=o,T=a,A=s),!1!==l.equals(y)&&c===E||(e.blendColor(l.r,l.g,l.b,c),y.copy(l),E=c),g=t,S=!1;else if(t!==g||u!==S){if(m===AddEquation&&b===AddEquation||(e.blendEquation(e.FUNC_ADD),m=AddEquation,b=AddEquation),u)switch(t){case NormalBlending:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:e.blendFunc(e.ONE,e.ONE);break;case SubtractiveBlending:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case MultiplyBlending:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case NormalBlending:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case SubtractiveBlending:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case MultiplyBlending:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}_=null,v=null,T=null,A=null,y.set(0,0,0),E=0,g=t,S=u}}else!0===f&&(H(e.BLEND),f=!1)}function X(t){C!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),C=t)}function Y(t){t!==CullFaceNone?(V(e.CULL_FACE),t!==w&&(t===CullFaceBack?e.cullFace(e.BACK):t===CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),w=t}function q(t,n,i){t?(V(e.POLYGON_OFFSET_FILL),M===n&&R===i||(e.polygonOffset(n,i),M=n,R=i)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:r,stencil:a},enable:V,disable:H,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,o){let r=h,a=!1;if(i)if(r=d.get(o),void 0===r&&(r=[],d.set(o,r)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(r.length!==t.length||r[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)r[n]=e.COLOR_ATTACHMENT0+n;r.length=t.length,a=!0}}else r[0]!==e.COLOR_ATTACHMENT0&&(r[0]=e.COLOR_ATTACHMENT0,a=!0);else r[0]!==e.BACK&&(r[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(r):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(r))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:j,setMaterial:function(t,n){t.side===DoubleSide?H(e.CULL_FACE):V(e.CULL_FACE);let i=t.side===BackSide;n&&(i=!i),X(i),t.blending===NormalBlending&&!1===t.transparent?j(NoBlending):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),o.setMask(t.colorWrite);const s=t.stencilWrite;a.setTest(s),s&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:Y,setLineWidth:function(t){t!==x&&(D&&e.lineWidth(t),x=t)},setPolygonOffset:q,setScissorTest:function(t){t?V(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+I-1),O!==t&&(e.activeTexture(t),O=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===O?e.TEXTURE0+I-1:O);let o=P[i];void 0===o&&(o={type:void 0,texture:void 0},P[i]=o),o.type===t&&o.texture===n||(O!==i&&(e.activeTexture(i),O=i),e.bindTexture(t,n||G[t]),o.type=t,o.texture=n)},unbindTexture:function(){const t=P[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let o=i.get(t);void 0===o&&(o=e.getUniformBlockIndex(n,t.name),i.set(t,o))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);s.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},O=null,P={},u={},d=new WeakMap,h=[],p=null,f=!1,g=null,m=null,_=null,v=null,b=null,T=null,A=null,y=new Color(0,0,0),E=0,S=!1,C=null,w=null,x=null,M=null,R=null,B.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),o.reset(),r.reset(),a.reset()}}}function WebGLTextures(e,t,n,i,o,r,a){const s=o.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(err){}function f(e,t){return p?new OffscreenCanvas(e,t):createElementNS("canvas")}function g(e,t,n,i){let o=1;if((e.width>i||e.height>i)&&(o=i/Math.max(e.width,e.height)),o<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?floorPowerOfTwo:Math.floor,r=i(o*e.width),a=i(o*e.height);void 0===d&&(d=f(r,a));const s=n?f(r,a):d;s.width=r,s.height=a;return s.getContext("2d").drawImage(e,0,0,r,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+r+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function m(e){return isPowerOfTwo(e.width)&&isPowerOfTwo(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter}function v(t){e.generateMipmap(t)}function b(n,i,o,r,a=!1){if(!1===s)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(o===e.FLOAT&&(l=e.R32F),o===e.HALF_FLOAT&&(l=e.R16F),o===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(o===e.UNSIGNED_BYTE&&(l=e.R8UI),o===e.UNSIGNED_SHORT&&(l=e.R16UI),o===e.UNSIGNED_INT&&(l=e.R32UI),o===e.BYTE&&(l=e.R8I),o===e.SHORT&&(l=e.R16I),o===e.INT&&(l=e.R32I)),i===e.RG&&(o===e.FLOAT&&(l=e.RG32F),o===e.HALF_FLOAT&&(l=e.RG16F),o===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=a?LinearTransfer:ColorManagement.getTransfer(r);o===e.FLOAT&&(l=e.RGBA32F),o===e.HALF_FLOAT&&(l=e.RGBA16F),o===e.UNSIGNED_BYTE&&(l=t===SRGBTransfer?e.SRGB8_ALPHA8:e.RGBA8),o===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),o===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function T(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(t){return t===NearestFilter||t===NearestMipmapNearestFilter||t===NearestMipmapLinearFilter?e.NEAREST:e.LINEAR}function y(e){const t=e.target;t.removeEventListener("dispose",y),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,o=h.get(n);if(o){const i=o[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&S(e),0===Object.keys(o).length&&h.delete(n)}i.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,o=i.get(t),r=i.get(n);void 0!==r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(o.__webglFramebuffer[i]))for(let t=0;t<o.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(o.__webglFramebuffer[i][t]);else e.deleteFramebuffer(o.__webglFramebuffer[i]);o.__webglDepthbuffer&&e.deleteRenderbuffer(o.__webglDepthbuffer[i])}else{if(Array.isArray(o.__webglFramebuffer))for(let t=0;t<o.__webglFramebuffer.length;t++)e.deleteFramebuffer(o.__webglFramebuffer[t]);else e.deleteFramebuffer(o.__webglFramebuffer);if(o.__webglDepthbuffer&&e.deleteRenderbuffer(o.__webglDepthbuffer),o.__webglMultisampledFramebuffer&&e.deleteFramebuffer(o.__webglMultisampledFramebuffer),o.__webglColorRenderbuffer)for(let t=0;t<o.__webglColorRenderbuffer.length;t++)o.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(o.__webglColorRenderbuffer[t]);o.__webglDepthRenderbuffer&&e.deleteRenderbuffer(o.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const t=i.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),i.remove(n[s])}i.remove(n),i.remove(t)}(n)}function S(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const o=t.source;delete h.get(o)[n.__cacheKey],a.memory.textures--}let C=0;function w(t,o){const r=i.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(r,t,o);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,r.__webglTexture,e.TEXTURE0+o)}const x={[RepeatWrapping]:e.REPEAT,[ClampToEdgeWrapping]:e.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:e.MIRRORED_REPEAT},M={[NearestFilter]:e.NEAREST,[NearestMipmapNearestFilter]:e.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:e.NEAREST_MIPMAP_LINEAR,[LinearFilter]:e.LINEAR,[LinearMipmapNearestFilter]:e.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:e.LINEAR_MIPMAP_LINEAR},R={[NeverCompare]:e.NEVER,[AlwaysCompare]:e.ALWAYS,[LessCompare]:e.LESS,[LessEqualCompare]:e.LEQUAL,[EqualCompare]:e.EQUAL,[GreaterEqualCompare]:e.GEQUAL,[GreaterCompare]:e.GREATER,[NotEqualCompare]:e.NOTEQUAL};function I(n,r,a){if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,x[r.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,x[r.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,x[r.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[r.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[r.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),r.wrapS===ClampToEdgeWrapping&&r.wrapT===ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A(r.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A(r.minFilter)),r.minFilter!==NearestFilter&&r.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),r.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,R[r.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(r.magFilter===NearestFilter)return;if(r.minFilter!==NearestMipmapLinearFilter&&r.minFilter!==LinearMipmapLinearFilter)return;if(r.type===FloatType&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&r.type===HalfFloatType&&!1===t.has("OES_texture_half_float_linear"))return;(r.anisotropy>1||i.get(r).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}}function D(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",y));const o=n.source;let r=h.get(o);void 0===r&&(r={},h.set(o,r));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===r[s]&&(r[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),r[s].usedTimes++;const o=r[t.__cacheKey];void 0!==o&&(r[t.__cacheKey].usedTimes--,0===o.usedTimes&&S(n)),t.__cacheKey=s,t.__webglTexture=r[s].texture}return i}function k(t,a,l){let c=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(c=e.TEXTURE_3D);const u=D(t,a),d=a.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=i.get(d);if(d.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),i=a.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(a.colorSpace),p=a.colorSpace===NoColorSpace||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!s&&(e.wrapS!==ClampToEdgeWrapping||e.wrapT!==ClampToEdgeWrapping||e.minFilter!==NearestFilter&&e.minFilter!==LinearFilter)}(a)&&!1===m(a.image);let A=g(a.image,f,!1,o.maxTextureSize);A=B(a,A);const y=m(A)||s,E=r.convert(a.format,a.colorSpace);let S,C=r.convert(a.type),w=b(a.internalFormat,E,C,a.colorSpace,a.isVideoTexture);I(c,a,y);const x=a.mipmaps,M=s&&!0!==a.isVideoTexture&&w!==RGB_ETC1_Format,R=void 0===h.__version||!0===u,D=T(a,A,y);if(a.isDepthTexture)w=e.DEPTH_COMPONENT,s?w=a.type===FloatType?e.DEPTH_COMPONENT32F:a.type===UnsignedIntType?e.DEPTH_COMPONENT24:a.type===UnsignedInt248Type?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:a.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),a.format===DepthFormat&&w===e.DEPTH_COMPONENT&&a.type!==UnsignedShortType&&a.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),a.type=UnsignedIntType,C=r.convert(a.type)),a.format===DepthStencilFormat&&w===e.DEPTH_COMPONENT&&(w=e.DEPTH_STENCIL,a.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),a.type=UnsignedInt248Type,C=r.convert(a.type))),R&&(M?n.texStorage2D(e.TEXTURE_2D,1,w,A.width,A.height):n.texImage2D(e.TEXTURE_2D,0,w,A.width,A.height,0,E,C,null));else if(a.isDataTexture)if(x.length>0&&y){M&&R&&n.texStorage2D(e.TEXTURE_2D,D,w,x[0].width,x[0].height);for(let t=0,i=x.length;t<i;t++)S=x[t],M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,C,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,E,C,S.data);a.generateMipmaps=!1}else M?(R&&n.texStorage2D(e.TEXTURE_2D,D,w,A.width,A.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,A.width,A.height,E,C,A.data)):n.texImage2D(e.TEXTURE_2D,0,w,A.width,A.height,0,E,C,A.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){M&&R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,D,w,x[0].width,x[0].height,A.depth);for(let t=0,i=x.length;t<i;t++)S=x[t],a.format!==RGBAFormat?null!==E?M?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,A.depth,E,S.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,A.depth,0,S.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,A.depth,E,C,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,A.depth,0,E,C,S.data)}else{M&&R&&n.texStorage2D(e.TEXTURE_2D,D,w,x[0].width,x[0].height);for(let t=0,i=x.length;t<i;t++)S=x[t],a.format!==RGBAFormat?null!==E?M?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,C,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,E,C,S.data)}else if(a.isDataArrayTexture)M?(R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,D,w,A.width,A.height,A.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,A.width,A.height,A.depth,E,C,A.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,A.width,A.height,A.depth,0,E,C,A.data);else if(a.isData3DTexture)M?(R&&n.texStorage3D(e.TEXTURE_3D,D,w,A.width,A.height,A.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,A.width,A.height,A.depth,E,C,A.data)):n.texImage3D(e.TEXTURE_3D,0,w,A.width,A.height,A.depth,0,E,C,A.data);else if(a.isFramebufferTexture){if(R)if(M)n.texStorage2D(e.TEXTURE_2D,D,w,A.width,A.height);else{let t=A.width,i=A.height;for(let o=0;o<D;o++)n.texImage2D(e.TEXTURE_2D,o,w,t,i,0,E,C,null),t>>=1,i>>=1}}else if(x.length>0&&y){M&&R&&n.texStorage2D(e.TEXTURE_2D,D,w,x[0].width,x[0].height);for(let t=0,i=x.length;t<i;t++)S=x[t],M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,E,C,S):n.texImage2D(e.TEXTURE_2D,t,w,E,C,S);a.generateMipmaps=!1}else M?(R&&n.texStorage2D(e.TEXTURE_2D,D,w,A.width,A.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,E,C,A)):n.texImage2D(e.TEXTURE_2D,0,w,E,C,A);_(a,y)&&v(c),h.__version=d.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function L(t,o,a,s,c,u){const d=r.convert(a.format,a.colorSpace),h=r.convert(a.type),p=b(a.internalFormat,d,h,a.colorSpace);if(!i.get(o).__hasExternalTextures){const t=Math.max(1,o.width>>u),i=Math.max(1,o.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,i,o.depth,0,d,h,null):n.texImage2D(c,u,p,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),$(o)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,c,i.get(a).__webglTexture,0,N(o)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,c,i.get(a).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function O(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let o=!0===s?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||$(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===FloatType?o=e.DEPTH_COMPONENT32F:t.type===UnsignedIntType&&(o=e.DEPTH_COMPONENT24));const i=N(n);$(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,o,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,o,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const o=N(n);i&&!1===$(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,o,e.DEPTH24_STENCIL8,n.width,n.height):$(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,o,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let o=0;o<t.length;o++){const a=t[o],s=r.convert(a.format,a.colorSpace),c=r.convert(a.type),u=b(a.internalFormat,s,c,a.colorSpace),d=N(n);i&&!1===$(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):$(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function P(t){const o=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!o.__autoAllocateDepthBuffer){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,o){if(o&&o.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!o.depthTexture||!o.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(o.depthTexture).__webglTexture&&o.depthTexture.image.width===o.width&&o.depthTexture.image.height===o.height||(o.depthTexture.image.width=o.width,o.depthTexture.image.height=o.height,o.depthTexture.needsUpdate=!0),w(o.depthTexture,0);const r=i.get(o.depthTexture).__webglTexture,a=N(o);if(o.depthTexture.format===DepthFormat)$(o)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(o.depthTexture.format!==DepthStencilFormat)throw new Error("Unknown depthTexture format");$(o)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(o.__webglFramebuffer,t)}else if(r){o.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,o.__webglFramebuffer[i]),o.__webglDepthbuffer[i]=e.createRenderbuffer(),O(o.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,o.__webglFramebuffer),o.__webglDepthbuffer=e.createRenderbuffer(),O(o.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function N(e){return Math.min(o.maxSamples,e.samples)}function $(e){const n=i.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const i=e.colorSpace,o=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===_SRGBAFormat||i!==LinearSRGBColorSpace&&i!==NoColorSpace&&(ColorManagement.getTransfer(i)===SRGBTransfer?!1===s?!0===t.has("EXT_sRGB")&&o===RGBAFormat?(e.format=_SRGBAFormat,e.minFilter=LinearFilter,e.generateMipmaps=!1):n=ImageUtils.sRGBToLinear(n):o===RGBAFormat&&r===UnsignedByteType||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const e=C;return e>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+o.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=w,this.setTexture2DArray=function(t,o){const r=i.get(t);t.version>0&&r.__version!==t.version?k(r,t,o):n.bindTexture(e.TEXTURE_2D_ARRAY,r.__webglTexture,e.TEXTURE0+o)},this.setTexture3D=function(t,o){const r=i.get(t);t.version>0&&r.__version!==t.version?k(r,t,o):n.bindTexture(e.TEXTURE_3D,r.__webglTexture,e.TEXTURE0+o)},this.setTextureCube=function(t,a){const l=i.get(t);t.version>0&&l.__version!==t.version?function(t,a,l){if(6!==a.image.length)return;const c=D(t,a),u=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const d=i.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),i=a.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(a.colorSpace),h=a.colorSpace===NoColorSpace||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=a.isCompressedTexture||a.image[0].isCompressedTexture,f=a.image[0]&&a.image[0].isDataTexture,A=[];for(let e=0;e<6;e++)A[e]=p||f?f?a.image[e].image:a.image[e]:g(a.image[e],!1,!0,o.maxCubemapSize),A[e]=B(a,A[e]);const y=A[0],E=m(y)||s,S=r.convert(a.format,a.colorSpace),C=r.convert(a.type),w=b(a.internalFormat,S,C,a.colorSpace),x=s&&!0!==a.isVideoTexture,M=void 0===d.__version||!0===c;let R,D=T(a,y,E);if(I(e.TEXTURE_CUBE_MAP,a,E),p){x&&M&&n.texStorage2D(e.TEXTURE_CUBE_MAP,D,w,y.width,y.height);for(let t=0;t<6;t++){R=A[t].mipmaps;for(let i=0;i<R.length;i++){const o=R[i];a.format!==RGBAFormat?null!==S?x?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,o.width,o.height,S,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,w,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,o.width,o.height,S,C,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,w,o.width,o.height,0,S,C,o.data)}}}else{R=a.mipmaps,x&&M&&(R.length>0&&D++,n.texStorage2D(e.TEXTURE_CUBE_MAP,D,w,A[0].width,A[0].height));for(let t=0;t<6;t++)if(f){x?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,A[t].width,A[t].height,S,C,A[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,A[t].width,A[t].height,0,S,C,A[t].data);for(let i=0;i<R.length;i++){const o=R[i].image[t].image;x?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,o.width,o.height,S,C,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,w,o.width,o.height,0,S,C,o.data)}}else{x?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,S,C,A[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,S,C,A[t]);for(let i=0;i<R.length;i++){const o=R[i];x?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,S,C,o.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,w,S,C,o.image[t])}}}_(a,E)&&v(e.TEXTURE_CUBE_MAP),d.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(l,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,o){const r=i.get(t);void 0!==n&&L(r.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==o&&P(t)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=m(t)||s;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(s&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(s&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(o.drawBuffers){const n=t.texture;for(let t=0,o=n.length;t<o;t++){const o=i.get(n[t]);void 0===o.__webglTexture&&(o.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===$(t)){const i=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const o=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=r.convert(o.format,o.colorSpace),s=r.convert(o.type),l=b(o.internalFormat,a,s,o.colorSpace,!0===t.isXRRenderTarget),u=N(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),O(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),I(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(s&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)L(c.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else L(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);_(l,p)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const o=t.texture;for(let r=0,a=o.length;r<a;r++){const a=o[r],s=i.get(a);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),I(e.TEXTURE_2D,a,p),L(c.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),_(a,p)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),I(i,l,p),s&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)L(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else L(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);_(l,p)&&v(i),n.unbindTexture()}t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(t){const o=m(t)||s,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,s=r.length;a<s;a++){const s=r[a];if(_(s,o)){const o=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,r=i.get(s).__webglTexture;n.bindTexture(o,r),v(o),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===$(t)){const o=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],r=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<o.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<o.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);const p=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){const t=i.get(o[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,r,a,0,0,r,a,s,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<o.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const r=i.get(o[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,r,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=P,this.setupFrameBufferTexture=L,this.useMultisampledRTT=$}function WebGLUtils(e,t,n){const i=n.isWebGL2;return{convert:function(n,o=NoColorSpace){let r;const a=ColorManagement.getTransfer(o);if(n===UnsignedByteType)return e.UNSIGNED_BYTE;if(n===UnsignedShort4444Type)return e.UNSIGNED_SHORT_4_4_4_4;if(n===UnsignedShort5551Type)return e.UNSIGNED_SHORT_5_5_5_1;if(n===ByteType)return e.BYTE;if(n===ShortType)return e.SHORT;if(n===UnsignedShortType)return e.UNSIGNED_SHORT;if(n===IntType)return e.INT;if(n===UnsignedIntType)return e.UNSIGNED_INT;if(n===FloatType)return e.FLOAT;if(n===HalfFloatType)return i?e.HALF_FLOAT:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===AlphaFormat)return e.ALPHA;if(n===RGBAFormat)return e.RGBA;if(n===LuminanceFormat)return e.LUMINANCE;if(n===LuminanceAlphaFormat)return e.LUMINANCE_ALPHA;if(n===DepthFormat)return e.DEPTH_COMPONENT;if(n===DepthStencilFormat)return e.DEPTH_STENCIL;if(n===_SRGBAFormat)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===RedFormat)return e.RED;if(n===RedIntegerFormat)return e.RED_INTEGER;if(n===RGFormat)return e.RG;if(n===RGIntegerFormat)return e.RG_INTEGER;if(n===RGBAIntegerFormat)return e.RGBA_INTEGER;if(n===RGB_S3TC_DXT1_Format||n===RGBA_S3TC_DXT1_Format||n===RGBA_S3TC_DXT3_Format||n===RGBA_S3TC_DXT5_Format)if(a===SRGBTransfer){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===RGB_S3TC_DXT1_Format)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===RGB_S3TC_DXT1_Format)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT1_Format)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===RGBA_S3TC_DXT3_Format)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===RGBA_S3TC_DXT5_Format)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===RGB_PVRTC_4BPPV1_Format||n===RGB_PVRTC_2BPPV1_Format||n===RGBA_PVRTC_4BPPV1_Format||n===RGBA_PVRTC_2BPPV1_Format){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===RGB_PVRTC_4BPPV1_Format)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===RGB_PVRTC_2BPPV1_Format)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===RGBA_PVRTC_4BPPV1_Format)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===RGBA_PVRTC_2BPPV1_Format)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===RGB_ETC1_Format)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===RGB_ETC2_Format||n===RGBA_ETC2_EAC_Format){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===RGB_ETC2_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===RGBA_ETC2_EAC_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===RGBA_ASTC_4x4_Format||n===RGBA_ASTC_5x4_Format||n===RGBA_ASTC_5x5_Format||n===RGBA_ASTC_6x5_Format||n===RGBA_ASTC_6x6_Format||n===RGBA_ASTC_8x5_Format||n===RGBA_ASTC_8x6_Format||n===RGBA_ASTC_8x8_Format||n===RGBA_ASTC_10x5_Format||n===RGBA_ASTC_10x6_Format||n===RGBA_ASTC_10x8_Format||n===RGBA_ASTC_10x10_Format||n===RGBA_ASTC_12x10_Format||n===RGBA_ASTC_12x12_Format){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===RGBA_ASTC_4x4_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===RGBA_ASTC_5x4_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===RGBA_ASTC_5x5_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===RGBA_ASTC_6x5_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===RGBA_ASTC_6x6_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===RGBA_ASTC_8x5_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===RGBA_ASTC_8x6_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===RGBA_ASTC_8x8_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===RGBA_ASTC_10x5_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===RGBA_ASTC_10x6_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===RGBA_ASTC_10x8_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===RGBA_ASTC_10x10_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===RGBA_ASTC_12x10_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===RGBA_ASTC_12x12_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===RGBA_BPTC_Format||n===RGB_BPTC_SIGNED_Format||n===RGB_BPTC_UNSIGNED_Format){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===RGBA_BPTC_Format)return a===SRGBTransfer?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===RGB_BPTC_SIGNED_Format)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===RGB_BPTC_UNSIGNED_Format)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===RED_RGTC1_Format||n===SIGNED_RED_RGTC1_Format||n===RED_GREEN_RGTC2_Format||n===SIGNED_RED_GREEN_RGTC2_Format){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===RGBA_BPTC_Format)return r.COMPRESSED_RED_RGTC1_EXT;if(n===SIGNED_RED_RGTC1_Format)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===RED_GREEN_RGTC2_Format)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===SIGNED_RED_GREEN_RGTC2_Format)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===UnsignedInt248Type?i?e.UNSIGNED_INT_24_8:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Group$2=class extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}};const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group$2,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group$2,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group$2,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,o=null,r=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){r=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],o=l.joints["thumb-tip"],a=i.position.distanceTo(o.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),null!==o&&(s.matrix.fromArray(o.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,o.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(o.linearVelocity)):s.hasLinearVelocity=!1,o.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(o.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==o&&(i=o),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==o),null!==l&&(l.visible=null!==r),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Group$2;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class WebXRManager extends EventDispatcher{constructor(e,t){super();const n=this;let i=null,o=1,r=null,a="local-floor",s=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let g=null,m=null;const _=[],v=[],b=new Vector2;let T=null;const A=new PerspectiveCamera;A.layers.enable(1),A.viewport=new Vector4;const y=new PerspectiveCamera;y.layers.enable(2),y.viewport=new Vector4;const E=[A,y],S=new ArrayCamera;S.layers.enable(1),S.layers.enable(2);let C=null,w=null;function x(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=_[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||r),n.dispatchEvent({type:e.type,data:e.inputSource}))}function M(){i.removeEventListener("select",x),i.removeEventListener("selectstart",x),i.removeEventListener("selectend",x),i.removeEventListener("squeeze",x),i.removeEventListener("squeezestart",x),i.removeEventListener("squeezeend",x),i.removeEventListener("end",M),i.removeEventListener("inputsourceschange",R);for(let e=0;e<_.length;e++){const t=v[e];null!==t&&(v[e]=null,_[e].disconnect(t))}C=null,w=null,e.setRenderTarget(g),h=null,d=null,u=null,i=null,m=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(T),e.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=v.indexOf(n);i>=0&&(v[i]=null,_[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=v.indexOf(n);if(-1===i){for(let e=0;e<_.length;e++){if(e>=v.length){v.push(n),i=e;break}if(null===v[e]){v[e]=n,i=e;break}}if(-1===i)break}const o=_[i];o&&o.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getGripSpace()},this.getHand=function(e){let t=_[e];return void 0===t&&(t=new WebXRController,_[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||r},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=function(){var c=_asyncToGenerator((function*(c){if(i=c,null!==i){if(g=e.getRenderTarget(),i.addEventListener("select",x),i.addEventListener("selectstart",x),i.addEventListener("selectend",x),i.addEventListener("squeeze",x),i.addEventListener("squeezestart",x),i.addEventListener("squeezeend",x),i.addEventListener("end",M),i.addEventListener("inputsourceschange",R),!0!==f.xrCompatible&&(yield t.makeXRCompatible()),T=e.getPixelRatio(),e.getSize(b),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:o};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),m=new WebGLRenderTarget(h.framebufferWidth,h.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,r=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?DepthStencilFormat:DepthFormat,r=f.stencil?UnsignedInt248Type:UnsignedIntType);const s={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:o};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(s),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),m=new WebGLRenderTarget(d.textureWidth,d.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(d.textureWidth,d.textureHeight,r,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,r=yield i.requestReferenceSpace(a),O.setContext(i),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}}));return function(e){return c.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const I=new Vector3,D=new Vector3;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;S.near=y.near=A.near=e.near,S.far=y.far=A.far=e.far,C===S.near&&w===S.far||(i.updateRenderState({depthNear:S.near,depthFar:S.far}),C=S.near,w=S.far);const t=e.parent,n=S.cameras;k(S,t);for(let i=0;i<n.length;i++)k(n[i],t);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);const i=I.distanceTo(D),o=t.projectionMatrix.elements,r=n.projectionMatrix.elements,a=o[14]/(o[10]-1),s=o[14]/(o[10]+1),l=(o[9]+1)/o[5],c=(o[9]-1)/o[5],u=(o[8]-1)/o[0],d=(r[8]+1)/r[0],h=a*u,p=a*d,f=i/(-u+d),g=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(g),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const m=a+f,_=s+f,v=h-g,b=p+(i-g),T=l*s/_*m,A=c*s/_*m;e.projectionMatrix.makePerspective(v,b,T,A,m,_),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(S,A,y):S.projectionMatrix.copy(A.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*RAD2DEG$1*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,t)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==d||null!==h)return s},this.setFoveation=function(e){s=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let L=null;const O=new WebGLAnimation;O.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||r),p=i,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const o=t[i];let r=null;if(null!==h)r=h.getViewport(o);else{const t=u.getViewSubImage(d,o);r=t.viewport,0===i&&(e.setRenderTargetTextures(m,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=E[i];void 0===a&&(a=new PerspectiveCamera,a.layers.enable(i),a.viewport=new Vector4,E[i]=a),a.matrix.fromArray(o.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(o.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(r.x,r.y,r.width,r.height),0===i&&(S.matrix.copy(a.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(a)}}for(let e=0;e<_.length;e++){const t=v[e],n=_[e];null!==t&&void 0!==n&&n.update(t,i,l||r)}L&&L(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(e){L=e},this.dispose=function(){}}}function WebGLMaterials(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,o){i.opacity.value=o.opacity,o.color&&i.diffuse.value.copy(o.color),o.emissive&&i.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),o.map&&(i.map.value=o.map,n(o.map,i.mapTransform)),o.alphaMap&&(i.alphaMap.value=o.alphaMap,n(o.alphaMap,i.alphaMapTransform)),o.bumpMap&&(i.bumpMap.value=o.bumpMap,n(o.bumpMap,i.bumpMapTransform),i.bumpScale.value=o.bumpScale,o.side===BackSide&&(i.bumpScale.value*=-1)),o.normalMap&&(i.normalMap.value=o.normalMap,n(o.normalMap,i.normalMapTransform),i.normalScale.value.copy(o.normalScale),o.side===BackSide&&i.normalScale.value.negate()),o.displacementMap&&(i.displacementMap.value=o.displacementMap,n(o.displacementMap,i.displacementMapTransform),i.displacementScale.value=o.displacementScale,i.displacementBias.value=o.displacementBias),o.emissiveMap&&(i.emissiveMap.value=o.emissiveMap,n(o.emissiveMap,i.emissiveMapTransform)),o.specularMap&&(i.specularMap.value=o.specularMap,n(o.specularMap,i.specularMapTransform)),o.alphaTest>0&&(i.alphaTest.value=o.alphaTest);const r=t.get(o).envMap;if(r&&(i.envMap.value=r,i.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,i.reflectivity.value=o.reflectivity,i.ior.value=o.ior,i.refractionRatio.value=o.refractionRatio),o.lightMap){i.lightMap.value=o.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=o.lightMapIntensity*t,n(o.lightMap,i.lightMapTransform)}o.aoMap&&(i.aoMap.value=o.aoMap,i.aoMapIntensity.value=o.aoMapIntensity,n(o.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,getUnlitUniformColorSpace(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,o,r,a,s){o.isMeshBasicMaterial||o.isMeshLambertMaterial?i(e,o):o.isMeshToonMaterial?(i(e,o),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,o)):o.isMeshPhongMaterial?(i(e,o),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,o)):o.isMeshStandardMaterial?(i(e,o),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const o=t.get(i).envMap;o&&(e.envMapIntensity.value=i.envMapIntensity)}(e,o),o.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===BackSide&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,o,s)):o.isMeshMatcapMaterial?(i(e,o),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,o)):o.isMeshDepthMaterial?i(e,o):o.isMeshDistanceMaterial?(i(e,o),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,o)):o.isMeshNormalMaterial?i(e,o):o.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,o),o.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,o)):o.isPointsMaterial?function(e,t,i,o){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*o,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,o,r,a):o.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,o):o.isShadowMaterial?(e.color.value.copy(o.color),e.opacity.value=o.opacity):o.isShaderMaterial&&(o.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(e,t,n,i){let o={},r={},a=[];const s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,i){const o=e.value,r=t+"_"+n;if(void 0===i[r])return i[r]="number"==typeof o||"boolean"==typeof o?o:o.clone(),!0;{const e=i[r];if("number"==typeof o||"boolean"==typeof o){if(e!==o)return i[r]=o,!0}else if(!1===e.equals(o))return e.copy(o),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(o[n.id]),delete o[n.id],delete r[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=o[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let r=0,a=t.length;r<a;r++){const e=Array.isArray(t[r])?t[r]:[t[r]];for(let t=0,o=e.length;t<o;t++){const o=e[t],r=Array.isArray(o.value)?o.value:[o.value];for(let e=0,t=r.length;e<t;e++){const t=c(r[e]),a=n%i;0!==a&&i-a<t.boundary&&(n+=i-a),o.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,n+=t.storage}}}const o=n%i;o>0&&(n+=i-o);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),o=t.__size,r=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,o,r),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),o[n.id]=h,n.addEventListener("dispose",u));const p=d.program;i.updateUBOMapping(n,p);const f=t.render.frame;r[n.id]!==f&&(!function(t){const n=o[t.id],i=t.uniforms,r=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let o=0,a=i.length;o<a;o++){const t=Array.isArray(i[o])?i[o]:[i[o]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,o,n,r)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let o=0;for(let r=0;r<n.length;r++){const a=n[r],s=c(a);"number"==typeof a||"boolean"==typeof a?(i.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+o,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,o),o+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),r[n.id]=f)},dispose:function(){for(const t in o)e.deleteBuffer(o[t]);a=[],o={},r={}}}}class WebGLRenderer{constructor(e={}){const{canvas:t=createCanvasElement(),context:n=null,depth:i=!0,stencil:o=!0,alpha:r=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:r;const h=new Uint32Array(4),p=new Int32Array(4);let f=null,g=null;const m=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const v=this;let b=!1,T=0,A=0,y=null,E=-1,S=null;const C=new Vector4,w=new Vector4;let x=null;const M=new Color(0);let R=0,I=t.width,D=t.height,k=1,L=null,O=null;const P=new Vector4(0,0,I,D),N=new Vector4(0,0,I,D);let $=!1;const B=new Frustum;let F=!1,U=!1,G=null;const V=new Matrix4,H=new Vector2,W=new Vector3,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===y?k:1}let X,Y,q,K,Q,Z,J,ee,te,ne,ie,oe,re,ae,se,le,ce,ue,de,he,pe,fe,ge,me,_e=n;function ve(e,n){for(let i=0;i<e.length;i++){const o=e[i],r=t.getContext(o,n);if(null!==r)return r}return null}try{const e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${REVISION}`),t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",ye,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===_e){const t=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&t.shift(),_e=ve(t,e),null===_e)throw ve(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&_e instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===_e.getShaderPrecisionFormat&&(_e.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($e){throw console.error("THREE.WebGLRenderer: "+$e.message),$e}function be(){X=new WebGLExtensions(_e),Y=new WebGLCapabilities(_e,X,e),X.init(Y),fe=new WebGLUtils(_e,X,Y),q=new WebGLState(_e,X,Y),K=new WebGLInfo(_e),Q=new WebGLProperties,Z=new WebGLTextures(_e,X,q,Q,Y,fe,K),J=new WebGLCubeMaps(v),ee=new WebGLCubeUVMaps(v),te=new WebGLAttributes(_e,Y),ge=new WebGLBindingStates(_e,X,te,Y),ne=new WebGLGeometries(_e,te,K,ge),ie=new WebGLObjects(_e,ne,te,K),de=new WebGLMorphtargets(_e,Y,Z),le=new WebGLClipping(Q),oe=new WebGLPrograms(v,J,ee,X,Y,ge,le),re=new WebGLMaterials(v,Q),ae=new WebGLRenderLists,se=new WebGLRenderStates(X,Y),ue=new WebGLBackground(v,J,ee,q,ie,d,s),ce=new WebGLShadowMap(v,ie,Y),me=new WebGLUniformsGroups(_e,K,Y,q),he=new WebGLBufferRenderer(_e,X,K,Y),pe=new WebGLIndexedBufferRenderer(_e,X,K,Y),K.programs=oe.programs,v.capabilities=Y,v.extensions=X,v.properties=Q,v.renderLists=ae,v.shadowMap=ce,v.state=q,v.info=K}be();const Te=new WebXRManager(v,_e);function Ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=K.autoReset,t=ce.enabled,n=ce.autoUpdate,i=ce.needsUpdate,o=ce.type;be(),K.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=i,ce.type=o}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Se(e){const t=e.target;t.removeEventListener("dispose",Se),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){oe.releaseProgram(e)})),e.isShaderMaterial&&oe.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Ce(e,t,n){!0===e.transparent&&e.side===DoubleSide&&!1===e.forceSinglePass?(e.side=BackSide,e.needsUpdate=!0,Oe(e,t,n),e.side=FrontSide,e.needsUpdate=!0,Oe(e,t,n),e.side=DoubleSide):Oe(e,t,n)}this.xr=Te,this.getContext=function(){return _e},this.getContextAttributes=function(){return _e.getContextAttributes()},this.forceContextLoss=function(){const e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(I,D,!1))},this.getSize=function(e){return e.set(I,D)},this.setSize=function(e,n,i=!0){Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=e,D=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(I*k,D*k).floor()},this.setDrawingBufferSize=function(e,n,i){I=e,D=n,k=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),q.viewport(C.copy(P).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,i){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,i),q.scissor(w.copy(N).multiplyScalar(k).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){q.setScissorTest($=e)},this.setOpaqueSort=function(e){L=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==y){const t=y.texture.format;e=t===RGBAIntegerFormat||t===RGIntegerFormat||t===RedIntegerFormat}if(e){const e=y.texture.type,t=e===UnsignedByteType||e===UnsignedIntType||e===UnsignedShortType||e===UnsignedInt248Type||e===UnsignedShort4444Type||e===UnsignedShort5551Type,n=ue.getClearColor(),i=ue.getClearAlpha(),o=n.r,r=n.g,a=n.b;t?(h[0]=o,h[1]=r,h[2]=a,h[3]=i,_e.clearBufferuiv(_e.COLOR,0,h)):(p[0]=o,p[1]=r,p[2]=a,p[3]=i,_e.clearBufferiv(_e.COLOR,0,p))}else i|=_e.COLOR_BUFFER_BIT}t&&(i|=_e.DEPTH_BUFFER_BIT),n&&(i|=_e.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),_e.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",ye,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),ae.dispose(),se.dispose(),Q.dispose(),J.dispose(),ee.dispose(),ie.dispose(),ge.dispose(),me.dispose(),oe.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",xe),Te.removeEventListener("sessionend",Me),G&&(G.dispose(),G=null),Re.stop()},this.renderBufferDirect=function(e,t,n,i,o,r){null===t&&(t=z);const a=o.isMesh&&o.matrixWorld.determinant()<0,s=function(e,t,n,i,o){!0!==t.isScene&&(t=z);Z.resetTextureUnits();const r=t.fog,a=i.isMeshStandardMaterial?t.environment:null,s=null===y?v.outputColorSpace:!0===y.isXRRenderTarget?y.texture.colorSpace:LinearSRGBColorSpace,l=(i.isMeshStandardMaterial?ee:J).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=NoToneMapping;i.toneMapped&&(null!==y&&!0!==y.isXRRenderTarget||(f=v.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==m?m.length:0,b=Q.get(i),T=g.state.lights;if(!0===F&&(!0===U||e!==S)){const t=e===S&&i.id===E;le.setState(i,e,t)}let A=!1;i.version===b.__version?b.needsLights&&b.lightsStateVersion!==T.state.version||b.outputColorSpace!==s||o.isBatchedMesh&&!1===b.batching?A=!0:o.isBatchedMesh||!0!==b.batching?o.isInstancedMesh&&!1===b.instancing?A=!0:o.isInstancedMesh||!0!==b.instancing?o.isSkinnedMesh&&!1===b.skinning?A=!0:o.isSkinnedMesh||!0!==b.skinning?o.isInstancedMesh&&!0===b.instancingColor&&null===o.instanceColor||o.isInstancedMesh&&!1===b.instancingColor&&null!==o.instanceColor||b.envMap!==l||!0===i.fog&&b.fog!==r?A=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===le.numPlanes&&b.numIntersection===le.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==d||b.morphNormals!==h||b.morphColors!==p||b.toneMapping!==f||!0===Y.isWebGL2&&b.morphTargetsCount!==_)&&(A=!0):A=!0:A=!0:A=!0:A=!0:(A=!0,b.__version=i.version);let C=b.currentProgram;!0===A&&(C=Oe(i,t,o));let w=!1,x=!1,M=!1;const R=C.getUniforms(),I=b.uniforms;q.useProgram(C.program)&&(w=!0,x=!0,M=!0);i.id!==E&&(E=i.id,x=!0);if(w||S!==e){R.setValue(_e,"projectionMatrix",e.projectionMatrix),R.setValue(_e,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(_e,W.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&R.setValue(_e,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(_e,"isOrthographic",!0===e.isOrthographicCamera),S!==e&&(S=e,x=!0,M=!0)}if(o.isSkinnedMesh){R.setOptional(_e,o,"bindMatrix"),R.setOptional(_e,o,"bindMatrixInverse");const e=o.skeleton;e&&(Y.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(_e,"boneTexture",e.boneTexture,Z)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}o.isBatchedMesh&&(R.setOptional(_e,o,"batchingTexture"),R.setValue(_e,"batchingTexture",o._matricesTexture,Z));const L=n.morphAttributes;(void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===Y.isWebGL2)&&de.update(o,n,C);(x||b.receiveShadow!==o.receiveShadow)&&(b.receiveShadow=o.receiveShadow,R.setValue(_e,"receiveShadow",o.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(I.envMap.value=l,I.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);x&&(R.setValue(_e,"toneMappingExposure",v.toneMappingExposure),b.needsLights&&(P=M,(O=I).ambientLightColor.needsUpdate=P,O.lightProbe.needsUpdate=P,O.directionalLights.needsUpdate=P,O.directionalLightShadows.needsUpdate=P,O.pointLights.needsUpdate=P,O.pointLightShadows.needsUpdate=P,O.spotLights.needsUpdate=P,O.spotLightShadows.needsUpdate=P,O.rectAreaLights.needsUpdate=P,O.hemisphereLights.needsUpdate=P),r&&!0===i.fog&&re.refreshFogUniforms(I,r),re.refreshMaterialUniforms(I,i,k,D,G),WebGLUniforms.upload(_e,Pe(b),I,Z));var O,P;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(WebGLUniforms.upload(_e,Pe(b),I,Z),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&R.setValue(_e,"center",o.center);if(R.setValue(_e,"modelViewMatrix",o.modelViewMatrix),R.setValue(_e,"normalMatrix",o.normalMatrix),R.setValue(_e,"modelMatrix",o.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];me.update(n,C),me.bind(n,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return C}(e,t,n,i,o);q.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==r&&(h=Math.max(h,r.start*c),p=Math.min(p,(r.start+r.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let m;ge.setup(o,i,s,n,l);let _=he;if(null!==l&&(m=te.get(l),_=pe,_.setIndex(m)),o.isMesh)!0===i.wireframe?(q.setLineWidth(i.wireframeLinewidth*j()),_.setMode(_e.LINES)):_.setMode(_e.TRIANGLES);else if(o.isLine){let e=i.linewidth;void 0===e&&(e=1),q.setLineWidth(e*j()),o.isLineSegments?_.setMode(_e.LINES):o.isLineLoop?_.setMode(_e.LINE_LOOP):_.setMode(_e.LINE_STRIP)}else o.isPoints?_.setMode(_e.POINTS):o.isSprite&&_.setMode(_e.TRIANGLES);if(o.isBatchedMesh)_.renderMultiDraw(o._multiDrawStarts,o._multiDrawCounts,o._multiDrawCount);else if(o.isInstancedMesh)_.renderInstances(h,f,o.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);_.renderInstances(h,f,t)}else _.render(h,f)},this.compile=function(e,t,n=null){null===n&&(n=e),g=se.get(n),g.init(),_.push(g),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights(v._useLegacyLights);const i=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let o=0;o<t.length;o++){const r=t[o];Ce(r,n,e),i.add(r)}else Ce(t,n,e),i.add(t)})),_.pop(),g=null,i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){Q.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==X.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let we=null;function xe(){Re.stop()}function Me(){Re.start()}const Re=new WebGLAnimation;function Ie(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=ie.update(e),o=e.material;o.visible&&f.push(e,t,o,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||B.intersectsObject(e))){const t=ie.update(e),o=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(o)){const i=t.groups;for(let r=0,a=i.length;r<a;r++){const a=i[r],s=o[a.materialIndex];s&&s.visible&&f.push(e,t,s,n,W.z,a)}}else o.visible&&f.push(e,t,o,n,W.z,null)}const o=e.children;for(let r=0,a=o.length;r<a;r++)Ie(o[r],t,n,i)}function De(e,t,n,i){const o=e.opaque,r=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===F&&le.setGlobalState(v.clippingPlanes,n),r.length>0&&function(e,t,n,i){const o=!0===n.isScene?n.overrideMaterial:null;if(null!==o)return;const r=Y.isWebGL2;null===G&&(G=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:r?4:0}));v.getDrawingBufferSize(H),r?G.setSize(H.x,H.y):G.setSize(floorPowerOfTwo(H.x),floorPowerOfTwo(H.y));const a=v.getRenderTarget();v.setRenderTarget(G),v.getClearColor(M),R=v.getClearAlpha(),R<1&&v.setClearColor(16777215,.5);v.clear();const s=v.toneMapping;v.toneMapping=NoToneMapping,ke(e,n,i),Z.updateMultisampleRenderTarget(G),Z.updateRenderTargetMipmap(G);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],o=e.object,r=e.geometry,a=e.material,s=e.group;if(a.side===DoubleSide&&o.layers.test(i.layers)){const e=a.side;a.side=BackSide,a.needsUpdate=!0,Le(o,n,i,r,a,s),a.side=e,a.needsUpdate=!0,l=!0}}!0===l&&(Z.updateMultisampleRenderTarget(G),Z.updateRenderTargetMipmap(G));v.setRenderTarget(a),v.setClearColor(M,R),v.toneMapping=s}(o,r,t,n),i&&q.viewport(C.copy(i)),o.length>0&&ke(o,t,n),r.length>0&&ke(r,t,n),a.length>0&&ke(a,t,n),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function ke(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let o=0,r=e.length;o<r;o++){const r=e[o],a=r.object,s=r.geometry,l=null===i?r.material:i,c=r.group;a.layers.test(n.layers)&&Le(a,t,n,s,l,c)}}function Le(e,t,n,i,o,r){e.onBeforeRender(v,t,n,i,o,r),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),o.onBeforeRender(v,t,n,i,e,r),!0===o.transparent&&o.side===DoubleSide&&!1===o.forceSinglePass?(o.side=BackSide,o.needsUpdate=!0,v.renderBufferDirect(n,t,i,o,e,r),o.side=FrontSide,o.needsUpdate=!0,v.renderBufferDirect(n,t,i,o,e,r),o.side=DoubleSide):v.renderBufferDirect(n,t,i,o,e,r),e.onAfterRender(v,t,n,i,o,r)}function Oe(e,t,n){!0!==t.isScene&&(t=z);const i=Q.get(e),o=g.state.lights,r=g.state.shadowsArray,a=o.state.version,s=oe.getParameters(e,o.state,r,t,n),l=oe.getProgramCacheKey(s);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:J).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",Se),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Ne(e,s),u}else s.uniforms=oe.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),u=oe.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Ne(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(d.ambientLightColor.value=o.state.ambient,d.lightProbe.value=o.state.probe,d.directionalLights.value=o.state.directional,d.directionalLightShadows.value=o.state.directionalShadow,d.spotLights.value=o.state.spot,d.spotLightShadows.value=o.state.spotShadow,d.rectAreaLights.value=o.state.rectArea,d.ltc_1.value=o.state.rectAreaLTC1,d.ltc_2.value=o.state.rectAreaLTC2,d.pointLights.value=o.state.point,d.pointLightShadows.value=o.state.pointShadow,d.hemisphereLights.value=o.state.hemi,d.directionalShadowMap.value=o.state.directionalShadowMap,d.directionalShadowMatrix.value=o.state.directionalShadowMatrix,d.spotShadowMap.value=o.state.spotShadowMap,d.spotLightMatrix.value=o.state.spotLightMatrix,d.spotLightMap.value=o.state.spotLightMap,d.pointShadowMap.value=o.state.pointShadowMap,d.pointShadowMatrix.value=o.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Pe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=WebGLUniforms.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ne(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){we&&we(e)})),"undefined"!=typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){we=e,Te.setAnimationLoop(e),null===e?Re.stop():Re.start()},Te.addEventListener("sessionstart",xe),Te.addEventListener("sessionend",Me),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(t),t=Te.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,y),g=se.get(e,_.length),g.init(),_.push(g),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(V),U=this.localClippingEnabled,F=le.init(this.clippingPlanes,U),f=ae.get(e,m.length),f.init(),m.push(f),Ie(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(L,O),this.info.render.frame++,!0===F&&le.beginShadows();const n=g.state.shadowsArray;if(ce.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,e),g.setupLights(v._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];De(f,e,i,i.viewport)}}else De(f,e,t);null!==y&&(Z.updateMultisampleRenderTarget(y),Z.updateRenderTargetMipmap(y)),!0===e.isScene&&e.onAfterRender(v,e,t),ge.resetDefaultState(),E=-1,S=null,_.pop(),g=_.length>0?_[_.length-1]:null,m.pop(),f=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;const i=Q.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){y=e,T=t,A=n;let i=!0,o=null,r=!1,a=!1;if(e){const s=Q.get(e);void 0!==s.__useDefaultFramebuffer?(q.bindFramebuffer(_e.FRAMEBUFFER,null),i=!1):void 0===s.__webglFramebuffer?Z.setupRenderTarget(e):s.__hasExternalTextures&&Z.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(o=Array.isArray(c[t])?c[t][n]:c[t],r=!0):o=Y.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,C.copy(e.viewport),w.copy(e.scissor),x=e.scissorTest}else C.copy(P).multiplyScalar(k).floor(),w.copy(N).multiplyScalar(k).floor(),x=$;if(q.bindFramebuffer(_e.FRAMEBUFFER,o)&&Y.drawBuffers&&i&&q.drawBuffers(e,o),q.viewport(C),q.scissor(w),q.setScissorTest(x),r){const i=Q.get(e.texture);_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(a){const i=Q.get(e.texture),o=t||0;_e.framebufferTextureLayer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,i.__webglTexture,n||0,o)}E=-1},this.readRenderTargetPixels=function(e,t,n,i,o,r,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){q.bindFramebuffer(_e.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==RGBAFormat&&fe.convert(s)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===HalfFloatType&&(X.has("EXT_color_buffer_half_float")||Y.isWebGL2&&X.has("EXT_color_buffer_float"));if(!(l===UnsignedByteType||fe.convert(l)===_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_TYPE)||l===FloatType&&(Y.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-o&&_e.readPixels(t,n,i,o,fe.convert(s),fe.convert(l),r)}finally{const e=null!==y?Q.get(y).__webglFramebuffer:null;q.bindFramebuffer(_e.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const i=Math.pow(2,-n),o=Math.floor(t.image.width*i),r=Math.floor(t.image.height*i);Z.setTexture2D(t,0),_e.copyTexSubImage2D(_e.TEXTURE_2D,n,0,0,e.x,e.y,o,r),q.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){const o=t.image.width,r=t.image.height,a=fe.convert(n.format),s=fe.convert(n.type);Z.setTexture2D(n,0),_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,n.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?_e.texSubImage2D(_e.TEXTURE_2D,i,e.x,e.y,o,r,a,s,t.image.data):t.isCompressedTexture?_e.compressedTexSubImage2D(_e.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):_e.texSubImage2D(_e.TEXTURE_2D,i,e.x,e.y,a,s,t.image),0===i&&n.generateMipmaps&&_e.generateMipmap(_e.TEXTURE_2D),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,o=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const r=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=fe.convert(i.format),c=fe.convert(i.type);let u;if(i.isData3DTexture)Z.setTexture3D(i,0),u=_e.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(i,0),u=_e.TEXTURE_2D_ARRAY}_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,i.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,i.unpackAlignment);const d=_e.getParameter(_e.UNPACK_ROW_LENGTH),h=_e.getParameter(_e.UNPACK_IMAGE_HEIGHT),p=_e.getParameter(_e.UNPACK_SKIP_PIXELS),f=_e.getParameter(_e.UNPACK_SKIP_ROWS),g=_e.getParameter(_e.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[o]:n.image;_e.pixelStorei(_e.UNPACK_ROW_LENGTH,m.width),_e.pixelStorei(_e.UNPACK_IMAGE_HEIGHT,m.height),_e.pixelStorei(_e.UNPACK_SKIP_PIXELS,e.min.x),_e.pixelStorei(_e.UNPACK_SKIP_ROWS,e.min.y),_e.pixelStorei(_e.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?_e.texSubImage3D(u,o,t.x,t.y,t.z,r,a,s,l,c,m.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_e.compressedTexSubImage3D(u,o,t.x,t.y,t.z,r,a,s,l,m.data)):_e.texSubImage3D(u,o,t.x,t.y,t.z,r,a,s,l,c,m),_e.pixelStorei(_e.UNPACK_ROW_LENGTH,d),_e.pixelStorei(_e.UNPACK_IMAGE_HEIGHT,h),_e.pixelStorei(_e.UNPACK_SKIP_PIXELS,p),_e.pixelStorei(_e.UNPACK_SKIP_ROWS,f),_e.pixelStorei(_e.UNPACK_SKIP_IMAGES,g),0===o&&i.generateMipmaps&&_e.generateMipmap(u),q.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){T=0,A=0,y=null,q.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===DisplayP3ColorSpace?"display-p3":"srgb",t.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}exports("X",WebGLRenderer);class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class Fog{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Color(e),this.near=t,this.far=n}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}exports("T",Fog);class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}exports("O",Scene);class InterleavedBuffer{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.applyMatrix4(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.applyNormalMatrix(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_vector$6.fromBufferAttribute(this,t),_vector$6.transformDirection(e),this.setXYZ(t,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=normalize$3(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=denormalize(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=denormalize(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=denormalize(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=denormalize(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array),i=normalize$3(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize$3(t,this.array),n=normalize$3(n,this.array),i=normalize$3(i,this.array),o=normalize$3(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new BufferAttribute(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(i),!1!==e.ray.intersectsSphere(_sphere$4)&&(_inverseMatrix$2.copy(i).invert(),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2),null!==this.boundingBox&&!1===_ray$2.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,_ray$2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vector4,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;_skinIndex.fromBufferAttribute(i.attributes.skinIndex,e),_skinWeight.fromBufferAttribute(i.attributes.skinWeight,e),_basePosition.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const e=_skinWeight.getComponent(o);if(0!==e){const i=_skinIndex.getComponent(o);_matrix4.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(e=null,t=1,n=1,i,o,r,a,s,l=NearestFilter,c=NearestFilter,u,d){super(null,r,a,s,l,c,i,o,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(e=[],t=[]){this.uuid=generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Matrix4;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let o=0,r=e.length;o<r;o++){const i=e[o]?e[o].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(i,t[o]),_offsetMatrix.toArray(n,16*o)}null!==i&&(i.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new DataTexture(t,e,e,RGBAFormat,FloatType);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let o=t[i];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),o=new Bone),this.bones.push(o),this.boneInverses.push((new Matrix4).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const o=t[i];e.bones.push(o.uuid);const r=n[i];e.boneInverses.push(r.toArray())}return e}}class InstancedBufferAttribute extends BufferAttribute{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,_identity)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Box3),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,_instanceLocalMatrix),_box3.copy(e.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Sphere),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,_instanceLocalMatrix),_sphere$3.copy(e.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,void 0!==_mesh$1.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(n),!1!==e.ray.intersectsSphere(_sphere$3)))for(let o=0;o<i;o++){this.getMatrixAt(o,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(n,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(e,_instanceIntersects);for(let e=0,n=_instanceIntersects.length;e<n;e++){const n=_instanceIntersects[e];n.instanceId=o,n.object=this,t.push(n)}_instanceIntersects.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1$1=new Ray,_sphere$1=new Sphere;let Line$2=class extends Object3D{constructor(e=new BufferGeometry,t=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)_start$1.fromBufferAttribute(t,e-1),_end$1.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=_start$1.distanceTo(_end$1);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,r=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$1.copy(n.boundingSphere),_sphere$1.applyMatrix4(i),_sphere$1.radius+=o,!1===e.ray.intersectsSphere(_sphere$1))return;_inverseMatrix$1.copy(i).invert(),_ray$1$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Vector3,c=new Vector3,u=new Vector3,d=new Vector3,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,r.start),i=Math.min(p.count,r.start+r.count)-1;n<i;n+=h){const i=p.getX(n),o=p.getX(n+1);l.fromBufferAttribute(f,i),c.fromBufferAttribute(f,o);if(_ray$1$1.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,r.start),i=Math.min(f.count,r.start+r.count)-1;n<i;n+=h){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(_ray$1$1.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}};const _start$2=new Vector3,_end$2=new Vector3;class LineSegments extends Line$2{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)_start$2.fromBufferAttribute(t,e),_end$2.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+_start$2.distanceTo(_end$2);e.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere$2=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(e=new BufferGeometry,t=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,r=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_sphere$2.copy(n.boundingSphere),_sphere$2.applyMatrix4(i),_sphere$2.radius+=o,!1===e.ray.intersectsSphere(_sphere$2))return;_inverseMatrix.copy(i).invert(),_ray$4.copy(e.ray).applyMatrix4(_inverseMatrix);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,r.start),o=Math.min(l.count,r.start+r.count);n<o;n++){const o=l.getX(n);_position$2.fromBufferAttribute(c,o),testPoint(_position$2,o,s,i,e,t,this)}}else{for(let n=Math.max(0,r.start),o=Math.min(c.count,r.start+r.count);n<o;n++)_position$2.fromBufferAttribute(c,n),testPoint(_position$2,n,s,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function testPoint(e,t,n,i,o,r,a){const s=_ray$4.distanceSqToPoint(e);if(s<n){const n=new Vector3;_ray$4.closestPointToPoint(e,n),n.applyMatrix4(i);const l=o.ray.origin.distanceTo(n);if(l<o.near||l>o.far)return;r.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),o=0;t.push(0);for(let r=1;r<=e;r++)n=this.getPoint(r/e),o+=n.distanceTo(i),t.push(o),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const o=n.length;let r;r=t||e*n[o-1];let a,s=0,l=o-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=n[i]-r,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===r)return i/(o-1);const c=n[i];return(i+(r-c)/(n[i+1]-c))/(o-1)}getTangent(e,t){const n=1e-4;let i=e-n,o=e+n;i<0&&(i=0),o>1&&(o=1);const r=this.getPoint(i),a=this.getPoint(o),s=t||(r.isVector2?new Vector2:new Vector3);return s.copy(a).sub(r).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Vector3,i=[],o=[],r=[],a=new Vector3,s=new Matrix4;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new Vector3)}o[0]=new Vector3,r[0]=new Vector3;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),o[0].crossVectors(i[0],a),r[0].crossVectors(i[0],o[0]);for(let h=1;h<=e;h++){if(o[h]=o[h-1].clone(),r[h]=r[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(clamp(i[h-1].dot(i[h]),-1,1));o[h].applyMatrix4(s.makeRotationAxis(a,e))}r[h].crossVectors(i[h],o[h])}if(!0===t){let t=Math.acos(clamp(o[0].dot(o[e]),-1,1));t/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(t=-t);for(let n=1;n<=e;n++)o[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),r[n].crossVectors(i[n],o[n])}return{tangents:i,normals:o,binormals:r}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function CubicPoly(){let e=0,t=0,n=0,i=0;function o(o,r,a,s){e=o,t=a,n=-3*o+3*r-2*a-s,i=2*o-2*r+a+s}return{initCatmullRom:function(e,t,n,i,r){o(t,n,r*(n-e),r*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,r,a,s){let l=(t-e)/r-(n-e)/(r+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+s)+(i-n)/s;l*=a,c*=a,o(t,n,l,c)},calc:function(o){const r=o*o;return e+t*o+n*r+i*(r*o)}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Vector3){const n=t,i=this.points,o=i.length,r=(o-(this.closed?0:1))*e;let a,s,l=Math.floor(r),c=r-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:0===c&&l===o-1&&(l=o-2,c=1),this.closed||l>0?a=i[(l-1)%o]:(tmp.subVectors(i[0],i[1]).add(i[0]),a=tmp);const u=i[l%o],d=i[(l+1)%o];if(this.closed||l+2<o?s=i[(l+2)%o]:(tmp.subVectors(i[o-1],i[o-2]).add(i[o-1]),s=tmp),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),i=Math.pow(d.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),px.initNonuniformCatmullRom(a.x,u.x,d.x,s.x,t,n,i),py.initNonuniformCatmullRom(a.y,u.y,d.y,s.y,t,n,i),pz.initNonuniformCatmullRom(a.z,u.z,d.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(px.initCatmullRom(a.x,u.x,d.x,s.x,this.tension),py.initCatmullRom(a.y,u.y,d.y,s.y,this.tension),pz.initCatmullRom(a.z,u.z,d.z,s.z,this.tension));return n.set(px.calc(c),py.calc(c),pz.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Vector3).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}class CylinderGeometry extends BufferGeometry{constructor(e=1,t=1,n=1,i=32,o=1,r=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:o,openEnded:r,thetaStart:a,thetaLength:s};const l=this;i=Math.floor(i),o=Math.floor(o);const c=[],u=[],d=[],h=[];let p=0;const f=[],g=n/2;let m=0;function _(n){const o=p,r=new Vector2,f=new Vector3;let _=0;const v=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,g*b,0),d.push(0,b,0),h.push(.5,.5),p++;const T=p;for(let e=0;e<=i;e++){const t=e/i*s+a,n=Math.cos(t),o=Math.sin(t);f.x=v*o,f.y=g*b,f.z=v*n,u.push(f.x,f.y,f.z),d.push(0,b,0),r.x=.5*n+.5,r.y=.5*o*b+.5,h.push(r.x,r.y),p++}for(let e=0;e<i;e++){const t=o+e,i=T+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),_+=3}l.addGroup(m,_,!0===n?1:2),m+=_}!function(){const r=new Vector3,_=new Vector3;let v=0;const b=(t-e)/n;for(let l=0;l<=o;l++){const c=[],m=l/o,v=m*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,o=t*s+a,l=Math.sin(o),f=Math.cos(o);_.x=v*l,_.y=-m*n+g,_.z=v*f,u.push(_.x,_.y,_.z),r.set(l,b,f).normalize(),d.push(r.x,r.y,r.z),h.push(t,1-m),c.push(p++)}f.push(c)}for(let e=0;e<i;e++)for(let t=0;t<o;t++){const n=f[t][e],i=f[t+1][e],o=f[t+1][e+1],r=f[t][e+1];c.push(n,i,r),c.push(i,o,r),v+=6}l.addGroup(m,v,0),m+=v}(),!1===r&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(d,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(e=1,t=1,n=32,i=1,o=!1,r=0,a=2*Math.PI){super(0,e,t,n,i,o,r,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:r,thetaLength:a}}static fromJSON(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const o=[],r=[];function a(e,t,n,i){const o=i+1,r=[];for(let a=0;a<=o;a++){r[a]=[];const i=e.clone().lerp(n,a/o),s=t.clone().lerp(n,a/o),l=o-a;for(let e=0;e<=l;e++)r[a][e]=0===e&&a===o?i:i.clone().lerp(s,e/l)}for(let a=0;a<o;a++)for(let e=0;e<2*(o-a)-1;e++){const t=Math.floor(e/2);e%2==0?(s(r[a][t+1]),s(r[a+1][t]),s(r[a][t])):(s(r[a][t+1]),s(r[a+1][t+1]),s(r[a+1][t]))}}function s(e){o.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(r[t]=e.x-1),0===n.x&&0===n.z&&(r[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Vector3,i=new Vector3,o=new Vector3;for(let r=0;r<t.length;r+=3)l(t[r+0],n),l(t[r+1],i),l(t[r+2],o),a(n,i,o,e)}(i),function(e){const t=new Vector3;for(let n=0;n<o.length;n+=3)t.x=o[n+0],t.y=o[n+1],t.z=o[n+2],t.normalize().multiplyScalar(e),o[n+0]=t.x,o[n+1]=t.y,o[n+2]=t.z}(n),function(){const e=new Vector3;for(let n=0;n<o.length;n+=3){e.x=o[n+0],e.y=o[n+1],e.z=o[n+2];const i=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);r.push(i,1-a)}var t;(function(){const e=new Vector3,t=new Vector3,n=new Vector3,i=new Vector3,a=new Vector2,s=new Vector2,l=new Vector2;for(let d=0,h=0;d<o.length;d+=9,h+=6){e.set(o[d+0],o[d+1],o[d+2]),t.set(o[d+3],o[d+4],o[d+5]),n.set(o[d+6],o[d+7],o[d+8]),a.set(r[h+0],r[h+1]),s.set(r[h+2],r[h+3]),l.set(r[h+4],r[h+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(a,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<r.length;e+=6){const t=r[e+0],n=r[e+2],i=r[e+4],o=Math.max(t,n,i),a=Math.min(t,n,i);o>.9&&a<.1&&(t<.2&&(r[e+0]+=1),n<.2&&(r[e+2]+=1),i<.2&&(r[e+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(o.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(r,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}class SphereGeometry extends BufferGeometry{constructor(e=1,t=32,n=16,i=0,o=2*Math.PI,r=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:o,thetaStart:r,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(r+a,Math.PI);let l=0;const c=[],u=new Vector3,d=new Vector3,h=[],p=[],f=[],g=[];for(let m=0;m<=n;m++){const h=[],_=m/n;let v=0;0===m&&0===r?v=.5/t:m===n&&s===Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*o)*Math.sin(r+_*a),u.y=e*Math.cos(r+_*a),u.z=e*Math.sin(i+s*o)*Math.sin(r+_*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),g.push(s+v,1-_),h.push(l++)}c.push(h)}for(let m=0;m<n;m++)for(let e=0;e<t;e++){const t=c[m][e+1],i=c[m][e],o=c[m+1][e],a=c[m+1][e+1];(0!==m||r>0)&&h.push(t,i,a),(m!==n-1||s<Math.PI)&&h.push(i,o,a)}this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(f,3)),this.setAttribute("uv",new Float32BufferAttribute(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TetrahedronGeometry(e.radius,e.detail)}}class TorusGeometry extends BufferGeometry{constructor(e=1,t=.4,n=12,i=48,o=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:o},n=Math.floor(n),i=Math.floor(i);const r=[],a=[],s=[],l=[],c=new Vector3,u=new Vector3,d=new Vector3;for(let h=0;h<=n;h++)for(let r=0;r<=i;r++){const p=r/i*o,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(r/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,o=(i+1)*(h-1)+e,a=(i+1)*h+e;r.push(t,n,a),r.push(n,o,a)}this.setIndex(r),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(s,3)),this.setAttribute("uv",new Float32BufferAttribute(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class WireframeGeometry extends BufferGeometry{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new Vector3,o=new Vector3;if(null!==e.index){const r=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=a.getX(e+l),c=a.getX(e+(l+1)%3);i.fromBufferAttribute(r,s),o.fromBufferAttribute(r,c),!0===isUniqueEdge(i,o,n)&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}}else{const r=e.attributes.position;for(let e=0,a=r.count/3;e<a;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;i.fromBufferAttribute(r,a),o.fromBufferAttribute(r,l),!0===isUniqueEdge(i,o,n)&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Float32BufferAttribute(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function isUniqueEdge(e,t,n){const i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,o=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(i)&&!0!==n.has(o)&&(n.add(i),n.add(o),!0)}class RawShaderMaterial extends ShaderMaterial{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshToonMaterial extends Material{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MeshLambertMaterial extends Material{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function convertArray(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function getKeyframeOrder(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function sortedArray(e,t,n){const i=e.length,o=new e.constructor(i);for(let r=0,a=0;a!==i;++r){const i=n[r]*t;for(let n=0;n!==t;++n)o[a++]=e[i+n]}return o}function flattenJSON(e,t,n,i){let o=1,r=e[0];for(;void 0!==r&&void 0===r[i];)r=e[o++];if(void 0===r)return;let a=r[i];if(void 0!==a)if(Array.isArray(a))do{a=r[i],void 0!==a&&(t.push(r.time),n.push.apply(n,a)),r=e[o++]}while(void 0!==r);else if(void 0!==a.toArray)do{a=r[i],void 0!==a&&(t.push(r.time),a.toArray(n,n.length)),r=e[o++]}while(void 0!==r);else do{a=r[i],void 0!==a&&(t.push(r.time),n.push(a)),r=e[o++]}while(void 0!==r)}class Interpolant{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],o=t[n-1];e:{t:{let r;n:{i:if(!(e<i)){for(let r=n+2;;){if(void 0===i){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===r)break;if(o=i,i=t[++n],e<i)break t}r=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(n=2,o=a);for(let r=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===r)break;if(i=o,o=t[--n-1],e>=o)break t}r=n,n=0}}for(;n<r;){const i=n+r>>>1;e<t[i]?r=i:n=i+1}if(i=t[n],o=t[n-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,i)}return this.interpolate_(n,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=e*i;for(let r=0;r!==i;++r)t[r]=n[o+r];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(e,t,n){const i=this.parameterPositions;let o=e-2,r=e+1,a=i[o],s=i[r];if(void 0===a)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:o=e,a=2*t-n;break;case WrapAroundEnding:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:r=e,s=2*n-t;break;case WrapAroundEnding:r=1,s=n+i[1]-i[0];break;default:r=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=o*c,this._offsetNext=r*c}interpolate_(e,t,n,i){const o=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,g=f*p,m=-d*g+2*d*f-d*p,_=(1+d)*g+(-1.5-2*d)*f+(-.5+d)*p+1,v=(-1-h)*g+(1.5+h)*f+.5*p,b=h*g-h*f;for(let T=0;T!==a;++T)o[T]=m*r[c+T]+_*r[l+T]+v*r[s+T]+b*r[u+T];return o}}class LinearInterpolant extends Interpolant{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const o=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==a;++d)o[d]=r[l+d]*u+r[s+d]*c;return o}}class DiscreteInterpolant extends Interpolant{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class KeyframeTrack{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=convertArray(t,this.TimeBufferType),this.values=convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:convertArray(e.times,Array),values:convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let o=0,r=i-1;for(;o!==i&&n[o]<e;)++o;for(;-1!==r&&n[r]>t;)--r;if(++r,0!==o||r!==i){o>=r&&(r=Math.max(r,1),o=r-1);const e=this.getValueSize();this.times=n.slice(o,r),this.values=this.values.slice(o*e,r*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let r=null;for(let a=0;a!==o;a++){const t=n[a];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==r&&r>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,r),e=!1;break}r=t}if(void 0!==i&&isTypedArray(i))for(let a=0,s=i.length;a!==s;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===InterpolateSmooth,o=e.length-1;let r=1;for(let a=1;a<o;++a){let o=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(i)o=!0;else{const e=a*n,i=e-n,r=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[r+a]){o=!0;break}}}if(o){if(a!==r){e[r]=e[a];const i=a*n,o=r*n;for(let e=0;e!==n;++e)t[o+e]=t[i+e]}++r}}if(o>0){e[r]=e[o];for(let e=o*n,i=r*n,a=0;a!==n;++a)t[i+a]=t[e+a];++r}return r!==e.length?(this.times=e.slice(0,r),this.values=t.slice(0,r*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const o=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)Quaternion.slerpFlat(o,0,r,l-a,r,l,s);return o}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(e,t=-1,n,i=NormalAnimationBlendMode){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let r=0,a=n.length;r!==a;++r)t.push(parseKeyframeTrack(n[r]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,r=n.length;o!==r;++o)t.push(KeyframeTrack.toJSON(n[o]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const o=t.length,r=[];for(let a=0;a<o;a++){let e=[],s=[];e.push((a+o-1)%o,a,(a+1)%o),s.push(0,1,0);const l=getKeyframeOrder(e);e=sortedArray(e,1,l),s=sortedArray(s,1,l),i||0!==e[0]||(e.push(o),s.push(s[0])),r.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,r)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(o);if(n&&n.length>1){const e=n[1];let o=i[e];o||(i[e]=o=[]),o.push(t)}}const r=[];for(const a in i)r.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return r}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,o){if(0!==n.length){const r=[],a=[];flattenJSON(n,r,a,i),0!==r.length&&o.push(new e(t,r,a))}},i=[],o=e.name||"default",r=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const o in t){const t=[],r=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),r.push(i.morphTarget===o?1:0)}i.push(new NumberKeyframeTrack(".morphTargetInfluence["+o+"]",t,r))}s=t.length*r}else{const o=".bones["+t[c].name+"]";n(VectorKeyframeTrack,o+".position",e,"pos",i),n(QuaternionKeyframeTrack,o+".quaternion",e,"rot",i),n(VectorKeyframeTrack,o+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(o,s,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function parseKeyframeTrack(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=getTrackTypeForValueTypeName(e.type);if(void 0===e.times){const t=[],n=[];flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Cache={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class LoadingManager{constructor(e,t,n){const i=this;let o,r=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(e){this.manager=void 0!==e?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,o){n.load(e,i,t,o)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(e,t){super(e),this.response=t}}class FileLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Cache.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout((()=>{t&&t(o),this.manager.itemEnd(e)}),0),o;if(void 0!==loading[e])return void loading[e].push({onLoad:t,onProgress:n,onError:i});loading[e]=[],loading[e].push({onLoad:t,onProgress:n,onError:i});const r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(r).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=loading[e],i=t.body.getReader(),o=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),r=o?parseInt(o):0,a=0!==r;let s=0;const l=new ReadableStream({start(e){!function t(){i.read().then((({done:i,value:o})=>{if(i)e.close();else{s+=o.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:r});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(o),t()}}))}()}});return new Response(l)}throw new HttpError(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{Cache.add(e,t);const n=loading[e];delete loading[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=loading[e];if(void 0===n)throw this.manager.itemError(e),t;delete loading[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,r=Cache.get(e);if(void 0!==r)return o.manager.itemStart(e),setTimeout((function(){t&&t(r),o.manager.itemEnd(e)}),0),r;const a=createElementNS("img");function s(){c(),Cache.add(e,this),t&&t(this),o.manager.itemEnd(e)}function l(t){c(),i&&i(t),o.manager.itemError(e),o.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class DataTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){const o=this,r=new DataTexture,a=new FileLoader(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,(function(e){let n;try{n=o.parse(e)}catch(a){if(void 0===i)return void console.error(a);i(a)}void 0!==n.image?r.image=n.image:void 0!==n.data&&(r.image.width=n.width,r.image.height=n.height,r.image.data=n.data),r.wrapS=void 0!==n.wrapS?n.wrapS:ClampToEdgeWrapping,r.wrapT=void 0!==n.wrapT?n.wrapT:ClampToEdgeWrapping,r.magFilter=void 0!==n.magFilter?n.magFilter:LinearFilter,r.minFilter=void 0!==n.minFilter?n.minFilter:LinearFilter,r.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?r.colorSpace=n.colorSpace:void 0!==n.encoding&&(r.encoding=n.encoding),void 0!==n.flipY&&(r.flipY=n.flipY),void 0!==n.format&&(r.format=n.format),void 0!==n.type&&(r.type=n.type),void 0!==n.mipmaps&&(r.mipmaps=n.mipmaps,r.minFilter=LinearMipmapLinearFilter),1===n.mipmapCount&&(r.minFilter=LinearFilter),void 0!==n.generateMipmaps&&(r.generateMipmaps=n.generateMipmaps),r.needsUpdate=!0,t&&t(r,n)}),n,i),r}}class TextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,i){const o=new Texture,r=new ImageLoader(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(e,(function(e){o.image=e,o.needsUpdate=!0,void 0!==t&&t(o)}),n,i),o}}class Light extends Object3D{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(e.matrixWorld),t.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_lookTarget$1),t.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_projScreenMatrix$1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*RAD2DEG$1*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;n===t.fov&&i===t.aspect&&o===t.far||(t.fov=n,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SpotLight extends Light{constructor(e,t,n=0,i=Math.PI/3,o=0,r=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=n,this.angle=i,this.penumbra=o,this.decay=r,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,o=e.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(e.matrixWorld),n.position.copy(_lightPositionWorld),_lookTarget.copy(n.position),_lookTarget.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_lookTarget),n.updateMatrixWorld(),i.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class AmbientLight extends Light{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}exports("Z",AmbientLight);class LoaderUtils{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let n="";for(let e=0,i=t.length;e<i;e++)n+=String.fromCharCode(t[e]);try{return decodeURIComponent(escape(n))}catch(e){return n}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ImageBitmapLoader extends Loader{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,r=Cache.get(e);if(void 0!==r)return o.manager.itemStart(e),r.then?void r.then((n=>{t&&t(n),o.manager.itemEnd(e)})).catch((e=>{i&&i(e)})):(setTimeout((function(){t&&t(r),o.manager.itemEnd(e)}),0),r);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const s=fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(n){return Cache.add(e,n),t&&t(n),o.manager.itemEnd(e),n})).catch((function(t){i&&i(t),Cache.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)}));Cache.add(e,s),o.manager.itemStart(e)}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now$1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function now$1(){return("undefined"==typeof performance?Date:performance).now()}exports("a8",Clock);const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(e,t,n){const i=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=n.length;i!==o;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class PropertyBinding{constructor(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(e){const t=_trackRe.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==_supportedObjectNames.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const o=e[i];if(o.name===t||o.uuid===t)return o;const r=n(o.children);if(r)return r}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const r=e[i];if(void 0===r){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}s=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=o}else void 0!==r.fromArray&&void 0!==r.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(s=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite,PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Raycaster{constructor(e,t,n=0,i=1/0){this.ray=new Ray(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return intersectObject(e,this,n,t),n.sort(ascSort),n}intersectObjects(e,t=!0,n=[]){for(let i=0,o=e.length;i<o;i++)intersectObject(e[i],this,n,t);return n.sort(ascSort),n}}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,o=i.length;e<o;e++)intersectObject(i[e],t,n,!0)}}class Spherical{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(clamp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(e=new Vector3,t=new Vector3){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);const n=_startEnd.dot(_startEnd);let i=_startEnd.dot(_startP)/n;return t&&(i=clamp(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class GridHelper extends LineSegments{constructor(e=10,t=10,n=4473924,i=8947848){n=new Color(n),i=new Color(i);const o=t/2,r=e/t,a=e/2,s=[],l=[];for(let u=0,d=0,h=-a;u<=t;u++,h+=r){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);const e=u===o?n:i;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(s,3)),c.setAttribute("color",new Float32BufferAttribute(l,3));super(c,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}exports("$",GridHelper),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);var Stats=function(){var e=0,t=document.createElement("div");function n(e){return t.appendChild(e.dom),e}function i(n){for(var i=0;i<t.children.length;i++)t.children[i].style.display=i===n?"block":"none";e=n}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",(function(n){n.preventDefault(),i(++e%t.children.length)}),!1);var o=(performance||Date).now(),r=o,a=0,s=n(new Stats.Panel("FPS","#0ff","#002")),l=n(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new Stats.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:n,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(l.update(e-o,200),e>=r+1e3&&(s.update(1e3*a/(e-r),100),r=e,a=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:t,setMode:i}};function toTrianglesDrawMode(e,t){if(t===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===TriangleFanDrawMode||t===TriangleStripDrawMode){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,o=[];if(t===TriangleFanDrawMode)for(let e=1;e<=i;e++)o.push(n.getX(0)),o.push(n.getX(e)),o.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(o.push(n.getX(e)),o.push(n.getX(e+1)),o.push(n.getX(e+2))):(o.push(n.getX(e+2)),o.push(n.getX(e+1)),o.push(n.getX(e)));o.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=e.clone();return r.setIndex(o),r.clearGroups(),r}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}Stats.Panel=function(e,t,n){var i=1/0,o=0,r=Math.round,a=r(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,d=3*a,h=15*a,p=74*a,f=30*a,g=document.createElement("canvas");g.width=s,g.height=l,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,l),m.fillStyle=t,m.fillText(e,c,u),m.fillRect(d,h,p,f),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d,h,p,f),{dom:g,update:function(l,_){i=Math.min(i,l),o=Math.max(o,l),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,h),m.fillStyle=t,m.fillText(r(l)+" "+e+" ("+r(i)+"-"+r(o)+")",c,u),m.drawImage(g,d+a,h,p-a,f,d,h,p-a,f),m.fillRect(d+p-a,h,a,f),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d+p-a,h,a,r((1-l/_)*f))}}};class GLTFLoader extends Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new GLTFMaterialsClearcoatExtension(e)})),this.register((function(e){return new GLTFTextureBasisUExtension(e)})),this.register((function(e){return new GLTFTextureWebPExtension(e)})),this.register((function(e){return new GLTFTextureAVIFExtension(e)})),this.register((function(e){return new GLTFMaterialsSheenExtension(e)})),this.register((function(e){return new GLTFMaterialsTransmissionExtension(e)})),this.register((function(e){return new GLTFMaterialsVolumeExtension(e)})),this.register((function(e){return new GLTFMaterialsIorExtension(e)})),this.register((function(e){return new GLTFMaterialsEmissiveStrengthExtension(e)})),this.register((function(e){return new GLTFMaterialsSpecularExtension(e)})),this.register((function(e){return new GLTFMaterialsIridescenceExtension(e)})),this.register((function(e){return new GLTFMaterialsAnisotropyExtension(e)})),this.register((function(e){return new GLTFMaterialsBumpExtension(e)})),this.register((function(e){return new GLTFLightsExtension(e)})),this.register((function(e){return new GLTFMeshoptCompression(e)})),this.register((function(e){return new GLTFMeshGpuInstancing(e)}))}load(t,n,i,o){const r=this;let a;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){const e=LoaderUtils.extractUrlBase(t);a=LoaderUtils.resolveURL(e,this.path)}else a=LoaderUtils.extractUrlBase(t);this.manager.itemStart(t);const s=function(e){o?o(e):console.error(e),r.manager.itemError(t),r.manager.itemEnd(t)},l=new FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(i){try{r.parse(i,a,(function(e){n(e),r.manager.itemEnd(t)}),s)}catch(e){s(e)}}),i,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let o;const r={},a={},s=new TextDecoder;if("string"==typeof e)o=JSON.parse(e);else if(e instanceof ArrayBuffer){if(s.decode(new Uint8Array(e,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{r[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(e)}catch(c){return void(i&&i(c))}o=JSON.parse(r[EXTENSIONS.KHR_BINARY_GLTF].content)}else o=JSON.parse(s.decode(e))}else o=e;if(void 0===o.asset||o.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new GLTFParser(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[e.name]=e,r[e.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const e=o.extensionsUsed[u],t=o.extensionsRequired||[];switch(e){case EXTENSIONS.KHR_MATERIALS_UNLIT:r[e]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:r[e]=new GLTFDracoMeshCompressionExtension(o,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:r[e]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:r[e]=new GLTFMeshQuantizationExtension;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(r),l.setPlugins(a),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(i,o){n.parse(e,t,i,o)}))}}function GLTFRegistry(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const o=t.json,r=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let a;const s=new Color(16777215);void 0!==r.color&&s.setRGB(r.color[0],r.color[1],r.color[2],LinearSRGBColorSpace);const l=void 0!==r.range?r.range:0;switch(r.type){case"directional":a=new DirectionalLight(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new PointLight(s),a.distance=l;break;case"spot":a=new SpotLight(s),a.distance=l,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,a.angle=r.spot.outerConeAngle,a.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return a.position.set(0,0,0),a.decay=2,assignExtrasToUserData(a,r),void 0!==r.intensity&&(a.intensity=r.intensity),a.name=t.createUniqueName(r.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],o=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(e,t,n){const i=[];e.color=new Color(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],LinearSRGBColorSpace),e.opacity=t[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(e,"map",o.baseColorTexture,SRGBColorSpace))}return Promise.all(i)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];if(void 0!==r.clearcoatFactor&&(t.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){const e=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Vector2(e,e)}return Promise.all(o)}}class GLTFMaterialsIridescenceExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];return void 0!==r.iridescenceFactor&&(t.iridescence=r.iridescenceFactor),void 0!==r.iridescenceTexture&&o.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),void 0!==r.iridescenceIor&&(t.iridescenceIOR=r.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==r.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),void 0!==r.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),void 0!==r.iridescenceThicknessTexture&&o.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(o)}}class GLTFMaterialsSheenExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=i.extensions[this.name];if(void 0!==r.sheenColorFactor){const e=r.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],LinearSRGBColorSpace)}return void 0!==r.sheenRoughnessFactor&&(t.sheenRoughness=r.sheenRoughnessFactor),void 0!==r.sheenColorTexture&&o.push(n.assignTexture(t,"sheenColorMap",r.sheenColorTexture,SRGBColorSpace)),void 0!==r.sheenRoughnessTexture&&o.push(n.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(o)}}class GLTFMaterialsTransmissionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];return void 0!==r.transmissionFactor&&(t.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&o.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(o)}}class GLTFMaterialsVolumeExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];t.thickness=void 0!==r.thicknessFactor?r.thicknessFactor:0,void 0!==r.thicknessTexture&&o.push(n.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return t.attenuationColor=(new Color).setRGB(a[0],a[1],a[2],LinearSRGBColorSpace),Promise.all(o)}}class GLTFMaterialsIorExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];t.specularIntensity=void 0!==r.specularFactor?r.specularFactor:1,void 0!==r.specularTexture&&o.push(n.assignTexture(t,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return t.specularColor=(new Color).setRGB(a[0],a[1],a[2],LinearSRGBColorSpace),void 0!==r.specularColorTexture&&o.push(n.assignTexture(t,"specularColorMap",r.specularColorTexture,SRGBColorSpace)),Promise.all(o)}}class GLTFMaterialsBumpExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];return t.bumpScale=void 0!==r.bumpFactor?r.bumpFactor:1,void 0!==r.bumpTexture&&o.push(n.assignTexture(t,"bumpMap",r.bumpTexture)),Promise.all(o)}}class GLTFMaterialsAnisotropyExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],r=i.extensions[this.name];return void 0!==r.anisotropyStrength&&(t.anisotropy=r.anisotropyStrength),void 0!==r.anisotropyRotation&&(t.anisotropyRotation=r.anisotropyRotation),void 0!==r.anisotropyTexture&&o.push(n.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(o)}}class GLTFTextureBasisUExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const o=i.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,r)}}class GLTFTextureWebPExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,o=i.textures[e];if(!o.extensions||!o.extensions[t])return null;const r=o.extensions[t],a=i.images[r.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(o){if(o)return n.loadTextureImage(e,r.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class GLTFTextureAVIFExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,o=i.textures[e];if(!o.extensions||!o.extensions[t])return null;const r=o.extensions[t],a=i.images[r.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(o){if(o)return n.loadTextureImage(e,r.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class GLTFMeshoptCompression{constructor(e){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,r=e.count,a=e.byteStride,s=new Uint8Array(t,n,i);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(r,a,s,e.mode,e.filter).then((function(e){return e.buffer})):o.ready.then((function(){const t=new ArrayBuffer(r*a);return o.decodeGltfBuffer(new Uint8Array(t),r,a,s,e.mode,e.filter),t}))}))}return null}}class GLTFMeshGpuInstancing{constructor(e){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const s of i.primitives)if(s.mode!==WEBGL_CONSTANTS.TRIANGLES&&s.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&s.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&void 0!==s.mode)return null;const o=n.extensions[this.name].attributes,r=[],a={};for(const s in o)r.push(this.parser.getDependency("accessor",o[s]).then((e=>(a[s]=e,a[s]))));return r.length<1?null:(r.push(this.parser.createNodeMesh(e)),Promise.all(r).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,o=[];for(const r of n){const e=new Matrix4,t=new Vector3,n=new Quaternion,s=new Vector3(1,1,1),l=new InstancedMesh(r.geometry,r.material,i);for(let o=0;o<i;o++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,o),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,o),a.SCALE&&s.fromBufferAttribute(a.SCALE,o),l.setMatrixAt(o,e.compose(t,n,s));for(const i in a)if("_COLOR_0"===i){const e=a[i];l.instanceColor=new InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&r.geometry.setAttribute(i,a[i]);Object3D.prototype.copy.call(l,r),this.parser.assignFinalMaterial(l),o.push(l)}return t.isGroup?(t.clear(),t.add(...o),t):o[0]})))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(e){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,BINARY_EXTENSION_HEADER_LENGTH),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,o=new DataView(e,BINARY_EXTENSION_HEADER_LENGTH);let r=0;for(;r<i;){const t=o.getUint32(r,!0);r+=4;const i=o.getUint32(r,!0);if(r+=4,i===BINARY_EXTENSION_CHUNK_TYPES.JSON){const i=new Uint8Array(e,BINARY_EXTENSION_HEADER_LENGTH+r,t);this.content=n.decode(i)}else if(i===BINARY_EXTENSION_CHUNK_TYPES.BIN){const n=BINARY_EXTENSION_HEADER_LENGTH+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,o=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},s={},l={};for(const c in r){const e=ATTRIBUTES[c]||c.toLowerCase();a[e]=r[c]}for(const c in e.attributes){const t=ATTRIBUTES[c]||c.toLowerCase();if(void 0!==r[c]){const i=n.accessors[e.attributes[c]],o=WEBGL_COMPONENT_TYPES[i.componentType];l[t]=o.name,s[t]=!0===i.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t,n){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=s[t];void 0!==i&&(n.normalized=i)}t(e)}),a,l,LinearSRGBColorSpace,n)}))}))}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=e*i*3+i;for(let r=0;r!==i;r++)t[r]=n[o+r];return t}interpolate_(e,t,n,i){const o=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=i-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,f=p-l,g=-2*h+3*d,m=h-d,_=1-g,v=m-d+u;for(let b=0;b!==a;b++){const e=r[f+b+a],t=r[f+b+s]*c,n=r[p+b+a],i=r[p+b]*c;o[b]=_*e+v*t+g*n+m*i}return o}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(e,t,n,i){const o=super.interpolate_(e,t,n,i);return _q.fromArray(o).normalize().toArray(o),o}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),e.DefaultMaterial}function addUnknownExtensionsToUserData(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function assignExtrasToUserData(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function addMorphTargets(e,t,n){let i=!1,o=!1,r=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(o=!0),void 0!==e.COLOR_0&&(r=!0),i&&o&&r)break}if(!i&&!o&&!r)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(o){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(r){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],s=t[2];return i&&(e.morphAttributes.position=n),o&&(e.morphAttributes.normal=a),r&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}function updateMorphTargets(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(e){let t;const n=e.extensions&&e.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+createAttributesKey(n.attributes):e.indices+":"+createAttributesKey(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,o=e.targets.length;i<o;i++)t+=":"+createAttributesKey(e.targets[i]);return t}function createAttributesKey(e){let t="";const n=Object.keys(e).sort();for(let i=0,o=n.length;i<o;i++)t+=n[i]+":"+e[n[i]]+";";return t}function getNormalizedComponentScale(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(e){return e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,o=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&o<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const r={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return addUnknownExtensionsToUserData(o,r,i),assignExtrasToUserData(r,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(r)}))).then((function(){e(r)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,o=t.length;i<o;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,o=e.length;i<o;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),o=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,r]of e.children.entries())o(r,t.children[i])};return o(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const o=e(t[i]);o&&n.push(o)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,o){n.load(LoaderUtils.resolveURL(t.uri,i.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=WEBGL_TYPE_SIZES[i.type],t=WEBGL_COMPONENT_TYPES[i.componentType],n=!0===i.normalized,o=new t(i.count*e);return Promise.resolve(new BufferAttribute(o,e,n))}const o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],r=WEBGL_TYPE_SIZES[i.type],a=WEBGL_COMPONENT_TYPES[i.componentType],s=a.BYTES_PER_ELEMENT,l=s*r,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(h=new a(o,e*u,i.count*u/s),l=new InterleavedBuffer(h,u/s),t.cache.add(n,l)),p=new InterleavedBufferAttribute(l,r,c%u/s,d)}else h=null===o?new a(i.count*r):new a(o,c,i.count*r),p=new BufferAttribute(h,r,d);if(void 0!==i.sparse){const t=WEBGL_TYPE_SIZES.SCALAR,n=WEBGL_COMPONENT_TYPES[i.sparse.indices.componentType],s=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(e[1],s,i.sparse.count*t),u=new a(e[2],l,i.sparse.count*r);null!==o&&(p=new BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,i=c.length;e<i;e++){const t=c[e];if(p.setX(t,u[e*r]),r>=2&&p.setY(t,u[e*r+1]),r>=3&&p.setZ(t,u[e*r+2]),r>=4&&p.setW(t,u[e*r+3]),r>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,o=t.images[i];let r=this.textureLoader;if(o.uri){const e=n.manager.getHandler(o.uri);null!==e&&(r=e)}return this.loadTextureImage(e,i,r)}loadTextureImage(e,t,n){const i=this,o=this.json,r=o.textures[e],a=o.images[t],s=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=r.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(o.samplers||{})[r.sampler]||{};return t.magFilter=WEBGL_FILTERS[n.magFilter]||LinearFilter,t.minFilter=WEBGL_FILTERS[n.minFilter]||LinearMipmapLinearFilter,t.wrapS=WEBGL_WRAPPINGS[n.wrapS]||RepeatWrapping,t.wrapT=WEBGL_WRAPPINGS[n.wrapT]||RepeatWrapping,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}loadImageSource(e,t){const n=this,i=this.json,o=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const r=i.images[e],a=self.URL||self.webkitURL;let s=r.uri||"",l=!1;if(void 0!==r.bufferView)s=n.getDependency("bufferView",r.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:r.mimeType});return s=a.createObjectURL(t),s}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(s).then((function(e){return new Promise((function(n,i){let r=n;!0===t.isImageBitmapLoader&&(r=function(e){const t=new Texture(e);t.needsUpdate=!0,n(t)}),t.load(LoaderUtils.resolveURL(e,o.path),r,void 0,i)}))})).then((function(e){return!0===l&&a.revokeObjectURL(s),e.userData.mimeType=r.mimeType||getImageURIMimeType(r.uri),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,i){const o=this;return this.getDependency("texture",n.index).then((function(r){if(!r)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((r=r.clone()).channel=n.texCoord),o.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=o.associations.get(r);r=o.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),o.associations.set(r,t)}}return void 0!==i&&(r.colorSpace=i),e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,r=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new PointsMaterial,Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new LineBasicMaterial,Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||o||r){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),r&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),o&&(t.vertexColors=!0),r&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,i=this.extensions,o=n.materials[e];let r;const a={},s=[];if((o.extensions||{})[EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=i[EXTENSIONS.KHR_MATERIALS_UNLIT];r=e.getMaterialType(),s.push(e.extendParams(a,o,t))}else{const n=o.pbrMetallicRoughness||{};if(a.color=new Color(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],LinearSRGBColorSpace),a.opacity=e[3]}void 0!==n.baseColorTexture&&s.push(t.assignTexture(a,"map",n.baseColorTexture,SRGBColorSpace)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),s.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),r=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===o.doubleSided&&(a.side=DoubleSide);const l=o.alphaMode||ALPHA_MODES.OPAQUE;if(l===ALPHA_MODES.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===ALPHA_MODES.MASK&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&r!==MeshBasicMaterial&&(s.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new Vector2(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==o.occlusionTexture&&r!==MeshBasicMaterial&&(s.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&r!==MeshBasicMaterial){const e=o.emissiveFactor;a.emissive=(new Color).setRGB(e[0],e[1],e[2],LinearSRGBColorSpace)}return void 0!==o.emissiveTexture&&r!==MeshBasicMaterial&&s.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,SRGBColorSpace)),Promise.all(s).then((function(){const n=new r(a);return o.name&&(n.name=o.name),assignExtrasToUserData(n,o),t.associations.set(n,{materials:e}),o.extensions&&addUnknownExtensionsToUserData(i,n,o),n}))}createUniqueName(e){const t=PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function o(e){return n[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return addPrimitiveAttributes(n,e,t)}))}const r=[];for(let a=0,s=e.length;a<s;a++){const n=e[a],s=createPrimitiveKey(n),l=i[s];if(l)r.push(l.promise);else{let e;e=n.extensions&&n.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?o(n):addPrimitiveAttributes(new BufferGeometry,n,t),i[s]={primitive:n,promise:e},r.push(e)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,i=this.extensions,o=n.meshes[e],r=o.primitives,a=[];for(let s=0,l=r.length;s<l;s++){const e=void 0===r[s].material?createDefaultMaterial(this.cache):this.getDependency("material",r[s].material);a.push(e)}return a.push(t.loadGeometries(r)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let u=0,d=s.length;u<d;u++){const n=s[u],c=r[u];let d;const h=a[u];if(c.mode===WEBGL_CONSTANTS.TRIANGLES||c.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||c.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||void 0===c.mode)d=!0===o.isSkinnedMesh?new SkinnedMesh(n,h):new Mesh(n,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),c.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?d.geometry=toTrianglesDrawMode(d.geometry,TriangleStripDrawMode):c.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(d.geometry=toTrianglesDrawMode(d.geometry,TriangleFanDrawMode));else if(c.mode===WEBGL_CONSTANTS.LINES)d=new LineSegments(n,h);else if(c.mode===WEBGL_CONSTANTS.LINE_STRIP)d=new Line$2(n,h);else if(c.mode===WEBGL_CONSTANTS.LINE_LOOP)d=new LineLoop(n,h);else{if(c.mode!==WEBGL_CONSTANTS.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new Points(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&updateMorphTargets(d,o),d.name=t.createUniqueName(o.name||"mesh_"+e),assignExtrasToUserData(d,o),c.extensions&&addUnknownExtensionsToUserData(i,d,c),t.assignFinalMaterial(d),l.push(d)}for(let i=0,o=l.length;i<o;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return o.extensions&&addUnknownExtensionsToUserData(i,l[0],o),l[0];const c=new Group$2;o.extensions&&addUnknownExtensionsToUserData(i,c,o),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new PerspectiveCamera(MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),assignExtrasToUserData(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,o=t.joints.length;i<o;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,o=[],r=[];for(let a=0,s=i.length;a<s;a++){const e=i[a];if(e){o.push(e);const t=new Matrix4;null!==n&&t.fromArray(n.array,16*a),r.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new Skeleton(o,r)}))}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],o=i.name?i.name:"animation_"+e,r=[],a=[],s=[],l=[],c=[];for(let u=0,d=i.channels.length;u<d;u++){const e=i.channels[u],t=i.samplers[e.sampler],n=e.target,o=n.node,d=void 0!==i.parameters?i.parameters[t.input]:t.input,h=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(r.push(this.getDependency("node",o)),a.push(this.getDependency("accessor",d)),s.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=[];for(let o=0,c=t.length;o<c;o++){const e=t[o],c=i[o],u=r[o],d=a[o],h=s[o];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,u,d,h);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new AnimationClip(o,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),o=[],r=n.children||[];for(let s=0,l=r.length;s<l;s++)o.push(t.getDependency("node",r[s]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(o),a]).then((function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,_identityMatrix)}));for(let o=0,r=n.length;o<r;o++)t.add(n[o]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const o=t.nodes[e],r=o.name?i.createUniqueName(o.name):"",a=[],s=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&a.push(s),void 0!==o.camera&&a.push(i.getDependency("camera",o.camera).then((function(e){return i._getNodeRef(i.cameraCache,o.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===o.isBone?new Bone:t.length>1?new Group$2:1===t.length?t[0]:new Object3D,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(o.name&&(a.userData.name=o.name,a.name=r),assignExtrasToUserData(a,o),o.extensions&&addUnknownExtensionsToUserData(n,a,o),void 0!==o.matrix){const e=new Matrix4;e.fromArray(o.matrix),a.applyMatrix4(e)}else void 0!==o.translation&&a.position.fromArray(o.translation),void 0!==o.rotation&&a.quaternion.fromArray(o.rotation),void 0!==o.scale&&a.scale.fromArray(o.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,o=new Group$2;n.name&&(o.name=i.createUniqueName(n.name)),assignExtrasToUserData(o,n),n.extensions&&addUnknownExtensionsToUserData(t,o,n);const r=n.nodes||[],a=[];for(let s=0,l=r.length;s<l;s++)a.push(i.getDependency("node",r[s]));return Promise.all(a).then((function(e){for(let t=0,n=e.length;t<n;t++)o.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,o]of i.associations)(n instanceof Material||n instanceof Texture)&&t.set(n,o);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(o),o}))}_createAnimationTracks(e,t,n,i,o){const r=[],a=e.name?e.name:e.uuid,s=[];let l;switch(PATH_PROPERTIES[o.path]===PATH_PROPERTIES.weights?e.traverse((function(e){e.morphTargetInfluences&&s.push(e.name?e.name:e.uuid)})):s.push(a),PATH_PROPERTIES[o.path]){case PATH_PROPERTIES.weights:l=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:l=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:l=VectorKeyframeTrack;break;default:if(1===n.itemSize)l=NumberKeyframeTrack;else l=VectorKeyframeTrack}const c=void 0!==i.interpolation?INTERPOLATION[i.interpolation]:InterpolateLinear,u=this._getArrayFromAccessor(n);for(let d=0,h=s.length;d<h;d++){const e=new l(s[d]+"."+PATH_PROPERTIES[o.path],t.array,u,c);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),r.push(e)}return r}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=getNormalizedComponentScale(t.constructor),n=new Float32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(e,t,n){const i=t.attributes,o=new Box3;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,r=e.max;if(void 0===t||void 0===r)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new Vector3(t[0],t[1],t[2]),new Vector3(r[0],r[1],r[2])),e.normalized){const t=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const r=t.targets;if(void 0!==r){const e=new Vector3,t=new Vector3;for(let i=0,o=r.length;i<o;i++){const o=r[i];if(void 0!==o.POSITION){const i=n.json.accessors[o.POSITION],r=i.min,a=i.max;if(void 0!==r&&void 0!==a){if(t.setX(Math.max(Math.abs(r[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(r[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(r[2]),Math.abs(a[2]))),i.normalized){const e=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const a=new Sphere;o.getCenter(a.center),a.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=a}function addPrimitiveAttributes(e,t,n){const i=t.attributes,o=[];function r(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const a in i){const t=ATTRIBUTES[a]||a.toLowerCase();t in e.attributes||o.push(r(i[a],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(i)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData(e,t),computeBounds(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?addMorphTargets(e,t.targets,n):e}))}class RGBELoader extends DataTextureLoader{constructor(e){super(e),this.type=HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let i=e.pos,o=-1,r=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(o=s.indexOf("\n"))&&r<t&&i<e.byteLength;)a+=s,r+=s.length,i+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<o&&(e.pos+=r+o+1,a+s.slice(0,o))},i=function(e,t,n,i){const o=e[t+3],r=Math.pow(2,o-128)/255;n[i+0]=e[t+0]*r,n[i+1]=e[t+1]*r,n[i+2]=e[t+2]*r,n[i+3]=1},o=function(e,t,n,i){const o=e[t+3],r=Math.pow(2,o-128)/255;n[i+0]=DataUtils.toHalfFloat(Math.min(e[t+0]*r,65504)),n[i+1]=DataUtils.toHalfFloat(Math.min(e[t+1]*r,65504)),n[i+2]=DataUtils.toHalfFloat(Math.min(e[t+2]*r,65504)),n[i+3]=DataUtils.toHalfFloat(1)},r=new Uint8Array(e);r.pos=0;const a=function(e){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=n(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(i))&&(s.gamma=parseFloat(c[1])),(c=l.match(o))&&(s.exposure=parseFloat(c[1])),(c=l.match(r))&&(s.valid|=2,s.format=c[1]),(c=l.match(a))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid||t(3,"missing format specifier"),4&s.valid||t(3,"missing image size specifier"),s}(r),s=a.width,l=a.height,c=function(e,n,i){const o=n;if(o<8||o>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);o!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const r=new Uint8Array(4*n*i);r.length||t(4,"unable to allocate buffer space");let a=0,s=0;const l=4*o,c=new Uint8Array(4),u=new Uint8Array(l);let d=i;for(;d>0&&s<e.byteLength;){s+4>e.byteLength&&t(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==o||t(3,"bad rgbe scanline format");let n,i=0;for(;i<l&&s<e.byteLength;){n=e[s++];const o=n>128;if(o&&(n-=128),(0===n||i+n>l)&&t(3,"bad scanline data"),o){const t=e[s++];for(let e=0;e<n;e++)u[i++]=t}else u.set(e.subarray(s,s+n),i),i+=n,s+=n}const h=o;for(let e=0;e<h;e++){let t=0;r[a]=u[e+t],t+=o,r[a+1]=u[e+t],t+=o,r[a+2]=u[e+t],t+=o,r[a+3]=u[e+t],a+=4}d--}return r}(r.subarray(r.pos),s,l);let u,d,h;switch(this.type){case FloatType:h=c.length/4;const e=new Float32Array(4*h);for(let n=0;n<h;n++)i(c,4*n,e,4*n);u=e,d=FloatType;break;case HalfFloatType:h=c.length/4;const t=new Uint16Array(4*h);for(let n=0;n<h;n++)o(c,4*n,t,4*n);u=t,d=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:s,height:l,data:u,header:a.string,gamma:a.gamma,exposure:a.exposure,type:d}}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,(function(e,n){switch(e.type){case FloatType:case HalfFloatType:e.colorSpace=LinearSRGBColorSpace,e.minFilter=LinearFilter,e.magFilter=LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,i)}}exports("a6",RGBELoader);var untar$1={exports:{}};!function(e,t){e.exports=function(){function e(e){function t(e){for(var t=0,o=n.length;t<o;++t)n[t](e);i.push(e)}if("function"!=typeof Promise)throw new Error("Promise implementation not available in this environment.");var n=[],i=[],o=new Promise((function(n,i){e(n,i,t)}));o.progress=function(e){if("function"!=typeof e)throw new Error("cb is not a function.");for(var t=0,r=i.length;t<r;++t)e(i[t]);return n.push(e),o};var r=o.then;return o.then=function(e,t,n){return r.call(o,e,t),void 0!==n&&o.progress(n),o},o}function t(t){if(!(t instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");if(!o.Worker)throw new Error("Worker implementation is not available in this environment.");return new e((function(e,o,r){var a=new Worker(i),s=[];a.onerror=function(e){o(e)},a.onmessage=function(t){switch((t=t.data).type){case"log":console[t.data.level]("Worker: "+t.data.msg);break;case"extract":var i=n(t.data);s.push(i),r(i);break;case"complete":a.terminate(),e(s);break;case"error":a.terminate(),o(new Error(t.data.message));break;default:a.terminate(),o(new Error("Unknown message from worker: "+t.type))}},a.postMessage({type:"extract",buffer:t},[t])}))}function n(e){return Object.defineProperties(e,a),e}var i,o=window||this,r=o.URL||o.webkitURL,a={blob:{get:function(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function(){return this._blobUrl||(this._blobUrl=r.createObjectURL(this.blob))}},readAsString:{value:function(){for(var e=this.buffer,t=e.byteLength,n=1,i=new DataView(e),o=[],r=0;r<t;++r){var a=i.getUint8(r*n,!0);o.push(a)}return this._string=String.fromCharCode.apply(null,o)}},readAsJSON:{value:function(){return JSON.parse(this.readAsString())}}};return i=(window||this).URL.createObjectURL(new Blob(['"use strict";function UntarWorker(){}function decodeUTF8(e){for(var r="",t=0;t<e.length;){var a=e[t++];if(a>127){if(a>191&&a<224){if(t>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";a=(31&a)<<6|63&e[t]}else if(a>223&&a<240){if(t+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";a=(15&a)<<12|(63&e[t])<<6|63&e[++t]}else{if(!(a>239&&a<248))throw"UTF-8 decode: unknown multibyte start 0x"+a.toString(16)+" at index "+(t-1);if(t+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";a=(7&a)<<18|(63&e[t])<<12|(63&e[++t])<<6|63&e[++t]}++t}if(a<=65535)r+=String.fromCharCode(a);else{if(!(a<=1114111))throw"UTF-8 decode: code point 0x"+a.toString(16)+" exceeds UTF-16 reach";a-=65536,r+=String.fromCharCode(a>>10|55296),r+=String.fromCharCode(1023&a|56320)}}return r}function PaxHeader(e){this._fields=e}function TarFile(){}function UntarStream(e){this._bufferView=new DataView(e),this._position=0}function UntarFileStream(e){this._stream=new UntarStream(e),this._globalPaxHeader=null}if(UntarWorker.prototype={onmessage:function(e){try{if("extract"!==e.data.type)throw new Error("Unknown message type: "+e.data.type);this.untarBuffer(e.data.buffer)}catch(r){this.postError(r)}},postError:function(e){this.postMessage({type:"error",data:{message:e.message}})},postLog:function(e,r){this.postMessage({type:"log",data:{level:e,msg:r}})},untarBuffer:function(e){try{for(var r=new UntarFileStream(e);r.hasNext();){var t=r.next();this.postMessage({type:"extract",data:t},[t.buffer])}this.postMessage({type:"complete"})}catch(a){this.postError(a)}},postMessage:function(e,r){self.postMessage(e,r)}},"undefined"!=typeof self){var worker=new UntarWorker;self.onmessage=function(e){worker.onmessage(e)}}PaxHeader.parse=function(e){for(var r=new Uint8Array(e),t=[];r.length>0;){var a=parseInt(decodeUTF8(r.subarray(0,r.indexOf(32)))),n=decodeUTF8(r.subarray(0,a)),i=n.match(/^\\d+ ([^=]+)=(.*)\\n$/);if(null===i)throw new Error("Invalid PAX header data format.");var s=i[1],o=i[2];0===o.length?o=null:null!==o.match(/^\\d+$/)&&(o=parseInt(o));var f={name:s,value:o};t.push(f),r=r.subarray(a)}return new PaxHeader(t)},PaxHeader.prototype={applyHeader:function(e){this._fields.forEach(function(r){var t=r.name,a=r.value;"path"===t?(t="name",void 0!==e.prefix&&delete e.prefix):"linkpath"===t&&(t="linkname"),null===a?delete e[t]:e[t]=a})}},UntarStream.prototype={readString:function(e){for(var r=1,t=e*r,a=[],n=0;n<e;++n){var i=this._bufferView.getUint8(this.position()+n*r,!0);if(0===i)break;a.push(i)}return this.seek(t),String.fromCharCode.apply(null,a)},readBuffer:function(e){var r;if("function"==typeof ArrayBuffer.prototype.slice)r=this._bufferView.buffer.slice(this.position(),this.position()+e);else{r=new ArrayBuffer(e);var t=new Uint8Array(r),a=new Uint8Array(this._bufferView.buffer,this.position(),e);t.set(a)}return this.seek(e),r},seek:function(e){this._position+=e},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(e){return void 0===e?this._position:void(this._position=e)},size:function(){return this._bufferView.byteLength}},UntarFileStream.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&0!==this._stream.peekUint32()},next:function(){return this._readNextFile()},_readNextFile:function(){var e=this._stream,r=new TarFile,t=!1,a=null,n=e.position(),i=n+512;switch(r.name=e.readString(100),r.mode=e.readString(8),r.uid=parseInt(e.readString(8)),r.gid=parseInt(e.readString(8)),r.size=parseInt(e.readString(12),8),r.mtime=parseInt(e.readString(12),8),r.checksum=parseInt(e.readString(8)),r.type=e.readString(1),r.linkname=e.readString(100),r.ustarFormat=e.readString(6),r.ustarFormat.indexOf("ustar")>-1&&(r.version=e.readString(2),r.uname=e.readString(32),r.gname=e.readString(32),r.devmajor=parseInt(e.readString(8)),r.devminor=parseInt(e.readString(8)),r.namePrefix=e.readString(155),r.namePrefix.length>0&&(r.name=r.namePrefix+"/"+r.name)),e.position(i),r.type){case"0":case"":r.buffer=e.readBuffer(r.size);break;case"1":break;case"2":break;case"3":break;case"4":break;case"5":break;case"6":break;case"7":break;case"g":t=!0,this._globalPaxHeader=PaxHeader.parse(e.readBuffer(r.size));break;case"x":t=!0,a=PaxHeader.parse(e.readBuffer(r.size))}void 0===r.buffer&&(r.buffer=new ArrayBuffer(0));var s=i+r.size;return r.size%512!==0&&(s+=512-r.size%512),e.position(s),t&&(r=this._readNextFile()),null!==this._globalPaxHeader&&this._globalPaxHeader.applyHeader(r),null!==a&&a.applyHeader(r),r}};'])),t}()}(untar$1);var untarExports=untar$1.exports;const untar=getDefaultExportFromCjs(untarExports);class TGALoader extends DataTextureLoader{constructor(e){super(e)}parse(e){const t=0,n=1,i=2,o=3,r=9,a=10,s=11,l=48,c=4,u=0,d=1,h=2,p=3;if(e.length<19)throw new Error("THREE.TGALoader: Not enough data to contain header.");let f=0;const g=new Uint8Array(e),m={id_length:g[f++],colormap_type:g[f++],image_type:g[f++],colormap_index:g[f++]|g[f++]<<8,colormap_length:g[f++]|g[f++]<<8,colormap_size:g[f++],origin:[g[f++]|g[f++]<<8,g[f++]|g[f++]<<8],width:g[f++]|g[f++]<<8,height:g[f++]|g[f++]<<8,pixel_size:g[f++],flags:g[f++]};if(function(e){switch(e.image_type){case n:case r:if(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case i:case o:case a:case s:if(e.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:throw new Error("THREE.TGALoader: No data.");default:throw new Error("THREE.TGALoader: Invalid type "+e.image_type)}if(e.width<=0||e.height<=0)throw new Error("THREE.TGALoader: Invalid image size.");if(8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size)throw new Error("THREE.TGALoader: Invalid pixel size "+e.pixel_size)}(m),m.id_length+f>e.length)throw new Error("THREE.TGALoader: No data.");f+=m.id_length;let _=!1,v=!1,b=!1;switch(m.image_type){case r:_=!0,v=!0;break;case n:v=!0;break;case a:_=!0;break;case i:break;case s:_=!0,b=!0;break;case o:b=!0}const T=new Uint8Array(m.width*m.height*4),A=function(e,t,n,i,o){let r,a;const s=n.pixel_size>>3,l=n.width*n.height*s;if(t&&(a=o.subarray(i,i+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;r=new Uint8Array(l);let a=0;const c=new Uint8Array(s);for(;a<l;)if(e=o[i++],t=1+(127&e),128&e){for(n=0;n<s;++n)c[n]=o[i++];for(n=0;n<t;++n)r.set(c,a+n*s);a+=s*t}else{for(t*=s,n=0;n<t;++n)r[a+n]=o[i++];a+=t}}else r=o.subarray(i,i+=t?n.width*n.height:l);return{pixel_data:r,palettes:a}}(_,v,m,f,g);return function(e,t,n,i,o){let r,a,s,f,g,_;switch((m.flags&l)>>c){default:case h:r=0,s=1,g=t,a=0,f=1,_=n;break;case u:r=0,s=1,g=t,a=n-1,f=-1,_=-1;break;case p:r=t-1,s=-1,g=-1,a=0,f=1,_=n;break;case d:r=t-1,s=-1,g=-1,a=n-1,f=-1,_=-1}if(b)switch(m.pixel_size){case 8:!function(e,t,n,i,o,r,a,s){let l,c,u,d=0;const h=m.width;for(u=t;u!==i;u+=n)for(c=o;c!==a;c+=r,d++)l=s[d],e[4*(c+h*u)+0]=l,e[4*(c+h*u)+1]=l,e[4*(c+h*u)+2]=l,e[4*(c+h*u)+3]=255}(e,a,f,_,r,s,g,i);break;case 16:!function(e,t,n,i,o,r,a,s){let l,c,u=0;const d=m.width;for(c=t;c!==i;c+=n)for(l=o;l!==a;l+=r,u+=2)e[4*(l+d*c)+0]=s[u+0],e[4*(l+d*c)+1]=s[u+0],e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+3]=s[u+1]}(e,a,f,_,r,s,g,i);break;default:throw new Error("THREE.TGALoader: Format not supported.")}else switch(m.pixel_size){case 8:!function(e,t,n,i,o,r,a,s,l){const c=l;let u,d,h,p=0;const f=m.width;for(h=t;h!==i;h+=n)for(d=o;d!==a;d+=r,p++)u=s[p],e[4*(d+f*h)+3]=255,e[4*(d+f*h)+2]=c[3*u+0],e[4*(d+f*h)+1]=c[3*u+1],e[4*(d+f*h)+0]=c[3*u+2]}(e,a,f,_,r,s,g,i,o);break;case 16:!function(e,t,n,i,o,r,a,s){let l,c,u,d=0;const h=m.width;for(u=t;u!==i;u+=n)for(c=o;c!==a;c+=r,d+=2)l=s[d+0]+(s[d+1]<<8),e[4*(c+h*u)+0]=(31744&l)>>7,e[4*(c+h*u)+1]=(992&l)>>2,e[4*(c+h*u)+2]=(31&l)<<3,e[4*(c+h*u)+3]=32768&l?0:255}(e,a,f,_,r,s,g,i);break;case 24:!function(e,t,n,i,o,r,a,s){let l,c,u=0;const d=m.width;for(c=t;c!==i;c+=n)for(l=o;l!==a;l+=r,u+=3)e[4*(l+d*c)+3]=255,e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+1]=s[u+1],e[4*(l+d*c)+0]=s[u+2]}(e,a,f,_,r,s,g,i);break;case 32:!function(e,t,n,i,o,r,a,s){let l,c,u=0;const d=m.width;for(c=t;c!==i;c+=n)for(l=o;l!==a;l+=r,u+=4)e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+1]=s[u+1],e[4*(l+d*c)+0]=s[u+2],e[4*(l+d*c)+3]=s[u+3]}(e,a,f,_,r,s,g,i);break;default:throw new Error("THREE.TGALoader: Format not supported.")}}(T,m.width,m.height,A.pixel_data,A.palettes),{data:T,width:m.width,height:m.height,flipY:!0,generateMipmaps:!0,minFilter:LinearMipmapLinearFilter}}}class ColladaLoader extends Loader{load(t,n,i,o){const r=this,a=""===r.path?LoaderUtils.extractUrlBase(t):r.path,s=new FileLoader(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,(function(i){try{n(r.parse(i,a))}catch(e){o?o(e):console.error(e),r.manager.itemError(t)}}),i,o)}parse(e,t){function n(e,t){const n=[],i=e.childNodes;for(let o=0,r=i.length;o<r;o++){const e=i[o];e.nodeName===t&&n.push(e)}return n}function i(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=t[i];return n}function o(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=parseFloat(t[i]);return n}function r(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=parseInt(t[i]);return n}function a(e){return e.substring(1)}function s(e){return 0===Object.keys(e).length}function l(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function c(e){return void 0!==e?e.textContent:"Y_UP"}function u(e,t,i,o){const r=n(e,t)[0];if(void 0!==r){const e=n(r,i);for(let t=0;t<e.length;t++)o(e[t])}}function d(e,t){for(const n in e){e[n].build=t(e[n])}}function h(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function p(e){const t={inputs:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"input"===i.nodeName){const e=a(i.getAttribute("source")),n=i.getAttribute("semantic");t.inputs[n]=e}}return t}function f(e){const t={};let n=e.getAttribute("target").split("/");const i=n.shift();let o=n.shift();const r=-1!==o.indexOf("("),s=-1!==o.indexOf(".");if(s)n=o.split("."),o=n.shift(),t.member=n.shift();else if(r){const e=o.split("(");o=e.shift();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t].replace(/\)/,""));t.indices=e}return t.id=i,t.sid=o,t.arraySyntax=r,t.memberSyntax=s,t.sampler=a(e.getAttribute("source")),t}function g(e){const t=[],n=e.channels,i=e.samplers,o=e.sources;for(const r in n)if(n.hasOwnProperty(r)){const e=n[r],a=i[e.sampler],s=a.inputs.INPUT,l=a.inputs.OUTPUT;A(_(e,o[s],o[l]),t)}return t}function m(e){return h(Ke.animations[e],g)}function _(e,t,n){const i=Ke.nodes[e.id],o=Ne(i.id),r=i.transforms[e.sid],a=i.matrix.clone().transpose();let s,l,c,u,d,h;const p={};switch(r){case"matrix":for(c=0,u=t.array.length;c<u;c++)if(s=t.array[c],l=c*n.stride,void 0===p[s]&&(p[s]={}),!0===e.arraySyntax){const t=n.array[l],i=e.indices[0]+4*e.indices[1];p[s][i]=t}else for(d=0,h=n.stride;d<h;d++)p[s][d]=n.array[l+d];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',r)}const f=function(e,t){const n=[];for(const o in e)n.push({time:parseFloat(o),value:e[o]});n.sort(i);for(let o=0;o<16;o++)y(n,o,t.elements[o]);return n;function i(e,t){return e.time-t.time}}(p,a);return{name:o.uuid,keyframes:f}}const v=new Vector3,b=new Vector3,T=new Quaternion;function A(e,t){const n=e.keyframes,i=e.name,o=[],r=[],a=[],s=[];for(let l=0,c=n.length;l<c;l++){const e=n[l],t=e.time,i=e.value;Ce.fromArray(i).transpose(),Ce.decompose(v,T,b),o.push(t),r.push(v.x,v.y,v.z),a.push(T.x,T.y,T.z,T.w),s.push(b.x,b.y,b.z)}return r.length>0&&t.push(new VectorKeyframeTrack(i+".position",o,r)),a.length>0&&t.push(new QuaternionKeyframeTrack(i+".quaternion",o,a)),s.length>0&&t.push(new VectorKeyframeTrack(i+".scale",o,s)),t}function y(e,t,n){let i,o,r,a=!0;for(o=0,r=e.length;o<r;o++)i=e[o],void 0===i.value[t]?i.value[t]=null:a=!1;if(!0===a)for(o=0,r=e.length;o<r;o++)i=e[o],i.value[t]=n;else!function(e,t){let n,i;for(let o=0,r=e.length;o<r;o++){const r=e[o];if(null===r.value[t]){if(n=E(e,o,t),i=S(e,o,t),null===n){r.value[t]=i.value[t];continue}if(null===i){r.value[t]=n.value[t];continue}C(r,n,i,t)}}}(e,t)}function E(e,t,n){for(;t>=0;){const i=e[t];if(null!==i.value[n])return i;t--}return null}function S(e,t,n){for(;t<e.length;){const i=e[t];if(null!==i.value[n])return i;t++}return null}function C(e,t,n,i){n.time-t.time!=0?e.value[i]=(e.time-t.time)*(n.value[i]-t.value[i])/(n.time-t.time)+t.value[i]:e.value[i]=t.value[i]}function w(e){const t=[],n=e.name,i=e.end-e.start||-1,o=e.animations;for(let r=0,a=o.length;r<a;r++){const e=m(o[r]);for(let n=0,i=e.length;n<i;n++)t.push(e[n])}return new AnimationClip(n,i,t)}function x(e){return h(Ke.clips[e],w)}function M(e){const t={sources:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=o(i.textContent);break;case"source":const e=i.getAttribute("id");t.sources[e]=re(i);break;case"joints":t.joints=R(i);break;case"vertex_weights":t.vertexWeights=I(i)}}return t}function R(e){const t={inputs:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"input"===i.nodeName){const e=i.getAttribute("semantic"),n=a(i.getAttribute("source"));t.inputs[e]=n}}return t}function I(e){const t={inputs:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":const e=i.getAttribute("semantic"),n=a(i.getAttribute("source")),o=parseInt(i.getAttribute("offset"));t.inputs[e]={id:n,offset:o};break;case"vcount":t.vcount=r(i.textContent);break;case"v":t.v=r(i.textContent)}}return t}function D(e){const t={id:e.id},n=Ke.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){const t=4,n={joints:[],indices:{array:[],stride:t},weights:{array:[],stride:t}},i=e.sources,o=e.vertexWeights,r=o.vcount,a=o.v,s=o.inputs.JOINT.offset,l=o.inputs.WEIGHT.offset,c=e.sources[e.joints.inputs.JOINT],u=e.sources[e.joints.inputs.INV_BIND_MATRIX],d=i[o.inputs.WEIGHT.id].array;let h,p,f,g=0;for(h=0,f=r.length;h<f;h++){const e=r[h],i=[];for(p=0;p<e;p++){const e=a[g+s],t=d[a[g+l]];i.push({index:e,weight:t}),g+=2}for(i.sort(m),p=0;p<t;p++){const e=i[p];void 0!==e?(n.indices.array.push(e.index),n.weights.array.push(e.weight)):(n.indices.array.push(0),n.weights.array.push(0))}}e.bindShapeMatrix?n.bindMatrix=(new Matrix4).fromArray(e.bindShapeMatrix).transpose():n.bindMatrix=(new Matrix4).identity();for(h=0,f=c.array.length;h<f;h++){const e=c.array[h],t=(new Matrix4).fromArray(u.array,h*u.stride).transpose();n.joints.push({name:e,boneInverse:t})}return n;function m(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function k(e){return void 0!==e.build?e.build:e.init_from}function L(e){const t=Ke.images[e];return void 0!==t?h(t,k):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function O(e){const t={surfaces:{},samplers:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"newparam":P(i,t);break;case"technique":t.technique=B(i);break;case"extra":t.extra=W(i)}}return t}function P(e,t){const n=e.getAttribute("sid");for(let i=0,o=e.childNodes.length;i<o;i++){const o=e.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[n]=N(o);break;case"sampler2D":t.samplers[n]=$(o)}}}function N(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"init_from"===i.nodeName)t.init_from=i.textContent}return t}function $(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"source"===i.nodeName)t.source=i.textContent}return t}function B(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=F(i);break;case"extra":t.extra=W(i)}}return t}function F(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[i.nodeName]=U(i);break;case"transparent":t[i.nodeName]={opaque:i.hasAttribute("opaque")?i.getAttribute("opaque"):"A_ONE",data:U(i)}}}return t}function U(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"color":t[i.nodeName]=o(i.textContent);break;case"float":t[i.nodeName]=parseFloat(i.textContent);break;case"texture":t[i.nodeName]={id:i.getAttribute("texture"),extra:G(i)}}}return t}function G(e){const t={technique:{}};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"extra"===i.nodeName)V(i,t)}return t}function V(e,t){for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"technique"===i.nodeName)H(i,t)}}function H(e,t){for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent);break;case"bump":t[i.nodeName]=j(i)}}}function W(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"technique"===i.nodeName)t.technique=z(i)}return t}function z(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent);break;case"bump":t[i.nodeName]=j(i)}}return t}function j(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"texture"===i.nodeName)t[i.nodeName]={id:i.getAttribute("texture"),texcoord:i.getAttribute("texcoord"),extra:G(i)}}return t}function X(e){return e}function Y(e){const t=(n=e.url,h(Ke.effects[n],X));var n;const i=t.profile.technique;let o;switch(i.type){case"phong":case"blinn":o=new MeshPhongMaterial;break;case"lambert":o=new MeshLambertMaterial;break;default:o=new MeshBasicMaterial}function r(e,n=null){const i=t.profile.samplers[e.id];let o=null;if(void 0!==i){o=L(t.profile.surfaces[i.source].init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),o=L(e.id);if(null!==o){const t=function(e){let t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));n=n.toLowerCase(),t="tga"===n?ze:We;return t}(o);if(void 0!==t){const i=t.load(o),r=e.extra;if(void 0!==r&&void 0!==r.technique&&!1===s(r.technique)){const e=r.technique;i.wrapS=e.wrapU?RepeatWrapping:ClampToEdgeWrapping,i.wrapT=e.wrapV?RepeatWrapping:ClampToEdgeWrapping,i.offset.set(e.offsetU||0,e.offsetV||0),i.repeat.set(e.repeatU||1,e.repeatV||1)}else i.wrapS=RepeatWrapping,i.wrapT=RepeatWrapping;return null!==n&&(i.colorSpace=n),i}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",o),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}o.name=e.name||"";const a=i.parameters;for(const s in a){const e=a[s];switch(s){case"diffuse":e.color&&o.color.fromArray(e.color),e.texture&&(o.map=r(e.texture,SRGBColorSpace));break;case"specular":e.color&&o.specular&&o.specular.fromArray(e.color),e.texture&&(o.specularMap=r(e.texture));break;case"bump":e.texture&&(o.normalMap=r(e.texture));break;case"ambient":e.texture&&(o.lightMap=r(e.texture,SRGBColorSpace));break;case"shininess":e.float&&o.shininess&&(o.shininess=e.float);break;case"emission":e.color&&o.emissive&&o.emissive.fromArray(e.color),e.texture&&(o.emissiveMap=r(e.texture,SRGBColorSpace))}}o.color.convertSRGBToLinear(),o.specular&&o.specular.convertSRGBToLinear(),o.emissive&&o.emissive.convertSRGBToLinear();let l=a.transparent,c=a.transparency;if(void 0===c&&l&&(c={float:1}),void 0===l&&c&&(l={opaque:"A_ONE",data:{color:[1,1,1,1]}}),l&&c)if(l.data.texture)o.transparent=!0;else{const e=l.data.color;switch(l.opaque){case"A_ONE":o.opacity=e[3]*c.float;break;case"RGB_ZERO":o.opacity=1-e[0]*c.float;break;case"A_ZERO":o.opacity=1-e[3]*c.float;break;case"RGB_ONE":o.opacity=e[0]*c.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',l.opaque)}o.opacity<1&&(o.transparent=!0)}if(void 0!==i.extra&&void 0!==i.extra.technique){const e=i.extra.technique;for(const t in e){const n=e[t];switch(t){case"double_sided":o.side=1===n?DoubleSide:FrontSide;break;case"bump":o.normalMap=r(n.texture),o.normalScale=new Vector2(1,1)}}}return o}function q(e){return h(Ke.materials[e],Y)}function K(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if("technique_common"===n.nodeName)return Q(n)}return{}}function Q(e){const t={};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];switch(i.nodeName){case"perspective":case"orthographic":t.technique=i.nodeName,t.parameters=Z(i)}}return t}function Z(e){const t={};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];switch(i.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[i.nodeName]=parseFloat(i.textContent)}}return t}function J(e){let t;switch(e.optics.technique){case"perspective":t=new PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":let n=e.optics.parameters.ymag,i=e.optics.parameters.xmag;const o=e.optics.parameters.aspect_ratio;i=void 0===i?n*o:i,n=void 0===n?i/o:n,i*=.5,n*=.5,t=new OrthographicCamera(-i,i,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new PerspectiveCamera}return t.name=e.name||"",t}function ee(e){const t=Ke.cameras[e];return void 0!==t?h(t,J):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function te(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=ne(i)}}return t}function ne(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"color":const e=o(i.textContent);t.color=(new Color).fromArray(e).convertSRGBToLinear();break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":const n=parseFloat(i.textContent);t.distance=n?Math.sqrt(1/n):0}}return t}function ie(e){let t;switch(e.technique){case"directional":t=new DirectionalLight;break;case"point":t=new PointLight;break;case"spot":t=new SpotLight;break;case"ambient":t=new AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function oe(e){const t=Ke.lights[e];return void 0!==t?h(t,ie):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function re(e){const t={array:[],stride:3};for(let r=0;r<e.childNodes.length;r++){const a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=o(a.textContent);break;case"Name_array":t.array=i(a.textContent);break;case"technique_common":const e=n(a,"accessor")[0];void 0!==e&&(t.stride=parseInt(e.getAttribute("stride")))}}return t}function ae(e){const t={};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];1===i.nodeType&&(t[i.getAttribute("semantic")]=a(i.getAttribute("source")))}return t}function se(e){const t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":const e=a(i.getAttribute("source")),n=i.getAttribute("semantic"),o=parseInt(i.getAttribute("offset")),s=parseInt(i.getAttribute("set")),l=s>0?n+s:n;t.inputs[l]={id:e,offset:o},t.stride=Math.max(t.stride,o+1),"TEXCOORD"===n&&(t.hasUV=!0);break;case"vcount":t.vcount=r(i.textContent);break;case"p":t.p=r(i.textContent)}}return t}function le(e){let t=0;for(let n=0,i=e.length;n<i;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ce(e){const t={},n=e.sources,i=e.vertices,o=e.primitives;if(0===o.length)return{};const r=function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];void 0===t[i.type]&&(t[i.type]=[]),t[i.type].push(i)}return t}(o);for(const a in r){const e=r[a];le(e),t[a]=ue(e,n,i)}return t}function ue(e,t,n){const i={},o={array:[],stride:0},r={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},c=[],u=4,d=[],h=4,p=new BufferGeometry,f=[];let g=0;for(let m=0;m<e.length;m++){const i=e[m],u=i.inputs;let h=0;switch(i.type){case"lines":case"linestrips":h=2*i.count;break;case"triangles":h=3*i.count;break;case"polylist":for(let e=0;e<i.count;e++){const t=i.vcount[e];switch(t){case 3:h+=3;break;case 4:h+=6;break;default:h+=3*(t-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",i.type)}p.addGroup(g,h,m),g+=h,i.material&&f.push(i.material);for(const p in u){const h=u[p];switch(p){case"VERTEX":for(const u in n){const p=n[u];switch(u){case"POSITION":const n=o.array.length;if(de(i,t[p],h.offset,o.array),o.stride=t[p].stride,t.skinWeights&&t.skinIndices&&(de(i,t.skinIndices,h.offset,c),de(i,t.skinWeights,h.offset,d)),!1===i.hasUV&&!0===e.uvsNeedsFix){const e=(o.array.length-n)/o.stride;for(let t=0;t<e;t++)a.array.push(0,0)}break;case"NORMAL":de(i,t[p],h.offset,r.array),r.stride=t[p].stride;break;case"COLOR":de(i,t[p],h.offset,l.array),l.stride=t[p].stride;break;case"TEXCOORD":de(i,t[p],h.offset,a.array),a.stride=t[p].stride;break;case"TEXCOORD1":de(i,t[p],h.offset,s.array),a.stride=t[p].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',u)}}break;case"NORMAL":de(i,t[h.id],h.offset,r.array),r.stride=t[h.id].stride;break;case"COLOR":de(i,t[h.id],h.offset,l.array,!0),l.stride=t[h.id].stride;break;case"TEXCOORD":de(i,t[h.id],h.offset,a.array),a.stride=t[h.id].stride;break;case"TEXCOORD1":de(i,t[h.id],h.offset,s.array),s.stride=t[h.id].stride}}}return o.array.length>0&&p.setAttribute("position",new Float32BufferAttribute(o.array,o.stride)),r.array.length>0&&p.setAttribute("normal",new Float32BufferAttribute(r.array,r.stride)),l.array.length>0&&p.setAttribute("color",new Float32BufferAttribute(l.array,l.stride)),a.array.length>0&&p.setAttribute("uv",new Float32BufferAttribute(a.array,a.stride)),s.array.length>0&&p.setAttribute("uv1",new Float32BufferAttribute(s.array,s.stride)),c.length>0&&p.setAttribute("skinIndex",new Float32BufferAttribute(c,u)),d.length>0&&p.setAttribute("skinWeight",new Float32BufferAttribute(d,h)),i.data=p,i.type=e[0].type,i.materialKeys=f,i}function de(e,t,n,i,o=!1){const r=e.p,a=e.stride,s=e.vcount;function l(e){let t=r[e+n]*u;const a=t+u;for(;t<a;t++)i.push(c[t]);if(o){const e=i.length-u-1;je.setRGB(i[e+0],i[e+1],i[e+2]).convertSRGBToLinear(),i[e+0]=je.r,i[e+1]=je.g,i[e+2]=je.b}}const c=t.array,u=t.stride;if(void 0!==e.vcount){let e=0;for(let t=0,n=s.length;t<n;t++){const n=s[t];if(4===n){const t=e+1*a,n=e+2*a,i=e+3*a;l(e+0*a),l(t),l(i),l(t),l(n),l(i)}else if(3===n){const t=e+1*a,n=e+2*a;l(e+0*a),l(t),l(n)}else if(n>4)for(let t=1,i=n-2;t<=i;t++){const n=e+a*t,i=e+a*(t+1);l(e+0*a),l(n),l(i)}e+=a*n}}else for(let d=0,h=r.length;d<h;d+=a)l(d)}function he(e){return h(Ke.geometries[e],ce)}function pe(e){return void 0!==e.build?e.build:e}function fe(e,t){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"joint":t.joints[i.getAttribute("sid")]=ge(i);break;case"link":t.links.push(_e(i))}}}function ge(e){let t;for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"prismatic":case"revolute":t=me(i)}}return t}function me(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"axis":const e=o(i.textContent);t.axis.fromArray(e);break;case"limits":const n=i.getElementsByTagName("max")[0],r=i.getElementsByTagName("min")[0];t.limits.max=parseFloat(n.textContent),t.limits.min=parseFloat(r.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function _e(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"attachment_full":t.attachments.push(ve(i));break;case"matrix":case"translate":case"rotate":t.transforms.push(be(i))}}return t}function ve(e){const t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"link":t.links.push(_e(i));break;case"matrix":case"translate":case"rotate":t.transforms.push(be(i))}}return t}function be(e){const t={type:e.nodeName},n=o(e.textContent);switch(t.type){case"matrix":t.obj=new Matrix4,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new Vector3,t.obj.fromArray(n);break;case"rotate":t.obj=new Vector3,t.obj.fromArray(n),t.angle=MathUtils.degToRad(n[3])}return t}function Te(e,t){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType&&"technique_common"===i.nodeName)Ae(i,t)}}function Ae(e,t){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"inertia":t.inertia=o(i.textContent);break;case"mass":t.mass=o(i.textContent)[0]}}}function ye(e){const t={target:e.getAttribute("target").split("/").pop()};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType&&"axis"===i.nodeName){const e=i.getElementsByTagName("param")[0];t.axis=e.textContent;const n=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=n.substring(0,n.length-1)}}return t}function Ee(e){return void 0!==e.build?e.build:e}function Se(e){const t=[],n=Ue.querySelector('[id="'+e.id+'"]');for(let i=0;i<n.childNodes.length;i++){const e=n.childNodes[i];if(1!==e.nodeType)continue;let r,a;switch(e.nodeName){case"matrix":r=o(e.textContent);const n=(new Matrix4).fromArray(r).transpose();t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:n});break;case"translate":case"scale":r=o(e.textContent),a=(new Vector3).fromArray(r),t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:a});break;case"rotate":r=o(e.textContent),a=(new Vector3).fromArray(r);const i=MathUtils.degToRad(r[3]);t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:a,angle:i})}}return t}const Ce=new Matrix4,we=new Vector3;function xe(e){const t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1!==i.nodeType)continue;let r;switch(i.nodeName){case"node":t.nodes.push(i.getAttribute("id")),xe(i);break;case"instance_camera":t.instanceCameras.push(a(i.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Me(i));break;case"instance_light":t.instanceLights.push(a(i.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Me(i));break;case"instance_node":t.instanceNodes.push(a(i.getAttribute("url")));break;case"matrix":r=o(i.textContent),t.matrix.multiply(Ce.fromArray(r).transpose()),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"translate":r=o(i.textContent),we.fromArray(r),t.matrix.multiply(Ce.makeTranslation(we.x,we.y,we.z)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"rotate":r=o(i.textContent);const e=MathUtils.degToRad(r[3]);t.matrix.multiply(Ce.makeRotationAxis(we.fromArray(r),e)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"scale":r=o(i.textContent),t.matrix.scale(we.fromArray(r)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"extra":break;default:console.log(i)}}return Pe(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Ke.nodes[t.id]=t,t}function Me(e){const t={id:a(e.getAttribute("url")),materials:{},skeletons:[]};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];switch(i.nodeName){case"bind_material":const e=i.getElementsByTagName("instance_material");for(let n=0;n<e.length;n++){const i=e[n],o=i.getAttribute("symbol"),r=i.getAttribute("target");t.materials[o]=a(r)}break;case"skeleton":t.skeletons.push(a(i.textContent))}}return t}function Re(e,t){const n=[],i=[];let o,r,a;for(o=0;o<e.length;o++){const i=e[o];let r;if(Pe(i))r=Ne(i),Ie(r,t,n);else if(s=i,void 0!==Ke.visualScenes[s]){const e=Ke.visualScenes[i].children;for(let i=0;i<e.length;i++){const o=e[i];if("JOINT"===o.type){Ie(Ne(o.id),t,n)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",i)}var s;for(o=0;o<t.length;o++)for(r=0;r<n.length;r++)if(a=n[r],a.bone.name===t[o].name){i[o]=a,a.processed=!0;break}for(o=0;o<n.length;o++)a=n[o],!1===a.processed&&(i.push(a),a.processed=!0);const l=[],c=[];for(o=0;o<i.length;o++)a=i[o],l.push(a.bone),c.push(a.boneInverse);return new Skeleton(l,c)}function Ie(e,t,n){e.traverse((function(e){if(!0===e.isBone){let i;for(let n=0;n<t.length;n++){const o=t[n];if(o.name===e.name){i=o.boneInverse;break}}void 0===i&&(i=new Matrix4),n.push({bone:e,boneInverse:i,processed:!1})}}))}function De(e){const t=[],n=e.matrix,i=e.nodes,o=e.type,r=e.instanceCameras,a=e.instanceControllers,s=e.instanceLights,l=e.instanceGeometries,c=e.instanceNodes;for(let h=0,p=i.length;h<p;h++)t.push(Ne(i[h]));for(let h=0,p=r.length;h<p;h++){const e=ee(r[h]);null!==e&&t.push(e.clone())}for(let p=0,f=a.length;p<f;p++){const e=a[p],n=(u=e.id,h(Ke.controllers[u],D)),i=Oe(he(n.id),e.materials),o=Re(e.skeletons,n.skin.joints);for(let r=0,a=i.length;r<a;r++){const e=i[r];e.isSkinnedMesh&&(e.bind(o,n.skin.bindMatrix),e.normalizeSkinWeights()),t.push(e)}}var u;for(let h=0,p=s.length;h<p;h++){const e=oe(s[h]);null!==e&&t.push(e.clone())}for(let h=0,p=l.length;h<p;h++){const e=l[h],n=Oe(he(e.id),e.materials);for(let i=0,o=n.length;i<o;i++)t.push(n[i])}for(let h=0,p=c.length;h<p;h++)t.push(Ne(c[h]).clone());let d;if(0===i.length&&1===t.length)d=t[0];else{d="JOINT"===o?new Bone:new Group$2;for(let e=0;e<t.length;e++)d.add(t[e])}return d.name="JOINT"===o?e.sid:e.name,d.matrix.copy(n),d.matrix.decompose(d.position,d.quaternion,d.scale),d}const ke=new MeshBasicMaterial({name:Loader.DEFAULT_MATERIAL_NAME,color:16711935});function Le(e,t){const n=[];for(let i=0,o=e.length;i<o;i++){const o=t[e[i]];void 0===o?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[i]),n.push(ke)):n.push(q(o))}return n}function Oe(e,t){const n=[];for(const i in e){const o=e[i],r=Le(o.materialKeys,t);if(0===r.length&&("lines"===i||"linestrips"===i?r.push(new LineBasicMaterial):r.push(new MeshPhongMaterial)),"lines"===i||"linestrips"===i)for(let e=0,t=r.length;e<t;e++){const t=r[e];if(!0===t.isMeshPhongMaterial||!0===t.isMeshLambertMaterial){const n=new LineBasicMaterial;n.color.copy(t.color),n.opacity=t.opacity,n.transparent=t.transparent,r[e]=n}}const a=void 0!==o.data.attributes.skinIndex,s=1===r.length?r[0]:r;let l;switch(i){case"lines":l=new LineSegments(o.data,s);break;case"linestrips":l=new Line$2(o.data,s);break;case"triangles":case"polylist":l=a?new SkinnedMesh(o.data,s):new Mesh(o.data,s)}n.push(l)}return n}function Pe(e){return void 0!==Ke.nodes[e]}function Ne(e){return h(Ke.nodes[e],De)}function $e(e){const t=new Group$2;t.name=e.name;const n=e.children;for(let i=0;i<n.length;i++){const e=n[i];t.add(Ne(e.id))}return t}function Be(e){return h(Ke.visualScenes[e],$e)}if(0===e.length)return{scene:new Scene};const Fe=(new DOMParser).parseFromString(e,"application/xml"),Ue=n(Fe,"COLLADA")[0],Ge=Fe.getElementsByTagName("parsererror")[0];if(void 0!==Ge){const e=n(Ge,"div")[0];let t;return t=e?e.textContent:function(e){let t="";const n=[e];for(;n.length;){const e=n.shift();e.nodeType===Node.TEXT_NODE?t+=e.textContent:(t+="\n",n.push.apply(n,e.childNodes))}return t.trim()}(Ge),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",t),null}const Ve=Ue.getAttribute("version");console.debug("THREE.ColladaLoader: File version",Ve);const He=function(e){return{unit:l(n(e,"unit")[0]),upAxis:c(n(e,"up_axis")[0])}}(n(Ue,"asset")[0]),We=new TextureLoader(this.manager);let ze;We.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),TGALoader&&(ze=new TGALoader(this.manager),ze.setPath(this.resourcePath||t));const je=new Color,Xe=[];let Ye={},qe=0;const Ke={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};u(Ue,"library_animations","animation",(function e(t){const n={sources:{},samplers:{},channels:{}};let i=!1;for(let o=0,r=t.childNodes.length;o<r;o++){const r=t.childNodes[o];if(1!==r.nodeType)continue;let a;switch(r.nodeName){case"source":a=r.getAttribute("id"),n.sources[a]=re(r);break;case"sampler":a=r.getAttribute("id"),n.samplers[a]=p(r);break;case"channel":a=r.getAttribute("target"),n.channels[a]=f(r);break;case"animation":e(r),i=!0;break;default:console.log(r)}}!1===i&&(Ke.animations[t.getAttribute("id")||MathUtils.generateUUID()]=n)})),u(Ue,"library_animation_clips","animation_clip",(function(e){const t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"instance_animation"===i.nodeName)t.animations.push(a(i.getAttribute("url")))}Ke.clips[e.getAttribute("id")]=t})),u(Ue,"library_controllers","controller",(function(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=a(i.getAttribute("source")),t.skin=M(i);break;case"morph":t.id=a(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Ke.controllers[e.getAttribute("id")]=t})),u(Ue,"library_images","image",(function(e){const t={init_from:n(e,"init_from")[0].textContent};Ke.images[e.getAttribute("id")]=t})),u(Ue,"library_effects","effect",(function(e){const t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"profile_COMMON"===i.nodeName)t.profile=O(i)}Ke.effects[e.getAttribute("id")]=t})),u(Ue,"library_materials","material",(function(e){const t={name:e.getAttribute("name")};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"instance_effect"===i.nodeName)t.url=a(i.getAttribute("url"))}Ke.materials[e.getAttribute("id")]=t})),u(Ue,"library_cameras","camera",(function(e){const t={name:e.getAttribute("name")};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"optics"===i.nodeName)t.optics=K(i)}Ke.cameras[e.getAttribute("id")]=t})),u(Ue,"library_lights","light",(function(e){let t={};for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];if(1===i.nodeType&&"technique_common"===i.nodeName)t=te(i)}Ke.lights[e.getAttribute("id")]=t})),u(Ue,"library_geometries","geometry",(function(e){const t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},i=n(e,"mesh")[0];if(void 0!==i){for(let e=0;e<i.childNodes.length;e++){const n=i.childNodes[e];if(1!==n.nodeType)continue;const o=n.getAttribute("id");switch(n.nodeName){case"source":t.sources[o]=re(n);break;case"vertices":t.vertices=ae(n);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",n.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(se(n));break;default:console.log(n)}}Ke.geometries[e.getAttribute("id")]=t}})),u(Ue,"library_nodes","node",xe),u(Ue,"library_visual_scenes","visual_scene",(function(e){const t={name:e.getAttribute("name"),children:[]};!function(e){const t=e.getElementsByTagName("node");for(let n=0;n<t.length;n++){const e=t[n];!1===e.hasAttribute("id")&&e.setAttribute("id","three_default_"+qe++)}}(e);const i=n(e,"node");for(let n=0;n<i.length;n++)t.children.push(xe(i[n]));Ke.visualScenes[e.getAttribute("id")]=t})),u(Ue,"library_kinematics_models","kinematics_model",(function(e){const t={name:e.getAttribute("name")||"",joints:{},links:[]};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType&&"technique_common"===i.nodeName)fe(i,t)}Ke.kinematicsModels[e.getAttribute("id")]=t})),u(Ue,"library_physics_models","physics_model",(function(e){const t={name:e.getAttribute("name")||"",rigidBodies:{}};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType&&"rigid_body"===i.nodeName)t.rigidBodies[i.getAttribute("name")]={},Te(i,t.rigidBodies[i.getAttribute("name")])}Ke.physicsModels[e.getAttribute("id")]=t})),u(Ue,"scene","instance_kinematics_scene",(function(e){const t={bindJointAxis:[]};for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(1===i.nodeType&&"bind_joint_axis"===i.nodeName)t.bindJointAxis.push(ye(i))}Ke.kinematicsScenes[a(e.getAttribute("url"))]=t})),d(Ke.animations,g),d(Ke.clips,w),d(Ke.controllers,D),d(Ke.images,k),d(Ke.effects,X),d(Ke.materials,Y),d(Ke.cameras,J),d(Ke.lights,ie),d(Ke.geometries,ce),d(Ke.visualScenes,$e),function(){const e=Ke.clips;if(!0===s(e)){if(!1===s(Ke.animations)){const e=[];for(const t in Ke.animations){const n=m(t);for(let t=0,i=n.length;t<i;t++)e.push(n[t])}Xe.push(new AnimationClip("default",-1,e))}}else for(const t in e)Xe.push(x(t))}(),function(){const e=Object.keys(Ke.kinematicsModels)[0],t=Object.keys(Ke.kinematicsScenes)[0],n=Object.keys(Ke.visualScenes)[0];if(void 0===e||void 0===t)return;const i=(o=e,h(Ke.kinematicsModels[o],pe));var o;const r=function(e){return h(Ke.kinematicsScenes[e],Ee)}(t),a=Be(n),s=r.bindJointAxis,l={};for(let d=0,h=s.length;d<h;d++){const e=s[d],t=Ue.querySelector('[sid="'+e.target+'"]');if(t){const n=t.parentElement;c(e.jointIndex,n)}}function c(e,t){const n=t.getAttribute("name"),o=i.joints[e];a.traverse((function(i){i.name===n&&(l[e]={object:i,transforms:Se(t),joint:o,position:o.zeroPosition})}))}const u=new Matrix4;Ye={joints:i&&i.joints,getJointValue:function(e){const t=l[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){const n=l[e];if(n){const i=n.joint;if(t>i.limits.max||t<i.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+i.limits.min+", max: "+i.limits.max+").");else if(i.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{const o=n.object,r=i.axis,a=n.transforms;Ce.identity();for(let n=0;n<a.length;n++){const o=a[n];if(o.sid&&-1!==o.sid.indexOf(e))switch(i.type){case"revolute":Ce.multiply(u.makeRotationAxis(r,MathUtils.degToRad(t)));break;case"prismatic":Ce.multiply(u.makeTranslation(r.x*t,r.y*t,r.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+i.type)}else switch(o.type){case"matrix":Ce.multiply(o.obj);break;case"translate":Ce.multiply(u.makeTranslation(o.obj.x,o.obj.y,o.obj.z));break;case"scale":Ce.scale(o.obj);break;case"rotate":Ce.multiply(u.makeRotationAxis(o.obj,o.angle))}}o.matrix.copy(Ce),o.matrix.decompose(o.position,o.quaternion,o.scale),l[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}();const Qe=function(e){return Be(a(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(Ue,"scene")[0]);return Qe.animations=Xe,"Z_UP"===He.upAxis&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Qe.rotation.set(-Math.PI/2,0,0)),Qe.scale.multiplyScalar(He.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Xe},kinematics:Ye,library:Ke,scene:Qe}}}class STLLoader extends Loader{constructor(e){super(e)}load(t,n,i,o){const r=this,a=new FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(i){try{n(r.parse(i))}catch(e){o?o(e):console.error(e),r.manager.itemError(t)}}),i,o)}parse(e){function t(e,t,n){for(let i=0,o=e.length;i<o;i++)if(e[i]!==t.getUint8(n+i))return!1;return!0}const n=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){const n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;const i=[115,111,108,105,100];for(let o=0;o<5;o++)if(t(i,n,o))return!1;return!0}(n)?function(e){const t=new DataView(e),n=t.getUint32(80,!0);let i,o,r,a,s,l,c,u,d=!1;for(let m=0;m<70;m++)1129270351==t.getUint32(m,!1)&&82==t.getUint8(m+4)&&61==t.getUint8(m+5)&&(d=!0,a=new Float32Array(3*n*3),s=t.getUint8(m+6)/255,l=t.getUint8(m+7)/255,c=t.getUint8(m+8)/255,u=t.getUint8(m+9)/255);const h=new BufferGeometry,p=new Float32Array(3*n*3),f=new Float32Array(3*n*3),g=new Color;for(let m=0;m<n;m++){const e=84+50*m,n=t.getFloat32(e,!0),u=t.getFloat32(e+4,!0),h=t.getFloat32(e+8,!0);if(d){const n=t.getUint16(e+48,!0);32768&n?(i=s,o=l,r=c):(i=(31&n)/31,o=(n>>5&31)/31,r=(n>>10&31)/31)}for(let s=1;s<=3;s++){const l=e+12*s,c=3*m*3+3*(s-1);p[c]=t.getFloat32(l,!0),p[c+1]=t.getFloat32(l+4,!0),p[c+2]=t.getFloat32(l+8,!0),f[c]=n,f[c+1]=u,f[c+2]=h,d&&(g.set(i,o,r).convertSRGBToLinear(),a[c]=g.r,a[c+1]=g.g,a[c+2]=g.b)}}return h.setAttribute("position",new BufferAttribute(p,3)),h.setAttribute("normal",new BufferAttribute(f,3)),d&&(h.setAttribute("color",new BufferAttribute(a,3)),h.hasColors=!0,h.alpha=u),h}(n):function(e){const t=new BufferGeometry,n=/solid([\s\S]*?)endsolid/g,i=/facet([\s\S]*?)endfacet/g,o=/solid\s(.+)/;let r=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+a+a+a,"g"),l=new RegExp("normal"+a+a+a,"g"),c=[],u=[],d=[],h=new Vector3;let p,f=0,g=0,m=0;for(;null!==(p=n.exec(e));){g=m;const e=p[0],n=null!==(p=o.exec(e))?p[1]:"";for(d.push(n);null!==(p=i.exec(e));){let e=0,t=0;const n=p[0];for(;null!==(p=l.exec(n));)h.x=parseFloat(p[1]),h.y=parseFloat(p[2]),h.z=parseFloat(p[3]),t++;for(;null!==(p=s.exec(n));)c.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),u.push(h.x,h.y,h.z),e++,m++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+r),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+r),r++}const a=g,_=m-g;t.userData.groupNames=d,t.addGroup(a,_,f),f++}return t.setAttribute("position",new Float32BufferAttribute(c,3)),t.setAttribute("normal",new Float32BufferAttribute(u,3)),t}("string"!=typeof(i=e)?(new TextDecoder).decode(i):i);var i}}var xzDecompress={exports:{}};
/*!
       * Based on xzwasm (c) Steve Sanderson. License: MIT - https://github.com/SteveSanderson/xzwasm
       * Contains xz-embedded by Lasse Collin and Igor Pavlov. License: Public domain - https://tukaani.org/xz/embedded.html
       * and walloc (c) 2020 Igalia, S.L. License: MIT - https://github.com/wingo/walloc
       */!function(e,t){var n;n=e=>(()=>{var t=[,e=>{e.exports="data:application/wasm;base64,AGFzbQEAAAABOApgAX8Bf2ABfwBgAABgA39/fwF/YAABf2ACf38AYAN/f34BfmACf38Bf2AEf39/fwF/YAN/f38AAyEgAAABAgMDAwMEAQUAAgMCBgcIBwUDAAMHAQcABwcBAwkFAwEAAgYIAX8BQfCgBAsHTgUGbWVtb3J5AgAOY3JlYXRlX2NvbnRleHQACA9kZXN0cm95X2NvbnRleHQACQxzdXBwbHlfaW5wdXQACg9nZXRfbmV4dF9vdXRwdXQACwqNYCDfAgEFf0EAIQECQCAAQQdqIgJBEEkNAEEBIQEgAkEDdiIDQQJGDQBBAiEBIAJBIEkNAEEDIQEgA0EERg0AQQQhASACQTBJDQBBBSEBIANBBkYNAEEGIQEgAkHIAEkNAEEHIQEgAkHYAEkNAEEIIQEgAkGIAUkNAEEJIQEgAkGIAkkNACAAEIGAgIAAIgBBCGpBACAAGw8LAkACQCABQQJ0QcCIgIAAaiIEKAIAIgANAEEAIQACQAJAQQAoAuSIgIAAIgJFDQBBACACKAIANgLkiICAAAwBC0EAEIGAgIAAIgJFDQILIAJBgIB8cSIAIAJBCHZB/wFxIgJyIAE6AAAgAkEIdCAAckGAAmohAEEAIQJBACABQQJ0QYCIgIAAaigCACIDayEFIAMhAQNAIAAgBWoiACACNgIAIAAhAiABIANqIgFBgQJJDQALIAQgADYCAAsgBCAAKAIANgIACyAAC+4HAQd/AkACQAJAAkACQEEALQC0iICAAEUNAEEAQQA6ALSIgIAAQQAoArCIgIAAIgFFDQFBsIiAgAAhAgNAAkACQCABQQhqIgMgASgCBCIEaiIFQQh2Qf8BcSIGDQAgASECDAELAkADQCAFQYCAfHEgBmotAABB/gFHDQFBsIiAgAAhBgNAIAYiBygCACIGIAVHDQALIAcgBSgCADYCACABIAQgBSgCBGpBCGoiBDYCBCAHIAIgAiAFRhshAiADIARqIgVBCHZB/wFxIgYNAAsLIAIoAgAhAgsgAigCACIBDQALC0EAKAKwiICAACIFRQ0AIABBhwJqQYB+cSEDQX8hAkGwiICAACEEQQAhAUGwiICAACEGA0AgBiEHAkAgBSIGKAIEIgUgAEkNACAFIAJPDQAgBSECIAchBCAGIQEgBUEIaiADRw0AIAchBCAFIQIgBiEBDAQLIAYoAgAiBQ0ACyABDQIMAQtBsIiAgAAhBAs/AEEQdCEBIABBiAJqIQdBACEDAkACQEEAKAK4iICAACICRQ0AQQAhBSABIQYMAQtBACABQfCghIAAQf//A2pBgIB8cSIGayICNgK4iICAACACIQULAkAgByAFTQ0AIAcgBWsiByACQQF2IgIgAiAHSRtB//8DaiIHQRB2QABBf0YNAkEAQQAoAriIgIAAIAdBgIB8cSIDajYCuIiAgAALIAZFDQEgBkH/AToAASAGQQAoArCIgIAANgKAAiAGQYQCaiADIAVqQYCAfHFB+H1qIgI2AgAgBkGAAmohAQsgAUGAgHxxIgYgAUEIdkH/AXFyQf8BOgAAIAQgASgCADYCAAJAIAIgAGtBgH5xIgUNACABDwsgASEDAkAgBiABQQhqIgQgAmoiByAFQX9zakGAgHxxRg0AIARB//8DcSEFAkAgAEH3/QNLDQAgBiAEQQh2Qf8BcWpB/gE6AAAgAUEAKAKwiICAADYCACABQYCABCAFayIFNgIEQQAgATYCsIiAgAAQg4CAgAAgBkGEggRqIAIgBWtB+H1qIgU2AgAgBkGBgARqQf8BOgAAIAZBgIIEaiEDIAUgAGtBgH5xIQUMAQsgAiAFaiAAIAVqQX9qQYCAfHFrQYCAfGohBSABIQMLIAMgAygCBCAFazYCBCAFQfgBaiEGIAcgBWtBCHZB/wFxIQUCQANAIAYiB0GAfmohBiAFIgQNAUEBIQUgB0H4AUcNAAsLAkAgB0H4AUYNACACIAFqIAZrQYCAfHEiBSAEakH+AToAACAFIARBCHRqIgVBACgCsIiAgAA2AgAgBSAGNgIEQQAgBTYCsIiAgAAQg4CAgAALIAMPC0EAC3wBAn8CQCAARQ0AAkAgAEGAgHxxIABBCHZB/wFxciIBLQAAIgJB/wFHDQAgAEF4aiIAQQAoArCIgIAANgIAQQAgADYCsIiAgAAgAUH+AToAAEEAQQE6ALSIgIAADwsgACACQQJ0QcCIgIAAaiICKAIANgIAIAIgADYCAAsLawECfwJAQQAoArCIgIAAIgAoAgRB/wFLDQAgAEGAgHxxIgEgAEEIdkH/AXEiAHJBCToAAEEAQQAoArCIgIAAKAIANgKwiICAACABIABBCHRyIgBBACgC5IiAgAA2AgBBACAANgLkiICAAAsLTgECfwJAIAAgAUYNACACRQ0AA0ACQCAALQAAIgMgAS0AACIERg0AQQFBfyADIARLGw8LIAFBAWohASAAQQFqIQAgAkF/aiICDQALC0EAC3gBAX8CQAJAIAAgAU8NACACRQ0BIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ADAILCyAAIAFNDQAgAkUNACABQX9qIQEgAEF/aiEDA0AgAyACaiABIAJqLQAAOgAAIAJBf2oiAg0ACwsgAAssAQF/AkAgAkUNACAAIQMDQCADIAE6AAAgA0EBaiEDIAJBf2oiAg0ACwsgAAuCAQEBfwJAAkAgAEEDcQ0AIAEgAnJBA3ENACACQQRJDQEgAkECdiECIAAhAwNAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIAJBf2oiAg0ADAILCyACRQ0AIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ACwsgAAuIAQECfwJAQQAtAOiIgIAADQBBAEEBOgDoiICAABCMgICAABCOgICAAAtBoIAIEICAgIAAIgBBgIAENgIAQQJBgICAIBCXgICAACEBIABBFGpCgICAgICAwAA3AgAgAEEQaiAAQaCABGo2AgAgAEEIakIANwMAIAAgAEEgajYCBCAAIAE2AhwgAAsVACAAKAIcEJiAgIAAIAAQgoCAgAALFgAgAEEMaiABNgIAIABBCGpBADYCAAsbACAAKAIcIABBBGogAEEMaigCAEUQloCAgAALVAEDf0EAIQADQEEIIQEgACECA0BBACACQQFxa0GghuLtfnEgAkEBdnMhAiABQX9qIgENAAsgAEECdEHwiICAAGogAjYCACAAQQFqIgBBgAJHDQALC0oAIAJBf3MhAgJAIAFFDQADQCACQf8BcSAALQAAc0ECdEHwiICAAGooAgAgAkEIdnMhAiAAQQFqIQAgAUF/aiIBDQALCyACQX9zC10DAX4BfwF+QgAhAANAQQghASAAIQIDQEIAIAJCAYN9QsKenLzd8pW2SYMgAkIBiIUhAiABQX9qIgENAAsgAKdBA3RB8JCAgABqIAI3AwAgAEIBfCIAQoACUg0ACwtLACACQn+FIQICQCABRQ0AA0AgAkL/AYMgADEAAIWnQQN0QfCQgIAAaikDACACQgiIhSECIABBAWohACABQX9qIgENAAsLIAJCf4UL1RACDH8CfgJAAkAgACgCJEUNACAAKAIAIQIMAQtBACECIABBADoAKCAAQgA3AwAgAEIANwMYIABByABqQQBB5AAQhoCAgAAaIABBrAFqQQw2AgALIAAgASgCBCIDNgIQIABBsAFqIQQgAEHgAGohBSAAQcgAaiEGIABBtgFqIQcgAEGoAWohCCABKAIQIQkCQAJAAkACQANAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIOCgECAAQFBgcICQoPCyABKAIAIQogACgCqAEhAiAAKAKsASELIAEoAgQhDCABKAIIIQ0MAgsgCCAAKAKoASIMakEIaiABKAIAIAEoAgQiAmogASgCCCACayICIAAoAqwBIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0RIABBATYCAAJAIARBqIiAgABBBhCEgICAAEUNAEEFIQwMEgsgB0ECQQAQjYCAgAAgACgAuAFHDRBBBiEMIActAAANESAAIAAtALcBIgI2AiAgAkEESw0RQQEgAnRBE3FFDRELIAEoAgQiDCABKAIIIg1GDQ4CQCABKAIAIgogDGotAAAiCw0AIAAgDDYCECABIAxBAWo2AgRBBiECDAwLQQAhAiAAQQA2AqgBIABBAjYCACAAIAtBAnRBBGoiCzYCrAEgACALNgJACyAIIAJqQQhqIAogDGogDSAMayIMIAsgAmsiAiAMIAJJGyICEIeAgIAAGiABIAIgASgCBGo2AgRBACEMIABBACAAKAKoASACaiICIAIgACgCrAEiC0YbNgKoASACIAtHDQ8gACACQXxqIgI2AqwBQQchDCAEIAJBABCNgICAACAAIAAoAqwBIgtqQbABaigAAEcNDyAAQQI2AqgBIAAtALEBIgJBP3ENDAJAAkAgAkHAAHFFDQAgACAEIAggCxCRgICAAEEBRw0RIAAgACkDCDcDMCAALQCxASECDAELIABCfzcDMAtCfyEOAkAgAkEYdEEYdUF/Sg0AIAAgBCAIIAAoAqwBEJGAgIAAQQFHDRAgACkDCCEOCyAAIA43AzggACgCrAEiDSAAKAKoASICa0ECSQ0PIAAgAkEBaiIKNgKoASAIIAJqQQhqLQAAQSFHDQwgACACQQJqIgs2AqgBIAggCmpBCGotAABBAUcNDCANIAtGDQ8gACACQQNqNgKoASAAKAKwCSAIIAtqQQhqLQAAEJyAgIAAIgwNDyAAKAKoASIMIAAoAqwBIgIgDCACSxshDQJAA0AgDSAMRg0BIAggDEEBaiICNgIAIAQgDGohCyACIQwgCy0AAA0ODAALCyAGQgA3AwAgAEEANgKoASAAQQM2AgAgBkEIakIANwMACyAAIAEoAgQ2AhAgACABKAIQNgIUIAAoArAJIAEQmYCAgAAhDCAAIAApA0ggASgCBCAAKAIQa618Ig43A0ggACAAKQNQIAEoAhAgACgCFCICayILrXwiDzcDUCAOIAApAzBWDQ0gDyAAKQM4Vg0NAkACQAJAAkAgACgCIEF/ag4EAAMDAQMLIAEoAgwgAmogCyAAKAIYEI2AgIAArSEODAELIAEoAgwgAmogCyAAKQMYEI+AgIAAIQ4LIAAgDjcDGAsgDEEBRw0OAkAgACkDMCIOQn9RDQAgDiAGKQMAUg0OCwJAIAApAzgiDkJ/UQ0AQQchDCAOIAApA1BSDQ8LIAAgACkDSCAANQJAfCAAKQNgfCIPNwNgQgQhDgJAAkACQCAAKAIgQX9qDgQBAgIAAgtCCCEOCyAFIA4gD3w3AwALIAAgACkDaCAAKQNQfDcDaCAAIAVBGCAAKAJwEI2AgIAANgJwIABBBDYCACAAIAApA1hCAXw3A1gLAkAgBikDACIOQgODUA0AIA5CAXwhDiABKAIEIQwgASgCCCELA0AgCyAMRg0NIAEgDEEBaiICNgIEIAEoAgAgDGotAAANDiAGIA43AwAgDkIDgyEPIA5CAXwhDiACIQwgD0IAUg0ACwsgAEEFNgIAC0EBIQIgACgCIEF/ag4EBgcHBQcLIAAgARCSgICAACIMQQFHDQsgAEEHNgIAC0EAIAAoAhBrIQggAEGAAWopAwAhDiABKAIEIQwCQANAIA4gCCAMaq18QgODUA0BAkAgDCABKAIIRw0AIAAgARCTgICAAAwLCyABIAxBAWoiAjYCBCABKAIAIAxqIQsgAiEMIAstAAANCwwACwsgACABEJOAgIAAQQchDCAFIABBkAFqQRgQhICAgAANCiAAQQg2AgALIAAgAUEgEJSAgIAAIgxBAUcNCSAAQQk2AgBBDCELIABBDDYCrAEMAQsgACgCrAEhCwsgAEGoAWogACgCqAEiDGpBCGogASgCACABKAIEIgJqIAEoAgggAmsiAiALIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0HIAAQlYCAgAAhDAwHC0EBIQIgACABQcAAEJSAgIAAIgxBAUcNBgwBC0EBIQIgACABQSAQlICAgAAiDEEBRw0FCyAAIAI2AgAMAAsLQQYhDAwCC0EAIQwMAQtBByEMCwJAAkAgACgCJA0AAkACQCAMDgIAAwELQQdBCCABKAIEIAEoAghGGyEMCyABIAk2AhAgASADNgIEIAwPCwJAIAwNACADIAEoAgRHDQAgCSABKAIQRw0AIAAtACghASAAQQE6ACggAUEDdA8LIABBADoAKAsgDAuaAQEDfwJAIAAoAgQiBA0AIABCADcDCAsgAigCACEFA0ACQCAFIANJDQBBAA8LIAEgBWotAAAhBiACIAVBAWoiBTYCACAAIAZB/wBxrSAErYYgACkDCIQ3AwgCQAJAIAZBgAFxDQACQCAGDQBBByEGIAQNAgsgAEEANgIEQQEPC0EHIQYgACAEQQdqIgQ2AgQgBEE/Rw0BCwsgBguhAgIDfwF+IABBkAFqIQIgAUEEaiEDA0ACQCAAIAEoAgAgAyABKAIIEJGAgIAAIgRBAUYNACAAQYABaiIDIAMpAwAgASgCBCAAKAIQIgNrIgKtfDcDACAAIAMgASgCAGogAiAAKAIYEI2AgIAArTcDGCAEDwsCQAJAAkACQAJAIAAoAngOAwACAQMLIAAgACkDCCIFNwOIAQJAIAUgACkDWFENAEEHDwsgAEEBNgJ4DAMLIAAgACkDmAEgACkDCHw3A5gBIAAgAkEYIAAoAqABEI2AgIAANgKgASAAQQE2AnggACAAKQOIAUJ/fCIFNwOIAQwCCyAAQQI2AnggACAAKQOQASAAKQMIfDcDkAELIAApA4gBIQULIAVCAFINAAtBAQtAAQJ/IABBgAFqIgIgAikDACABKAIEIAAoAhAiAmsiA618NwMAIAAgAiABKAIAaiADIAAoAhgQjYCAgACtNwMYC3wBBH8gASgCBCEDIAEoAgghBANAAkAgBCADRw0AQQAPCyABIANBAWoiBTYCBAJAIAEoAgAgA2otAAAgACkDGCAAKAIEIgOtiKdB/wFxRg0AQQcPCyAAIANBCGoiBjYCBCAFIQMgBiACSQ0ACyAAQQA2AgQgAEIANwMYQQELbwEBf0EHIQECQCAAQboBai8AAEHZtAFHDQAgAEG0AWpBBkEAEI2AgIAAIABBsAFqKAAARw0AIABBgAFqKQMAQgKIIAA1ALQBUg0AIABBuAFqLQAADQBBAUEHIAAoAiAgAEG5AWotAABGGyEBCyABC7QCAQR/AkACQCAAKAIkRQ0AIAAoAgAhAwwBC0EAIQMgAEEAOgAoIABCADcDACAAQgA3AxggAEHIAGpBAEHkABCGgICAABogAEGsAWpBDDYCAEEBIQILIABByABqIQQCQAJAA0ACQCADQQpHDQAgASgCBCIDIAEoAggiBUYNAiABKAIAIQYCQANAIAYgA2otAAANASABIANBAWoiAzYCBCAAIAAoAgRBAWpBA3E2AgQgBSADRg0EDAALCwJAIAAoAgRFDQBBBw8LIAAoAiRFDQAgAEEAOgAoIABCADcDACAAQgA3AxggBEEAQeQAEIaAgIAAGiAAQQw2AqwBCyAAIAEQkICAgAAiA0EBRw0CQQohAyAAQQo2AgAMAAsLAkAgAg0AQQAPC0EHQQEgACgCBBshAwsgAwt1AQF/AkBBuAkQgICAgAAiAkUNACACIAA2AiQgAiAAIAEQm4CAgAAiADYCsAkCQCAARQ0AIAJBADoAKCACQgA3AwAgAkIANwMYIAJByABqQQBB5AAQhoCAgAAaIAJBrAFqQQw2AgAgAg8LIAIQgoCAgAALQQALHgACQCAARQ0AIAAoArAJEJ2AgIAAIAAQgoCAgAALC4ARAQx/IABB6N0BaiECIABB1ABqIQMgAEEcaiIEQQhqIQUCQAJAA0AgACgCQCEGAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgASgCBCIHIAEoAggiCEkNACAGQQdGDQEMEgsgBg4JAQIDBAUGBwAJDwsgACgCTCEGDAcLQQEhCSABIAdBAWo2AgQgASgCACAHai0AACIHRQ0IAkACQCAHQd8BSw0AIAdBAUcNAQsgAEGAAjsBUAJAIAAoAjwNACAAIAEoAgwgASgCECIGajYCGCAAIAEoAhQgBms2AiwLIARCADcCACAFQgA3AgAMCwsgAC0AUEUNCgwOCyABIAdBAWo2AgQgASgCACAHai0AACEHIABBAjYCQCAAIAdBCHQgACgCSGo2AkgMDAsgASAHQQFqNgIEIAEoAgAgB2otAAAhByAAQQM2AkAgACAHIAAoAkhqQQFqNgJIDAsLIAEgB0EBajYCBCABKAIAIAdqLQAAIQcgAEEENgJAIAAgB0EIdDYCTAwKCyABIAdBAWo2AgQgASgCACAHai0AACEHIAAgACgCRDYCQCAAIAcgACgCTGpBAWo2AkwMCQsgASAHQQFqNgIEQQchCSABKAIAIAdqLQAAIgdB4AFLDQNBACEGAkACQCAHQS1PDQBBACEIDAELIAdBU2oiByAHQf8BcUEtbiIIQS1sayEHIAhBAWohCAsgAEF/IAh0QX9zNgJ0AkAgB0H/AXFBCUkNACAHQXdqIgcgB0H/AXFBCW4iBkEJbGshByAGQQFqIQYLIAAgBjYCcCAAIAdB/wFxIgc2AmwgBiAHakEESw0DIANCADcCACADQQhqQgA3AgAgA0EQakEANgIAIABBfyAGdEF/czYCcEH4ACEHA0AgACAHakGACDsBACAHQQJqIgdB5N0BRw0ACyAAQQY2AkAgAEEFNgIIIABC/////w83AgALIAAoAkwiCUEFSQ0IAkAgACgCCCIHRQ0AIAdBf2ohBiABKAIEIQcgASgCCCEKA0AgCiAHRg0LIAEgB0EBaiIINgIEIAEoAgAgB2otAAAhByAAIAY2AgggACAHIAAoAgRBCHRyNgIEIAghByAGQX9qIgZBf0cNAAsLIABBBzYCQCAAIAlBe2oiBjYCTAsgACAAKAIgIgcgASgCFCABKAIQayIIIAAoAkgiCiAIIApJGyIIaiAAKAIsIgogCiAHayAISxs2AiggASgCCCIJIAEoAgQiCGshBwJAAkACQCAAKALk3QEiCg0AIAYNAUEAIQYLIABB5N0BaiILIApqQQRqIAEoAgAgCGogByAGIAprIgZBKiAKayIIIAggBksbIgYgBiAHSxsiBxCHgICAABoCQAJAIAcgACgC5N0BIghqIgYgACgCTEcNACALIAhqIAdqQQRqQQBBPyAGaxCGgICAABogACgC5N0BIAdqIQYMAQsCQCAGQRRLDQAgACAGNgLk3QEgASABKAIEIAdqNgIEDAMLIAZBa2ohBgsgAEEANgIQIAAgAjYCDCAAIAY2AhRBByEJIAAQmoCAgABFDQMgACgCECIIIAAoAuTdASIKIAdqSw0DIAAgACgCTCAIayIGNgJMAkAgCiAITQ0AIAAgCiAIayIHNgLk3QEgAiALIAhqQQRqIAcQhYCAgAAaDAILIABBADYC5N0BIAEgASgCBCAIIApraiIINgIEIAEoAggiCSAIayEHCwJAIAdBFUkNACAAIAg2AhAgACABKAIANgIMIAAgCUFraiAIIAZqIAcgBkEVakkbNgIUQQchCSAAEJqAgIAARQ0DIAAoAkwiByAAKAIQIgggASgCBGsiBkkNAyABIAg2AgQgACAHIAZrIgY2AkwgASgCCCAIayIHQRRLDQELIAIgASgCACAIaiAGIAcgByAGSxsiBxCHgICAABogACAHNgLk3QEgASABKAIEIAdqNgIECyAAKAIgIgYgACgCHCIIayEHAkAgACgCPEUNAAJAIAYgACgCLEcNACAAQQA2AiALIAEoAgwgASgCEGogACgCGCAIaiAHEIeAgIAAGiAAKAIgIQYLIAAgBjYCHCABIAEoAhAgB2oiBjYCECAAIAAoAkggB2siBzYCSAJAIAcNAEEHIQkgACgCTA0CIAAoAmgNAiAAKAIEDQIgAEEANgJADAULQQAhCSAGIAEoAhRGDQEgASgCBCABKAIIRw0GIAAoAuTdASAAKAJMTw0GDAELIAAoAkwiCkUNAUEAIQkgCCAHTQ0AA0AgASgCFCIGIAEoAhAiC00NASAAIAogCiAAKAIsIAAoAiAiDGsiDSAIIAdrIgggBiALayIGIAggBkkbIgYgBiANSxsiBiAGIApLGyIGazYCTCAMIAAoAhhqIAEoAgAgB2ogBhCFgICAABogACAAKAIgIAZqIgc2AiACQCAAKAIkIAdPDQAgACAHNgIkCwJAIAAoAjxFDQACQCAHIAAoAixHDQAgAEEANgIgCyABKAIMIAEoAhBqIAEoAgAgASgCBGogBhCFgICAABogACgCICEHCyAAIAc2AhwgASABKAIQIAZqNgIQIAEgASgCBCAGaiIHNgIEIAAoAkwiCkUNAiABKAIIIgggB0sNAAsLIAkPCyAAQQA2AkAMAwsgB0EYdEEYdUF/Sg0BIABBATYCQCAAIAdBEHRBgID8AHE2AkgCQCAHQcABSQ0AIABBBTYCRCAAQQA6AFEMAwsgAC0AUQ0DIABBBjYCRCAHQaABSQ0CIANCADcCACADQRBqQQA2AgAgA0EIakIANwIAQfgAIQcDQCAAIAdqQYAIOwEAIAdBAmoiB0Hk3QFHDQALCyAAQQU2AgggAEL/////DzcCAAwBCyAHQQJLDQEgAEKDgICAgAE3AkAMAAsLQQcPC0EAC/8XARJ/IABBGGohAQJAIABBIGooAgAiAiAAQShqKAIAIgNPDQAgAEHoAGoiBCgCAEUNACABIAQgACgCVBCegICAABogACgCKCEDIAAoAiAhAgsCQCACIANPDQAgAEHcDWohBSAAQegAaiEGIABB4BVqIQcgAEHUAGohCANAIAAoAhAiCSAAKAIUSw0BIAAgACgCZCIKQQV0aiAAKAJ0IAJxIgtBAXRqIgxB+ABqIQ0CQAJAIAAoAgAiBEGAgIAISQ0AIAAoAgQhDgwBCyAAIARBCHQiBDYCACAAIAlBAWoiAzYCECAAIAAoAgRBCHQgACgCDCAJai0AAHIiDjYCBCADIQkLAkACQCAOIARBC3YgDS8BACIPbCIDTw0AIAAgAzYCACANIA9BgBAgD2tBBXZqOwEAIAJBf2ohBAJAIAINACAAKAIsIARqIQQLAkACQCAAKAIkIg8NAEEAIQQMAQsgACgCGCAEai0AACEECyAAKAJwIAJxIAAoAmwiDXQgBEEIIA1rdmohDAJAAkAgCkEGSw0AQQEhBANAIAAgDEGADGxqIARBAXQiBGpB5B1qIQ0CQAJAIANB////B00NACADIQoMAQsgACADQQh0Igo2AgAgACAJQQFqIgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiAKQQt2IA0vAQAiD2wiA0kNACAAIA4gA2siDjYCBCAAIAogA2siAzYCACANIA8gD0EFdms7AQAgBEEBciEEDAELIAAgAzYCACANIA9BgBAgD2tBBXZqOwEACyAEQYACSQ0ADAILCyACIAAoAlQiDUF/c2ohBAJAIAIgDUsNACAAKAIsIARqIQQLAkACQCAPDQBBACEQDAELIAAoAhggBGotAAAhEAtBASEEQYACIQ0DQCAAIAxBgAxsaiAQQQF0IhAgDXEiESANaiAEakEBdGpB5B1qIQ8CQAJAIANB////B00NACADIQsMAQsgACADQQh0Igs2AgAgACAJQQFqIgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiALQQt2IA8vAQAiCmwiA08iEg0AIAAgAzYCACAKQYAQIAprQQV2aiEKDAELIAAgDiADayIONgIEIAAgCyADayIDNgIAIAogCkEFdmshCkEAIQ0LIA8gCjsBACANIBFzIQ0gBEEBdCASciIEQYACSQ0ACwsgACACQQFqNgIgIAAoAhggAmogBDoAAAJAIAAoAiQgACgCICICTw0AIAAgAjYCJAtBACEDAkAgACgCZCIEQQRJDQACQCAEQQlLDQAgBEF9aiEDDAELIARBemohAwsgACADNgJkDAELIAAgDiADayIONgIEIAAgBCADayIDNgIAIA0gDyAPQQV2azsBACAAIApBAXRqIg9B+ANqIQQCQAJAIANB////B00NACAJIQoMAQsgACADQQh0IgM2AgAgACAJQQFqIgo2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQLAkACQCAOIANBC3YgBC8BACINbCIJSQ0AIAAgDiAJayIONgIEIAAgAyAJayIDNgIAIAQgDSANQQV2azsBACAPQZAEaiENAkACQCADQf///wdNDQAgCiEQDAELIAAgA0EIdCIDNgIAIAAgCkEBaiIQNgIQIAAgDkEIdCAAKAIMIApqLQAAciIONgIECwJAAkAgDiADQQt2IA0vAQAiCWwiBE8NACANIAlBgBAgCWtBBXZqOwEAIAxB2ARqIQMCQCAEQf///wdLDQAgACAEQQh0IgQ2AgAgACAQQQFqNgIQIAAgDkEIdCAAKAIMIBBqLQAAciIONgIECwJAIA4gBEELdiADLwEAIg1sIglJDQAgACAOIAlrNgIEIAAgBCAJazYCACADIA0gDUEFdms7AQAMAgsgAyANQYAQIA1rQQV2ajsBACAAIAk2AgAgAEEBNgJoIABBCUELIAAoAmRBB0kbNgJkDAMLIAAgDiAEayIONgIEIA0gCSAJQQV2azsBACAPQagEaiENAkACQCADIARrIgNB////B00NACAQIQoMAQsgACADQQh0IgM2AgAgACAQQQFqIgo2AhAgACAOQQh0IAAoAgwgEGotAAByIg42AgQLAkACQCAOIANBC3YgDS8BACIEbCIJTw0AIAAgCTYCACANIARBgBAgBGtBBXZqOwEAIAAoAlghAwwBCyAAIA4gCWsiDjYCBCANIAQgBEEFdms7AQAgD0HABGohBAJAIAMgCWsiA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgCkEBajYCECAAIA5BCHQgACgCDCAKai0AAHIiDjYCBAsCQAJAIA4gA0ELdiAELwEAIg1sIglPDQAgACAJNgIAIAQgDUGAECANa0EFdmo7AQAgACgCXCEDDAELIAAgDiAJazYCBCAAIAMgCWs2AgAgACgCYCEDIAAgACgCXDYCYCAEIA0gDUEFdms7AQALIAAgACgCWDYCXAsgACAAKAJUNgJYIAAgAzYCVAsgAEEIQQsgACgCZEEHSRs2AmQgACAHIAsQn4CAgAAMAQsgBCANQYAQIA1rQQV2ajsBACAAIAk2AgAgACAAKAJcNgJgIAAgACkCVDcCWCAAQQdBCiAAKAJkQQdJGzYCZCAAIAUgCxCfgICAACAAKAJoIgNBfmpBAyADQQZJGyEKIAAoAgAhA0EBIQ4DQCAAIApBB3RqIA5BAXQiDmpB2AdqIQ0CQAJAIANBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgRBAWo2AhAgACAAKAIEQQh0IAQgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgDS8BACIJbCIPSQ0AIAAgBCAPayIENgIEIAAgAyAPayIDNgIAIA0gCSAJQQV2azsBACAOQQFyIQ4MAQsgACAPNgIAIA0gCUGAECAJa0EFdmo7AQAgDyEDCyAOQcAASQ0ACwJAIA5BQGoiCUEDSw0AIAAgCTYCVAwBCyAAIA5BAXFBAnIiDTYCVCAJQQF2IQ8CQCAJQQ1LDQAgACANIA9Bf2oiDHQiCzYCVEEBIQ0gCCALQQF0akGEC2ohEEE/IA5rIRFBACEPA0AgECARIA1qQQF0aiEOAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA4vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACAOIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDUEBdEEBciENDAELIAAgAzYCACAOIAlBgBAgCWtBBXZqOwEAIA1BAXQhDQsgDCAPQQFqIg9HDQAMAgsLIA9Be2ohDgNAAkAgA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgACgCECIJQQFqNgIQIARBCHQgCSAAKAIMai0AAHIhBAsgACADQQF2IgM2AgAgACAEIANrIgRBH3UiCSANQQF0akEBaiINNgJUIAAgCSADcSAEaiIENgIEIA5Bf2oiDg0ACyAAIA1BBHQiCzYCVEEAIQ9BASEOA0AgACAOQQF0Ig5qQbwNaiENAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA0vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACANIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDkEBciEODAELIAAgAzYCACANIAlBgBAgCWtBBXZqOwEACyAPQQFqIg9BBEcNAAsLAkAgASAGIAAoAlQQnoCAgAANAEEADwsgACgCICECCyACIAAoAihJDQALC0EBIQMCQCAAKAIAIgRB////B0sNACAAIARBCHQ2AgBBASEDIAAgACgCECIEQQFqNgIQIAAgACgCBEEIdCAEIAAoAgxqLQAAcjYCBAsgAwtwAQF/AkBBqN4BEICAgIAAIgJFDQAgAkE0aiABNgIAIAJBPGogADYCAAJAAkACQCAAQX9qDgIAAQILIAIgARCAgICAACIANgIYIAANASACEIKAgIAADAILIAJBADYCGCACQThqQQA2AgALIAIPC0EAC9IBAQJ/QQYhAgJAIAFBJ0sNACAAQTBqIAFBAXFBAnIgAUEBdkELanQiATYCAAJAAkAgAEE8aigCACIDRQ0AQQQhAiABIABBNGooAgBLDQIgAEEsaiABNgIAIANBAkcNACAAQThqIgMoAgAgAU8NACAAIAE2AjggACgCGBCCgICAACAAIAAoAjAQgICAgAAiATYCGCABDQBBAyECDAELQQAhAiAAQQA2AkAgAEHQAGpBAToAACAAQegAakEANgIAIABB5N0BaiEDCyADQQA2AgALIAILIwACQCAAQTxqKAIARQ0AIAAoAhgQgoCAgAALIAAQgoCAgAAL9QEBBH9BACEDAkAgACgCDCACTQ0AIAAoAhggAk0NACABIAEoAgAiBCAAKAIQIAAoAggiBWsiBiAEIAYgBEkbIgRrNgIAIAUgAkF/c2ohAQJAIAUgAksNACAAKAIUIAFqIQELIAAoAgAiAiABai0AACEGQQEhAyAAIAVBAWo2AgggAiAFaiAGOgAAAkAgBEF/aiICRQ0AA0AgACgCACIFQQAgAUEBaiIBIAEgACgCFEYbIgFqLQAAIQQgACAAKAIIIgZBAWo2AgggBSAGaiAEOgAAIAJBf2oiAg0ACwsgACgCDCAAKAIIIgFPDQAgACABNgIMCyADC8gEAQd/AkACQCAAKAIAIgNBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAAKAIEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgAS8BACIGbCIFTw0AIAEgBkGAECAGa0EFdmo7AQAgASACQQR0akEEaiEHQQghCEECIQkMAQsgACAEIAVrIgQ2AgQgASAGIAZBBXZrOwEAAkAgAyAFayIDQf///wdLDQAgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkAgBCADQQt2IAEvAQIiBmwiBU8NACABIAZBgBAgBmtBBXZqOwECIAEgAkEEdGpBhAJqIQdBCCEIQQohCQwBCyAAIAQgBWsiBDYCBCABIAYgBkEFdms7AQIgAUGEBGohByADIAVrIQVBgAIhCEESIQkLIABB6ABqIAk2AgBBASEBA0AgByABQQF0IgFqIQMCQAJAIAVB////B00NACAFIQIMAQsgACAFQQh0IgI2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIAJBC3YgAy8BACIGbCIFSQ0AIAAgBCAFayIENgIEIAAgAiAFayIFNgIAIAMgBiAGQQV2azsBACABQQFyIQEMAQsgACAFNgIAIAMgBkGAECAGa0EFdmo7AQALIAEgCEkNAAsgAEHoAGogASAIayAJajYCAAsLNQEAQYAICy4IAAAAEAAAABgAAAAgAAAAKAAAADAAAABAAAAAUAAAAIAAAAAAAQAA/Td6WFoA"},t=>{t.exports=e}],n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{XzReadableStream:()=>r});var e=i(1);const t=globalThis.ReadableStream||i(2).ReadableStream;class n{constructor(e){this.exports=e.exports,this.memory=this.exports.memory,this.ptr=this.exports.create_context(),this._refresh(),this.bufSize=this.mem32[0],this.inStart=this.mem32[1]-this.ptr,this.inEnd=this.inStart+this.bufSize,this.outStart=this.mem32[4]-this.ptr}supplyInput(e){this._refresh(),this.mem8.subarray(this.inStart,this.inEnd).set(e,0),this.exports.supply_input(this.ptr,e.byteLength),this._refresh()}getNextOutput(){const e=this.exports.get_next_output(this.ptr);if(this._refresh(),0!==e&&1!==e)throw new Error(`get_next_output failed with error code ${e}`);return{outChunk:this.mem8.slice(this.outStart,this.outStart+this.mem32[5]),finished:1===e}}needsMoreInput(){return this.mem32[2]===this.mem32[3]}outputBufferIsFull(){return this.mem32[5]===this.bufSize}resetOutputBuffer(){this.outPos=this.mem32[5]=0}dispose(){this.exports.destroy_context(this.ptr),this.exports=null}_refresh(){var e;this.memory.buffer!==(null===(e=this.mem8)||void 0===e?void 0:e.buffer)&&(this.mem8=new Uint8Array(this.memory.buffer,this.ptr),this.mem32=new Uint32Array(this.memory.buffer,this.ptr))}}class r extends t{static _getModuleInstance(){return _asyncToGenerator((function*(){const t=e.replace("data:application/wasm;base64,",""),n=Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer,i=yield WebAssembly.instantiate(n,{});r._moduleInstance=i.instance}))()}constructor(e){let t,i=null;const o=e.getReader();super({start:e=>_asyncToGenerator((function*(){r._moduleInstance||(yield r._moduleInstancePromise||(r._moduleInstancePromise=r._getModuleInstance())),t=new n(r._moduleInstance)}))(),pull:e=>_asyncToGenerator((function*(){if(t.needsMoreInput()){if(null===i||0===i.byteLength){const{done:e,value:t}=yield o.read();e||(i=t)}const e=Math.min(t.bufSize,i.byteLength);t.supplyInput(i.subarray(0,e)),i=i.subarray(e)}const n=t.getNextOutput();e.enqueue(n.outChunk),t.resetOutputBuffer(),n.finished&&(t.dispose(),e.close())}))(),cancel:()=>(t.dispose(),o.cancel())})}}_defineProperty(r,"_moduleInstancePromise",void 0),_defineProperty(r,"_moduleInstance",void 0)})(),o})(),e.exports=n(require$$0)}(xzDecompress);var xzDecompressExports=xzDecompress.exports;const _tempAxis=new Vector3,_tempEuler=new Euler,_tempTransform=new Matrix4,_tempOrigTransform=new Matrix4,_tempQuat=new Quaternion,_tempScale=new Vector3(1,1,1),_tempPosition=new Vector3;class URDFBase extends Object3D{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=""}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class URDFCollider extends URDFBase{constructor(...e){super(...e),this.isURDFCollider=!0,this.type="URDFCollider"}}class URDFVisual extends URDFBase{constructor(...e){super(...e),this.isURDFVisual=!0,this.type="URDFVisual"}}class URDFLink extends URDFBase{constructor(...e){super(...e),this.isURDFLink=!0,this.type="URDFLink"}}class URDFJoint extends URDFBase{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(3).fill(0),this.axis=new Vector3(0,0,1);break;case"floating":this.jointValue=new Array(6).fill(0)}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type="URDFJoint",this.jointValue=null,this.jointType="fixed",this.axis=new Vector3(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map((e=>null===e?null:parseFloat(e))),this.origPosition&&this.origQuaternion||(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach((n=>{t=n.updateFromMimickedJoint(...e)||t})),this.jointType){case"fixed":return t;case"continuous":case"revolute":{let n=e[0];return null==n||n===this.jointValue[0]?t:(this.ignoreLimits||"revolute"!==this.jointType||(n=Math.min(this.limit.upper,n),n=Math.max(this.limit.lower,n)),this.quaternion.setFromAxisAngle(this.axis,n).premultiply(this.origQuaternion),this.jointValue[0]!==n?(this.jointValue[0]=n,this.matrixWorldNeedsUpdate=!0,!0):t)}case"prismatic":{let n=e[0];return null==n||n===this.jointValue[0]?t:(this.ignoreLimits||(n=Math.min(this.limit.upper,n),n=Math.max(this.limit.lower,n)),this.position.copy(this.origPosition),_tempAxis.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(_tempAxis,n),this.jointValue[0]!==n?(this.jointValue[0]=n,this.matrixWorldNeedsUpdate=!0,!0):t)}case"floating":return this.jointValue.every(((t,n)=>e[n]===t||null===e[n]))?t:(this.jointValue[0]=null!==e[0]?e[0]:this.jointValue[0],this.jointValue[1]=null!==e[1]?e[1]:this.jointValue[1],this.jointValue[2]=null!==e[2]?e[2]:this.jointValue[2],this.jointValue[3]=null!==e[3]?e[3]:this.jointValue[3],this.jointValue[4]=null!==e[4]?e[4]:this.jointValue[4],this.jointValue[5]=null!==e[5]?e[5]:this.jointValue[5],_tempOrigTransform.compose(this.origPosition,this.origQuaternion,_tempScale),_tempQuat.setFromEuler(_tempEuler.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],"XYZ")),_tempPosition.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),_tempTransform.compose(_tempPosition,_tempQuat,_tempScale),_tempOrigTransform.premultiply(_tempTransform),this.position.setFromMatrixPosition(_tempOrigTransform),this.rotation.setFromRotationMatrix(_tempOrigTransform),this.matrixWorldNeedsUpdate=!0,!0);case"planar":return this.jointValue.every(((t,n)=>e[n]===t||null===e[n]))?t:(this.jointValue[0]=null!==e[0]?e[0]:this.jointValue[0],this.jointValue[1]=null!==e[1]?e[1]:this.jointValue[1],this.jointValue[2]=null!==e[2]?e[2]:this.jointValue[2],_tempOrigTransform.compose(this.origPosition,this.origQuaternion,_tempScale),_tempQuat.setFromAxisAngle(this.axis,this.jointValue[2]),_tempPosition.set(this.jointValue[0],this.jointValue[1],0),_tempTransform.compose(_tempPosition,_tempQuat,_tempScale),_tempOrigTransform.premultiply(_tempTransform),this.position.setFromMatrixPosition(_tempOrigTransform),this.rotation.setFromRotationMatrix(_tempOrigTransform),this.matrixWorldNeedsUpdate=!0,!0)}return t}}class URDFMimicJoint extends URDFJoint{constructor(...e){super(...e),this.type="URDFMimicJoint",this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map((e=>e*this.multiplier+this.offset));return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class URDFRobot extends URDFLink{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse((t=>{t.isURDFJoint&&t.urdfName in e.joints&&(this.joints[t.urdfName]=t),t.isURDFLink&&t.urdfName in e.links&&(this.links[t.urdfName]=t),t.isURDFCollider&&t.urdfName in e.colliders&&(this.colliders[t.urdfName]=t),t.isURDFVisual&&t.urdfName in e.visual&&(this.visual[t.urdfName]=t)}));for(const n in this.joints)this.joints[n].mimicJoints=this.joints[n].mimicJoints.map((e=>this.joints[e.name]));return this.frames=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},this.colliders),this.visual),this.links),this.joints),this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const n=this.joints[e];return!!n&&n.setJointValue(...t)}setJointValues(e){let t=!1;for(const n in e){const i=e[n];t=Array.isArray(i)?this.setJointValue(n,...i)||t:this.setJointValue(n,i)||t}return t}}const textDecoder=new TextDecoder("utf-8"),tempQuaternion=new Quaternion,tempEuler$3=new Euler;function processTuple(e){return e?e.trim().split(/\s+/g).map((e=>parseFloat(e))):[0,0,0]}function applyRotation(e,t,n=!1){n||e.rotation.set(0,0,0),tempEuler$3.set(t[0],t[1],t[2],"ZYX"),tempQuaternion.setFromEuler(tempEuler$3),tempQuaternion.multiply(e.quaternion),e.quaternion.copy(tempQuaternion)}class URDFLoader{constructor(e,t=!1){this.manager=e||DefaultLoadingManager,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={},this.gltf=null}loadCompressedAsync(e,t){var n=this;return _asyncToGenerator((function*(){const i=yield fetch(t),o=yield new Response(new xzDecompressExports.XzReadableStream(i.body)).arrayBuffer(),r=yield untar(o),a=r.find((e=>e.name.indexOf("lib.glb")>0));if(a){const e=new GLTFLoader;n.gltf=yield e.parseAsync(a.buffer,"")}const s=textDecoder.decode(r.find((t=>t.name.indexOf(e)>0)).buffer);return yield n.parse(s,"/g1_description/")}))()}loadAsync(e){return new Promise(((t,n)=>{this.load(e,t,null,n)}))}load(e,t,n,i){const o=this.manager,r=LoaderUtils.extractUrlBase(e),a=this.manager.resolveURL(e);o.itemStart(a),fetch(a,this.fetchOptions).then((e=>{if(e.ok)return n&&n(null),e.text();throw new Error(`URDFLoader: Failed to load url '${a}' with error code ${e.status} : ${e.statusText}.`)})).then((e=>{const n=this.parse(e,this.workingPath||r);t(n),o.itemEnd(a)})).catch((e=>{i?i(e):console.error("URDFLoader: Error loading file.",e),o.itemError(a),o.itemEnd(a)}))}parse(e,t=this.workingPath){console.log(t);const n=this,i=this.packages,o=this.loadMeshCb,r=this.parseVisual,a=this.parseCollision,s=this.manager,l={},c={},u={};function d(e){if(!/^package:\/\//.test(e))return t?t+e:e;const[n,o]=e.replace(/^package:\/\//,"").split(/\/(.+)/);return"string"==typeof i?i.endsWith(n)?i+"/"+o:i+"/"+n+"/"+o:i instanceof Function?i(n)+"/"+o:"object"==typeof i?n in i?i[n]+"/"+o:(console.error(`URDFLoader : ${n} not found in provided package list.`),null):void 0}function h(e){const t=[...e.children],n=new MeshPhongMaterial;return n.name=e.getAttribute("name")||"",t.forEach((e=>{const t=e.nodeName.toLowerCase();if("color"===t){const t=e.getAttribute("rgba").split(/\s/g).map((e=>parseFloat(e)));n.color.setRGB(t[0],t[1],t[2]),n.opacity=t[3],n.transparent=t[3]<1,n.depthWrite=!n.transparent}else if("texture"===t){const t=e.getAttribute("filename");if(t){const e=new TextureLoader(s),i=d(t);n.map=e.load(i),n.map.colorSpace=SRGBColorSpace}}})),n}function p(e,t={}){const i="collision"===e.nodeName.toLowerCase(),r=[...e.children];let a=null;const l=r.filter((e=>"material"===e.nodeName.toLowerCase()))[0];if(l){const e=l.getAttribute("name");a=e&&e in t?t[e]:h(l)}else a=new MeshPhongMaterial;const c=i?new URDFCollider:new URDFVisual;return c.urdfNode=e,r.forEach((e=>{const t=e.nodeName.toLowerCase();if("geometry"===t){const t=e.children[0].nodeName.toLowerCase();if("mesh"===t){const t=d(e.children[0].getAttribute("filename"));if(null!==t){const i=e.children[0].getAttribute("scale");if(i){const e=processTuple(i);c.scale.set(e[0],e[1],e[2])}o(t,s,((e,t)=>{t?console.error("URDFLoader: Error loading mesh.",t):e&&(e instanceof Mesh&&(n.gltf||(e.material=a)),e.position.set(0,0,0),e.quaternion.identity(),c.add(e))}))}}else if("box"===t){const t=new Mesh;t.geometry=new BoxGeometry(1,1,1),t.material=a;const n=processTuple(e.children[0].getAttribute("size"));t.scale.set(n[0],n[1],n[2]),c.add(t)}else if("sphere"===t){const t=new Mesh;t.geometry=new SphereGeometry(1,30,30),t.material=a;const n=parseFloat(e.children[0].getAttribute("radius"))||0;t.scale.set(n,n,n),c.add(t)}else if("cylinder"===t){const t=new Mesh;t.geometry=new CylinderGeometry(1,1,1,30),t.material=a;const n=parseFloat(e.children[0].getAttribute("radius"))||0,i=parseFloat(e.children[0].getAttribute("length"))||0;t.scale.set(n,i,n),t.rotation.set(Math.PI/2,0,0),c.add(t)}}else if("origin"===t){const t=processTuple(e.getAttribute("xyz")),n=processTuple(e.getAttribute("rpy"));c.position.set(t[0],t[1],t[2]),c.rotation.set(0,0,0),applyRotation(c,n)}})),c}return function(e){let t;if(e instanceof Document)t=[...e.children];else if(e instanceof Element)t=[e];else{t=[...(new DOMParser).parseFromString(e,"text/xml").children]}return function(e){const t=[...e.children],n=t.filter((e=>"link"===e.nodeName.toLowerCase())),i=t.filter((e=>"joint"===e.nodeName.toLowerCase())),o=t.filter((e=>"material"===e.nodeName.toLowerCase())),s=new URDFRobot;s.robotName=e.getAttribute("name"),s.urdfRobotNode=e,o.forEach((e=>{const t=e.getAttribute("name");u[t]=h(e)}));const d={},f={};n.forEach((t=>{const n=t.getAttribute("name"),i=null===e.querySelector(`child[link="${n}"]`);l[n]=function(e,t,n,i=null){null===i&&(i=new URDFLink);const o=[...e.children];if(i.name=e.getAttribute("name"),i.urdfName=i.name,i.urdfNode=e,r){o.filter((e=>"visual"===e.nodeName.toLowerCase())).forEach((e=>{const n=p(e,u);if(i.add(n),e.hasAttribute("name")){const i=e.getAttribute("name");n.name=i,n.urdfName=i,t[i]=n}}))}if(a){o.filter((e=>"collision"===e.nodeName.toLowerCase())).forEach((e=>{const t=p(e);if(i.add(t),e.hasAttribute("name")){const i=e.getAttribute("name");t.name=i,t.urdfName=i,n[i]=t}}))}return i}(t,d,f,i?s:null)})),i.forEach((e=>{const t=e.getAttribute("name");c[t]=function(e){const t=[...e.children],n=e.getAttribute("type");let i;const o=t.find((e=>"mimic"===e.nodeName.toLowerCase()));o?(i=new URDFMimicJoint,i.mimicJoint=o.getAttribute("joint"),i.multiplier=parseFloat(o.getAttribute("multiplier")||1),i.offset=parseFloat(o.getAttribute("offset")||0)):i=new URDFJoint;i.urdfNode=e,i.name=e.getAttribute("name"),i.urdfName=i.name,i.jointType=n;let r=null,a=null,s=[0,0,0],c=[0,0,0];t.forEach((e=>{const t=e.nodeName.toLowerCase();"origin"===t?(s=processTuple(e.getAttribute("xyz")),c=processTuple(e.getAttribute("rpy"))):"child"===t?a=l[e.getAttribute("link")]:"parent"===t?r=l[e.getAttribute("link")]:"limit"===t&&(i.limit.lower=parseFloat(e.getAttribute("lower")||i.limit.lower),i.limit.upper=parseFloat(e.getAttribute("upper")||i.limit.upper))})),r.add(i),i.add(a),applyRotation(i,c),i.position.set(s[0],s[1],s[2]);const u=t.filter((e=>"axis"===e.nodeName.toLowerCase()))[0];if(u){const e=u.getAttribute("xyz").split(/\s+/g).map((e=>parseFloat(e)));i.axis=new Vector3(e[0],e[1],e[2]),i.axis.normalize()}return i}(e)})),s.joints=c,s.links=l,s.colliders=f,s.visual=d;const g=Object.values(c);return g.forEach((e=>{e instanceof URDFMimicJoint&&c[e.mimicJoint].mimicJoints.push(e)})),g.forEach((e=>{const t=new Set,n=e=>{if(t.has(e))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");t.add(e),e.mimicJoints.forEach((e=>{n(e)}))};n(e)})),s.frames=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},f),d),l),c),s}(t.filter((e=>"robot"===e.nodeName)).pop())}(e)}defaultMeshLoader(e,t,n){if(this.gltf){const t=e.replace(/^.*[\\/]/,"").replace(/\.[^/.]+$/,""),i=this.gltf.scene.getObjectByName(t);n(i)}else if(/\.stl$/i.test(e)){new STLLoader(t).load(e,(e=>{const t=new Mesh(e,new MeshPhongMaterial);n(t)}))}else if(/\.dae$/i.test(e)){new ColladaLoader(t).load(e,(e=>n(e.scene)))}else console.warn(`URDFLoader: Could not load model at ${e}.\nNo loader available`)}}exports("a9",URDFLoader);var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;function create$4(){var e=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function copy$2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function invert$2(e,t){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],g=t[13],m=t[14],_=t[15],v=n*s-i*a,b=n*l-o*a,T=n*c-r*a,A=i*l-o*s,y=i*c-r*s,E=o*c-r*l,S=u*g-d*f,C=u*m-h*f,w=u*_-p*f,x=d*m-h*g,M=d*_-p*g,R=h*_-p*m,I=v*R-b*M+T*x+A*w-y*C+E*S;return I?(I=1/I,e[0]=(s*R-l*M+c*x)*I,e[1]=(o*M-i*R-r*x)*I,e[2]=(g*E-m*y+_*A)*I,e[3]=(h*y-d*E-p*A)*I,e[4]=(l*w-a*R-c*C)*I,e[5]=(n*R-o*w+r*C)*I,e[6]=(m*T-f*E-_*b)*I,e[7]=(u*E-h*T+p*b)*I,e[8]=(a*M-s*w+c*S)*I,e[9]=(i*w-n*M-r*S)*I,e[10]=(f*y-g*T+_*v)*I,e[11]=(d*T-u*y-p*v)*I,e[12]=(s*C-a*x-l*S)*I,e[13]=(n*x-i*C+o*S)*I,e[14]=(g*b-f*A-m*v)*I,e[15]=(u*A-d*b+h*v)*I,e):null}function multiply$1(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],g=t[12],m=t[13],_=t[14],v=t[15],b=n[0],T=n[1],A=n[2],y=n[3];return e[0]=b*i+T*s+A*d+y*g,e[1]=b*o+T*l+A*h+y*m,e[2]=b*r+T*c+A*p+y*_,e[3]=b*a+T*u+A*f+y*v,b=n[4],T=n[5],A=n[6],y=n[7],e[4]=b*i+T*s+A*d+y*g,e[5]=b*o+T*l+A*h+y*m,e[6]=b*r+T*c+A*p+y*_,e[7]=b*a+T*u+A*f+y*v,b=n[8],T=n[9],A=n[10],y=n[11],e[8]=b*i+T*s+A*d+y*g,e[9]=b*o+T*l+A*h+y*m,e[10]=b*r+T*c+A*p+y*_,e[11]=b*a+T*u+A*f+y*v,b=n[12],T=n[13],A=n[14],y=n[15],e[12]=b*i+T*s+A*d+y*g,e[13]=b*o+T*l+A*h+y*m,e[14]=b*r+T*c+A*p+y*_,e[15]=b*a+T*u+A*f+y*v,e}function fromRotationTranslation(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=i+i,l=o+o,c=r+r,u=i*s,d=i*l,h=i*c,p=o*l,f=o*c,g=r*c,m=a*s,_=a*l,v=a*c;return e[0]=1-(p+g),e[1]=d+v,e[2]=h-_,e[3]=0,e[4]=d-v,e[5]=1-(u+g),e[6]=f+m,e[7]=0,e[8]=h+_,e[9]=f-m,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){var n=t[0],i=t[1],o=t[2],r=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,i,o),e[1]=Math.hypot(r,a,s),e[2]=Math.hypot(l,c,u),e}function getRotation(e,t){var n=new ARRAY_TYPE(3);getScaling(n,t);var i=1/n[0],o=1/n[1],r=1/n[2],a=t[0]*i,s=t[1]*o,l=t[2]*r,c=t[4]*i,u=t[5]*o,d=t[6]*r,h=t[8]*i,p=t[9]*o,f=t[10]*r,g=a+u+f,m=0;return g>0?(m=2*Math.sqrt(g+1),e[3]=.25*m,e[0]=(d-p)/m,e[1]=(h-l)/m,e[2]=(s-c)/m):a>u&&a>f?(m=2*Math.sqrt(1+a-u-f),e[3]=(d-p)/m,e[0]=.25*m,e[1]=(s+c)/m,e[2]=(h+l)/m):u>f?(m=2*Math.sqrt(1+u-a-f),e[3]=(h-l)/m,e[0]=(s+c)/m,e[1]=.25*m,e[2]=(d+p)/m):(m=2*Math.sqrt(1+f-a-u),e[3]=(s-c)/m,e[0]=(h+l)/m,e[1]=(d+p)/m,e[2]=.25*m),e}function fromQuat(e,t){var n=t[0],i=t[1],o=t[2],r=t[3],a=n+n,s=i+i,l=o+o,c=n*a,u=i*a,d=i*s,h=o*a,p=o*s,f=o*l,g=r*a,m=r*s,_=r*l;return e[0]=1-d-f,e[1]=u+_,e[2]=h-m,e[3]=0,e[4]=u-_,e[5]=1-c-f,e[6]=p+g,e[7]=0,e[8]=h+m,e[9]=p-g,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function create$3(){var e=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function length$1(e){var t=e[0],n=e[1],i=e[2];return Math.hypot(t,n,i)}function fromValues(e,t,n){var i=new ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i}function copy$1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function subtract$2(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function scale$2(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function distance(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return Math.hypot(n,i,o)}function squaredDistance$1(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return n*n+i*i+o*o}function normalize$2(e,t){var n=t[0],i=t[1],o=t[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,n){var i=t[0],o=t[1],r=t[2],a=n[0],s=n[1],l=n[2];return e[0]=o*l-r*s,e[1]=r*a-i*l,e[2]=i*s-o*a,e}function transformMat4(e,t,n){var i=t[0],o=t[1],r=t[2],a=n[3]*i+n[7]*o+n[11]*r+n[15];return a=a||1,e[0]=(n[0]*i+n[4]*o+n[8]*r+n[12])/a,e[1]=(n[1]*i+n[5]*o+n[9]*r+n[13])/a,e[2]=(n[2]*i+n[6]*o+n[10]*r+n[14])/a,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var sqrDist=squaredDistance$1,len=length$1,vec;function create$2(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function subtract$1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function scale$1(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function squaredDistance(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],r=t[3]-e[3];return n*n+i*i+o*o+r*r}function length(e){var t=e[0],n=e[1],i=e[2],o=e[3];return Math.hypot(t,n,i,o)}function squaredLength(e){var t=e[0],n=e[1],i=e[2],o=e[3];return t*t+n*n+i*i+o*o}function normalize$1(e,t){var n=t[0],i=t[1],o=t[2],r=t[3],a=n*n+i*i+o*o+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=i*a,e[2]=o*a,e[3]=r*a,e}function create$1(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function setAxisAngle(e,t,n){n*=.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function slerp(e,t,n,i){var o,r,a,s,l,c=t[0],u=t[1],d=t[2],h=t[3],p=n[0],f=n[1],g=n[2],m=n[3];return(r=c*p+u*f+d*g+h*m)<0&&(r=-r,p=-p,f=-f,g=-g,m=-m),1-r>EPSILON?(o=Math.acos(r),a=Math.sin(o),s=Math.sin((1-i)*o)/a,l=Math.sin(i*o)/a):(s=1-i,l=i),e[0]=s*c+l*p,e[1]=s*u+l*f,e[2]=s*d+l*g,e[3]=s*h+l*m,e}function invert$1(e,t){var n=t[0],i=t[1],o=t[2],r=t[3],a=n*n+i*i+o*o+r*r,s=a?1/a:0;return e[0]=-n*s,e[1]=-i*s,e[2]=-o*s,e[3]=r*s,e}function fromMat3(e,t){var n,i=t[0]+t[4]+t[8];if(i>0)n=Math.sqrt(i+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var r=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*r+r]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*r+a]-t[3*a+r])*n,e[r]=(t[3*r+o]+t[3*o+r])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e}function fromEuler(e,t,n,i){var o=.5*Math.PI/180;t*=o,n*=o,i*=o;var r=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return e[0]=r*l*u-a*s*c,e[1]=a*s*u+r*l*c,e[2]=a*l*c-r*s*u,e[3]=a*l*u+r*s*c,e}vec=create$3(),function(){var e=create$2()}();var normalize=normalize$1,rotationTo=(tmpvec3=create$3(),xUnitVec3=fromValues(1,0,0),yUnitVec3=fromValues(0,1,0),function(e,t,n){var i=dot(t,n);return i<-.999999?(cross(tmpvec3,xUnitVec3,t),len(tmpvec3)<1e-6&&cross(tmpvec3,yUnitVec3,t),normalize$2(tmpvec3,tmpvec3),setAxisAngle(e,tmpvec3,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(cross(tmpvec3,t,n),e[0]=tmpvec3[0],e[1]=tmpvec3[1],e[2]=tmpvec3[2],e[3]=1+i,normalize(e,e))}),tmpvec3,xUnitVec3,yUnitVec3,temp1,temp2,matr;temp1=create$1(),temp2=create$1(),matr=create$4();const tempQuat$5=new Float64Array(16);function smallestDifferenceQuaternion(e,t,n){scale$1(tempQuat$5,n,-1),squaredDistance(t,tempQuat$5)<squaredDistance(t,n)?subtract$1(e,t,tempQuat$5):subtract$1(e,t,n)}const tempQuat2$2=new Float64Array(16);function quaternionSquaredDistance(e,t){return smallestDifferenceQuaternion(tempQuat2$2,e,t),squaredLength(tempQuat2$2)}const PI=Math.PI,PI2=2*PI,HALF_PI=PI/2,DEG2RAD=Math.PI/180,RAD2DEG=1/DEG2RAD,tempInverse$1=new Float32Array(16),tempMatrix$2=new Float32Array(16),tempQuat$4=new Float32Array(4),tempPos$4=new Float32Array(3),sharedTraversedChildren=new Set,sharedTraverseArray=[];let traverseVariablesInUse=!1;class Frame{constructor(){this.name="",this.quaternion=new Float32Array([0,0,0,1]),this.position=new Float32Array(3),this.matrix=new Float32Array(16),identity$1(this.matrix),this.matrixWorld=new Float32Array(16),identity$1(this.matrixWorld),this.matrixNeedsUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.parent=null,this.children=[]}setPosition(...e){const t=this.position;sqrDist(t,e)>1e-10&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],this.setMatrixNeedsUpdate())}setEuler(e,t,n){fromEuler(tempQuat$4,e*RAD2DEG,t*RAD2DEG,n*RAD2DEG),this.setQuaternion(...tempQuat$4)}setQuaternion(...e){const t=this.quaternion;quaternionSquaredDistance(t,e)>1e-10&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setMatrixNeedsUpdate())}setWorldPosition(e,t,n){const i=this.parent;tempPos$4[0]=e,tempPos$4[1]=t,tempPos$4[2]=n,i&&(i.updateMatrixWorld(),invert$2(tempInverse$1,i.matrixWorld),transformMat4(tempPos$4,tempPos$4,tempInverse$1)),this.setPosition(...tempPos$4)}setWorldEuler(e,t,n){fromEuler(tempQuat$4,e*RAD2DEG,t*RAD2DEG,n*RAD2DEG),this.setWorldQuaternion(...tempQuat$4)}setWorldQuaternion(e,t,n,i){const o=this;tempQuat$4[0]=e,tempQuat$4[1]=t,tempQuat$4[2]=n,tempQuat$4[3]=i,o&&(o.updateMatrixWorld(),invert$2(tempInverse$1,o.matrixWorld),fromQuat(tempMatrix$2,tempQuat$4),multiply$1(tempMatrix$2,tempInverse$1,tempMatrix$2),getRotation(tempQuat$4,tempMatrix$2)),this.setQuaternion(...tempQuat$4)}getWorldPosition(e){this.updateMatrixWorld(),getTranslation(e,this.matrixWorld)}getWorldQuaternion(e){this.updateMatrixWorld(),getRotation(e,this.matrixWorld)}traverseParents(e){let t;const n=traverseVariablesInUse;traverseVariablesInUse?t=new Set:(t=sharedTraversedChildren,t.clear()),traverseVariablesInUse=!0;let i=this.parent;for(;i&&!t.has(i);){if(e(i))return;t.add(i),i=i.parent}traverseVariablesInUse=n,t.clear()}traverse(e){const t=traverseVariablesInUse;let n,i;traverseVariablesInUse?(n=new Set,i=[this]):(n=sharedTraversedChildren,n.clear(),i=sharedTraverseArray,i[0]=this),traverseVariablesInUse=!0;let o=0,r=1;for(;o<r;){const t=i[o];if(!e(t)){const e=t.children;for(let t=0,o=e.length;t<o;t++){const o=e[t];n.has(o)||(n.add(o),i[r]=o,r++)}}o++}traverseVariablesInUse=t,n.clear(),i.fill(null)}find(e){let t=null;return this.traverse((n=>!!t||(e(n)?(t=n,!0):void 0))),t}addChild(e){if(e.parent)throw new Error("Frame: Added child must not already have a parent.");if(e===this)throw new Error("Frame: Frame cannot be added as a child to itself.");this.traverseParents((t=>{if(t===e)throw new Error("Frame: Added child is an ancestor of this Frame. Use Joint.makeClosure instead.")})),e.parent=this,this.children.push(e),e.setMatrixWorldNeedsUpdate()}removeChild(e){if(e.parent!==this)throw new Error("Frame: Child to be removed is not a child of this Frame.");const t=this.children.indexOf(e);this.children.splice(t,1),e.parent=null,e.setMatrixWorldNeedsUpdate()}attachChild(e){this.updateMatrixWorld(),e.updateMatrixWorld(),this.addChild(e),invert$2(tempInverse$1,this.matrixWorld),multiply$1(e.matrix,tempInverse$1,e.matrixWorld),getTranslation(e.position,e.matrix),getRotation(e.quaternion,e.matrix)}detachChild(e){this.updateMatrixWorld(),e.updateMatrixWorld(),this.removeChild(e),copy$2(e.matrix,e.matrixWorld),getTranslation(e.position,e.matrix),getRotation(e.quaternion,e.matrix)}computeMatrixWorld(){this.parent?multiply$1(this.matrixWorld,this.parent.matrixWorld,this.matrix):copy$2(this.matrixWorld,this.matrix)}setMatrixNeedsUpdate(){!1===this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!0,this.setMatrixWorldNeedsUpdate())}setMatrixWorldNeedsUpdate(){this.traverse((e=>!!e.matrixWorldNeedsUpdate||(e.matrixWorldNeedsUpdate=!0,!1)))}updateMatrix(){this.matrixNeedsUpdate&&(fromRotationTranslation(this.matrix,this.quaternion,this.position),this.matrixNeedsUpdate=!1)}updateMatrixWorld(e=!1){const{parent:t}=this;this.matrixWorldNeedsUpdate&&(t&&t.matrixWorldNeedsUpdate&&t.updateMatrixWorld(!1),this.updateMatrix(),this.computeMatrixWorld(),this.matrixWorldNeedsUpdate=!1),e&&this.traverse((e=>{this!==e&&e.updateMatrixWorld(!1)}))}}class Link extends Frame{constructor(){super(),this.isLink=!0,this.closureJoints=[]}addChild(e){if(!e.isJoint)throw new Error("Link: Added child must be a Joint.");super.addChild(e)}}function clampEulerValue(e){let t=e%PI2;return t>PI?t-=PI2:t<=-PI&&(t+=PI2),t}function toSmallestEulerValueDistance(e,t){let n=Math.round(e/PI2)*PI2+clampEulerValue(t);const i=n-e;return Math.abs(i)>PI&&(n-=Math.sign(i)*PI2),n}function toSmallestEulerDistance(e,t,n){e[0]=toSmallestEulerValueDistance(t[0],n[0]),e[1]=toSmallestEulerValueDistance(t[1],n[1]),e[2]=toSmallestEulerValueDistance(t[2],n[2])}function diffEulerDistance(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2])}function getRedundantEulerRepresentation(e,t){e[0]=t[0]+PI,e[1]=PI-t[1],e[2]=t[2]+PI}function isRedundantTwist(e){const t=clampEulerValue(e[1]);return!(Math.abs(Math.abs(t)-HALF_PI)>1e-7)}function toSmallestRedundantTwistRepresentation(e,t,n){if(!isRedundantTwist(n))return!1;const i=clampEulerValue(n[1]),o=-1*Math.sign(i),r=n[0]+o*n[2];return e[0]=t[0],e[1]=toSmallestEulerValueDistance(t[1],n[1]),e[2]=toSmallestEulerValueDistance(t[2],o*(r-t[0])),toSmallestEulerDistance(e,t,e),!0}const tempEuler1=new Float64Array(3),tempEuler2=new Float64Array(3);function getClosestEulerRepresentation(e,t,n){let i=1/0;if(isRedundantTwist(n)){toSmallestRedundantTwistRepresentation(tempEuler1,t,n),getRedundantEulerRepresentation(tempEuler2,n),toSmallestRedundantTwistRepresentation(tempEuler2,t,tempEuler2);const o=diffEulerDistance(t,tempEuler1),r=diffEulerDistance(t,tempEuler2);o<r?(copy$1(e,tempEuler1),i=o):(copy$1(e,tempEuler2),i=r)}toSmallestEulerDistance(tempEuler1,t,n),getRedundantEulerRepresentation(tempEuler2,n),toSmallestEulerDistance(tempEuler2,t,tempEuler2);const o=diffEulerDistance(t,tempEuler1),r=diffEulerDistance(t,tempEuler2);(o<i||r<i)&&copy$1(e,o<r?tempEuler1:tempEuler2)}const tempPos$3=new Float64Array(3),tempQuat$3=new Float64Array(4),tempPos2$1=new Float64Array(3),tempQuat2$1=new Float64Array(4);function getEuler(e,t){const[n,i,o,r]=t,a=2*(r*n+i*o),s=1-2*(n*n+i*i),l=Math.atan2(a,s);let c=2*(r*i-o*n);c=c>1?1:c,c=c<-1?-1:c;const u=Math.asin(c),d=2*(r*o+n*i),h=1-2*(i*i+o*o),p=Math.atan2(d,h);return e[0]=l*RAD2DEG,e[1]=u*RAD2DEG,e[2]=p*RAD2DEG,e}function getMatrixDifference(e,t,n,i){getTranslation(tempPos$3,e),getRotation(tempQuat$3,e),getTranslation(tempPos2$1,t),getRotation(tempQuat2$1,t),subtract$2(n,tempPos$3,tempPos2$1),smallestDifferenceQuaternion(i,tempQuat$3,tempQuat2$1)}const DOF=exports("L",{X:0,Y:1,Z:2,EX:3,EY:4,EZ:5}),DOF_NAMES=Object.entries(DOF).sort(((e,t)=>e[1]-t[1])).map((e=>e[0])),tempInverse=new Float32Array(16),tempMatrix$1=new Float32Array(16),tempQuat$2=new Float32Array(4),tempEuler$2=new Float32Array(3),tempValueEuler=new Float32Array(3),quatEuler=new Float32Array(3),tempDoFValues=new Float32Array(6);function dofToMatrix(e,t){fromEuler(tempQuat$2,t[DOF.EX]*RAD2DEG,t[DOF.EY]*RAD2DEG,t[DOF.EZ]*RAD2DEG),fromRotationTranslation(e,tempQuat$2,t)}class Joint extends Frame{constructor(){super(),this.isJoint=!0,this.child=null,this.isClosure=!1,this.trackJointWrap=!1,this.rotationDoFCount=0,this.translationDoFCount=0,this.dof=[],this.dofFlags=new Uint8Array(6),this.dofValues=new Float32Array(6),this.dofTarget=new Float32Array(6),this.dofRestPose=new Float32Array(6),this.minDoFLimit=new Float32Array(6).fill(-1/0),this.maxDoFLimit=new Float32Array(6).fill(1/0),this.targetSet=!1,this.restPoseSet=!1,this.matrixDoFNeedsUpdate=!1,this.matrixDoF=new Float32Array(16),identity$1(this.matrixDoF),this.cachedIdentityDoFMatrixWorld=new Float32Array(16),identity$1(this.cachedIdentityDoFMatrixWorld)}_getQuaternion(e,t){fromEuler(t,e[DOF.EX],e[DOF.EY],e[DOF.EZ])}_getEuler(e,t){t[0]=e[DOF.EX],t[1]=e[DOF.EY],t[2]=e[DOF.EZ]}_getPosition(e,t){t[0]=e[DOF.X],t[1]=e[DOF.Y],t[2]=e[DOF.Z]}_setValue(e,t,n){if(e===this.minDoFLimit||e==this.maxDoFLimit)throw new Error("Joint: Cannot set minDoFLimit or maxDoFLimit with _setValue.");if(t<0||t>6||"number"!=typeof t)throw new Error("Joint: Invalid DoF.");if(!this.dofFlags[t])return!1;const i=this.minDoFLimit[t],o=this.maxDoFLimit[t];return n<i&&(n=i),n>o&&(n=o),e[t]=n,n===o||n===i}_setValues(e,t){const n=this.dof;for(let i=0,o=t.length;i<o;i++)this._setValue(e,n[i],t[i])}_setViaFullPosition(e,t){const n=this.dofFlags;for(let i=0;i<3;i++)e[i]=n[i]*t[i]}_setViaFullEuler(e,t){const n=this.dofFlags;for(let i=3;i<6;i++)e[i]=n[i]*t[i-3];this.tryMinimizeEulerAngles()}_setViaQuaternion(e,t){if(getEuler(quatEuler,t),quatEuler[0]*=DEG2RAD,quatEuler[1]*=DEG2RAD,quatEuler[2]*=DEG2RAD,this.trackJointWrap){const e=this.dofValues;tempEuler$2[0]=e[DOF.EX],tempEuler$2[1]=e[DOF.EY],tempEuler$2[2]=e[DOF.EZ],getClosestEulerRepresentation(quatEuler,tempEuler$2,quatEuler)}this._setViaFullEuler(e,quatEuler)}clearDoF(){this.setDoF()}setDoF(...e){e.forEach(((t,n)=>{if(t<0||t>=6)throw new Error("Joint: Invalid degree of freedom enum "+t+".");if(e.includes(t,n+1))throw new Error("Joint: Duplicate degree of freedom "+DOF_NAMES[t]+"specified.");if(0!==n&&e[n-1]>t)throw new Error("Joint: Joints degrees of freedom must be specified in position then rotation, XYZ order")})),this.dof=e,this.dofValues.fill(0),this.dofTarget.fill(0),this.dofRestPose.fill(0),this.minDoFLimit.fill(-1/0),this.maxDoFLimit.fill(1/0),this.setMatrixDoFNeedsUpdate();for(let t=0;t<6;t++)this.dofFlags[t]=Number(e.includes(t));this.rotationDoFCount=this.dofFlags[DOF.EX]+this.dofFlags[DOF.EY]+this.dofFlags[DOF.EZ],this.translationDoFCount=this.dofFlags[DOF.X]+this.dofFlags[DOF.Y]+this.dofFlags[DOF.Z]}setDoFValues(...e){this.setMatrixDoFNeedsUpdate(),this._setValues(this.dofValues,e)}setDoFValue(e,t){return this.setMatrixDoFNeedsUpdate(),this._setValue(this.dofValues,e,t)}getDoFValue(e){return this.dofValues[e]}getDoFQuaternion(e){this._getQuaternion(this.dofValues,e)}getDoFEuler(e){this._getEuler(this.dofValues,e)}getDoFPosition(e){this._getPosition(this.dofValues,e)}setRestPoseValues(...e){this._setValues(this.dofRestPose,e)}setRestPoseValue(e,t){return this._setValue(this.dofRestPose,e,t)}getRestPoseValue(e){return this.dofRestPose[e]}getRestPoseQuaternion(e){this._getQuaternion(this.dofRestPose,e)}getRestPoseEuler(e){this._getEuler(this.dofRestPose,e)}getRestPosePosition(e){this._getPosition(this.dofRestPose,e)}setTargetValues(...e){this._setValues(this.dofTarget,e)}setTargetValue(e,t){this._setValue(this.dofTarget,e,t)}getTargetValue(e){return this.dofTarget[e]}getTargetQuaternion(e){this._getQuaternion(this.dofTarget,e)}getTargetEuler(e){this._getEuler(this.dofTarget,e)}getTargetPosition(e){this._getPosition(this.dofTarget,e)}setMinLimits(...e){const{dof:t}=this;for(const n in e){const i=t[n];this.setMinLimit(i,e[n])}}setMinLimit(e,t){this.minDoFLimit[e]=t,this.setDoFValue(e,this.dofValues[e])}getMinLimit(e){return this.minDoFLimit[e]}setMaxLimits(...e){const{dof:t}=this;for(const n in e){const i=t[n];this.setMaxLimit(i,e[n])}}setMaxLimit(e,t){this.maxDoFLimit[e]=t,this.setDoFValue(e,this.dofValues[e])}getMaxLimit(e){return this.maxDoFLimit[e]}getClosureError(e,t){if(!this.isClosure)throw new Error("Joint: Cannot get closure error on non closure Joint.");this.updateMatrixWorld(),this.child.updateMatrixWorld(),getMatrixDifference(this.matrixWorld,this.child.matrixWorld,e,t)}tryMinimizeEulerAngles(){const{trackJointWrap:e,rotationDoFCount:t,dofRestPose:n,dofTarget:i,dofValues:o}=this;if(!e)if(t<3)for(let r=DOF.EX;r<=DOF.EZ;r++)i[r]=toSmallestEulerValueDistance(o[r],i[r]),n[r]=toSmallestEulerValueDistance(o[r],n[r]);else tempValueEuler[0]=o[DOF.EX],tempValueEuler[1]=o[DOF.EY],tempValueEuler[2]=o[DOF.EZ],tempEuler$2[0]=i[DOF.EX],tempEuler$2[1]=i[DOF.EY],tempEuler$2[2]=i[DOF.EZ],getClosestEulerRepresentation(tempEuler$2,tempValueEuler,tempEuler$2),i[DOF.EX]=tempEuler$2[0],i[DOF.EY]=tempEuler$2[1],i[DOF.EZ]=tempEuler$2[2],tempEuler$2[0]=n[DOF.EX],tempEuler$2[1]=n[DOF.EY],tempEuler$2[2]=n[DOF.EZ],getClosestEulerRepresentation(tempEuler$2,tempValueEuler,tempEuler$2),n[DOF.EX]=tempEuler$2[0],n[DOF.EY]=tempEuler$2[1],n[DOF.EZ]=tempEuler$2[2]}getDeltaWorldMatrix(e,t,n){const{dofValues:i,minDoFLimit:o,maxDoFLimit:r,cachedIdentityDoFMatrixWorld:a}=this;this.updateMatrixWorld(),tempDoFValues.set(i);const s=o[e],l=r[e],c=tempDoFValues[e],u=c-s,d=l-c;let h=c+t;const p=t>0&&h>l&&u>d||t<0&&h<s&&d>u;return p&&(h=c-t),tempDoFValues[e]=h,dofToMatrix(tempMatrix$1,tempDoFValues),multiply$1(n,a,tempMatrix$1),p}setMatrixDoFNeedsUpdate(){!1===this.matrixDoFNeedsUpdate&&(this.matrixDoFNeedsUpdate=!0,this.setMatrixWorldNeedsUpdate())}updateDoFMatrix(){this.matrixDoFNeedsUpdate&&(dofToMatrix(this.matrixDoF,this.dofValues),this.matrixDoFNeedsUpdate=!1)}computeMatrixWorld(){const{parent:e,matrixWorld:t,matrix:n,matrixDoF:i,cachedIdentityDoFMatrixWorld:o}=this;this.updateDoFMatrix(),multiply$1(t,n,i),e?(multiply$1(t,e.matrixWorld,t),multiply$1(o,e.matrixWorld,n)):copy$2(o,n)}makeClosure(e){if(!e.isLink||this.child||e.parent===this)throw new Error("Joint: Given child cannot be used to make closure.");this.child=e,this.isClosure=!0,e.closureJoints.push(this)}addChild(e){if(!e.isLink||this.child||e.parent===this)throw new Error("Joint: Given child cannot be added to Joint.");super.addChild(e),this.child=e,this.isClosure=!1}removeChild(e){if(this.isClosure){if(this.child!==e)throw new Error("Frame: Child to be removed is not a child of this Joint.");{this.child=null,this.isClosure=!1;const t=e.closureJoints.indexOf(this);e.closureJoints.splice(t,1)}}else super.removeChild(e)}attachChild(e){super.attachChild(e),invert$2(tempInverse,this.matrixDoF),multiply$1(e.matrix,tempInverse,e.matrix),getTranslation(e.position,e.matrix),getRotation(e.quaternion,e.matrix)}detachChild(e){super.detachChild(e),invert$2(tempInverse,this.matrixDoF),multiply$1(e.matrix,tempInverse,e.matrix),getTranslation(e.position,e.matrix),getRotation(e.quaternion,e.matrix)}}class Goal extends Joint{constructor(...e){super(...e),this.isGoal=!0,this.setFreeDoF()}setDoF(...e){let t=Number(e.includes(DOF.EX))+Number(e.includes(DOF.EY))+Number(e.includes(DOF.EZ));if(0!==t&&3!==t)throw new Error("Goal: Only full 3 DoF or 0 DoF rotation goals are supported.");super.setDoF(...e)}setGoalDoF(...e){this.setDoF(...e)}setFreeDoF(...e){const t=[DOF.X,DOF.Y,DOF.Z,DOF.EX,DOF.EY,DOF.EZ].filter((t=>!e.includes(t)));this.setDoF(...t)}addChild(){throw new Error("Goal: Cannot add children to Goal.")}}exports("K",Goal);const tempPos$2=new Float64Array(3),tempQuat$1=new Float64Array(4),tempEuler$1=new Float64Array(3);function accumulateClosureError(e,t,n,i=null,o={isConverged:!1,rowCount:7,totalError:0}){const{translationConvergeThreshold:r,rotationConvergeThreshold:a,translationErrorClamp:s,rotationErrorClamp:l,translationFactor:c,rotationFactor:u}=e,{translationDoFCount:d,rotationDoFCount:h,dofFlags:p,dof:f}=t;t.getClosureError(tempPos$2,tempQuat$1);let g=7;t.isGoal&&(tempPos$2[0]*=p[0],tempPos$2[1]*=p[1],tempPos$2[2]*=p[2],g=d,0===h?(tempQuat$1[0]=0,tempQuat$1[1]=0,tempQuat$1[2]=0,tempQuat$1[3]=0):g+=4);let m=!1,_=0;const v=length$1(tempPos$2),b=length(tempQuat$1);if(v<r&&b<a&&(m=!0),_+=v+b,i)if(v>s&&scale$2(tempPos$2,tempPos$2,s/v),scale$1(tempPos$2,tempPos$2,c),b>l&&scale$1(tempQuat$1,tempQuat$1,l/b),scale$1(tempQuat$1,tempQuat$1,u),t.isGoal){for(let e=0;e<d;e++){const t=f[e];i[n+e][0]=tempPos$2[t]}3===t.rotationDoFCount&&(i[n+d+0][0]=tempQuat$1[0],i[n+d+1][0]=tempQuat$1[1],i[n+d+2][0]=tempQuat$1[2],i[n+d+3][0]=tempQuat$1[3])}else i[n+0][0]=tempPos$2[0],i[n+1][0]=tempPos$2[1],i[n+2][0]=tempPos$2[2],i[n+3][0]=tempQuat$1[0],i[n+4][0]=tempQuat$1[1],i[n+5][0]=tempQuat$1[2],i[n+6][0]=tempQuat$1[3];return o.totalError=_,o.isConverged=m,o.rowCount=g,o}function accumulateTargetError(e,t,n,i=null,o={isConverged:!1,rowCount:7,totalError:0}){const{translationConvergeThreshold:r,rotationConvergeThreshold:a,lockedJointDoFCount:s,translationErrorClamp:l,rotationErrorClamp:c,lockedJointDoF:u}=e,{dofTarget:d,dofValues:h,translationDoFCount:p,rotationDoFCount:f,translationFactor:g,rotationFactor:m,dofList:_}=t,v=distance(h,d);let b=d[DOF.EX]-h[DOF.EX]+d[DOF.EY]-h[DOF.EY]+d[DOF.EZ]-h[DOF.EZ];const T=s.get(t)||0;if(o.rowCount=p+f-T,o.isConverged=v<r&&b<a,o.totalError=v+b,i){const e=u.get(t),o=0!==T;let r=0;tempPos$2[0]=d[0]-h[0],tempPos$2[1]=d[1]-h[1],tempPos$2[2]=d[2]-h[2];const a=length$1(tempPos$2);scale$2(tempPos$2,tempPos$2,g*l/a);for(let t=0,l=p;t<l;t++){const a=_[t];o&&e[a]||(i[n+r][0]=tempPos$2[a],r++)}tempEuler$1[0]=t.dofTarget[3]-t.dofValues[3],tempEuler$1[1]=t.dofTarget[4]-t.dofValues[4],tempEuler$1[2]=t.dofTarget[5]-t.dofValues[5];const s=length$1(tempEuler$1);scale$2(tempEuler$1,tempEuler$1,m*c/s);for(let t=p,l=p+f;t<l;t++){const a=_[t];o&&e[a]||(i[n+r][0]=tempEuler$1[a],r++)}}}var gaussJordan={exports:{}};!function(e,t){var n=function(){function e(t,n){this.data=new Array(t.length);for(var i=0,o=t[0].length;i<t.length;i++){this.data[i]=new Array(o);for(var r=0;r<o;r++)this.data[i][r]=t[i][r]}if(n){if("object"!=typeof n[0])for(i=0;i<n.length;i++)n[i]=[n[i]];this.mirror=new e(n)}}return e.prototype.swap=function(e,t){this.mirror&&this.mirror.swap(e,t);var n=this.data[e];this.data[e]=this.data[t],this.data[t]=n},e.prototype.multline=function(e,t){this.mirror&&this.mirror.multline(e,t);for(var n=this.data[e],i=n.length-1;i>=0;i--)n[i]*=t},e.prototype.addmul=function(e,t,n){this.mirror&&this.mirror.addmul(e,t,n);for(var i=this.data[e],o=this.data[t],r=i.length-1;r>=0;r--)i[r]=i[r]+n*o[r]},e.prototype.hasNullLine=function(e){for(var t=0;t<this.data[e].length;t++)if(0!==this.data[e][t])return!1;return!0},e.prototype.gauss=function(){for(var e=0,t=this.data.length,n=this.data[0].length,i=[],o=0;o<n;o++){for(var r=0,a=0,s=e;s<t;s++){var l=this.data[s][o];Math.abs(l)>Math.abs(r)&&(a=s,r=l)}if(0===r)i.push(e);else{this.multline(a,1/r),this.swap(a,e);for(var c=0;c<t;c++)c!==e&&this.addmul(c,e,-this.data[c][o])}e++}for(c=0;c<i.length;c++)if(!this.mirror.hasNullLine(i[c]))throw new Error("singular matrix");return this.mirror.data},t.solve=function(t,n){var i=new e(t,n).gauss();if(i.length>0&&1===i[0].length)for(var o=0;o<i.length;o++)i[o]=i[o][0];return i},t.invert=function(t){return new e(t,function(e){for(var t=new Array(e),n=0;n<e;n++){t[n]=new Array(e);for(var i=0;i<e;i++)t[n][i]=n===i?1:0}return t}(t.length)).gauss()},t}();e.exports=n}(gaussJordan,gaussJordan.exports);var gaussJordanExports=gaussJordan.exports;const linearSolve=getDefaultExportFromCjs(gaussJordanExports);var SVD=function(e,t,n,i,o){if(t=void 0===t||t,n=void 0===n||n,o=1e-64/(i=i||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var r,a,s,l,c,u,d,h,p,f,g,m,_,v=e[0].length,b=e.length;if(b<v)throw new TypeError("Invalid matrix: m < n");h=0,g=0;var T=[],A=[],y=[],E="f"===t?b:v;for(r=0;r<b;r++)A[r]=new Array(E).fill(0);for(r=0;r<v;r++)y[r]=new Array(v).fill(0);var S,C=new Array(v).fill(0);for(r=0;r<b;r++)for(a=0;a<v;a++)A[r][a]=e[r][a];for(r=0;r<v;r++){for(T[r]=h,f=0,l=r+1,a=r;a<b;a++)f+=Math.pow(A[a][r],2);if(f<o)h=0;else for(p=(d=A[r][r])*(h=d<0?Math.sqrt(f):-Math.sqrt(f))-f,A[r][r]=d-h,a=l;a<v;a++){for(f=0,s=r;s<b;s++)f+=A[s][r]*A[s][a];for(d=f/p,s=r;s<b;s++)A[s][a]=A[s][a]+d*A[s][r]}for(C[r]=h,f=0,a=l;a<v;a++)f+=Math.pow(A[r][a],2);if(f<o)h=0;else{for(p=(d=A[r][r+1])*(h=d<0?Math.sqrt(f):-Math.sqrt(f))-f,A[r][r+1]=d-h,a=l;a<v;a++)T[a]=A[r][a]/p;for(a=l;a<b;a++){for(f=0,s=l;s<v;s++)f+=A[a][s]*A[r][s];for(s=l;s<v;s++)A[a][s]=A[a][s]+f*T[s]}}(m=Math.abs(C[r])+Math.abs(T[r]))>g&&(g=m)}if(n)for(r=v-1;r>=0;r--){if(0!==h){for(p=A[r][r+1]*h,a=l;a<v;a++)y[a][r]=A[r][a]/p;for(a=l;a<v;a++){for(f=0,s=l;s<v;s++)f+=A[r][s]*y[s][a];for(s=l;s<v;s++)y[s][a]=y[s][a]+f*y[s][r]}}for(a=l;a<v;a++)y[r][a]=0,y[a][r]=0;y[r][r]=1,h=T[r],l=r}if(t){if("f"===t)for(r=v;r<b;r++){for(a=v;a<b;a++)A[r][a]=0;A[r][r]=1}for(r=v-1;r>=0;r--){for(l=r+1,h=C[r],a=l;a<E;a++)A[r][a]=0;if(0!==h){for(p=A[r][r]*h,a=l;a<E;a++){for(f=0,s=l;s<b;s++)f+=A[s][r]*A[s][a];for(d=f/p,s=r;s<b;s++)A[s][a]=A[s][a]+d*A[s][r]}for(a=r;a<b;a++)A[a][r]=A[a][r]/h}else for(a=r;a<b;a++)A[a][r]=0;A[r][r]=A[r][r]+1}}for(i*=g,s=v-1;s>=0;s--)for(var w=0;w<50;w++){for(S=!1,l=s;l>=0;l--){if(Math.abs(T[l])<=i){S=!0;break}if(Math.abs(C[l-1])<=i)break}if(!S)for(u=0,f=1,c=l-1,r=l;r<s+1&&(d=f*T[r],T[r]=u*T[r],!(Math.abs(d)<=i));r++)if(h=C[r],C[r]=Math.sqrt(d*d+h*h),u=h/(p=C[r]),f=-d/p,t)for(a=0;a<b;a++)m=A[a][c],_=A[a][r],A[a][c]=m*u+_*f,A[a][r]=-m*f+_*u;if(_=C[s],l===s){if(_<0&&(C[s]=-_,n))for(a=0;a<v;a++)y[a][s]=-y[a][s];break}for(g=C[l],d=(((m=C[s-1])-_)*(m+_)+((h=T[s-1])-(p=T[s]))*(h+p))/(2*p*m),h=Math.sqrt(d*d+1),d=((g-_)*(g+_)+p*(m/(d<0?d-h:d+h)-p))/g,u=1,f=1,r=l+1;r<s+1;r++){if(h=T[r],m=C[r],p=f*h,h*=u,_=Math.sqrt(d*d+p*p),T[r-1]=_,d=g*(u=d/_)+h*(f=p/_),h=-g*f+h*u,p=m*f,m*=u,n)for(a=0;a<v;a++)g=y[a][r-1],_=y[a][r],y[a][r-1]=g*u+_*f,y[a][r]=-g*f+_*u;if(_=Math.sqrt(d*d+p*p),C[r-1]=_,d=(u=d/_)*h+(f=p/_)*m,g=-f*h+u*m,t)for(a=0;a<b;a++)m=A[a][r-1],_=A[a][r],A[a][r-1]=m*u+_*f,A[a][r]=-m*f+_*u}T[l]=0,T[s]=d,C[s]=g}for(r=0;r<v;r++)C[r]<i&&(C[r]=0);return{u:A,q:C,v:y}};function transpose(e,t){const n=t.length,i=t[0].length;for(let o=0;o<n;o++)for(let n=0;n<i;n++)e[n][o]=t[o][n]}function identity(e){for(let t=0,n=e.length;t<n;t++)for(let i=0,o=e.length;i<o;i++)e[t][i]=t===i?1:0}function scale(e,t,n){for(let i=0,o=e.length;i<o;i++)for(let r=0,a=e.length;r<a;r++)e[i][r]=t[i][r]*n}function multiply(e,t,n){if(t===e||n===e)throw new Error("Matrix: Cannot multiply to a matrix in place.");const i=t.length,o=n.length,r=n[0].length;for(let a=0,s=i;a<s;a++)for(let i=0,l=r;i<l;i++){let r=0;for(let e=0,s=o;e<s;e++)r+=t[a][e]*n[e][i];e[a][i]=r}}function create(e,t){const n=new Array(e);for(let i=0;i<e;i++)n[i]=new Float64Array(t);return n}function copy(e,t){const n=t.length,i=t[0].length;for(let o=0;o<n;o++)for(let n=0;n<i;n++)e[o][n]=t[o][n]}function clone(e){const t=create(e.length,e[0].length);return copy(t,e),t}function solve(e,t,n){const i=linearSolve.solve(t,n);for(let o=0,r=i.length;o<r;o++)e[o].set(i[o])}function svd(e,t,n,i){const{u:o,v:r,q:a}=SVD(i),s=o.length;for(let u=0;u<s;u++)e[u].set(o[u]);const l=r.length;for(let u=0;u<l;u++)n[u].set(r[u]);const c=a.length;for(let u=0;u<c;u++){const e=t[u],n=a[u];e.fill(0),e[u]=n}}function invert(e,t){const n=linearSolve.invert(t),i=t[0].length,o=t.length;for(let r=0;r<i;r++)for(let t=0;t<o;t++)e[r][t]=n[r][t]}function add(e,t,n){const i=t.length,o=t[0].length;for(let r=0;r<i;r++)for(let i=0;i<o;i++)e[r][i]=t[r][i]+n[r][i]}function subtract(e,t,n){const i=t.length,o=t[0].length;for(let r=0;r<i;r++)for(let i=0;i<o;i++)e[r][i]=t[r][i]-n[r][i]}function magnitudeSquared(e){let t=0;const n=e.length,i=e[0].length;for(let o=0;o<n;o++)for(let n=0;n<i;n++)t+=e[o][n]**2;return t}function magnitude(e){return Math.sqrt(magnitudeSquared(e))}function toString(e,t=3){const n=e.length,i=e[0].length;let o="";for(let r=0;r<n;r++){for(let n=0;n<i;n++)o+=e[r][n].toFixed(t)+", ";o+="\n"}return o}function log(e,t){console.log(toString(e,t))}const mat={transpose:transpose,identity:identity,scale:scale,multiply:multiply,create:create,copy:copy,clone:clone,solve:solve,svd:svd,invert:invert,add:add,subtract:subtract,magnitudeSquared:magnitudeSquared,magnitude:magnitude,toString:toString,log:log},targetRelativeToJointMatrix=new Float64Array(16),targetDeltaWorldMatrix=new Float64Array(16),tempDeltaWorldMatrix=new Float64Array(16),tempInverseMatrixWorld=new Float64Array(16),tempQuat=new Float64Array(4),tempPos$1=new Float64Array(3),tempQuat2=new Float64Array(4),tempPos2=new Float64Array(3),targetJoints=[],freeJoints=[],errorResultInfo={rowCount:0,isConverged:!1,totalError:0},dofResultInfo={errorRows:0,freeDoF:0,totalError:0},SOLVE_STATUS={CONVERGED:0,STALLED:1,DIVERGED:2,TIMEOUT:3};Object.entries(SOLVE_STATUS).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]));class ChainSolver{constructor(e){this.chain=Array.from(e),this.targets=null,this.affectedClosures=null,this.affectedConnectedClosures=null,this.lockedJointDoFCount=null,this.lockedJointDoF=null,this.prevDoFValues=null,this.maxIterations=-1,this.matrixPool=null,this.useSVD=!1,this.translationConvergeThreshold=-1,this.rotationConvergeThreshold=-1,this.translationFactor=-1,this.rotationFactor=-1,this.translationStep=-1,this.rotationStep=-1,this.translationErrorClamp=-1,this.rotationErrorClamp=-1,this.stallThreshold=-1,this.dampingFactor=-1,this.divergeThreshold=-1,this.restPoseFactor=-1,this.init()}init(){const e=this.chain,t=e.filter((e=>e.targetSet||e.isClosure)),n=new Map,i=new Map,o=new Map,r=new Map,a=new Map;e.forEach((e=>{r.set(e,new Set),a.set(e,new Set),n.set(e,new Uint8Array(6)),o.set(e,new Float64Array(6))})),t.forEach((e=>{if(e.isClosure){let t=e;for(;t;)t.isJoint&&r.get(t).add(e),t=t.parent;for(t=e.child;t;)t.isJoint&&a.get(t).add(e),t=t.parent}})),this.targets=t,this.affectedClosures=r,this.affectedConnectedClosures=a,this.lockedJointDoF=n,this.lockedJointDoFCount=i,this.prevDoFValues=o}solve(){const{divergeThreshold:e,stallThreshold:t,chain:n,restPoseFactor:i,lockedJointDoFCount:o,prevDoFValues:r,useSVD:a,matrixPool:s}=this;let l=0,c=1/0,u=-1;o.clear();for(let d=0,h=n.length;d<h;d++){const e=n[d];(e.targetSet||e.restPoseSet)&&e.tryMinimizeEulerAngles()}for(;;){s.releaseAll();for(let e=0,t=n.length;e<t;e++){n[e].updateMatrixWorld()}targetJoints.length=0,freeJoints.length=0,this.countUnconvergedVariables(freeJoints,targetJoints,dofResultInfo);const{freeDoF:o,errorRows:d,totalError:h}=dofResultInfo;if(0===d){u=SOLVE_STATUS.CONVERGED;break}if(h>c+e){r.forEach(((e,t)=>{t.dofValues.set(e),t.setMatrixDoFNeedsUpdate()})),u=SOLVE_STATUS.DIVERGED;break}if(c=h,l++,l>this.maxIterations){u=SOLVE_STATUS.TIMEOUT;break}const p=s.get(d,1);this.fillErrorVector(targetJoints,p);const f=s.get(d,o);this.fillJacobian(targetJoints,freeJoints,f);const g=s.get(o,d);let m=!1;if(a)try{const e=d,t=o,n=Math.min(e,t),i=s.get(e,n),r=s.get(n,n),a=s.get(t,n);mat.svd(i,r,a,f);const l=s.get(n,e),c=s.get(n,n);mat.transpose(l,i);for(let o=0,s=r.length;o<s;o++){const e=r[o][o];let t;t=Math.abs(e)<.001?0:1/e,c[o][o]=t}const u=s.get(t,n);mat.multiply(u,a,c),mat.multiply(g,u,l)}catch(err){m=!0}if(!a||m){const e=s.get(d,d);mat.identity(e),mat.scale(e,e,this.dampingFactor**2);const t=s.get(o,d);mat.transpose(t,f);const n=s.get(d,d);mat.multiply(n,f,t);const i=s.get(d,d);mat.add(i,n,e);const r=s.get(d,d);mat.invert(r,i),mat.multiply(g,t,r)}const _=s.get(o,1);if(mat.multiply(_,g,p),0!==i){const e=s.get(o,1),t=s.get(o,1);let n=0;for(let i=0,o=freeJoints.length;i<o;i++){const t=freeJoints[i],o=this.lockedJointDoFCount.get(t)||0,r=0!==o,a=this.lockedJointDoF.get(t),s=t.rotationDoFCount+t.translationDoFCount-o;if(t.restPoseSet){const i=t.dof,o=t.dofValues,l=t.dofRestPose;for(let t=0;t<s;t++){const s=i[t];r&&a[s]||(e[n][0]=l[s]-o[s],n++)}}else for(let i=0;i<s;i++)e[n][0]=0,n++}const r=s.get(o,o);mat.multiply(r,g,f);const a=s.get(o,o);mat.identity(a);const l=s.get(o,o);mat.subtract(l,a,r),mat.multiply(t,l,e);for(let s=0;s<o;s++){const e=t[s][0];_[s][0]+=e*i}}if(t>0){let e=!0;for(let n=0,i=_.length;n<i;n++){const i=_[n][0];if(Math.abs(i)>t){e=!1;break}}if(e){u=SOLVE_STATUS.STALLED;break}}r.forEach(((e,t)=>{e.set(t.dofValues)})),this.applyJointAngles(freeJoints,_)}return targetJoints.length=0,freeJoints.length=0,u}applyJointAngles(e,t){const{lockedJointDoF:n,lockedJointDoFCount:i}=this;let o=!1,r=0;for(let a=0,s=e.length;a<s;a++){const s=e[a],l=s.dof,c=n.get(s),u=i.has(s);for(let e=0,n=l.length;e<n;e++){const n=l[e];if(u&&c[n])continue;const a=s.getDoFValue(n);if(s.setDoFValue(n,a+t[r][0])){i.has(s)||(i.set(s,0),c.fill(0));const e=i.get(s);i.set(s,e+1),c[n]=1,o=!0}r++}}if(r!==t.length)throw new Error;return o}fillJacobian(e,t,n){const{translationStep:i,rotationStep:o,lockedJointDoF:r,lockedJointDoFCount:a,translationFactor:s,rotationFactor:l}=this,c=this.affectedClosures,u=this.affectedConnectedClosures;let d=0;for(let h=0,p=t.length;h<p;h++){const p=t[h],f=c.get(p),g=u.get(p),m=p.dof,_=p.translationDoFCount+p.rotationDoFCount,v=a.has(p),b=r.get(p);invert$2(tempInverseMatrixWorld,p.matrixWorld);for(let t=0;t<_;t++){const r=m[t];if(v&&b[r])continue;let a=0,c=r<3?i:o;p.getDeltaWorldMatrix(r,c,tempDeltaWorldMatrix)&&(c*=-1);for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i.isClosure)if(f.has(i)||g.has(i))if(i.getClosureError(tempPos$1,tempQuat),g.has(i)?(multiply$1(targetRelativeToJointMatrix,tempInverseMatrixWorld,i.child.matrixWorld),multiply$1(targetDeltaWorldMatrix,tempDeltaWorldMatrix,targetRelativeToJointMatrix),getMatrixDifference(i.matrixWorld,targetDeltaWorldMatrix,tempPos2,tempQuat2)):(multiply$1(targetRelativeToJointMatrix,tempInverseMatrixWorld,i.matrixWorld),multiply$1(targetDeltaWorldMatrix,tempDeltaWorldMatrix,targetRelativeToJointMatrix),getMatrixDifference(targetDeltaWorldMatrix,i.child.matrixWorld,tempPos2,tempQuat2)),subtract$2(tempPos$1,tempPos$1,tempPos2),scale$2(tempPos$1,tempPos$1,s/c),subtract$1(tempQuat,tempQuat,tempQuat2),scale$1(tempQuat,tempQuat,l/c),i.isGoal){const{translationDoFCount:e,rotationDoFCount:t,dof:o}=i;for(let i=0;i<e;i++){const e=o[i];n[a+i][d]=tempPos$1[e]}3===t&&(n[a+e+0][d]=tempQuat[0],n[a+e+1][d]=tempQuat[1],n[a+e+2][d]=tempQuat[2],n[a+e+3][d]=tempQuat[3],a+=4),a+=e}else n[a+0][d]=tempPos$1[0],n[a+1][d]=tempPos$1[1],n[a+2][d]=tempPos$1[2],n[a+3][d]=tempQuat[0],n[a+4][d]=tempQuat[1],n[a+5][d]=tempQuat[2],n[a+6][d]=tempQuat[3],a+=7;else{let e=7;i.isGoal&&(e=i.translationDoFCount,3===i.rotationDoFCount&&(e+=4));for(let t=0;t<e;t++)n[a+t][d]=0;a+=e}if(i.targetSet){const e=i.translationDoFCount+i.rotationDoFCount;if(p===i)for(let t=0;t<e;t++)n[a+d][d]=-1;else for(let t=0;t<e;t++)n[a+t][d]=0;a+=e}}d++}}if(d!==n[0].length)throw new Error}fillErrorVector(e,t){let n=0;for(let i=0,o=e.length;i<o;i++){const o=e[i];o.isClosure&&(accumulateClosureError(this,o,n,t,errorResultInfo),n+=errorResultInfo.rowCount),o.targetSet&&(accumulateTargetError(this,o,n,t,errorResultInfo),n+=errorResultInfo.rowCount)}}countUnconvergedVariables(e,t,n){const{lockedJointDoFCount:i}=this,o=this.chain;let r=0,a=0,s=0,l=0;for(let c=0,u=o.length;c<u;c++){let n=!1;const u=o[c],d=i.get(u)||0;u.isClosure&&(accumulateClosureError(this,u,a,null,errorResultInfo),errorResultInfo.isConverged||(s+=errorResultInfo.rowCount,r+=errorResultInfo.totalError),n=!0,a+=errorResultInfo.rowCount);const h=u.dof;u.targetSet&&(accumulateTargetError(this,u,a,null,errorResultInfo),errorResultInfo.isConverged||(s+=errorResultInfo.rowCount,r+=errorResultInfo.totalError),n=!0,a+=errorResultInfo.rowCount),!u.isGoal&&h.length>0&&(l+=h.length-d,e.push(u)),n&&t.push(u)}0===s&&(a=0),n.errorRows=a,n.freeDoF=l,n.totalError=r}}function findRoots(e){const t=e.map((e=>{let t=e;return e.traverseParents((e=>{t=e})),t})),n=[],i=new Set;for(let o=0;o<t.length;o++){const e=t[o];i.has(e)||(n.push(e),e.traverse((e=>{if(i.has(e))return!0;let n;i.add(e),e.isLink?n=e.closureJoints:e.isJoint&&e.isClosure&&(n=[e.child]),n&&n.forEach((e=>{let n=e;e.traverseParents((e=>{n=e})),i.has(n)||t.push(n)}))})))}return n}class FixedMatrixPool{constructor(e,t){const n=[];let i=0;this.get=function(){let o=n[i];return o||(n[i]=o=mat.create(e,t)),i++,o},this.releaseAll=function(){i=0}}}class MatrixPool{constructor(){const e={},t=[];this.get=function(n,i){let o=e[n];o||(o=e[n]={});let r=o[i];return r||(r=o[i]=new FixedMatrixPool(n,i),t.push(r)),r.get()},this.releaseAll=function(){for(let e=0,n=t.length;e<n;e++)t[e].releaseAll()}}}class Solver{constructor(e=[]){this.matrixPool=new MatrixPool,this.useSVD=!1,this.maxIterations=5,this.stallThreshold=1e-4,this.dampingFactor=.001,this.divergeThreshold=.01,this.restPoseFactor=.01,this.translationConvergeThreshold=.001,this.rotationConvergeThreshold=1e-5,this.translationFactor=1,this.rotationFactor=1,this.translationStep=.001,this.rotationStep=.001,this.translationErrorClamp=.1,this.rotationErrorClamp=.1,this.roots=Array.isArray(e)?[...e]:[e],this.solvers=null,this.updateStructure()}updateStructure(){const e=findRoots(this.roots),t=[],n=new Set,i=new Set,o=e=>{if(e.isJoint){const o=e;if(n.add(o),o.isClosure){const e=new Set;let r=o.child;for(;r;){if(r.isJoint){if(n.has(r))break;e.add(r),i.add(r)}r=r.parent}n.forEach((t=>{e.add(t),i.add(t)})),t.push(e)}}const r=e.children;for(let t=0,n=r.length;t<n;t++)o(r[t]);n.delete(e)};e.forEach(o);const r=[];for(;t.length;){const e=t.pop();r.push(e);for(let n=0;n<t.length;n++){const i=t[n];let o=!1;i.forEach((t=>{o=o||e.has(t)})),o&&(i.forEach((t=>e.add(t))),t.splice(n,1),n--)}}const a=new Set;e.forEach((e=>e.traverse((e=>{e.isJoint&&e.dof.length>0&&!i.has(e)&&a.add(e)})))),this.solvers=r.map((e=>new ChainSolver(e))),this.nonChainJoints=a}solve(){const{solvers:e,nonChainJoints:t}=this;t.forEach((e=>{e.targetSet&&(e.dofValues.set(e.dofTarget),e.setMatrixDoFNeedsUpdate())}));const n=[];for(let i=0,o=e.length;i<o;i++){const t=e[i];t.matrixPool=this.matrixPool,t.useSVD=this.useSVD,t.maxIterations=this.maxIterations,t.stallThreshold=this.stallThreshold,t.dampingFactor=this.dampingFactor,t.divergeThreshold=this.divergeThreshold,t.restPoseFactor=this.restPoseFactor,t.translationConvergeThreshold=this.translationConvergeThreshold,t.rotationConvergeThreshold=this.rotationConvergeThreshold,t.translationFactor=this.translationFactor,t.rotationFactor=this.rotationFactor,t.translationStep=this.translationStep,t.rotationStep=this.rotationStep,t.translationErrorClamp=this.translationErrorClamp,t.rotationErrorClamp=this.rotationErrorClamp;const o=t.solve();n.push(o)}return n}}exports("M",Solver);const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new WireframeGeometry(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),_box$1.setFromBufferAttribute(t),this.boundingBox.union(_box$1))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let o=0,r=e.count;o<r;o++)_vector.fromBufferAttribute(e,o),i=Math.max(i,n.distanceToSquared(_vector)),_vector.fromBufferAttribute(t,o),i=Math.max(i,n.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},ShaderLib.line={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );\n\t\t\t\tvec3 worldUp = normalize( cross( worldDir, tmpFwd ) );\n\t\t\t\tvec3 worldFwd = cross( worldDir, worldUp );\n\t\t\t\tworldPos = position.y < 0.5 ? start: end;\n\n\t\t\t\t// height offset\n\t\t\t\tfloat hw = linewidth * 0.5;\n\t\t\t\tworldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// cap extension\n\t\t\t\t\tworldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;\n\n\t\t\t\t\t// add width to the box\n\t\t\t\t\tworldPos.xyz += worldFwd * hw;\n\n\t\t\t\t\t// endcaps\n\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\tworldPos.xyz -= worldFwd * 2.0 * hw;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class LineMaterial extends ShaderMaterial{constructor(e){super({type:"LineMaterial",uniforms:UniformsUtils.clone(ShaderLib.line.uniforms),vertexShader:ShaderLib.line.vertexShader,fragmentShader:ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){!0===e!==this.dashed&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(!0===e!==this.alphaToCoverage&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1))}}const _start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere=new Sphere,_clipToWorldVector=new Vector4;let _ray$1,_lineWidth;function getWorldSpaceHalfWidth(e,t,n){return _clipToWorldVector.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/n.width,_clipToWorldVector.y=_lineWidth/n.height,_clipToWorldVector.applyMatrix4(e.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(e,t){const n=e.matrixWorld,i=e.geometry,o=i.attributes.instanceStart,r=i.attributes.instanceEnd;for(let a=0,s=Math.min(i.instanceCount,o.count);a<s;a++){_line.start.fromBufferAttribute(o,a),_line.end.fromBufferAttribute(r,a),_line.applyMatrix4(n);const i=new Vector3,s=new Vector3;_ray$1.distanceSqToSegment(_line.start,_line.end,s,i);s.distanceTo(i)<.5*_lineWidth&&t.push({point:s,pointOnLine:i,distance:_ray$1.origin.distanceTo(s),object:e,face:null,faceIndex:a,uv:null,uv1:null})}}function raycastScreenSpace(e,t,n){const i=t.projectionMatrix,o=e.material.resolution,r=e.matrixWorld,a=e.geometry,s=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,s.count),u=-t.near;_ray$1.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4(t.matrixWorldInverse),_ssOrigin.applyMatrix4(i),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=o.x/2,_ssOrigin.y*=o.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices(t.matrixWorldInverse,r);for(let d=0,h=c;d<h;d++){_start4.fromBufferAttribute(s,d),_end4.fromBufferAttribute(l,d),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix);if(_start4.z>u&&_end4.z>u)continue;if(_start4.z>u){const e=_start4.z-_end4.z,t=(_start4.z-u)/e;_start4.lerp(_end4,t)}else if(_end4.z>u){const e=_end4.z-_start4.z,t=(_end4.z-u)/e;_end4.lerp(_start4,t)}_start4.applyMatrix4(i),_end4.applyMatrix4(i),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=o.x/2,_start4.y*=o.y/2,_end4.x*=o.x/2,_end4.y*=o.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const t=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(t,_closestPoint);const a=MathUtils.lerp(_start4.z,_end4.z,t),c=a>=-1&&a<=1,h=_ssOrigin3.distanceTo(_closestPoint)<.5*_lineWidth;if(c&&h){_line.start.fromBufferAttribute(s,d),_line.end.fromBufferAttribute(l,d),_line.start.applyMatrix4(r),_line.end.applyMatrix4(r);const t=new Vector3,i=new Vector3;_ray$1.distanceSqToSegment(_line.start,_line.end,i,t),n.push({point:i,pointOnLine:t,distance:_ray$1.origin.distanceTo(i),object:e,face:null,faceIndex:d,uv:null,uv1:null})}}}class LineSegments2 extends Mesh{constructor(e=new LineSegmentsGeometry,t=new LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let r=0,a=0,s=t.count;r<s;r++,a+=2)_start.fromBufferAttribute(t,r),_end.fromBufferAttribute(n,r),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+_start.distanceTo(_end);const o=new InstancedInterleavedBuffer(i,2,1);return e.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(o,1,0)),e.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(o,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;null!==i||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=void 0!==e.params.Line2&&e.params.Line2.threshold||0;_ray$1=e.ray;const r=this.matrixWorld,a=this.geometry,s=this.material;let l,c;if(_lineWidth=s.linewidth+o,null===a.boundingSphere&&a.computeBoundingSphere(),_sphere.copy(a.boundingSphere).applyMatrix4(r),n)l=.5*_lineWidth;else{l=getWorldSpaceHalfWidth(i,Math.max(i.near,_sphere.distanceToPoint(_ray$1.origin)),s.resolution)}if(_sphere.radius+=l,!1!==_ray$1.intersectsSphere(_sphere)){if(null===a.boundingBox&&a.computeBoundingBox(),_box.copy(a.boundingBox).applyMatrix4(r),n)c=.5*_lineWidth;else{c=getWorldSpaceHalfWidth(i,Math.max(i.near,_box.distanceToPoint(_ray$1.origin)),s.resolution)}_box.expandByScalar(c),!1!==_ray$1.intersectsBox(_box)&&(n?raycastWorldUnits(this,t):raycastScreenSpace(this,i,t))}}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Line2 extends LineSegments2{constructor(e=new LineGeometry,t=new LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}const glTempPos=new Float64Array(3),glTempMatrix=new Float64Array(16),tempMatrix=new Matrix4,tempParentMatrixWorld=new Matrix4;class IKLinkHelper extends Group$2{constructor(e){super(),this.frame=e;const t=new Line2;t.geometry.setPositions([0,0,0,0,0,0]),t.material.color.set(16777215),t.material.linewidth=2,this.add(t),this.line=t}update(){const{frame:e,line:t}=this;e.parent?(glTempPos[0]=0,glTempPos[1]=0,glTempPos[2]=0,invert$2(glTempMatrix,e.matrix),transformMat4(glTempPos,glTempPos,glTempMatrix),t.geometry.setPositions([...glTempPos,0,0,0]),t.visible=!0,length$1(glTempPos)<1e-7&&(t.visible=!1)):t.visible=!1}updateMatrixWorld(...e){const t=this.frame;t.updateMatrixWorld(),t.isJoint?t.parent?(tempMatrix.set(...t.matrix).transpose(),tempParentMatrixWorld.set(...t.parent.matrixWorld).transpose(),this.matrix.multiplyMatrices(tempParentMatrixWorld,tempMatrix)):(tempMatrix.set(...t.matrix).transpose(),this.matrix.set(...t.matrix).transpose()):this.matrix.set(...t.matrixWorld).transpose(),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(...e)}dispose(){this.traverse((e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()}))}}const tempPos=new Vector3,tempRot=new Vector3;class RotationLimitHelper extends Mesh{constructor(e,t){super(void 0,e),this._dof=t,this._min=null,this._delta=null,this.setLimits(0,2*Math.PI)}setLimits(e,t){const n=Math.min(t-e,2*Math.PI);if(e===-1/0&&(e=0),this._min===e&&this._delta===n)return;this._min=e,this._delta=n,this.geometry&&this.geometry.dispose();const i=this._dof,o=new CylinderGeometry(.075,.075,1e-7,100,1,!1,e,n);i===DOF.EX&&o.rotateZ(HALF_PI),i===DOF.EZ&&o.rotateX(HALF_PI),this.geometry=o}}class IKJointHelper extends IKLinkHelper{constructor(e){super(e);const t=new Mesh(new CylinderGeometry(.05,.05,.25,30,1).rotateZ(HALF_PI),new MeshStandardMaterial),n=new RotationLimitHelper(new MeshStandardMaterial,DOF.EX),i=new Mesh(new CylinderGeometry(.05,.05,.25,30,1),new MeshStandardMaterial),o=new RotationLimitHelper(new MeshStandardMaterial,DOF.EY),r=new Mesh(new CylinderGeometry(.05,.05,.25,30,1).rotateX(HALF_PI),new MeshStandardMaterial),a=new RotationLimitHelper(new MeshStandardMaterial,DOF.EZ);a.rotation.set(HALF_PI,0,0);const s=new Mesh(new SphereGeometry(.05,30,30),new MeshStandardMaterial),l=new Mesh(new BoxGeometry(.05,.05,.05),new MeshStandardMaterial),c=new Line2;c.geometry.setPositions([0,0,0,1,0,0,1,1,0,1,1,1]),c.material.color.set(16777215),c.material.side=2,c.material.linewidth=2,this.add(t,i,r,n,o,a,s,c,l),this.xRotationMesh=t,this.yRotationMesh=i,this.zRotationMesh=r,this.xRotationLimits=n,this.yRotationLimits=o,this.zRotationLimits=a,this.translationMesh=c,this.freeRotationMesh=s,this.fixedMesh=l}setJointScale(e){this.xRotationMesh.scale.setScalar(e),this.yRotationMesh.scale.setScalar(e),this.zRotationMesh.scale.setScalar(e),this.xRotationLimits.scale.setScalar(e),this.yRotationLimits.scale.setScalar(e),this.zRotationLimits.scale.setScalar(e),this.freeRotationMesh.scale.setScalar(e),this.fixedMesh.scale.setScalar(e)}update(){super.update();const{xRotationMesh:e,yRotationMesh:t,zRotationMesh:n,xRotationLimits:i,yRotationLimits:o,zRotationLimits:r,freeRotationMesh:a,translationMesh:s,fixedMesh:l}=this,c=this.frame;e.visible=!1,t.visible=!1,n.visible=!1,i.visible=!1,o.visible=!1,r.visible=!1,a.visible=!1,s.visible=!1,l.visible=!1,0!==c.translationDoFCount&&(s.visible=!0),3===c.rotationDoFCount?(a.visible=!0,i.visible=!0,o.visible=!0,r.visible=!0):(e.visible=Boolean(c.dofFlags[DOF.EX]),t.visible=Boolean(c.dofFlags[DOF.EY]),n.visible=Boolean(c.dofFlags[DOF.EZ]),i.visible=Boolean(c.dofFlags[DOF.EX]),o.visible=Boolean(c.dofFlags[DOF.EY]),r.visible=Boolean(c.dofFlags[DOF.EZ])),0===c.translationDoFCount&&0===c.rotationDoFCount&&(this.visible=this.line.visible)}updateMatrixWorld(...e){const{xRotationMesh:t,yRotationMesh:n,zRotationMesh:i,xRotationLimits:o,yRotationLimits:r,zRotationLimits:a,freeRotationMesh:s,translationMesh:l}=this,c=this.frame;tempPos.set(c.getDoFValue(DOF.X),c.getDoFValue(DOF.Y),c.getDoFValue(DOF.Z)),tempRot.set(c.getDoFValue(DOF.EX),c.getDoFValue(DOF.EY),c.getDoFValue(DOF.EZ)),l.scale.copy(tempPos),t.position.copy(tempPos),o.position.copy(tempPos),o.setLimits(c.getMinLimit(DOF.EX),c.getMaxLimit(DOF.EX)),n.position.copy(tempPos),n.rotation.set(tempRot.x,0,0),r.position.copy(tempPos),r.rotation.set(tempRot.x,0,0),r.setLimits(c.getMinLimit(DOF.EY),c.getMaxLimit(DOF.EY)),i.position.copy(tempPos),i.rotation.set(tempRot.x,tempRot.y,0),a.position.copy(tempPos),a.rotation.set(tempRot.x,tempRot.y,0),a.setLimits(c.getMinLimit(DOF.EZ),c.getMaxLimit(DOF.EZ)),s.position.copy(tempPos),super.updateMatrixWorld(...e)}}const currLinks=new Set,currJoints=new Set;class IKRootsHelper extends Group$2{constructor(e=[]){super(),this.roots=Array.isArray(e)?[...e]:[e],this.joints=new Map,this.links=new Map,this.resolution=new Vector2(1e3,1e3),this.drawThrough=!1,this.color=new Color(16777215),this.jointScale=1,this.updateStructure()}_updateHelpers(){const{drawThrough:e,resolution:t,color:n,jointScale:i}=this;this.traverse((o=>{const r=o.material;r&&(r.color.copy(n),r.isLineMaterial&&r.uniforms.resolution.value.copy(t),e?(r.opacity=.1,r.transparent=!0,r.depthWrite=!1,r.depthTest=!1):(r.opacity=1,r.transparent=!1,r.depthWrite=!0,r.depthTest=!0)),o instanceof IKJointHelper&&o.setJointScale(i)}))}setColor(e){return e.isColor?this.color.copy(e):this.color.set(e),this._updateHelpers(),this}setJointScale(e){return this.jointScale=e,this._updateHelpers(),this}setDrawThrough(e){return this.drawThrough=e,this._updateHelpers(),this}setResolution(e,t){return this.resolution.set(e,t),this._updateHelpers(),this}updateStructure(){const{joints:e,links:t}=this,n=findRoots(this.roots);currJoints.clear(),e.forEach(((e,t)=>currJoints.add(t))),currLinks.clear(),t.forEach(((e,t)=>currLinks.add(t)));for(let i=0,o=n.length;i<o;i++){const o=n[i];o.updateMatrixWorld(!0),o.traverse((n=>{if(n.isJoint){let t;e.has(n)?t=e.get(n):(t=new IKJointHelper(n),this.add(t),e.set(n,t)),t.update(),currJoints.delete(n)}else{let e;t.has(n)?e=t.get(n):(e=new IKLinkHelper(n),this.add(e),t.set(n,e)),e.update(),currLinks.delete(n)}}))}currJoints.forEach((t=>{const n=e.get(t);this.remove(n),n.dispose()})),currLinks.forEach((e=>{const n=t.get(e);this.remove(n),n.dispose()})),this._updateHelpers()}dispose(){const{links:e,joints:t}=this;t.forEach((([e,t])=>{this.remove(t),t.dispose()})),t.clear(),e.forEach((([e,t])=>{this.remove(t),t.dispose()})),e.clear()}}exports("J",IKRootsHelper);const tempVec=new Float64Array(3),tempVec2=new Float64Array(3),tempEuler=new Euler;function urdfRobotToIKRoot(e,t=!1,n=!0){let i,o=null,r=!0;if(e.isURDFRobot)o=new Joint,o.name="__world_joint__",o.setDoF(DOF.X,DOF.Y,DOF.Z,DOF.EX,DOF.EY,DOF.EZ),i=new Link,i.name=e.name,o.addChild(i);else if(e.isURDFLink)i=new Link,i.name=e.name,r=!t;else{if(!e.isURDFJoint)return null;{o=new Joint;const n=e.jointType;switch(n){case"continuous":case"revolute":case"prismatic":{const t=new Link;o.addChild(t);const r=new Joint;r.name=e.name,t.addChild(r);const a=new Link;r.addChild(a);const s=new Joint;a.addChild(s),tempVec[0]=0,tempVec[1]=0,tempVec[2]=1,tempVec2[0]=e.axis.x,tempVec2[1]=e.axis.y,tempVec2[2]=e.axis.z,rotationTo(r.quaternion,tempVec,tempVec2),invert$1(s.quaternion,r.quaternion),r.setMatrixNeedsUpdate(),s.setMatrixNeedsUpdate(),"revolute"===n||"continuous"===n?r.setDoF(DOF.EZ):r.setDoF(DOF.Z),"continuous"!==n&&(r.setMinLimits(e.limit.lower),r.setMaxLimits(e.limit.upper)),i=s;break}case"fixed":i=o,r=!t;break;default:console.error(`urdfRobotToIKRoot: Joint type ${n} not supported.`),r=!t}}}n||((o||i).setPosition(e.position.x,e.position.y,e.position.z),(o||i).setQuaternion(e.quaternion.x,e.quaternion.y,e.quaternion.z,e.quaternion.w));const a=e.children;for(let s=0,l=a.length;s<l;s++){const e=urdfRobotToIKRoot(a[s],t,!1);e&&(i.addChild(e),r=!0)}return!t||r?o||i:null}function setIKFromUrdf(e,t){e.setDoFValue(DOF.X,t.position.x),e.setDoFValue(DOF.Y,t.position.y),e.setDoFValue(DOF.Z,t.position.z),tempEuler.copy(t.rotation),tempEuler.reorder("ZYX"),e.setDoFValue(DOF.EX,tempEuler.x),e.setDoFValue(DOF.EY,tempEuler.y),e.setDoFValue(DOF.EZ,tempEuler.z),e.traverse((e=>{if(e.isJoint){const n=e.name;n in t.joints&&e.setDoFValues(t.joints[n].angle)}}))}function setUrdfFromIK(e,t){t.updateMatrixWorld(),e.matrix.set(...t.matrixWorld).transpose(),e.matrix.decompose(e.position,e.quaternion,e.scale),t.traverse((t=>{if(t.isJoint){const n=t,i=e.joints[t.name];i&&("prismatic"===i.jointType?i.setJointValue(n.getDoFValue(DOF.Z)):i.setJointValue(n.getDoFValue(DOF.EZ)))}}))}const legJointsNames=["right_hip_pitch_joint","right_hip_roll_joint","right_hip_yaw_joint","right_knee_joint","right_ankle_pitch_joint","right_ankle_roll_joint","left_hip_pitch_joint","left_hip_roll_joint","left_hip_roll_joint","left_knee_joint","left_ankle_pitch_joint","left_ankle_roll_joint"];class G1Robot{constructor(e,t,n=!1){_defineProperty(this,"scene",void 0),_defineProperty(this,"validLegJoints",void 0),_defineProperty(this,"urdfRoot",void 0),_defineProperty(this,"ikRoot",void 0),_defineProperty(this,"ikHelper",void 0),_defineProperty(this,"ikFootGoals",void 0),_defineProperty(this,"footLinks",void 0),_defineProperty(this,"ikSolvers",void 0),_defineProperty(this,"velocity",void 0),_defineProperty(this,"mapPP",void 0),_defineProperty(this,"lightMaterial",void 0),_defineProperty(this,"stanceIndex",void 0),_defineProperty(this,"swingIndex",void 0),_defineProperty(this,"armSwing",void 0),this.scene=e,this.swingIndex=0,this.stanceIndex=1,this.armSwing=0,this.urdfRoot=t,this.velocity=new Vector3(0,0,0),this.ikRoot=urdfRobotToIKRoot(t,!1),this.ikRoot.setDoF(),this.mapPP=new Vector3(0,0,0),this.validLegJoints=[-.7,0,0,1.4,0,0,-.7,0,0,1.4,0,0],this.setLegJoints(this.validLegJoints),setIKFromUrdf(this.ikRoot,this.urdfRoot),n&&(this.ikHelper=new IKRootsHelper([this.ikRoot]),this.ikHelper.setColor(16746496),this.ikHelper.setDrawThrough(!0),this.ikHelper.setJointScale(.2),this.scene.add(this.ikHelper)),this.ikFootGoals=[],this.ikSolvers=[],this.footLinks=[this.urdfRoot.links.left_ankle_roll_link,this.urdfRoot.links.right_ankle_roll_link];[this.ikRoot.find((e=>"left_ankle_roll_link"===e.name)),this.ikRoot.find((e=>"right_ankle_roll_link"===e.name))].forEach((e=>{const t=new Goal;t.setPosition(0,0,0),t.setGoalDoF(DOF.X,DOF.Y,DOF.Z,DOF.EX,DOF.EY,DOF.EZ),t.makeClosure(e);const n=new Solver([this.ikRoot,t]);this.ikFootGoals.push(t),this.ikSolvers.push(n)}))}setLightColor(e){if(this.lightMaterial){const t=(((16711680&e)>>16)+2*(255&e)+(255&e))/1024;this.lightMaterial.emissive.set(e),this.lightMaterial.color.set(e),this.lightMaterial.emissiveIntensity=10-2*t}}setLegJoints(e){legJointsNames.forEach(((t,n)=>{this.urdfRoot.joints[t].setJointValue(e[n])}))}getLegJoints(e){legJointsNames.forEach(((t,n)=>{e[n]=this.urdfRoot.joints[t].angle}))}solveIK(){setIKFromUrdf(this.ikRoot,this.urdfRoot);let e=!0;if(this.ikSolvers.forEach((t=>{t.maxIterations=5;0!==t.solve()[0]&&(e=!1)})),!e){const e=new Array(12).fill(0);this.getLegJoints(e),this.setLegJoints(this.validLegJoints),setIKFromUrdf(this.ikRoot,this.urdfRoot),this.setLegJoints(e)}e&&setUrdfFromIK(this.urdfRoot,this.ikRoot)}}class LidarCommon{constructor(){_defineProperty(this,"currPointInfo",void 0),_defineProperty(this,"pointMap",void 0),_defineProperty(this,"pointPressTimer",void 0),_defineProperty(this,"pointIsDragging",void 0),_defineProperty(this,"stateMachine",0),this.currPointInfo={id:0,pointerRaycasterPosition:new Vector2,pointDownPosition:{x:0,y:0}},this.pointMap=new Map}}function calculateRadians(e,t){const n=e.x,i=e.y,o=t.x,r=t.y;return Math.atan2(r-i,o-n)}function calDistance(e,t){const n=e.x,i=e.y,o=t.x,r=t.y;return Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2))}class LidarNewMap{constructor(e,t){_defineProperty(this,"scene",void 0),_defineProperty(this,"movementTracesPoints",void 0),_defineProperty(this,"movementTracesLineGroup",void 0),_defineProperty(this,"lidarCommon",void 0),this.scene=e,this.lidarCommon=t,this.movementTracesPoints=new CatmullRomCurve3([])}movementTraces(e,t){const{movementTracesPoints:n,movementTracesLineGroup:i,scene:o}=this;if(!(e.length>2))return void this.updateMovementTracesYaw(e,t);{const i=new Vector3(e[0],e[1],e[2]);if(n.points.length<=0)n.points.push(i);else{const o=n.points[n.points.length-1];if(!(calDistance({x:o.x,y:o.y},{x:i.x,y:i.y})>.1))return void this.updateMovementTracesYaw(e,t);n.points.push(i)}}let r=new Float32Array;if(n.points.length>1){const e=2*n.points.length,t=n.getPoints(e);r=new Float32Array(3*t.length);for(let n=0;n<t.length;n++){const e=t[n];r[3*n]=e.x,r[3*n+1]=e.y,r[3*n+2]=e.z}}if(i){const n=i.getObjectByName("movementTracesLine");n&&(n.geometry.dispose(),n.geometry=(new LineGeometry).setPositions(r)),this.updateMovementTracesYaw(e,t)}else{if(r.length<6)return;const n=(new LineGeometry).setPositions(r),i=new LineMaterial({color:16711680,linewidth:4});i.resolution.set(window.innerWidth,window.innerHeight);const a=new Line2(n,i);a.computeLineDistances(),a.name="movementTracesLine";const s=new ConeGeometry(.15,.5,32),l=new MeshBasicMaterial({color:65280}),c=new Mesh(s,l);c.position.set(e[0],e[1],e[2]);const u=(new Euler).setFromQuaternion(new Quaternion(t.x,t.y,t.z,t.w));c.rotation.z=u.z-Math.PI/2,c.name="movementTracesArrow";const d=new Group$2;d.add(a,c),o.add(d),this.movementTracesLineGroup=d}}updateMovementTracesYaw(e,t){const{movementTracesLineGroup:n}=this;if(!n)return;const i=n.getObjectByName("movementTracesArrow");if(i){const n=(new Euler).setFromQuaternion(new Quaternion(t.x,t.y,t.z,t.w));i.position.copy(new Vector3(e[0],e[1],e[2])),i.rotation.z=n.z-Math.PI/2}}cleanMovementTraces(){console.logRed("清除轨迹");const{movementTracesLineGroup:e}=this;if(!e)return;const t=e.getObjectByName("movementTracesLine"),n=e.getObjectByName("movementTracesArrow");t&&(t.geometry.dispose(),t.material.dispose()),n&&(n.geometry.dispose(),n.material.dispose()),e.removeFromParent(),this.movementTracesLineGroup=void 0,this.movementTracesPoints.points=[],this.movementTracesPoints=new CatmullRomCurve3([])}}class LidarPatrol{constructor(e,t,n,i,o){_defineProperty(this,"scene",void 0),_defineProperty(this,"container",void 0),_defineProperty(this,"camera",void 0),_defineProperty(this,"orbitControl",void 0),_defineProperty(this,"raycaster",void 0),_defineProperty(this,"lidarCommon",void 0),_defineProperty(this,"patrolPointList",void 0),_defineProperty(this,"patrolPointLineList",void 0),_defineProperty(this,"patrolPointIsDragging",void 0),_defineProperty(this,"selectedPatrolPoint",void 0),_defineProperty(this,"longPressSelectedPatrolPoint",void 0),_defineProperty(this,"patrolPointLine",void 0),_defineProperty(this,"patrolPointTween",void 0),_defineProperty(this,"robotModel",void 0),_defineProperty(this,"patrolPointLine_temp",void 0),_defineProperty(this,"patrolPoints_temp",void 0),_defineProperty(this,"pointIndexFlag",0),_defineProperty(this,"lineIndexFlag",0),_defineProperty(this,"lastClickPatrolPointTime",0),_defineProperty(this,"isDoubleClickPatrolPoint",!1),_defineProperty(this,"pressTimer",0),_defineProperty(this,"isLongPress",!1),this.scene=e,this.camera=t,this.orbitControl=n,this.raycaster=i,this.lidarCommon=o,this.patrolPointList=[],this.patrolPointLineList=[],this.patrolPoints_temp=new CatmullRomCurve3([])}setRobotModel(e){this.robotModel=e}setContainer(e){this.container=e}startPatrol(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=3,t.layers.disableAll(),t.layers.enable(1),t.layers.enable(5),e.layers.enable(5)}exitPatrol(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=0,t.layers.disableAll(),e.layers.disable(5)}showPatrol(){const{camera:e}=this;e.layers.enable(5)}judgePatrolDistance(){const{patrolPointList:e,robotModel:t}=this;for(let n=0;n<e.length;n++){const i=e[n];if(calDistance({x:(null==t?void 0:t.urdfRoot.position.x)||0,y:(null==t?void 0:t.urdfRoot.position.y)||0},{x:i.position.x,y:i.position.y})<.8)return!1}return!0}addPatrolRouterNetPoint(e,t=!1){if(!e&&!this.judgePatrolDistance())return;const{patrolPointList:n,robotModel:i}=this,o=new TetrahedronGeometry(1/4,0);let r=new MeshToonMaterial({color:16711680,emissive:16711680});const a=new Mesh(o,r);a.position.y=0,a.position.x=0,a.position.z=0,a.rotation.x=-.97,a.rotation.z=Math.PI/4,a.rotation.y=Math.PI,a.name="patrol_indicator_top",a.layers.set(5);const s=new TorusGeometry(.25,.0625,2,12);r=new MeshToonMaterial({color:16711680,emissive:16711680});const l=new Mesh(s,r);l.name="patrol_indicator_bottom",l.layers.set(5),l.position.y=0,l.position.x=0,l.position.z=0;const c=new LineGeometry;c.setPositions([0,0,0,-1,0,0]);const u=new LineMaterial({color:16776960,linewidth:4});u.resolution.set(window.innerWidth,window.innerHeight);const d=new Line2(c,u);d.layers.set(5),d.computeLineDistances(),d.name="patrolPointDirectionLine";const h=new ConeGeometry(.2,.4,16),p=new MeshBasicMaterial({color:16776960}),f=new Mesh(h,p);f.layers.set(5),f.position.set(-1,0,0),f.rotation.z=Math.PI/2,f.name="patrolPointLineArrow";const g=new Group$2;g.name="patrolPointDirectionLineWrapper",g.rotation.z=e?e.rotationZ:(((null==i?void 0:i.urdfRoot.rotation.z)||0)+Math.PI)%(2*Math.PI),g.add(d),g.add(f),g.position.copy(new Vector3(0,0,0));const m=new Group$2;m.name="patrolPoint";const _=e&&e.id?e.id:""+ ++this.pointIndexFlag;m.userData={name:_},m.layers.set(5),m.add(a),m.add(l),m.add(g),e?m.position.copy(new Vector3(e.x,e.y,0)):m.position.copy(new Vector3((null==i?void 0:i.urdfRoot.position.x)||0,(null==i?void 0:i.urdfRoot.position.y)||0,0)),this.scene.add(m),n.push(m),t||(m.scale.set(1.8,1.8,1.8),this.longPressSelectedPatrolPoint=m,bus.emit("openTaskWindow",_))}patrolPointAnimate(){this.patrolPointTween||(this.patrolPointTween=new Tween$2({value:.3}).to({value:.1},1e3).repeat(1/0).onUpdate((e=>{const{patrolPointList:t}=this;t.forEach((t=>{const n=t.getObjectByName("patrol_indicator_top");n&&(n.position.z=e.value)}))})).start())}createPatrolPointLineStart(e){const{patrolPoints_temp:t}=this;this.patrolPointLine_temp&&(this.patrolPointLine_temp.geometry.dispose(),this.patrolPointLine_temp=null),t.points=[e]}updatePatrolPointLineEnd(e){const{patrolPoints_temp:t,patrolPointLine_temp:n,scene:i}=this;t.points.length<2?t.points.push(e):t.points[1]=e;let o=new Float32Array;if(t.points.length>1){const e=5*t.points.length,n=t.getPoints(e);o=new Float32Array(3*n.length);for(let t=0;t<n.length;t++){const e=n[t];o[3*t]=e.x,o[3*t+1]=e.y,o[3*t+2]=e.z}}if(n)n.geometry.dispose(),n.geometry=(new LineGeometry).setPositions(o);else{const e=(new LineGeometry).setPositions(o),t=new LineMaterial({color:16711680,linewidth:4});t.resolution.set(window.innerWidth,window.innerHeight);const n=new Line2(e,t);n.computeLineDistances(),n.layers.set(5),n.name="patrolPointLine",i.add(n),this.patrolPointLine_temp=n}}clearPatrolPointLine(){const{patrolPoints_temp:e,patrolPointLine_temp:t}=this;t&&(e.points=[],t.material.dispose(),t.geometry.dispose(),t.removeFromParent(),this.patrolPointLine_temp=null)}delPatrolPoint(e){e.children.forEach((e=>{e instanceof Mesh?(e.geometry.dispose(),e.material.dispose(),e.removeFromParent()):e.children.forEach((t=>{(t instanceof Mesh||t instanceof Line2)&&(t.geometry.dispose(),t.material.dispose(),e.removeFromParent())}))})),e.removeFromParent()}delLastPatrolPoint(){const{patrolPointList:e,patrolPointLineList:t}=this;if(e.length<=0)return;const n=e.pop();if(n){const e=n.userData.name;this.delPatrolPoint(n);const i=t.findIndex((t=>t.userData.startPosName==e||t.userData.endPosName==e));if(i>=0){const e=t[i];e.material.dispose(),e.geometry.dispose(),e.removeFromParent(),t.splice(i,1)}}}getAllPatrolPoint(){const{patrolPointList:e}=this;return e.map((e=>{const t=e.getObjectByName("patrolPointDirectionLineWrapper");return{name:e.userData.name,x:e.position.x,y:e.position.y,yaw:t?t.rotation.z:0}}))}getAllPatrolEdge(){const{patrolPointLineList:e}=this;return e.map((e=>e.userData))}cleanPatrolPoint(){const{patrolPointList:e,patrolPointLineList:t}=this;if(!(e.length<=0)){for(let t=0;t<e.length;t++){const n=e[t];this.delPatrolPoint(n)}this.patrolPointList=[];for(let e=0;e<t.length;e++){const n=t[e];n.material.dispose(),n.geometry.dispose(),n.removeFromParent()}this.patrolPointLineList=[],this.pointIndexFlag=0,this.lineIndexFlag=0}}renderPatrolPointForData(e){if(!e)return;console.log(e);let t=0;if(e.vertices){for(const n of Object.keys(e.vertices)){const i=e.vertices[n];this.addPatrolRouterNetPoint({x:i.pos[0],y:i.pos[1],rotationZ:i.rpy[2],id:n},!0),t=Math.max(t,parseInt(n))}this.pointIndexFlag=t}if(console.log("全部的点",this.patrolPointList),e.edges){let t=0;for(const n of Object.keys(e.edges)){const i=e.edges[n],o=e.vertices[`${i.v[0]}`],r=e.vertices[`${i.v[1]}`];this.createPatrolPointLineStart(new Vector3(o.pos[0],o.pos[1],0)),this.updatePatrolPointLineEnd(new Vector3(r.pos[0],r.pos[1],0)),this.patrolPointLine_temp.userData={name:`${n}`,startPosName:`${i.v[0]}`,endPosName:`${i.v[1]}`,startPosV3:new Vector3(o.pos[0],o.pos[1],0),endPosV3:new Vector3(r.pos[0],r.pos[1],0),weight:i.weight},t=Math.max(t,parseInt(n)),this.patrolPointLineList.push(this.patrolPointLine_temp),this.patrolPointLine_temp=null}this.lineIndexFlag=t}}changePatrolArrowDir(e){const{selectedPatrolPoint:t}=this;if(!t)return;const{x:n,y:i,z:o}=t.position,r=calculateRadians({x:n,y:i},{x:e.x,y:e.y}),a=t.getObjectByName("patrolPointDirectionLineWrapper");a&&(a.rotation.z=r+Math.PI)}judgeMouseDownOnPatrol(){var e;const{camera:t,raycaster:n,scene:i,lidarCommon:o}=this,{currPointInfo:r}=o,{pointerRaycasterPosition:a}=r;n.setFromCamera(a,t);const s=null===(e=n.intersectObjects(i.children).find((e=>["patrol_indicator_top","patrol_indicator_bottom","patrolPointDirectionLine","patrolPointLineArrow"].includes(e.object.name))))||void 0===e?void 0:e.object;if(s){var l;let e;if(console.log("选中了巡逻点"),this.orbitControl.enableRotate=!1,this.patrolPointIsDragging=!0,e=["patrol_indicator_top","patrol_indicator_bottom"].includes(s.name)?s.parent:null===(l=s.parent)||void 0===l?void 0:l.parent,this.selectedPatrolPoint=e,this.pressTimer&&window.clearTimeout(this.pressTimer),this.longPressSelectedPatrolPoint&&this.longPressSelectedPatrolPoint!==e&&(this.longPressSelectedPatrolPoint.scale.set(1,1,1),this.longPressSelectedPatrolPoint=void 0,bus.emit("openTaskWindow")),performance.now()-this.lastClickPatrolPointTime<300)return console.logRed("双击巡逻点"),void(this.isDoubleClickPatrolPoint=!0);this.createPatrolPointLineStart(this.selectedPatrolPoint.position),this.pressTimer=window.setTimeout((()=>{this.isDoubleClickPatrolPoint=!1,this.isLongPress=!0,this.longPressPoint(),window.clearTimeout(this.pressTimer)}),1e3),this.lastClickPatrolPointTime=performance.now()}else this.longPressSelectedPatrolPoint&&(this.longPressSelectedPatrolPoint.scale.set(1,1,1),this.longPressSelectedPatrolPoint=void 0,bus.emit("openTaskWindow"))}longPressPoint(){console.logRed("长按巡逻点",this.selectedPatrolPoint),this.selectedPatrolPoint&&(this.selectedPatrolPoint.scale.set(1.8,1.8,1.8),this.longPressSelectedPatrolPoint=this.selectedPatrolPoint,bus.emit("openTaskWindow",this.selectedPatrolPoint.userData.name))}judgeMouseUpOnPatrol(e){var t;const{camera:n,raycaster:i,scene:o,patrolPointLine_temp:r,patrolPointLineList:a}=this,s=new Vector2;s.x=e.clientX/this.container.clientWidth*2-1,s.y=-e.clientY/this.container.clientHeight*2+1,i.setFromCamera(s,n);const l=null===(t=i.intersectObjects(o.children).find((e=>["patrol_indicator_top","patrol_indicator_bottom","patrolPointDirectionLine","patrolPointLineArrow"].includes(e.object.name))))||void 0===t?void 0:t.object;if(this.selectedPatrolPoint&&l){var c;let e;if(e=["patrol_indicator_top","patrol_indicator_bottom"].includes(l.name)?l.parent:null===(c=l.parent)||void 0===c?void 0:c.parent,e)if(this.selectedPatrolPoint.userData.name==e.userData.name)this.clearPatrolPointLine();else{const t=a.find((t=>t.userData.startPosName==this.selectedPatrolPoint.userData.name&&t.userData.endPosName==e.userData.name||t.userData.startPosName==e.userData.name&&t.userData.endPosName==this.selectedPatrolPoint.userData.name));r&&!t?(r.userData={name:""+ ++this.lineIndexFlag,startPosName:this.selectedPatrolPoint.userData.name,endPosName:e.userData.name,startPosV3:this.selectedPatrolPoint.position,endPosV3:e.position,weight:calDistance(this.selectedPatrolPoint.position,e.position)},a.push(r)):this.clearPatrolPointLine()}else this.clearPatrolPointLine()}else this.clearPatrolPointLine()}pointerDown(e){this.judgeMouseDownOnPatrol()}pointMove(e){const{scene:t,camera:n,patrolPointIsDragging:i,raycaster:o,isDoubleClickPatrolPoint:r}=this;if(i){const i=new Vector2;i.x=e.clientX/this.container.clientWidth*2-1,i.y=-e.clientY/this.container.clientHeight*2+1,o.setFromCamera(i,n);const a=o.intersectObjects(t.children).find((e=>"groundPlane"===e.object.name));if(!a)return;calDistance(this.selectedPatrolPoint.position,a.point)>.5&&this.pressTimer&&window.clearTimeout(this.pressTimer),r?this.changePatrolArrowDir(a.point.clone()):this.updatePatrolPointLineEnd(a.point.clone())}}pointUp(e){this.judgeMouseUpOnPatrol(e),this.pressTimer&&window.clearTimeout(this.pressTimer),this.selectedPatrolPoint=void 0,this.orbitControl.enableRotate=!0,this.patrolPointIsDragging=!1,this.isDoubleClickPatrolPoint=!1,this.patrolPointLine_temp=null,this.isLongPress=!1}}class LidarRelocation{constructor(e,t,n,i,o){_defineProperty(this,"scene",void 0),_defineProperty(this,"container",void 0),_defineProperty(this,"camera",void 0),_defineProperty(this,"orbitControl",void 0),_defineProperty(this,"raycaster",void 0),_defineProperty(this,"relocationPoint",void 0),_defineProperty(this,"relocationPointLine",void 0),_defineProperty(this,"relocationPointIsDragging",void 0),_defineProperty(this,"lidarCommon",void 0),this.scene=e,this.camera=t,this.orbitControl=n,this.raycaster=i,this.lidarCommon=o}setContainer(e){this.container=e}startRelocation(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=1,t.layers.disableAll(),t.layers.enable(1),e.layers.enable(1);new Tween$2(e.position.clone()).to(new Vector3(0,1,10),1500).onUpdate((t=>{e.position.copy(t)})).start()}cancelRelocation(){if(this.lidarCommon.stateMachine=0,this.raycaster.layers.disableAll(),this.camera.layers.disable(1),this.relocationPoint&&(this.relocationPoint.geometry.dispose(),this.relocationPoint.material.dispose(),this.relocationPoint.removeFromParent(),this.relocationPoint=void 0),this.relocationPointLine){const e=this.relocationPointLine.getObjectByName("relocationPointLine"),t=this.relocationPointLine.getObjectByName("relocationPointArrow");e.geometry.dispose(),e.material.dispose(),e.removeFromParent(),t.geometry.dispose(),t.material.dispose(),t.removeFromParent(),this.relocationPointLine.removeFromParent(),this.relocationPointLine=void 0}}genRelocationPoint(){const{camera:e,lidarCommon:t,raycaster:n,scene:i}=this,{currPointInfo:o,pointMap:r}=t,{pointerRaycasterPosition:a}=o;n.setFromCamera(a,e);const s=n.intersectObjects(i.children);s.find((e=>"relocationPoint"===e.object.name))?(console.log("选中了定位点"),this.orbitControl.enableRotate=!1,this.relocationPointIsDragging=!0):t.pointPressTimer=window.setTimeout((()=>{if(!(r.size>1)){if(s.length>0){const e=s[0].point;if(this.relocationPoint)this.relocationPoint.position.copy(e),this.relocationPointIsDragging=!0;else{const t=new Mesh(new SphereGeometry(.4,32,16),new MeshBasicMaterial({color:16711680}));t.position.copy(e),t.name="relocationPoint",t.layers.set(1),this.scene.add(t),this.relocationPoint=t,this.relocationPointIsDragging=!0}this.drawLineForRelocationPoint(e)}this.orbitControl.enableRotate=!1,t.pointPressTimer=0}}),600)}drawLineForRelocationPoint(e){const{relocationPoint:t}=this;if(!t)return;const{x:n,y:i,z:o}=t.position;if(this.relocationPointLine){const t=calculateRadians({x:n,y:i},{x:e.x,y:e.y});this.relocationPointLine.position.copy(new Vector3(n,i,o)),this.relocationPointLine.rotation.z=t+Math.PI}else{const e=new LineGeometry,t=[0,0,0,-3,0,0];e.setPositions(t);const r=new LineMaterial({color:16711680,linewidth:4});r.resolution.set(window.innerWidth,window.innerHeight);const a=new Line2(e,r);a.computeLineDistances(),a.name="relocationPointLine",a.layers.set(1);const s=new ConeGeometry(.4,.5,32),l=new MeshBasicMaterial({color:16711680}),c=new Mesh(s,l);c.position.set(-3,0,0),c.layers.set(1),c.rotation.z=Math.PI/2,c.name="relocationPointArrow";const u=new Group$2;u.add(a),u.add(c),u.position.copy(new Vector3(n,i,o)),u.layers.set(1),this.scene.add(u),this.relocationPointLine=u}}getRelocationPointInfo(){const{relocationPoint:e,relocationPointLine:t}=this;if(e)return{position:e.position,yaw:t.rotation.z-Math.PI}}pointerDown(e){this.genRelocationPoint()}pointMove(e){const{camera:t,lidarCommon:n,relocationPointIsDragging:i,raycaster:o,scene:r}=this,{currPointInfo:a}=n,{id:s,pointDownPosition:l}=a,c=calDistance({x:l.x,y:l.y},{x:e.clientX,y:e.clientY});if(n.pointPressTimer&&c>2)return window.clearTimeout(n.pointPressTimer),void(n.pointPressTimer=0);if(i){const n=new Vector2;n.x=e.clientX/this.container.clientWidth*2-1,n.y=-e.clientY/this.container.clientHeight*2+1,o.setFromCamera(n,t);const i=o.intersectObjects(r.children).find((e=>"groundPlane"===e.object.name));i&&this.drawLineForRelocationPoint(i.point.clone())}}pointUp(e){const{lidarCommon:t}=this;this.orbitControl.enableRotate=!0,this.relocationPointIsDragging=!1,t.pointPressTimer&&(window.clearTimeout(t.pointPressTimer),t.pointPressTimer=0)}}class LidarSinglePointNav{constructor(e,t,n,i,o){_defineProperty(this,"scene",void 0),_defineProperty(this,"container",void 0),_defineProperty(this,"camera",void 0),_defineProperty(this,"orbitControl",void 0),_defineProperty(this,"raycaster",void 0),_defineProperty(this,"indicatorGroup",void 0),_defineProperty(this,"lidarCommon",void 0),_defineProperty(this,"navigationCb",void 0),_defineProperty(this,"indicatorTopTween",void 0),this.scene=e,this.camera=t,this.orbitControl=n,this.raycaster=i,this.lidarCommon=o}setContainer(e){this.container=e}startNavigation(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=2,t.layers.disableAll(),t.layers.enable(1),e.layers.enable(1)}exitNavigation(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=0,t.layers.disableAll(),e.layers.disable(1),this.cleanIndicator()}drawIndicator(){const e=new TetrahedronGeometry(1/4,0);let t=new MeshToonMaterial({color:16711680,emissive:16711680});const n=new Mesh(e,t);n.position.y=0,n.position.x=0,n.position.z=0,n.rotation.x=-.97,n.rotation.z=Math.PI/4,n.rotation.y=Math.PI,n.name="indicator_top";const i=new TorusGeometry(.25,.0625,2,12);t=new MeshToonMaterial({color:16711680,emissive:16711680});const o=new Mesh(i,t);o.name="indicator_bottom",o.position.y=0,o.position.x=0,o.position.z=0;const r=new Group$2;r.add(n),r.add(o),r.position.copy(new Vector3),r.layers.set(1),this.scene.add(r),this.indicatorGroup=r,this.indicatorAnimate()}indicatorAnimate(){const{lidarCommon:e,indicatorGroup:t}=this;if(2!=e.stateMachine)return;if(!t)return;const n=t.getObjectByName("indicator_top");n&&(this.indicatorTopTween=new Tween$2({value:.3}).to({value:.1},1e3).repeat(1/0).onUpdate((e=>{n.position.z=e.value})).start())}locateIndicator(e){const{camera:t,raycaster:n,scene:i,indicatorGroup:o}=this,r=new Vector2;r.x=e.x/this.container.clientWidth*2-1,r.y=-e.y/this.container.clientHeight*2+1,n.setFromCamera(r,t);const a=n.intersectObjects(i.children).find((e=>"groundPlane"===e.object.name));var s,l;a&&(o||this.drawIndicator(),null===(s=this.indicatorGroup)||void 0===s||s.position.copy(a.point),null===(l=this.navigationCb)||void 0===l||l.call(this,[a.point.x,a.point.y]))}cleanIndicator(){const{indicatorGroup:e}=this;if(e){var t;const n=e.getObjectByName("indicator_top"),i=e.getObjectByName("indicator_bottom");n&&(n.geometry.dispose(),n.material.dispose()),i&&(i.geometry.dispose(),i.material.dispose()),e.removeFromParent(),this.indicatorGroup=void 0,null===(t=this.indicatorTopTween)||void 0===t||t.stop()}}setNavigationCb(e){this.navigationCb=e}getNavigationPoint(){const{indicatorGroup:e}=this;return null==e?void 0:e.position}pointerDown(e){}pointMove(e){const{lidarCommon:t}=this,{currPointInfo:n}=t,{pointDownPosition:i}=n;calDistance({x:i.x,y:i.y},{x:e.clientX,y:e.clientY})>1&&(t.pointIsDragging=!0)}pointUp(e){const{lidarCommon:t}=this,{pointIsDragging:n}=t;n||this.locateIndicator({x:e.clientX,y:e.clientY}),t.pointIsDragging=!1}}const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"},_ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*MathUtils.DEG2RAD);class OrbitControls extends EventDispatcher{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Vector3,this.cursor=new Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN},this.touches={ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Y),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Y),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(_changeEvent),n.update(),o=i.NONE},this.update=function(){const t=new Vector3,u=(new Quaternion).setFromUnitVectors(e.up,new Vector3(0,1,0)),d=u.clone().invert(),h=new Vector3,p=new Quaternion,f=new Vector3,g=2*Math.PI;return function(m=null){const _=n.object.position;t.copy(_).sub(n.target),t.applyQuaternion(u),a.setFromVector3(t),n.autoRotate&&o===i.NONE&&w(function(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}(m)),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),a.theta=v<=y?Math.max(v,Math.min(y,a.theta)):a.theta>(v+y)/2?Math.max(v,a.theta):Math.min(y,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&A||n.object.isOrthographicCamera?a.radius=O(a.radius):a.radius=O(a.radius*l),t.setFromSpherical(a),t.applyQuaternion(d),_.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),c.set(0,0,0));let E=!1;if(n.zoomToCursor&&A){let i=null;if(n.object.isPerspectiveCamera){const e=t.length();i=O(e*l);const o=e-i;n.object.position.addScaledVector(b,o),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new Vector3(T.x,T.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),E=!0;const o=new Vector3(T.x,T.y,0);o.unproject(n.object),n.object.position.sub(o).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(_ray.origin.copy(n.object.position),_ray.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(_ray.direction))<TILT_LIMIT?e.lookAt(n.target):(_plane.setFromNormalAndCoplanarPoint(n.object.up,n.target),_ray.intersectPlane(_plane,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),E=!0);return l=1,A=!1,!!(E||h.distanceToSquared(n.object.position)>r||8*(1-p.dot(n.object.quaternion))>r||f.distanceToSquared(n.target)>0)&&(n.dispatchEvent(_changeEvent),h.copy(n.object.position),p.copy(n.object.quaternion),f.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",z),n.domElement.removeEventListener("wheel",j),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",z),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",Y),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const r=1e-6,a=new Spherical,s=new Spherical;let l=1;const c=new Vector3,u=new Vector2,d=new Vector2,h=new Vector2,p=new Vector2,f=new Vector2,g=new Vector2,m=new Vector2,_=new Vector2,v=new Vector2,b=new Vector3,T=new Vector2;let A=!1;const y=[],E={};let S=!1;function C(e){const t=Math.abs(.01*e);return Math.pow(.95,n.zoomSpeed*t)}function w(e){s.theta-=e}function x(e){s.phi-=e}const M=function(){const e=new Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),R=function(){const e=new Vector3;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),I=function(){const e=new Vector3;return function(t,i){const o=n.domElement;if(n.object.isPerspectiveCamera){const r=n.object.position;e.copy(r).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),M(2*t*a/o.clientHeight,n.object.matrix),R(2*i*a/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),R(i*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function D(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e,t){if(!n.zoomToCursor)return;A=!0;const i=n.domElement.getBoundingClientRect(),o=e-i.left,r=t-i.top,a=i.width,s=i.height;T.x=o/a*2-1,T.y=-r/s*2+1,b.set(T.x,T.y,1).unproject(n.object).sub(n.object.position).normalize()}function O(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function P(e){u.set(e.clientX,e.clientY)}function N(e){p.set(e.clientX,e.clientY)}function $(e){if(1===y.length)u.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);u.set(n,i)}}function B(e){if(1===y.length)p.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);p.set(n,i)}}function F(e){const t=Q(e),n=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(n*n+i*i);m.set(0,o)}function U(e){if(1==y.length)d.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);d.set(n,i)}h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;w(2*Math.PI*h.x/t.clientHeight),x(2*Math.PI*h.y/t.clientHeight),u.copy(d)}function G(e){if(1===y.length)f.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}g.subVectors(f,p).multiplyScalar(n.panSpeed),I(g.x,g.y),p.copy(f)}function V(e){const t=Q(e),i=e.pageX-t.x,o=e.pageY-t.y,r=Math.sqrt(i*i+o*o);_.set(0,r),v.set(0,Math.pow(_.y/m.y,n.zoomSpeed)),D(v.y),m.copy(_);L(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function H(e){!1!==n.enabled&&(0===y.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",W),n.domElement.addEventListener("pointerup",z)),function(e){y.push(e.pointerId)}(e),"touch"===e.pointerType?function(e){switch(K(e),y.length){case 1:switch(n.touches.ONE){case TOUCH.ROTATE:if(!1===n.enableRotate)return;$(e),o=i.TOUCH_ROTATE;break;case TOUCH.PAN:if(!1===n.enablePan)return;B(e),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(n.touches.TWO){case TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&F(e),n.enablePan&&B(e)}(e),o=i.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&F(e),n.enableRotate&&$(e)}(e),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(_startEvent)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){L(e.clientX,e.clientX),m.set(e.clientX,e.clientY)}(e),o=i.DOLLY;break;case MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),o=i.PAN}else{if(!1===n.enableRotate)return;P(e),o=i.ROTATE}break;case MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;P(e),o=i.ROTATE}else{if(!1===n.enablePan)return;N(e),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(_startEvent)}(e))}function W(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(K(e),o){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(e),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&V(e),n.enablePan&&G(e)}(e),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&V(e),n.enableRotate&&U(e)}(e),n.update();break;default:o=i.NONE}}(e):function(e){switch(o){case i.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;w(2*Math.PI*h.x/t.clientHeight),x(2*Math.PI*h.y/t.clientHeight),u.copy(d),n.update()}(e);break;case i.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),v.subVectors(_,m),v.y>0?D(C(v.y)):v.y<0&&k(C(v.y)),m.copy(_),n.update()}(e);break;case i.PAN:if(!1===n.enablePan)return;!function(e){f.set(e.clientX,e.clientY),g.subVectors(f,p).multiplyScalar(n.panSpeed),I(g.x,g.y),p.copy(f),n.update()}(e)}}(e))}function z(e){!function(e){delete E[e.pointerId];for(let t=0;t<y.length;t++)if(y[t]==e.pointerId)return void y.splice(t,1)}(e),0===y.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",z)),n.dispatchEvent(_endEvent),o=i.NONE}function j(e){!1!==n.enabled&&!1!==n.enableZoom&&o===i.NONE&&(e.preventDefault(),n.dispatchEvent(_startEvent),function(e){L(e.clientX,e.clientY),e.deltaY<0?k(C(e.deltaY)):e.deltaY>0&&D(C(e.deltaY)),n.update()}(function(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}e.ctrlKey&&!S&&(n.deltaY*=10);return n}(e)),n.dispatchEvent(_endEvent))}function X(e){"Control"===e.key&&(S=!1,document.removeEventListener("keyup",X,{passive:!0,capture:!0}))}function Y(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?x(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?x(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?w(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?w(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function q(e){!1!==n.enabled&&e.preventDefault()}function K(e){let t=E[e.pointerId];void 0===t&&(t=new Vector2,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Q(e){const t=e.pointerId===y[0]?y[1]:y[0];return E[t]}n.domElement.addEventListener("contextmenu",q),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",z),n.domElement.addEventListener("wheel",j,{passive:!1}),document.addEventListener("keydown",(function(e){"Control"===e.key&&(S=!0,document.addEventListener("keyup",X,{passive:!0,capture:!0}))}),{passive:!0,capture:!0}),this.update()}}exports("a5",OrbitControls);class PCDLoader extends Loader{constructor(e){super(e),this.littleEndian=!0}load(t,n,i,o){const r=this,a=new FileLoader(r.manager);a.setPath(r.path),a.setResponseType("arraybuffer"),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,(function(i){try{n(r.parse(i))}catch(e){o?o(e):console.error(e),r.manager.itemError(t)}}),i,o)}parse(e){const t=(new TextDecoder).decode(e),n=function(e){const t={},n=e.search(/[\r\n]DATA\s(\S*)\s/i),i=/[\r\n]DATA\s(\S*)\s/i.exec(e.slice(n-1));if(t.data=i[1],t.headerLen=i[0].length+n,t.str=e.slice(0,t.headerLen),t.str=t.str.replace(/#.*/gi,""),t.version=/VERSION (.*)/i.exec(t.str),t.fields=/FIELDS (.*)/i.exec(t.str),t.size=/SIZE (.*)/i.exec(t.str),t.type=/TYPE (.*)/i.exec(t.str),t.count=/COUNT (.*)/i.exec(t.str),t.width=/WIDTH (.*)/i.exec(t.str),t.height=/HEIGHT (.*)/i.exec(t.str),t.viewpoint=/VIEWPOINT (.*)/i.exec(t.str),t.points=/POINTS (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),t.fields=null!==t.fields?t.fields[1].split(" "):[],null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map((function(e){return parseInt(e,10)}))),null!==t.count)t.count=t.count[1].split(" ").map((function(e){return parseInt(e,10)}));else{t.count=[];for(let e=0,n=t.fields.length;e<n;e++)t.count.push(1)}t.offset={};let o=0;for(let r=0,a=t.fields.length;r<a;r++)"ascii"===t.data?t.offset[t.fields[r]]=r:(t.offset[t.fields[r]]=o,o+=t.size[r]*t.count[r]);return t.rowSize=o,t}(t),i=[],o=[],r=[],a=[],s=[],l=new Color;if("ascii"===n.data){const e=n.offset,c=t.slice(n.headerLen).split("\n");for(let t=0,u=c.length;t<u;t++){if(""===c[t])continue;const u=c[t].split(" ");if(void 0!==e.x&&(i.push(parseFloat(u[e.x])),i.push(parseFloat(u[e.y])),i.push(parseFloat(u[e.z]))),void 0!==e.rgb){const t=n.fields.findIndex((e=>"rgb"===e)),i=n.type[t],o=parseFloat(u[e.rgb]);let a=o;if("F"===i){const e=new Float32Array(1);e[0]=o,a=new Int32Array(e.buffer)[0]}const s=(a>>16&255)/255,c=(a>>8&255)/255,d=(255&a)/255;l.set(s,c,d).convertSRGBToLinear(),r.push(l.r,l.g,l.b)}void 0!==e.normal_x&&(o.push(parseFloat(u[e.normal_x])),o.push(parseFloat(u[e.normal_y])),o.push(parseFloat(u[e.normal_z]))),void 0!==e.intensity&&a.push(parseFloat(u[e.intensity])),void 0!==e.label&&s.push(parseInt(u[e.label]))}}if("binary_compressed"===n.data){const t=new Uint32Array(e.slice(n.headerLen,n.headerLen+8)),c=t[0],u=t[1],d=function(e,t){const n=e.length,i=new Uint8Array(t);let o,r,a,s=0,l=0;do{if(o=e[s++],o<32){if(o++,l+o>t)throw new Error("Output buffer is not large enough");if(s+o>n)throw new Error("Invalid compressed data");do{i[l++]=e[s++]}while(--o)}else{if(r=o>>5,a=l-((31&o)<<8)-1,s>=n)throw new Error("Invalid compressed data");if(7===r&&(r+=e[s++],s>=n))throw new Error("Invalid compressed data");if(a-=e[s++],l+r+2>t)throw new Error("Output buffer is not large enough");if(a<0)throw new Error("Invalid compressed data");if(a>=l)throw new Error("Invalid compressed data");do{i[l++]=i[a++]}while(2+--r)}}while(s<n);return i}(new Uint8Array(e,n.headerLen+8,c),u),h=new DataView(d.buffer),p=n.offset;for(let e=0;e<n.points;e++){if(void 0!==p.x){const t=n.fields.indexOf("x"),o=n.fields.indexOf("y"),r=n.fields.indexOf("z");i.push(h.getFloat32(n.points*p.x+n.size[t]*e,this.littleEndian)),i.push(h.getFloat32(n.points*p.y+n.size[o]*e,this.littleEndian)),i.push(h.getFloat32(n.points*p.z+n.size[r]*e,this.littleEndian))}if(void 0!==p.rgb){const t=n.fields.indexOf("rgb"),i=h.getUint8(n.points*p.rgb+n.size[t]*e+2)/255,o=h.getUint8(n.points*p.rgb+n.size[t]*e+1)/255,a=h.getUint8(n.points*p.rgb+n.size[t]*e+0)/255;l.set(i,o,a).convertSRGBToLinear(),r.push(l.r,l.g,l.b)}if(void 0!==p.normal_x){const t=n.fields.indexOf("normal_x"),i=n.fields.indexOf("normal_y"),r=n.fields.indexOf("normal_z");o.push(h.getFloat32(n.points*p.normal_x+n.size[t]*e,this.littleEndian)),o.push(h.getFloat32(n.points*p.normal_y+n.size[i]*e,this.littleEndian)),o.push(h.getFloat32(n.points*p.normal_z+n.size[r]*e,this.littleEndian))}if(void 0!==p.intensity){const t=n.fields.indexOf("intensity");a.push(h.getFloat32(n.points*p.intensity+n.size[t]*e,this.littleEndian))}if(void 0!==p.label){const t=n.fields.indexOf("label");s.push(h.getInt32(n.points*p.label+n.size[t]*e,this.littleEndian))}}}if("binary"===n.data){const t=new DataView(e,n.headerLen),c=n.offset;for(let e=0,u=0;e<n.points;e++,u+=n.rowSize){if(void 0!==c.x&&(i.push(t.getFloat32(u+c.x,this.littleEndian)),i.push(t.getFloat32(u+c.y,this.littleEndian)),i.push(t.getFloat32(u+c.z,this.littleEndian))),void 0!==c.rgb){const e=t.getUint8(u+c.rgb+2)/255,n=t.getUint8(u+c.rgb+1)/255,i=t.getUint8(u+c.rgb+0)/255;l.set(e,n,i).convertSRGBToLinear(),r.push(l.r,l.g,l.b)}void 0!==c.normal_x&&(o.push(t.getFloat32(u+c.normal_x,this.littleEndian)),o.push(t.getFloat32(u+c.normal_y,this.littleEndian)),o.push(t.getFloat32(u+c.normal_z,this.littleEndian))),void 0!==c.intensity&&a.push(t.getFloat32(u+c.intensity,this.littleEndian)),void 0!==c.label&&s.push(t.getInt32(u+c.label,this.littleEndian))}}const c=new BufferGeometry;i.length>0&&c.setAttribute("position",new Float32BufferAttribute(i,3)),o.length>0&&c.setAttribute("normal",new Float32BufferAttribute(o,3)),r.length>0&&c.setAttribute("color",new Float32BufferAttribute(r,3)),a.length>0&&c.setAttribute("intensity",new Float32BufferAttribute(a,1)),s.length>0&&c.setAttribute("label",new Int32BufferAttribute(s,1)),c.computeBoundingSphere();const u=new PointsMaterial({size:.005});return r.length>0&&(u.vertexColors=!0),new Points(c,u)}}const CopyShader={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Pass{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const _camera=new OrthographicCamera(-1,1,1,-1,0,1);class FullscreenTriangleGeometry extends BufferGeometry{constructor(){super(),this.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2))}}const _geometry=new FullscreenTriangleGeometry;class FullScreenQuad{constructor(e){this._mesh=new Mesh(_geometry,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,_camera)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ShaderPass extends Pass{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=UniformsUtils.clone(e.uniforms),this.material=new ShaderMaterial({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new FullScreenQuad(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class MaskPass extends Pass{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),o=e.state;let r,a;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(r=0,a=1):(r=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.buffers.stencil.setFunc(i.ALWAYS,r,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(i.EQUAL,1,4294967295),o.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.buffers.stencil.setLocked(!0)}}class ClearMaskPass extends Pass{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class EffectComposer{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new Vector2);this._width=n.width,this._height=n.height,(t=new WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:HalfFloatType})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ShaderPass(CopyShader),this.copyPass.material.blending=NoBlending,this.clock=new Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,o=this.passes.length;i<o;i++){const t=this.passes[i];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==MaskPass&&(t instanceof MaskPass?n=!0:t instanceof ClearMaskPass&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}exports("a4",EffectComposer);const OutputShader={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:"\n\t\tprecision highp float;\n\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <tonemapping_pars_fragment>\n\t\t#include <colorspace_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\n\t\t\t// tone mapping\n\n\t\t\t#ifdef LINEAR_TONE_MAPPING\n\n\t\t\t\tgl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( REINHARD_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( CINEON_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( ACES_FILMIC_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( AGX_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );\n\n\t\t\t#endif\n\n\t\t\t// color space\n\n\t\t\t#ifdef SRGB_TRANSFER\n\n\t\t\t\tgl_FragColor = sRGBTransferOETF( gl_FragColor );\n\n\t\t\t#endif\n\n\t\t}"};class OutputPass extends Pass{constructor(){super();const e=OutputShader;this.uniforms=UniformsUtils.clone(e.uniforms),this.material=new RawShaderMaterial({name:e.name,uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new FullScreenQuad(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,this._outputColorSpace===e.outputColorSpace&&this._toneMapping===e.toneMapping||(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},ColorManagement.getTransfer(this._outputColorSpace)===SRGBTransfer&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===LinearToneMapping?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===ReinhardToneMapping?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===CineonToneMapping?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===ACESFilmicToneMapping?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===AgXToneMapping&&(this.material.defines.AGX_TONE_MAPPING=""),this.material.needsUpdate=!0),!0===this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}exports("a3",OutputPass);class RenderPass extends Pass{constructor(e,t,n=null,i=null,o=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Color}render(e,t,n){const i=e.autoClear;let o,r;e.autoClear=!1,null!==this.overrideMaterial&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(o),null!==this.overrideMaterial&&(this.scene.overrideMaterial=r),e.autoClear=i}}exports("a0",RenderPass);const LuminosityHighPassShader={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class UnrealBloomPass extends Pass{constructor(e,t,n,i){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=i,this.resolution=void 0!==e?new Vector2(e.x,e.y):new Vector2(256,256),this.clearColor=new Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),r=Math.round(this.resolution.y/2);this.renderTargetBright=new WebGLRenderTarget(o,r,{type:HalfFloatType}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let c=0;c<this.nMips;c++){const e=new WebGLRenderTarget(o,r,{type:HalfFloatType});e.texture.name="UnrealBloomPass.h"+c,e.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(e);const t=new WebGLRenderTarget(o,r,{type:HalfFloatType});t.texture.name="UnrealBloomPass.v"+c,t.texture.generateMipmaps=!1,this.renderTargetsVertical.push(t),o=Math.round(o/2),r=Math.round(r/2)}const a=LuminosityHighPassShader;this.highPassUniforms=UniformsUtils.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const s=[3,5,7,9,11];o=Math.round(this.resolution.x/2),r=Math.round(this.resolution.y/2);for(let c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(s[c])),this.separableBlurMaterials[c].uniforms.invSize.value=new Vector2(1/o,1/r),o=Math.round(o/2),r=Math.round(r/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const l=CopyShader;this.copyUniforms=UniformsUtils.clone(l.uniforms),this.blendMaterial=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Color,this.oldClearAlpha=1,this.basic=new MeshBasicMaterial,this.fsQuad=new FullScreenQuad(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(n,i),this.renderTargetsVertical[o].setSize(n,i),this.separableBlurMaterials[o].uniforms.invSize.value=new Vector2(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,i,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const r=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[s].uniforms.direction.value=UnrealBloomPass.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=UnrealBloomPass.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}getSeperableBlurMaterial(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new ShaderMaterial({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new Vector2(.5,.5)},direction:{value:new Vector2(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}exports("a1",UnrealBloomPass),UnrealBloomPass.BlurDirectionX=new Vector2(1,0),UnrealBloomPass.BlurDirectionY=new Vector2(0,1);class PcdMaterial extends PointsMaterial{constructor(e){super(e),_defineProperty(this,"shader",void 0),_defineProperty(this,"lightStrength",void 0),this.lightStrength=1,this.onBeforeCompile=this.beforeCompile}beforeCompile(e){this.shader=e,e.uniforms.lightStrength={value:this.lightStrength},e.vertexShader="varying float heightZ;"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",["vec4 mvPosition = vec4( transformed, 1.0 );","mvPosition = modelViewMatrix * mvPosition;","gl_Position = projectionMatrix * mvPosition;","heightZ = transformed.z;"].join("\n")),e.fragmentShader="uniform float lightStrength;\nvarying float heightZ;\n"+e.fragmentShader,e.fragmentShader=e.fragmentShader.replace("vec4 diffuseColor = vec4( diffuse, opacity );","vec4 diffuseColor = vec4( lightStrength * diffuse, opacity );                diffuseColor.r = abs(sin(heightZ/1.0));                diffuseColor.g =  0.5*abs(cos(heightZ/1.0));")}setLightStrength(e){this.lightStrength=e,this.shader&&(this.shader.uniforms.lightStrength={value:this.lightStrength})}clone(){const e=super.clone();return e.onBeforeCompile=this.beforeCompile,e}}Object3D.DEFAULT_UP=new Vector3(0,0,1);const pcdLoader=new PCDLoader;class SceneManager{constructor(){_defineProperty(this,"container",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"camera",void 0),_defineProperty(this,"renderer",void 0),_defineProperty(this,"gridHelper",void 0),_defineProperty(this,"orbitControl",void 0),_defineProperty(this,"composer",void 0),_defineProperty(this,"bloomPass",void 0),_defineProperty(this,"light",void 0),_defineProperty(this,"animationFrameHandle",void 0),_defineProperty(this,"raycaster",void 0),_defineProperty(this,"laserBufferGeometry",void 0),_defineProperty(this,"filteredBufferGeometry",void 0),_defineProperty(this,"pointsLoaded",void 0),_defineProperty(this,"pointsLaser",void 0),_defineProperty(this,"pointsFiltered",void 0),_defineProperty(this,"pcdMaterial",void 0),this.scene=new Scene,this.camera=new PerspectiveCamera(75,1,.01,500),this.camera.position.set(0,10,10),this.camera.layers.enable(0),this.scene.add(this.camera),this.renderer=new WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.toneMapping=ReinhardToneMapping,this.renderer.setPixelRatio(window.devicePixelRatio),this.gridHelper=new GridHelper(500,500,8947848,3355443),this.gridHelper.rotateX(Math.PI/2),this.scene.add(this.gridHelper);const e=new RenderPass(this.scene,this.camera);this.bloomPass=new UnrealBloomPass(new Vector2(300,300),.1,.01,2);const t=new OutputPass;this.composer=new EffectComposer(this.renderer),this.composer.addPass(e),this.composer.addPass(this.bloomPass),this.composer.addPass(t),this.orbitControl=new OrbitControls(this.camera,this.renderer.domElement),this.orbitControl.maxPolarAngle=Math.PI/2,this.light=new AmbientLight(16777215,1),this.scene.add(this.light),this.filteredBufferGeometry=new BufferGeometry,this.laserBufferGeometry=new BufferGeometry,this.pcdMaterial=new PcdMaterial({color:6710886,size:.05}),this.animationFrameHandle=0,this.raycaster=new Raycaster}init(e){this.container=e,e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.pointsFiltered=new Points(this.filteredBufferGeometry,this.pcdMaterial),this.pointsLaser=new Points(this.laserBufferGeometry,new PointsMaterial({color:new Color(3,3,3),size:.1})),this.pointsFiltered.frustumCulled=!1,this.pointsLaser.frustumCulled=!1,this.scene.add(this.pointsFiltered),this.scene.add(this.pointsLaser),this.run()}run(){this.animationFrameHandle=requestAnimationFrame(this.run.bind(this)),this.orbitControl.update(),this.composer.render(),this.customRunFn()}customRunFn(){}resize(){this.container&&(this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.bloomPass.setSize(this.container.clientWidth,this.container.clientHeight),this.composer.setSize(this.container.clientWidth,this.container.clientHeight),this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix())}updatePointCloud(e,t){this.filteredBufferGeometry.setAttribute("position",new Float32BufferAttribute(e.buffer,3)),this.laserBufferGeometry.setAttribute("position",new Float32BufferAttribute(t.buffer,3))}updateLaserPointCloud(e){this.laserBufferGeometry.setAttribute("position",new Float32BufferAttribute(e.buffer,3))}adjustStart(e){var t,n;null===(t=this.pointsLaser)||void 0===t||t.position.copy(e),null===(n=this.pointsFiltered)||void 0===n||n.position.copy(e)}clearPcd(){this.pointsLoaded&&(this.scene.remove(this.pointsLoaded),this.pointsLoaded.geometry.dispose(),this.clearRealTimePcd())}loadPCD(e,t){return new Promise((n=>{this.pointsLoaded&&(this.scene.remove(this.pointsLoaded),this.pointsLoaded.geometry.dispose()),pcdLoader.load(e,(e=>{this.pointsLoaded=e,this.pointsLoaded.material=this.pcdMaterial,this.scene.add(this.pointsLoaded),n("")}),(()=>{}),t||(()=>{}))}))}clearRealTimePcd(){this.filteredBufferGeometry.setAttribute("position",new Float32BufferAttribute(new ArrayBuffer(0),3)),this.laserBufferGeometry.setAttribute("position",new Float32BufferAttribute(new ArrayBuffer(0),3))}screenShot(){this.composer.render();const e=this.renderer.domElement,t=e.height,n=e.width,i=t>n?Math.floor(t/n*150):150,o=t>n?150:Math.floor(n/t*150);e.height=i,e.width=o,this.renderer.setSize(o,i),this.renderer.render(this.scene,this.camera);const r=e.toDataURL("image/webp");return this.resize(),r}restorePerspective(){console.log("还原视角"),this.camera.position.set(0,10,10),this.camera.lookAt(0,0,0)}dispose(){this.clearRealTimePcd(),this.clearPcd(),this.orbitControl.update(),this.composer.render()}destroy(){this.animationFrameHandle&&cancelAnimationFrame(this.animationFrameHandle),this.clearRealTimePcd(),this.clearPcd(),this.composer.dispose(),this.orbitControl.dispose(),this.scene.remove(),this.renderer.dispose(),this.container&&this.container.removeChild(this.renderer.domElement)}}class Lidar3DMap extends SceneManager{constructor(){super(),_defineProperty(this,"navPathBufferGeometry",void 0),_defineProperty(this,"navPathPoints",void 0),_defineProperty(this,"robotModel",void 0),_defineProperty(this,"dogRobot",void 0),_defineProperty(this,"stats",void 0),_defineProperty(this,"lidarCommon",void 0),_defineProperty(this,"lidarNewMap",void 0),_defineProperty(this,"lidarPatrol",void 0),_defineProperty(this,"lidarRelocation",void 0),_defineProperty(this,"lidarSinglePointNav",void 0),this.navPathBufferGeometry=new BufferGeometry,this.stats=new Stats,this.lidarCommon=new LidarCommon,this.lidarNewMap=new LidarNewMap(this.scene,this.lidarCommon),this.lidarPatrol=new LidarPatrol(this.scene,this.camera,this.orbitControl,this.raycaster,this.lidarCommon),this.lidarRelocation=new LidarRelocation(this.scene,this.camera,this.orbitControl,this.raycaster,this.lidarCommon),this.lidarSinglePointNav=new LidarSinglePointNav(this.scene,this.camera,this.orbitControl,this.raycaster,this.lidarCommon)}init(e){super.init(e),this.lidarRelocation.setContainer(e),this.lidarPatrol.setContainer(e),this.lidarSinglePointNav.setContainer(e),e.addEventListener("pointerdown",this.onPointerDown.bind(this)),e.addEventListener("pointermove",this.onPointMove.bind(this)),e.addEventListener("pointerup",this.onPointUp.bind(this)),e.addEventListener("pointercancel",this.onPointUp.bind(this)),this.raycaster.layers.disableAll(),this.genGroundPlane(),this.navPathPoints=new Points(this.navPathBufferGeometry,new PointsMaterial({color:new Color(255,0,0),size:.1})),this.navPathPoints.frustumCulled=!1,this.scene.add(this.navPathPoints),this.loadChargePoint()}loadModel(){var e=this;return _asyncToGenerator((function*(){var t;null!==(t=e.robotModel)&&void 0!==t&&t.urdfRoot?e.robotModel.urdfRoot.visible=!0:(yield e.loadModelPcd(),e.loadHdr())}))()}loadModelPcd(){const{scene:e,lidarPatrol:t}=this;(new URDFLoader).loadCompressedAsync("g1_23dof.urdf","/g1_description.tar.xz").then((n=>{this.robotModel=new G1Robot(this.scene,n,!1),e.add(n),t.setRobotModel(this.robotModel),this.initRobotModel()}))}initRobotModel(){const{robotModel:e}=this;if(!e)return;const t=[new Vector3(0,.11,0),new Vector3(0,-.11,0)];e.mapPP=e.urdfRoot.position.clone().setZ((new Euler).setFromQuaternion(e.urdfRoot.quaternion,"ZYX").z);const n=new Euler(0,0,e.mapPP.z),i=t.map((t=>t.clone().applyEuler(n).add(e.mapPP)));i.map((e=>e.clone())),e.ikRoot.setEuler(0,0,e.mapPP.z),e.ikRoot.setPosition(...e.mapPP.clone().setZ(.745).toArray()),e.ikFootGoals.forEach(((e,t)=>{e.setEuler(0,0,i[t].z),e.setPosition(...i[t].clone().setZ(0).toArray())})),e.solveIK(),e.velocity.set(0,0,0),e.urdfRoot.setJointValues({waist_yaw_joint:0,left_shoulder_pitch_joint:.2,left_shoulder_roll_joint:.15,left_shoulder_yaw_joint:0,left_elbow_joint:1,left_wrist_roll_joint:0,right_shoulder_pitch_joint:.2,right_shoulder_roll_joint:-.15,right_shoulder_yaw_joint:0,right_elbow_joint:1,right_wrist_roll_joint:0})}hideRobotModel(){const{robotModel:e}=this;null!=e&&e.urdfRoot&&(e.urdfRoot.visible=!1)}loadHdr(){const e=new RGBELoader;return new Promise(((t,n)=>{(isIos()?fetchForApp:fetchWithTimeout)("/models/venice_sunset_1k.hdr").then((t=>{console.logRed("====获取得到皮肤文件====",t.size);const n=URL.createObjectURL(t);e.load(n,(e=>{e.mapping=EquirectangularReflectionMapping,this.scene.environment=e}))}))}))}loadChargePoint(){const{scene:e}=this,t=new GLTFLoader;return new Promise(((n,i)=>{(isIos()?fetchForApp:fetchWithTimeout)("/models/charge.glb").then((o=>{const r=URL.createObjectURL(o);t.load(r,(t=>{const i=t.scene;i.rotateOnAxis(new Vector3(1,0,0),Math.PI/2),i.scale.set(2.5,2.5,2.5),e.add(i),n("")}),(()=>{}),(e=>i(e)))}))}))}initLayer(){const{camera:e,raycaster:t}=this;this.lidarCommon.stateMachine=0,t.layers.disableAll(),e.layers.disableAll(),e.layers.enable(0),this.lidarNewMap.cleanMovementTraces()}updateRobotOdom(e){const{robotModel:t}=this;if(!t)return;const n=t.urdfRoot.position;t.urdfRoot.position.set(e.position.x,e.position.y,n.z);const i=new Quaternion(e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w),o=(new Euler).setFromQuaternion(i);t.urdfRoot.rotation.set(o.x,o.y,o.z)}updateRobotMotorState(e){const{dogRobot:t}=this;if(!t)return;const n=["FR","FL","RR","RL"],i=["hip","thigh","calf"];for(let a=0;a<=3;a++)for(let s=0;s<=2;s++){var o,r;null===(o=t.map)||void 0===o||null===(o=o.get(`${i[s]}${n[a]}`))||void 0===o||o.setAngle(null===(r=e[3*a+s])||void 0===r?void 0:r.q)}}cleanRobotModel(){this.robotModel&&(this.robotModel.urdfRoot.visible=!1)}genGroundPlane(){const e=new PlaneGeometry(500,500),t=new MeshBasicMaterial({color:16776960,side:DoubleSide,transparent:!0,opacity:0}),n=new Mesh(e,t);n.layers.set(1),n.name="groundPlane",this.scene.add(n)}updateNavPathPointCloud(e){this.navPathBufferGeometry.setAttribute("position",new Float32BufferAttribute(e.buffer,3))}cleanNavPathPointCloud(){this.navPathBufferGeometry.setAttribute("position",new Float32BufferAttribute(new ArrayBuffer(0),3))}onPointerDown(e){const{container:t,lidarCommon:n,lidarRelocation:i,lidarPatrol:o}=this,{pointMap:r,stateMachine:a,currPointInfo:s}=n;if(r.set(e.pointerId,e),r.size>1)return n.pointPressTimer&&(window.clearTimeout(n.pointPressTimer),n.pointPressTimer=0),void this.resetCurrPoint();t&&0!=a&&(n.pointIsDragging=!1,s.id=e.pointerId,s.pointDownPosition.x=e.clientX,s.pointDownPosition.y=e.clientY,s.pointerRaycasterPosition.x=e.clientX/this.container.clientWidth*2-1,s.pointerRaycasterPosition.y=-e.clientY/this.container.clientHeight*2+1,1==a?i.pointerDown(e):3==a&&o.pointerDown(e),e.stopPropagation())}onPointMove(e){const{lidarCommon:t,lidarPatrol:n,lidarRelocation:i,lidarSinglePointNav:o}=this,{pointMap:r,stateMachine:a,currPointInfo:s}=t;if(r.size>1)return;const{id:l}=s;l===e.pointerId&&(1==a?i.pointMove(e):2==a?o.pointMove(e):3==a&&n.pointMove(e))}onPointUp(e){const{lidarCommon:t}=this,{pointMap:n,stateMachine:i,currPointInfo:o}=t,r=n.size;n.delete(e.pointerId),o.id===e.pointerId&&(r>1||(1==i?this.lidarRelocation.pointUp(e):2==i?this.lidarSinglePointNav.pointUp(e):3==i&&this.lidarPatrol.pointUp(e),this.resetCurrPoint()))}resetCurrPoint(){const{lidarCommon:e}=this;e.currPointInfo.id=0,e.currPointInfo.pointDownPosition.x=0,e.currPointInfo.pointDownPosition.y=0,e.currPointInfo.pointerRaycasterPosition.x=0,e.currPointInfo.pointerRaycasterPosition.y=0}customRunFn(){update()}getRobotDirPoints(){var e;return{robotPoint:(null===(e=this.robotModel)||void 0===e?void 0:e.urdfRoot.position.clone())||new Vector3(0,0,0)}}resetCameraView(){const{camera:e,orbitControl:t}=this;e.position.set(0,10,10),e.lookAt(new Vector3(0,0,0)),t.target=new Vector3(0,0,0)}destroy(){var e;null===(e=this.robotModel)||void 0===e||e.urdfRoot.removeFromParent(),super.destroy()}}function useLidar3DHook(e){const t=new Lidar3DMap,n=throttle((e=>{var n;if(null==e||null===(n=e.pose)||void 0===n||!n.pose)return;const{position:i,orientation:o}=e.pose.pose,{x:r,y:a,z:s}=i;t.lidarNewMap.movementTraces([r,a,0],o)}),200,{trailing:!1});return{lidar3DMap:t,cleanPcdMap:()=>{t.clearPcd(),t.lidarNewMap.cleanMovementTraces()},initLidar3DMap:e=>{t.init(e)},resizeLidar3DMap:()=>t.resize(),clearStage:()=>{},genRobotPoint:()=>{},bindStageEvent:()=>{},removeStageEvent:()=>{},initKonvaStageState:()=>{},getAllPointNodeData:()=>[],getNodeEdgeJsonData:()=>({}),getAllEdgeData:()=>({}),removeRobotPoint:()=>{},removeSingleNavPoint:()=>{},initDragState:()=>{},getAllPatrolRouterNetInfo:()=>{const e=t.lidarPatrol.getAllPatrolPoint(),n=t.lidarPatrol.getAllPatrolEdge(),i={},o={};return e.forEach((e=>{i[e.name]={pos:[e.x,e.y,0],rpy:[0,0,e.yaw],pcd:"",acc:.5,turnable:!0,meta:{type:0,typeId:0}}})),n.forEach((e=>{const{name:t,startPosName:n,endPosName:i,weight:r}=e;o[t]={v:[parseInt(n),parseInt(i)],weight:r,meta:{gait:0,v:1,w:0,h:0,ob:[0,0,0,0],obs:0,dir:0}}})),console.log(i,o),{version:1,type:0,isTunnel:!1,vertices:i,edges:o}},dealOdomData:n}}const version="3.7.5",VERSION=version,_hasatob="function"==typeof atob,_hasbtoa="function"==typeof btoa,_hasBuffer="function"==typeof Buffer,_TD="function"==typeof TextDecoder?new TextDecoder:void 0,_TE="function"==typeof TextEncoder?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),_mkUriSafe=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),_tidyB64=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=e=>{let t,n,i,o,r="";const a=e.length%3;for(let s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|o,r+=b64chs[t>>18&63]+b64chs[t>>12&63]+b64chs[t>>6&63]+b64chs[63&t]}return a?r.slice(0,a-3)+"===".substring(a):r},_btoa=_hasbtoa?e=>btoa(e):_hasBuffer?e=>Buffer.from(e,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,i=e.length;n<i;n+=4096)t.push(_fromCC.apply(null,e.subarray(n,n+4096)));return _btoa(t.join(""))},fromUint8Array=(e,t=!1)=>t?_mkUriSafe(_fromUint8Array(e)):_fromUint8Array(e),cb_utob=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?_fromCC(192|t>>>6)+_fromCC(128|63&t):_fromCC(224|t>>>12&15)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return _fromCC(240|t>>>18&7)+_fromCC(128|t>>>12&63)+_fromCC(128|t>>>6&63)+_fromCC(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=e=>e.replace(re_utob,cb_utob),_encode=_hasBuffer?e=>Buffer.from(e,"utf8").toString("base64"):_TE?e=>_fromUint8Array(_TE.encode(e)):e=>_btoa(utob(e)),encode=(e,t=!1)=>t?_mkUriSafe(_encode(e)):_encode(e),encodeURI$1=e=>encode(e,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return _fromCC(55296+(t>>>10))+_fromCC(56320+(1023&t));case 3:return _fromCC((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return _fromCC((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=e=>e.replace(re_btou,cb_btou),atobPolyfill=e=>{if(e=e.replace(/\s+/g,""),!b64re.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,i,o="";for(let r=0;r<e.length;)t=b64tab[e.charAt(r++)]<<18|b64tab[e.charAt(r++)]<<12|(n=b64tab[e.charAt(r++)])<<6|(i=b64tab[e.charAt(r++)]),o+=64===n?_fromCC(t>>16&255):64===i?_fromCC(t>>16&255,t>>8&255):_fromCC(t>>16&255,t>>8&255,255&t);return o},_atob=_hasatob?e=>atob(_tidyB64(e)):_hasBuffer?e=>Buffer.from(e,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?e=>_U8Afrom(Buffer.from(e,"base64")):e=>_U8Afrom(_atob(e).split("").map((e=>e.charCodeAt(0)))),toUint8Array=e=>_toUint8Array(_unURI(e)),_decode=_hasBuffer?e=>Buffer.from(e,"base64").toString("utf8"):_TD?e=>_TD.decode(_toUint8Array(e)):e=>btou(_atob(e)),_unURI=e=>_tidyB64(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),decode=e=>_decode(_unURI(e)),isValid=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},_noEnum=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,_noEnum(t));e("fromBase64",(function(){return decode(this)})),e("toBase64",(function(e){return encode(this,e)})),e("toBase64URI",(function(){return encode(this,!0)})),e("toBase64URL",(function(){return encode(this,!0)})),e("toUint8Array",(function(){return toUint8Array(this)}))},extendUint8Array=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(t));e("toBase64",(function(e){return fromUint8Array(this,e)})),e("toBase64URI",(function(){return fromUint8Array(this,!0)})),e("toBase64URL",(function(){return fromUint8Array(this,!0)}))},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version,VERSION:VERSION,atob:_atob,atobPolyfill:atobPolyfill,btoa:_btoa,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode,encode:encode,encodeURI:encodeURI$1,encodeURL:encodeURI$1,utob:utob,btou:btou,decode:decode,isValid:isValid,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:extendBuiltins};var SLAM_STATE_MACHINE$1=(e=>(e[e.Idle=0]="Idle",e[e.error=100]="error",e[e.sendStartBuild=199]="sendStartBuild",e[e.buildingMap=200]="buildingMap",e[e.sendStopBuild=201]="sendStopBuild",e[e.sendLoadMap=202]="sendLoadMap",e[e.mapLoaded=203]="mapLoaded",e[e.readySettingRoadNetwork=204]="readySettingRoadNetwork",e[e.settingRoadNetwork=205]="settingRoadNetwork",e[e.navigation=300]="navigation",e[e.enableRelocation=400]="enableRelocation",e[e.initRelocationCompleted=500]="initRelocationCompleted",e[e.navigationOpen=600]="navigationOpen",e))(SLAM_STATE_MACHINE$1||{});const SLAM_STATE_MACHINE_MAP$1={0:0},useAsyncMapHook=(e,n,i)=>{const o=function(){var o=_asyncToGenerator((function*(){n.showLoading("slamMapPage");const o=window.setTimeout((()=>{n.closeLoading("slamMapPage"),n.showModal({type:"alert",content:t("Slam.timeout")},"slamMapPage")}),6e4),r=yield a();if(console.logRed("机器狗上地图列表",r),r.length>0)for(let e=0;e<r.length;e++){const t=r[e],n=t.slice(0,t.lastIndexOf("."));yield s(`${n}.pcd`),yield s(`${n}.json`),yield s(`${n}.png`)}yield s("currMapInfo.txt"),console.logRed("删除完成");const c=isIos()?fetchForApp:fetchWithTimeout,u=yield l();if(console.logRed("查询本地文件列表",u),u.length>0){console.logRed("==开始上传==");for(let t=0;t<u.length;t++){const n=u[t],i=n.slice(0,n.lastIndexOf("."));console.logRed("==开始上传==",n,i);const o=yield c(`/navfile/${n}`);console.logRed("==获取到pcd blob 值==",o);const r=yield Promise.all(d(o).map((e=>blobToBase64(e).then((e=>e)))));console.logRed("==切割后的 值==",r),yield e.writePCDFileToRobot(r,i),console.logRed("==pcd上传完成==");const a=yield c(`/navfile/${i}.json`),s=yield h(a);yield e.writeFileToRobot(i,".json",s);const l=yield c(`/navfile/${i}.png`),f=yield blobToBase64(l);yield e.writeBigFileToRobot(p(f),i,".png")}}const f=yield c("/navfile/currMapInfo.txt"),g=yield h(f);yield e.writeFileToRobot("currMapInfo",".txt",g),yield i.getAllPcdMap(),n.closeLoading("slamMapPage"),o&&window.clearTimeout(o),n.showModal({type:"alert",content:t("Slam.msg_41")},"slamMapPage")}));return function(){return o.apply(this,arguments)}}(),r=function(){var i=_asyncToGenerator((function*(){n.showLoading("slamMapPage");const i=window.setTimeout((()=>{n.closeLoading("slamMapPage"),n.showModal({type:"alert",content:t("Slam.timeout")},"slamMapPage")}),6e4),o=yield l();if(o.length>0)for(let e=0;e<o.length;e++){const t=o[e],n=t.slice(0,t.lastIndexOf("."));c([`${n}.pcd`,`${n}.json`,`${n}.png`])}c(["currMapInfo.txt"]);const r=yield a();if(r.length>0)for(let t=0;t<r.length;t++){const n=r[t],i=n.slice(0,n.lastIndexOf(".")),o=yield e.getPCDFileFormRobot(i);yield u(`${i}.pcd`,o);const a=yield e.getFileFormRobot(i,".json");a.succeed&&(yield u(`${i}.json`,gBase64.btoa(a.data.content)));const s=yield e.getBigFileFormRobot(`${i}.png`);s&&(yield u(`${i}.png`,s))}const s=yield e.getFileFormRobot("currMapInfo",".txt");s.succeed&&(yield u("currMapInfo.txt",gBase64.btoa(s.data.content))),n.closeLoading("slamMapPage"),console.logRed("同步完成"),i&&window.clearTimeout(i),n.showModal({type:"alert",content:t("Slam.msg_41")},"slamMapPage")}));return function(){return i.apply(this,arguments)}}();function a(){return e.queryPcdMapListReq()}function s(t){return e.deleteFileFormRobot(t)}function l(){return new Promise((e=>{webToApp("webReqAllNavFileList",{fileType:".pcd"},(t=>{e(JSON.parse(t))}))}))}function c(e){return new Promise((t=>{webToApp("webDelNavFile",{fileName:e},t)}))}function u(e,t){return new Promise((n=>{webToApp("webSendNavFile",{fileName:e,fileCont:t},n)}))}function d(e,t=30720){const n=[];let i=0;for(;i<e.size;){const o=Math.min(i+t,e.size);n.push(e.slice(i,o)),i=o}return n}function h(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=(null==i?void 0:i.result)||"";t(e)},i.onerror=()=>n(i.error),i.readAsText(e)}))}function p(e,t=30720){const n=Math.floor(t/1.37),i=[];for(let o=0;o<e.length;o+=n){const t=e.substr(o,n);i.push(t)}return i}return{asyncLocalToRobot:o,asyncMapFormRobot:r}},useModalHook$1=(e,n)=>{const i=ref(0);return{showLoadingModal:(o,r=(()=>n()))=>{e.showLoading(),i.value&&window.clearTimeout(i.value),i.value=window.setTimeout((()=>{e.showModal({type:"alert",content:t("Slam.timeout")}).then((()=>{null==r||r()}))}),o||3e4)},closeLoadingModal:()=>{e.closeLoading(),i.value&&window.clearTimeout(i.value)}}},useCommon$1=(e,n,i,o,r,a,s)=>{const{transformMapPosition:l,transformMapPositionRevers:c,dealRobotPoseData:u,base64ToBlobUrl:d}=commonUtils$1(),{series:h,sportMode:p}=storeToRefs(useDeviceStore()),f=ref(),g=ref(!1),m=ref(!1),_=ref((e=>{})),v=ref(0),b=ref(0),T=ref({position:{x:0,y:0},yaw:0,startTime:0,timeShowText:"00:00:00",progress:0}),A=throttle((()=>ToastMsg(t("Slam.msg_34"))),1e3,{trailing:!1}),y=ref(""),E=ref(0),S=new Map,C=new Map,w=new Map,x=new Map,M=ref(!1),R=ref(!1),I=ref(),D=ref(0),k={max_x:-999,min_x:99999,max_y:-999,min_y:9999};let L;const O=function(){var e=_asyncToGenerator((function*(){console.logRed("初始化地图"),o.value=SLAM_STATE_MACHINE$1.Idle,i.setMapPageState(!1),N(),m.value=!1,R.value=!1,T.value={position:{x:0,y:0},yaw:0,startTime:0,timeShowText:"00:00:00",progress:0},b&&window.clearInterval(b.value),yield J(!0),yield j(),K()}));return function(){return e.apply(this,arguments)}}(),{showLoadingModal:P,closeLoadingModal:N}=useModalHook$1(i,O),$=throttle((()=>{var e;null===(e=L)||void 0===e||e()}),1e3,{trailing:!1}),B=()=>{var t;(i.setHideOperaBar(!1),e.pauseNavigationReq(),g.value=!1,"patrol"===i.slamWorkModel.value)&&(b&&window.clearInterval(b.value),T.value.timeShowText="00:00:00",T.value.progress=0,null===(t=I.value)||void 0===t||t.call(I,null),D.value&&(i.actionVideo("cancel"),window.clearInterval(D.value),D.value=0))};function F(){return U.apply(this,arguments)}function U(){return(U=_asyncToGenerator((function*(){R.value}))).apply(this,arguments)}function G(){return G=_asyncToGenerator((function*(){if(i.getPowerState().isCharge){if(yield F(),!g.value)return;return m.value=!0,yield new Promise(function(){var t=_asyncToGenerator((function*(t){yield e.multiPointCircularNavigationPlusReq([9e3],!0),_.value=t}));return function(e){return t.apply(this,arguments)}}())}{const t=konvaHook.getAllPointNodeData().find((e=>9001==e.name));if(!t)return;const n=konvaHook.getRobotDirPoints();if(null==n||!n.robotPoint)return;if(getDistance$2(t.position,null==n?void 0:n.robotPoint)>10)return;if(console.log("距离充电点很近，判断为充电"),yield F(),!g.value)return;return m.value=!0,yield new Promise(function(){var t=_asyncToGenerator((function*(t){yield e.multiPointCircularNavigationPlusReq([9e3],!0),_.value=t}));return function(e){return t.apply(this,arguments)}}())}})),G.apply(this,arguments)}function V(){b.value&&window.clearInterval(b.value),T.value.startTime=performance.now(),b.value=window.setInterval((()=>{T.value.timeShowText=formatTime$1(performance.now()-T.value.startTime)}))}function H(){return!g.value&&!i.hideOperaBar.value}const W=function(){var n=_asyncToGenerator((function*(n){if(!n)return;let o;try{o=JSON.parse(n)}catch(c){return void console.logRed("导航进度信息 解析失败")}console.logGreen("收到导航进度信息",o);const r=o.data;if("patrol"===i.slamWorkModel.value){if(console.log("当前是巡逻"),"task_result"==o.type&&9999==r.targetNodeName&&r.is_arrived){var s;console.log("发送导航指令");const t=null===(s=a.value.topMapInfo)||void 0===s?void 0:s.vertices,n=Object.keys(t).map((e=>parseInt(e))),o=t[`${n[0]}`].pcd,r=o.slice(0,o.lastIndexOf("."))+".json";(yield e.multiPointCircularNavigationPlusReq(n,r,v.value)).succeed&&V(),i.switchVideoTrack(!0)}if("cycle_result"==o.type){const{curCycle:n,curState:o,cyclesNum:s,curNode:c,direct:u}=r;if(console.logPurple("是否要结束了",typeof o,o,2==o),0==o){var l;const t=(null===(l=a.value.topMapInfo)||void 0===l?void 0:l.vertices)[c].task;if(t&&t.length){yield e.pauseNavigationReq();for(let n=0;n<t.length;n++){const o=t[n];if(o.type===TaskType.Photo){if(yield i.takePhoto(),console.logRed("拍照了"),H())return}else if(o.type===TaskType.Stand){const t=Number(o.data);if(yield e.pauseNavigationReq(),yield new Promise(function(){var n=_asyncToGenerator((function*(n){I.value=n,yield e.sleepPromise(1e3*(t+1)),n(null),I.value=void 0}));return function(e){return n.apply(this,arguments)}}()),H())return;console.logRed("停留了"+t+"秒")}else if(o.type===TaskType.Video){const e=Number(o.data);if(yield new Promise((t=>{I.value=t,i.actionVideo("start"),D.value=window.setTimeout((()=>{i.actionVideo("stop"),t(null),I.value=void 0}),1e3*e+500)})),H())return;console.logRed("录像了"+e+"秒")}}if(!g.value)return;e.recoverNavigationReq()}const n=Math.floor(r.finishNodeNum/r.nodeTotal*100);T.value.progress=n>100?100:n}else console.logRed(1==o?"遥控中断":"执行完成"),e.pauseNavigationReq(),g.value=!1,b&&window.clearInterval(b.value),i.showModal({type:"alert",content:t(1==o?"Slam.msg_42":"Slam.msg_21")}).then((()=>{v.value=0,T.value.progress=0,T.value.timeShowText="00:00:00",!i.showVideo.value&&i.switchVideoTrack(!1),B(),i.handleSelectWorkModel(void 0)}))}}else"singlePoint"===i.slamWorkModel.value&&"task_result"==o.type&&9999==r.targetNodeName&&r.is_arrived&&(g.value=!1,i.setHideOperaBar(!1))}));return function(e){return n.apply(this,arguments)}}(),z=throttle((e=>{e.position&&(T.value.position={x:e.position.x.toFixed(2),y:e.position.y.toFixed(2)}),void 0!==e.yaw&&(T.value.yaw=e.yaw.toFixed(2))}),500,{trailing:!1}),j=()=>e.queryPcdMapListReq().then(function(){var t=_asyncToGenerator((function*(t){console.log("地图数据",t);const n=yield e.queryTopMapListReq();console.log("拓扑图数据",n);const i=t.map((e=>{const t=e.slice(0,e.lastIndexOf(".")).split("_"),i=t[0];return{pcdMapName:i?gBase64.decode(i):"",createTime:`${t[1].slice(0,4)}-${t[1].slice(4,6)}-${t[1].slice(6)}`,createTime2:t[1],hasTopMap:!!(n||[]).find((t=>t.slice(0,t.lastIndexOf("."))===e.slice(0,e.lastIndexOf("."))))}}));i.sort(((e,t)=>Number(t.createTime)-Number(e.createTime))),r.value=i,i.length&&X()}));return function(e){return t.apply(this,arguments)}}()),X=function(){var t=_asyncToGenerator((function*(){if(r.value&&r.value.length){console.logRed("开始获取缩略图");for(let t=0;t<r.value.length;t++){const n=r.value[t],i=`${gBase64.encodeURL(n.pcdMapName||"")}_${n.createTime2}`,o=yield e.getBigFileFormRobot(`${i}.png`);if(o){const e=gBase64.atob(o),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);const i=new Blob([t]);n.pcdImageUrl=URL.createObjectURL(i)}}}}));return function(){return t.apply(this,arguments)}}();function Y(e){return q.apply(this,arguments)}function q(){return(q=_asyncToGenerator((function*(e){console.logRed("即将要加载地图",e.pcdMapName),a.value=e,a.value.isSelected=!0,console.logRed("地图 top情况",e.hasTopMap),P();const t=`${gBase64.encodeURL(e.pcdMapName)}_${e.createTime2}`;yield Z(t),o.value=SLAM_STATE_MACHINE$1.Idle,window.setTimeout((()=>n.resizeLidar3DMap()),1e3),yield ee(t),N()}))).apply(this,arguments)}const K=()=>{e.queryCurrMapInfoReq().then(function(){var e=_asyncToGenerator((function*(e){if(console.log("当前默认地图信息",e),o.value=SLAM_STATE_MACHINE_MAP$1[0],console.log("当前状态",o.value,r.value),r.value.length<=0)return;const t=null==e?void 0:e.content;if(console.log("当前默认地图",t),t){const e=t.split("_")[0],n=gBase64.decode(e);console.log("地图名称",n,r);r.value.find((e=>e.pcdMapName==n))?r.value.forEach((e=>{console.log("遍历地图",e.pcdMapName,n,e.pcdMapName===n),e.pcdMapName===n?(console.logRed("找到了",e),e.isSelected=!0,Y(e)):e.isSelected=!1})):Q()}else Q();M.value=!1}));return function(t){return e.apply(this,arguments)}}())},Q=function(){var t=_asyncToGenerator((function*(){const t=r.value[0];Y(t);const n=t.pcdMapName;if(n){const i=`${gBase64.encodeURL(n)}_${t.createTime2}`;yield e.updateCurrMapInfoReq(i)}}));return function(){return t.apply(this,arguments)}}(),Z=t=>new Promise((i=>{P(12e4),n.initKonvaStageState(),e.loadMapReq(t).then(function(){var e=_asyncToGenerator((function*(e){var t;e&&(yield function(e){const t=d(e);return n.lidar3DMap.dispose(),n.lidar3DMap.loadPCD(t)}(e),null===(t=f.value)||void 0===t||t.postMessage("clear"));i(""),N()}));return function(t){return e.apply(this,arguments)}}())}));const J=t=>(console.log("关闭所有功能"),t?e.closeAllReq().then((e=>(M.value=!1,e))):new Promise((e=>{B(),e(void 0)}))),ee=function(){var t=_asyncToGenerator((function*(t){var n;const i=yield e.getAllExhibitionPoints();if(null==i||null===(n=i.data)||void 0===n||!n.data)return;const o=JSON.parse(i.data.data),r="success"==o.status&&o.data||[];console.log("全部站点信息",r),yield e.delExhibitionPoints(r.map((e=>({id:e.id}))));!function(t){new Promise((n=>{const i=[];for(const e in t){const n=t[e],o=eulerToQuaternion$1(n.rpy[0],n.rpy[1],n.rpy[2]),r=n.guided,a={id:parseInt(e),name:decodePako(r.title),detail:decodePako(r.content),pos:{x:n.pos[0],y:n.pos[1],z:n.pos[2],q_x:o.x,q_y:o.y,q_z:o.z,q_w:o.w,address:n.pcd}};i.push(a)}e.addExhibitionPoints(i).then((e=>{n(e)}))}))}((yield e.loadTopMapReq(t)).vertices)}));return function(e){return t.apply(this,arguments)}}();return{slamWorkerRef:f,currMapInfo:a,transformMapPosition:l,transformMapPositionRevers:c,dealRobotPoseData:u,updateRobotPosition:e=>{const t=Number(e.positionX),n=Number(e.positionY),i=Number(e.orientationX),o=Number(e.orientationY),r=Number(e.orientationZ),a=Number(e.orientationW);k.max_x=Math.max(k.max_x,t),k.min_x=Math.min(k.min_x,t),k.max_y=Math.max(k.max_y,n),k.min_y=Math.min(k.min_y,n),(Math.abs(k.max_x-k.min_x)>=50||Math.abs(k.max_y-k.min_y)>=50)&&$();const s=u({x:t,y:n,z:0},{x:i,y:o,z:r,w:a});konvaHook.updateRobotPointPlus(s.position,s.yaw)},isOutCharge:m,outToCharge:function(){return G.apply(this,arguments)},currModeTaskState:g,isStandUpping:R,navigationProcessFeedback:W,dealSlamInfoData:e=>{if(!e)return;let t;try{t=JSON.parse(e)}catch(n){return void console.logRed("slam 状态信息 解析失败")}"collision"==t.type&&0!==t.errorCode&&A()},patrolCount:v,patrolTimer:b,patrolSituation:T,updatePatrolSituation:z,startPatrolTimeShow:V,handleStop:B,showLoadingModal:P,closeLoadingModal:N,newMapNameTemp:y,newMapIndexTemp:E,loadMapResolveMap:S,loadMapImageOkMap:C,thumbanilMapResolveMap:w,thumbanilMapImageOkMap:x,hasInitRelocation:M,mappingRobotPosition:k,resetMappingRobotPositionTemp:()=>{k.max_x=-999,k.min_x=99999,k.max_y=-999,k.min_y=9999},closeAllFunc:J,init:O,loadMap:Z,loadPcdTopMap:t=>{const n=r.value.find((e=>e.pcdMapName===t));if(!n)return Promise.reject("未找到地图信息");const i=`${gBase64.encodeURL(t)}_${n.createTime2}`;return e.loadTopMapReq(i)},getAllPcdMap:j,getCurrMapInfo:K,getAllPcdMapImage:X,loadPcdMapToScreen:Y,getSinglePcdMapImage:(t,n)=>new Promise(function(){var i=_asyncToGenerator((function*(i){const o=yield e.getPCDMapForIndexReq(t,n);if(1===o.feedback&&o.index){x.get(Number(o.index))?(i(o),x.delete(Number(o.index))):w.set(Number(o.index),(()=>i(o)))}else i(o)}));return function(e){return i.apply(this,arguments)}}()),standUpJudge:F,setSaveOperationFn:e=>{L=e},updateAllNodeToGPT:ee}};function commonUtils$1(e,t){return{dealRobotPoseData:function(e,t){return{position:e,yaw:quaternionToEulerYaw$1(t)}},base64ToBlobUrl:function(e){const t=gBase64.atob(e),n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);const i=new Uint8Array(n),o=new Blob([i],{type:"text/plain"});return URL.createObjectURL(o)}}}const emojiRegex=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,useMapManageHook$1=(e,n,i,o,r,a,s)=>{const{showLoadingModal:l,closeLoadingModal:c,getSinglePcdMapImage:u,loadMap:d,loadPcdTopMap:h,getAllPcdMap:p,getCurrMapInfo:f,getAllPcdMapImage:g,loadPcdMapToScreen:m,standUpJudge:_,resetMappingRobotPositionTemp:v,closeAllFunc:b,newMapNameTemp:T}=o,{startBuildMapReq:A}=e,y=function(){var e=_asyncToGenerator((function*(e){i.showModal({type:"input",title:t("Slam.createMapTitle"),verifyFn:e=>{if(!e.trim())return ToastMsg(t("Slam.msg_26")),!1;if(Array.from(e).length>10)return ToastMsg(t("Slam.msg_24")),!1;if(/[\/\\:*?"<>|]/.test(e))return ToastMsg(t("Slam.msg_25")),!1;if(emojiRegex().test(e))return ToastMsg(t("Slam.msg_30")),!1;const n=a.value.filter((t=>t.pcdMapName===e)).length<=0;return n||ToastMsg(t("Slam.mapNameRepeat")),n}},e).then(function(){var t=_asyncToGenerator((function*(t){"slamMapPage"===e&&i.setMapPageState(!1),i.setHideJoystick(!0),l(),T.value=t,yield b(!0),n.cleanPcdMap(),n.lidar3DMap.lidarPatrol.cleanPatrolPoint(),n.lidar3DMap.hideRobotModel(),A().then(function(){var e=_asyncToGenerator((function*(e){console.log("=====",e),v(),c(),i.setHideJoystick(!1),s.value={pcdMapName:T.value}}));return function(t){return e.apply(this,arguments)}}())}));return function(e){return t.apply(this,arguments)}}()).catch((()=>{console.log("取消")}))}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=_asyncToGenerator((function*(e){const o=a.value[e];i.showModal({type:"ask",content:t("Slam.msg_1"),iconType:"edit"},"slamMapPage").then(_asyncToGenerator((function*(){var e;l(),n.cleanPcdMap(),yield b(!0),s.value=o;const a=`${gBase64.encodeURL(o.pcdMapName)}_${o.createTime2}`;if(yield d(a),o.hasTopMap){const e=yield h(o.pcdMapName);console.logRed("查询点边信息结果",e),s.value.topMapInfo=e,i.initPointNodeTask(Object.entries(e.vertices))}r.value=SLAM_STATE_MACHINE$1.mapLoaded,i.setMapPageState(!1),null===(e=n.lidar3DMap)||void 0===e||e.lidarRelocation.startRelocation(),i.setHideJoystick(!1),r.value=SLAM_STATE_MACHINE$1.enableRelocation,i.showHelpTip(t("Slam.help_tip_1")),c()}))).catch((()=>{console.log("取消编辑")}))}));return function(t){return e.apply(this,arguments)}}();return{getAllPcdMap:p,loadPcdTopMap:h,getAllPcdMapImage:g,getSinglePcdMapImage:u,loadMap:d,loadPcdMapToScreen:m,getCurrMapInfo:f,handleAddMap:y,handleEditTopMap:E,handleEditPCDName:n=>{i.showModal({type:"input",title:t("Slam.modifyMapName"),verifyFn:e=>{if(!e.trim())return ToastMsg(t("Slam.msg_26")),!1;if(Array.from(e).length>10)return ToastMsg(t("Slam.msg_24")),!1;if(/[\/\\:*?"<>|]/.test(e))return ToastMsg(t("Slam.msg_25")),!1;if(emojiRegex().test(e))return ToastMsg(t("Slam.msg_30")),!1;const n=a.value.filter((t=>t.pcdMapName===e)).length<=0;return n||ToastMsg(t("Slam.mapNameRepeat")),n}},"slamMapPage").then(function(){var t=_asyncToGenerator((function*(t){const i=a.value[n],o=`${gBase64.encodeURL(i.pcdMapName)}_${i.createTime2}.pcd`,r=`${gBase64.encodeURL(t)}_${i.createTime2}.pcd`,s=yield e.editPCDMapNameReq(o,r);console.log("编辑结果",s),s.succeed&&(a.value[n].pcdMapName=t)}));return function(e){return t.apply(this,arguments)}}()).catch((()=>{console.log("取消编辑")}))},handleDelMap:o=>{i.showModal({type:"ask",content:t("Slam.msg_2")},"slamMapPage").then((()=>{console.log("删除地图",o);const r=a.value[o],l=`${gBase64.encodeURL(r.pcdMapName)}_${r.createTime2}`;e.deletePcdMapReq(l).then((e=>{e.succeed?(a.value.splice(o,1),a.value.length>0?r.pcdMapName===s.value.pcdMapName&&(console.log("加载第一张图",a.value,a.value[0]),m(a.value[0]),i.setMapPageState(!1)):(n.cleanPcdMap(),b(!0),s.value={},i.setMapPageState(!1))):ToastMsg(t("toastMsg_20"))}))})).catch((()=>{console.log("取消删除")}))},handleSelectMap:n=>{i.showModal({type:"ask",content:t("Slam.msg_3")},"slamMapPage").then(_asyncToGenerator((function*(){l();const t=a.value[n];yield b(!0),yield m(t),i.setMapPageState(!1),c(),a.value.forEach(((e,t)=>{e.isSelected=t==n})),e.updateCurrMapInfoReq(`${gBase64.encodeURL(t.pcdMapName)}_${t.createTime2}`)}))).catch((()=>{console.log("取消加载")}))}}},useMsgReceiver$1=(e,n,i,o,r,a)=>{const{hasInitRelocation:s}=o;throttle((()=>ToastMsg(t("Slam.msg_35"))),1e3,{trailing:!1});return{messageListen:e=>{if(RTC_TOPIC.SLAM_INFO==e.topic)o.dealSlamInfoData(e.data);else if(RTC_TOPIC.SLAM_KEY_INFO==e.topic)o.navigationProcessFeedback(e.data);else if(RTC_TOPIC.SLAM_MAPPING_POINTS==e.topic){var t;null===(t=r.value)||void 0===t||t.postMessage({type:"newMap",data:e.data})}else if(RTC_TOPIC.SLAM_MAPPING_ODOM==e.topic)n.dealOdomData(e.data);else if(RTC_TOPIC.SLAM_RELOCATION_POINTS==e.topic){var i;null===(i=r.value)||void 0===i||i.postMessage({type:"location",data:e.data})}else if(RTC_TOPIC.SLAM_RELOCATION_ODOM==e.topic){const{position:t,orientation:i}=e.data.pose.pose;n.lidar3DMap.updateRobotOdom(e.data.pose.pose),o.updatePatrolSituation({position:t,yaw:quaternionToEulerYaw$1(i)})}else if(RTC_TOPIC.LOW_STATE==e.topic){var a;const t=e.data.motor_state;null===(a=n.lidar3DMap.robotModel)||void 0===a||a.urdfRoot.setJointValues({right_hip_pitch_joint:t[6].q,right_hip_roll_joint:t[7].q,right_hip_yaw_joint:t[8].q,right_knee_joint:t[9].q,right_ankle_pitch_joint:t[10].q,right_ankle_roll_joint:t[11].q,left_hip_pitch_joint:t[0].q,left_hip_roll_joint:t[1].q,left_hip_yaw_joint:t[2].q,left_knee_joint:t[3].q,left_ankle_pitch_joint:t[4].q,left_ankle_roll_joint:t[5].q})}}}},usePatrolHook$1=(e,n,i,o)=>{const{getAllPointNodeData:r}=n,{transformMapPosition:a,currModeTaskState:s,outToCharge:l,patrolCount:c,patrolSituation:u,startPatrolTimeShow:d,standUpJudge:h}=o,p=ref(!1),f=ref(!1);function g(){return m.apply(this,arguments)}function m(){return(m=_asyncToGenerator((function*(){var t;if(!s.value)return;const r=null===(t=o.currMapInfo.value.topMapInfo)||void 0===t?void 0:t.vertices,a=n.lidar3DMap.getRobotDirPoints();let l=0,u=9999,h={x:0,y:0},p=999,g=!1;if(a){const e=a.robotPoint;for(const[t,n]of Object.entries(r)){const i=n.pos,o=n.rpy,[r,a]=i,s=getDistance$2({x:r,y:a},e);u<s||(u=s,l=parseInt(t),h={x:r,y:a},p=o[2])}}else{const[e,t]=Object.entries(r)[0],n=t.pos,i=t.rpy,[o,a]=n;l=parseInt(e),h={x:o,y:a},p=i[2]}if(u<.3&&(g=!0),console.log("最近的点",l,u),g){console.log("在路网上  直接开始巡逻",r,Object.keys(r));const t=Object.keys(r).map((e=>parseInt(e))),n=r[`${t[0]}`].pcd,o=n.slice(0,n.lastIndexOf("."))+".json";(yield e.multiPointCircularNavigationPlusReq(t,o,c.value)).succeed&&d(),i.switchVideoTrack(!0)}else console.log("不在路网上  单点到最近的点",l,h,p),e.anyPointNavigationReq(_objectSpread(_objectSpread({},h),{},{z:0}),eulerToQuaternion$1(0,0,p)),d();f.value=!0}))).apply(this,arguments)}return{patrol:function(){var e;const n=null===(e=o.currMapInfo.value.topMapInfo)||void 0===e?void 0:e.vertices;if(console.log("全部信息",n),!n||Object.keys(n).length<=0)i.showModal({type:"ask",content:t("Slam.msg_18"),iconType:"question"});else if(!p.value)return i.showModal({type:"select",title:t("Slam.msg_19")}).then(function(){var e=_asyncToGenerator((function*(e){e&&(c.value=Number(e),p.value=!0,f.value=!1,s.value=!0,i.setHideOperaBar(!0),u.value.timeShowText="00:00:00",nextTick((()=>p.value=!1)),s.value&&g())}));return function(t){return e.apply(this,arguments)}}())},hasShowPatrolModal:p,patrolIsReady:f,patrolReadyWork:g,handleMarkPatrolPoint:()=>{n.lidar3DMap.lidarPatrol.addPatrolRouterNetPoint()}}},useRelocationHook$1=(e,n,i,o)=>{const{showLoadingModal:r,closeLoadingModal:a,transformMapPosition:s,currMapInfo:l,hasInitRelocation:c}=o;function u(){const e=n.lidar3DMap.lidarRelocation.getRelocationPointInfo();if(!e)return null;const{position:t,yaw:i}=e,o=t,r=eulerToQuaternion$1(0,0,i*(180/Math.PI));return{quaternion:{x:r.x,y:r.y,z:r.z,w:r.w},translation:_objectSpread(_objectSpread({},o),{},{z:0}),startPos:o}}const d=function(){var o=_asyncToGenerator((function*(){var o,s;if(c.value)return ToastMsg(t("Slam.msg_14")),{succeed:!0,notice:t("Slam.msg_15")};const d=u();if(!d)return i.showHelpTip(t("Slam.help_tip_1")),Promise.reject(t("Slam.msg_13"));r(),console.logRed("---当前-》",l.value);const h=`${gBase64.encodeURL((null===(o=l.value)||void 0===o?void 0:o.pcdMapName)||"")}_${(null===(s=l.value)||void 0===s?void 0:s.createTime2)||""}`,p=yield e.initRelocationReq(d.quaternion,d.translation,h);return console.log("初始化重定位结果",p),p.succeed?(c.value=!0,yield n.lidar3DMap.loadModel(),n.lidar3DMap.lidarRelocation.cancelRelocation(),ToastMsg(t("Slam.msg_14")),a(),p):(ToastMsg(t("Slam.msg_32")),a(),null)}));return function(){return o.apply(this,arguments)}}(),h=function(){var e=_asyncToGenerator((function*(){if(c.value)return ToastMsg(t("Slam.msg_14")),{succeed:!0,notice:t("Slam.msg_15")};return u()?d().then((e=>{null!=e&&e.succeed?"singlePoint"===i.slamWorkModel.value&&n.lidar3DMap.lidarSinglePointNav.startNavigation():ToastMsg(t("Slam.msg_40"))})).catch((e=>{ToastMsg(t("Slam.msg_40"))})):(i.showHelpTip(t("Slam.help_tip_1")),Promise.reject(t("Slam.msg_13")))}));return function(){return e.apply(this,arguments)}}();return{hasInitRelocation:c,handleInitRelocation:()=>d().then((e=>{null!=e&&e.succeed&&i.showHelpTip(t("Slam.msg_12"))})),handleInitRelocationPlus:h}},useReturnChargeHook$1=(e,n,i,o)=>{const{transformMapPosition:r,outToCharge:a,currModeTaskState:s,standUpJudge:l}=o,c=ref(!1);function u(){return(u=_asyncToGenerator((function*(){c.value=!1,i.setHideOperaBar(!0),s.value=!0;if("success"==(yield a())){if(!s.value)return;d(),c.value=!0}else{if(yield l(),!s.value)return;const n=konvaHook.getChargePointPos();if(!n)return void ToastMsg(t("Slam.msg_20"));const{readyPointPos:i}=n,o=r(i);e.anyPointNavigationReq(_objectSpread(_objectSpread({},o),{},{z:0}),999),c.value=!0}}))).apply(this,arguments)}const d=()=>{e.returnChargeReq().then((e=>{console.log("回充结果",e)}))};return{returnCharge:function(){return u.apply(this,arguments)},returnChargeIsReady:c,judgeRobotPoint:e=>{const t="chargePoint"==e?9001:9e3,n=konvaHook.getAllPointNodeData().find((e=>e.name==t));if(!n)return;const i=konvaHook.getRobotDirPoints();if(null==i||!i.robotPoint)return;const o=getDistance$2(n.position,null==i?void 0:i.robotPoint);return console.log("判断充电准备点和机器当前的位置",o),o<10},sendReturnChargeReq:d}},useSaveHook$1=(e,n,i,o,r,a,s,l)=>{const{addNodeReq:c,addEdgeReq:u,endBuildMapReq:d}=e,{getAllEdgeData:h,getAllPointNodeData:p,getNodeEdgeJsonData:f,removeRobotPoint:g,bindStageEvent:m}=n,{mappingRobotPosition:_,transformMapPosition:v,showLoadingModal:b,closeLoadingModal:T,newMapNameTemp:A,getSinglePcdMapImage:y,loadMap:E,loadPcdTopMap:S,closeAllFunc:C}=o,w=()=>{const e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),o=`${gBase64.encodeURL(A.value)}_${t}${n}${i}`;return d(o).then((e=>(e.succeed&&(a.value.unshift({pcdMapName:A.value,createTime:`${t}-${n}-${i}`,createTime2:`${t}${n}${i}`}),console.logRed("结束建图成功",e)),e)))},x=()=>{r.value===SLAM_STATE_MACHINE$1.buildingMap?(b(12e4),w().then(function(){var o=_asyncToGenerator((function*(o){if(T(),_.max_x=-999,_.min_x=9999,_.max_y=-999,_.min_y=9999,o.succeed){var l;yield i.showModal({type:"alert",content:t("Slam.msg_5"),iconType:"tick"}),b(),r.value=SLAM_STATE_MACHINE$1.readySettingRoadNetwork,n.cleanPcdMap();const o=a.value.find((e=>e.pcdMapName===A.value)),c=`${gBase64.encodeURL(A.value)}_${o.createTime2}`;yield E(c),console.logRed("==获取第一个地图===",a.value[0]),s.value=a.value[0],yield function(t){var i;const o=(null===(i=n.lidar3DMap)||void 0===i?void 0:i.screenShot()).replace(/^data:image\/\w+;base64,/,"");return e.writeBigFileToRobot(function(e,t=30720){const n=Math.floor(t/1.37),i=[];for(let o=0;o<e.length;o+=n){const t=e.substr(o,n);i.push(t)}return i}(o),t,".png").then((()=>{const e=gBase64.atob(o),t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);const n=new Blob([t]);s.value.pcdImageUrl=URL.createObjectURL(n)}))}(c),console.log("缩略图已保存"),r.value=SLAM_STATE_MACHINE$1.enableRelocation,null===(l=n.lidar3DMap)||void 0===l||l.lidarRelocation.startRelocation(),T(),i.showHelpTip(t("Slam.help_tip_1"))}else ToastMsg(t("toastMsg_20")),console.logRed("结束建图指令执行失败"),T(),s.value={}}));return function(e){return o.apply(this,arguments)}}())):r.value===SLAM_STATE_MACHINE$1.settingRoadNetwork&&i.showModal({type:"ask",iconType:"save",content:t("Slam.msg_6")}).then((()=>{i.setHideTaskWindow(!0),b(),console.log("====>",s.value);const t=s.value.pcdMapName,o=s.value.createTime2,a=`${gBase64.encodeURL(t)}_${o}`,l=n.getAllPatrolRouterNetInfo(),c=i.getAllPointNodeTask();for(const e of Object.keys(c)){var u;if(null===(u=c[e].guidedInfo)||void 0===u||!u.title)return ToastMsg("请确认所有展点都设置了标题"),void T()}for(const e in l.vertices){var d,h,p;const t=l.vertices[e];t.pcd=`/unitree/data/unitree_slam/${a}.pcd`,t.task=(null===(d=c[e])||void 0===d?void 0:d.taskList)||[],t.guided={title:encodePako(null===(h=c[e])||void 0===h||null===(h=h.guidedInfo)||void 0===h?void 0:h.title),content:encodePako(null===(p=c[e])||void 0===p||null===(p=p.guidedInfo)||void 0===p?void 0:p.content)}}e.writeFileToRobot(a,".json",JSON.stringify(l)).then(function(){var e=_asyncToGenerator((function*(e){T(),e.succeed&&(console.log("点边文件添加到缓存成功"),b(),n.cleanPcdMap(),n.lidar3DMap.lidarPatrol.exitPatrol(),yield E(a),s.value.hasTopMap=!0,s.value.topMapInfo=l,r.value=SLAM_STATE_MACHINE$1.Idle,T(),window.setTimeout((()=>n.resizeLidar3DMap()),1e3))}));return function(t){return e.apply(this,arguments)}}())})).catch((e=>{T(),console.log("取消保存",e)}))};return o.setSaveOperationFn(x),{endBuildMap:w,handleSave:x}},useSinglePointNavHook$1=(e,n,i,o)=>{const{transformMapPosition:r,currModeTaskState:a,outToCharge:s,standUpJudge:l}=o;function c(){return c=_asyncToGenerator((function*(){if(!n.lidar3DMap.lidarSinglePointNav.getNavigationPoint())return ToastMsg(t("Slam.msg_17")),void nextTick((()=>a.value=!1));console.log("=======开始单点"),function(){u.apply(this,arguments)}()})),c.apply(this,arguments)}function u(){return(u=_asyncToGenerator((function*(){const t=n.lidar3DMap.lidarSinglePointNav.getNavigationPoint();i.setHideOperaBar(!0),a.value=!0,yield l(),a.value&&a.value&&e.anyPointNavigationReq({x:t.x,y:t.y,z:0},{x:0,y:0,z:0,w:0})}))).apply(this,arguments)}return{singlePointNav:function(){return c.apply(this,arguments)}}},useWorkerHook$1=(e,t,n,i,o,r)=>{const{slamWorkerRef:a,loadMapResolveMap:s,loadMapImageOkMap:l,thumbanilMapResolveMap:c,thumbanilMapImageOkMap:u,updateRobotPosition:d}=i,h=e=>{if(!e.data)return;const{type:n,data:i}=e.data;"newMap"==n?t.lidar3DMap.updatePointCloud(i.output,i.directOutput):"location"==n?t.lidar3DMap.updateLaserPointCloud(i.points):"navigation-path"==n?t.lidar3DMap.updateNavPathPointCloud(i.points):"check"==n&&console.logRed("=============雷达的worker启动完成==============")};function p(){window.slamWorker||(window.slamWorker=new Worker(new URL("/assets/three.worker-aRfKq9a0.js",module.meta.url))),window.slamWorker.onmessage=h,a.value=window.slamWorker}return p(),{slamWorkerRef:a,loadWorker:p,mapDataInfoTemp:r}};function useCoreHook$1(e,n,i,o,r){const a=ref({}),s=ref({}),l=useCommon$1(e,n,i,o,r,s),{currModeTaskState:c,isOutCharge:u,patrolSituation:d,isStandUpping:h,handleStop:p,showLoadingModal:f,closeLoadingModal:g,init:m,closeAllFunc:_,standUpJudge:v}=l,{slamWorkerRef:b}=useWorkerHook$1(e,n,i,l,r,a),{handleAddMap:T,handleEditTopMap:A,handleEditPCDName:y,handleDelMap:E,handleSelectMap:S}=useMapManageHook$1(e,n,i,l,o,r,s),{endBuildMap:C,handleSave:w}=useSaveHook$1(e,n,i,l,o,r,s),{hasInitRelocation:x,handleInitRelocation:M,handleInitRelocationPlus:R}=useRelocationHook$1(e,n,i,l),{singlePointNav:I}=useSinglePointNavHook$1(e,n,i,l),{patrol:D,patrolIsReady:k,patrolReadyWork:L,handleMarkPatrolPoint:O}=usePatrolHook$1(e,n,i,l),{returnCharge:P,returnChargeIsReady:N,judgeRobotPoint:$,sendReturnChargeReq:B}=useReturnChargeHook$1(e,n,i,l),{messageListen:F}=useMsgReceiver$1(e,n,i,l,b),{asyncLocalToRobot:U,asyncMapFormRobot:G}=useAsyncMapHook(e,i,l),V=function(){var e=_asyncToGenerator((function*(){const e=i.slamWorkModel.value;x.value?h.value?ToastMsg(t("Slam.msg_37")):"patrol"===e?D():"singlePoint"===e?I():"returnCharge"===e&&(i.getPowerState().isCharge?i.showModal({type:"ask",content:t("Slam.msg_31"),iconType:"question"}).then((()=>P())).catch((()=>{console.log("取消回充")})):P()):ToastMsg(t("Slam.msg_7"))}));return function(){return e.apply(this,arguments)}}(),H=ref(!1),W=throttle((e=>z(e)),1e3,{trailing:!1}),z=function(){var n=_asyncToGenerator((function*(n){H.value||(h.value?ToastMsg(t("Slam.msg_37")):(H.value=!0,n?(yield v(),"patrol"===i.slamWorkModel.value?k.value?e.recoverNavigationReq():L():"singlePoint"===i.slamWorkModel.value?I():"returnCharge"===i.slamWorkModel.value&&(N.value?$("readyPoint")?B():$("chargePoint")?"balanceStand"==i.currSportState.value&&i.sendLieDown():P():P()),c.value=!0):(e.pauseNavigationReq(),c.value=!1),H.value=!1))}));return function(e){return n.apply(this,arguments)}}();return{currMapInfo:s,isOutCharge:u,hasInitRelocation:x,messageListen:F,init:m,closeAllFunc:_,showLoadingModal:f,closeLoadingModal:g,endBuildMap:C,handleAddMap:T,handleEditTopMap:A,handleEditPCDName:y,handleSelectMap:S,handleDelMap:E,handleSave:w,handleNextToSettingRoute:()=>{x.value?(o.value=SLAM_STATE_MACHINE$1.settingRoadNetwork,n.lidar3DMap.lidarRelocation.cancelRelocation(),n.lidar3DMap.lidarPatrol.startPatrol(),s.value.hasTopMap&&s.value.topMapInfo&&n.lidar3DMap.lidarPatrol.renderPatrolPointForData(s.value.topMapInfo),i.showHelpTip(`<div>${t("Slam.msg_8")}</div><div>${t("Slam.msg_9")}</div><div>${t("Slam.msg_10")}</div><div>${t("Slam.msg_11")}</div>`)):ToastMsg(t("Slam.msg_7"))},handleInitRelocation:M,handleStartWork:V,handleInitRelocationPlus:R,handleSelectWorkModelPro:e=>{const r=i.slamWorkModel.value===e;var a;"map"!==e&&(n.lidar3DMap.initLayer(),x.value||r||null===(a=n.lidar3DMap.lidarRelocation)||void 0===a||a.startRelocation());if("patrol"==e)if(r)n.lidar3DMap.lidarPatrol.cleanPatrolPoint(),n.lidar3DMap.initLayer();else{if(!s.value.hasTopMap)return void i.showModal({type:"ask",content:t("Slam.msg_16"),iconType:"edit",sureBtnText:t("Slam.createBtn")}).then(_asyncToGenerator((function*(){var e;(f(),n.lidar3DMap.initLayer(),x.value)?(o.value=SLAM_STATE_MACHINE$1.settingRoadNetwork,i.setHideJoystick(!1),n.lidar3DMap.lidarPatrol.startPatrol()):(o.value=SLAM_STATE_MACHINE$1.enableRelocation,i.setHideJoystick(!1),null===(e=n.lidar3DMap.lidarRelocation)||void 0===e||e.startRelocation(),i.showHelpTip(t("Slam.help_tip_1")));g()}))).catch((()=>{console.log("取消")}));l.loadPcdTopMap(s.value.pcdMapName).then((e=>{console.logRed("查询点边信息结果",e),s.value.topMapInfo=e,n.lidar3DMap.lidarPatrol.showPatrol(),n.lidar3DMap.lidarPatrol.renderPatrolPointForData(e)}))}"singlePoint"==e?r?(n.lidar3DMap.lidarSinglePointNav.exitNavigation(),n.lidar3DMap.lidarSinglePointNav.cleanIndicator()):x.value&&n.lidar3DMap.lidarSinglePointNav.startNavigation():"singlePoint"==i.slamWorkModel.value&&(n.lidar3DMap.lidarSinglePointNav.exitNavigation(),n.lidar3DMap.lidarSinglePointNav.cleanIndicator()),e!==i.slamWorkModel.value?(c.value=!1,i.setHideOperaBar(!1)):p(),i.handleSelectWorkModel(e)},handleMarkPatrolPoint:O,currModeTaskState:c,handleActive:W,handleStop:p,handleMarkCharge:()=>{},handleClearRouteNet:()=>{i.showModal({type:"ask",content:t("Slam.msg_4")}).then((()=>{n.lidar3DMap.lidarPatrol.cleanPatrolPoint(),i.markChargeBtnText.value=t("Slam.chargeBtnText_1")})).catch((()=>{console.log("取消清除")}))},handleCancelRouteNet:()=>{const e=undo();"charge"===(null==e?void 0:e.type)&&(getChargePointPos()||(i.markChargeBtnText.value=t("Slam.chargeBtnText_1")))},reconnectionDealState:()=>{i.slamWorkModel.value&&(x.value?c.value&&("patrol"===i.slamWorkModel.value?k.value?e.recoverNavigationReq():L():"singlePoint"===i.slamWorkModel.value?I():"returnCharge"===i.slamWorkModel.value&&(console.log("重连上了， 当前是回充状态"),$("chargePoint")?(console.log("在充电点上","balanceStand"!==i.currSportState.value,i.getPowerState().isCharge),"balanceStand"!==i.currSportState.value||i.getPowerState().isCharge?p():c.value=!1):P())):konvaHook.bindStageEvent("layerBg"))},asyncLocalToRobot:U,asyncMapFormRobot:G,patrolSituation:d}}function getDistance$2(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function formatTime$1(e){const t=Math.floor(e/1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`}function quaternionToEulerYaw$1(e){const t=e.x,n=e.y,i=e.z,o=e.w;let r=Math.atan2(2*(o*i+t*n),1-2*(n*n+i*i));r=180*r/Math.PI;return-r}function eulerToQuaternion$1(e,t,n){const i=e*(Math.PI/180)/2,o=t*(Math.PI/180)/2,r=n*(Math.PI/180)/2,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),c=Math.sin(o),u=Math.cos(i),d=Math.sin(i);return{x:d*l*a-u*c*s,y:u*c*a+d*l*s,z:u*l*s-d*c*a,w:u*l*a+d*c*s}}function disassembleMoveActiveSpeed(e){return{currHSpeedScale:Math.cos(e.angle)*e.percentage,currVSpeedScale:-Math.sin(e.angle)*e.percentage}}function disassembleViewActiveSpeed(e){let t=e.angle+Math.PI/2;t>Math.PI&&(t=e.angle-Math.PI-Math.PI/2);const n=Math.PI/4,i={yawSpeed:0,eulerZ:0};if(t<=-n/4&&t>=-Math.PI+n/4){const n=-Math.sin(Math.abs(t))*e.percentage;i.yawSpeed=n}else if(t>=n/4&&t<=Math.PI-n/4){const n=Math.sin(t)*e.percentage;i.yawSpeed=n}return(t>=-n&&t<=n||t<=-Math.PI+n||t>=Math.PI-n)&&(i.eulerZ=Math.cos(t)*e.percentage),i}function calculateAngle$2(e,t,n,i){const o=i-t,r=n-e,a=Math.atan(o/r)*(180/Math.PI);let s=isNaN(a)?0:a*(Math.PI/180);r<0&&o>0&&(s+=Math.PI),r<0&&o<0&&(s-=Math.PI),0==o&&r<0&&(s=-Math.PI);const l=Math.sqrt(r**2+o**2)/10;return{angle:s,distance:l,percentage:l>1?1:l}}const _hoisted_1$x={class:"alert_modal_wrapper"},_hoisted_2$t={key:0,class:"title"},_hoisted_3$m={class:"icon_wrap"},_hoisted_4$i={key:1,class:"title"},_hoisted_5$d={key:2,class:"input_wrap"},_hoisted_6$b=["placeholder"],_hoisted_7$a={key:3,class:"input_wrap"},_hoisted_8$a={key:4,class:"content"},_hoisted_9$6={class:"opera"},_sfc_main$z=defineComponent({__name:"AlertModal",props:{type:{default:"ask"},title:{default:"提示"},iconType:{default:"info"},content:{default:"提示内容"},sureBtnText:{type:[String,Function],default:()=>t("sure")},cancelBtnText:{type:[String,Function],default:()=>t("cancel")},verifyFn:{type:Function,default:()=>!0},onSure:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(e){const n=e,i={save:createVNode(_sfc_main$L,{name:"slam/icon_modal_save",style:"width: 42px; height: 42px"},null),edit:createVNode(_sfc_main$L,{name:"slam/icon_modal_edit",style:"width: 35px; height: 37px"},null),mark:createVNode(_sfc_main$L,{name:"slam/icon_modal_mark",style:"width: 42px; height: 42px"},null),tick:createVNode(_sfc_main$L,{name:"slam/icon_modal_tick",style:"width: 42px; height: 30px"},null),question:createVNode(_sfc_main$L,{name:"slam/icon_modal_question",style:"width: 36px; height: 42px"},null),info:createVNode(_sfc_main$L,{name:"slam/icon_modal_info",style:"width: 36px; height: 42px"},null)},o=computed((()=>i[n.iconType])),r=ref(),a=ref("1"),s=()=>t("Slam.mapNamePlaceholder"),l=()=>{n.onSure&&("input"===n.type?r.value.value?n.verifyFn(r.value.value)?n.onSure(r.value.value):console.log("校验不通过"):ToastMsg(t("Slam.msg_26")):"select"===n.type?Number(a.value)<=0?ToastMsg(t("Slam.msg_27")):n.onSure(a.value):n.onSure())};return(e,t)=>{var n,i;return openBlock(),createElementBlock("div",_hoisted_1$x,[createBaseVNode("div",{class:normalizeClass(["modal",e.type])},[["ask","alert"].includes(e.type)?(openBlock(),createElementBlock("div",_hoisted_2$t,[createBaseVNode("div",_hoisted_3$m,[(openBlock(),createBlock(resolveDynamicComponent(unref(o))))])])):(openBlock(),createElementBlock("div",_hoisted_4$i,toDisplayString$1(e.title),1)),"input"===e.type?(openBlock(),createElementBlock("div",_hoisted_5$d,[createBaseVNode("input",{ref_key:"inputRef",ref:r,type:"text",placeholder:null==s?void 0:s()},null,8,_hoisted_6$b)])):"select"===e.type?(openBlock(),createElementBlock("div",_hoisted_7$a,[createVNode(_sfc_main$H,{value:unref(a),"onUpdate:value":t[0]||(t[0]=e=>isRef(a)?a.value=e:null)},null,8,["value"])])):(openBlock(),createElementBlock("div",_hoisted_8$a,toDisplayString$1(e.content),1)),createBaseVNode("div",_hoisted_9$6,["alert"!=e.type?(openBlock(),createElementBlock("div",{key:0,class:"btn cancel",onClick:t[1]||(t[1]=()=>e.onCancel&&e.onCancel())},toDisplayString$1("string"!=typeof e.cancelBtnText?null===(n=e.cancelBtnText)||void 0===n?void 0:n.call(e):e.cancelBtnText),1)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["btn","sure","alert"===e.type&&"long"]),onClick:l},toDisplayString$1("string"!=typeof e.sureBtnText?null===(i=e.sureBtnText)||void 0===i?void 0:i.call(e):e.sureBtnText),3)])],2)])}}}),AlertModal$2=_export_sfc(_sfc_main$z,[["__scopeId","data-v-e9196f5a"]]),_sfc_main$y={},_withScopeId$e=e=>(pushScopeId("data-v-8885d2de"),e=e(),popScopeId(),e),_hoisted_1$w={id:"slamLoadingWrapper",class:"loading_wrapper"},_hoisted_2$s={class:"cont"},_hoisted_3$l=_withScopeId$e((()=>createBaseVNode("span",null,"loading",-1)));function _sfc_render$1(e,t){const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$w,[createBaseVNode("div",_hoisted_2$s,[createVNode(n,{name:"slam/img_loading"}),_hoisted_3$l])])}const Loading$1=_export_sfc(_sfc_main$y,[["render",_sfc_render$1],["__scopeId","data-v-8885d2de"]]);function useOperationHook$1(e,n,i){const{sportState:o,bmsState:r,series:a,sportMode:s}=storeToRefs(useDeviceStore()),l=ref(),c=ref(),u=computed((()=>i.value.length<=0&&n.value<SLAM_STATE_MACHINE$1.buildingMap)),d=computed((()=>[SLAM_STATE_MACHINE$1.buildingMap,SLAM_STATE_MACHINE$1.sendStopBuild,SLAM_STATE_MACHINE$1.settingRoadNetwork].includes(n.value))),p=computed((()=>!![SLAM_STATE_MACHINE$1.navigation,SLAM_STATE_MACHINE$1.navigationOpen].includes(n.value)||n.value===SLAM_STATE_MACHINE$1.Idle&&i.value.length>0)),f=computed((()=>!(n.value===SLAM_STATE_MACHINE$1.Idle&&i.value.length<=0))),g=computed((()=>{let e=-1;switch(n.value){case SLAM_STATE_MACHINE$1.Idle:case SLAM_STATE_MACHINE$1.navigation:case SLAM_STATE_MACHINE$1.navigationOpen:e=0;break;case SLAM_STATE_MACHINE$1.sendStartBuild:case SLAM_STATE_MACHINE$1.buildingMap:case SLAM_STATE_MACHINE$1.sendStopBuild:case SLAM_STATE_MACHINE$1.sendLoadMap:e=1;break;case SLAM_STATE_MACHINE$1.mapLoaded:case SLAM_STATE_MACHINE$1.readySettingRoadNetwork:case SLAM_STATE_MACHINE$1.enableRelocation:e=2;break;case SLAM_STATE_MACHINE$1.settingRoadNetwork:e=3;break;default:e=-1}return e})),m=computed((()=>[SLAM_STATE_MACHINE$1.sendStartBuild,SLAM_STATE_MACHINE$1.buildingMap,SLAM_STATE_MACHINE$1.sendStopBuild,SLAM_STATE_MACHINE$1.readySettingRoadNetwork,SLAM_STATE_MACHINE$1.settingRoadNetwork,SLAM_STATE_MACHINE$1.enableRelocation,SLAM_STATE_MACHINE$1.initRelocationCompleted,SLAM_STATE_MACHINE$1.sendLoadMap,SLAM_STATE_MACHINE$1.mapLoaded,SLAM_STATE_MACHINE$1.Idle].includes(n.value))),[_,v]=useToggle(!0),[b,T]=useToggle(!0),[A,y]=useToggle(!1),[E,S]=useToggle(void 0),[C,w]=useToggle(!1),[x,M]=useToggle(!1),R=ref(t("Slam.chargeBtnText_1")),I=e=>{"map"===e?y(!0):E.value===e?(S(void 0),v(!0)):(S(e),v(!1))},D=n=>new Promise(((i,o)=>{const r=promiseAbort(null==e?void 0:e.publishReqNew(n,{api_id:1001}));r.then((e=>{var t;if(window.clearTimeout(a),null===(t=e.data)||void 0===t||!t.data)return void i(null);const n=e.data.data,o=new Uint8Array(n);let r="";for(let i=0;i<o.length;i++)r+=String.fromCharCode(o[i]);webToApp("takePhoto",{data:window.btoa(r)}),i("")}));const a=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_1")),null===(e=r.abort)||void 0===e||e.call(r,"拍照超时"),o("拍照超时")}),16e3)})),k=window.videoTransformWorker,L={front:null,back:null};let O="start";const P=ref({angle:0,percentage:0,stop:!0}),N=ref({angle:0,percentage:0,stop:!0});listerJoystickChange$3(e,P,N);const $=["站立",SPORT_STATE.BalanceStand,t("model_stand"),"active/icon_model_stand_white","model",SPORT_CMD.BalanceStand],B=["站立",SPORT_STATE.BalanceStand,t("model_stand"),"active/icon_model_stand_white","model",SPORT_CMD.StandUp],F=["卧倒",SPORT_STATE.LieDown,t("active_lieDown"),"active/icon_active_lieDown_white","model",SPORT_CMD.StandDown],U=n=>new Promise(((i,o)=>{const[r,a,s,l,c,u,d]=n,h=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_12")),null==p||null===(e=p.abort)||void 0===e||e.call(p,null),o("timeout"),console.error(`[error] ${r} 命令执行超时`)}),[SPORT_CMD.Dance1,SPORT_CMD.Dance2].includes(u)?6e4:2e4);console.log(`%c 发送${n[0]}指令 ${n[5]}`,"color: red",void 0===n[6]?"":n[6]);const p=promiseAbort(null==e?void 0:e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:u,data:{}}));p.then((e=>{e?(console.log(`%c ${n[0]}指令返回结果:`,"color: red",e.data.header.status),window.clearTimeout(h),i(e.data),0!==e.data.header.status.code&&(ToastMsg(`${t("toastMsg_15")}【${s}】${t("toastMsg_16")}`),console.error(`[Error] 指令${r}执行失败, 返回结果code为${e.data.header.status.code}`))):o()})).catch((e=>{console.log("报错了"),o(e)}))})),G=ref("idle");watch((()=>o.value),(e=>{7===e.mode?G.value="damp":5===e.mode?G.value="lieDown":1===e.mode?G.value="balanceStand":G.value="other"}),{deep:!0});return{tipComponentRef:c,showJoystick:m,hideJoystick:_,hideTaskWindow:b,setHideJoystick:v,setHideTaskWindow:T,delPointNode:e=>{var t,n;null===(t=l.value)||void 0===t||null===(n=t.delPoint)||void 0===n||n.call(t,e)},taskComponentRef:l,getAllPointNodeTask:()=>{var e,t;return null===(e=l.value)||void 0===e||null===(t=e.getAllTaskJson)||void 0===t?void 0:t.call(e)},initPointNodeTask:e=>{var t,n;null===(t=l.value)||void 0===t||null===(n=t.initTaskList)||void 0===n||n.call(t,e)},queryPointNodeTask:e=>{var t,n;return null===(t=l.value)||void 0===t||null===(n=t.queryPointTask)||void 0===n?void 0:n.call(t,e)},showMapListPage:A,setMapPageState:y,showModal:(e,t)=>new Promise(((n,i)=>{const o=document.getElementById(t||"slamPage"),r=()=>{o&&Array.from(o.children).forEach((e=>{e.className.includes("alert_modal_wrapper")&&e.remove()}))},a=h(createVNode(AlertModal$2,{key:Math.random().toString(),type:e.type,title:e.title,iconType:e.iconType,content:e.content,sureBtnText:e.sureBtnText,cancelBtnText:e.cancelBtnText,verifyFn:e.verifyFn,onSure:e=>{n(e),r()},onCancel:()=>{i(),r()}},null));o&&render(a,o)})),unmountAllModal:()=>{["slamPage","slamMapPage"].forEach((e=>{const t=document.getElementById(e);t&&Array.from(t.children).forEach((e=>{e.className.includes("alert_modal_wrapper")&&e.remove()}))}))},showEmpty:u,showSaveBtn:d,showVideoBtn:p,showOperaBar:f,operaBarContentType:g,slamWorkModel:E,handleSelectWorkModel:I,setHideOperaBar:w,showVideo:x,setShowVideo:M,hideOperaBar:C,showLoading:e=>{const t=document.getElementById(e||"slamPage"),n=h(createVNode(Loading$1,{key:Math.random().toString()},null));t&&render(n,t)},closeLoading:e=>{const t=document.getElementById(e||"slamPage");t&&Array.from(t.children).forEach((e=>{"slamLoadingWrapper"==e.id&&e.remove()}))},markChargeBtnText:R,leftJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;P.value.angle=e,P.value.percentage=a,P.value.stop=!1},leftJoystickStop:()=>{P.value.angle=0,P.value.percentage=0,P.value.stop=!0},rightJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;N.value.angle=e,N.value.percentage=a,N.value.stop=!1},rightJoystickStop:()=>{N.value.angle=0,N.value.percentage=0,N.value.stop=!0},takePhoto:()=>new Promise(function(){var e=_asyncToGenerator((function*(e){Promise.all([D(RTC_TOPIC.FRONT_PHOTO_REQ),D(RTC_TOPIC.BACK_PHOTO_REQ)]).then((()=>{e("")})).catch((t=>{console.log(t),e(null)}))}));return function(t){return e.apply(this,arguments)}}()),actionVideo:t=>{var n,i;"connected"===(null==e?void 0:e.getConnectionState())?(O=t,"start"===t?function(t){L[t]&&(L[t]=null);const n=null==e?void 0:e.getVideoStream("unitreeFrontVideoStream");if(!n)return;const i=new MediaRecorder(n,{videoBitsPerSecond:1e6});console.log("码率",i.videoBitsPerSecond),i.ondataavailable=function(e){"cancel"!==O?(console.log("录屏数据",e.data.size),e.data.size>0?null==k||k.postMessage(e.data):(null==i||i.stop(),console.log("视频源为空，无法录制"))):console.log("取消录屏")},i.start(),L[t]=i,console.log("开始录制前置摄像头")}("front"):("recording"===(null===(n=L.front)||void 0===n?void 0:n.state)&&(null===(i=L.front)||void 0===i||i.stop()),console.log("录制结束"))):console.error("未连接完成")},sendStandUp:()=>{"B2"===a.value&&s.value.includes("-w")?U(B):U($)},sendLieDown:()=>U(F),currSportState:G,showHelpTip:(e,t=3)=>{c.value&&c.value.showTip(e,t)},switchVideoTrack:t=>{["G1","H1"].includes(a.value)?t?null==e||e.publish(RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB,"on",DataChannelType.VID):null==e||e.publish(RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB,"off",DataChannelType.VID):t?null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,"on",DataChannelType.VID):null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,"off",DataChannelType.VID)},getPowerState:()=>({isCharge:r.value.current&&r.value.current>0,soc:r.value.soc}),handleToMapPage:()=>{I("map")}}}function listerJoystickChange$3(e,n,i){const o=useDeviceStore(),r=throttle((()=>{ToastMsg(t("toastMsg_2"))}),5e3),a={lx:0,ly:0,rx:0,ry:0};let s=0,l=!1;const c=useRTC((e=>{o.emergencyStopState?r():"open"===e.getChannelState()&&e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,a)}),e,!0),u=()=>{l||(l=!0,s=window.setInterval((()=>{c(),n.value.stop&&i.value.stop&&d()}),50))},d=()=>{l=!1,window.clearInterval(s),a.lx=a.ly=a.rx=a.ry=0,c()};watch((()=>n.value),(e=>{if(e.stop)a.lx=0,a.ly=0;else{const{currHSpeedScale:t,currVSpeedScale:n}=disassembleMoveActiveSpeed(e);a.lx=t,a.ly=n,l||u()}}),{deep:!0}),watch((()=>i.value),(e=>{if(e.stop)a.rx=0,a.ry=0;else{const{yawSpeed:t,eulerZ:n}=disassembleViewActiveSpeed(e);a.rx=t,a.ry=n,l||u()}}),{deep:!0})}function gptReq(e){return{addExhibitionPoints:t=>new Promise(((n,i)=>{useRTC((e=>{e.publishReqNew(RTC_TOPIC.GPT_REQUEST,{api_id:1002,data:t}).then((e=>{n(e)}))}),e)()})),getAllExhibitionPoints:()=>new Promise(((t,n)=>{useRTC((e=>{e.publishReqNew(RTC_TOPIC.GPT_REQUEST,{api_id:1003,data:{}}).then((e=>{t(e)}))}),e)()})),delExhibitionPoints:t=>new Promise(((n,i)=>{useRTC((e=>{e.publishReqNew(RTC_TOPIC.GPT_REQUEST,{api_id:1004,data:t}).then((e=>{n(e)}))}),e)()}))}}function slamReqProcessor(e){return{sendSlamReq:t=>new Promise(((n,i)=>{useRTC((e=>{console.logBlue("发送请求",t),e.publishReqNewForSlam(RTC_TOPIC.SLAM_OPERATE_REQUEST,t).then((e=>{if(e.data){var t,o;const i=null!=e&&null!==(t=e.data)&&void 0!==t&&t.data?JSON.parse(null==e||null===(o=e.data)||void 0===o?void 0:o.data):{};n(i)}else console.logRed("返回值异常",e.data),i()}))}),e)()}))}}const genCommandParam=()=>({seq_:"",command_:0,attribute_:0,floor_index_:[],pcdmap_index_:[],topomap_index_:[],node_edge_name_:[],quaternion_x_:0,quaternion_y_:0,quaternion_z_:0,quaternion_w_:0,euler_roll_:0,euler_pitch_:0,euler_yaw_:0,translation_x_:0,translation_y_:0,translation_z_:0,state_1_:[],state_2_:[]});function slamReqParamsFactory(){return{genParam_deletePcdMap:(e,t)=>{const n=genCommandParam();return n.command_=1,n.attribute_=3,n.floor_index_=[e],n.pcdmap_index_=[t],n},genParam_deleteTopMap:(e,t,n)=>{const i=genCommandParam();return i.command_=1,i.attribute_=4,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],i},genParam_queryPcdMapList:()=>{const e=genCommandParam();return e.command_=2,e.attribute_=4,console.logBlue("发送获取pcd地图请求",JSON.stringify(e)),e},genParam_queryTopMapList:()=>{const e=genCommandParam();return e.command_=2,e.attribute_=5,e},genParam_queryNodeEdgeList:(e,t,n)=>{const i=genCommandParam();return i.command_=2,i.attribute_=7,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],console.logBlue("发送查询拓扑点边信息和task、topoJson信息求",JSON.stringify(i)),i},genParam_startBuildMap:()=>({api_id:1801,data:{slam_type:"indoor"}}),genParam_endBuildMap:e=>({api_id:1802,data:{address:`/unitree/data/unitree_slam/${e}.pcd`}}),genParam_initRelocation:(e,t,n)=>({api_id:1804,data:{x:t.x,y:t.y,z:t.z,q_x:e.x,q_y:e.y,q_z:e.z,q_w:e.w,address:`/unitree/data/unitree_slam/${n}.pcd`}}),genParam_saveNodeEdgeToMap:(e,t,n)=>{const i=genCommandParam();return i.command_=16,i.floor_index_=[e],i.pcdmap_index_=[t],i.topomap_index_=[n],i},genParam_loadTopMap:(e,t,n)=>{const i=genCommandParam();return i.command_=17,i.floor_index_=[e],i.pcdmap_index_=[t],n&&(i.topomap_index_=[n]),i},genParam_singlePointNavigation:e=>{const t=genCommandParam();return t.command_=9,t.node_edge_name_=[e],t},genParam_anyPointNavigation:(e,t)=>(console.logBlue("发送 任意点导航 请求",e,t),{api_id:1102,data:{targetPose:{x:e.x,y:e.y,z:e.z,q_x:t.x,q_y:t.y,q_z:t.z,q_w:t.w},mode:1}}),genParam_multiPointCircularNavigation:()=>{const e=genCommandParam();return e.command_=10,console.logBlue("发送多点循环导航请求(默认-不⽤给⽬标点信息，逐个点依次前往)"),e},genParam_multiPointCircularNavigationPlus:(e,t,n=1)=>({api_id:1932,data:{version:1,topoAddress:t,nodeList:e,cyclesNum:n}}),genParam_returnCharge:()=>{const e=genCommandParam();return e.command_=12,console.logBlue("发送回充请求",JSON.stringify(e)),e},genParam_pauseNavigation:()=>({api_id:1201}),genParam_recoverNavigation:()=>{const e=genCommandParam();return e.command_=14,e},genParam_returnToStartPoint:()=>{const e=genCommandParam();return e.command_=15,e},genParam_closeAll:()=>({api_id:1901}),genParam_addNode:(e,t,n,i,o)=>{const r={node_name_:[],node_position_x_:[],node_position_y_:[],node_position_z_:[],node_yaw_:[],node_attribute_:[],undefined_:[],node_state_2_:[],node_state_3_:[]};return i.forEach((e=>{r.node_name_.push(e.name),r.node_position_x_.push(e.position.x),r.node_position_y_.push(e.position.y),r.node_position_z_.push(0),r.node_yaw_.push(void 0===e.yaw?999:e.yaw),r.node_attribute_.push(9e3===e.name?2:9001===e.name?1:0),r.undefined_.push(0),r.node_state_2_.push(t),r.node_state_3_.push(1)})),console.log("添加点信息",{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};${o}`,node_:r}),{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};${o}`,node_:r}},genParam_addEdge:(e,t,n,i)=>{const o={edge_name_:[],start_node_name_:[],end_node_name_:[],edge_length_:[],dog_stats_:[],dog_back_stats_:[],dog_speed_:[],edge_state_:[],edge_state_1_:[],edge_state_2_:[],edge_state_3_:[],edge_state_4_:[]};return i.forEach((e=>{o.edge_name_.push(e.name),o.start_node_name_.push(e.startNodeName),o.end_node_name_.push(e.endNodeName),o.edge_length_.push(e.distance),o.dog_stats_.push(0),o.dog_back_stats_.push(0),o.dog_speed_.push(1),o.edge_state_.push(0),o.edge_state_1_.push(0),o.edge_state_2_.push(0),o.edge_state_3_.push(0),o.edge_state_4_.push(0)})),console.log("添加边信息",{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};`,edge_:o}),{seq_:`floorIndex:${e};pcdMapIndex:${t};topoMapIndex:${n};`,edge_:o}},genParam_editPCDMapName:(e,t,n)=>{const i=genCommandParam();return i.command_=19,i.floor_index_=[e],i.pcdmap_index_=[t],i.seq_=`pcdName:${n};`,console.logBlue("修改地图名称请求",`pcdMapIndex ${t}`),i},genParam_getPCDMapForIndex:(e,t,n="image")=>{const i=genCommandParam();return i.command_=20,i.floor_index_=[e],i.pcdmap_index_=[t],i.attribute_="grid"===n?1:0,console.logBlue("加载指定地图请求",`pcdMapIndex ${t}`),i},genParam_queryVersion:()=>{const e=genCommandParam();return e.command_=22,e},genParam_writeFileToRobot:(e,t,n)=>({api_id:1910,data:{address:`/unitree/data/unitree_slam/${e}${t}`,params:n}}),genParam_queryFileFormRobot:e=>({api_id:1911,data:{address:"/unitree/data/unitree_slam",extension:e}}),genParam_getFileFormRobot:(e,t)=>({api_id:1912,data:{address:`/unitree/data/unitree_slam/${e}${t}`}}),genParam_deleteFileFormRobot:e=>({api_id:1913,data:{address:`/unitree/data/unitree_slam/${e}`}}),genParam_renameFileFormRobot:(e,t)=>({api_id:1930,data:{address:`/unitree/data/unitree_slam/${e}`,newAddress:`/unitree/data/unitree_slam/${t}`}}),genParam_getPCDFileFormRobot:(e,t)=>({api_id:1931,data:{address:`/unitree/data/unitree_slam/${e}.pcd`,blockNum:t}}),genParam_writeBigFileFormRobot:(e,t,n,i,o)=>({api_id:1933,data:{address:`/unitree/data/unitree_slam/${e}${t}`,content:n,blockCur:i,blockSum:o}}),genParam_getBigFileFormRobot:(e,t)=>({api_id:1934,data:{address:`/unitree/data/unitree_slam/${e}`,blockNum:t}}),genParam_writePCDFileFormRobot:(e,t,n,i)=>({api_id:1935,data:{address:`/unitree/data/unitree_slam/${e}.pcd`,content:t,blockCur:n,blockSum:i}}),genParam_queryRobotLocationState:()=>({api_id:1936,data:{}})}}function useSlamHook$1(e,t){const{sendSlamReq:n}=slamReqProcessor(e),{genParam_deleteTopMap:i,genParam_queryNodeEdgeList:o,genParam_startBuildMap:r,genParam_endBuildMap:a,genParam_saveNodeEdgeToMap:s,genParam_initRelocation:l,genParam_singlePointNavigation:c,genParam_anyPointNavigation:u,genParam_multiPointCircularNavigation:d,genParam_multiPointCircularNavigationPlus:h,genParam_returnCharge:p,genParam_pauseNavigation:f,genParam_recoverNavigation:g,genParam_returnToStartPoint:m,genParam_closeAll:_,genParam_addNode:v,genParam_addEdge:b,genParam_getPCDMapForIndex:T,genParam_queryVersion:A,genParam_writeFileToRobot:y,genParam_queryFileFormRobot:E,genParam_getFileFormRobot:S,genParam_deleteFileFormRobot:C,genParam_renameFileFormRobot:w,genParam_getPCDFileFormRobot:x,genParam_writeBigFileFormRobot:M,genParam_getBigFileFormRobot:R,genParam_writePCDFileFormRobot:I,genParam_queryRobotLocationState:D}=slamReqParamsFactory(),{addExhibitionPoints:k,getAllExhibitionPoints:L,delExhibitionPoints:O}=gptReq(e),P=e=>F(`${e}.json`),N=(e,t,i)=>n(y(e,t,i)),$=e=>n(E(e)),B=(e,t)=>n(S(e,t)),F=e=>n(C(e)),U=(e,t)=>n(w(e,t)),G=e=>new Promise(function(){var t=_asyncToGenerator((function*(t,i){let o=1,r=1,a="";for(;r<=o;){const s=yield n(x(e,r));if(!s.succeed){i(s.info);break}{const{blockCur:e,blockSum:n,data:i}=s.data;if(o=n,a+=i,e===n){t(a);break}r++}}}));return function(e,n){return t.apply(this,arguments)}}());return{queryVersionReq:()=>n(A()),deletePcdMapReq:e=>F(`${e}.pcd`).then((t=>(t.succeed&&(P(e),F(`${e}.png`)),t))),deleteTopMapReq:(e,t,o)=>n(i(e,t,o)),startBuildMapReq:()=>(t.value=SLAM_STATE_MACHINE$1.sendStartBuild,n(r()).then((e=>(t.value=SLAM_STATE_MACHINE$1.buildingMap,e)))),loadMapReq:e=>new Promise(((t,n)=>{G(e).then((e=>{t(e||void 0)})).catch((e=>{console.error(e),t(void 0)}))})),endBuildMapReq:e=>(t.value=SLAM_STATE_MACHINE$1.sendStopBuild,n(a(e))),addNodeReq:(e,t,i,o,r)=>n(v(e,t,i,o,r)),addEdgeReq:(e,t,i,o)=>n(b(e,t,i,o)),queryPcdMapListReq:()=>new Promise(((e,t)=>{$(".pcd").then((t=>{if(t.succeed){const n=(t.data.paths||[]).map((e=>e.slice(e.lastIndexOf("/")+1)));e(n)}else e([])})).catch(t)})),queryCurrMapInfoReq:()=>new Promise((e=>{B("currMapInfo",".txt").then((t=>{t.succeed?e(t.data):e(void 0)}))})),updateCurrMapInfoReq:e=>N("currMapInfo",".txt",e),queryTopMapListReq:()=>new Promise(((e,t)=>{$(".json").then((t=>{if(t.succeed){const n=(t.data.paths||[]).map((e=>e.slice(e.lastIndexOf("/")+1)));e(n)}else e([])})).catch(t)})),queryNodeEdgeList:(e,t,i)=>n(o(e,t,i)),saveNodeEdgeToMapReq:(e,t,i)=>n(s(e,t,i)),loadTopMapReq:e=>new Promise(((t,n)=>{B(e,".json").then((e=>{e.succeed?t(JSON.parse(e.data.content)):t(void 0)})).catch(n)})),initRelocationReq:(e,t,i)=>n(l(e,t,i)),singlePointNavigationReq:e=>n(c(e)),anyPointNavigationReq:(e,t)=>n(u(e,t)),multiPointCircularNavigationReq:()=>n(d()),multiPointCircularNavigationPlusReq:(e,t,i=1)=>n(h(e,t,i)),returnChargeReq:()=>n(p()),pauseNavigationReq:()=>n(f()),recoverNavigationReq:()=>n(g()),returnToStartPointReq:()=>n(m()),editPCDMapNameReq:(e,t)=>U(e,t),getPCDMapForIndexReq:(e,t)=>n(T(e,t)),writeFileToRobot:N,queryFileFormRobot:$,getFileFormRobot:B,deleteFileFormRobot:F,renameFileFormRobot:U,getPCDFileFormRobot:G,getBigFileFormRobot:e=>new Promise(function(){var t=_asyncToGenerator((function*(t,i){let o=1,r=1,a="";for(;r<=o;){const i=yield n(R(e,r));if(!i.succeed){t(void 0),console.error(i.info);break}{const{blockCur:e,blockSum:n,data:s}=i.data;if(o=n,a+=s,e===n){t(a);break}r++}}}));return function(e,n){return t.apply(this,arguments)}}()),writeBigFileToRobot:(e,t,i)=>new Promise(function(){var o=_asyncToGenerator((function*(o,r){const a=e.length;let s=1;for(;s<=a;){if(!(yield n(M(t,i,e[s-1],s,a))).succeed){r();break}s++}o(void 0)}));return function(e,t){return o.apply(this,arguments)}}()),writePCDFileToRobot:(e,t)=>new Promise(function(){var i=_asyncToGenerator((function*(i,o){const r=e.length;let a=1;for(;a<=r;){if(!(yield n(I(t,e[a-1],a,r))).succeed){o();break}a++}i(void 0)}));return function(e,t){return i.apply(this,arguments)}}()),closeAllReq:()=>n(_()),sleepPromise:function(e){return new Promise((t=>{window.setTimeout(t,e)}))},addExhibitionPoints:k,getAllExhibitionPoints:L,delExhibitionPoints:O,queryRobotLocationState:()=>n(D())}}function useHook$1(){const{webRtc:e}=storeToRefs(useMainStore()),t=null==e?void 0:e.value;provide("webRTC",t);const n=ref(SLAM_STATE_MACHINE$1.Idle),i=ref(),o=ref([]);let r=!1;const a=useSlamHook$1(t,n),s=useOperationHook$1(t,n,o),{delPointNode:l}=s,c=useLidar3DHook(),{initLidar3DMap:u}=c,d=useCoreHook$1(a,c,s,n,o),{currMapInfo:h,isOutCharge:p,init:f,closeAllFunc:g,closeLoadingModal:m,messageListen:_,reconnectionDealState:v}=d,b=useRTC(_asyncToGenerator((function*(){yield f(),r=!0})),t);bus.on("openTaskWindow",(e=>{e&&(i.value="string"==typeof e?parseInt(e):e),s.setHideTaskWindow(!e)}));const T=e=>{y.value||(console.log("slam页面响应",e),"0"===e&&(p.value=!1,g(),c.clearStage(),c.initKonvaStageState(),c.initDragState(),c.lidar3DMap.initLayer(),c.lidar3DMap.hideRobotModel(),m(),s.unmountAllModal(),s.setShowVideo(!1),s.slamWorkModel.value=void 0,s.setHideJoystick(!0),s.setHideTaskWindow(!0),s.setHideOperaBar(!1),s.setMapPageState(!1),n.value=SLAM_STATE_MACHINE$1.Idle,h.value={}),"1"===e&&(!y.value&&E(),r&&useRTC((()=>f()),t)()))},A=()=>{c.initDragState()},y=ref(!1),E=()=>{webToApp("webSendHideBackBtn",{data:!0}),y.value=!0,useRTC((e=>{e.subscribe(RTC_TOPIC.SLAM_MAPPING_POINTS),e.subscribe(RTC_TOPIC.SLAM_MAPPING_ODOM),e.subscribe(RTC_TOPIC.SLAM_RELOCATION_POINTS),e.subscribe(RTC_TOPIC.SLAM_RELOCATION_ODOM),e.subscribe(RTC_TOPIC.SLAM_INFO),e.subscribe(RTC_TOPIC.SLAM_KEY_INFO)}))()};return _objectSpread(_objectSpread(_objectSpread({exitSlamPage:()=>{window.setTimeout((()=>webToApp("webSendHideBackBtn",{data:!1})),300),y.value=!1,useRTC((e=>{e.unsubscribe(RTC_TOPIC.SLAM_MAPPING_POINTS),e.unsubscribe(RTC_TOPIC.SLAM_MAPPING_ODOM),e.unsubscribe(RTC_TOPIC.SLAM_RELOCATION_POINTS),e.unsubscribe(RTC_TOPIC.SLAM_RELOCATION_ODOM),e.unsubscribe(RTC_TOPIC.SLAM_INFO),e.unsubscribe(RTC_TOPIC.SLAM_KEY_INFO)}))()},enterSlamPage:E,initSlamData:b,selectedNodeId:i,pcdMapList:o,initLidar3DMap:u},s),d),{},{handleShowVideo:()=>{s.switchVideoTrack(!s.showVideo.value),s.setShowVideo(),window.setTimeout((()=>{c.resizeLidar3DMap()}),300)},listenWebState:()=>{listenAppToWeb("appSendWebviewState",T),listenAppToWeb("appSendStatusBarShow",A),t.onMessage(_),t.onValidationOK(v)},removeWebStateLister:()=>{removeAppToWebLister("appSendWebviewState",T),removeAppToWebLister("appSendStatusBarShow",A),t.removeMessageListen(_),t.removeValidationOKListen(v)}})}const _withScopeId$d=e=>(pushScopeId("data-v-21f9ee07"),e=e(),popScopeId(),e),_hoisted_1$v={class:"wrap"},_hoisted_2$r={key:1,class:"btn_container between",style:{height:"66px"}},_hoisted_3$k={class:"slam_model"},_hoisted_4$h={key:2,class:"btn_container start"},_hoisted_5$c={key:3,class:"btn_container between morePadding"},_hoisted_6$a={key:4,class:"btn_container between"},_hoisted_7$9={style:{display:"flex"}},_hoisted_8$9={class:"empty_text"},_hoisted_9$5={class:"patrol_situation"},_hoisted_10$4=_withScopeId$d((()=>createBaseVNode("div",{id:"guidedModalWrapper"},null,-1))),_sfc_main$x=defineComponent({__name:"Slam",setup(e){const t=ref(),{enterSlamPage:n,exitSlamPage:i,initSlamData:o,tipComponentRef:r,taskComponentRef:a,selectedNodeId:s,pcdMapList:l,hasInitRelocation:c,initLidar3DMap:u,handleNextToSettingRoute:d,handleInitRelocation:h,showJoystick:p,hideJoystick:f,hideTaskWindow:g,showMapListPage:m,setMapPageState:_,handleAddMap:v,handleToMapPage:b,handleEditTopMap:T,handleEditPCDName:A,handleSelectMap:y,handleDelMap:E,handleSave:S,showEmpty:C,showSaveBtn:w,showOperaBar:x,operaBarContentType:M,slamWorkModel:R,handleSelectWorkModelPro:I,handleStartWork:D,handleInitRelocationPlus:k,handleMarkPatrolPoint:L,showVideo:O,hideOperaBar:P,currModeTaskState:N,handleActive:$,handleStop:B,handleMarkCharge:F,handleShowVideo:U,markChargeBtnText:G,handleClearRouteNet:V,handleCancelRouteNet:H,leftJoystickAction:W,leftJoystickStop:z,rightJoystickAction:j,rightJoystickStop:X,listenWebState:Y,removeWebStateLister:q,patrolSituation:K,currMapInfo:Q,asyncLocalToRobot:Z,asyncMapFormRobot:J}=useHook$1(),ee=()=>{if(t.value){const e=t.value,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let a=Math.floor(e.offsetWidth)==Math.floor(i)&&Math.floor(e.offsetHeight)==Math.floor(r);i>0&&r>0&&a?(u(t.value),o(),Y(),n()):window.setTimeout(ee,100)}else window.setTimeout(ee,100)};return onMounted((()=>{ee()})),onUnmounted((()=>{q()})),window.onblur=function(){console.log("浏览器失焦了")},(e,n)=>{var o;const u=_sfc_main$L;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"slamPage",class:normalizeClass(["slam_page",unref(m)?"hide":"show"])},[createVNode(TopBar$2,{title:(null===(o=unref(Q))||void 0===o?void 0:o.pcdMapName)||"",onClose:unref(i)},null,8,["title","onClose"]),createVNode(VideoSlam$1,{class:normalizeClass(["video_window",unref(O)&&"show"]),visible:unref(O),"video-id":"unitreeFrontVideoStream_slam"},null,8,["class","visible"]),createBaseVNode("div",{id:"container",ref_key:"slamRenderDiv",ref:t,class:normalizeClass(["renderDiv",unref(O)&&"half"]),onContextmenu:n[0]||(n[0]=e=>e.preventDefault())},null,34),unref(x)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["operation_wrapper",(unref(O),"")])},[createBaseVNode("div",_hoisted_1$v,[unref(p)?(openBlock(),createBlock(Joystick2,{key:0,class:normalizeClass(["joystick-component","left",unref(f)&&"hide"]),onAngleChange:unref(W),onActionStop:unref(z)},null,8,["class","onAngleChange","onActionStop"])):createCommentVNode("",!0),0===unref(M)?(openBlock(),createElementBlock("div",_hoisted_2$r,[createBaseVNode("div",{class:normalizeClass(["btn_container_child",unref(P)&&"hide"]),style:{"justify-content":"space-between"}},[createBaseVNode("div",{class:normalizeClass(["btn",unref(R)&&!unref(c)?"":"hide"]),onClick:n[1]||(n[1]=(...e)=>unref(k)&&unref(k)(...e))},toDisplayString$1(e.$t("Slam.initialization")),3),createBaseVNode("div",_hoisted_3$k,[withDirectives(createBaseVNode("div",{class:"btn_task",onClick:n[2]||(n[2]=()=>unref(I)("map"))},[createVNode(u,{name:"slam/img_map"}),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_1")),1)],512),[[vShow,!unref(R)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["btn_task","patrol"===unref(R)&&"noMargin"]),onClick:n[3]||(n[3]=()=>unref(I)("patrol"))},[createVNode(u,{name:"slam/img_patrol"+("patrol"===unref(R)?"_on":"")},null,8,["name"]),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_2")),1)],2),[[vShow,!unref(R)||"patrol"===unref(R)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["btn_task","singlePoint"===unref(R)&&"noMargin"]),onClick:n[4]||(n[4]=()=>unref(I)("singlePoint"))},[createVNode(u,{name:"slam/img_singlePoint"+("singlePoint"===unref(R)?"_on":"")},null,8,["name"]),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_3")),1)],2),[[vShow,!unref(R)||"singlePoint"===unref(R)]])]),unref(R)?(openBlock(),createElementBlock("div",{key:0,class:"btn",onClick:n[5]||(n[5]=(...e)=>unref(D)&&unref(D)(...e))},toDisplayString$1("patrol"===unref(R)?e.$t("Slam.btn_1"):"singlePoint"===unref(R)?e.$t("Slam.btn_3"):e.$t("Slam.btn_2")),1)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["btn_container_child",!unref(P)&&"hide"]),style:{"justify-content":"flex-end"}},[createBaseVNode("div",{class:"btn small",style:{"margin-right":"12px"},onClick:n[6]||(n[6]=()=>unref($)(!unref(N)))},[createVNode(u,{name:"slam/icon_"+(unref(N)?"pause":"play"),style:{width:"16px",height:"16px"}},null,8,["name"])]),createBaseVNode("div",{class:"btn small",onClick:n[7]||(n[7]=(...e)=>unref(B)&&unref(B)(...e))},[createVNode(u,{name:"slam/icon_stop"})])],2)])):createCommentVNode("",!0),1===unref(M)?(openBlock(),createElementBlock("div",_hoisted_4$h)):createCommentVNode("",!0),2===unref(M)?(openBlock(),createElementBlock("div",_hoisted_5$c,[createBaseVNode("div",{class:normalizeClass(["btn",unref(c)&&"hide"]),onClick:n[8]||(n[8]=(...e)=>unref(h)&&unref(h)(...e))},toDisplayString$1(e.$t("Slam.initialization")),3),createBaseVNode("div",{class:"btn",onClick:n[9]||(n[9]=(...e)=>unref(d)&&unref(d)(...e))},toDisplayString$1(e.$t("Slam.next")),1)])):createCommentVNode("",!0),3===unref(M)?(openBlock(),createElementBlock("div",_hoisted_6$a,[createBaseVNode("div",_hoisted_7$9,[createBaseVNode("div",{class:"btn",style:{"margin-right":"12px"},onClick:n[10]||(n[10]=(...e)=>unref(F)&&unref(F)(...e))},toDisplayString$1(unref(G)),1),createBaseVNode("div",{class:"btn small",style:{"margin-right":"12px"},onClick:n[11]||(n[11]=(...e)=>unref(H)&&unref(H)(...e))},[createVNode(u,{name:"slam/btn_revoke"})]),createBaseVNode("div",{class:"btn small",onClick:n[12]||(n[12]=(...e)=>unref(V)&&unref(V)(...e))},[createVNode(u,{name:"slam/btn_clear"})])]),createBaseVNode("div",{class:"btn",style:{"margin-right":"12px"},onClick:n[13]||(n[13]=(...e)=>unref(L)&&unref(L)(...e))},toDisplayString$1(e.$t("Slam.chargeBtnText_3")),1)])):createCommentVNode("",!0),unref(p)?(openBlock(),createBlock(Joystick2,{key:5,class:normalizeClass(["joystick-component","right",unref(f)&&"hide"]),onAngleChange:unref(j),onActionStop:unref(X)},null,8,["class","onAngleChange","onActionStop"])):createCommentVNode("",!0)])],2)):createCommentVNode("",!0),unref(w)?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["btn_opera","save",!unref(g)&&"moreRight"]),onClick:n[14]||(n[14]=(...e)=>unref(S)&&unref(S)(...e))},[createVNode(u,{name:"slam/btn_save"})],2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["btn_opera",!unref(g)&&"moreRight"]),onClick:n[15]||(n[15]=(...e)=>unref(U)&&unref(U)(...e))},[createVNode(u,{name:"slam/img_video_show"})],2),unref(C)?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["empty_show",unref(O)?"half":""])},[createVNode(u,{class:"empty_img",name:"slam/icon_empty"}),createBaseVNode("span",_hoisted_8$9,toDisplayString$1(e.$t("Slam.noMap")),1),createBaseVNode("div",{class:"btn_add_map",onClick:n[16]||(n[16]=(...e)=>unref(b)&&unref(b)(...e))},[createVNode(u,{name:"slam/icon_add"}),createTextVNode(),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.goToAddMap")),1)])],2)):createCommentVNode("",!0),createVNode(Task$1,{ref_key:"taskComponentRef",ref:a,class:normalizeClass(["task-component",unref(g)?"hide":"show"]),"curr-point-id":unref(s)},null,8,["class","curr-point-id"]),withDirectives(createBaseVNode("div",_hoisted_9$5,[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_1"))+"：X("+toDisplayString$1(unref(K).position.x)+") Y("+toDisplayString$1(unref(K).position.y)+") "+toDisplayString$1(e.$t("Slam.yaw"))+"("+toDisplayString$1(unref(K).yaw)+"°) ",1),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_2"))+"："+toDisplayString$1(unref(K).timeShowText),1),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_3"))+"："+toDisplayString$1(unref(K).progress)+"%",1)],512),[[vShow,unref(x)&&0===unref(M)&&"patrol"===unref(R)&&unref(P)]])],2),createVNode(Tip$1,{ref_key:"tipComponentRef",ref:r},null,512),createVNode(MapList$1,{class:normalizeClass(["map_page",unref(m)?"show":"hide"]),visible:unref(m),"map-list":unref(l),onAdd:unref(v),onEdit:unref(T),onDel:unref(E),onBack:n[17]||(n[17]=()=>unref(_)(!1)),onEditName:unref(A),onSelectMap:unref(y),onAsyncToRobot:unref(Z),onAsyncFormRobot:unref(J)},null,8,["class","visible","map-list","onAdd","onEdit","onDel","onEditName","onSelectMap","onAsyncToRobot","onAsyncFormRobot"]),_hoisted_10$4],64)}}}),NewSlam=_export_sfc(_sfc_main$x,[["__scopeId","data-v-21f9ee07"]]),_hoisted_1$u={class:"alert_modal_wrapper"},_hoisted_2$q={key:0,class:"title"},_hoisted_3$j={class:"icon_wrap"},_hoisted_4$g={key:1,class:"title"},_hoisted_5$b={key:2,class:"input_wrap"},_hoisted_6$9=["placeholder"],_hoisted_7$8={key:3,class:"content"},_hoisted_8$8={class:"opera"},_sfc_main$w=defineComponent({__name:"AlertModal",props:{type:{default:"ask"},title:{default:"提示"},iconType:{default:"info"},content:{default:"提示内容"},sureBtnText:{type:[String,Function],default:()=>t("sure")},cancelBtnText:{type:[String,Function],default:()=>t("cancel")},verifyFn:{type:Function,default:()=>!0},onSure:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(e){const n=e,i={save:createVNode(_sfc_main$L,{name:"slam/icon_modal_save",style:"width: 42px; height: 42px"},null),edit:createVNode(_sfc_main$L,{name:"slam/icon_modal_edit",style:"width: 35px; height: 37px"},null),mark:createVNode(_sfc_main$L,{name:"slam/icon_modal_mark",style:"width: 42px; height: 42px"},null),tick:createVNode(_sfc_main$L,{name:"slam/icon_modal_tick",style:"width: 42px; height: 30px"},null),question:createVNode(_sfc_main$L,{name:"slam/icon_modal_question",style:"width: 36px; height: 42px"},null),info:createVNode(_sfc_main$L,{name:"slam/icon_modal_info",style:"width: 36px; height: 42px"},null)},o=computed((()=>i[n.iconType])),r=ref();ref("1");const a=()=>t("Slam.mapNamePlaceholder"),s=()=>{n.onSure&&n.onSure()};return(e,t)=>{var n,i;return openBlock(),createElementBlock("div",_hoisted_1$u,[createBaseVNode("div",{class:normalizeClass(["modal",e.type])},[["ask","alert"].includes(e.type)?(openBlock(),createElementBlock("div",_hoisted_2$q,[createBaseVNode("div",_hoisted_3$j,[(openBlock(),createBlock(resolveDynamicComponent(unref(o))))])])):(openBlock(),createElementBlock("div",_hoisted_4$g,toDisplayString$1(e.title),1)),"input"===e.type?(openBlock(),createElementBlock("div",_hoisted_5$b,[createBaseVNode("input",{ref_key:"inputRef",ref:r,type:"text",placeholder:null==a?void 0:a()},null,8,_hoisted_6$9)])):(openBlock(),createElementBlock("div",_hoisted_7$8,toDisplayString$1(e.content),1)),createBaseVNode("div",_hoisted_8$8,["alert"!=e.type?(openBlock(),createElementBlock("div",{key:0,class:"btn cancel",onClick:t[0]||(t[0]=()=>e.onCancel&&e.onCancel())},toDisplayString$1("string"!=typeof e.cancelBtnText?null===(n=e.cancelBtnText)||void 0===n?void 0:n.call(e):e.cancelBtnText),1)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["btn","sure","alert"===e.type&&"long"]),onClick:s},toDisplayString$1("string"!=typeof e.sureBtnText?null===(i=e.sureBtnText)||void 0===i?void 0:i.call(e):e.sureBtnText),3)])],2)])}}}),AlertModal$1=_export_sfc(_sfc_main$w,[["__scopeId","data-v-751c0d75"]]),div=document.createElement("div");div.setAttribute("class","alert-wrapper"),document.body.appendChild(div);const AlertTipModal=e=>new Promise(((t,n)=>{const i=createVNode(AlertModal$1,_objectSpread(_objectSpread({},e),{},{onSure:e=>{t(e||!0),render(null,div)},onCancel:()=>{t(!1),render(null,div)},key:Math.random().toString()}));render(null,div),render(i,div)})),CloseTipModal=()=>{render(null,div)};function genSportCmd$3(e="white"){const n=["翻身","turnOver",t("active_turnOver"),`active/icon_active_turnOver_${e}`,"active",SPORT_CMD.RecoveryStand],i=["阻尼",SPORT_STATE.Damp,t("model_damping"),`active/icon_model_damping_${e}`,"model",SPORT_CMD.Damp],o=["站立",SPORT_STATE.BalanceStand,t("model_stand"),`active/icon_model_stand_${e}`,"model",SPORT_CMD.RecoveryStand],r=["经典",SPORT_STATE.WalkStair,t("model_walkStair"),`active/icon_model_walk_${e}`,"model",SPORT_CMD.WalkStair],a=["卧倒",SPORT_STATE.LieDown,t("active_lieDown"),`active/icon_active_lieDown_${e}`,"model",SPORT_CMD.StandDown],s=["锁定",SPORT_STATE.JointLock,t("model_locking"),`active/icon_model_locking_${e}`,"model",SPORT_CMD.StandUp],l=["摆姿势",SPORT_STATE.Pose,t("model_pose"),`active/icon_model_pose_${e}`,"model",SPORT_CMD.FreeEuler],c=["持续走路",SPORT_STATE.ContinuousWalk,t("model_keepMoving"),`active/icon_model_keepMoving_${e}`,"model",SPORT_CMD.SwitchGait,1],u=["跑步",SPORT_STATE.Run,t("model_run"),`active/icon_model_run_${e}`,"model",SPORT_CMD.FastWalk],d=["走路","walk","走路",`active/icon_model_walk_${e}`,"model",SPORT_CMD.SwitchGait,1],h=["持续移动","continuousGait","持续移动","","model",SPORT_CMD.ContinuousGait],p=["解锁","unlock",t("model_unlock"),`active/icon_model_unlock_${e}`,"model",SPORT_CMD.BalanceStand],f=["站起（相对于坐下）","riseSit","站起","","active",SPORT_CMD.RiseSit],g=["灵动",SPORT_STATE.FreeWalk,t("active_freeWalk"),`active/icon_model_freeWalk_${e}`,"model",SPORT_CMD.FreeWalk];return{walkCmd:d,continuousGaitCmd:h,continuousGaits:[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun],gaitModes:[SPORT_STATE.ContinuousWalk,SPORT_STATE.Run,SPORT_STATE.ContinuousRun,SPORT_STATE.Stair],lockCmd:s,unLockCmd:p,poseCmd:l,standUpCmd:o,riseSitCmd:f,lieDownCmd:a,freeWalkCmd:g,runCmd:u,activeCmdList:[n],modelCmdList:[i,g,r,s,a,u,l,c]}}const modeMap$3=Array.from({length:100}).fill(SPORT_STATE.Idle);modeMap$3[0]=SPORT_STATE.Idle,modeMap$3[1]=SPORT_STATE.BalanceStand,modeMap$3[3]=SPORT_STATE.Locomotion,modeMap$3[4]=SPORT_STATE.Reserve,modeMap$3[5]=SPORT_STATE.LieDown,modeMap$3[6]=SPORT_STATE.JointLock,modeMap$3[7]=SPORT_STATE.Damp,modeMap$3[8]=SPORT_STATE.RecoveryStand,modeMap$3[9]=SPORT_STATE.FreeWalk,modeMap$3[10]=SPORT_STATE.Sit,modeMap$3[11]=SPORT_STATE.FrontFlip,modeMap$3[12]=SPORT_STATE.FrontJump,modeMap$3[13]=SPORT_STATE.FrontPounce,modeMap$3[18]=SPORT_STATE.WalkStair,modeMap$3[19]=SPORT_STATE.Run,modeMap$3[20]=SPORT_STATE.Pose;const gaitTypeMap$3=[SPORT_GAIT.Idle,SPORT_GAIT.Walk,SPORT_GAIT.Run,SPORT_GAIT.Stair,SPORT_GAIT.Adjust];function analyzeSport$3(e){if(!e.mode)return SPORT_STATE.BalanceStand;const t=gaitTypeMap$3[Number.isNaN(e.gaitType)?1:e.gaitType],n=modeMap$3[Number.isNaN(e.mode)?0:e.mode],i=e.errorCode,o=[SPORT_STATE.Damp,SPORT_STATE.Sit,SPORT_STATE.LieDown,SPORT_STATE.Pose,SPORT_STATE.JointLock,SPORT_STATE.BalanceStand,SPORT_STATE.FreeWalk,SPORT_STATE.Run,SPORT_STATE.WalkStair],r=[SPORT_GAIT.Run,SPORT_GAIT.Stair];if(i>>2&1)return SPORT_STATE.StandOut;if(n===SPORT_STATE.Idle)return SPORT_STATE.BalanceStand;if([SPORT_STATE.Damp,SPORT_STATE.JointLock].includes(n))return n;if(n!==SPORT_STATE.Locomotion&&!r.includes(t)&&1!=e.continuousGait)return o.includes(n)?n:SPORT_STATE.BalanceStand;switch(t){case SPORT_GAIT.Walk:return e.continuousGait?SPORT_STATE.ContinuousWalk:SPORT_STATE.Walk;case SPORT_GAIT.Run:return e.continuousGait?SPORT_STATE.ContinuousRun:SPORT_STATE.Run;case SPORT_GAIT.Stair:return SPORT_STATE.Stair;default:return SPORT_STATE.Walk}}function genB2AiSportAnalyzeFn(){return{analyzeSport:analyzeSport$3,modeMap:modeMap$3,gaitTypeMap:gaitTypeMap$3}}function useB2AiSport(e,n="white",i){const o=useDeviceStore(),{imuState:r}=storeToRefs(o),{activeCmdList:a,continuousGaitCmd:s,continuousGaits:l,unLockCmd:c,poseCmd:u,riseSitCmd:d,modelCmdList:h,standUpCmd:p,lieDownCmd:f,runCmd:g}=genSportCmd$3(n),{sendCmdRequest:m,toggleActiveIndex:_,toggleTryIndex:v,sleepPromise:b,moveCmd:T,startRespondState:A,stopRespondState:y,getState:E,stateChangeCb:S}=i,C=inject("joystickIsDynamic"),w=e=>m(e).catch((()=>{"active"===e[4]&&_(-1)})),x=computed((()=>{const[e,t]=r.value.rpy||[0,0,0];return Math.abs(e)>Math.PI/3||Math.abs(t)>Math.PI/3}));function M(){return(M=_asyncToGenerator((function*(e,n){const[i,r,a,l,c,u,h]=e;if(!u)return console.error("[error] 指令ID不存在",u),Promise.reject("指令ID不存在");if(null!=C&&C.value)return Promise.reject("正在控制摇杆");const{sportState:p,sportDetail:f}=E();if(console.log(`%c 当前状态: ${p}`,"color: yellow"),p===SPORT_STATE.JointLock)return void ToastMsg(t("toastMsg_10"));if(f.mode&&SPORT_STATE.Locomotion===f.mode&&1!==f.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if("turnOver"===r){if(!x.value)return void ToastMsg(t("toastMsg_19"));if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_21"),sureBtnText:t("sure_execute_btn")})))return}if("jumpForward"===r){if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_22"),sureBtnText:t("sure_execute_btn")})))return}v(n),_(n),o.updateSportCmdLoading(!0);const g=window.setTimeout((()=>{v(-1),_(-1),D(),o.updateSportCmdLoading(!1)}),1e4);p===SPORT_STATE.Damp?yield b(500):p===SPORT_STATE.Sit?yield w(d):p===SPORT_STATE.LieDown&&(yield b(500)),[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun].includes(p)?(yield w([...s,!1]),yield b(500),yield w(e),yield b(4e3),yield w([...s,!0]),yield T()):yield w(e),v(-1),_(-1),D(),o.updateSportCmdLoading(!1),window.clearTimeout(g)}))).apply(this,arguments)}function R(){return(R=_asyncToGenerator((function*(e,t){e!==t&&(e===SPORT_STATE.JointLock&&(yield w(c),yield b(500)),e===SPORT_STATE.Pose&&(yield w([...u,!1])),e===SPORT_STATE.LieDown&&t!==SPORT_STATE.Damp&&(yield w(p),yield b(5e3)),e===SPORT_STATE.Sit&&(yield w(d)),e===SPORT_STATE.Run&&t==SPORT_STATE.Pose&&(yield w([...g,!1]),yield b(1e3)),l.includes(e)&&(yield w([...s,!1]),yield b(500)),e===SPORT_STATE.Damp&&(t!==SPORT_STATE.BalanceStand&&(yield w(p)),t===SPORT_STATE.LieDown?yield b(3e3):yield b(5e3)))}))).apply(this,arguments)}function I(){return I=_asyncToGenerator((function*(e,n){const[i,r,a,l,u,d,h]=e;if(!d)return console.error("[error] 指令ID不存在",d),Promise.reject("指令ID不存在");if(null!=C&&C.value)return Promise.reject("正在控制摇杆");const{sportState:g,sportDetail:m}=E();if(console.log(`%c 当前状态: ${g}`,"color: yellow"),m.mode&&SPORT_STATE.Locomotion===m.mode&&1!==m.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if(g===SPORT_STATE.JointLock&&![SPORT_STATE.JointLock,SPORT_STATE.Damp].includes(r))return void ToastMsg(t("toastMsg_10"));v(n),o.updateSportCmdLoading(!0),y();const _=window.setTimeout((()=>{v(-1),D(),o.updateSportCmdLoading(!1)}),1e4);switch(yield function(e,t){return R.apply(this,arguments)}(g,r),r){case SPORT_STATE.Damp:g!==SPORT_STATE.Damp&&(yield w(e));break;case SPORT_STATE.FreeWalk:g!==SPORT_STATE.FreeWalk&&(yield w([...e,!0]));break;case SPORT_STATE.WalkStair:yield w([...e,g!==SPORT_STATE.WalkStair]);break;case SPORT_STATE.LieDown:yield w(g===SPORT_STATE.LieDown?p:e);break;case SPORT_STATE.Run:yield w([...e,g!==SPORT_STATE.Run]);break;case SPORT_STATE.Pose:yield w([...e,g!==SPORT_STATE.Pose]);break;case SPORT_STATE.JointLock:g===SPORT_STATE.JointLock?x.value?yield w(f):yield w(c):yield w(e);break;case"unlock":break;case SPORT_STATE.ContinuousWalk:g===SPORT_STATE.ContinuousWalk?yield w([...s,!1]):(yield w([...s,!0]),yield T())}yield b(500),v(-1),D(),o.updateSportCmdLoading(!1),window.clearTimeout(_)})),I.apply(this,arguments)}function D(){const{sportState:t}=E();console.log(`%c 当前状态: ${t}`,"color: yellow"),"model"===e&&S(t),A()}return{activeCmdList:a,modelCmdList:h,selectActive:function(e,t){return M.apply(this,arguments)},selectModel:function(e,t){return I.apply(this,arguments)}}}function genSportCmd$2(e="white"){const n=["翻身","turnOver",t("active_turnOver"),`active/icon_active_turnOver_${e}`,"active",SPORT_CMD.RecoveryStand],i=["前跳","jumpForward",t("active_jumpForward"),`active/icon_active_jumpForward_${e}`,"active",SPORT_CMD.FrontJump],o=["阻尼",SPORT_STATE.Damp,t("model_damping"),`active/icon_model_damping_${e}`,"model",SPORT_CMD.Damp],r=["站立",SPORT_STATE.BalanceStand,t("model_stand"),`active/icon_model_stand_${e}`,"model",SPORT_CMD.RecoveryStand],a=["卧倒",SPORT_STATE.LieDown,t("active_lieDown"),`active/icon_active_lieDown_${e}`,"model",SPORT_CMD.StandDown],s=["锁定",SPORT_STATE.JointLock,t("model_locking"),`active/icon_model_locking_${e}`,"model",SPORT_CMD.StandUp],l=["摆姿势",SPORT_STATE.Pose,t("model_pose"),`active/icon_model_pose_${e}`,"model",SPORT_CMD.Pose],c=["持续走路",SPORT_STATE.ContinuousWalk,t("model_keepMoving"),`active/icon_model_keepMoving_${e}`,"model",SPORT_CMD.SwitchGait,1],u=["跑步",SPORT_STATE.Run,t("model_run"),`active/icon_model_run_${e}`,"model",SPORT_CMD.SwitchGait,2],d=["持续跑步",SPORT_STATE.ContinuousRun,t("model_keepRunning"),`active/icon_model_keepRunning_${e}`,"model",SPORT_CMD.SwitchGait,2],h=["爬楼梯",SPORT_STATE.Stair,t("model_climbingStairs"),`active/icon_model_climbingStairs_${e}`,"model",SPORT_CMD.SwitchGait,3],p=["走路","walk","走路",`active/icon_model_walk_${e}`,"model",SPORT_CMD.SwitchGait,1],f=["持续移动","continuousGait","持续移动","","model",SPORT_CMD.ContinuousGait],g=["解锁","unlock",t("model_unlock"),`active/icon_model_unlock_${e}`,"model",SPORT_CMD.BalanceStand],m=["站起（相对于坐下）","riseSit","站起","","active",SPORT_CMD.RiseSit];return{walkCmd:p,continuousGaitCmd:f,continuousGaits:[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun],gaitModes:[SPORT_STATE.ContinuousWalk,SPORT_STATE.Run,SPORT_STATE.ContinuousRun,SPORT_STATE.Stair],lockCmd:s,unLockCmd:g,poseCmd:l,standUpCmd:r,riseSitCmd:m,lieDownCmd:a,activeCmdList:[n,i],modelCmdList:[o,r,a,s,l,c,u,d,h]}}const modeMap$2=Array.from({length:100}).fill(SPORT_STATE.Idle);modeMap$2[0]=SPORT_STATE.Idle,modeMap$2[1]=SPORT_STATE.BalanceStand,modeMap$2[2]=SPORT_STATE.Pose,modeMap$2[3]=SPORT_STATE.Locomotion,modeMap$2[4]=SPORT_STATE.Reserve,modeMap$2[5]=SPORT_STATE.LieDown,modeMap$2[6]=SPORT_STATE.JointLock,modeMap$2[7]=SPORT_STATE.Damp,modeMap$2[8]=SPORT_STATE.RecoveryStand,modeMap$2[9]=SPORT_STATE.Reserve,modeMap$2[10]=SPORT_STATE.Sit,modeMap$2[11]=SPORT_STATE.FrontFlip,modeMap$2[12]=SPORT_STATE.FrontJump,modeMap$2[13]=SPORT_STATE.FrontPounce;const gaitTypeMap$2=[SPORT_GAIT.Idle,SPORT_GAIT.Walk,SPORT_GAIT.Run,SPORT_GAIT.Stair,SPORT_GAIT.Adjust];function analyzeSport$2(e){if(!e.mode)return SPORT_STATE.BalanceStand;const t=gaitTypeMap$2[Number.isNaN(e.gaitType)?1:e.gaitType],n=modeMap$2[Number.isNaN(e.mode)?0:e.mode],i=e.errorCode,o=[SPORT_STATE.Damp,SPORT_STATE.Sit,SPORT_STATE.LieDown,SPORT_STATE.Pose,SPORT_STATE.JointLock,SPORT_STATE.BalanceStand],r=[SPORT_GAIT.Run,SPORT_GAIT.Stair];if(i>>2&1)return SPORT_STATE.StandOut;if(n===SPORT_STATE.Idle)return SPORT_STATE.BalanceStand;if([SPORT_STATE.Damp,SPORT_STATE.JointLock].includes(n))return n;if(n!==SPORT_STATE.Locomotion&&!r.includes(t)&&1!=e.continuousGait)return o.includes(n)?n:SPORT_STATE.BalanceStand;switch(t){case SPORT_GAIT.Walk:return e.continuousGait?SPORT_STATE.ContinuousWalk:SPORT_STATE.Walk;case SPORT_GAIT.Run:return e.continuousGait?SPORT_STATE.ContinuousRun:SPORT_STATE.Run;case SPORT_GAIT.Stair:return SPORT_STATE.Stair;default:return SPORT_STATE.Walk}}function genB2NormalSportAnalyzeFn(){return{analyzeSport:analyzeSport$2,modeMap:modeMap$2,gaitTypeMap:gaitTypeMap$2}}function useB2NormalSport(e,n="white",i){const o=useDeviceStore(),{activeCmdList:r,walkCmd:a,continuousGaitCmd:s,continuousGaits:l,gaitModes:c,unLockCmd:u,poseCmd:d,riseSitCmd:h,modelCmdList:p,standUpCmd:f,lieDownCmd:g}=genSportCmd$2(n),{sendCmdRequest:m,toggleActiveIndex:_,toggleTryIndex:v,sleepPromise:b,moveCmd:T,startRespondState:A,stopRespondState:y,getState:E,stateChangeCb:S,isRollState:C}=i,w=inject("joystickIsDynamic"),x=e=>m(e).catch((()=>{"active"===e[4]&&_(-1)}));function M(){return(M=_asyncToGenerator((function*(e,n){const[i,r,a,l,c,u,d]=e;if(!u)return console.error("[error] 指令ID不存在",u),Promise.reject("指令ID不存在");if(null!=w&&w.value)return Promise.reject("正在控制摇杆");const{sportState:p,sportDetail:g}=E();if(console.log(`%c 当前状态: ${p}`,"color: yellow"),p===SPORT_STATE.JointLock)return void ToastMsg(t("toastMsg_10"));if(g.mode&&SPORT_STATE.Locomotion===g.mode&&1!==g.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if("turnOver"===r){if(!C.value)return void ToastMsg(t("toastMsg_19"));if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_21"),sureBtnText:t("sure_execute_btn")})))return}if("jumpForward"===r){if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_22"),sureBtnText:t("sure_execute_btn")})))return}v(n),_(n),o.updateSportCmdLoading(!0);const m=window.setTimeout((()=>{v(-1),_(-1),D(),o.updateSportCmdLoading(!1)}),1e4);p===SPORT_STATE.Damp?(yield x(f),yield b(500)):p===SPORT_STATE.Sit?yield x(h):p===SPORT_STATE.LieDown&&(yield x(f),yield b(500)),[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun].includes(p)?(yield x([...s,!1]),yield b(500),yield x(e),yield b(4e3),yield x([...s,!0]),yield T()):yield x(e),v(-1),_(-1),D(),o.updateSportCmdLoading(!1),window.clearTimeout(m)}))).apply(this,arguments)}function R(){return(R=_asyncToGenerator((function*(e,t){e!==t&&(e===SPORT_STATE.JointLock&&(yield x(u),yield b(500)),e===SPORT_STATE.Pose&&(yield x([...d,!1])),e===SPORT_STATE.LieDown&&t!==SPORT_STATE.Damp&&(yield x(f),yield b(500)),e===SPORT_STATE.Sit&&(yield x(h)),l.includes(e)&&(yield x([...s,!1]),yield b(500)),e===SPORT_STATE.Damp&&(t!==SPORT_STATE.BalanceStand&&(yield x(f)),t===SPORT_STATE.LieDown?yield b(3e3):yield b(1e3)),c.includes(e)&&!c.includes(t)&&(yield x(a)))}))).apply(this,arguments)}function I(){return I=_asyncToGenerator((function*(e,n){const[i,r,l,c,d,p,m]=e;if(!p)return console.error("[error] 指令ID不存在",p),Promise.reject("指令ID不存在");if(null!=w&&w.value)return Promise.reject("正在控制摇杆");const{sportState:_,sportDetail:A}=E();if(console.log(`%c 当前状态: ${_}`,"color: yellow"),A.mode&&SPORT_STATE.Locomotion===A.mode&&1!==A.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if(_===SPORT_STATE.JointLock&&![SPORT_STATE.JointLock,SPORT_STATE.Damp].includes(r))return void ToastMsg(t("toastMsg_10"));v(n),o.updateSportCmdLoading(!0),y();const S=window.setTimeout((()=>{v(-1),D(),o.updateSportCmdLoading(!1)}),1e4);switch(yield function(e,t){return R.apply(this,arguments)}(_,r),r){case SPORT_STATE.Damp:_!==SPORT_STATE.Damp&&(yield x(e));break;case SPORT_STATE.BalanceStand:_===SPORT_STATE.BalanceStand?yield x(a):[SPORT_STATE.Pose,SPORT_STATE.Run,SPORT_STATE.ContinuousRun,SPORT_STATE.ContinuousWalk,SPORT_STATE.Stair].includes(_)||(yield x(e));break;case SPORT_STATE.Sit:yield x(_===SPORT_STATE.Sit?h:e);break;case SPORT_STATE.LieDown:yield x(_===SPORT_STATE.LieDown?f:e);break;case SPORT_STATE.JointLock:_===SPORT_STATE.JointLock?C.value?yield x(g):yield x(u):yield x(e);break;case"unlock":break;case SPORT_STATE.Pose:yield x([...e,_!==SPORT_STATE.Pose]);break;case SPORT_STATE.ContinuousWalk:_===SPORT_STATE.ContinuousWalk?(yield x(a),yield x([...s,!1])):(yield x(e),yield x([...s,!0]));break;case SPORT_STATE.Run:_===SPORT_STATE.Run?yield x(a):(yield x(e),yield T());break;case SPORT_STATE.ContinuousRun:_===SPORT_STATE.ContinuousRun?(yield x([...s,!1]),yield x(a),yield T()):(yield x(e),yield x([...s,!0]));break;case SPORT_STATE.Stair:yield x(_===SPORT_STATE.Stair?a:e)}yield b(500),v(-1),D(),o.updateSportCmdLoading(!1),window.clearTimeout(S)})),I.apply(this,arguments)}function D(){const{sportState:t}=E();console.log(`%c 当前状态: ${t}`,"color: yellow"),"model"===e&&S(t),A()}return{activeCmdList:r,modelCmdList:p,selectActive:function(e,t){return M.apply(this,arguments)},selectModel:function(e,t){return I.apply(this,arguments)}}}function genSportCmd$1(e="white"){const n=["翻身","turnOver",t("active_turnOver"),`active/icon_active_turnOver_${e}`,"active",SPORT_CMD.RecoveryStand],i=["全地形",SPORT_STATE.AllTerrain,t("model_all_terrain"),`active/icon_model_b2w_all_terrain_${e}`,"model",SPORT_CMD.SwitchGait,1],o=["特殊模式",SPORT_STATE.Special,t("model_special"),`active/icon_model_b2w_special_${e}`,"model",SPORT_CMD.SwitchGait,0],r=["阻尼",SPORT_STATE.Damp,t("model_damping"),`active/icon_model_damping_${e}`,"model",SPORT_CMD.Damp],a=["站立",SPORT_STATE.BalanceStand,t("model_stand"),`active/icon_model_stand_${e}`,"model",SPORT_CMD.StandUp],s=["卧倒",SPORT_STATE.LieDown,t("active_lieDown"),`active/icon_active_lieDown_${e}`,"model",SPORT_CMD.StandDown],l=["锁定",SPORT_STATE.JointLock,t("model_locking"),`active/icon_model_locking_${e}`,"model",SPORT_CMD.StandUp],c=["摆姿势",SPORT_STATE.Pose,t("model_pose"),`active/icon_model_pose_${e}`,"model",SPORT_CMD.Pose],u=["走路","walk","走路",`active/icon_model_walk_${e}`,"model",SPORT_CMD.SwitchGait,1],d=["持续移动","continuousGait","持续移动","","model",SPORT_CMD.ContinuousGait],h=["解锁","unlock",t("model_unlock"),`active/icon_model_unlock_${e}`,"model",SPORT_CMD.BalanceStand],p=["站起（相对于坐下）","riseSit","站起","","active",SPORT_CMD.RiseSit];return{walkCmd:u,continuousGaitCmd:d,continuousGaits:[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun],gaitModes:[SPORT_STATE.ContinuousWalk,SPORT_STATE.Run,SPORT_STATE.ContinuousRun,SPORT_STATE.Stair],lockCmd:l,unLockCmd:h,poseCmd:c,standUpCmd:a,riseSitCmd:p,lieDownCmd:s,activeCmdList:[n],modelCmdList:[i,o,r,a,s,c]}}const modeMap$1=Array.from({length:100}).fill(SPORT_STATE.Idle);modeMap$1[0]=SPORT_STATE.Idle,modeMap$1[1]=SPORT_STATE.BalanceStand,modeMap$1[2]=SPORT_STATE.Pose,modeMap$1[3]=SPORT_STATE.Locomotion,modeMap$1[4]=SPORT_STATE.Reserve,modeMap$1[5]=SPORT_STATE.LieDown,modeMap$1[6]=SPORT_STATE.JointLock,modeMap$1[7]=SPORT_STATE.Damp,modeMap$1[8]=SPORT_STATE.RecoveryStand,modeMap$1[9]=SPORT_STATE.Reserve,modeMap$1[10]=SPORT_STATE.Sit,modeMap$1[11]=SPORT_STATE.FrontFlip,modeMap$1[12]=SPORT_STATE.FrontJump,modeMap$1[13]=SPORT_STATE.FrontPounce,modeMap$1[14]=SPORT_STATE.Special;const gaitTypeMap$1=[SPORT_GAIT.Idle,SPORT_GAIT.Walk,SPORT_GAIT.Run,SPORT_GAIT.Stair,SPORT_GAIT.Adjust];function analyzeSport$1(e){if(!e.mode)return SPORT_STATE.BalanceStand;gaitTypeMap$1[Number.isNaN(e.gaitType)?1:e.gaitType];const t=modeMap$1[Number.isNaN(e.mode)?0:e.mode];return e.errorCode,t===SPORT_STATE.Idle||t==SPORT_STATE.JointLock?SPORT_STATE.BalanceStand:t==SPORT_STATE.Locomotion?SPORT_STATE.AllTerrain:([SPORT_STATE.Damp,SPORT_STATE.JointLock].includes(t),t)}function genB2NormalWSportAnalyzeFn(){return{analyzeSport:analyzeSport$1,modeMap:modeMap$1,gaitTypeMap:gaitTypeMap$1}}function useB2NormalWSport(e,n="white",i){const o=useDeviceStore(),{imuState:r}=storeToRefs(o),{activeCmdList:a,walkCmd:s,continuousGaitCmd:l,continuousGaits:c,gaitModes:u,unLockCmd:d,poseCmd:h,riseSitCmd:p,modelCmdList:f,standUpCmd:g,lieDownCmd:m}=genSportCmd$1(n),{sendCmdRequest:_,toggleActiveIndex:v,toggleTryIndex:b,sleepPromise:T,moveCmd:A,startRespondState:y,stopRespondState:E,getState:S,stateChangeCb:C,isRollState:w}=i,x=inject("joystickIsDynamic"),M=e=>_(e).catch((()=>{"active"===e[4]&&v(-1)}));function R(){return(R=_asyncToGenerator((function*(e,n){const[i,r,a,s,c,u,d]=e;if(!u)return console.error("[error] 指令ID不存在",u),Promise.reject("指令ID不存在");if(null!=x&&x.value)return Promise.reject("正在控制摇杆");const{sportState:h,sportDetail:f}=S();if(console.log(`%c 当前状态: ${h}`,"color: yellow"),h===SPORT_STATE.JointLock)return void ToastMsg(t("toastMsg_10"));if(f.mode&&SPORT_STATE.Locomotion===f.mode&&1!==f.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if("turnOver"===r){if(!w.value)return void ToastMsg(t("toastMsg_19"));if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_21"),sureBtnText:t("sure_execute_btn")})))return}if("jumpForward"===r){if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_22"),sureBtnText:t("sure_execute_btn")})))return}b(n),v(n),o.updateSportCmdLoading(!0);const m=window.setTimeout((()=>{b(-1),v(-1),k(),o.updateSportCmdLoading(!1)}),1e4);h===SPORT_STATE.Damp?w.value||(yield M(g),yield T(500)):h===SPORT_STATE.Sit?yield M(p):h===SPORT_STATE.LieDown&&(yield M(g),yield T(500)),[SPORT_STATE.ContinuousWalk,SPORT_STATE.ContinuousRun].includes(h)?(yield M([...l,!1]),yield T(500),yield M(e),yield T(4e3),yield M([...l,!0]),yield A()):yield M(e),b(-1),v(-1),k(),o.updateSportCmdLoading(!1),window.clearTimeout(m)}))).apply(this,arguments)}function I(){return(I=_asyncToGenerator((function*(e,t){e!==t&&(e===SPORT_STATE.Pose&&(yield M([...h,!1])),e===SPORT_STATE.LieDown&&t!==SPORT_STATE.Damp&&(yield M(g),yield T(500)),e===SPORT_STATE.Sit&&(yield M(p)),c.includes(e)&&(yield M([...l,!1]),yield T(500)),e===SPORT_STATE.Damp&&(t!==SPORT_STATE.BalanceStand&&(yield M(g)),t===SPORT_STATE.LieDown?yield T(3e3):yield T(1e3)),u.includes(e)&&!u.includes(t)&&(yield M(s)))}))).apply(this,arguments)}function D(){return D=_asyncToGenerator((function*(e,t){const[n,i,r,a,c,u,h]=e;if(!u)return console.error("[error] 指令ID不存在",u),Promise.reject("指令ID不存在");if(null!=x&&x.value)return Promise.reject("正在控制摇杆");const{sportState:f,sportDetail:_}=S();console.log(`%c 当前状态: ${f}`,"color: yellow"),console.log(_.mode,_.mode),b(t),o.updateSportCmdLoading(!0),E();const v=window.setTimeout((()=>{b(-1),k(),o.updateSportCmdLoading(!1)}),1e4);switch(yield function(e,t){return I.apply(this,arguments)}(f,i),i){case SPORT_STATE.Damp:f!==SPORT_STATE.Damp&&(yield M(e));break;case SPORT_STATE.BalanceStand:f===SPORT_STATE.BalanceStand?yield M(s):[SPORT_STATE.Pose,SPORT_STATE.Run,SPORT_STATE.ContinuousRun,SPORT_STATE.ContinuousWalk,SPORT_STATE.Stair].includes(f)||(yield M(e));break;case SPORT_STATE.Sit:yield M(f===SPORT_STATE.Sit?p:e);break;case SPORT_STATE.LieDown:yield M(f===SPORT_STATE.LieDown?g:e);break;case SPORT_STATE.JointLock:f===SPORT_STATE.JointLock?w.value?yield M(m):yield M(d):yield M(e);break;case"unlock":break;case SPORT_STATE.Pose:yield M([...e,f!==SPORT_STATE.Pose]);break;case SPORT_STATE.ContinuousWalk:f===SPORT_STATE.ContinuousWalk?(yield M(s),yield M([...l,!1])):(yield M(e),yield M([...l,!0]));break;case SPORT_STATE.Run:f===SPORT_STATE.Run?yield M(s):(yield M(e),yield A());break;case SPORT_STATE.ContinuousRun:f===SPORT_STATE.ContinuousRun?(yield M([...l,!1]),yield M(s),yield A()):(yield M(e),yield M([...l,!0]));break;case SPORT_STATE.Stair:yield M(f===SPORT_STATE.Stair?s:e);break;case SPORT_STATE.AllTerrain:case SPORT_STATE.Special:yield M(e)}yield T(500),b(-1),k(),o.updateSportCmdLoading(!1),window.clearTimeout(v)})),D.apply(this,arguments)}function k(){const{sportState:t}=S();console.log(`%c 当前状态: ${t}`,"color: yellow"),"model"===e&&C(t),y()}return{activeCmdList:a,modelCmdList:f,selectActive:function(e,t){return R.apply(this,arguments)},selectModel:function(e,t){return D.apply(this,arguments)}}}function genSportCmd(e="white"){const n=["握手","shakeHands_1",t("active_shakeHands"),`active/icon_active_shakeHands_${e}`,"active",SPORT_CMD.G1UpperLimbs,27],i=["击掌","highFive",t("active_highFive"),`active/icon_active_highFiveCmd_${e}`,"active",SPORT_CMD.G1UpperLimbs,18],o=["拥抱","hug",t("active_hug"),`active/icon_active_hug_${e}`,"active",SPORT_CMD.G1UpperLimbs,19],r=["额头挥手","hightWave",t("active_hightWave"),`active/icon_active_hightWave_${e}`,"active",SPORT_CMD.G1UpperLimbs,26],a=["胸前挥手","lowWave",t("active_lowWave"),`active/icon_active_lowWave_${e}`,"active",SPORT_CMD.G1UpperLimbs,25],s=["鼓掌","clamp",t("active_clamp"),`active/icon_active_clamp_${e}`,"active",SPORT_CMD.G1UpperLimbs,17],l=["左手飞吻","blowKiss",t("active_blowKiss"),`active/icon_active_blowKiss_${e}`,"active",SPORT_CMD.G1UpperLimbs,12],c=["双手比心","makeHeartBothHands",t("active_makeHeartBothHands"),`active/icon_active_makeHeartBothHands_${e}`,"active",SPORT_CMD.G1UpperLimbs,20],u=["右手比心","makeHeartSingleHands",t("active_makeHeartSingleHands"),`active/icon_active_makeHeartSingleHands_${e}`,"active",SPORT_CMD.G1UpperLimbs,21],d=["奥特曼光波","ultramanRay",t("active_ultramanRay"),`active/icon_active_ultramanRay_${e}`,"active",SPORT_CMD.G1UpperLimbs,24],h=["双手平举","bothHandsUp",t("active_bothHandsUp"),`active/icon_active_bothHandsUp_${e}`,"active",SPORT_CMD.G1UpperLimbs,15],p=["右手平举","singleHandsUp",t("active_singleHandsUp"),`active/icon_active_singleHandsUp_${e}`,"active",SPORT_CMD.G1UpperLimbs,23],f=["双手打X","refuse",t("active_refuse"),`active/icon_active_refuse_${e}`,"active",SPORT_CMD.G1UpperLimbs,22],g=["释放动作","releaseArm",t("active_releaseArm"),`active/icon_active_releaseArm_${e}`,"active",SPORT_CMD.G1UpperLimbs,99];return{activeCmdList:[n,i,o,r,s,a,l,c,u,h,d,p,f],modelCmdList:[["阻尼",SPORT_STATE.Damp,t("model_damping"),`active/icon_model_damping_${e}`,"model",SPORT_CMD.G1State,1],["零力矩",SPORT_STATE.ZeroTorque,t("model_zeroTorque"),`active/icon_model_zeroTorque_${e}`,"model",SPORT_CMD.G1State,0],["预备",SPORT_STATE.Preparation,t("model_preparation"),`active/icon_model_preparation_${e}`,"model",SPORT_CMD.G1State,4],["落座",SPORT_STATE.Seating,t("model_seating"),`active/icon_model_seating_${e}`,"model",SPORT_CMD.G1State,3],["走路",SPORT_STATE.Walk_G1,t("model_walk"),`active/icon_model_g1_walk_${e}`,"model",SPORT_CMD.G1State,500],["走路(控腰)",SPORT_STATE.Walk2_G1,t("model_walk2"),`active/icon_model_g1_walk_${e}`,"model",SPORT_CMD.G1State,501],["跑步",SPORT_STATE.Run_G1,t("model_run_g1"),`active/icon_model_run_${e}`,"model",SPORT_CMD.G1State,801],["下蹲",SPORT_STATE.Squat_G1,t("active_squat"),`active/icon_model_squat_${e}`,"model",SPORT_CMD.G1State,706],["蹲起",SPORT_STATE.SquatUp_G1,t("active_squatUp"),`active/icon_model_squatUp_${e}`,"model",SPORT_CMD.G1State,706],["躺起",SPORT_STATE.LieUp_G1,t("active_lieUp"),`active/icon_model_lieUp_${e}`,"model",SPORT_CMD.G1State,702]],releaseArmCmd:g}}const modeMap=Array.from({length:100}).fill(SPORT_STATE.Idle);modeMap[0]=SPORT_STATE.ZeroTorque,modeMap[1]=SPORT_STATE.Damp,modeMap[2]=SPORT_STATE.Squat_G1,modeMap[3]=SPORT_STATE.Seating,modeMap[4]=SPORT_STATE.Preparation,modeMap[500]=SPORT_STATE.Walk_G1,modeMap[501]=SPORT_STATE.Walk2_G1,modeMap[706]=SPORT_STATE.Squat_G1,modeMap[801]=SPORT_STATE.Run_G1;const gaitTypeMap=[];function analyzeSport(e){if(null==e.mode)return SPORT_STATE.ZeroTorque;return modeMap[Number.isNaN(e.mode)?0:e.mode]}function genG1AiSportAnalyzeFn(){return{analyzeSport:analyzeSport,modeMap:modeMap,gaitTypeMap:gaitTypeMap}}function useG1AiSport(e,n="white",i){const o=useDeviceStore(),{imuState:r}=storeToRefs(o),{activeCmdList:a,modelCmdList:s,releaseArmCmd:l}=genSportCmd(n),{sendCmdRequest:c,toggleActiveIndex:u,toggleTryIndex:d,sleepPromise:h,moveCmd:p,startRespondState:f,stopRespondState:g,getState:m,stateChangeCb:_}=i,v=inject("joystickIsDynamic"),b=e=>c(e).catch((()=>{"active"===e[4]&&u(-1)}));function T(){return(T=_asyncToGenerator((function*(e,t){const[n,i,r,a,s,c,p]=e;if(!c)return console.error("[error] 指令ID不存在",c),Promise.reject("指令ID不存在");if(null!=v&&v.value)return Promise.reject("正在控制摇杆");const{sportState:f,sportDetail:g}=m(),{holding:_,id:T,name:A}=g.g1ArmStateData||{};if(console.log(`%c 当前状态: ${f}`,"color: yellow"),!_&&T)return void ToastMsg("正在执行上肢动作");d(t),u(t),o.updateSportCmdLoading(!0);const y=window.setTimeout((()=>{d(-1),u(-1),E(),o.updateSportCmdLoading(!1)}),1e4);_?(yield b(l),yield h(1e3),T!==p&&(yield b(e))):yield b(e),d(-1),u(-1),E(),o.updateSportCmdLoading(!1),window.clearTimeout(y)}))).apply(this,arguments)}function A(){return(A=_asyncToGenerator((function*(e,t){}))).apply(this,arguments)}function y(){return y=_asyncToGenerator((function*(e,n){const[i,r,a,s,l,c,u]=e;if(!c)return console.error("[error] 指令ID不存在",c),Promise.reject("指令ID不存在");if(null!=v&&v.value)return Promise.reject("正在控制摇杆");const{sportState:p,sportDetail:f}=m();if(console.log(`%c 当前状态: ${p}`,"color: yellow"),f.mode&&SPORT_STATE.Locomotion===f.mode&&1!==f.continuousGait)return console.error("[error] 正处于动态运动中"),void ToastMsg(t("toastMsg_17"));if([SPORT_STATE.SquatUp_G1,SPORT_STATE.LieUp_G1].includes(r)&&p!==SPORT_STATE.Damp)return void ToastMsg("必须在阻尼状态下进行");d(n),o.updateSportCmdLoading(!0),g();const _=window.setTimeout((()=>{d(-1),E(),o.updateSportCmdLoading(!1)}),1e4);let T;switch(yield function(e,t){return A.apply(this,arguments)}(p,r),r){case SPORT_STATE.Damp:if(p!==SPORT_STATE.Damp){if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_27"),sureBtnText:t("sure_execute_btn")})))return;yield b(e)}break;case SPORT_STATE.ZeroTorque:p==SPORT_STATE.Damp?yield b(e):ToastMsg(t("toastMsg_29"));break;case SPORT_STATE.Seating:if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_28"),sureBtnText:t("sure_execute_btn")})))return;yield b(e);break;case SPORT_STATE.Preparation:p==SPORT_STATE.Damp?yield b(e):ToastMsg(t("toastMsg_29"));break;case SPORT_STATE.Walk_G1:case SPORT_STATE.Walk2_G1:case SPORT_STATE.Run_G1:case SPORT_STATE.Step_G1:case SPORT_STATE.Stand_G1:yield b(e);break;case SPORT_STATE.Squat_G1:T=yield AlertTipModal({type:"ask",content:t("toastMsg_24"),sureBtnText:t("sure_execute_btn")}),T&&(yield b(e));break;case SPORT_STATE.SquatUp_G1:T=yield AlertTipModal({type:"ask",content:t("toastMsg_25"),sureBtnText:t("sure_execute_btn")}),T&&(yield b(e));break;case SPORT_STATE.LieUp_G1:T=yield AlertTipModal({type:"ask",content:t("toastMsg_26"),sureBtnText:t("sure_execute_btn")}),T&&(yield b(e))}yield h(500),d(-1),E(),o.updateSportCmdLoading(!1),window.clearTimeout(_),bus.emit("refreshOperaBar")})),y.apply(this,arguments)}function E(){const{sportState:t}=m();console.log(`%c 当前状态: ${t}`,"color: yellow"),"model"===e&&_(t),f()}return{activeCmdList:a,modelCmdList:s,selectActive:function(e,t){return T.apply(this,arguments)},selectModel:function(e,t){return y.apply(this,arguments)}}}function genSportCmdRequestFn(e){const n=useDeviceStore(),{series:i}=storeToRefs(n),o=ref(null);return{sendCmdRequest:r=>new Promise(((a,s)=>{useRTC(function(){var e=_asyncToGenerator((function*(e){const[l,c,u,d,h,p,f]=r;if("FAIL"===e.getValidationState())return console.error("[error] RTC未连接"),void s("RTC disconnected");if(!r)return s("[error] 指令不存在"),void console.error("[error] 指令不存在");if(!p)return s("[error] 指令ID不存在"),void console.error("[error] 指令ID不存在",p);let g;void 0!==f&&(g={data:f});const m=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_12")),n.updateSportCmdLoading(!1),o.value=null,null==v||null===(e=v.abort)||void 0===e||e.call(v,null),s("timeout"),console.error("[error] 命令执行超时")}),[SPORT_CMD.Dance1,SPORT_CMD.Dance2].includes(p)?6e4:1e4);console.log(`%c 发送${r[0]}指令 ${r[5]}`,"color: red",void 0===r[6]?"":r[6]);const _="G1"==i.value&&"active"==h?RTC_TOPIC.G1_ARM_SPORT_MOD:RTC_TOPIC.SPORT_MOD,v=promiseAbort(null==e?void 0:e.publishReqNew(_,{api_id:p,data:g}));v.then((e=>{e?(console.log(`%c ${r[0]}指令返回结果:`,"color: red",e.data.header.status),window.clearTimeout(m),o.value=null,a(e.data),0!==e.data.header.status.code&&(ToastMsg(`${t("toastMsg_15")}【${u}】${t("toastMsg_16")}`),console.error(`[Error] 指令${l}执行失败, 返回结果code为${e.data.header.status.code}`))):s()})).catch((e=>s(e))),o.value=()=>{var e;null===(e=v.abort)||void 0===e||e.call(v,null),window.clearTimeout(m)}}));return function(t){return e.apply(this,arguments)}}(),e,!0)()})),cmdReqAbortFn:o,sleepPromise:function(e){return new Promise((t=>{window.setTimeout(t,e)}))},moveCmd:function(){return new Promise((t=>{const n=window.setTimeout(t,500);useRTC((e=>{"open"===e.getChannelState()&&e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,{lx:0,ly:.15,rx:0,ry:0}),t(""),window.clearTimeout(n)}),e,!0)()}))}}}function sportStatusHook(e,t,n){const i=useDeviceStore(),{sportState:o}=storeToRefs(useDeviceStore()),[r,a]=useToggle(!0);return"model"===e&&watch((()=>o.value),(e=>{if(performance.now()-o.value.time<2e3){const e=n.value.analyzeSport(o.value);r.value&&t(e),i.updateSportModel(e),webToApp("webSendSportState",{sportState:e})}else console.error("运控状态滞后"),r.value&&t(SPORT_STATE.Idle),i.updateSportModel(SPORT_STATE.Idle),webToApp("webSendSportState",{sportState:SPORT_STATE.Idle})}),{deep:!0}),{getState:()=>{const e=performance.now()-o.value.time;let t=SPORT_STATE.Idle;return e>2e3?(console.error("运控状态滞后"),t=SPORT_STATE.Idle):t=n.value.analyzeSport(o.value),{sportState:t,sportDetail:_objectSpread(_objectSpread({},o.value),{},{mode:n.value.modeMap[o.value.mode],gait:n.value.gaitTypeMap[o.value.gaitType]})}},stopRespondState:()=>a(!1),startRespondState:()=>a(!0)}}function useSportCmd(e,n="white"){const i=inject("webRTC"),o=useDeviceStore(),{currSportModel:r,emergencyStopState:a,sportCmdLoading:s,bmsState:l,series:c,sportMode:u,imuState:d}=storeToRefs(o),[h,p]=useToggle(-1),[f,g]=useToggle(-1),[m,_]=useToggle(!1),{sendCmdRequest:v,cmdReqAbortFn:b,sleepPromise:T,moveCmd:A}=genSportCmdRequestFn(i),y=computed((()=>{const[e,t]=d.value.rpy||[0,0,0];return Math.abs(e)>Math.PI/3||Math.abs(t)>Math.PI/3})),E=genB2NormalSportAnalyzeFn(),S=genB2AiSportAnalyzeFn(),C=genB2NormalWSportAnalyzeFn(),w=genG1AiSportAnalyzeFn(),x=computed((()=>{switch(c.value){case"B2":switch(u.value){case"normal":default:return E;case"ai":return S;case"normal-w":return C}case"G1":return w;default:return E}})),{getState:M,stopRespondState:R,startRespondState:I}=sportStatusHook(e,V,x),D=useB2NormalSport(e,n,{sendCmdRequest:v,sleepPromise:T,moveCmd:A,toggleActiveIndex:p,toggleTryIndex:g,startRespondState:I,stopRespondState:R,getState:M,stateChangeCb:V,isRollState:y}),k=useB2AiSport(e,n,{sendCmdRequest:v,sleepPromise:T,moveCmd:A,toggleActiveIndex:p,toggleTryIndex:g,startRespondState:I,stopRespondState:R,getState:M,stateChangeCb:V}),L=useB2NormalWSport(e,n,{sendCmdRequest:v,sleepPromise:T,moveCmd:A,toggleActiveIndex:p,toggleTryIndex:g,startRespondState:I,stopRespondState:R,getState:M,stateChangeCb:V,isRollState:y}),O=useG1AiSport(e,n,{sendCmdRequest:v,sleepPromise:T,moveCmd:A,toggleActiveIndex:p,toggleTryIndex:g,startRespondState:I,stopRespondState:R,getState:M,stateChangeCb:V}),P=(e,t)=>{switch(e){case"B2":switch(t){case"normal":default:return D;case"ai":return k;case"normal-w":return L}case"G1":return O;default:return D}},N=computed((()=>P(c.value,u.value).activeCmdList)),$=computed((()=>P(c.value,u.value).modelCmdList)),B=computed((()=>P(c.value,u.value).selectActive)),F=computed((()=>P(c.value,u.value).selectModel)),U=inject("joystickIsDynamic");function G(){return(G=_asyncToGenerator((function*(){const{sportState:t}=M();console.log(`%c 当前状态: ${t}`,"color: yellow");for(let n=0;n<$.value.length;n++){const i=$.value[n],[o,r]=i;if(r===t)return void("model"===e&&p(n))}"model"===e&&p(-1)}))).apply(this,arguments)}function V(e){for(let t=0;t<$.value.length;t++){if($.value[t][1]===e)return p(t),void(m.value||e!==SPORT_STATE.JointLock?m.value&&e!==SPORT_STATE.JointLock&&_(!1):_(!0))}p(-1)}"active"===e&&watch((()=>r.value),(e=>{m.value||e!==SPORT_STATE.JointLock?m.value&&e!==SPORT_STATE.JointLock&&_(!1):_(!0)})),useRTC((e=>{e.onClose((()=>{p(-1),g(-1),_(!1),o.updateSportCmdLoading(!1),o.updateSportModel(SPORT_STATE.Idle);const e=b.value;e&&e(),b.value=null}))}),i)();const H=throttle(((n,o)=>{useRTC((i=>{const r=null==i?void 0:i.getConnectionState();if("connected"!==r)return ToastMsg(t("toastMsg_14")),void console.error("未连接完成",r);console.log(l.value),(l.value.soc||0)>=3?(console.log("获取全局急停状态",a.value),a.value?ToastMsg(t("toastMsg_2")):(console.log("获取指令执行状态",s.value),s.value?ToastMsg(t("toastMsg_11")):"model"===e?F.value(n,o):B.value(n,o))):ToastMsg(t("toastMsg_18"))}),i,!0)()}),1e3,{trailing:!1});return{activeCmdList:N,modelCmdList:$,activeIndex:h,tryIndex:f,isLock:m,sendSportModeCmd:H,cmdOverStateQuery:function(){return G.apply(this,arguments)},sportCmdLoading:s,joystickIsDynamic:U,emergencyStopState:a,isRollState:y}}const _hoisted_1$t={class:"menu-cont"},_hoisted_2$p=["onClick"],_hoisted_3$i={class:"menu-item-cont"},_hoisted_4$f={class:"icon-wrapper"},_sfc_main$v=defineComponent({__name:"OperaBar",props:{type:{default:"active"}},setup(e){const t=e,n=useRoute(),{webIsInView:i}=storeToRefs(useMainStore()),{sportMode:o,series:r,currSportModel:a}=storeToRefs(useDeviceStore()),[s,l]=useToggle(!1),c=ref(),{activeCmdList:u,modelCmdList:d,activeIndex:h,tryIndex:p,isLock:f,sendSportModeCmd:g,sportCmdLoading:m,joystickIsDynamic:_,emergencyStopState:v,isRollState:b,cmdOverStateQuery:T}=useSportCmd(t.type);let A;return onMounted((()=>{A=new BScroll(c.value,{scrollX:!0,probeType:3,click:!0}),nextTick((()=>"model"===t.type&&T())),bus.on("refreshOperaBar",(()=>setTimeout((()=>"active"==t.type&&A.refresh()),300)))})),watch((()=>s.value),(e=>{setTimeout((()=>{A.refresh()}),300),e&&"model"===t.type&&T()})),watch((()=>o.value),(()=>{setTimeout((()=>{A.scrollTo(0,0),A.refresh()}),300)})),watch((()=>null==i?void 0:i.value),(e=>{["/operation","operation"].includes(n.path)&&(e||CloseTipModal(),setTimeout((()=>{A.scrollTo(0,0),A.refresh()}),300))})),listenAppToWeb("appSendStatusBarShow",(e=>{"1"==e&&setTimeout((()=>{A.scrollTo(0,0),A.refresh()}),300)})),(e,t)=>{const n=_sfc_main$L;return openBlock(),createElementBlock("div",{class:normalizeClass(["opera-bar-body",unref(s)?"open":"close",unref(m)&&"loading"])},[createBaseVNode("div",{class:"current-state",onClick:t[0]||(t[0]=()=>unref(l)())},[createVNode(n,{name:`operation/icon_${e.type}_menu`,style:normalizeStyle({height:"model"===e.type?"16px":"25px",width:"16px"})},null,8,["name","style"])]),createBaseVNode("div",{ref_key:"menuRef",ref:c,class:"menu"},[createBaseVNode("div",_hoisted_1$t,[(openBlock(!0),createElementBlock(Fragment,null,renderList("active"===e.type?unref(u):unref(d),((t,i)=>(openBlock(),createElementBlock("div",{key:i,class:normalizeClass(["menu-item",unref(h)===i&&"active-state",(unref(v)||unref(m)||unref(_))&&(unref(p)===i?"loading":"disable"),t[1]!==unref(SPORT_STATE).Damp&&unref(f)&&"jointLock"!==t[1]&&"lock","turnOver"===t[1]&&!unref(b)&&"disable","G1"==unref(r)&&unref(a)==unref(SPORT_STATE).Damp&&![unref(SPORT_STATE).ZeroTorque,unref(SPORT_STATE).Preparation,unref(SPORT_STATE).SquatUp_G1,unref(SPORT_STATE).LieUp_G1].includes(t[1])&&"disable","G1"==unref(r)&&unref(a)==unref(SPORT_STATE).ZeroTorque&&t[1]!==unref(SPORT_STATE).Damp&&"disable","G1"==unref(r)&&unref(a)==unref(SPORT_STATE).Preparation&&![unref(SPORT_STATE).Damp,unref(SPORT_STATE).Walk_G1].includes(t[1])&&"disable","G1"==unref(r)&&unref(a)==unref(SPORT_STATE).Run_G1&&["hug","makeHeartBothHands","bothHandsUp","singleHandsUp"].includes(t[1])&&"hidden","G1"==unref(r)&&unref(a)!==unref(SPORT_STATE).Damp&&[unref(SPORT_STATE).ZeroTorque,unref(SPORT_STATE).Preparation,unref(SPORT_STATE).SquatUp_G1,unref(SPORT_STATE).LieUp_G1].includes(t[1])&&"disable","G1"==unref(r)&&unref(a)==unref(SPORT_STATE).Squat_G1&&![unref(SPORT_STATE).Damp].includes(t[1])&&"disable","G1"==unref(r)&&"active"==e.type&&![unref(SPORT_STATE).Walk_G1,unref(SPORT_STATE).Walk2_G1,unref(SPORT_STATE).Run_G1].includes(unref(a))&&"disable"]),onClick:()=>unref(g)(t,i)},[createBaseVNode("div",_hoisted_3$i,[createBaseVNode("div",_hoisted_4$f,[createVNode(n,{name:t[3],color:unref(h)===i?"url(#linearGradient-3)":(null==t?void 0:t[1])==unref(SPORT_STATE).FreeWalk?"url(#PSgrad_0)":"white"},null,8,["name","color"])]),createBaseVNode("span",{style:normalizeStyle({color:unref(h)===i?"#95A2F3":(null==t?void 0:t[1])==unref(SPORT_STATE).FreeWalk?"#66E7BE":"white"})},toDisplayString$1(t[2]),5)])],10,_hoisted_2$p)))),128))])],512)],2)}}}),OperaBar=_export_sfc(_sfc_main$v,[["__scopeId","data-v-474e9834"]]),_imports_0$2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAABKCAYAAAB0I0BJAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAeqADAAQAAAABAAAASgAAAAAHPy7PAAAL0ElEQVR4Ae1abWhW5xk275ukScz8yEwWTbpZu7ZG22yu+9LqylDzo3QoVBgOJkUU+kOt/hCV0aE/xtDhjzE2QRgikw03ldlZRhVTRWRTZLJGjDJxsVZiNB/TmO+vXddJruTOyTnve94PU388N9x5vu7nvp77ej7e55yTKVOcOAYcA44Bx4BjwDHgGHAMOAYcA44Bx4BjwDHgGHAMOAYcA44Bx4BjwDHgGHAMOAYcA44Bx4BjwDHgGHAMOAYcA44Bx4BjwDHgGHAMOAYcA44Bx8AXyUDOJIKHYQ1N0hieRfzJin1KWPDZ4N76tvkg3zZgmw+yjVpnMW0+qL/FtPkg26h1wlSaqJ/FtPlEfVJqy03JOpqxArMp87ZMTwqIqZT1ErWrHDW1OGF5+pJ/YassHH9Z9clSP6Yts6/K8p9t/MDxZXuiGYQCiY3kYxcvXiyvrq5+Oz8//zuxWGw26uODg4ONfX19n96+fftvaPsv6gahQUGLEDQnFOFqDEpjN2/enF9ZWfl2bm7uQuCXw0s38bu6uv55+fLlj2pqappRJ2yOQxIVm/ZB+LHFixfHT5w48d3p06e/FY/H5wG/FLaPBgYGPu/o6Kg9ePBg7a5duzpQRyxhM09/qeDD/OnLKKmAikPzoM9dunTp5Z6enj8ODQ0NQEMFNn+vr69/nX1G+tKHFooIRFWoWHwuXuIXYBH9AIvpQijwcEMvJvzgmTNnvoo+QfihoKaB+Bwvlfj50IKHDx/+BBN6KxE+Ftz/2tvbP9i9e/eMkX7sb+NH8dkQP8lekI2NjWsQRHuiIH1tva2trZsQUiGUPhhwlMkOwi8EeT+H/4QLzOJjrA/v3LmzEpgFUC4Ui49iqGiSRxf4tm3bSrq7u/9i/SfLY0HWnT9/vgoown/mJluBaiUXYpLfTYVkS0JbW9sHCLYIyt2VjGz/JLNPEY7E31ifKeR7cAr8CD6CFhuqJ4jwNckFq1evntHb25vsFAkcEnZ/E06WZ3KyNckMlLuw8OrVq29gd3QFRhKtcqChoeEd+OJk+3c2qsaJ8LkgvEluamp6LxpMsBXG3gayX4M/TXainSV876cKfaY+efLk98Geo9Xy3rJu3bovw5fd2VpQqP5ihAPQaiYx0/B7+49oIYVb9ff3NyxfvpzBJiJbJGuRFeF3rhK7ojXcc7SWzs7Ok8D+ElRk6ycEVaMifC2yqVeuXPkhEAajoYRb4bedp1oxlPjJTrXRAT2tjA2UAyq+fv366vDhp9Zy9+7d9+EzEdnC9y5etG1ubv5Faijh1rW1tW8wJmjYTwjxxy1yXOo+DvcYvQWLtQ1PAmXwPxXKUy3RqYLmpysKlAPhMTvj0aNHh6OHk9gSu+oT+JwJtcESU8Jdpt1Mm5k4Ta4l9hq9FbvqV/A5HcpThYuJWMJnqhs2F0Lx1q1b5+LY742OkNiyrq7ux/A7DZroVEFzNOFg0xUGKyUJ8cLCwmXpOvP3KygoWFJWVsZFxDFShaWUXdQWx7NoKZ7TF7IyG1JcXMxYeGza3WSxCcMyxxBfv379kpycHC6IrMjs2bPfhCOPV6R+3JQxOMh0hMAUBUo/eB+Ry5chWRGQlr9p0yYeX5boIN8e0XgxURnUmG4dYqnwYStmuRT5Hn5RUVFW8fPy8iw+MYQn/JRSOshU6CO2aNGiAkwOj5msSUVFBY9OG6Qlm3kPmyl2IF84ZE3wBou/z9pRQTxZ/DgWBseaNQE+7yd2kdvYU8YJCiCqEwILPIbHKtwhBh5H7RzF7vTp0y2wsxNtuwmbKV9zttrGTPN4zKE/i23jFTZhPPzHjx9zrFkT3Df8+PJtsVWXNM1koulcwXspBncnKWJEAz4mHT16lO+AhRHUU205R44cacT1pi/IKJ06vNliLKP+A3zYthy8aPkswCbtKlxs6c9ipO2LHTOdaAuegzdi521FJvmWlhb6YqASBc2yrffa8eGkB+RcknGmKV7anIOPCTgBfj2bjRs3/puPRQHtaVV9AhnBjzKGpBjZnOgh7MAPsasGkqJGMMDE/RVm9usN8yorlSev7dq1a+yTseAxqXP//v0fw5FwlAb59trwONZ/7969j4IMUq3D8/jNDRs21I/ge7Gl6iNb9lxlvCjw8YfPsCVQ3hJfwouOPyd+Qkzeit18Eb5egfImyzdkenFBTGILn8+wvLTMgj6Px6v5eAVZnxwhscWNGzd+B39fhzImxsYY9ahHbG4QPnrx8slnXT4dzF27du1SvNXrSOw9eevJkyffg795UH5S5SWT7yn46EZc4k+aKFiCcxB8scFHq3krVqz4Pl52NCQPJ9gCHwRaN2/eXANfJHoO1BLtn+gJC23fvn3vgOzOYO/Ja3GpqquqqvoWY4GGEc34OdHjFhrKr5w9e3ZHcpRwC3xBOwY/VdCvQbmAuJC4oIjHiZ5UsRNtVzW/6c7fsWPHKlxm7oeHE9yCm277gQMH3oUPBjoX+hWofTulFW3xvbdysOOkvABdcOzYsS34vewORgmvxVevBnxQWAEfPE0YC/9JwE80san2RONC56J8EfoqnkB+G44S3vLgwYMLc+bM4SJ7CRp2mqFpcoWkM1iuah6t3HkKduGaNWtqcARfDQ9rfAu+H9/avn07v1q9BuVu5rFpj227ojXRrONC0/FNckhS9d69e3+Kk+XeeJTwEi6SF5YtW/Ym+vLtGnczT6ig0wTV3kQzfp5ofEWq45uLg4vkG6dOnfoZFu6TcMSxFtwJBvCd4A946fI6+mqR+08TnWYwmVwR2TZY7oDnoSSbE/bt48eP78I/FPAddOBXHdyUb+Gz4C+nTZv2PdhXQ1+GkjAeW9zN+n3yB2p3lXY1TwAeeR7Z2B1LcKn7NX63PxujdSxHgnGJ+tehQ4feRx+S/CqUY+eC0W7mRDJGnSbIesIyFxoXuu4pXBwvQDlZ31y5cmUNJvBPeOxsGUMdy+Enpgt3mrM7d+5cC3vuZC4yngpa5FzA9thmzGlJ2h2Bxr5UBsxJYND8zaQyeA5Q5bxVq1aVYZcvKC8vn4X/nYrdv3+/GRP8H5D8Oez6oL0j2o20x5TZxpv8INTeQC0+sYVPbKucpLwtW7bMXbp06YulpaWzQHwvdnDz4cOH686dO8dHIuET1yrrhS9sphThM3YqcSwu8178eGuWt2fPngWQipKSkpk4vTowwU04dT7FY1wn7Cy+jZ/1/VAbP4qpCwebifiDFdmaYKUkgWT4dwUDoIpQTrYmWXUKUhMNE080dvrU7grDZ70mZLj38KKhTxIpLGFzHCKZ7cLWJKNqdKI5DvomhvBHJxl1jF34il+LhrEJXwtdqfAVv/qgS+rCAWRDSIQVDop1HCSVgxbRmiDaqF3BivCgIGE+TtifviwWDVRn6/1E047j0xgtrvIcE8dHP1S/2Dr6ob3EYtOfH18+Fb8wbSp8+pa9/KecZjrR/mA1AA1MRGqStftoRxsGKpIYmFW1yZfFgqknto5+JCKHPoKIph1tqLSxuCLY4sMkcLJVL2z2VR3HxjI5pip2uxCJIeU4hc1UMdgYUZ2eZDrRRLUDUcCso4pETrQNFEWvnfZUBctUZabyYzFQPU7U5rcXPrFJYhi+xdQ46MvvbxzoSIEYmjjaUzRJLBObZcVPWypF/oVpU7UpNqXDPdP4K9A0uk7ooiCUilib+vEYAIPyK+utTgALqBAuU2IqDcOXf5HqHwMhZMN8IlFcGoPFtGORHX3Jtx+X9RqT7JhmJBY4I0cjneVPAStVsDSTDQOi2MAUvG0btor2V3i0Vl7YwlUqDJFqsdWmNBr6GKbwLbbGI19+PH+Zdqniy/eEVEFPaMiwQn5tavN0ryAUoK3z51mOKsKhPfMq+9NE+GqLimnt/DhhZWEExa826zejvAaRkZMEna1/m7ddbFA2b23SzVtMm7f+LKbNW5t08xbT5uXPj+cvy86ljgHHgGPAMeAYcAw4BhwDjgHHgGPAMeAYcAw4BhwDjgHHgGPAMeAYcAw4BhwDjgHHgGPAMeAYcAw4BhwDjoGnzMD/AQ/bEMaVzF2ZAAAAAElFTkSuQmCC",_hoisted_1$s={class:"icon-wrapper"},_hoisted_2$o=["src"],_hoisted_3$h=["src","onClick"],_hoisted_4$e={key:0,class:"speed"},_sfc_main$u=defineComponent({__name:"Network",props:{showType:{default:"1"},iconWidth:{default:28}},setup(e){const t=e,{networkStatus:n}=storeToRefs(useDeviceStore()),[i,o]=useToggle(!1),r=ref([new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAYAAAAc0MJxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASqADAAQAAAABAAAASgAAAAA+zYVIAAAGP0lEQVR4Ae2bbYhVRRjH76play+mtbVpa4FGERVGWVHRVmYUUQRqGOSXiKiWCIOohF5EIaUgSKIvfRCEkpKKiF78oBlRaGmmBaa26Qd1V0xT1/fc2++/3COzj3POPXvuuS9u88CfmXnmmWee+d85c2bm7BYKQQIDgYHAQGAgMBAYCAwEBgIDgYHAQGAgMBAYCAwEBnJgoCkHHzV1USwWFXMLGAPGgovBftAFdiptamo6SPr/E8gZC54B34AjoJxswuAt0A6GDWrGGGATeBT8BHpBVtlDw4VAM29wCYOaDNaAPKUHZ/PAyCxsNdQaxSAuYhCLwP0xgzmKfjlYA7aX0E16Hmgt4QpStW8DPvkb5VOsY0t9lQ2vg6TrwFZg5QSKj8F0cG7agWA7EbwKdgIrepTngIaaKGXHRsAPgQPAihbviWUdJBjQfgR4GewFVj5BcU5C8+pXEcBwMCEBer0XqD8DrAOudFG4N88o8TcKLHE7Ib8LXJVnPwP2RQB6PSfJ15FTjFrA+pKxSBsX1eWd4ns20KMnkq7J2/+A/CkAcBwkyUmi5BxDkfU2SPUoYDcUtIIBv8Vo8yCoL0mlQa8kkHLSj6hyvwTORP6LQL67gRb5SA6T+RMsAo+A88v5q3s9Qc4EaSQVUTi6G/yYxqFjc5D8m0BHncYTAhsJtBCnkUSicKDHalkaRwk22mR2NBxTBKWjQlqJJQoHt4DtaR2lsFuMzYhKCMvtwEgg1xPI05UE47R9nHzf9sHRRVntxEXyZqAbg7NBK7gN3Ap8Y9LCLaIOgfoJJOkA61tH/kAfJ0kzSv7eNQ1XUZ4CYnfT1GmvNAf8AyJRXI2xuBPIE1FUTrqf/FSnbLOxREU/OQ0WAG0znot0aVLsdS3zA1gOUm030vityIZARoPdwMrzKLTWxElZohQYjSdkCZB22vGflaWtr43vefbZJenmU3mBMfid8jvgRqMfcJFT/ha3EYPXozcdPAB0Q7AD/AI+xbaTtE/IHycj1F8I+iag44CVdkWHsuIZ5Y4Sf+OBNpw+0abzJTDUbZNXfkhWRwSktu8Bu7h+wK+5MqvfMu0mUa83m0/0mGmG9foq66aDqA5gRQv4JVFQ5HOdUfKLz4eBZs/7QFfFz4KNYEHUbzXSTGsUQekmcp4noNeYTfoSUjXB/2f030aqF4gu8nSjqbVJb8fxpNuo+5e0/kJAOnxaWY+iH/GUqzGjtMeaAb4Fx4AVEbYWTAN2WagdeXR+O/DJHTYKjHIlCn9tYLWv8xid7rYqfvPacZUt0+kwoJljZbGvMUa5EYWvK0GW85/WTb0Eaid0OAtY2YdCZ61TBH0uROGnGWwAVjpR6BOUTgDaquiK53tgZQuK3DafpwzUVdDRGKBfx0rs8QLDvIh63XZK+XPgPcOhf8Fjr4N29YWOP/R0/iu62A0edRUThQ99RbFHJH0cTVyoqf8IuPJFJSz1e0vFOaI3LdQzTH2Rcgev4hNGn3fxHhzaI9Ir9Kv+k2QulWsdg71OfsDZVETh9VqP5yPo5kKip+qkSl9w42QSbVc4lesY/CynHGXt27QTuy+jyrgUmw3UCblIWqJ8nTWjvNNXkVI32rSPe5SuNv42mXJNipUQVZMA6cQ+dn/5OmZ26hFt99WVdD3MsszHnNOBKHvxpj+y8MldKGf7Kkq6XaSZicp8e5AQUN5V+4zDS025JsW0M+oA0WzLENFw2ng3o+gPg27HZ5eTd7O73QL5y0w5Kh4jYz8eaJPZ+JOBdSOPfZTdbOpvBvQDJAo2ugreAyJxf5TEtr7Kxme7UPjOBN5C+Umj8xWnohzlq2g4HT9lHjNqCH42R9OilO4gHRc3YOr0FWZryTZKBveM4pXeCyHzDSm6RdUViu6c+h2hKN9M3SoQt5YZVw1QJOiKZ1Q0DHzpEOyTQyh/Bl8B/ZWLK0edwuCeURFRpI+BFU45yjaTuQHcB3RFHYn2TTOjQqXp6bCY942RR1D/nSAy3gDaWiTJb1ROBroxKCYZpq1Lu49K68/a9aBYbZWl8sYYfawasrRX0p8WLiSdBqaAy8GFQBtT/eHGUrCkZFvAVrceZwId4oMEBgIDgYHAQGAgMBAYCAwEBgIDgYHAQGAgMBAYCAzUl4H/AFz30urUWo0UAAAAAElFTkSuQmCC",module.meta.url).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAAAXNSR0IArs4c6QAADiVJREFUeF7tWwtU1Ned/u4MD4kjYMQIaENQVMQELBsVu6hxjwcxiYhxiSzVpO0aX9H06MYaN21KTyIm2NQ1xDVse+CsxiQqBpGYRHz2RE0f0tSlPCIOvmqcKQITXzgM8789n7mkE2SY+Q9SdvfM75w5f3Xu3Mf3/+73e9yrgN+8RkB43dLfEH6wdJDAD5YfLB0I6GjqZ5YfLB0I6GjqZ5YfLB0I6GjqZ5YfLB0I6GjqZ5YfLB0I6GjqZ9b/VrCklEYABqvVGnTjRlCApjUFhYeHBzocjgCn0+m0Wo32mJgou8Nx2RkVFeUA4BRCaDrW06tNe5VZUspAAGEA7gXwLQD3a5oWCSDK6ZSDNc1pklIOkFIGA2gzGAy2gACjTQjRZDAYLgE4D+ALAH8G8CWAa30J3l0FS0rJ/oIARAMYA+BBAP+gnvcDMOl89WQXQToDoArAZ+r5OYAWIUS7zv561PyugSWlDAUwDkAagCkKrIgeze7OH7cpplUCOKQ+DX8v0HoMFreRYs+zAKYDIGiGuwxS5+4k9QxADYDtAD4AQNBu9ea4PoMlpeSWehhAFoAnAXjLIi6UHwp3x5Nr5Fw6PgRbD+DcnjsAvA/gbG8xzSewpJTUo4UAspU+eXqh1J5rACwA/gLAqv7MfyMb+H0IADoEOgMCT4cwBMB96jtP4LGP3wIoArBLCHHd06T0fq8LLCklPdkzAH5Az+bh7ROQPwE4DqAOQL0CiILNhZFZHWEBGdaZWf0ADAYwFMBoAN8GMAFAvALP3VpvAjgCoBDAR3eTZV6BJaXkW+Ukf6y2XYCbmVKAGwAcUBP+I4CLd2PCatuPAjAVQLqSAIYljN26MjOAjQB2CiEa9bKoq/begvU4gDUAvuOGTWTIKQD7ldhWCSGu3o0J3qHsUvJFcYtOAjBTAedOL1sA7AaQJ4Q429P5dAuW/Gpi/wxgPYAH3AxGHaK4FgOo5RYTQnBb9aqpbIDMmgPgaQATVYzXedxWAHsBvCaEoCPw2dyCxQDTCWeGEcbNSjc6D0LXfRjAf5JRQghOymtTAWyHTnX87ran1Au2lDIBwHwFGgPizkbmHwTwlBCCWuqTuQWrrq5uwAPDh+8JDgz8py56pgaQTRuFENQoj+bChIHK41G8GX4w4qfuUO/sjMyVx7SpKJ2C7dFUUPwEgBXKGXRem0PTtBVGo5HC75O5Bevkyc8jHnzwgePBwUEUVVej66fQ7/BGl6SUgwDwzY8H8BCAkcrLESjmhNzqnAffPtMXgkPAmA9WA2C0TkdxwVPQqWSD43B+1LNvrK+trW1DcHDwj3xCqnNnrp1UV1cHjR49+g2j0chQoSPG4eTXCyEYNbs1xSKGFtNU+kO3H6viKL1zvaJA+71Kb/hs7m6rqm35UwCzADAEIWgXAeQIIY7pnUBHe08CT0asAjBWDbZZCPFrD0ANU6I7VzGJQebdMLKOlYhPAGzlszumSSmHU6OUBydrS+iEhBDUWp/ME1j8nrkfdYbRNjP9Lj2dioPIwnkKXL0VBm8XwMUSNDLkVwBOCCGodXeYlJKsCldpFedOXfTZvIqzPPUupWTc8zqAxwDc090OVQkwF9cMoEmlO3zz1K7+6sVQ5/h3dwEnNE1rv3z58mcNDQ3Lp0yZwq3Z6+FKj8GSUjIF2QDgH7tZHPM/asbv1IfpDz0qwSJwZAu9IvNDblumONz69MR8Mke8bW1tbc4rV66c/vLLL/+rsrLyj42Njb9dtWqVrrDF08t3932PwJJSJqoQgqmQO/tDh8YAOAeAkT3LxW6ZoNIrJtUEiWA9JqXMtFqt4RaLJa+pqWmP2WyuX7x4MXWs1xnllcB7egNSylIAmW7akUmbAJQpt++zXkgpw9rb2xPee++9MLPZfDg3N7ejL7Fo0aKQhQsXhpaWlqYMGjRoislk6n/x4sXaIUOGVFy/ft26du3abj2npzW6ft9TZjH+Seo0IBfCYhyT2E974n26W8jWrVvvj4qKmhEZGZkRExMzLigoyORwOEwGg0FommY3Go3X6+vrbQMGDPjvkydPHn/yySc/VYGvHny+0banYDFafsOlR26LX6jInjmjW1OeilE8vS291g31aXTn3VRnhpKSknkTJ05cGhoammwyme4hQF0NpGkapJT2lpaWLy5cuLB3x44dP8/Pz2ew65P1FCx6r+cBzFYHC2+rwluXFQcpJcWb1QLW6Kl3zOMYxdPrEWgKNU90/kcFoL9xdffMJ2tqapYPGTLkZ/fee+9AIbyf/q1bt5wWi+XXVqt1SUpKCmtrus370dx0rRjCRdPjWbvadlJKllAyAHxXCTZBo4C7M7vdbrfW19c/89BDD1WoRgFVVVXPjBw58vXg4GB6Td3W3t4Om8328bFjx5bPmTOH9S5d1mOwPI0mpSSLXlCpD7ebV3bp0iXz3r17H1u2bBmPvVBWVvb0I488UhgaGkom+mwErKam5oOkpCQ6Jl3RfK+Bpdw/c7M3Vdzk9VhSyvbz58/nxcbGMr/Dxo0bo7Kzs3dGRkam+oySyw8dDoe9vLz86blz57Jy4rV5vQCve1QNpZQ8YN0DYEQ3v6Xn5PblG+a2ZPRvuHHjxo3nnntuVlFREWvp4sSJE/+SmJi4vX9/SuRXdu3aNXnw4ME/CSFEUlLS0NjYWKZkt01KKU+fPn2ltrbWajQanQaDQUZFRQXExMSEmEym+4ODgwPNZnPVihUrUj/66COvK7q9Cdb3VPW0K6wo4kyI+aHXJGgEisCm1dfX3zdq1KjbIUlhYWFgQkLCh6mpqTyT/NqOHj16dNq0aY/zrsSWLVt+mJWVlWs0fpUdaZrmqKure33atGn/MX369H5hYWER1dXVzWvWrNEiIyOfTUhI+KEQwlFUVLRk2bJldEpeWW+CxZNplnNdNYbhAUMNVg14h+FGh0NQlVOuNuzVV199YO3ataxjkSX9bDbb5fDwcCbEt62trQ0VFRVPxMTEHNU0bWxlZWVDWlraZ8OGDeOxGX/T1tDQ8EpcXNxrO3fuLJw+fXp6U1NTw61bt7LfeeedWy+88MJek8k03mKxbBw6dOhqr5Dqrp7lbQfu2kkpuTjmjCzVMClmqvMySyV6ysYLFiyY8dZbb318zz1/y88tFsvnn3zyyXeCgoKyoqOjsw4fPjw3KSlpXXp6Ok/FXcHK37Nnz4HZs2dPZsy1a9euiuzs7BlWq3VPREREhtls/mDUqFEsR3u1FXuNWWrSPFDgQQKfPCww6wGKfeTm5m546aWXnu+IqaSUWlVV1VurV6/+UV5e3ntxcXGpBQUFE6ZOnXpffHz8/sGDB/d3YdaGsrKyIxkZGSnsa/v27fvnz5+f3tzcXBoeHp5ZU1NTm5+fn7l169bT3pCjV8FyEVyDr1eF8vPzt6xevXpJR182m6314MGD861Wa+XSpUvPGQwGHD9+fGVLS8vbycnJu6Ojo6cQrHPnzr0yfPjw10pKSjZlZGRwy7UUFRW9GBsba87MzNwXGho6sba21rxly5aMgoIC3pnwaH8XsLrZqixXc7t2pDtXOzNvyZIlyzdt2lQQFMQKDtDY2HgqJydn6sCBA415eXmPtrW1aU6n8w+JiYn1dXV1/z5ixIif0gOePXt23YgRI14uLCwMWbRoUcC+ffuMp0+fHjRp0qSV48aNWxoUFCSqq6s/XbBgQdapU6dYTPRofQaWOo1ZBoAnMozoeQjK2v47rinOypUrh65bt+5MSEgIAZWHDh3Kfeqpp36+f//+CREREWCQyfDhxRdfvDB58uShOTk57/fr12+AYtarZWVlz2dkZIxsbGwMa2pqmhofH8/CInVNs1gsv4qOjl7sESXVoE/AUgFrrorsXdMehhELhRD7OhZQXFzcLz4+/mxKSkpkU1NTa25u7pR58+YZJ0yY8H5AQMDttMfpdMrDhw/vTU9P/z4LgsnJyQlms/nluLi4DaWlpRWZmZmTOwNit9sdJSUl+fPnz+dJkFfWV2DxpIf3IboKWLfx4knH/Yjc3FxDdnb2c6NHj9547ty5j2NjY2eWl5dvSU9PXxwQEPD1/G022+8GDhz4eHl5edrMmTPfvnDhwk+oWaWlpQcyMzN5P+IbdvPmzUtvvvlmypo1a7yuQvQVWLzX9aE6P+y8Dt7oe8L1TPLdd9/9dlpaWjmro+PHjy91OBwLAwMDeQb5tdnt9pvNzc3beNUoJCTk3wIDAz+UUh66ePHi0vj4+LhOg2gVFRVvzJgxY6VXlOrjbRijbtmQYZ2Ndyaeca1eZGVlGZcvX74pNTX1WYPBwMMNd3e1mOnc1jD11LjlO5dy6uvrvyguLh63fv16Xbdr+opZXCy1grrlOgeedv+rEIKV1m/YnDlzBq1bt+7gmDFjeG/VZ7PZbFePHTu2aNasWbqSaA7YJ2BxYFUHY6rBK5bMkBnh89YerwXwstsdduTIkcixY8e+O3jw4Ed8Qctms12/evXqqpiYmF/68vs+A0sBFtjaisibzuumQSYTtwQPF7r9TwK7d+8eFh0d/cbDDz88JyDA3Z26O6E4f/78X06dOrV89uzZu3wBqk+Z5euEO35XXFz8aGJi4i+Sk5PjVChCqXLtVmqaJltbW68ePXp02+bNm3+spxzT1fz6lFk9BYwHswUFBY9mZmZOstlsY+x2+1jWqlpbWy2RkZGVJ06c+PO+fft+uW3bNmphj+3/OliuAPTPycmJCAsLMx44cODamTNndHk6b5D8/wSWN+vtURs/WDrg84PlB0sHAjqa+pnlB0sHAjqa+pnlB0sHAjqa+pnlB0sHAjqa+pnlB0sHAjqa+pnlB0sHAjqa+pnlB0sHAjqa/hXKTz6XLjqHsQAAAABJRU5ErkJggg==",module.meta.url).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAAAXNSR0IArs4c6QAADcBJREFUeF7tmgtUlGUax//vDAJxERhFwFBTaK00oVwv6KpIum3gZZVww8212kxd7XJOWVHbNnW21na3mx2zPNW2XvdAwhaJ6Ol4WcQNs3XVAhNFOnEHByEGYWDm3fOfffEgzjDzcZF2zzzncMSZl+97v9/7vM/zf573E/CY2wSE2yM9A+GBpcEJPLA8sDQQ0DDU41keWBoIaBjq8SwPLA0ENAz1eJYHlgYCGoZ6PMsDSwMBDUOvuWdJKXlP/uj27Nmjj42N1ZvNPl6cs8VitdXUmNvj429oByAB2IQQ/PcHYf0OS8HxBRAIYBiACKvVOkQIEdrS0m6Q0uovpRzs5aVDe7u1xcvLp8HbW1cvpazX6/WVAKoA1AJoANAihLANFLl+gaUAhQAYDmAsgOkAfgxgFAADAMLTqYfuOofOntQMoB5AGYDjAI4COKn+bxJCWK8luD6DpQBdByAaQCyABACzANzQxw9EcEcA7AXwLwDFAJqvxXbtE1hSSkK6DUAqgHgAowH49zGkrpczAygBsAfApwBOCCEa+/OevYIlpfQBcDOApQDuBRCugnd/zrnrtRnD6gBkAdhCbxNCtPTHBHoES0qpV96zGMBqN7aaPbMxQAPg6tMrGIu+V5+1qofzBjAIQJBKCIx7TAz0XMY4V/MtBfA+gI8AnOnrZODq5lctkJTSD8BdAB4FEAfAnvadWJsCUgiAP1+rrVOtYDGAWwB0SAVeiz8BChITxBjlveNUshiigDq7JxclH8AGALlCiKa+8jJNsKSUwQCeVN7E350ZIZwB8A8A2QBOAbhIKFozmPJiAhwMYDyAJABzAdyoPM7ZHC4A2AzgNSEEt2mvzS1YUkpujTkKFAO4I2Ma/w7AfgC7AHwuhDD1eoYOLiClDAXwEwA/U/OiJGFocGQFAP7MRRNCdGz3Hk3LJSwpJeNIMoDn1TZwdCMKR2alrQD+LYRgPOp3k1Iypk0GsFxBI0RH9g2AV7iIvcmY3cKSUtL97wPwghKYjiZyAMC7jA8M3tdC73SehNJ3hHQngF8rbedsQd8C8IeezrFbWCaT6dbg4OCPhBA/cnB3eg/T9StCCMYnlyalZEbjAnBbM8sx7lHN8zPOhcGeW4WlDbMmEwTjnFsljpSSWm8dgAVOdF5pc3PbYn9/b1YDms0pLD5YzYWLC4eEDN6q1+m6CszzAP4EIMOd4CmlZHYbobLaLSo40xs6Sh/C6wyLwZkZ8xyArwAUAagQQlBqdGtSyggA9wNY42A3mBvN5tVBAQEMF5qtW8+qr2+KDQryyxJCdC5ZOPmXAWS6CphSShbOrAuZFCYBoIcSHD2pO93UocsoKQjoNIAvAeSxPhRCMJE4NSklvZbVRFoXDVjS3NZ2t793H3sWZ6KCO1dohdoy1EpGIcRhF5Olx/wUAEUrsxZXuy+MieQLtf0pSS44iz+quuB2pGimzGBm3iyE2NjTibiTDamebwVAMUhVzK3h0KSUjD/TAPwSwHwAzrJTT+fb8XfcplTpO5WnsTK4qu+lgn+U8i7G2EIhxKWe3twlrI4L88bdZREp5UiVNSkYw1wo+47LUrwykHcoeMoUAqcAdTW3dpvNdqGmpmbbli1bXnvqqacqegrB3b9zNSG3riOlnEqlrDSPM3HIjMZsx7YKhSJVfY1q7vFzfs9SiqBY5jC+Md5NVHGuo//F8CArKysbTCbTpuLi4s9Onjx5xGg09kvx3BlAr2FJKWcAeFuVIs7gcusyxnzGVgpjDcE5K32UxGCGZOyjHKC3zrHZbDd9//33F8vKyjLNZvPbBQUFpx955BGCviat517BUpLgY9XocwSKWYtpmqBYRDdpFYQq7lC6jG1sbJx5+PDhutLS0qw1a9ZcUSDHxcVdFxkZOXnChAk32Ww2nDhx4qvMzEwmA8LsE+stLGonQmCq7mxc6UMqhjHVMzb12lijCmGfMsUqnnzyycAZM2bE+fr6ro6LixvR0tIyzGazBet0OpuUssHb27smPz+/VKfTbfj888+/NBqNvZpHb2FxxT/p4lnMNu8AeFUIUd4dIVWgM9tyyzEmEUKrq4yVkpLinZKSMismJubRiIiIOG9vb4OPD/uQV1tLS4u0WCy1FRUVh48dO/bWsmXLKHuYUDRbr2DxblLK2cqDGJC57f4KYJsQgi2Zq0z1wyaoWMTDDGowZkAmBgZp6iH21ZkAvhBCML5dtuzsbL8RI0Y8EhER8djQoUOH6XQ6t57BZrPZTCZTRVlZ2atHjx7duHLlSrt3ajG3buTCO/iQVPhskzB9lwghrooTSuAyULMUiVHHYsx+XZuHzIr0zouXLl06vn///l/NmzfP3sVgb+vs2bMrIyMj/+jr69ujHr/ZbK6vrq5+OCoqarsWUBzba1ju3FBKyXqQlUAKgKHu3vfMmTP5O3fuTDQajfaDiJycnBVTp059MyQkhFu3x1ZbW/tdXl7e2uTkZIYQt63fYUkpWfKwluSWc9ssFsvFkydPPjhp0iQ2EvHOO+/ckpyc/NnQoUP7pHSqqqr65/PPP5+8efNmHuS6Zf0KS0rJHtMH3fTCHE5SSonz589/vXXr1p8bjcazGzZs8JkyZcobEydOXKnX6y/PuaKiAqdPn/7GYDAU1tfX3z5mzJhRI0eORHl5OYqKijBo0CBuXfs9mEX5+5AhQzBu3DhYLJbm48ePvzx9+nQupFs6rd9gqTrxdQCrnCwb4xBPY6joWSAz4FK530LxWV5e/tHIkSNZBOODDz4Ys3DhwiyDwcDEAJvNJgsKCo4eOnRo9YkTJ6oXL17ckpOTM3j58uXTZ86c+VZtbe2+8PDwZxITE/1DQkKsOp1O1tXVCb1eP+iOO+5IXbZs2VOEVlFRkbtjx47l69atYyXh0voTFnM5S6DfdJkFj8H+pgpharRKIYQ9lSvlPqShoSEmJyfHtnTpUvbzUVhYODcyMvLTwMBA1o5obGysef/995NiYmLqo6King0NDTVUVVVZ6+vr/SdMmDDrwoUL5ceOHSvw9vZGe3v7M9nZ2e0JCQlPBwUFhQUEBETHxsbe5ufnB5PJVFlaWjp/4sSJbP+4tH6DpR6epVC6OnzlR9RdTwCg6udLHs7cn/NiliVEr9zc3LVz5sx5Xa//b9lZWFj43bfffjs+NjZ2bkREBLsPdm9rb2/n1hPcbm1tdmXQarVaZ7z00kuDV69enREaGhrMbgAh2r9sbW3Yt2/f6gULFnDxXG7FfoWlgPG9B2ZBtovZomZPzG174IEHAufOnbvtnnvuYW/KbtXV1RXp6elToqOjffz8/DZNmjTpZinlcH9//8vFthra2tbWNv3FF18MIazhw4dfcXzX3NzcnpmZufncuXMPG41Gl63rfoelgPE+XFSXE+pKcf369UHjx4/PSUpKYp+swyNs+fn5OYWFheuee+65qh07dgQIIZZMnjx5ocFgoDd3PNdlWKtWrcq4/vrrr4DV2tpqy83NTd++ffu9GRkZLt/IuSaw3HYjBwNTUlICFi1atCU1NXVR56/5oJcuXSpraGg4VVhYeCAxMfGNXbt2TZ02bdon4eHh7FbYd1qHZzmCZTab23ft2rXp/Pnzj/1gPMsZLFX6UF4sUfXhQbVVmR07TL9///6VM2bM2Ojl5fhNAYvF0pKfn/9oQkLCzpKSkt2jR4+md7mERS23d+/elQsWLMj4QcSsbkAxvvA88plOL7YxyGay59/5oPbIkSN3jh07NttgMLDgZja0NwCDgvj+CERra2tbVlbWM6mpqe8WFxfvj46O5otzLmFVVVVVFRUVzUtISBj4bNjd9pNS3q7eheha47GYfkgIcfm4atu2bZHz5s37e1BQELumyMvLK/Hy8ro7PDzcevDgwYgpU6aU1dTUnCsrK5vKccHBwXaKKqlMS0tLM6xdu/aqmFVXV/fxe++9d39aWppbJ+gDFrOklDxy/9ABUHoXX+agxLDbQw89NGjJkiW/nz179uM6nU5/6tSpioaGhgVRUVG1tbW1Nh8fn0FHjx5NnDlz5rOjRo3qXA5RPySnp6cHzZo1a2NYWBhb1nZrampqPHjw4O/mz5//ZneL2vm7gYSVCGC3k4k+LYTguwmXbdOmTTckJSXljRgxIpIfUleZzWbZ3NyMwMBA+Pn5dZUNHX/bkYGv+L60tPTgCy+8sOjDDz902EpyNK+BhMWMRVg87OhsFK5JQgj26q+wjIyMlISEhHSDoSPZuesTV46rrKys2b179y9WrFjBhOK2DRgszlBKyfettqljfXoAQf1WCEFFfZWlp6frJ0+efF9YWNjbvr6+/5XhGq21tbWxurr6wVGjRjEDarIBhaWADbdYrFP0euj1ev0xIQSLa6d24MABLx8fn1WjR49+MTw8nK8cuW01NTXVRUVFz8XHx7/njlToeuEBh+X2k3YaGB8f75WWlhYzbNiwx6Ojo1MDAvj6hHMzmUwoKSn5S11d3Rt33XUXy62B6cH35GH78G+E0WgcGx0d/crChQtvbGlpifDy8gpgS8ZisTTp9fqKrKys08XFxU+sX7++W491Z07/k57l7MHCwsJuXbRo0Tir1WrbuXPnV01NTZqKdlfA/q9guXrY3n7vgaWBoAeWB5YGAhqGejzLA0sDAQ1DPZ7lgaWBgIahHs/ywNJAQMNQj2d5YGkgoGGox7M8sDQQ0DDU41keWBoIaBjq8SwNsP4DcSEOl2R1NrUAAAAASUVORK5CYII=",module.meta.url).href,new URL("/assets/icon_wifi-BT0qUQdU.png",module.meta.url).href]),a=computed((()=>{var e;let t=3;return t="4G"===n.value?0:"AP"===n.value?1:"STA-T"===n.value||"STA-L"===n.value?2:3,null===(e=r.value)||void 0===e?void 0:e[t]})),s=ref("0B"),l=inject("webRTC");let c=0,u=0;const d=e=>{c&&window.clearInterval(c),c=window.setInterval((()=>{var t;null==e||null===(t=e.getRTCTransportSpeed())||void 0===t||t.then((e=>{e.forEach((e=>{"transport"===e.type&&(s.value=calSize(e.bytesReceived-u),u=e.bytesReceived)}))}))}),1e3)},h=useRTC((e=>{"connected"===(null==e?void 0:e.getConnectionState())?d(e):null==e||e.onConnectionStateChange((t=>{"connected"===t?d(e):["disconnected","closed","failed","error"].includes(t)&&c&&window.clearInterval(c)}))}),l);return onMounted((()=>{"1"===t.showType&&window.setTimeout(h,2e3)})),onUnmounted((()=>{window.clearInterval(c)})),(e,t)=>(openBlock(),createElementBlock("div",{class:"network-wrapper",tabindex:"-1",onBlur:t[0]||(t[0]=()=>unref(o)(!1))},[createBaseVNode("div",_hoisted_1$s,[createBaseVNode("img",{class:"icon",src:unref(a),style:normalizeStyle({width:`${e.iconWidth}px`,opacity:""+("0"===e.showType?.27:1)})},null,12,_hoisted_2$o),createBaseVNode("div",{class:normalizeClass(["menu",unref(i)&&"show"])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),((e,t)=>(openBlock(),createElementBlock("img",{key:t,class:"menu-item",src:e,onClick:e=>(e=>{o(!1),window.setTimeout((()=>{const t=r.value.splice(e,1);r.value.unshift(null==t?void 0:t[0])}),300)})(t)},null,8,_hoisted_3$h)))),128))],2)]),"1"===e.showType?(openBlock(),createElementBlock("span",_hoisted_4$e,toDisplayString$1(unref(s))+"/s",1)):createCommentVNode("",!0)],32))}}),Network=_export_sfc(_sfc_main$u,[["__scopeId","data-v-64f4e390"]]),_hoisted_1$r={class:"opera-menu-wrapper"},_sfc_main$t=defineComponent({__name:"OperaMenu",setup(e){const{sportMode:t,series:n}=storeToRefs(useDeviceStore()),i=inject("showMotionStateFn");return(e,o)=>(openBlock(),createElementBlock("div",_hoisted_1$r,[createVNode(Network),createBaseVNode("div",{class:normalizeClass(["more-btn",("B2"==unref(n)&&unref(t).includes("-w")||"H1"==unref(n)||"G1"==unref(n))&&"disable"])},[createBaseVNode("img",{src:_imports_0$2,style:{width:"34px","margin-left":"10px"},onClick:o[0]||(o[0]=(...e)=>unref(i)&&unref(i)(...e))})],2)]))}}),OperaMenu=_export_sfc(_sfc_main$t,[["__scopeId","data-v-d70851ec"]]),_withScopeId$c=e=>(pushScopeId("data-v-faee09f7"),e=e(),popScopeId(),e),_hoisted_1$q={class:"temperature-wrapper"},_hoisted_2$n={class:"tip"},_hoisted_3$g={key:0,class:"tip-item",style:{"margin-bottom":"4px"}},_hoisted_4$d=_withScopeId$c((()=>createBaseVNode("span",null,"|",-1))),_hoisted_5$a={class:"text"},_hoisted_6$8={class:"tip-item"},_hoisted_7$7=_withScopeId$c((()=>createBaseVNode("span",null,"|",-1))),_hoisted_8$7={class:"text",style:{color:"#d08706"}},_sfc_main$s=defineComponent({__name:"Temperature",setup(e){const[t,n]=useToggle(!1),{language:i}=storeToRefs(useMainStore()),{series:o,mode:r}=storeToRefs(useDeviceStore()),a=ref(0),s=ref(0),l=inject("webRTC"),c=computed((()=>({width:""+("zh"===(null==i?void 0:i.value)?"60px":"105px"),fontSize:""+("zh"===(null==i?void 0:i.value)?"14px":"12px")})));function u(e){return e>127?e-256:e}return useRTC((e=>{null==e||e.onMessage(throttle((e=>{if("msg"===e.type)if("G1"==o.value||"H1"==o.value&&"-2"==r.value){var t;if(e.topic===RTC_TOPIC.MAIN_BOARD_STATE)a.value=u((null===(t=e.data)||void 0===t||null===(t=t.temperature)||void 0===t?void 0:t[0])||0);e.topic===RTC_TOPIC.LOW_STATE&&(s.value=(e=>{let t=0;for(let n=0;n<e.length;n++){const i=u(e[n].temperature[1]);i>t&&(t=i)}return t})(e.data.motor_state))}else e.topic===RTC_TOPIC.LOW_STATE&&(a.value=u(e.data.temperature_ntc1),s.value=(e=>{let t=0;for(let n=0;n<12;n++){const i=u(e[n].temperature);i>t&&(t=i)}return t})(e.data.motor_state))}),1e3))}),l)(),(e,i)=>(openBlock(),createElementBlock("div",_hoisted_1$q,[createBaseVNode("div",{class:"temperature",onClick:i[0]||(i[0]=()=>unref(n)())},[createBaseVNode("span",null,toDisplayString$1(unref(s))+"℃",1)]),withDirectives(createBaseVNode("div",_hoisted_2$n,["H1"!==unref(o)?(openBlock(),createElementBlock("div",_hoisted_3$g,[createBaseVNode("div",{class:"title",style:normalizeStyle(unref(c))},toDisplayString$1(e.$t("bodyTemperature")),5),_hoisted_4$d,createBaseVNode("div",_hoisted_5$a,toDisplayString$1(unref(a))+"℃",1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6$8,[createBaseVNode("div",{class:"title",style:normalizeStyle(unref(c))},toDisplayString$1(e.$t("motorTemperature")),5),_hoisted_7$7,createBaseVNode("div",_hoisted_8$7,toDisplayString$1(unref(s))+"℃",1)])],512),[[vShow,unref(t)]])]))}}),Temperature=_export_sfc(_sfc_main$s,[["__scopeId","data-v-faee09f7"]]),_imports_0$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEUAAABFCAYAAAAcjSspAAAAAXNSR0IArs4c6QAACJZJREFUeF7tnHtMVFcex7/n3HkwA+UpWwViqeyKKSUzg1ZD1nbV1Nal4h+7/UO7rVYxVG0robWKbYra1jQtLQ0+UrHVLGrqbrJubFMfbMK6SY27xjhDIyXuQvoQBltEBIRhnudszuVRyvPOG2TOnzO/c+/v97m/8zu/3zn3XIIJWlNurk7PmFqy2aS7jJGJ5Cfr/zFqNXM5ne5bgDOrvt45np5jGmk1GpcTSn/HGTOA0mTCeSwHpiwUAC4CtDPOm4gk/VvD2Olki6VlNDgjjGzKyfk15fwYAAMB9EKAT9bH74Newh4GMA50AdifZrGUDr/ML6BYFyz4LWHsHOH8PubDDadaFzUhcHP+dwfnBQ/W1nYM6D8I5abJ9HsGnJUIgYffS74x/qOKphR3Of9Hmtm8gvQPChnKrQULMp0ez78IMHP64PgZVr8j/CXVYlkjfiW7AboxJ6dc4rxoOgyZsfyGAN2UkOUzzeb/kOaFC5Ooy1UP4FfT0UsGING+ALzvE4ulmNw0GJbqVKp/9rDp7Cf9uQYhFgdjy0hTTs5uPSG77NMciuwxhNhdhMwhVpPpiIaQDc5pNOOMFVeiKIUDeIC0mEx/UxHyR1cECmIlCR2SNDcCZYjbCCidlGZGoESgjJ/dTi5PoRSQJMDjAcI4C04OKCK4a7XQ5+VBlZ4OV0MD7DU14L29YnoMeX05OaB4PIgtKkLMunUyBM4Yeqqq0FVRAahU0xAK51BnZWFGZSVIdPQgAN7Tg7bCQrjq60PuLWH3FKLRIO7NN6F/6qkRHmH78kt0vvMOuHPcVcOAe1J4oTAGzSOPIOnAARCtdqRxLhfatmyB88oVQAThELXwQeFcBpF06BA0RuOY5jrNZrRt2gS4XCEbRmGDwt1uxKxdi7ht2yZ8/p1lZeg+dgxErZ5QNhAC4YHCOaTZszHj008hJSdPaIentRW3N26Eu6kpJN4SHiiShNiXX0bMc88pM5Jz2VO6DhzoS+yC3EIPhTGo581D0scfgyYkKDaPdXSgfdMmuK5fBw9y0A05FM45EsvLoVu6VDGQAcHbFy6gdds2xDMGHsRMN6RQRHDVL1+OhA8/HB3I0HpHGD2K4V+XlEBdXY34ewIK56CJiZhx+DBUGRkjE7UbN3C3oQGEUjnNj8nIQHR6+gi57m+/RePmzUhubQUJEpjQeQohcm0T++KLfZXwsHa9vBwtX3wBIkngHg9S8vMx79VXR8iJ/1oOHgSvqgIN0iphaKCIKTglBUmVlVClpY06dP770Ue4cfIkiEoFMcxmr1mDzOLiUWUdVis6CgvhaWlRNnt5Gb1CAkUYGV9SguhnnhlTvcZDh/Dd0aODUOYUFCDjhRfGlO8+cQJd778flCo66FAEEE1ODmYIg8eZSr8/fhz/27cPVK0Gc7kwd+tWpIs8ZowmhtHtggI4zGYZZCBb0KGIKnii+kYY1HzqFOrffRdUowFzOvFQSQnSnn56XFudFgtub94c8Co66FB0K1ciobR0Qje/WV2Na2+8MQgle+9ezHryyfEdwOXCnT170Hv2bCAdRd7iCNpqPo2PR+L+/dBkZU2o9K2LF2EpKgLVasEcDpgqKpC8ePGE/Zx1dWjfuhUi4w1UCx4UjwfR69Yh7pVXFOnaUVuLyxs2QIqKgsdux8IjR5BgMinq21Veju6qqlGnekUXGCYUFCgiCKrnzEHy8eMgMTGK9OpuaMCl1asHPSX3s89wX2amor6sqwtt69fD1dgo5zn+tqBAEUqJ+iZqyRLF+tmam/HVypWgUVFgdjseO3cOulmzFPfvranBne3bgQAkdIGHwjmiHn0UCWVloy8xjmGmu6cHX+/YIS8kiWnc8N57UOn1iqFwhwN3XnsN9osXFfcZSzDgUIhej8SyMmhzc71STkDprKuTcxSRq8RlZ3sFRdzMcekS2rdvB7fZvLr3cOGAQpGr4Px8JOzd67VSIpv9/sSJwYw2fe1aPPj8815f587OnbCdOeNXQhc4KIxBTMHJJ09C8iIWDFhdt2sXbp4/P1gQzlqxAg/v2eM1FHdzM9qefbZvivZxMSpwUMQu344diBmnvhnPwm/efhvWIVVyan4+skTS50OT66IPPggzFM6hMRiQKGqX2FgfzACsn3+O70Su0d/E0Eldtcqna7HOTrS/9BJEYufLXnRAPEXUN/GlpdDl5flkxEAnMS2LuCTqH11Kil/XEql/x1tv+VQX+Q+FMXmmSayogIAzWZqYotuLi+UZydvY4jcU8brE/adPQ6Uw+wwlNHdjI37KzwfR6by6rf9QbDbMvHDBpxnHK019EBYrcz8uWwaRO3nT/IYiNqeiHn8cca+/LgdZsZgczje25SM4nEPUQ2Jlrvf8ea8LRf+hiEcgSdBkZ0O7aFGfqwag/vDmyf5CVjwUux2OK1fgrK31aUcxMFCEVmKDSmxpCiBB2npQBKr//nK1HPbkTZHGU0MocJ4yNexVpGUEyiiYIlAiUBSNnuCu5itTYfJJDR0+p1SE/CFytAV9R1vc7rnEajQe1VC6PnIICtBTil5xCKrJaNytl6TIcTkxmgmxa8RxuRaD4Ylotbq6OwQv2k2+KPKzRnLtRMg1PWOPkZ8WLbrf43SKI7iJ4Szowg1MHNh2A5WpZvMWwpcsUVk7Og5SQgqnMxQANg6sSrNYauRDNT8YDFlqSi9xwLeF1nA/Zj/vL06Z2hn7a6rFsloOLQPXazIa8+JVqjNd0yy2aAiBk7HaT2pr5++WD7EP+0iM1WQSpP5MAO29PpQGvIFzfjlKq30i6fJl8T0VuY04k/bD/PmLJcZ26inNE2BEUsc4D+uqmp+jY7C7MFYEVJ34PIjHc4tzflgvSWWJV692Dr3HqAf1xHeY4HD8hjL2J05pHuVcvNgaM5W9h4iv6xDSCs6vEcaOOVWqmgeuXv1x4JspQ6H8H1m6R2I2cBOVAAAAAElFTkSuQmCC",_hoisted_1$p={class:"tip"},_hoisted_2$m={class:"text"},_sfc_main$r=defineComponent({__name:"Warning",setup(e){const[n,i]=useToggle(!1),{errors:o,series:r}=storeToRefs(useDeviceStore()),a=ref([]),[s,l]=useToggle(!1),c=["rightFrontLeg","leftFrontLeg","rightRearLeg","leftRearLeg"],u=["bodyJoint","thighJoint","calfJoint"],d=["rightFrontWheel","leftFrontWheel","rightRearWheel","leftRearWheel"],h=[16777216,33554432,67108864,134217728,268435456],p=e=>{console.log(e);const n=new Set;e.forEach((e=>{(function(e){const t=e.toString(2).split("").map(Number),n=[];for(let i=t.length-1;i>=0;i--)if(1==t[i]){const e="1".padEnd(t.length-i,"0");n.push(parseInt(e,2))}return n})(e[2]).forEach((i=>{const o=3===Math.floor(e[1]/100);let r=`${o?"3xx":e[1]},${i}`,a=()=>t(ROBOT_ERRORS_MAP.get(r)||"");if(o){const n=e[1]%100;if(n<12){const e=Math.floor(n/3),i=n%3;a=()=>`${t(c[e])}${t(u[i])}${t(ROBOT_ERRORS_MAP.get(r)||"")}`}else{r=`3xx_w,${e[2]}`;const i=n-12;a=()=>`${t(d[i])}${t(ROBOT_ERRORS_MAP.get(r)||"")}`}}n.add({value:a,errorCode:i})}))})),a.value=Array.from(n)};const f=()=>{i(),l(!1)};return watch((()=>o.value),(e=>{p(e),l(!0)}),{deep:!0}),(e,t)=>withDirectives((openBlock(),createElementBlock("div",{class:"warning-wrapper",tabindex:"-1",onBlur:t[0]||(t[0]=()=>unref(i)(!1))},[createBaseVNode("img",{class:normalizeClass([unref(s)&&"flashing"]),src:_imports_0$1,onClick:f},null,2),withDirectives(createBaseVNode("div",_hoisted_1$p,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(a),((t,n)=>{var i;return openBlock(),createElementBlock("div",{key:n,class:"tip-item"},[createBaseVNode("div",_hoisted_2$m,toDisplayString$1(null===(i=t.value)||void 0===i?void 0:i.call(t)),1),createBaseVNode("div",{class:normalizeClass(["type",h.includes(t.errorCode)?"warn":"fault"])},toDisplayString$1(e.$t(h.includes(t.errorCode)?"warn":"fault")),3)])})),128))],512),[[vShow,unref(n)]])],544)),[[vShow,"H1"!==unref(r)&&unref(a).length>0]])}}),Warning=_export_sfc(_sfc_main$r,[["__scopeId","data-v-c512e7f1"]]),_withScopeId$b=e=>(pushScopeId("data-v-a4865f93"),e=e(),popScopeId(),e),_hoisted_1$o={style:{height:"28px",position:"relative","pointer-events":"all"}},_hoisted_2$l=_withScopeId$b((()=>createBaseVNode("div",{id:"pointCloudWrapper",class:"small-view"},null,-1))),_sfc_main$q=defineComponent({__name:"TopBar",setup(e){const{topLeft:t}=storeToRefs(useDeviceStore());return(e,n)=>(openBlock(),createElementBlock("div",{class:"top-bar-wrapper",onPointermove:e=>!1},[createBaseVNode("div",_hoisted_1$o,[createBaseVNode("div",{class:"left",style:normalizeStyle({marginLeft:unref(t)+55-25+"px"})},[createVNode(Power),createVNode(Temperature),createVNode(Warning)],4),_hoisted_2$l]),createVNode(OperaMenu)],32))}}),TopBar$1=_export_sfc(_sfc_main$q,[["__scopeId","data-v-a4865f93"]]),_hoisted_1$n={class:"photo-bar-wrapper"},_hoisted_2$k={class:"btn"},_hoisted_3$f={class:"icon_wrapper"},_hoisted_4$c={class:"icon_wrapper"},_hoisted_5$9=createStaticVNode('<svg class="circle_svg" data-v-1afcbec5><defs data-v-1afcbec5><radialGradient id="gradient" cx="0.5" cy="0.5" r="0.5" fx="0.25" fy="0.25" data-v-1afcbec5><stop offset="30%" stop-color="#6576E0" data-v-1afcbec5></stop><stop offset="100%" stop-color="#ff4b4b" data-v-1afcbec5></stop></radialGradient></defs><circle id="circle" stroke="url(#gradient)" data-v-1afcbec5></circle></svg>',1),_hoisted_6$7={key:0,class:"timer_show"},_sfc_main$p=defineComponent({__name:"PhotoBar",emits:["photo","video"],setup(e,{emit:n}){useCssVars((e=>({"01f2926a":unref(c)})));const i=inject("webRTC"),[o,r]=useToggle(!1),[a,s]=useToggle(!0),l=throttle((()=>n("photo")),2e3),[c,u]=useToggle(Math.PI),d=ref(0),h=ref(Math.PI),p=Math.PI/30/10,f=useRTC((e=>{if("connected"===(null==e?void 0:e.getConnectionState())||o.value){if(isAndroid$1()){if(!a.value&&!o.value)return void ToastMsg(t("toastMsg_13"));s(!1)}r(),o.value?(!function(){m.value="00:00:00";let e=0,t=0,n=0;_=window.setInterval((()=>{e++,e>=30&&f(),60===e&&(e=0,t++,60===t&&(t=0,n++));const i=formatTime$2(n,t,e);m.value=i}),1e3),v()}(),n("video","start")):(window.clearInterval(_),m.value="00:00:00",b(),n("video","stop"))}else console.error("连接未完成")}),i),g=debounce(f,500),m=ref("00:00:00");let _=0;const v=()=>{d.value=window.setInterval((()=>{h.value-=p,u(h.value)}),100)},b=()=>{h.value=Math.PI,u(h.value),d.value&&window.clearInterval(d.value)};return useRTC((e=>{e.onConnectionStateChange((e=>{"disconnected"!==e&&"closed"!==e||(console.log("正在录制视频，RTC连接断开，停止录制"),f())}))}),i),listenAppToWeb("appSendWebviewState",(e=>{"0"===e&&o.value&&(console.log("正在录制视频，页面退出视窗，视频流将会关闭，停止录制"),f(),ToastMsg({title:t("toastMsg_3"),duration:3e3}))})),listenAppToWeb("appAndroidSendVideoOK",(e=>{e&&s(!0)})),(e,t)=>{const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$n,[createBaseVNode("div",_hoisted_2$k,[createBaseVNode("div",{class:"btn_item",onClick:t[0]||(t[0]=(...e)=>unref(l)&&unref(l)(...e))},[createBaseVNode("div",_hoisted_3$f,[createVNode(n,{class:"icon",name:"operation/icon_photo"})])]),createBaseVNode("div",{class:normalizeClass(["btn_item",unref(o)&&"videoStart"]),onClick:t[1]||(t[1]=(...e)=>unref(g)&&unref(g)(...e))},[createBaseVNode("div",_hoisted_4$c,[createVNode(n,{class:"icon",name:unref(o)?"operation/icon_video_active":"operation/icon_video"},null,8,["name"])]),_hoisted_5$9],2)]),unref(o)?(openBlock(),createElementBlock("div",_hoisted_6$7,toDisplayString$1(unref(m)),1)):createCommentVNode("",!0)])}}}),PhotoBar=_export_sfc(_sfc_main$p,[["__scopeId","data-v-1afcbec5"]]),_withScopeId$a=e=>(pushScopeId("data-v-da279139"),e=e(),popScopeId(),e),_hoisted_1$m=["id"],_hoisted_2$j=_withScopeId$a((()=>createBaseVNode("audio",{id:"aud",autoplay:"true",style:{width:"0",height:"0",opacity:"0"}},null,-1))),_sfc_main$o=defineComponent({__name:"VideoBg",props:{show:{},isPhoto:{type:Boolean},photoImg:{},videoType:{},videoId:{}},emits:["update:isPhoto"],setup(e,{emit:t}){const n=e;useCssVars((e=>({"1227929d":unref(p).width,"18fbc730":unref(p).height,"0aa8e67a":unref(p).transform,"775c6fec":unref(p).top,"742dc450":unref(p).left,"362aaa81":unref(p).zIndex,fef471b2:unref(p).borderRadius,"3395238c":unref(p).videoTransform})));const i=useRoute(),{windowWidth:o,windowHeight:r,language:a}=storeToRefs(useMainStore()),{series:s}=storeToRefs(useDeviceStore()),l=inject("webRTC"),c=ref(),u=ref(),d=inject("changeVideoView"),h=ref(0),p=computed((()=>{const e=document.getElementById("pointCloudWrapper"),t=null==e?void 0:e.getBoundingClientRect();let i,a,s,l,c,u,d,p;if(2===n.show)i="0px",a="0px",s=`${null==o?void 0:o.value}px`,l=`${null==r?void 0:r.value}px`,c="0",u="0",d="translate(0, 0) scale(1)",p="scale(1)";else if(1===n.show)i="0",a=("videoBack"===n.videoType?((null==o?void 0:o.value)||0)/2:0)+"px",s=((null==o?void 0:o.value)||0)/2+"px",l=`${null==r?void 0:r.value}px`,c="0",u="0","videoFront"===n.videoType?(d="translate(-25%, 0) scale(0.5, 1)",p="scale(2, 1)"):(d="translate(25%, 0) scale(0.5, 1)",p="scale(2, 1)");else{i=`${(null==t?void 0:t.top)||0}px`,a=`${(null==t?void 0:t.left)||0}px`,s=`${(null==t?void 0:t.width)||148}px`,l=`${(null==t?void 0:t.height)||100}px`,c="6",u="20px";const e=(null==t?void 0:t.width)||0,n=(null==t?void 0:t.height)||0,h=(null==o?void 0:o.value)||0,f=(null==r?void 0:r.value)||0,g=e/h,m=n/f;if(d=`translate(${h*((g-1)/2)+((null==t?void 0:t.top)||0)}px, ${f*((m-1)/2)+((null==t?void 0:t.left)||0)+20}px) scale(${g}, ${m})`,g>m){p=`scale(1, ${f*g/n})`}else{p=`scale(${h*m/e}, 1)`}}return{top:i,left:a,width:s,height:l,zIndex:c,borderRadius:u,transform:d,videoTransform:p,trigger:h.value+1}}));let f=0;const g=[];let m=0;const _=e=>{const t=e.getVideoTrackId(n.videoId);console.log("开始监听视频帧",t),m=window.setInterval((()=>{var i;null==e||null===(i=e.getRTCTransportSpeed())||void 0===i||i.then((e=>{e.forEach((e=>{"inbound-rtp"===e.type&&"video"===e.kind&&e.trackIdentifier===t&&(g.length>=30&&(console.log(`${n.videoId}: 30s内视频流帧数`,g.join(",")),g.splice(0,g.length)),g.push(e.framesPerSecond))}))}))}),1e3)},v=useRTC((e=>{c.value&&(c.value.oncanplaythrough=()=>{console.log("开始播放视频")},c.value.onerror=()=>{console.log("video ---  onerror")},c.value.onemptied=()=>{var e;console.log("video ---  onemptied"),null===(e=document.getElementById(n.videoId))||void 0===e||e.play()},c.value.onloadeddata=()=>{console.log("video ---  onloadeddata"),f&&window.clearTimeout(f)},c.value.onloadedmetadata=()=>{console.log("video ---  onloadedmetadata"),f&&window.clearTimeout(f)}),"connected"===(null==e?void 0:e.getConnectionState())?_(e):null==e||e.onConnectionStateChange((t=>{"connected"===t?_(e):"disconnected"!==t&&"closed"!==t&&"failed"!==t||window.clearInterval(m)})),window.addEventListener("resize",debounce((()=>{["/operation","operation"].includes(i.path)&&(h.value=Math.random())}),500))}),l);return onMounted(v),listenAppToWeb("appSendWebviewState",(e=>{"0"===e&&f&&window.clearTimeout(f),"1"===e&&(f=window.setTimeout((()=>{console.log("开启视频后，十秒未出现画面，再次挂载视频流"),useRTC((e=>{e.playVideo(s.value)}),l)}),1e4))})),watch((()=>n.isPhoto),(e=>{e&&window.setTimeout((()=>{t("update:isPhoto",!1)}),500)})),watch((()=>n.photoImg),(e=>{e&&showScreenshot(n.photoImg,document.getElementById("album-entrance"),u.value)})),onUnmounted((()=>{window.clearInterval(m)})),(e,t)=>(openBlock(),createElementBlock("div",{class:"video-wrapper",onClick:t[0]||(t[0]=()=>unref(d)&&unref(d)("videoFront"===e.videoType?0:1))},[createBaseVNode("video",{id:e.videoId,ref_key:"videoRef",ref:c,name:"unitreeVideoDom",class:"video-class",autoplay:"false",loop:"",muted:"",playsinline:"true","webkit-playsinline":"true","x5-playsinline":"true","x-webkit-airplay":"true"},null,8,_hoisted_1$m),_hoisted_2$j,createBaseVNode("div",{ref_key:"flashRef",ref:u,class:normalizeClass(["flash",e.isPhoto&&"is-action"])},null,2),2!==e.show?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["show_video_type",0===e.show?"big":"small"])},[createBaseVNode("span",{style:normalizeStyle({transform:`translate(${"en"===unref(a)?"-10%":0}, 0) scale(${"en"===unref(a)?.6:1})`})},toDisplayString$1("videoFront"===e.videoType?e.$t("videoFront"):e.$t("videoBack")),5)],2)):createCommentVNode("",!0)]))}}),VideoBg=_export_sfc(_sfc_main$o,[["__scopeId","data-v-da279139"]]),_sfc_main$n=defineComponent({__name:"EmergencyStop",setup(e){useCssVars((e=>({"0151edc8":unref(h)})));const t=useDeviceStore(),n=inject("webRTC"),{series:i,currSportModel:o,sportCmdLoading:r}=storeToRefs(t);let a=0,s=65,l=ref(65),c=!1;const[u,d]=useToggle(!1),h=computed((()=>`${l.value>190?190:l.value<65?65:l.value}px`)),[p,f]=useToggle(!1),[g,m]=useToggle(!0);useRTC((e=>{e.onClose((()=>{c=!1,s=65,l.value=65,d(!1),f(!1),t.updateEmergencyStopState(!1)}))}),n)();const _=useRTC(function(){var e=_asyncToGenerator((function*(e){console.log("当前模式",o.value),"damping"===o.value?(t.updateEmergencyStopState(!0),f(!1)):window.setTimeout((()=>{!function(e){v.apply(this,arguments)}(e)}),300)}));return function(t){return e.apply(this,arguments)}}(),n);function v(){return(v=_asyncToGenerator((function*(e){if(o.value!==SPORT_STATE.Damp)if(t.updateSportCmdLoading(!0),console.log(`%c 发送阻尼指令 ${SPORT_CMD.Damp}`,"color: red"),"G1"==i.value){const t=yield null==e?void 0:e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:SPORT_CMD.G1State,data:{data:1},priority:!0});console.log("%c 阻尼指令返回结果:","color: red",t.data.header.status)}else{const t=yield null==e?void 0:e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:SPORT_CMD.Damp,priority:!0});console.log("%c 阻尼指令返回结果:","color: red",t.data.header.status)}t.updateSportModel(SPORT_STATE.Damp),t.updateSportCmdLoading(!1),t.updateEmergencyStopState(!0),f(!1)}))).apply(this,arguments)}const b=e=>{p.value||(e?(f(!0),_(),m(!1),window.setTimeout((()=>m(!0)),1e3)):t.updateEmergencyStopState(!1))},T=e=>{p.value||c||(a=e.clientX)},A=e=>{if(p.value)return;if(c)return;const t=e.clientX-a;l.value=s-t},y=e=>{if(p.value)return;if(c)return;const t=e.clientX;if(s=l.value>190?190:l.value<65?65:l.value,a-t>30)s<190?(c=!0,Tween$1({x:s},{x:190},300,(e=>{l.value=e.x}),(()=>{c=!1,s=190,d(!0)}))):d(!0),console.log("左滑"),b(!0);else if(a-t>0){if(console.log("左滑手势距离不够，回到原来状态"),s>=190)return;c=!0,Tween$1({x:s},{x:65},300,(e=>{l.value=e.x}),(()=>{c=!1,s=65}))}else if(t-a>30)s>65?(c=!0,Tween$1({x:s},{x:65},300,(e=>{l.value=e.x}),(()=>{c=!1,s=65,d(!1)}))):d(!1),console.log("右滑"),b(!1);else if(t-a>0){if(console.log("右滑手势距离不够，回到原来状态"),s<=65)return;c=!0,Tween$1({x:s},{x:190},300,(e=>{l.value=e.x}),(()=>{c=!1,s=190}))}};return watch((()=>o.value),(e=>{g.value&&![SPORT_STATE.Damp,SPORT_STATE.JointLock].includes(e)&&u.value&&(console.log("%c 当前是急停状态下检测到机器狗未处于阻尼，则重置急停状态","color: red",e),Tween$1({x:s},{x:65},300,(e=>{l.value=e.x}),(()=>{c=!1,s=65,d(!1),f(!1),t.updateEmergencyStopState(!1)})))}),{deep:!0}),(e,t)=>{const n=_sfc_main$L;return"H1"!==unref(i)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["emergency_stop_wrapper",unref(u)&&"animation",unref(p)&&"loading"])},[createVNode(n,{class:normalizeClass(["icon",unref(u)&&"active"]),name:"operation/icon_arrow"},null,8,["class"]),createBaseVNode("span",null,toDisplayString$1(e.$t("emergencyStop")),1),createBaseVNode("div",{class:"operation_bar",onPointerdown:T,onPointermove:A,onPointerup:y,onPointercancel:y},null,32)],2)):createCommentVNode("",!0)}}}),EmergencyStop=_export_sfc(_sfc_main$n,[["__scopeId","data-v-ac3af084"]]),_imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABTCAYAAAA1F+FlAAAAAXNSR0IArs4c6QAABi1JREFUeF7tmmmoVVUUx/9/baaRLLOM0iJsoDnKokHDrMQGswST8lthglGUEYFNNH1pIkiaPpRUVtBog9EAFg0fsmg2LMuwKMsm7DWtzh/2ldPp3Hf3Ou+8++697AV+8J7/nn5v7b3XWucQyVwE6FInMRIwpxMkYAmYk4BTnjwsAXMScMqThyVgTgJOefKwBMxJwClPHpaAOQk45cnDEjAnAac8eVgC5iTglCcPS8CcBJzy5GEJmJOAU16Lh5nZMADDSf7pHL/r5HUBGw7gJQAzSX7ddRQcE64FmMYzs48B7AHgXAAPk/zbMY+ukQ4YmJmNADA6+3c3gEPCyl8M3vZd15CInGhlYGY2CsDtAM5oMlYfgLMAPE3yn8j5dLysEjAzOw3AYwB02LeyJwDMJrmulbAbnruBmdkMAA85Fqeb80qS1znadKzUBczMxgD4BMDGkSv6FcA0kksj9R0v8wLT9jqlZFW/AHgEwMkAdgrPVwEYT3JNVQpmpvkN66QbNxqYmY0E8E3J4l8AMJXkH2a2BMBJGajnAUypstAQBO+dBcLXhD+OYrxPAVyR3cJPkfy96h+gjnYeYNODF+XHXURyVuMHM9M51UfyqiqTy9pvAuBeAGc3aa8w5VCSX1bpv442HmBzQxjRGPcvACNI/lTHRML2u78fWI1hfgYwluTaOsb19uEBNhvAfbkBlpM8qL8Bg8dsD2BrAPKOdc1iMjObDOC5yAU8SHJmpLZWmQfYAQCW50ZfQXKvZrMxs/0AvA5gq5xGN6wujc+K4MxMcd20yNUZgG1JytvaatHANCszez87x/bNzXAMyS+KMzazHQF8BUBnUpkp75wKYGUDnJmtBrCLY/WTSCoFa6t5gekGfAbY8OXiQpLnlwC7A8CciJXIAyeS7DMzhSZbRrRpSKaTlFe21VzAgpddlnmObsNG2wkkX8nP2sw+ALBP5EreAHBklnd+mGUQ4yLbSHYEyTcd+lqkbmAB2iUAbgi5pG7J3fO5oplp8YqlYk256TEALopssJakqiRtt0rAAjSdUyoaCozionHaWuHZnQDOc6xGAe85ITDeKKLdhSRvjdDVLqkMrLAFTw+33xyS68Ohr8przOIbXU3UzReqIP3N63GSGm9IrBZgZTM3s91CGCIIMaZEXW10U75WCEca7ReQvDqms8HSDBqwsDXVvwqMKgcpJ2xlyhOPzfLQt4O3nQhgOwCvAvioEwqRgwqsQSck1PPD7doKmoJShRjXZjftYpKrzExbW963OYDVscVIpVsk1V9t1hZgOXCqo90VXpTELkILzs9T/1eEP7lVWGFmEwCoFrcs89AZJL+NHbSZrq3AcuC2AaDamrZfVRO4d0Pg+2OTc1RVjwfCM+l/0O09kIB3SIDlzrddgwc0zUkjaKoELm97uag1s0uzbXxjSR8Kf5QlCJ4um2gbMmCF8+1gAM+qXBQ98/8K9YJlpIqY+Z/N7BYA8/rpcyWA48vy4Y7akk22jw72KXoJDGDTCuD+l1ua2WIAZzbpa3xWUn/Le/MOuYeVbKPNQpZwc+Gwb8VwHsnbCh6meE55apldTvL6Vp0Wn3ccsNxWVeVCC1KlN8ZOJflkAdjnynOzOtt7APYvdLKM5NExHec1HQssB26HUOnVdm1mChdGk1TZfINlJaOLwycM6mNFoXGlBL7jgWmRod4/FsCjAA4sLFy35OEk32lG08y2APBb4fl6kvrdZV0BLOdtSq9UHVF5SS+VtQXvIVkah+XaKe4rfqqwhuTOLlrOQ9Xbd8fozey4LEguxmlLSZ7gnWRXeZh3cTkPK3vBMpekSuku63lgZqZPsi4o7CZVRUbFJvFddUu2+vObmQqPC7OEXiGEXgMKhmK5w7JLQq/6yrKH+dmBf1Orvsue94SHmZlCDiXzMTU31eZmVfnuQwB7AlgIPVQvW5Ql80f14zkL9PKmmHN6PK1ngAVo+iJyz6zEPUmxWYjyvw+fICwhqZfFA7KeAjYgEpGNE7BIUA1ZApaAOQk45cnDEjAnAac8eVgC5iTglCcPS8CcBJzy5GEJmJOAU548LAFzEnDKk4clYE4CTnnysATMScApTx6WgDkJOOXJwxIwJwGn/F/jcJ9jyrEucQAAAABJRU5ErkJggg==",_imports_2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAABACAYAAAC3F09FAAAAAXNSR0IArs4c6QAABqRJREFUaEPtWmnQllMYvi67RFmGIUNpyE5KaEqLshRmZJdsYzeZmslQlkhEQjVpNBhkhsieZSwJDSbLiPphm6LB2CMZst3m+pyveb7z3ud73uVp3u/He//5vnmfc85zXc99zn3uc+6LKMDM7AAA1wHoD2ApgHEkF6SGNrOtAVwN4EQA/wC4BcBdJP+oBQ5r6ay+ZtYFwLsAtorGGkRyvje+men3gdGzSSTH1YKnCDKXA7jJAbGYZPf4dzPbD8BiDzTJmvDU1Dl4ZiaAixxwa0hu4pC5GMAdCQ90JPlLtd4pgozm/gSPDIBOJH/MPjMzrY8xbdUzIwDMdsD9CaAHSQWEtWZmjwEY5rRfTXLzar2ifkV4pg+AhQ6IvwEMIflSROZ9APs77ZeQ3LfeZLoC+MwBoZB7DskWXjOzlQA6Ou3nkTy23mR2BLAMwIYRkH/DfnNz8+9mppnwO4CNHdAzSI6sN5ntAGjqbB8BMQDTSY7KkOkUiG/kgB5D8tZ6k9Fm+SqAfRwgc0iemiHTE8CbjhfV5ASSCg5VWxEBQBHo6ZDKxECeA3AMSU05ZQtHA3gCwAYO4p4k36uaSUHRTBvjA/qyDhBFuaEkfw1kzgegTXZ9p21nkl/Um4yAzQBwoQPkAwBHkPw2kBkP4BoA60VtVwPoRvLrupIJICcCuNIBoig3mKT+aprdCeACp508ciDJ79sCmdEAbnOACNzA5izAzB4FcLzTTmtFWfbPbYHMGQDudqKUzif9SS4yM+1DzwA43AH8Qohmmm5VW83RLEyfoQAeBrCZg0SeWWBm2vUV3Q5x2jwYsoU1VTMpIpoFMgcDeD6RppxEcq6Z7QDgRQB7OYCnAxjdHMKrJVSUZ3YLyea2DhCBnGpmuwJ4GcBOTpvxJL1jREW8iiKjM73CsNKV2KaQvCycMHUvsGXUQGnPSJKpA1vZhAohE6aawq/uA2JrSmnMrDeA15zdX+vkLJJzykadaFgkmSUA9nbes5DkoWY2OKyZuIki2LD43FMNsSLJKFId5YBYRrKrmZ0e0p64yU8K17XmZRq0SDKpiw0dnzcFoFucGx2y3yhck/y8Gm9k+xRJJnlRAUD7iC4Kd3cAf6VjNMkf2hIZ7SFaF5XadwD6kPy00o5x+yI98wqAAVUAUv7Wl+THVfRt0aVBxvuCZtbwDIDGNPNmR2PNNNZMOu421kxjzZS7Kzf2mf+/VGPNNNZMY82U+wXquWbMTOULlf3ikoQuJVQoOqgyHk2tdQdwNoDl0TFeV1AadwVJ1UdzrezczMx2BjANQC8AKuPpZc2m/3X9Gtc1cwGEcXRPkB1P/VSgEtHXw72a/m/VyiJjZqp06VjbOW/AdfR8Ocld8sYul8y9uqjLG2wdP5dSalJr78glY2bdAHy0joGWM7wq2gNa09aUQ0Zf44py3tZKG12Kq/xXi0mDo5JisojbKhkzU+1RZfG+EQotRoFLle0U7S4Jd8/XSxgXbjtVuvgtqJrkba9QK5mKSiSe7Otkko+kvkgeGQkWpH2Ja/xvkJRmJmlm1g/ApQFwOwCSmSjUTs67VgpKjqZye2S6Eb2KZBz5mprlkdkjXHZrb8maAOm6tcTMTNUzVdEGhRCefYcA6tZ/GsmxOR/jQ+cjzgNwXGrfySOjMoTqje2jF59G8qEYjJltAeBxAIeVsTimaC2mgJnZ7QDWSlXCeJ+o8kZSU7HE8sgMAfCs0687yRJpYiul8RQ3feUnEx6WSGJu9OwvAO2qJZMSxnUguSr7IjNTrbKFUK4M76wi2SFBRhmHVxloT1JBpHzPhEWoBTw17uUJQ81MOgDpASq1fiSVsrQwM1PQ8EB3SZU/ktMskLnW2R9Wkoxlv1JfSK3klcXzyI0lWRKGzUw1nRUAtokG6EXynUo9oz1G+q94ES4lWSLHMjOtIcl8K7UJJKWpiT2jDF3TVkrDrB1JUkGpomkmMrMAnBv1mk9SYTd+eUpImkdOxdn7E2TedsLzKSQV+ismcx8ABYGstRDENT8wM4nkVCGr1Fwtczg7KXXZMxrwPJKStlRMRmLR4VGvmSSVqpSYmX2Z0AKkCM4i6Um7tAZT02wUSZ2rKiZzj5P6J9UUZtYDwKJEzhW/XCdL1TJbhPiMp0XGm2ZVkVGkm+yow3uTfCv1qc1MAmxNg1iJke0izcBwkvrrWjgQapwzowbKnFU/Ld8zamlmEk0rA1BuphTiBgATUztw5qsqQVXuJSBZDbM2QX2g2amNL4swbMRPZSKaMuYRJHXMLrH/AGXPml8ZYMpVAAAAAElFTkSuQmCC",_imports_3="/assets/icon_special_active-BxBbleic.png",_hoisted_1$l={class:"grade_radio_wrapper"},_hoisted_2$i={key:1,class:"item",style:{opacity:"0"}},_sfc_main$m=defineComponent({__name:"GradeRadio",props:{value:{},isNoMiddle:{type:Boolean}},emits:["update:value","change"],setup(e,{emit:t}){const n=e=>{t("update:value",e),t("change",e)};return(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$l,[createBaseVNode("div",{class:normalizeClass(["item","low"===e.value&&"select"]),onClick:t[0]||(t[0]=()=>n("low"))},[createBaseVNode("span",null,toDisplayString$1(e.$t("low")),1)],2),e.isNoMiddle?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["item","middle"===e.value&&"select"]),onClick:t[1]||(t[1]=()=>n("middle"))},[createBaseVNode("span",null,toDisplayString$1(e.$t("middle")),1)],2)),e.isNoMiddle?(openBlock(),createElementBlock("div",_hoisted_2$i)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["item","high"===e.value&&"select"]),onClick:t[2]||(t[2]=()=>n("high"))},[createBaseVNode("span",null,toDisplayString$1(e.$t("high")),1)],2)]))}}),GradeRadio=_export_sfc(_sfc_main$m,[["__scopeId","data-v-abefc9f3"]]),_hoisted_1$k=["onTouchmove"],_hoisted_2$h={class:"input-cont"},_hoisted_3$e={class:"cont-title"},_hoisted_4$b={class:"cont-content"},_hoisted_5$8={class:"tip"},_hoisted_6$6={class:"sub-tip"},_hoisted_7$6={class:"error-tip"},_hoisted_8$6={class:"btn-wrapper"},_sfc_main$l=defineComponent({__name:"InputModal",props:{open:{type:Boolean}},emits:["update:open","onSuccess"],setup(e,{emit:n}){const{sn:i}=storeToRefs(useDeviceStore()),o=ref(""),[r,a]=useToggle(""),s=()=>{const e=new Date,r=new Date;r.setDate(r.getDate()-1);const s=new Date;s.setDate(s.getDate()+1);let l=encryptByMd5(`${null==i?void 0:i.value}${formatDate(r,!1)}`),c=encryptByMd5(`${null==i?void 0:i.value}${formatDate(e,!1)}`),u=encryptByMd5(`${null==i?void 0:i.value}${formatDate(s,!1)}`);l=l.substring(l.length-6),c=c.substring(c.length-6),u=u.substring(u.length-6),[l,c,u].includes(o.value.trim())?(n("update:open",!1),n("onSuccess"),a("")):a(t("toastMsg_8"))};return(e,t)=>(openBlock(),createElementBlock("div",{class:"input-modal-body",style:normalizeStyle({left:""+(e.open?"0":"100%")}),onTouchmove:withModifiers((e=>!1),["stop"])},[createBaseVNode("div",_hoisted_2$h,[createBaseVNode("div",_hoisted_3$e,toDisplayString$1(e.$t("prompt")),1),createBaseVNode("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$8,toDisplayString$1(e.$t("specialFunctionModalText1")),1),createBaseVNode("div",_hoisted_6$6,toDisplayString$1(e.$t("specialFunctionModalText2")),1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>isRef(o)?o.value=e:null),class:"custom-input",type:"text"},null,512),[[vModelText,unref(o)]]),createBaseVNode("div",_hoisted_7$6,toDisplayString$1(unref(r)),1)]),createBaseVNode("div",_hoisted_8$6,[createBaseVNode("div",{class:"btn",onClick:t[1]||(t[1]=()=>n("update:open",!1))},[createBaseVNode("span",null,toDisplayString$1(e.$t("cancel")),1)]),createBaseVNode("div",{class:"btn",onClick:s},[createBaseVNode("span",null,toDisplayString$1(e.$t("sure")),1)])])])],44,_hoisted_1$k))}}),InputModal=_export_sfc(_sfc_main$l,[["__scopeId","data-v-b94734ca"]]),_sfc_main$k=defineComponent({__name:"Switch",props:{value:{type:Boolean},changeBySelf:{type:Boolean},disabled:{type:Boolean}},emits:["update:value","change"],setup(e,{emit:t}){const n=e,i=ref(!1),o=()=>{n.disabled||(n.changeBySelf?t("change",!i.value):(t("update:value",!i.value),t("change",!i.value),i.value=!i.value))};return watch((()=>n.value),(()=>{i.value=n.value}),{immediate:!0}),(e,t)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["mui-switch","mui-switch-animbg",unref(i)&&"checked",e.disabled&&"disabled"]),type:"checkbox",onClick:o},null,2))}}),Switch=_export_sfc(_sfc_main$k,[["__scopeId","data-v-8076ca17"]]);function useB2Hook(){const{webRtc:e,windowWidth:n}=storeToRefs(useMainStore()),{multipleState:i,sportMode:o,sportState:r,currSportModel:a}=storeToRefs(useDeviceStore()),{mode:s}=storeToRefs(useDeviceStore()),l=ref("low"),c=ref("low"),u=ref("low"),[d,h]=useToggle(!1),[p,f]=useToggle(!1),[g,m]=useToggle(!1),[_,v]=useToggle(!1),b=ref(0),T=ref(0),A=ref(!1),y=ref("0.00"),E=ref("0.00"),[S,C]=useToggle(!0),w=debounce((t=>{var n;null==e||null===(n=e.value)||void 0===n||n.publishReqNew(RTC_TOPIC.VUI,{api_id:1003,data:{volume:t}})}),300),x=e=>{const t=r.value;if(!t)return;const{bodyHeight:n,footRaiseHeight:i,speedLevel:o}=t;if(S.value&&isNumber(n))if("btn"===e){const e=Math.floor(100*n)/100;l.value=e<=.45?"low":e>=.56?"high":"middle"}else y.value=(100*n).toFixed(2);if(isNumber(i))if("btn"===e){const e=Math.floor(100*i)/100;c.value=e<=.11?"low":e>=.18?"high":"middle"}else E.value=(100*i).toFixed(2);if(isNumber(o)&&"btn"===e){const e=Math.floor(100*o)/100;if(isNaN(e))return void(u.value="middle");u.value=-1===e?"low":1===e?"high":"middle"}};let M;let R=0,I=0;const[D,k]=useToggle(),L=function(){var n=_asyncToGenerator((function*(){if(!D.value){if(!(yield AlertTipModal({type:"ask",content:t("toastMsg_23"),sureBtnText:t("sure")})))return}useRTC((e=>{null==e||e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:1103,data:{data:!D.value}}).then((e=>{0==e.data.header.status.code&&k()}))}),null==e?void 0:e.value)()}));return function(){return n.apply(this,arguments)}}(),O=computed((()=>"ai"===o.value)),P=ref(!1),[N,$]=useToggle(!1),B=t=>{useRTC((e=>{console.logGreen("开始发送设置滚动功能",t),null==e||e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:1040,data:{data:t}}).then((e=>{console.log("设置自动翻滚模式",e),0==e.data.header.status.code&&$(t)}))}),null==e?void 0:e.value)()};return watch((()=>null==n?void 0:n.value),(e=>{m(null!=e&&e<500)}),{immediate:!0}),{multipleState:i,changeAvoidingState:t=>{var n;null==e||null===(n=e.value)||void 0===n||n.publishReqNew(RTC_TOPIC.OBSTACLES_AVOID,{api_id:1001,data:{enable:t}}).then((e=>{var n;0===(null==e||null===(n=e.data)||void 0===n||null===(n=n.header)||void 0===n||null===(n=n.status)||void 0===n?void 0:n.code)&&(A.value=t)}))},gradeBodyHeight:l,gradeFootHeight:c,gradeSpeed:u,showMoreOpera:d,showSpecialOpera:p,showClose:g,toggleShowMoreOpera:h,toggleShowSpecialOpera:f,volumeReq:w,lampReq:t=>{var n;null==e||null===(n=e.value)||void 0===n||n.publishReqNew(RTC_TOPIC.VUI,{api_id:1005,data:{brightness:t}})},radarAvoiding:A,volumeVal:b,lampVal:T,initMultipleData:()=>{b.value=10*(i.value.volume||0),T.value=10*(i.value.brightness||0),A.value=!!i.value.obstaclesAvoidSwitch,x("num")},updateRobotAttr:x,showSpecialModal:_,toggleSpecialModal:v,changeRobotAttr:(n,i)=>{var r;console.log(n,i);let a=0;const s={};"BodyHeight"===n?(a=SPORT_CMD.BodyHeight,"ai"===o.value?s.data="low"===i?-1:"middle"===i?0:1:s.data="low"===i?-.12:"middle"===i?0:.03,M&&window.clearTimeout(M),C(!1),l.value=i,M=window.setTimeout((()=>C(!0)),1e3)):"FootRaiseHeight"===n?(a=SPORT_CMD.FootRaiseHeight,s.data="low"===i?-.04:"middle"===i?0:.03):"SpeedLevel"===n&&(a=SPORT_CMD.SpeedLevel,s.data="low"===i?-1:"middle"===i?0:1),null==e||null===(r=e.value)||void 0===r||r.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:a,data:s}).then((e=>{console.log("rtc 返回",e.data.header.status),0===e.data.header.status.code?"BodyHeight"===n?l.value=i:"FootRaiseHeight"===n?c.value=i:"SpeedLevel"===n&&(u.value=i):ToastMsg(t("toastMsg_20"))}))},mode:s,executeSportCmd:(n,i)=>{var o,r;if(null==e||!e.value)throw new Error("RTC未初始化成功");if("FAIL"==(null==e||null===(o=e.value)||void 0===o?void 0:o.getValidationState()))return void console.error("[error] RTC未连接");const a=window.setTimeout((()=>{ToastMsg(t("toastMsg_12"))}),1e4);console.log("发送指令",n,i),null==e||null===(r=e.value)||void 0===r||r.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:n,data:i}).then((e=>{console.log("特种功能指令执行返回",e),window.clearTimeout(a),e.data.header.status.code}))},clickTitle:()=>{R&&window.clearTimeout(R),R=window.setTimeout((()=>{I=0}),300),I++,I>=6&&(window.vconsole.showSwitch(),I=0,R&&window.clearTimeout(R))},bodyHeightNum:y,footRaiseHeightNum:E,sportMode:o,currSportModel:a,parkourState:D,changeParkourState:L,getParkourState:()=>{useRTC((e=>{null==e||e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:1104,data:""}).then((e=>{const t=JSON.parse(e.data.data);k(t.data)}))}),null==e?void 0:e.value)()},isShowAutoRecovery:O,autoRecoveryState:N,getAutoRecovery:()=>{useRTC((e=>{null==e||e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:1041,data:""}).then((e=>{var t;if(console.log("播放模式",e),null!==(t=e.data)&&void 0!==t&&t.data){const t=JSON.parse(e.data.data);$(t.data)}}))}),null==e?void 0:e.value)()},handleChangeAutoRecovery:e=>{B(e)},getBurdenSetting:()=>{useRTC((e=>{null==e||e.publishReqNew(RTC_TOPIC.CONFIG,{api_id:1002,data:{name:"sport_payload_json"}}).then((e=>{if(0==e.data.header.status.code){const t=JSON.parse(e.data.data),n=JSON.parse(t.content);P.value=!!n.mass,P.value&&B(!1)}}))}),null==e?void 0:e.value)()},hasPayload:P}}const _withScopeId$9=e=>(pushScopeId("data-v-a9b5c977"),e=e(),popScopeId(),e),_hoisted_1$j={class:"motion-state-modal-cont"},_hoisted_2$g={key:0,class:"menu-item"},_hoisted_3$d={class:"menu-item-cont"},_hoisted_4$a={class:"menu-item-title"},_hoisted_5$7={class:"menu-item-title-num"},_hoisted_6$5={key:1,class:"menu-item"},_hoisted_7$5={class:"menu-item-cont"},_hoisted_8$5={class:"menu-item-title"},_hoisted_9$4={class:"menu-item-title-num"},_hoisted_10$3={class:"menu-item"},_hoisted_11$3={class:"menu-item-cont no-border"},_hoisted_12$1={class:"menu-item-title"},_hoisted_13$1={class:"menu-item"},_hoisted_14$1={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_15$1={class:"menu-item-title"},_hoisted_16$1=_withScopeId$9((()=>createBaseVNode("img",{src:_imports_0,style:{width:"28px"}},null,-1))),_hoisted_17$1=_withScopeId$9((()=>createBaseVNode("div",{class:"drop-icon"},[createBaseVNode("img",{src:_imports_0$6})],-1))),_hoisted_18$1={class:"menu-item"},_hoisted_19$1={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_20={class:"menu-item-title"},_hoisted_21=_withScopeId$9((()=>createBaseVNode("img",{src:_imports_2},null,-1))),_hoisted_22={class:"menu-item"},_hoisted_23={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_24={class:"menu-item-title"},_hoisted_25=_withScopeId$9((()=>createBaseVNode("img",{src:_imports_3},null,-1))),_sfc_main$j=defineComponent({__name:"B2Setting",props:{modalVisible:{type:Boolean},refreshBS:{type:Function}},setup(e){const t=e,n=ref(new Set),{sportMode:i,currSportModel:o,multipleState:r,gradeBodyHeight:a,gradeFootHeight:s,gradeSpeed:l,showSpecialOpera:c,toggleShowSpecialOpera:u,initMultipleData:d,updateRobotAttr:h,showSpecialModal:p,toggleSpecialModal:f,changeRobotAttr:g,executeSportCmd:m,clickTitle:_,bodyHeightNum:v,footRaiseHeightNum:b,parkourState:T,changeParkourState:A,getParkourState:y,isShowAutoRecovery:E,autoRecoveryState:S,getAutoRecovery:C,handleChangeAutoRecovery:w,getBurdenSetting:x,hasPayload:M}=useB2Hook(),R=e=>{u(),setTimeout(t.refreshBS,300)},I=()=>{c.value?R():f(!0)};return watch((()=>t.modalVisible),(e=>{e?(window.setTimeout((()=>{var e;null===(e=n.value)||void 0===e||e.forEach((e=>null==e?void 0:e.getSliderInfo()))}),500),d(),h("btn"),y(),"ai"===i.value&&(C(),x())):f(!1)})),watch((()=>r.value),(e=>{t.modalVisible&&e&&d()})),(e,t)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("div",{class:"title custom",onClick:t[0]||(t[0]=(...e)=>unref(_)&&unref(_)(...e))},[createBaseVNode("span",null,toDisplayString$1(e.$t("motionStateTitle")),1)]),"normal"===unref(i)?(openBlock(),createElementBlock("div",_hoisted_2$g,[createBaseVNode("div",_hoisted_3$d,[createBaseVNode("div",_hoisted_4$a,[createBaseVNode("span",null,toDisplayString$1(e.$t("bodyHeight")),1),createBaseVNode("span",_hoisted_5$7,toDisplayString$1(unref(v))+"cm",1)]),createVNode(GradeRadio,{value:unref(a),"onUpdate:value":t[1]||(t[1]=e=>isRef(a)?a.value=e:null),onChange:t[2]||(t[2]=e=>unref(g)("BodyHeight",e))},null,8,["value"])])])):createCommentVNode("",!0),"normal"===unref(i)?(openBlock(),createElementBlock("div",_hoisted_6$5,[createBaseVNode("div",_hoisted_7$5,[createBaseVNode("div",_hoisted_8$5,[createBaseVNode("span",null,toDisplayString$1(e.$t("footHeight")),1),createBaseVNode("span",_hoisted_9$4,toDisplayString$1(unref(b))+"cm",1)]),createVNode(GradeRadio,{value:unref(s),"onUpdate:value":t[3]||(t[3]=e=>isRef(s)?s.value=e:null),onChange:t[4]||(t[4]=e=>unref(g)("FootRaiseHeight",e))},null,8,["value"])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$3,[createBaseVNode("div",_hoisted_11$3,[createBaseVNode("span",_hoisted_12$1,toDisplayString$1(e.$t("speedLevel")),1),createVNode(GradeRadio,{value:unref(l),"onUpdate:value":t[5]||(t[5]=e=>isRef(l)?l.value=e:null),"is-no-middle":!0,onChange:t[6]||(t[6]=e=>unref(g)("SpeedLevel",e))},null,8,["value"])])]),withDirectives(createBaseVNode("div",_hoisted_13$1,[createBaseVNode("div",_hoisted_14$1,[createBaseVNode("span",_hoisted_15$1,[_hoisted_16$1,createBaseVNode("span",null,toDisplayString$1(e.$t("autoRecovery")),1)]),createVNode(Switch,{value:unref(S),"onUpdate:value":t[7]||(t[7]=e=>isRef(S)?S.value=e:null),"change-by-self":!0,disabled:unref(M),onChange:unref(w)},null,8,["value","disabled","onChange"])])],512),[[vShow,unref(E)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["drop-title",unref(c)&&"open"]),onClick:I},[createTextVNode(toDisplayString$1(e.$t("specialFunction"))+" ",1),_hoisted_17$1],2),[[vShow,"ai"===unref(i)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["more-opera-wrapper",unref(c)&&"openSpecial"])},[createBaseVNode("div",_hoisted_18$1,[createBaseVNode("div",_hoisted_19$1,[createBaseVNode("span",_hoisted_20,[_hoisted_21,createBaseVNode("span",null,toDisplayString$1(e.$t("handstand")),1)]),createBaseVNode("div",{class:"btn_execute",onClick:t[8]||(t[8]=()=>unref(m)(unref(SPORT_CMD).StandOut,{data:unref(o)!==unref(SPORT_STATE).StandOut}))},toDisplayString$1(unref(o)==unref(SPORT_STATE).StandOut?e.$t("quit"):e.$t("enter")),1)])]),createBaseVNode("div",_hoisted_22,[createBaseVNode("div",_hoisted_23,[createBaseVNode("span",_hoisted_24,[_hoisted_25,createBaseVNode("span",null,toDisplayString$1(e.$t("spanMode")),1)]),createVNode(Switch,{value:unref(T),"onUpdate:value":t[9]||(t[9]=e=>isRef(T)?T.value=e:null),"change-by-self":!0,onChange:unref(A)},null,8,["value","onChange"])])])],2),[[vShow,"ai"===unref(i)]])]),createVNode(InputModal,{open:unref(p),"onUpdate:open":t[10]||(t[10]=e=>isRef(p)?p.value=e:null),onOnSuccess:t[11]||(t[11]=()=>R())},null,8,["open"])],64))}}),B2Setting=_export_sfc(_sfc_main$j,[["__scopeId","data-v-a9b5c977"]]),_withScopeId$8=e=>(pushScopeId("data-v-b91febe3"),e=e(),popScopeId(),e),_hoisted_1$i={class:"motion-state-modal-cont"},_hoisted_2$f={class:"title custom"},_hoisted_3$c={class:"menu-item"},_hoisted_4$9={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_5$6=_withScopeId$8((()=>createBaseVNode("span",{class:"menu-item-title"},[createBaseVNode("span",null,"避障")],-1))),_hoisted_6$4={class:"menu-item"},_hoisted_7$4={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_8$4=_withScopeId$8((()=>createBaseVNode("span",{class:"menu-item-title"},[createBaseVNode("span",null,"智能停障")],-1))),_hoisted_9$3={class:"menu-item"},_hoisted_10$2={class:"menu-item-cont",style:{"padding-right":"8px"}},_hoisted_11$2=_withScopeId$8((()=>createBaseVNode("span",{class:"menu-item-title"},[createBaseVNode("span",null,"智能绕障")],-1))),_sfc_main$i=defineComponent({__name:"G1Setting",setup:e=>(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$f,[createBaseVNode("span",null,toDisplayString$1(e.$t("motionStateTitle")),1)]),createBaseVNode("div",_hoisted_3$c,[createBaseVNode("div",_hoisted_4$9,[_hoisted_5$6,createVNode(Switch,{"change-by-self":!0})])]),createBaseVNode("div",_hoisted_6$4,[createBaseVNode("div",_hoisted_7$4,[_hoisted_8$4,createVNode(Switch,{"change-by-self":!0})])]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$2,[_hoisted_11$2,createVNode(Switch,{"change-by-self":!0})])])]))}),G1Setting=_export_sfc(_sfc_main$i,[["__scopeId","data-v-b91febe3"]]),_hoisted_1$h=["onClick"],_sfc_main$h=defineComponent({__name:"MotionState",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:t}){const{series:n}=storeToRefs(useDeviceStore());let i;const o=()=>i.refresh();return onMounted((()=>{i=new BScroll(".motion-state-modal",{scrollY:!0,click:!0})})),(e,i)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["motion-state-body",e.visible&&"show"]),onClick:i[0]||(i[0]=()=>t("update:visible",!1))},[createBaseVNode("div",{class:"motion-state-modal",onClick:withModifiers((e=>!1),["stop"])},["B2"==unref(n)?(openBlock(),createBlock(B2Setting,{key:0,"modal-visible":e.visible,"refresh-b-s":o},null,8,["modal-visible"])):"G1"==unref(n)?(openBlock(),createBlock(G1Setting,{key:1})):createCommentVNode("",!0)],8,_hoisted_1$h)],2))}}),MotionState=_export_sfc(_sfc_main$h,[["__scopeId","data-v-734cd473"]]),useOperation=()=>{const{webRtc:e,windowWidth:n,windowHeight:i,language:o}=storeToRefs(useMainStore()),{sportMode:r,series:a}=storeToRefs(useDeviceStore());let s=null==e?void 0:e.value;provide("webRTC",s);const l=computed((()=>`${(null==n?void 0:n.value)||0}px`)),c=computed((()=>`${(null==i?void 0:i.value)||0}px`)),u=computed((()=>((null==n?void 0:n.value)||0)/844)),d=computed((()=>`translate(${0-(1-u.value)/2*100}%, ${0-(1-u.value)/2*100}%) scale(${u.value})`)),h=computed((()=>`translate(${0-(1-u.value)/2*100}%, ${(1-u.value)/2*100}%) scale(${u.value})`)),[p,f]=useToggle(!1);provide("showMotionStateFn",(()=>f(!0)));const g=()=>{var e;null===(e=s)||void 0===e||e.onClose((()=>{f(!1)}))},m=["videoFront","videoBack","double"],_=ref(0),v=computed((()=>m[_.value])),b=throttle$1(((e,t,n)=>{if("H1"==a.value)return;let i=_.value;Math.abs(e-t)/n*1e3<800||(e>t&&e-t>=80?i--:e<t&&t-e>=80&&i++,_.value=i<0?2:i>2?0:i)}),500),{touchStart:T,touchMove:A,touchEnd:y}=useDoubleTouchHook(b);provide("changeVideoView",(e=>{_.value=e})),watch((()=>_.value),(function(){useRTC((e=>{e.publish("",{req_type:"screen_type",display_type:_.value},DataChannelType.RTC_INNER_REQ)}),s,!0)()}),{immediate:!0});const[E,S]=useToggle(!1),C=ref(""),w=ref(""),x=e=>{var n;S(!0);const i=promiseAbort(null===(n=s)||void 0===n?void 0:n.publishReqNew(e,{api_id:1001}));i.then((t=>{var n;if(window.clearTimeout(o),null===(n=t.data)||void 0===n||!n.data)return;const i=t.data.data,r=new Uint8Array(i);let s="";for(let e=0;e<r.length;e++)s+=String.fromCharCode(r[e]);const l=window.btoa(s);webToApp("takePhoto",{data:l}),["G1","H1"].includes(a.value)||e===RTC_TOPIC.FRONT_PHOTO_REQ?C.value=l:w.value=l}));const o=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_1")),null===(e=i.abort)||void 0===e||e.call(i,"拍照超时")}),16e3)},M=window.videoTransformWorker,R={front:null,back:null};function I(e){var t;R[e]&&(R[e]=null);const n=null===(t=s)||void 0===t?void 0:t.getVideoStream("front"===e?"unitreeFrontVideoStream":"unitreeBackVideoStream");if(!n)return;const i=new MediaRecorder(n,{videoBitsPerSecond:1e6});console.log("码率",i.videoBitsPerSecond),i.ondataavailable=function(t){console.log("录屏数据",t.data.size),t.data.size>0?(null==M||M.postMessage(t.data),S(!0),"front"===e?C.value=D(e):w.value=D(e)):(null==i||i.stop(),console.log("视频源为空，无法录制"))},i.start(),R[e]=i,console.log(`开始录制${"front"===e?"前置":"后置"}摄像头`)}function D(e){const t=document.getElementById("front"===e?"unitreeFrontVideoStream":"unitreeBackVideoStream");if(!t)return"";const n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t.offsetWidth,n.height=t.offsetHeight,null==i||i.drawImage(t,0,0,n.width,n.height),n.toDataURL()}const k=ref({angle:0,percentage:0,stop:!0}),L=ref({angle:0,percentage:0,stop:!0});provide("joystickIsDynamic",computed((()=>!k.value.stop||!L.value.stop))),listerJoystickChange$2(s,k,L);const O=computed((()=>`${null==o?void 0:o.value}_operaBarKey1`)),P=computed((()=>`${null==o?void 0:o.value}_operaBarKey2`));return watch((()=>null==e?void 0:e.value),(()=>{var t,n,i;(null!=e&&e.value&&(s=null==e?void 0:e.value),"connected"===(null===(t=s)||void 0===t?void 0:t.getConnectionState()))?(null===(n=s)||void 0===n||n.playVideo(a.value),g()):null===(i=s)||void 0===i||i.onConnectionStateChange((e=>{var t;"connected"===e&&(console.log("开始将数据流挂在给video"),null===(t=s)||void 0===t||t.playVideo(a.value),g())}))}),{immediate:!0}),watch((()=>r.value),(()=>f(!1))),{webRtc:e,series:a,windowWidthPX:l,windowHeightPX:c,dis:u,offsetPosition:d,offsetPosition2:h,viewType:v,touchStart:T,touchMove:A,touchEnd:y,showMotionState:p,clickPhoto:E,photoImg_front:C,photoImg_back:w,actionPhoto:()=>{var e;const n=null===(e=s)||void 0===e?void 0:e.getConnectionState();if("connected"!==n)return ToastMsg(t("toastMsg_14")),void console.error("未连接完成",n);["G1","H1"].includes(a.value)?x(RTC_TOPIC.G1_FRONT_PHOTO_REQ):(x(RTC_TOPIC.FRONT_PHOTO_REQ),x(RTC_TOPIC.BACK_PHOTO_REQ))},actionVideo:e=>{var t,n,i;"connected"===(null===(t=s)||void 0===t?void 0:t.getConnectionState())?"start"===e?(I("front"),I("back")):(null===(n=R.front)||void 0===n||n.stop(),null===(i=R.back)||void 0===i||i.stop(),console.log("录制结束")):console.error("未连接完成")},moveDirection:k,leftJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;k.value.angle=e,k.value.percentage=a,k.value.stop=!1},leftJoystickStop:()=>{k.value.angle=0,k.value.percentage=0,k.value.stop=!0},viewDirection:L,rightJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;L.value.angle=e,L.value.percentage=a,L.value.stop=!1},rightJoystickStop:()=>{L.value.angle=0,L.value.percentage=0,L.value.stop=!0},pointCloudGestureView:e=>{if(e){const[t,n,i,o]=e,{angle:r,percentage:a}=calculateAngle$2(i,o,t,n);L.value.angle=r,L.value.percentage=a,L.value.stop=!1}else L.value.angle=0,L.value.percentage=0,L.value.stop=!0},sportMode:r,operaBarKey1:O,operaBarKey2:P}};function listerJoystickChange$2(e,n,i){const o=useDeviceStore(),r=throttle$1((()=>{ToastMsg(t("toastMsg_2"))}),5e3),a={lx:0,ly:0,rx:0,ry:0};let s=0,l=!1;const c=useRTC((e=>{o.emergencyStopState?r():"open"===e.getChannelState()&&e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,a)}),e,!0),u=()=>{l||(l=!0,s=window.setInterval((()=>{c(),n.value.stop&&i.value.stop&&d()}),50))},d=()=>{l=!1,window.clearInterval(s),a.lx=a.ly=a.rx=a.ry=0,c()};watch((()=>n.value),(e=>{if(e.stop)a.lx=0,a.ly=0;else{const{currHSpeedScale:t,currVSpeedScale:n}=disassembleMoveActiveSpeed(e);a.lx=t,a.ly=n,l||u()}}),{deep:!0}),watch((()=>i.value),(e=>{if(e.stop)a.rx=0,a.ry=0;else{const{yawSpeed:t,eulerZ:n}=disassembleViewActiveSpeed(e);a.rx=t,a.ry=n,l||u()}}),{deep:!0})}const _withScopeId$7=e=>(pushScopeId("data-v-b087584d"),e=e(),popScopeId(),e),_hoisted_1$g={class:"operation-wrapper"},_hoisted_2$e={class:"all-opera-wrapper"},_hoisted_3$b={class:"wrapper-1"},_hoisted_4$8=_withScopeId$7((()=>createBaseVNode("div",{id:"album-entrance",class:"img"},null,-1))),_hoisted_5$5={class:"wrapper-3"},_sfc_main$g=defineComponent({__name:"OperationView",setup(e){useCssVars((e=>({"86221f30":unref(t),"0213c2d6":unref(n),"8c34001c":unref(r),fa4c0300:unref(a)})));const{windowWidthPX:t,windowHeightPX:n,series:i,dis:o,offsetPosition:r,offsetPosition2:a,viewType:s,touchStart:l,touchMove:c,touchEnd:u,showMotionState:d,clickPhoto:h,photoImg_front:p,photoImg_back:f,actionPhoto:g,actionVideo:m,leftJoystickAction:_,leftJoystickStop:v,rightJoystickAction:b,rightJoystickStop:T,operaBarKey1:A,operaBarKey2:y}=useOperation();return onActivated((()=>{console.log("进入OperationView页面")})),(e,t)=>(openBlock(),createElementBlock("div",{id:"operationPage",class:"operation-body",onTouchstart:t[3]||(t[3]=(...e)=>unref(l)&&unref(l)(...e)),onTouchmove:t[4]||(t[4]=(...e)=>unref(c)&&unref(c)(...e)),onTouchend:t[5]||(t[5]=(...e)=>unref(u)&&unref(u)(...e)),onTouchcancel:t[6]||(t[6]=(...e)=>unref(u)&&unref(u)(...e))},[createVNode(unref(VideoBg),{"is-photo":unref(h),"onUpdate:isPhoto":t[0]||(t[0]=e=>isRef(h)?h.value=e:null),"video-id":"unitreeFrontVideoStream",show:"videoFront"===unref(s)?2:"double"==unref(s)?1:0,"photo-img":unref(p),"video-type":"videoFront"},null,8,["is-photo","show","photo-img"]),"B2"===unref(i)?(openBlock(),createBlock(unref(VideoBg),{key:0,"is-photo":unref(h),"onUpdate:isPhoto":t[1]||(t[1]=e=>isRef(h)?h.value=e:null),"video-id":"unitreeBackVideoStream",show:"videoBack"===unref(s)?2:"double"==unref(s)?1:0,"photo-img":unref(f),"video-type":"videoBack"},null,8,["is-photo","show","photo-img"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$g,[createVNode(unref(TopBar$1),{class:"top-bar-component"}),createBaseVNode("div",_hoisted_2$e,[createBaseVNode("div",_hoisted_3$b,[createVNode(unref(Joystick2),{class:normalizeClass(["left-joystick-component","H1"==unref(i)&&"hide"]),scale:unref(o),onAngleChange:unref(_),onActionStop:unref(v)},null,8,["class","scale","onAngleChange","onActionStop"])]),createBaseVNode("div",{class:normalizeClass(["wrapper-2","H1"===unref(i)&&"hide"])},[(openBlock(),createBlock(unref(OperaBar),{key:unref(A),type:"active",class:"opera-bar-component",style:{"margin-bottom":"6px"}})),(openBlock(),createBlock(unref(OperaBar),{key:unref(y),type:"model",class:"opera-bar-component"}))],2),_hoisted_4$8,createBaseVNode("div",_hoisted_5$5,[createVNode(EmergencyStop),createVNode(unref(PhotoBar),{class:"photo-bar-component",onPhoto:unref(g),onVideo:unref(m)},null,8,["onPhoto","onVideo"]),createVNode(unref(Joystick2),{class:normalizeClass(["right-joystick-component","H1"==unref(i)&&"hide"]),scale:unref(o),onAngleChange:unref(b),onActionStop:unref(T)},null,8,["class","scale","onAngleChange","onActionStop"])])])]),createVNode(MotionState,{visible:unref(d),"onUpdate:visible":t[2]||(t[2]=e=>isRef(d)?d.value=e:null)},null,8,["visible"])],32))}}),Operation=_export_sfc(_sfc_main$g,[["__scopeId","data-v-b087584d"]]),_withScopeId$6=e=>(pushScopeId("data-v-dda7e646"),e=e(),popScopeId(),e),_hoisted_1$f=["src"],_hoisted_2$d=["src"],_hoisted_3$a=_withScopeId$6((()=>createBaseVNode("div",{class:"child"},null,-1))),_hoisted_4$7=[_hoisted_3$a],_sfc_main$f=defineComponent({__name:"Lamp",props:{iconSrc:{default:new URL("/assets/icon_lamp-73Hi5Z4a.png",module.meta.url).href},iconSrcOpen:{default:new URL("/assets/icon_lamp_on-PII2MN85.png",module.meta.url).href},iconWidth:{default:24},activeType:{default:"img"},progressBarColor:{default:""}},setup(e){useCssVars((e=>({28381591:unref(a)})));const t=inject("webRTC"),n=ref();let i=0,o=0,r=null;const a=ref("10%"),[s,l]=useToggle(!1),[c,u]=useToggle(!1),d=useRTC((e=>{const t=a.value;null==e||e.publishReqNew(RTC_TOPIC.VUI,{api_id:1005,data:{brightness:Math.round(Number(t.substring(0,t.length-1))/10)}})}),t),h=e=>{r=e.pointerId;const t=e.clientY-i;let n=o-t;n=n>o?o:n<=0?0:n,a.value=`${(n/o*100).toFixed(0)}%`,u(!0)},p=e=>{if(r===e.pointerId){const t=e.clientY-i;let n=o-t;n=n>o?o:n<=0?0:n,a.value=`${(n/o*100).toFixed(0)}%`,d()}},f=()=>{r=null,u(!1),d()},g=e=>{null==e||e.publishReqNew(RTC_TOPIC.VUI,{api_id:1006}).then((e=>{var t;if(null!=e&&null!==(t=e.data)&&void 0!==t&&t.data){const t=JSON.parse(e.data.data);a.value=10*t.brightness+"%"}}))},m=()=>{l(),useRTC(g,t)()},_=useRTC(g,t,!0);return onMounted((()=>{var e,t;i=(null===(e=n.value)||void 0===e?void 0:e.getBoundingClientRect().top)||0,o=(null===(t=n.value)||void 0===t?void 0:t.getBoundingClientRect().height)||0,_()})),onUpdated((()=>{var e,t;i=(null===(e=n.value)||void 0===e?void 0:e.getBoundingClientRect().top)||0,o=(null===(t=n.value)||void 0===t?void 0:t.getBoundingClientRect().height)||0})),(e,t)=>(openBlock(),createElementBlock("div",{class:"lamp-wrapper",tabindex:"-1",onBlur:t[0]||(t[0]=()=>unref(l)(!1))},[withDirectives(createBaseVNode("img",{style:normalizeStyle({width:`${e.iconWidth}px`}),src:"img"===e.activeType?e.iconSrcOpen:e.iconSrc,onClick:m},null,12,_hoisted_1$f),[[vShow,unref(s)]]),withDirectives(createBaseVNode("img",{style:normalizeStyle({width:`${e.iconWidth}px`,opacity:"opacity"===e.activeType?.27:1}),src:e.iconSrc,onClick:m},null,12,_hoisted_2$d),[[vShow,!unref(s)]]),withDirectives(createBaseVNode("div",{class:"slider",style:normalizeStyle({backgroundColor:""+("opacity"===e.activeType?"#F2F2F9":"rgba(0, 0, 0, 0.35)")})},[createBaseVNode("div",{class:"skate",onPointerdown:h,onPointermove:p,onPointerup:f,onPointercancel:f},null,32),createBaseVNode("div",{ref_key:"sliderRef",ref:n,class:"parent"},_hoisted_4$7,512),createBaseVNode("div",{class:normalizeClass(["num-show",unref(c)&&"show"])},toDisplayString$1(unref(a)),3)],4),[[vShow,unref(s)]])],32))}}),Lamp=_export_sfc(_sfc_main$f,[["__scopeId","data-v-dda7e646"]]),_withScopeId$5=e=>(pushScopeId("data-v-d2fc05e3"),e=e(),popScopeId(),e),_hoisted_1$e=["src"],_hoisted_2$c=["src"],_hoisted_3$9=_withScopeId$5((()=>createBaseVNode("div",{class:"child"},null,-1))),_hoisted_4$6=[_hoisted_3$9],_sfc_main$e=defineComponent({__name:"Volume",props:{iconSrc:{default:new URL("/assets/icon_volume-C14R1sfm.png",module.meta.url).href},iconSrcOpen:{default:new URL("/assets/icon_volume_on-DEIDLaR8.png",module.meta.url).href},iconWidth:{default:24},activeType:{default:"img"}},setup(e){useCssVars((e=>({"2fd1e95c":unref(s)})));const{mode:t}=storeToRefs(useDeviceStore()),n=inject("webRTC"),i=ref();let o=0,r=0,a=null;const s=ref("10%"),[l,c]=useToggle(!1),[u,d]=useToggle(!1),h=debounce(useRTC((e=>{const t=s.value;null==e||e.publishReqNew(RTC_TOPIC.VUI,{api_id:1003,data:{volume:Math.round(Number(t.substring(0,t.length-1))/10)}})}),n),300),p=e=>{a=e.pointerId;const t=e.clientY-o;let n=r-t;n=n>r?r:n<=0?0:n,s.value=`${(n/r*100).toFixed(0)}%`,d(!0)},f=e=>{if(a===e.pointerId){const t=e.clientY-o;let n=r-t;n=n>r?r:n<=0?0:n,s.value=`${(n/r*100).toFixed(0)}%`,h()}},g=()=>{a=null,d(!1),h()},m=e=>{null==e||e.publishReqNew(RTC_TOPIC.VUI,{api_id:1004}).then((e=>{var t;if(null!=e&&null!==(t=e.data)&&void 0!==t&&t.data){const t=JSON.parse(e.data.data);s.value=10*t.volume+"%"}}))},_=()=>{c(),useRTC(m,n)()},v=useRTC(m,n,!0);return onMounted((()=>{var e,t;o=(null===(e=i.value)||void 0===e?void 0:e.getBoundingClientRect().top)||0,r=(null===(t=i.value)||void 0===t?void 0:t.getBoundingClientRect().height)||0,v()})),onUpdated((()=>{var e,t;o=(null===(e=i.value)||void 0===e?void 0:e.getBoundingClientRect().top)||0,r=(null===(t=i.value)||void 0===t?void 0:t.getBoundingClientRect().height)||0})),(e,n)=>"air"!==unref(t)?(openBlock(),createElementBlock("div",{key:0,tabindex:"-1",class:"volume-wrapper",onBlur:n[0]||(n[0]=()=>unref(c)(!1))},[withDirectives(createBaseVNode("img",{style:normalizeStyle({width:`${e.iconWidth}px`}),src:"img"===e.activeType?e.iconSrcOpen:e.iconSrc,onClick:_},null,12,_hoisted_1$e),[[vShow,unref(l)]]),withDirectives(createBaseVNode("img",{style:normalizeStyle({width:`${e.iconWidth}px`,opacity:"opacity"===e.activeType?.27:1}),src:e.iconSrc,onClick:_},null,12,_hoisted_2$c),[[vShow,!unref(l)]]),withDirectives(createBaseVNode("div",{class:"slider",style:normalizeStyle({backgroundColor:""+("opacity"===e.activeType?"#F2F2F9":"rgba(0, 0, 0, 0.35)")})},[createBaseVNode("div",{class:"skate",onPointerdown:p,onPointermove:f,onPointerup:g,onPointercancel:g},null,32),createBaseVNode("div",{ref_key:"sliderRef",ref:i,class:"parent"},_hoisted_4$6,512),createBaseVNode("div",{class:normalizeClass(["num-show",unref(u)&&"show"])},toDisplayString$1(unref(s)),3)],4),[[vShow,unref(l)]])],32)):createCommentVNode("",!0)}}),Volume=_export_sfc(_sfc_main$e,[["__scopeId","data-v-d2fc05e3"]]),_hoisted_1$d=["src"],_hoisted_2$b=["src"],_sfc_main$d=defineComponent({__name:"Radar",props:{iconSrc:{default:new URL("/assets/icon_radar-C34NbkkN.png",module.meta.url).href},iconSrcOpen:{default:new URL("/assets/icon_radar_on-C1h08RAP.png",module.meta.url).href},iconWidth:{default:24},activeType:{default:"img"}},setup(e){const{multipleState:n}=storeToRefs(useDeviceStore()),[i,o]=useToggle(!1),[r,a]=useToggle(!1),s=void 0===i&&void 0===o,l=inject("webRTC"),c=throttle(useRTC((e=>{console.log("发送避障请求",s?!r.value:!(null!=i&&i.value)),null==e||e.publishReqNew(RTC_TOPIC.OBSTACLES_AVOID,{api_id:1001,data:{enable:s?!r.value:!(null!=i&&i.value)}}).then((e=>{var n;0===(null==e||null===(n=e.data)||void 0===n||null===(n=n.header)||void 0===n||null===(n=n.status)||void 0===n?void 0:n.code)&&(s?(a(!r.value),ToastMsg(`${t(null!=r&&r.value?"toastMsg_6":"toastMsg_7")}`)):(o&&o(!(null!=i&&i.value)),ToastMsg(`${t(null!=i&&i.value?"toastMsg_6":"toastMsg_7")}`)))}))}),l),1e3,{trailing:!1});return watch((()=>n.value),(e=>{s&&e.obstaclesAvoidSwitch!=r.value&&a(e.obstaclesAvoidSwitch),s||e.obstaclesAvoidSwitch==(null==i?void 0:i.value)||o&&o(e.obstaclesAvoidSwitch)})),(e,t)=>(openBlock(),createElementBlock("div",{class:"radar_wrapper",onClick:t[0]||(t[0]=(...e)=>unref(c)&&unref(c)(...e))},[withDirectives(createBaseVNode("img",{class:"icon",src:"img"===e.activeType?e.iconSrcOpen:e.iconSrc,style:normalizeStyle({width:`${e.iconWidth}px`})},null,12,_hoisted_1$d),[[vShow,unref(s)?unref(r):unref(i)]]),withDirectives(createBaseVNode("img",{class:"icon",src:e.iconSrc,style:normalizeStyle({width:`${e.iconWidth}px`,opacity:"opacity"===e.activeType?.27:1})},null,12,_hoisted_2$b),[[vShow,unref(s)?!unref(r):!unref(i)]])]))}}),Radar=_export_sfc(_sfc_main$d,[["__scopeId","data-v-7bcf0e48"]]),_withScopeId$4=e=>(pushScopeId("data-v-4125045f"),e=e(),popScopeId(),e),_hoisted_1$c={class:"list-body"},_hoisted_2$a=["onClick"],_hoisted_3$8={class:"order_list_item_icon"},_hoisted_4$5=_withScopeId$4((()=>createBaseVNode("div",{class:"child"},null,-1))),_hoisted_5$4=[_hoisted_4$5],_sfc_main$c=defineComponent({__name:"List",props:{type:{default:"active"}},setup(e,{expose:t}){const n=e;useCssVars((e=>({"7f412f8b":unref(a).width,"3c9811d7":unref(A).top,"7f754748":unref(T)})));const i=ref(),o=ref(),{language:r}=storeToRefs(useMainStore()),a=computed((()=>"zh"===(null==r?void 0:r.value)?{width:"70px"}:{width:"90px"})),{activeCmdList:s,modelCmdList:l,activeIndex:c,tryIndex:u,isLock:d,sendSportModeCmd:h,sportCmdLoading:p,joystickIsDynamic:f,cmdOverStateQuery:g}=useSportCmd(n.type,"black");let m=0,_=0;const v=ref();let b=0;const T=ref("76px"),A=ref({top:"0px"}),y=ref(!1);return onMounted((()=>{if(m=i.value.offsetHeight,_=o.value.offsetHeight,b=v.value.offsetHeight,T.value=`${Math.floor(_/m*b)}px`,m>_){y.value=!0;new BScroll(o.value,{scrollY:!0,probeType:3,click:!0}).on("scroll",(e=>{const t=Math.floor(-e.y/m*b);A.value.top=`${t}px`}))}else y.value=!1;nextTick((()=>"model"===n.type&&g()))})),t({cmdOverStateQuery:g}),(e,t)=>{const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",{ref_key:"listContainer",ref:o,class:"list-content-container"},[createBaseVNode("div",{ref_key:"list",ref:i,class:"list-content"},[(openBlock(!0),createElementBlock(Fragment,null,renderList("active"===e.type?unref(s):unref(l),((e,t)=>{return openBlock(),createElementBlock("div",{key:t,class:normalizeClass(["order_list_item",(unref(p)||unref(f))&&(unref(u)===t?"loading":"disable"),unref(d)&&"jointLock"!==e[1]&&"lock"]),onClick:()=>unref(h)(e,t)},[createBaseVNode("div",_hoisted_3$8,[createVNode(n,{class:"svg_bg",name:unref(c)===t?"remoteControl/order_on_bg":"remoteControl/order_bg"},null,8,["name"]),unref(p)&&unref(u)===t?(openBlock(),createBlock(n,{key:0,class:"svg_icon_loading",name:"remoteControl/icon_loading"})):(openBlock(),createBlock(n,{key:1,class:"svg_icon",name:(i=e[3],o=unref(c)===t,o?i.replace("_black","_white"):i)},null,8,["name"]))]),createBaseVNode("span",{class:"order_name",style:normalizeStyle({fontSize:"zh"===unref(r)?"16px":"12px"})},toDisplayString$1(e[2]),5)],10,_hoisted_2$a);var i,o})),128))],512)],512),createBaseVNode("div",{class:"curr-scroll-bar",style:normalizeStyle({opacity:unref(y)?"1":"0"})},[createBaseVNode("div",{ref_key:"scrollBar",ref:v,class:"child-container"},_hoisted_5$4,512)],4)])}}}),List=_export_sfc(_sfc_main$c,[["__scopeId","data-v-4125045f"]]),_hoisted_1$b={class:"order-list-wrapper"},_hoisted_2$9={class:"list-menu"},_hoisted_3$7={class:"list-wrapper"},_sfc_main$b=defineComponent({__name:"OrderList",props:{listHeight:{default:332}},setup(e){useCssVars((e=>({"6101cfe7":unref(i).width,"8eb0e5e2":unref(i).leftPosition,"945a56f4":unref(i).rightPosition})));const{language:t}=storeToRefs(useMainStore()),n=ref(),i=computed((()=>"zh"===(null==t?void 0:t.value)?{width:"20px",leftPosition:"6px",rightPosition:"75px"}:{width:"30px",leftPosition:"8px",rightPosition:"65px"})),o=ref(1),r=e=>{var t;o.value=e,2===e&&(null===(t=n.value)||void 0===t||t.cmdOverStateQuery())};return(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("div",{class:"menu-item",onClick:t[0]||(t[0]=e=>r(1))},toDisplayString$1(e.$t("action")),1),createBaseVNode("div",{class:"menu-item",onClick:t[1]||(t[1]=e=>r(2))},toDisplayString$1(e.$t("mode")),1),createBaseVNode("div",{class:normalizeClass(["menu-line",1===unref(o)?"left":"right"])},null,2)]),createBaseVNode("div",{class:"list-cont",style:normalizeStyle({height:`${e.listHeight}px`})},[createBaseVNode("div",_hoisted_3$7,[createBaseVNode("div",{class:normalizeClass(["list-wrapper-body",1===unref(o)?"left":"right"])},[createVNode(List,{type:"active",style:{"margin-right":"30px"}}),createVNode(List,{ref_key:"modelList",ref:n,type:"model"},null,512)],2)])],4)]))}}),OrderList=_export_sfc(_sfc_main$b,[["__scopeId","data-v-1b8f03b8"]]),useRemoteControl=()=>{const{sportCmdLoading:e,emergencyStopState:t,currSportModel:n}=storeToRefs(useDeviceStore()),{webRtc:i,windowWidth:o,windowHeight:r,language:a}=storeToRefs(useMainStore()),s=null==i?void 0:i.value;provide("webRTC",s);const l=computed((()=>n.value===SPORT_STATE.JointLock)),c=ref({angle:0,percentage:0,stop:!0}),u=computed((()=>`${null==a?void 0:a.value}_operaListKey`));return provide("joystickIsDynamic",computed((()=>!c.value.stop))),listerJoystickChange$1(s,c),{webRtc:i,moveDirection:c,joystickAction:(e,t)=>{c.value.angle=e,c.value.percentage=t,c.value.stop=!1},joystickStop:()=>{c.value.angle=0,c.value.percentage=0,c.value.stop=!0},windowWidth:o,windowHeight:r,operaListKey:u,sportCmdLoading:e,emergencyStopState:t,isLock:l}};function listerJoystickChange$1(e,t){const n={lx:0,ly:0,rx:0,ry:0};let i=0,o=!1;const r=()=>{null==e||e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,n)},a=()=>{o=!1,window.clearInterval(i),n.lx=n.ly=n.rx=n.ry=0,r()};watch((()=>t.value),(e=>{if(e.stop)n.rx=0,n.ly=0;else{const{currVSpeedScale:s}=disassembleMoveActiveSpeed(e),{yawSpeed:l}=disassembleViewActiveSpeed(e);n.ly=s,n.rx=l,o||o||(o=!0,i=window.setInterval((()=>{r(),t.value.stop&&a()}),50))}}),{deep:!0})}const _hoisted_1$a={class:"control-cont"},_sfc_main$a=defineComponent({__name:"RemoteControl",setup(e){const{topLeft:t}=storeToRefs(useDeviceStore()),{joystickAction:n,joystickStop:i,windowWidth:o,windowHeight:r,operaListKey:a,sportCmdLoading:s,emergencyStopState:l,isLock:c}=useRemoteControl(),u=computed((()=>{const e=(null==o?void 0:o.value)||window.innerWidth,n=(null==r?void 0:r.value)||window.innerHeight,i=(e>n?e:n)-58-20-28.5-20-t.value;return{width:Math.floor(.45*i),dWidth:Math.floor(.12*i),listHeight:Math.floor(.45*i),marginTop:Math.floor(.05*i)}}));return console.log(u.value),(e,o)=>{const r=_sfc_main$K;return openBlock(),createElementBlock("div",{class:"control-body",onClick:o[0]||(o[0]=withModifiers((()=>{}),["stop"]))},[createBaseVNode("div",_hoisted_1$a,[createBaseVNode("div",{class:"setting",style:normalizeStyle({marginTop:`${unref(t)}px`})},[createVNode(Radar,{style:{"margin-right":"0",background:"none",border:"none"},"active-type":"opacity","icon-width":28}),createVNode(Volume,{style:{"margin-right":"0",background:"none",border:"none"},"icon-width":28,"active-type":"opacity"}),createVNode(Lamp,{style:{"margin-right":"0",background:"none",border:"none"},"icon-width":28,"active-type":"opacity"}),createVNode(Network,{"show-type":"0",style:{"margin-right":"0",background:"none",border:"none",padding:"0"}})],4),(openBlock(),createBlock(OrderList,{key:unref(a),"list-height":unref(u).listHeight},null,8,["list-height"])),createBaseVNode("div",{class:"joystick-box",style:normalizeStyle({marginTop:`${unref(u).marginTop||0}px`})},[createVNode(r,{class:normalizeClass(["joystick-component",(unref(s)||unref(l)||unref(c))&&"disable"]),"d-width":unref(u).dWidth,width:unref(u).width,height:unref(u).width,"joystick-bg-img":"svg:remoteControl/joystick_bg","joystick-active-img":"svg:remoteControl/joystick-active2",disable:unref(s)||unref(l)||unref(c),onAngleChange:unref(n),onActionStop:unref(i)},null,8,["class","d-width","width","height","disable","onAngleChange","onActionStop"])],4)])])}}}),RemoteControl=_export_sfc(_sfc_main$a,[["__scopeId","data-v-630fb873"]]),_withScopeId$3=e=>(pushScopeId("data-v-ea637905"),e=e(),popScopeId(),e),_hoisted_1$9={id:"slamMapPage",class:"map_page"},_hoisted_2$8={class:"title_bar"},_hoisted_3$6=_withScopeId$3((()=>createBaseVNode("img",{class:"icon-back",src:_imports_0$6,style:{width:"9px",height:"17px"}},null,-1))),_hoisted_4$4=[_hoisted_3$6],_hoisted_5$3={class:"page_title"},_hoisted_6$3=["onClick"],_hoisted_7$3={class:"preview_img"},_hoisted_8$3=["src"],_hoisted_9$2=["src"],_hoisted_10$1={class:"operation"},_hoisted_11$1={class:"map_name"},_hoisted_12={class:"map_name_info"},_hoisted_13={class:"name"},_hoisted_14={key:0,class:"time"},_hoisted_15=["onClick"],_hoisted_16={class:"btn_wrap"},_hoisted_17=["onClick"],_hoisted_18=["onClick"],_hoisted_19={key:0,class:"select_map"},_sfc_main$9=defineComponent({__name:"MapList",props:{visible:{type:Boolean,default:!1},mapList:{default:()=>[]}},emits:["back","add","del","edit","editName","selectMap"],setup(e,{emit:t}){const n=e,i=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAdRJREFUaEPtWVtuAzEI9J6s4WRtTkZysrasnMpywDv4EW0q8heJhRnAYxtvadGPmb9SSp/Z/ZWI5P/03zbdY3bIzN+VbyKi2+x4Swgw8yWlxEEAKFdUQEvSKVoogxAVkX52qcgMApWKmQJgtpCiIjCJUQIVeCnyTRho1fYQkO8hEiMEFPA7biJSsbYIlBtRSR4lITIq7dfMYOnYAt9KXFOFehwqgKT8hxtYb6xDGe11DEj4n8lIjEMCEsXblx7w2X997IDXG0TAImEtrA4C5XqBwYshTKAiIT0ti/mwtxEyxZ4j5nfPydVFAAHzapsg8OqM1/GiAlGBwQzsLZRlzHQ1Sy69WFu4Hpi2xjZexjOPs15QqD3/AisOg9ZnVyGgbePaB0umClogMKn7px4C0DEazXDLzrhPqJ+8fws9aCELZkZ2PT4QcYmNzJPRFbZRgRVZ9fiMCniytcLWVYG8Q35kICuulO4xJkzAM+7zZnpkjAkReOuxysjQCa3ESIzVo0Xp6QsyJukl8X+Hu8Y9ATpSn2W83j3uGyGQr7hPo/2e94HyqRTKfHU0H3pmLdZEc4wJySiqJjMJoDGDgHEpj5f607XQrMeQmtiSNaBIoUvF0OyL3Q9Y9E4yt4s8egAAAABJRU5ErkJggg==",module.meta.url).href,{topLeft:o}=storeToRefs(useDeviceStore()),r=ref();let a;return onMounted((()=>{a=new BScroll(r.value,{scrollX:!0,probeType:3,click:!0})})),watch((()=>n.mapList),(()=>{setTimeout((()=>{a.refresh()}),300)}),{deep:!0}),(e,n)=>{const a=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",{class:"btn-back",onClick:n[0]||(n[0]=()=>t("back"))},_hoisted_4$4),createBaseVNode("span",_hoisted_5$3,toDisplayString$1(e.$t("Slam.menu_1")),1)]),createBaseVNode("div",{ref_key:"listWrap",ref:r,class:"map_list"},[createBaseVNode("div",{class:"list_wrapper",style:normalizeStyle({paddingLeft:`${unref(o)+20}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.mapList,((n,o)=>(openBlock(),createElementBlock("div",{key:o,class:"map_item",onClick:()=>{n.isSelected||t("selectMap",o)}},[createBaseVNode("div",_hoisted_7$3,[n.pcdImageUrl?(openBlock(),createElementBlock("img",{key:1,class:"map_img",src:n.pcdImageUrl||""},null,8,_hoisted_9$2)):(openBlock(),createElementBlock("img",{key:0,class:"loading_img",src:unref(i)},null,8,_hoisted_8$3))]),createBaseVNode("div",_hoisted_10$1,[createBaseVNode("div",_hoisted_11$1,[createBaseVNode("div",_hoisted_12,[createBaseVNode("span",_hoisted_13,toDisplayString$1(n.pcdMapName||e.$t("Slam.msg_22")),1),n.createTime?(openBlock(),createElementBlock("span",_hoisted_14,toDisplayString$1(n.createTime),1)):createCommentVNode("",!0)]),createBaseVNode("div",{class:"map_name_edit",onClick:withModifiers((()=>t("editName",o)),["stop"])},[createVNode(a,{name:"slam/icon_edit",style:{width:"15px",height:"16px"}})],8,_hoisted_15)]),createBaseVNode("div",_hoisted_16,[createBaseVNode("div",{class:"btn_add_route",onClick:withModifiers((()=>t("edit",o)),["stop"])},[createVNode(a,{name:"slam/icon_add_route",style:{width:"16px",height:"14px"}}),createTextVNode(" "+toDisplayString$1(`${n.topMapIndex?e.$t("Slam.editRoadNetWork"):e.$t("Slam.addRoadNetWork")}`),1)],8,_hoisted_17),createBaseVNode("div",{class:"btn_del",onClick:withModifiers((()=>t("del",o)),["stop"])},[createVNode(a,{name:"slam/icon_del",style:{width:"14px",height:"14px"}}),createTextVNode(" "+toDisplayString$1(e.$t("Slam.del")),1)],8,_hoisted_18)])]),1==e.mapList.length&&0==o||n.isSelected?(openBlock(),createElementBlock("div",_hoisted_19,[createVNode(a,{name:"slam/icon_select_map",style:{width:"36px",height:"36px"}})])):createCommentVNode("",!0)],8,_hoisted_6$3)))),128))],4)],512),createBaseVNode("div",{class:"btn_add_map",onClick:n[1]||(n[1]=()=>t("add","slamMapPage"))},[createVNode(a,{name:"slam/icon_btn_add_map"})])])}}}),MapList=_export_sfc(_sfc_main$9,[["__scopeId","data-v-ea637905"]]),_hoisted_1$8=["value","onClick"],_sfc_main$8=defineComponent({__name:"Input",props:{value:{default:"3"}},emits:["update:value"],setup(e,{emit:t}){const n=ref(),i=()=>{let e=n.value.value.replace(/\D/g,"");n.value.value=e,t("update:value",e)},o=()=>{n.value.value?parseInt(n.value.value)>60&&(n.value.value="60",t("update:value","60")):(n.value.value="0",t("update:value","0"))};return(e,t)=>(openBlock(),createElementBlock("input",{ref_key:"inputRef",ref:n,class:"custom-input",value:e.value,type:"number",maxlength:"5",max:"100",min:"1",onInput:i,onBlur:o,onClick:withModifiers((e=>!1),["stop"])},null,40,_hoisted_1$8))}}),_withScopeId$2=e=>(pushScopeId("data-v-09fdd6d0"),e=e(),popScopeId(),e),_hoisted_1$7={class:"all_task_list_wrap"},_hoisted_2$7=_withScopeId$2((()=>createBaseVNode("span",null,"s",-1))),_hoisted_3$5=_withScopeId$2((()=>createBaseVNode("span",null,"s",-1))),_sfc_main$7=defineComponent({__name:"AllTaskList",emits:["select"],setup(e,{emit:t}){const n=ref("3"),i=ref("3"),o=(e,n)=>{t("select",e,n)};return(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",null,[createBaseVNode("div",{class:"all_task_list_item",onClick:t[1]||(t[1]=()=>o(unref(TaskType).Stand,unref(n)))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_1")),1),createVNode(_sfc_main$8,{value:unref(n),"onUpdate:value":t[0]||(t[0]=e=>isRef(n)?n.value=e:null)},null,8,["value"]),_hoisted_2$7]),createBaseVNode("div",{class:"all_task_list_item",onClick:t[2]||(t[2]=()=>o(unref(TaskType).Photo))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_2")),1)]),createBaseVNode("div",{class:"all_task_list_item",onClick:t[4]||(t[4]=()=>o(unref(TaskType).Video,unref(i)))},[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.task_3")),1),createVNode(_sfc_main$8,{value:unref(i),"onUpdate:value":t[3]||(t[3]=e=>isRef(i)?i.value=e:null)},null,8,["value"]),_hoisted_3$5])])]))}}),AllTaskList=_export_sfc(_sfc_main$7,[["__scopeId","data-v-09fdd6d0"]]),_withScopeId$1=e=>(pushScopeId("data-v-8a6f9bbc"),e=e(),popScopeId(),e),_hoisted_1$6={class:"task_wrapper"},_hoisted_2$6={class:"title"},_hoisted_3$4={class:"task_list_wrapper"},_hoisted_4$3={class:"curr_selected_task"},_hoisted_5$2=["onClick"],_hoisted_6$2=["onClick"],_hoisted_7$2={key:0,style:{"margin-left":"4px"}},_hoisted_8$2=["onClick"],_hoisted_9$1=_withScopeId$1((()=>createBaseVNode("img",{src:_imports_0$5},null,-1))),_hoisted_10=[_hoisted_9$1],_hoisted_11={class:"all_task_list"},_sfc_main$6=defineComponent({__name:"Task",props:{currPointId:{}},setup(e,{expose:t}){const n=e,i=ref(),o=new Map,r=ref([]);let a,s=0;const l=()=>{r.value.push({type:TaskType.Stand,data:"3",open:!1}),window.setTimeout((()=>a.refresh()),300)},c=e=>{r.value[e].open=!r.value[e].open,window.setTimeout((()=>a.refresh()),300)};return watch((()=>n.currPointId),(e=>{e?(e=>{const t=o.get(e);if(t)r.value=t;else{const t=[];r.value=t,o.set(e,t)}s=e})(e):s=0})),onMounted((()=>{a=new BScroll(i.value,{scrollY:!0,probeType:3,click:!0})})),t({delPoint:e=>{o.delete(e),s===e&&(r.value=[])},getAllTaskJson:()=>{const e=[];for(const[t,n]of o.entries())e.push([t,n.map((e=>({type:e.type,data:e.data})))]);return e},initTaskList:e=>{o.clear(),e.forEach((e=>{o.set(e[0],e[1].map((e=>({type:e.type,data:e.data,open:!1}))))}))},queryPointTask:e=>o.get(e)}),(e,t)=>{const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,toDisplayString$1(e.$t("Slam.msg_23")),1),createBaseVNode("div",{ref_key:"listRef",ref:i,class:"task_list"},[createBaseVNode("div",_hoisted_3$4,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),((t,i)=>(openBlock(),createElementBlock("div",{key:i,class:normalizeClass(["task_item",t.open?"open":"close"])},[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",{class:"curr_task_del_btn",onClick:()=>(e=>{r.value.splice(e,1),window.setTimeout((()=>a.refresh()),300)})(i)},[createVNode(n,{name:"slam/icon_del_task"})],8,_hoisted_5$2),createBaseVNode("span",{onClick:()=>c(i)},[createBaseVNode("span",null,toDisplayString$1(e.$t(`Slam.${unref(TaskTypeMap)[t.type]}`)),1),[unref(TaskType).Stand,unref(TaskType).Video].includes(t.type)?(openBlock(),createElementBlock("span",_hoisted_7$2,toDisplayString$1(t.data)+"s",1)):createCommentVNode("",!0)],8,_hoisted_6$2),createBaseVNode("div",{class:"arrow_wrap",onClick:()=>c(i)},_hoisted_10,8,_hoisted_8$2)]),createBaseVNode("div",_hoisted_11,[createVNode(AllTaskList,{onSelect:(e,t)=>((e,t,n)=>{r.value[e]={type:t,data:n,open:!1}})(i,e,t)},null,8,["onSelect"])])],2)))),128)),createBaseVNode("div",{class:"add_task_btn",onClick:l},[createVNode(n,{name:"slam/icon_add_task"})])])],512)])}}}),Task=_export_sfc(_sfc_main$6,[["__scopeId","data-v-8a6f9bbc"]]),_hoisted_1$5={class:"tip_body"},_hoisted_2$5=["innerHTML"],_sfc_main$5=defineComponent({__name:"Tip",emits:["update:visible"],setup(e,{expose:t,emit:n}){const i=ref(!1),o=ref("");let r=0;const a=(e=3)=>{r&&window.clearTimeout(r),r=window.setTimeout((()=>{i.value=!1,n("update:visible",!1)}),1e3*e)},s=()=>{i.value=!1};return t({showTip:(e,t=3)=>{i.value?(i.value=!1,window.setTimeout((()=>{o.value=e,i.value=!0,a(t)}),300)):(o.value=e,i.value=!0,a(t))}}),(e,t)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["tip_wrapper",!unref(i)&&"hide"])},[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("div",{innerHTML:unref(o)||""},null,8,_hoisted_2$5),createBaseVNode("img",{class:"icon_close",src:_imports_0$4,onClick:s})])],2))}}),Tip=_export_sfc(_sfc_main$5,[["__scopeId","data-v-571d91a9"]]),_hoisted_1$4={class:"slam_top_bar_wrapper"},_hoisted_2$4={class:"left"},_hoisted_3$3={class:"title"},_hoisted_4$2={class:"right"},_sfc_main$4=defineComponent({__name:"TopBar",props:{title:{}},emits:["close"],setup(e,{emit:t}){const{topLeft:n}=storeToRefs(useDeviceStore()),i=()=>{t("close"),webToApp("backToApp","")};return(e,t)=>{const o=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",{class:"top_bar_cont",style:normalizeStyle({paddingLeft:`${Math.max(unref(n),30)}px`})},[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",{class:"btn-back",onClick:i},[createVNode(o,{class:"icon-back",name:"slam/icon_left_arrow"})]),createBaseVNode("span",_hoisted_3$3,toDisplayString$1(e.title),1)]),createBaseVNode("div",_hoisted_4$2,[createVNode(Power)])],4)])}}}),TopBar=_export_sfc(_sfc_main$4,[["__scopeId","data-v-36a87161"]]),_hoisted_1$3={class:"video-wrapper"},_hoisted_2$3=["id"],_sfc_main$3=defineComponent({__name:"VideoSlam",props:{isPhoto:{type:Boolean},photoImg:{},videoType:{},videoId:{},visible:{type:Boolean}},emits:["update:isPhoto"],setup(e,{emit:t}){const n=e,i=inject("webRTC"),{series:o}=storeToRefs(useDeviceStore()),r=ref(),a=ref();let s=0;const l=()=>{useRTC((e=>{"connected"===(null==e?void 0:e.getConnectionState())?e.playVideo(o.value,n.videoId):null==e||e.onConnectionStateChange((t=>{"connected"===t&&e.playVideo(o.value,n.videoId)}))}),i)()},c=()=>{n.visible&&(null==i||i.publish(["G1","H1"].includes(o.value)?RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB:RTC_TOPIC.FRONT_VIDEO_HUB,"on",DataChannelType.VID),l())},u=useRTC((e=>{null==i||i.onValidationOK(c),r.value&&(r.value.oncanplaythrough=()=>{console.log("开始播放视频")},r.value.onerror=()=>{console.log("video ---  onerror")},r.value.onemptied=()=>{var e;console.log("video ---  onemptied"),null===(e=document.getElementById(n.videoId))||void 0===e||e.play()},r.value.onloadeddata=()=>{console.log("video ---  onloadeddata"),s&&window.clearTimeout(s)},r.value.onloadedmetadata=()=>{console.log("video ---  onloadedmetadata"),s&&window.clearTimeout(s)},n.visible&&l())}),i);return onMounted(u),onUnmounted((()=>{null==i||i.removeValidationOKListen(c)})),listenAppToWeb("appSendWebviewState",(e=>{"0"===e&&s&&window.clearTimeout(s),"1"===e&&(s=window.setTimeout((()=>{console.log("开启视频后，十秒未出现画面，再次挂载视频流"),useRTC((e=>{e.playVideo(o.value)}),i)}),1e4))})),watch((()=>n.visible),(e=>{e&&l()})),watch((()=>n.isPhoto),(e=>{e&&window.setTimeout((()=>{t("update:isPhoto",!1)}),500)})),watch((()=>n.photoImg),(e=>{e&&showScreenshot(n.photoImg,document.getElementById("album-entrance"),a.value)})),onUnmounted((()=>{window.clearInterval(0)})),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("video",{id:e.videoId,ref_key:"videoRef",ref:r,name:"unitreeVideoDom",class:"video-class",autoplay:"false",loop:"",muted:"",playsinline:"true","webkit-playsinline":"true","x5-playsinline":"true","x-webkit-airplay":"true"},null,8,_hoisted_2$3)]))}}),VideoSlam=_export_sfc(_sfc_main$3,[["__scopeId","data-v-f59e85f2"]]);var SLAM_STATE_MACHINE=(e=>(e[e.Idle=0]="Idle",e[e.error=100]="error",e[e.sendStartBuild=199]="sendStartBuild",e[e.buildingMap=200]="buildingMap",e[e.sendStopBuild=201]="sendStopBuild",e[e.sendLoadMap=202]="sendLoadMap",e[e.mapLoaded=203]="mapLoaded",e[e.readySettingRoadNetwork=204]="readySettingRoadNetwork",e[e.settingRoadNetwork=205]="settingRoadNetwork",e[e.navigation=300]="navigation",e[e.enableRelocation=400]="enableRelocation",e[e.initRelocationCompleted=500]="initRelocationCompleted",e[e.navigationOpen=600]="navigationOpen",e))(SLAM_STATE_MACHINE||{});const SLAM_STATE_MACHINE_MAP={0:0,100:100,200:200,300:300,400:400,500:500,600:600},useModalHook=(e,n)=>{const i=ref(0);return{showLoadingModal:(o,r=(()=>n()))=>{e.showLoading(),i.value&&window.clearTimeout(i.value),i.value=window.setTimeout((()=>{e.showModal({type:"alert",content:t("Slam.timeout")}).then((()=>{null==r||r()}))}),o||3e4)},closeLoadingModal:()=>{e.closeLoading(),i.value&&window.clearTimeout(i.value)}}},useCommon=(n,i,o,r,a,s,l)=>{const{transformMapPosition:c,transformMapPositionRevers:u,dealRobotPoseData:d}=commonUtils(i,l),{series:h,sportMode:p}=storeToRefs(useDeviceStore()),f=ref(!1),g=ref(!1),m=ref((e=>{})),_=ref(0),v=ref(0),b=ref({position:{x:0,y:0},yaw:0,startTime:0,timeShowText:"00:00:00",progress:0}),T=throttle((()=>ToastMsg(t("Slam.msg_34"))),1e3,{trailing:!1}),A=ref(""),y=ref(0),E=new Map,S=new Map,C=new Map,w=new Map,x=ref(!1),M=ref(!1),R=ref(!1),I=ref(!1),D=ref(),k=ref(0),L={max_x:-999,min_x:99999,max_y:-999,min_y:9999};let O;const P=function(){var e=_asyncToGenerator((function*(){i.clearStage(),r.value=SLAM_STATE_MACHINE.Idle,o.setMapPageState(!1),$(),i.removeStageEvent("all"),g.value=!1,I.value=!1,b.value={position:{x:0,y:0},yaw:0,startTime:0,timeShowText:"00:00:00",progress:0},v&&window.clearInterval(v.value),yield ee(),yield n.mapTypeSettingReq(1,0),yield n.setChunksSettingReq(0,0),yield z(),K()}));return function(){return e.apply(this,arguments)}}(),{showLoadingModal:N,closeLoadingModal:$}=useModalHook(o,P),B=throttle((()=>{var e;null===(e=O)||void 0===e||e()}),1e3,{trailing:!1}),F=()=>{var e;(o.setHideOperaBar(!1),n.pauseNavigationReq(),f.value=!1,"patrol"===o.slamWorkModel.value)&&(v&&window.clearInterval(v.value),b.value.timeShowText="00:00:00",b.value.progress=0,null===(e=D.value)||void 0===e||e.call(D,null),k.value&&(o.actionVideo("cancel"),window.clearInterval(k.value),k.value=0))};function U(){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator((function*(){if(I.value)return Promise.resolve();const e="B2"===h.value&&p.value.includes("-w"),t=!e&&"balanceStand"!==o.currSportState.value,i=e&&["damp","lieDown"].includes(o.currSportState.value);if(t||i){I.value=!0;const e=window.setTimeout((()=>{I.value=!1}),1e4);["damp","lieDown"].includes(o.currSportState.value)&&(yield o.sendStandUp(),yield n.sleepPromise(6e3)),yield o.sendWalkStair(),e&&window.clearTimeout(e),I.value=!1}})),G.apply(this,arguments)}function V(){return V=_asyncToGenerator((function*(){if(o.getPowerState().isCharge){if(yield U(),!f.value)return;return g.value=!0,yield new Promise(function(){var e=_asyncToGenerator((function*(e){yield n.multiPointCircularNavigationPlusReq([9e3],!0),m.value=e}));return function(t){return e.apply(this,arguments)}}())}{const e=i.getAllPointNodeData().find((e=>9001==e.name));if(!e)return;const t=i.getRobotDirPoints();if(null==t||!t.robotPoint)return;if(getDistance$1(e.position,null==t?void 0:t.robotPoint)>10)return;if(console.log("距离充电点很近，判断为充电"),yield U(),!f.value)return;return g.value=!0,yield new Promise(function(){var e=_asyncToGenerator((function*(e){yield n.multiPointCircularNavigationPlusReq([9e3],!0),m.value=e}));return function(t){return e.apply(this,arguments)}}())}})),V.apply(this,arguments)}function H(){return!f.value&&!o.hideOperaBar.value}const W=function(){var i=_asyncToGenerator((function*(i){var r;if(console.log("导航执行反馈",i,o.slamWorkModel.value,f.value),g.value)(i.loop&&i.loop>=_.value||9e3===i.arrive)&&(console.log("退出充电点完成"),g.value=!1,null===(r=m.value)||void 0===r||r.call(m,"success"));else if("singlePoint"===o.slamWorkModel.value){if(1!==i.obstruct)return void T();f.value=!1,o.setHideOperaBar(!1)}else if("returnCharge"===o.slamWorkModel.value){if(1!==i.obstruct)return void T();if(9999===i.arrive){if(!f.value)return;n.returnChargeReq().then((e=>{console.log("回充结果",e)}))}if(9001===i.arrive){if(!f.value)return;console.logRed("到达充点电，可以蹲下了"),yield n.sleepPromise(5e3);try{yield o.sendLieDown()}catch(e){}finally{if(!f.value)return;if("returnCharge"!==o.slamWorkModel.value)return;f.value=!1,o.setHideOperaBar(!1),o.handleSelectWorkModel(void 0)}}}else if("patrol"===o.slamWorkModel.value){if(1!==i.obstruct)return void T();const e=i.all||0,r=i.finish||0,a=e*_.value,s=(i.loop||0)*e+r,l=Math.floor(s/a*100);if(b.value.progress=l>100?100:l,9999===i.arrive)console.log("发送导航指令"),yield n.multiPointCircularNavigationReq(),o.switchVideoTrack(!0);else if(1==i.task){const e=o.queryPointNodeTask(Number(i.arrive));if(console.log("点任务",e),e&&e.length>0){yield n.pauseNavigationReq();for(let t=0;t<e.length;t++){const i=e[t];if(i.type===TaskType.Photo){if(yield o.takePhoto(),console.logRed("拍照了"),H())return}else if(i.type===TaskType.Stand){const e=Number(i.data);if(yield n.pauseNavigationReq(),yield new Promise(function(){var t=_asyncToGenerator((function*(t){D.value=t,yield n.sleepPromise(1e3*(e+1)),t(null),D.value=void 0}));return function(e){return t.apply(this,arguments)}}()),H())return;console.logRed("停留了"+e+"秒")}else if(i.type===TaskType.Video){const e=Number(i.data);if(yield new Promise((t=>{D.value=t,o.actionVideo("start"),k.value=window.setTimeout((()=>{o.actionVideo("stop"),t(null),D.value=void 0}),1e3*e+500)})),H())return;console.logRed("录像了"+e+"秒")}}if(!f.value)return;n.recoverNavigationReq()}}i.loop&&i.loop>=_.value&&(n.pauseNavigationReq(),f.value=!1,v&&window.clearInterval(v.value),o.showModal({type:"alert",content:t("Slam.msg_21")}).then((()=>{_.value=0,b.value.progress=0,b.value.timeShowText="00:00:00",!o.showVideo.value&&o.switchVideoTrack(!1),F(),o.handleSelectWorkModel(void 0)})))}}));return function(e){return i.apply(this,arguments)}}();const z=()=>{n.queryPcdMapListReq().then((e=>{console.log("地图数据",e);const t=(e.pcdMapInfo?e.pcdMapInfo.split(","):[]).map((e=>{const t=e.split("_"),n=JSON.parse(gBase64.atob(t[2]));return{floorIndex:t[0],pcdMapIndex:t[1],pcdMapName:null!=n&&n.value?gBase64.decode(n.value):"",topMapIndex:t[3]?Number(t[3]):void 0,createTime:n.time}}));t.sort(((e,t)=>Number(t.pcdMapIndex)-Number(e.pcdMapIndex))),a.value=t}))},j=function(){var e=_asyncToGenerator((function*(){if(a.value)for(let e=0;e<a.value.length;e++)yield Q(Number(a.value[e].floorIndex),Number(a.value[e].pcdMapIndex)),yield n.sleepPromise(500)}));return function(){return e.apply(this,arguments)}}();function X(){return(X=_asyncToGenerator((function*(e,t){const i=yield n.queryTopMapListReq();if(null==i||!i.topoMapInfo)return[];i.topoMapInfo.split(",").map((e=>e.split("_").map((e=>Number(e))))).filter((n=>(!e||n[0]===e)&&((!t||n[1]===t)&&!!n[2])))}))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator((function*(e){console.logRed("即将要加载地图",e),s.value=e;const t=yield function(e,t){return X.apply(this,arguments)}(Number(e.floorIndex),Number(e.pcdMapIndex));if(s.value.isSelected=!0,console.logRed("地图 top情况",t),N(),t&&t.length>0){const o=t[0];yield J(o[0],o[1],o[2]),yield Z(Number(e.floorIndex),o[1]),s.value.topMapIndex=o[2];const a=yield n.queryNodeEdgeList(o[0],o[1],o[2]);console.logRed("查询点边信息结果",a),window.setTimeout((()=>i.handleCenterStage()),1e3),window.setTimeout(j,3e3),r.value=SLAM_STATE_MACHINE.Idle}else console.logBlue("没有拓扑图"),yield Z(Number(e.floorIndex),Number(e.pcdMapIndex)),yield J(Number(e.floorIndex),Number(e.pcdMapIndex)),window.setTimeout((()=>i.handleCenterStage()),1e3),r.value=SLAM_STATE_MACHINE.Idle,window.setTimeout(j,3e3);$()})),q.apply(this,arguments)}const K=()=>{n.queryCurrMapInfoReq().then(function(){var e=_asyncToGenerator((function*(e){if(console.log("当前默认地图信息",JSON.stringify(e)),r.value=SLAM_STATE_MACHINE_MAP[100*Number(e.state)],console.log("当前状态",r.value),!(a.value.length<=0)){if(e.curTopoMap){const t=e.curTopoMap.split("_").map((e=>Number(e)));if(N(),a.value.forEach((e=>{e.floorIndex==t[0]&&e.pcdMapIndex==t[1]?(e.isSelected=!0,s.value=e):e.isSelected=!1})),yield J(t[0],t[1],t[2]),yield Z(t[0],t[1]),t[2]){s.value.topMapIndex=t[2];const e=yield n.queryNodeEdgeList(t[0],t[1],t[2]);console.logRed("查询点边信息结果",e)}r.value=SLAM_STATE_MACHINE.Idle,window.setTimeout((()=>i.handleCenterStage()),1e3),$(),window.setTimeout(j,3e3)}else{a.value.forEach((e=>e.isSelected=!1));Y(a.value[0])}R.value=!1}}));return function(t){return e.apply(this,arguments)}}())},Q=(e,t)=>new Promise(function(){var i=_asyncToGenerator((function*(i){const o=yield n.getPCDMapForIndexReq(e,t);if(1===o.feedback&&o.index){w.get(Number(o.index))?(i(o),w.delete(Number(o.index))):C.set(Number(o.index),(()=>i(o)))}else i(o)}));return function(e){return i.apply(this,arguments)}}()),Z=(e,t)=>new Promise((o=>{N(12e4),i.initKonvaStageState(),n.loadMapReq(e,t).then((e=>{if(console.log("加载地图结果",e),e.index){S.get(Number(e.index))?(o(e),S.delete(Number(e.index))):E.set(e.index,(()=>o("")))}}))})),J=(e,t,i)=>{console.logRed("修改默认pcd图",t,i),n.loadTopMapReq(e,t,0===i?void 0:i).then((e=>{}))},ee=()=>n.closeAllReq().then((e=>(R.value=!1,M.value=!1,x.value=!1,o.setShowInitRelocationPlus(!0),e)));return{transformMapPosition:c,transformMapPositionRevers:u,dealRobotPoseData:d,updateRobotPosition:e=>{const t=Number(e.positionX),n=Number(e.positionY),o=Number(e.orientationX),r=Number(e.orientationY),a=Number(e.orientationZ),s=Number(e.orientationW);L.max_x=Math.max(L.max_x,t),L.min_x=Math.min(L.min_x,t),L.max_y=Math.max(L.max_y,n),L.min_y=Math.min(L.min_y,n),(Math.abs(L.max_x-L.min_x)>=50||Math.abs(L.max_y-L.min_y)>=50)&&B();const l=d({x:t,y:n,z:0},{x:o,y:r,z:a,w:s});i.updateRobotPointPlus(l.position,l.yaw)},isOutCharge:g,outToCharge:function(){return V.apply(this,arguments)},currModeTaskState:f,isStandUpping:I,navigationProcessFeedback:W,patrolCount:_,patrolTimer:v,patrolSituation:b,updatePatrolSituation:function(e){e.position&&(b.value.position={x:e.position.x.toFixed(2),y:e.position.y.toFixed(2)}),void 0!==e.yaw&&(b.value.yaw=e.yaw.toFixed(2))},startPatrolTimeShow:function(){v.value&&window.clearInterval(v.value),b.value.startTime=performance.now(),v.value=window.setInterval((()=>{b.value.timeShowText=formatTime(performance.now()-b.value.startTime)}))},handleStop:F,showLoadingModal:N,closeLoadingModal:$,newMapNameTemp:A,newMapIndexTemp:y,loadMapResolveMap:E,loadMapImageOkMap:S,thumbanilMapResolveMap:C,thumbanilMapImageOkMap:w,hasInitRelocation:R,hasEnableRelocation:x,hasOpenNavigation:M,mappingRobotPosition:L,resetMappingRobotPositionTemp:()=>{L.max_x=-999,L.min_x=99999,L.max_y=-999,L.min_y=9999},openEnableRelocation:function(){return x.value?Promise.resolve({feedback:1,notice:"重定位节点已经开启过"}):(N(),n.enableRelocationReq().then((e=>(console.log("重定位开启结果：",e),1==e.feedback?x.value=!0:ToastMsg(t("Slam.msg_33")),$(),e))))},openMapNavigation:function(){return M.value?Promise.resolve({feedback:1,notice:"导航节点已经开启过"}):(N(),n.turnOnNavigationReq().then((e=>(console.log("导航节点开启结果",e),1==e.feedback?M.value=!0:ToastMsg(t("toastMsg_20")),$(),e))))},closeAllFunc:ee,init:P,loadMap:Z,loadPcdTopMap:J,getAllPcdMap:z,getCurrMapInfo:K,getAllPcdMapImage:j,loadPcdMapToScreen:Y,getSinglePcdMapImage:Q,standUpJudge:U,setSaveOperationFn:e=>{O=e}}};function commonUtils(e,t){function n(n){const{mapImgSize:i}=e,o=t.value.res_||.05;return{x:(n.x/o+t.value.x_||0)*i.value.scale,y:(-n.y/o+t.value.y_||0)*i.value.scale}}return{transformMapPosition:function(n){const{mapImgSize:i}=e,o=t.value.res_||.05;return{x:(n.x/i.value.scale-(t.value.x_||0))*o,y:0-(n.y/i.value.scale-(t.value.y_||0))*o}},transformMapPositionRevers:n,dealRobotPoseData:function(e,t){return{position:n(e),yaw:quaternionToEulerYaw(t)}}}}const useMapManageHook=(e,n,i,o,r,a,s)=>{const{startBuildMapReq:l}=e,{initKonvaStageState:c,handleCenterStage:u,clearStage:d,genRobotPoint:h,removeStageEvent:p,bindStageEvent:f}=n,{showLoadingModal:g,closeLoadingModal:m,openEnableRelocation:_,openMapNavigation:v,getSinglePcdMapImage:b,loadMap:T,loadPcdTopMap:A,getAllPcdMap:y,getCurrMapInfo:E,getAllPcdMapImage:S,loadPcdMapToScreen:C,standUpJudge:w,resetMappingRobotPositionTemp:x,closeAllFunc:M,newMapNameTemp:R}=o,I=function(){var e=_asyncToGenerator((function*(e){i.showModal({type:"input",title:t("Slam.createMapTitle"),verifyFn:e=>{if(!e.trim())return ToastMsg(t("Slam.msg_26")),!1;if(Array.from(e).length>10)return ToastMsg(t("Slam.msg_24")),!1;if(/[\/\\:*?"<>|]/.test(e))return ToastMsg(t("Slam.msg_25")),!1;if(emojiRegex().test(e))return ToastMsg(t("Slam.msg_30")),!1;const n=a.value.filter((t=>t.pcdMapName===e)).length<=0;return n||ToastMsg(t("Slam.mapNameRepeat")),n}},e).then(function(){var n=_asyncToGenerator((function*(n){"slamMapPage"===e&&i.setMapPageState(!1),i.setHideJoystick(!0),g(),i.showHelpTip(t("Slam.help_tip_2")),R.value=n,yield M(),d(),l().then(_asyncToGenerator((function*(){h(),x(),m(),p("layerBg"),i.setHideJoystick(!1),yield w(),s.value={pcdMapName:R.value},c()})))}));return function(e){return n.apply(this,arguments)}}()).catch((()=>{console.log("取消")}))}));return function(t){return e.apply(this,arguments)}}(),D=function(){var n=_asyncToGenerator((function*(n){const o=a.value[n];i.showModal({type:"ask",content:t("Slam.msg_1"),iconType:"edit"},"slamMapPage").then(_asyncToGenerator((function*(){if(d(),yield M(),s.value=o,yield T(Number(o.floorIndex),Number(o.pcdMapIndex)),o.topMapIndex){const t=yield e.queryNodeEdgeList(Number(o.floorIndex),Number(o.pcdMapIndex),Number(o.topMapIndex));console.logRed("查询点边信息结果",t)}r.value=SLAM_STATE_MACHINE.mapLoaded,i.setMapPageState(!1),yield _(),yield v(),i.setHideJoystick(!1),r.value=SLAM_STATE_MACHINE.enableRelocation,f("layerBg"),i.showHelpTip(t("Slam.help_tip_1")),m()}))).catch((()=>{console.log("取消编辑")}))}));return function(e){return n.apply(this,arguments)}}();return{getAllPcdMap:y,loadPcdTopMap:A,getAllPcdMapImage:S,getSinglePcdMapImage:b,loadMap:T,loadPcdMapToScreen:C,getCurrMapInfo:E,handleAddMap:I,handleEditTopMap:D,handleEditPCDName:n=>{i.showModal({type:"input",title:t("Slam.modifyMapName"),verifyFn:e=>{if(!e.trim())return ToastMsg(t("Slam.msg_26")),!1;if(Array.from(e).length>10)return ToastMsg(t("Slam.msg_24")),!1;if(/[\/\\:*?"<>|]/.test(e))return ToastMsg(t("Slam.msg_25")),!1;if(emojiRegex().test(e))return ToastMsg(t("Slam.msg_30")),!1;const n=a.value.filter((t=>t.pcdMapName===e)).length<=0;return n||ToastMsg(t("Slam.mapNameRepeat")),n}},"slamMapPage").then(function(){var t=_asyncToGenerator((function*(t){const i=a.value[n],o={value:gBase64.encode(t),time:i.createTime||""},r=yield e.editPCDMapNameReq(Number(i.floorIndex),Number(i.pcdMapIndex),gBase64.encode(JSON.stringify(o)));console.log("编辑结果",r),1===r.feedback&&(a.value[n].pcdMapName=t)}));return function(e){return t.apply(this,arguments)}}()).catch((()=>{console.log("取消编辑")}))},handleDelMap:n=>{i.showModal({type:"ask",content:t("Slam.msg_2")},"slamMapPage").then((()=>{console.log("删除地图",n);const o=a.value[n];e.deletePcdMapReq(Number(o.floorIndex),Number(o.pcdMapIndex)).then((e=>{console.log("删除PCD图结果",e),1===e.feedback?(a.value.splice(n,1),a.value.length>0?o.pcdMapIndex===s.value.pcdMapIndex&&(console.log("加载第一张图",a.value,a.value[0]),C(a.value[0]),i.setMapPageState(!1)):(d(),M(),s.value={},i.setMapPageState(!1))):ToastMsg(t("toastMsg_20"))}))})).catch((()=>{console.log("取消删除")}))},handleSelectMap:n=>{i.showModal({type:"ask",content:t("Slam.msg_3")},"slamMapPage").then(_asyncToGenerator((function*(){g(),d();const t=a.value[n];if(yield M(),yield T(Number(t.floorIndex),Number(t.pcdMapIndex)),yield A(Number(t.floorIndex),Number(t.pcdMapIndex),Number(t.topMapIndex)),i.setMapPageState(!1),s.value=t,t.topMapIndex){const n=yield e.queryNodeEdgeList(Number(t.floorIndex),Number(t.pcdMapIndex),Number(t.topMapIndex));console.logRed("查询点边信息结果",n)}window.setTimeout((()=>u()),1e3),r.value=SLAM_STATE_MACHINE.Idle,m(),a.value.forEach((e=>{e.floorIndex==t.floorIndex&&e.pcdMapIndex==t.pcdMapIndex?e.isSelected=!0:e.isSelected=!1}))}))).catch((()=>{console.log("取消加载")}))}}},useMsgReceiver=(e,n,i,o,r,a)=>{const{currModeTaskState:s}=o,l=throttle((()=>ToastMsg(t("Slam.msg_35"))),1e3,{trailing:!1}),c=new Map;return{messageListen:t=>{if(RTC_TOPIC.SLAM_QT_NOTICE==t.topic){const n=e.dealMsg(t);10001===n.index?o.navigationProcessFeedback(n):10002===n.index?l():10004===n.index&&(console.logRed("异常",n),"remotePause"===n.state?s.value=!1:"remoteRecover"===n.state?s.value=!0:"dampingState"===n.state&&o.handleStop())}else if(RTC_TOPIC.SLAM_PC_TO_IMAGE_LOCAL===t.topic){if(t.data.image_.encoding_.includes("relocationImage"))return;!function(e){var t,n,i;if(null===(t=e.data)||void 0===t||!t.image_)return;const a=e.data.image_.encoding_,s=a.split(";"),l={};if(s.forEach((e=>{const t=e.split(":");l[t[0]]=t[1]})),null!==(n=e.data)&&void 0!==n&&n.image_.enable_chunking){var u,d;const t=null===(u=e.data)||void 0===u?void 0:u.image_.total_chunk_num,n=null===(d=e.data)||void 0===d?void 0:d.image_.chunk_index,i=`${l.type}--${l.mapInfo}`;if(n<t)return void(c.get(i)?c.set(i,c.get(i)+e.data.image_.data_):c.set(i,e.data.image_.data_));e.data.image_.data_=(c.get(i)||"")+e.data.image_.data_,c.delete(i)}"/w=="==e.data.image_.data_?o.updateRobotPosition(l):null===(i=r.value)||void 0===i||i.postMessage(e.data)}(t)}else if(RTC_TOPIC.SLAM_BUILD_MAP_ODOMETRY===t.topic);else if(RTC_TOPIC.SLAM_RELOCATION_ODOMETRY===t.topic){if(a.value===SLAM_STATE_MACHINE.buildingMap)return;const{position:e,orientation:r}=t.data.pose.pose,s=o.dealRobotPoseData(e,r);n.updateRobotPointPlus(s.position,s.yaw,a.value!==SLAM_STATE_MACHINE.settingRoadNetwork),"patrol"===i.slamWorkModel.value&&o.updatePatrolSituation(_objectSpread({},s))}else RTC_TOPIC.SLAM_QUERY_ALL_NODE===t.topic?(e=>{const t=e.seq_.split(";"),o={};t.forEach((e=>{if(!e)return;const t=e.split(":");o[t[0]]=t[1]}));const r=decompressJsonData(o.task);i.initPointNodeTask(JSON.parse(r));const a=decompressJsonData(o.topoJson),s=o.mapScale,l=n.mapImgSize.value.scale;n.loadNodeEdgeJsonData(a,s,l)})(t.data):(RTC_TOPIC.SLAM_QUERY_ALL_EDGE,t.topic)}}},usePatrolHook=(e,n,i,o)=>{const{getAllPointNodeData:r}=n,{transformMapPosition:a,currModeTaskState:s,outToCharge:l,patrolCount:c,patrolSituation:u,startPatrolTimeShow:d,standUpJudge:h}=o,p=ref(!1),f=ref(!1);function g(){return m.apply(this,arguments)}function m(){return(m=_asyncToGenerator((function*(){if(yield l(),!s.value)return;const t=r().filter((e=>e.name<9e3));let o={x:0,y:0};const c=n.getRobotDirPoints();let u=0,h=9999,p={x:0,y:0},g=999,m=!1;if(c){o=c.robotPoint;for(const e of t){const t=e.position;t.x.toFixed(2)===o.x.toFixed(2)&&t.y.toFixed(2)===o.y.toFixed(2)&&(m=!0);const n=getDistance$1(t,o);h<n||(h=n,u=e.name,p=e.position,g=e.yaw)}}else u=t[0].name,p=t[0].position;if(console.log("最近的点",u,h),m){console.log("在路网上  直接开始巡逻");1==(yield e.multiPointCircularNavigationReq()).feedback&&d(),i.switchVideoTrack(!0)}else{console.log("不在路网上  单点到最近的点");const t=a(p);let n=0;if(g&&999!==g){n=0-g,n=n*Math.PI/180,console.logRed("查询到最近点",g,n)}else n=999;e.anyPointNavigationReq(_objectSpread(_objectSpread({},t),{},{z:0}),999),d()}f.value=!0}))).apply(this,arguments)}return{patrol:function(){const e=r().filter((e=>e.name<9e3));if(console.log("全部信息",e),e.length<=0)i.showModal({type:"ask",content:t("Slam.msg_18"),iconType:"question"});else if(!p.value)return i.showModal({type:"select",title:t("Slam.msg_19")}).then(function(){var e=_asyncToGenerator((function*(e){e&&(c.value=e,p.value=!0,f.value=!1,s.value=!0,i.setHideOperaBar(!0),u.value.timeShowText="00:00:00",nextTick((()=>p.value=!1)),yield h(),s.value&&g())}));return function(t){return e.apply(this,arguments)}}())},hasShowPatrolModal:p,patrolIsReady:f,patrolReadyWork:g}},useRelocationHook=(e,n,i,o)=>{const{getRobotDirPoints:r,bindStageEvent:a,removeStageEvent:s}=n,{showLoadingModal:l,closeLoadingModal:c,transformMapPosition:u,hasInitRelocation:d,hasEnableRelocation:h,hasOpenNavigation:p,openEnableRelocation:f,openMapNavigation:g}=o;function m(){const e=r();if(!e)return null;const{robotPoint:t,deg:n}=e,i=u(t),o=eulerToQuaternion(0,0,0-n);return{quaternion:{x:o.x,y:o.y,z:o.z,w:o.w},translation:_objectSpread(_objectSpread({},i),{},{z:0}),startPos:i}}const _=function(){var n=_asyncToGenerator((function*(){const n=m();if(!n)return i.showHelpTip(t("Slam.help_tip_1")),Promise.reject(t("Slam.msg_13"));if(d.value)return ToastMsg(t("Slam.msg_14")),{feedback:1,notice:t("Slam.msg_15")};l();const o=yield e.initRelocationReq(n.quaternion,n.translation);return console.log("初始化重定位结果",o),1==o.feedback?(s("layerBg"),d.value=!0,ToastMsg(t("Slam.msg_14")),c(),o):(ToastMsg(t("Slam.msg_32")),c(),null)}));return function(){return n.apply(this,arguments)}}(),v=function(){var e=_asyncToGenerator((function*(){if(d.value)return;if(m())return p.value||(yield f(),yield g()),_().then((e=>{if(1!=(null==e?void 0:e.feedback))return void ToastMsg(t("Slam.msg_40"));"singlePoint"===i.slamWorkModel.value&&a("layerNav"),i.setShowInitRelocationPlus(!1)})).catch((e=>{ToastMsg(t("Slam.msg_40"))}));i.showHelpTip(t("Slam.help_tip_1"))}));return function(){return e.apply(this,arguments)}}();return{hasEnableRelocation:h,hasInitRelocation:d,hasOpenNavigation:p,handleInitRelocation:()=>_().then((e=>{1===(null==e?void 0:e.feedback)&&i.showHelpTip(t("Slam.msg_12"))})),handleInitRelocationPlus:v,openEnableRelocation:f,openMapNavigation:g}},useReturnChargeHook=(e,n,i,o)=>{const{transformMapPosition:r,outToCharge:a,currModeTaskState:s,standUpJudge:l}=o,c=ref(!1);function u(){return(u=_asyncToGenerator((function*(){c.value=!1,i.setHideOperaBar(!0),s.value=!0;if("success"==(yield a())){if(!s.value)return;d(),c.value=!0}else{if(yield l(),!s.value)return;const i=n.getChargePointPos();if(!i)return void ToastMsg(t("Slam.msg_20"));const{readyPointPos:o}=i,a=r(o);e.anyPointNavigationReq(_objectSpread(_objectSpread({},a),{},{z:0}),999),c.value=!0}}))).apply(this,arguments)}const d=()=>{e.returnChargeReq().then((e=>{console.log("回充结果",e)}))};return{returnCharge:function(){return u.apply(this,arguments)},returnChargeIsReady:c,judgeRobotPoint:e=>{const t="chargePoint"==e?9001:9e3,i=n.getAllPointNodeData().find((e=>e.name==t));if(!i)return;const o=n.getRobotDirPoints();if(null==o||!o.robotPoint)return;const r=getDistance$1(i.position,null==o?void 0:o.robotPoint);return console.log("判断充电准备点和机器当前的位置",r),r<10},sendReturnChargeReq:d}},useSaveHook=(e,n,i,o,r,a,s,l)=>{const{addNodeReq:c,addEdgeReq:u,endBuildMapReq:d}=e,{mapImgSize:h,getAllEdgeData:p,getAllPointNodeData:f,getNodeEdgeJsonData:g,removeRobotPoint:m,bindStageEvent:_,clearStage:v,removeStageEvent:b,handleCenterStage:T}=n,{mappingRobotPosition:A,transformMapPosition:y,showLoadingModal:E,closeLoadingModal:S,newMapIndexTemp:C,newMapNameTemp:w,getSinglePcdMapImage:x,openEnableRelocation:M,openMapNavigation:R,loadMap:I,loadPcdTopMap:D,closeAllFunc:k}=o,L=(e,n,i,o)=>{const r=p();if(r.length<=0)return Promise.reject("");const a=new Set;r.forEach((e=>{a.add(e.startNodeName),a.add(e.endNodeName)}));const s=f();for(const l of s)if(!a.has(l.name))return ToastMsg(t("Slam.msg_36")),Promise.reject("");return c(e,n,i,s.map((e=>{if(e.position=y(e.position),e.yaw){const t=0-e.yaw;e.yaw=t*Math.PI/180}return e})).sort(((e,t)=>e.name-t.name)),o)},O=(e,n,i)=>{const o=p().map((e=>_objectSpread(_objectSpread({},e),{},{distance:N(e.startNodePosition,e.endNodePosition)})));return o.length<=0?(ToastMsg(t("Slam.msg_36")),Promise.reject("")):u(e,n,i,o)},P=(e,t,n)=>{const o=compressJsonData(g()),r=compressJsonData(JSON.stringify(i.getAllPointNodeTask())),a=L(e,t,n,`task:${r};topoJson:${o};mapScale:${h.value.scale};`),s=O(e,t,n);return Promise.all([a,s])};function N(e,t){const n=h.value.scale,i=e.x*n,o=e.y*n,r=t.x*n,a=t.y*n,s=Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))*(l.value.res_||.05);return Number(s.toFixed(2))}const $=()=>{const e=a.value.map((e=>Number(e.pcdMapIndex)));return e.length<=0?1:Math.max(...e)+1},B=()=>{C.value=$();const e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),o={value:gBase64.encode(w.value),time:`${t}-${n}-${i}`};return d(C.value,gBase64.btoa(JSON.stringify(o))).then((e=>(1===e.feedback&&(a.value.unshift({floorIndex:"1",pcdMapIndex:C.value.toString(),pcdMapName:w.value,createTime:`${t}-${n}-${i}`}),x(1,C.value)),e)))},F=()=>{r.value===SLAM_STATE_MACHINE.buildingMap?(E(12e4),B().then(function(){var e=_asyncToGenerator((function*(e){S(),A.max_x=-999,A.min_x=9999,A.max_y=-999,A.min_y=9999,1==e.feedback?(yield i.showModal({type:"alert",content:t("Slam.msg_5"),iconType:"tick"}),E(),r.value=SLAM_STATE_MACHINE.readySettingRoadNetwork,m(),yield I(1,C.value),yield D(1,C.value),s.value=a.value[0],yield M(),yield R(),r.value=SLAM_STATE_MACHINE.enableRelocation,_("layerBg"),S(),i.showHelpTip(t("Slam.help_tip_1"))):0==e.feedback&&(ToastMsg(t("toastMsg_20")),console.logRed("结束建图指令执行失败"),S(),s.value={})}));return function(t){return e.apply(this,arguments)}}())):r.value===SLAM_STATE_MACHINE.settingRoadNetwork&&i.showModal({type:"ask",iconType:"save",content:t("Slam.msg_6")}).then((()=>{i.setHideTaskWindow(!0),E();const n=s.value.floorIndex?Number(s.value.floorIndex):1,o=s.value.pcdMapIndex?Number(s.value.pcdMapIndex):1;P(n,o,1).then(function(){var i=_asyncToGenerator((function*([i,a]){if(S(),1==i.feedback&&1==a.feedback){E(),console.log("点边文件添加到缓存成功"),s.value.topMapIndex=1;if(1!=(yield e.saveNodeEdgeToMapReq(n,o,1)).feedback)return;v(),b("layerMain"),yield k(),yield I(n,o),D(n,o,1),console.logRed("当前的地图缩放比例",h.value.scale);const t=yield e.queryNodeEdgeList(n,o,1);console.logRed("查询点边信息结果",t),r.value=SLAM_STATE_MACHINE.Idle,S(),window.setTimeout((()=>T()),1e3)}else console.log("======",i,a),0===i.feedback?(console.logRed(i.notice),"Received node information, failed to build topology map."===i.notice?ToastMsg(t("Slam.msg_36")):ToastMsg(t("toastMsg_20"))):0===a.feedback&&(console.logRed(a.notice),"Received edge information, failed to build topology map."===a.notice?ToastMsg(t("Slam.msg_36")):ToastMsg(t("toastMsg_20")))}));return function(e){return i.apply(this,arguments)}}()).catch(S)})).catch((()=>{S(),console.log("取消保存")}))};return o.setSaveOperationFn(F),{addNode:L,addEdge:O,saveNodeEdgeDataToSlam:P,calMapDistance:N,getNewMapIndex:$,endBuildMap:B,handleSave:F}},useSinglePointNavHook=(e,n,i,o)=>{const{transformMapPosition:r,currModeTaskState:a,outToCharge:s,standUpJudge:l}=o;function c(){return c=_asyncToGenerator((function*(){const e=n.getNavPointPosition();if(!e)return ToastMsg(t("Slam.msg_17")),void nextTick((()=>a.value=!1));console.log("=======开始单点");const o=n.getAllPointNodeData().find((e=>9001==e.name));if(o){getDistance$1(o.position,e)<20?i.showModal({type:"ask",content:t("Slam.msg_38"),iconType:"question"}).then((()=>{i.handleSelectWorkModel("returnCharge"),n.removeStageEvent("layerNav"),n.removeSingleNavPoint(),a.value=!1,i.setHideOperaBar(!1)})).catch((e=>{ToastMsg(t("Slam.msg_39")),n.removeSingleNavPoint(),a.value=!1})):u()}else u()})),c.apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return(d=_asyncToGenerator((function*(){const t=n.getNavPointPosition();if(i.setHideOperaBar(!0),a.value=!0,yield l(),!a.value)return;if(yield s(),!a.value)return;const o=r(t);e.anyPointNavigationReq(_objectSpread(_objectSpread({},o),{},{z:0}),999)}))).apply(this,arguments)}return{singlePointNav:function(){return c.apply(this,arguments)}}},useWorkerHook=(e,t,n,i,o,r)=>{const a=ref(),{loadMapResolveMap:s,loadMapImageOkMap:l,thumbanilMapResolveMap:c,thumbanilMapImageOkMap:u,updateRobotPosition:d}=i;const h=e=>{if(!e.data)return;const n={};let i="",a=0;if(e.data.image_.encoding_){e.data.image_.encoding_.split(";").forEach((e=>{const t=e.split(":");n[t[0]]=t[1]})),i=n.type,a=Number(n.index||0)}if(["loadImage","loadGrid"].includes(i)){r.value=_objectSpread(_objectSpread({},e.data),{},{mapPixelData:null});const n=new ImageData(e.data.mapPixelData,e.data.width,e.data.height);createImageBitmap(n).then((e=>{t.drawMapBg(e,"loadMap");const n=s.get(a);n?(n(),s.delete(a)):l.set(a,!0)})).catch((e=>console.error("转换为ImageBitmap时出现错误：",e)))}else if(["thumbanilImage","thumbanilGrid"].includes(i)){const t=new ImageData(e.data.mapPixelData,e.data.width,e.data.height);!function(e,t){const n=e.split("_"),i=n[0],r=n[1];o.value.forEach((e=>{if(e.floorIndex===i&&e.pcdMapIndex===r){const n=document.createElement("canvas"),i=n.getContext("2d");n.width=t.width,n.height=t.height,null==i||i.putImageData(t,0,0);const o=n.toDataURL("image/png");e.pcdImageUrl=o}}))}(n.mapInfo,t);const i=c.get(a);i?(i(),c.delete(a)):u.set(a,!0)}else if(["mappingImage","mappingGrid"].includes(i)){r.value=_objectSpread(_objectSpread({},e.data),{},{mapPixelData:null});const o=new ImageData(e.data.mapPixelData,e.data.width,e.data.height);createImageBitmap(o).then((e=>{t.drawMapBg(e,"mapping"),"mappingGrid"!==i&&d(n)})).catch((e=>console.error("转换为ImageBitmap时出现错误：",e)))}};function p(){window.slamWorker||(window.slamWorker=new Worker(new URL("/assets/slam.worker-_N8SHTGr.js",module.meta.url))),window.slamWorker.onmessage=h,a.value=window.slamWorker}return p(),{slamWorkerRef:a,loadWorker:p,mapDataInfoTemp:r}};function useCoreHook(e,n,i,o,r){const a=ref({}),s=ref({}),{mapImgSize:l,bindStageEvent:c,removeStageEvent:u,removeSingleNavPoint:d,setChargePointEdit:h,getChargePointPos:p,removeChargePoint:f,getRobotDirPoints:g,genChargePoint:m,clearLayerMain:_,undo:v}=n,b=useCommon(e,n,i,o,r,s,a),{currModeTaskState:T,isOutCharge:A,patrolSituation:y,isStandUpping:E,handleStop:S,showLoadingModal:C,closeLoadingModal:w,init:x,closeAllFunc:M,standUpJudge:R}=b,{slamWorkerRef:I}=useWorkerHook(e,n,i,b,r,a),{handleAddMap:D,handleEditTopMap:k,handleEditPCDName:L,handleDelMap:O,handleSelectMap:P}=useMapManageHook(e,n,i,b,o,r,s),{saveNodeEdgeDataToSlam:N,endBuildMap:$,handleSave:B}=useSaveHook(e,n,i,b,o,r,s,a),{hasInitRelocation:F,handleInitRelocation:U,handleInitRelocationPlus:G,openEnableRelocation:V,openMapNavigation:H}=useRelocationHook(e,n,i,b),{singlePointNav:W}=useSinglePointNavHook(e,n,i,b),{patrol:z,patrolIsReady:j,patrolReadyWork:X}=usePatrolHook(e,n,i,b),{returnCharge:Y,returnChargeIsReady:q,judgeRobotPoint:K,sendReturnChargeReq:Q}=useReturnChargeHook(e,n,i,b),{messageListen:Z}=useMsgReceiver(e,n,i,b,I,o),J=function(){var e=_asyncToGenerator((function*(){const e=i.slamWorkModel.value;F.value?E.value?ToastMsg(t("Slam.msg_37")):"patrol"===e?z():"singlePoint"===e?W():"returnCharge"===e&&(i.getPowerState().isCharge?i.showModal({type:"ask",content:t("Slam.msg_31"),iconType:"question"}).then((()=>Y())).catch((()=>{console.log("取消回充")})):Y()):ToastMsg(t("Slam.msg_7"))}));return function(){return e.apply(this,arguments)}}(),ee=ref(!1),te=throttle((e=>ne(e)),1e3,{trailing:!1}),ne=function(){var n=_asyncToGenerator((function*(n){ee.value||(E.value?ToastMsg(t("Slam.msg_37")):(ee.value=!0,n?(yield R(),"patrol"===i.slamWorkModel.value?j.value?e.recoverNavigationReq():X():"singlePoint"===i.slamWorkModel.value?W():"returnCharge"===i.slamWorkModel.value&&(q.value?K("readyPoint")?Q():K("chargePoint")?"balanceStand"==i.currSportState.value&&i.sendLieDown():Y():Y()),T.value=!0):(e.pauseNavigationReq(),T.value=!1),ee.value=!1))}));return function(e){return n.apply(this,arguments)}}();return{currMapInfo:s,isOutCharge:A,messageListen:Z,init:x,closeAllFunc:M,showLoadingModal:C,closeLoadingModal:w,endBuildMap:$,saveNodeEdgeDataToSlam:N,handleAddMap:D,handleEditTopMap:k,handleEditPCDName:L,handleSelectMap:P,handleDelMap:O,handleSave:B,handleNextToSettingRoute:()=>{F.value?(o.value=SLAM_STATE_MACHINE.settingRoadNetwork,u("layerBg"),c("layerMain"),h(),p()?i.markChargeBtnText.value=t("Slam.chargeBtnText_2"):i.markChargeBtnText.value=t("Slam.chargeBtnText_1"),i.showHelpTip(`<div>${t("Slam.msg_8")}</div><div>${t("Slam.msg_9")}</div><div>${t("Slam.msg_10")}</div><div>${t("Slam.msg_11")}</div>`)):ToastMsg(t("Slam.msg_7"))},handleInitRelocation:U,handleStartWork:J,handleInitRelocationPlus:G,handleSelectWorkModelPro:e=>{if("map"!==e&&(F.value||i.slamWorkModel.value===e?i.slamWorkModel.value===e&&u("layerBg"):c("layerBg")),"singlePoint"==e?"singlePoint"==i.slamWorkModel.value?(u("layerNav"),d()):F.value&&c("layerNav"):"singlePoint"==i.slamWorkModel.value&&(u("layerNav"),d()),e&&["patrol","returnCharge"].includes(e)&&!s.value.topMapIndex)i.showModal({type:"ask",content:t("Slam.msg_16"),iconType:"edit",sureBtnText:t("Slam.createBtn")}).then(_asyncToGenerator((function*(){o.value!=SLAM_STATE_MACHINE.enableRelocation&&(C(),yield V(),yield H(),o.value=SLAM_STATE_MACHINE.enableRelocation,i.setHideJoystick(!1),w(),i.showHelpTip(t("Slam.help_tip_1"))),c("layerBg")}))).catch((()=>{console.log("取消")}));else{if("returnCharge"===e){if(n.getAllPointNodeData().filter((e=>e.name>=9e3)).length<=0)return void i.showModal({type:"ask",content:t("Slam.msg_28"),iconType:"edit",sureBtnText:t("Slam.editRoadNetWork")}).then(_asyncToGenerator((function*(){o.value!=SLAM_STATE_MACHINE.enableRelocation&&(C(),yield V(),yield H(),o.value=SLAM_STATE_MACHINE.enableRelocation,i.setHideJoystick(!1),w(),i.showHelpTip(t("Slam.help_tip_1"))),c("layerBg")}))).catch((()=>{console.log("取消")}));d()}e!==i.slamWorkModel.value?(T.value=!1,i.setHideOperaBar(!1)):S(),i.handleSelectWorkModel(e)}},currModeTaskState:T,handleActive:te,handleStop:S,handleMarkCharge:()=>{if(p())i.markChargeBtnText.value=t("Slam.chargeBtnText_1"),f();else{i.markChargeBtnText.value=t("Slam.chargeBtnText_2");const e=g();if(e){const{robotPoint:t}=e;m(t)}else m({x:l.value.width/2,y:l.value.height/2})}},handleClearRouteNet:()=>{i.showModal({type:"ask",content:t("Slam.msg_4")}).then((()=>{_(),i.markChargeBtnText.value=t("Slam.chargeBtnText_1")})).catch((()=>{console.log("取消清除")}))},handleCancelRouteNet:()=>{const e=v();"charge"===(null==e?void 0:e.type)&&(p()||(i.markChargeBtnText.value=t("Slam.chargeBtnText_1")))},reconnectionDealState:()=>{i.slamWorkModel.value&&(F.value?T.value&&("patrol"===i.slamWorkModel.value?j.value?e.recoverNavigationReq():X():"singlePoint"===i.slamWorkModel.value?W():"returnCharge"===i.slamWorkModel.value&&(console.log("重连上了， 当前是回充状态"),K("chargePoint")?(console.log("在充电点上","balanceStand"!==i.currSportState.value,i.getPowerState().isCharge),"balanceStand"!==i.currSportState.value||i.getPowerState().isCharge?S():T.value=!1):Y())):n.bindStageEvent("layerBg"))},patrolSituation:y}}function getDistance$1(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function formatTime(e){const t=Math.floor(e/1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=Math.floor(t%60);return`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`}function quaternionToEulerYaw(e){const t=e.x,n=e.y,i=e.z,o=e.w;let r=Math.atan2(2*(o*i+t*n),1-2*(n*n+i*i));r=180*r/Math.PI;return-r}function compressJsonData(e){const t=(new TextEncoder).encode(e),n=pako.deflate(t);let i="";n.forEach((e=>i+=String.fromCharCode(e)));return gBase64.btoa(i)}function decompressJsonData(e){const t=gBase64.atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);const o=pako.inflate(i);return(new TextDecoder).decode(o)}function eulerToQuaternion(e,t,n){const i=e*(Math.PI/180)/2,o=t*(Math.PI/180)/2,r=n*(Math.PI/180)/2,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),c=Math.sin(o),u=Math.cos(i),d=Math.sin(i);return{x:d*l*a-u*c*s,y:u*c*a+d*l*s,z:u*l*s-d*c*a,w:u*l*a+d*c*s}}var lib$1={exports:{}},_FullInternals={},_CoreInternals={},Global={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;e.glob=void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.2.2",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:n=>e.Konva.angleDeg?n*t:n,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)}(Global);var Util={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const n=Global;class i{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),n=Math.sin(e),i=this.m[0]*t+this.m[2]*n,o=this.m[1]*t+this.m[3]*n,r=this.m[0]*-n+this.m[2]*t,a=this.m[1]*-n+this.m[3]*t;return this.m[0]=i,this.m[1]=o,this.m[2]=r,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var n=this.m[0]+this.m[2]*t,i=this.m[1]+this.m[3]*t,o=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=r,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,i=-this.m[2]*e,o=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],i=this.m[2],o=this.m[3],r=e*o-n*i;let a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=n){var s=Math.sqrt(e*e+n*n);a.rotation=n>0?Math.acos(e/s):-Math.acos(e/s),a.scaleX=s,a.scaleY=r/s,a.skewX=(e*i+n*o)/r,a.skewY=0}else if(0!=i||0!=o){var l=Math.sqrt(i*i+o*o);a.rotation=Math.PI/2-(o>0?Math.acos(-i/l):-Math.acos(i/l)),a.scaleX=r/l,a.scaleY=l,a.skewX=0,a.skewY=(e*i+n*o)/r}return a.rotation=t.Util._getRotation(a.rotation),a}}t.Transform=i;var o=Math.PI/180,r=180/Math.PI,a="Konva error: ",s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,c=[];const u="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};t.Util={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){c.push(e),1===c.length&&u((function(){const e=c;c=[],e.forEach((function(e){e()}))}))},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,n){var i=t.Util.createImageElement();i.onload=function(){n(i)},i.src=e},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()|0).toString(16);e.length<6;)e="0"+e;return"#"+e},getRGB(e){var t;return e in s?{r:(t=s[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=l.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",t.Util._namedColorToRBA(e)||t.Util._hex3ColorToRGBA(e)||t.Util._hex4ColorToRGBA(e)||t.Util._hex6ColorToRGBA(e)||t.Util._hex8ColorToRGBA(e)||t.Util._rgbColorToRGBA(e)||t.Util._rgbaColorToRGBA(e)||t.Util._hslColorToRGBA(e)),_namedColorToRBA(e){var t=s[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e)));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(n[0])/360,o=Number(n[1])/100,r=Number(n[2])/100;let a,s,l;if(0===o)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};a=r<.5?r*(1+o):r+o-r*o;const c=2*r-a,u=[0,0,0];for(let e=0;e<3;e++)s=i+1/3*-(e-1),s<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[e]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*o,radToDeg:e=>e*r,_degToRad:e=>(t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(e)),_radToDeg:e=>(t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(e)),_getRotation:e=>n.Konva.angleDeg?t.Util.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(a+e)},error(e){console.error(a+e)},warn(e){n.Konva.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(var n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,i,o,r){var a,s,l,c=(e-n)*(e-n)+(t-i)*(t-i);if(0==c)a=e,s=t,l=(o-n)*(o-n)+(r-i)*(r-i);else{var u=((o-e)*(n-e)+(r-t)*(i-t))/c;u<0?(a=e,s=t,l=(e-o)*(e-o)+(t-r)*(t-r)):u>1?(a=n,s=i,l=(n-o)*(n-o)+(i-r)*(i-r)):l=((a=e+u*(n-e))-o)*(a-o)+((s=t+u*(i-t))-r)*(s-r)}return[a,s,l]},_getProjectionToLine(e,n,i){var o=t.Util.cloneObject(e),r=Number.MAX_VALUE;return n.forEach((function(a,s){if(i||s!==n.length-1){var l=n[(s+1)%n.length],c=t.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,e.x,e.y),u=c[0],d=c[1],h=c[2];h<r&&(o.x=u,o.y=d,r=h)}})),o},_prepareArrayForTween(e,n,i){var o,r=[],a=[];if(e.length>n.length){var s=n;n=e,e=s}for(o=0;o<e.length;o+=2)r.push({x:e[o],y:e[o+1]});for(o=0;o<n.length;o+=2)a.push({x:n[o],y:n[o+1]});var l=[];return a.forEach((function(e){var n=t.Util._getProjectionToLine(e,r,i);l.push(n.x),l.push(n.y)})),l},_prepareToStringify(e){var n;for(var i in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(i)&&e[i]&&"object"==typeof e[i])if(n=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||t.Util._isElement(e[i])){if(!n.configurable)return null;delete e[i]}else if(null===t.Util._prepareToStringify(e[i])){if(!n.configurable)return null;delete e[i]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){n.Konva.releaseCanvasOnDestroy&&e.forEach((e=>{e.width=0,e.height=0}))},drawRoundedRectPath(e,t,n,i){let o=0,r=0,a=0,s=0;"number"==typeof i?o=r=a=s=Math.min(i,t/2,n/2):(o=Math.min(i[0]||0,t/2,n/2),r=Math.min(i[1]||0,t/2,n/2),s=Math.min(i[2]||0,t/2,n/2),a=Math.min(i[3]||0,t/2,n/2)),e.moveTo(o,0),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,0,!1),e.lineTo(t,n-s),e.arc(t-s,n-s,s,0,Math.PI/2,!1),e.lineTo(a,n),e.arc(a,n-a,a,Math.PI/2,Math.PI,!1),e.lineTo(0,o),e.arc(o,o,o,Math.PI,3*Math.PI/2,!1)}}}(Util);var Node$2={},Factory={},Validators={};Object.defineProperty(Validators,"__esModule",{value:!0}),Validators.getComponentValidator=Validators.getBooleanValidator=Validators.getNumberArrayValidator=Validators.getFunctionValidator=Validators.getStringOrGradientValidator=Validators.getStringValidator=Validators.getNumberOrAutoValidator=Validators.getNumberOrArrayOfNumbersValidator=Validators.getNumberValidator=Validators.alphaComponent=Validators.RGBComponent=void 0;const Global_1$p=Global,Util_1$f=Util;function _formatValue(e){return Util_1$f.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||Util_1$f.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function RGBComponent(e){return e>255?255:e<0?0:Math.round(e)}function alphaComponent(e){return e>1?1:e<1e-4?1e-4:e}function getNumberValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){return Util_1$f.Util._isNumber(e)||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function getNumberOrArrayOfNumbersValidator(e){if(Global_1$p.Konva.isUnminified)return function(t,n){let i=Util_1$f.Util._isNumber(t),o=Util_1$f.Util._isArray(t)&&t.length==e;return i||o||Util_1$f.Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function getNumberOrAutoValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){return Util_1$f.Util._isNumber(e)||"auto"===e||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function getStringValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){return Util_1$f.Util._isString(e)||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function getStringOrGradientValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){const n=Util_1$f.Util._isString(e),i="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||i||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function getFunctionValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){return Util_1$f.Util._isFunction(e)||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function getNumberArrayValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(Util_1$f.Util._isArray(e)?e.forEach((function(e){Util_1$f.Util._isNumber(e)||Util_1$f.Util.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")})):Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function getBooleanValidator(){if(Global_1$p.Konva.isUnminified)return function(e,t){return!0===e||!1===e||Util_1$f.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function getComponentValidator(e){if(Global_1$p.Konva.isUnminified)return function(t,n){return null==t||Util_1$f.Util.isObject(t)||Util_1$f.Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}Validators.RGBComponent=RGBComponent,Validators.alphaComponent=alphaComponent,Validators.getNumberValidator=getNumberValidator,Validators.getNumberOrArrayOfNumbersValidator=getNumberOrArrayOfNumbersValidator,Validators.getNumberOrAutoValidator=getNumberOrAutoValidator,Validators.getStringValidator=getStringValidator,Validators.getStringOrGradientValidator=getStringOrGradientValidator,Validators.getFunctionValidator=getFunctionValidator,Validators.getNumberArrayValidator=getNumberArrayValidator,Validators.getBooleanValidator=getBooleanValidator,Validators.getComponentValidator=getComponentValidator,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Util,n=Validators;var i="get",o="set";e.Factory={addGetterSetter(t,n,i,o,r){e.Factory.addGetter(t,n,i),e.Factory.addSetter(t,n,o,r),e.Factory.addOverloadedGetterSetter(t,n)},addGetter(e,n,o){var r=i+t.Util._capitalize(n);e.prototype[r]=e.prototype[r]||function(){var e=this.attrs[n];return void 0===e?o:e}},addSetter(n,i,r,a){var s=o+t.Util._capitalize(i);n.prototype[s]||e.Factory.overWriteSetter(n,i,r,a)},overWriteSetter(e,n,i,r){var a=o+t.Util._capitalize(n);e.prototype[a]=function(e){return i&&null!=e&&(e=i.call(this,e,n)),this._setAttr(n,e),r&&r.call(this),this}},addComponentsGetterSetter(r,a,s,l,c){var u,d,h=s.length,p=t.Util._capitalize,f=i+p(a),g=o+p(a);r.prototype[f]=function(){var e={};for(u=0;u<h;u++)e[d=s[u]]=this.getAttr(a+p(d));return e};var m=(0,n.getComponentValidator)(s);r.prototype[g]=function(e){var t,n=this.attrs[a];for(t in l&&(e=l.call(this,e)),m&&m.call(this,e,a),e)e.hasOwnProperty(t)&&this._setAttr(a+p(t),e[t]);return e||s.forEach((e=>{this._setAttr(a+p(e),void 0)})),this._fireChangeEvent(a,n,e),c&&c.call(this),this},e.Factory.addOverloadedGetterSetter(r,a)},addOverloadedGetterSetter(e,n){var r=t.Util._capitalize(n),a=o+r,s=i+r;e.prototype[n]=function(){return arguments.length?(this[a](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,o,r,a){t.Util.error("Adding deprecated "+o);var s=i+t.Util._capitalize(o),l=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){t.Util.error(l);var e=this.attrs[o];return void 0===e?r:e},e.Factory.addSetter(n,o,a,(function(){t.Util.error(l)})),e.Factory.addOverloadedGetterSetter(n,o)},backCompat(e,n){t.Util.each(n,(function(n,r){var a=e.prototype[r],s=i+t.Util._capitalize(n),l=o+t.Util._capitalize(n);function c(){a.apply(this,arguments),t.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}e.prototype[n]=c,e.prototype[s]=c,e.prototype[l]=c}))},afterSetFilter(){this._filterUpToDate=!1}}}(Factory);var Canvas$1={},Context$1={};Object.defineProperty(Context$1,"__esModule",{value:!0}),Context$1.HitContext=Context$1.SceneContext=Context$1.Context=void 0;const Util_1$e=Util,Global_1$o=Global;function simplifyArray(e){var t,n,i=[],o=e.length,r=Util_1$e.Util;for(t=0;t<o;t++)n=e[t],r._isNumber(n)?n=Math.round(1e3*n)/1e3:r._isString(n)||(n+=""),i.push(n);return i}var COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const traceArrMax=100;class Context{constructor(e){this.canvas=e,Global_1$o.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var n,i,o,r,a=this.traceArr,s=a.length,l="";for(n=0;n<s;n++)(o=(i=a[n]).method)?(r=i.args,l+=o,e?l+=DOUBLE_PAREN:Util_1$e.Util._isArray(r[0])?l+=OPEN_PAREN_BRACKET+r.join(COMMA)+CLOSE_BRACKET_PAREN:(t&&(r=r.map((e=>"number"==typeof e?Math.floor(e):e))),l+=OPEN_PAREN+r.join(COMMA)+CLOSE_PAREN)):(l+=i.property,e||(l+=EQUALS+i.val)),l+=SEMICOLON;return l}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=traceArrMax&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,i,o,r){this._context.arc(e,t,n,i,o,r)}arcTo(e,t,n,i,o){this._context.arcTo(e,t,n,i,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,i,o,r){this._context.bezierCurveTo(e,t,n,i,o,r)}clearRect(e,t,n,i){this._context.clearRect(e,t,n,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){var n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,i){return this._context.createLinearGradient(e,t,n,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,i,o,r){return this._context.createRadialGradient(e,t,n,i,o,r)}drawImage(e,t,n,i,o,r,a,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(e,t,n):5===c.length?u.drawImage(e,t,n,i,o):9===c.length&&u.drawImage(e,t,n,i,o,r,a,s,l)}ellipse(e,t,n,i,o,r,a,s){this._context.ellipse(e,t,n,i,o,r,a,s)}isPointInPath(e,t,n,i){return n?this._context.isPointInPath(n,e,t,i):this._context.isPointInPath(e,t,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,i){this._context.fillRect(e,t,n,i)}strokeRect(e,t,n,i){this._context.strokeRect(e,t,n,i)}fillText(e,t,n,i){i?this._context.fillText(e,t,n,i):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,i){return this._context.getImageData(e,t,n,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,i){this._context.rect(e,t,n,i)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,i){this._context.quadraticCurveTo(e,t,n,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,i,o,r){this._context.setTransform(e,t,n,i,o,r)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,i){this._context.strokeText(e,t,n,i)}transform(e,t,n,i,o,r){this._context.transform(e,t,n,i,o,r)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,n=this,i=CONTEXT_METHODS.length,o=this.setAttr,r=function(e){var i,o=n[e];n[e]=function(){return t=simplifyArray(Array.prototype.slice.call(arguments,0)),i=o.apply(n,arguments),n._trace({method:e,args:t}),i}};for(e=0;e<i;e++)r(CONTEXT_METHODS[e]);n.setAttr=function(){o.apply(n,arguments);var e=arguments[0],t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}}Context$1.Context=Context,CONTEXT_PROPERTIES.forEach((function(e){Object.defineProperty(Context.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})}));class SceneContext extends Context{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const i=e.getFillPatternImage();if(i&&"pattern"===n)return void this._fillPattern(e);const o=e.getFillLinearGradientColorStops();if(o&&"linear-gradient"===n)return void this._fillLinearGradient(e);const r=e.getFillRadialGradientColorStops();r&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):i?this._fillPattern(e):o?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(t.x,t.y,n.x,n.y);if(i){for(var r=0;r<i.length;r+=2)o.addColorStop(i[r],i[r+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,i,o=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",r=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,a=null!==(i=e.getShadowOffset())&&void 0!==i?i:{x:0,y:0},s=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=s.x*l,u=s.y*l;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*u)}}Context$1.SceneContext=SceneContext;class HitContext extends Context{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const o=e.getStrokeScaleEnabled();if(!o){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),i="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),o||this.restore()}}}Context$1.HitContext=HitContext,Object.defineProperty(Canvas$1,"__esModule",{value:!0}),Canvas$1.HitCanvas=Canvas$1.SceneCanvas=Canvas$1.Canvas=void 0;const Util_1$d=Util,Context_1=Context$1,Global_1$n=Global,Factory_1$z=Factory,Validators_1$y=Validators;var _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;var e=Util_1$d.Util.createCanvasElement(),t=e.getContext("2d");return _pixelRatio=(Global_1$n.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),Util_1$d.Util.releaseCanvas(e),_pixelRatio}class Canvas{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||Global_1$n.Konva.pixelRatio||getDevicePixelRatio();this.pixelRatio=t,this._canvas=Util_1$d.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch(e){try{return this._canvas.toDataURL()}catch(err){return Util_1$d.Util.error("Unable to get data URL. "+err.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Canvas$1.Canvas=Canvas,Factory_1$z.Factory.addGetterSetter(Canvas,"pixelRatio",void 0,(0,Validators_1$y.getNumberValidator)());class SceneCanvas extends Canvas{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Context_1.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Canvas$1.SceneCanvas=SceneCanvas;class HitCanvas extends Canvas{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Context_1.HitContext(this),this.setSize(e.width,e.height)}}Canvas$1.HitCanvas=HitCanvas;var DragAndDrop={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Global,n=Util;e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const i=[];e.DD._dragElements.forEach(((e,o)=>{const{node:r}=e,a=r.getStage();a.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=n.Util._getFirstPointerId(t));const s=a._changedPointerPositions.find((t=>t.id===e.pointerId));if(s){if("dragging"!==e.dragStatus){var l=r.dragDistance();if(Math.max(Math.abs(s.x-e.startPointerPos.x),Math.abs(s.y-e.startPointerPos.y))<l)return;if(r.startDrag({evt:t}),!r.isDragging())return}r._setDragPosition(t,e),i.push(r)}})),i.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(n){const i=[];e.DD._dragElements.forEach((o=>{const{node:r}=o,a=r.getStage();n&&a.setPointersPositions(n);if(!a._changedPointerPositions.find((e=>e.id===o.pointerId)))return;"dragging"!==o.dragStatus&&"stopped"!==o.dragStatus||(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,o.dragStatus="stopped");const s=o.node.getLayer()||o.node instanceof t.Konva.Stage&&o.node;s&&-1===i.indexOf(s)&&i.push(s)})),i.forEach((e=>{e.draw()}))},_endDragAfter(t){e.DD._dragElements.forEach(((n,i)=>{"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(i)}))}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))}(DragAndDrop),Object.defineProperty(Node$2,"__esModule",{value:!0}),Node$2.Node=void 0;const Util_1$c=Util,Factory_1$y=Factory,Canvas_1$1=Canvas$1,Global_1$m=Global,DragAndDrop_1=DragAndDrop,Validators_1$x=Validators;var ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER="mouseenter",MOUSELEAVE="mouseleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter=1,Node$1=class t{constructor(e){this._id=idCounter++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==TRANSFORM&&e!==ABSOLUTE_TRANSFORM||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){var n=this._cache.get(e);return(void 0===n||(e===TRANSFORM||e===ABSOLUTE_TRANSFORM)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map((e=>e+"Change.konva")).join(SPACE$1);this.on(n,(()=>{this._clearCache(e)})),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:e,filter:t,hit:n}=this._cache.get(CANVAS);Util_1$c.Util.releaseCanvas(e,t,n),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},n={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(t.width||n.width),o=Math.ceil(t.height||n.height),r=t.pixelRatio,a=void 0===t.x?Math.floor(n.x):t.x,s=void 0===t.y?Math.floor(n.y):t.y,l=t.offset||0,c=t.drawBorder||!1,u=t.hitCanvasPixelRatio||1;if(i&&o){i+=2*l+1,o+=2*l+1,a-=l,s-=l;var d=new Canvas_1$1.SceneCanvas({pixelRatio:r,width:i,height:o}),h=new Canvas_1$1.SceneCanvas({pixelRatio:r,width:0,height:0,willReadFrequently:!0}),p=new Canvas_1$1.HitCanvas({pixelRatio:u,width:i,height:o}),f=d.getContext(),g=p.getContext();return p.isCache=!0,d.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,h.getContext()._context.imageSmoothingEnabled=!1),f.save(),g.save(),f.translate(-a,-s),g.translate(-a,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(d,this),this.drawHit(p,this),this._isUnderCache=!1,f.restore(),g.restore(),c&&(f.save(),f.beginPath(),f.rect(0,0,i,o),f.closePath(),f.setAttr("strokeStyle","red"),f.setAttr("lineWidth",5),f.stroke(),f.restore()),this._cache.set(CANVAS,{scene:d,filter:h,hit:p,x:a,y:s}),this._requestDraw(),this}Util_1$c.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(CANVAS)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=1/0,o=1/0,r=-1/0,a=-1/0,s=this.getAbsoluteTransform(t);return n.forEach((function(e){var t=s.point(e);void 0===i&&(i=r=t.x,o=a=t.y),i=Math.min(i,t.x),o=Math.min(o,t.y),r=Math.max(r,t.x),a=Math.max(a,t.y)})),{x:i,y:o,width:r-i,height:a-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/i,n.height/i),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var t,n,i,o,r=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,c=l.getContext();if(r){if(!this._filterUpToDate){var u=s.pixelRatio;l.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio);try{for(t=r.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),n=c.getImageData(0,0,l.getWidth(),l.getHeight()),i=0;i<t;i++)"function"==typeof(o=r[i])?(o.call(this,n),c.putImageData(n,0,0)):Util_1$c.Util.error("Filter should be type of function, but got "+typeof o+" instead. Please check correct filters")}catch(e){Util_1$c.Util.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return s}on(e,t){if(this._cache&&this._cache.delete(ALL_LISTENERS),3===arguments.length)return this._delegate.apply(this,arguments);var n,i,o,r,a=e.split(SPACE$1),s=a.length;for(n=0;n<s;n++)o=(i=a[n].split("."))[0],r=i[1]||"",this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:r,handler:t});return this}off(e,t){var n,i,o,r,a,s=(e||"").split(SPACE$1),l=s.length;if(this._cache&&this._cache.delete(ALL_LISTENERS),!e)for(i in this.eventListeners)this._off(i);for(n=0;n<l;n++)if(r=(o=s[n].split("."))[0],a=o[1],r)this.eventListeners[r]&&this._off(r,a,t);else for(i in this.eventListeners)this._off(i,a,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,(function(e){t.call(this,e.evt)})),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){var i=this;this.on(e,(function(e){for(var o=e.target.findAncestors(t,!0,i),r=0;r<o.length;r++)(e=Util_1$c.Util.cloneObject(e)).currentTarget=o[r],n.call(o[r],e)}))}remove(){return this.isDragging()&&this.stopDrag(),DragAndDrop_1.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+Util_1$c.Util._capitalize(e);return Util_1$c.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges((()=>{var t,n;if(!e)return this;for(t in e)t!==CHILDREN&&(n=SET+Util_1$c.Util._capitalize(t),Util_1$c.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))})),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),i=!1;DragAndDrop_1.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(i=!0)}));var o=!t&&!Global_1$m.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,n,i,o=this.getDepth(),r=this,a=0;const s=this.getStage();return r.nodeType!==UPPER_STAGE&&s&&function s(l){for(e=[],t=l.length,n=0;n<t;n++)i=l[n],a++,i.nodeType!==SHAPE&&(e=e.concat(i.getChildren().slice())),i._id===r._id&&(n=t);e.length>0&&e[0].getDepth()<=o&&s(e)}(s.getChildren()),a}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges((()=>{this.x(e.x),this.y(e.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;var t=e.getPointerPosition();if(!t)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),o=new Util_1$c.Transform,r=this.offset();return o.m=i.slice(),o.translate(r.x,r.y),o.getTranslation()}setAbsolutePosition(e){const t=this._clearTransform(),{x:n,y:i}=t,o=_objectWithoutProperties(t,_excluded);this.attrs.x=n,this.attrs.y=i,this._clearCache(TRANSFORM);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,n=e.y,i=this.x(),o=this.y();return void 0!==t&&(i+=t),void 0!==n&&(o+=n),this.setPosition({x:i,y:o}),this}_eachAncestorReverse(e,t){var n,i,o=[],r=this.getParent();if(!t||t._id!==this._id){for(o.unshift(this);r&&(!t||r._id!==t._id);)o.unshift(r),r=r.parent;for(n=o.length,i=0;i<n;i++)e(o[i])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Util_1$c.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,n,i,o={},r=this.getAttrs();for(e in o.attrs={},r)t=r[e],Util_1$c.Util.isObject(t)&&!Util_1$c.Util._isPlainObject(t)&&!Util_1$c.Util._isArray(t)||(n="function"==typeof this[e]&&this[e],delete r[e],i=n?n.call(this):null,r[e]=t,i!==t&&(o.attrs[e]=t));return o.className=this.getClassName(),Util_1$c.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){var i=[];t&&this._isMatch(e)&&i.push(this);for(var o=this.parent;o;){if(o===n)return i;o._isMatch(e)&&i.push(o),o=o.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,n,i=e.replace(/ /g,"").split(","),o=i.length;for(t=0;t<o;t++)if(n=i[t],Util_1$c.Util.isValidSelector(n)||(Util_1$c.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util_1$c.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util_1$c.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(STAGE,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new Util_1$c.Transform,this._eachAncestorReverse((function(e){var n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())}),e),t;t=this._cache.get(ABSOLUTE_TRANSFORM)||new Util_1$c.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var n=this.transformsEnabled();if("all"===n)t.multiply(this.getTransform());else if("position"===n){const e=this.attrs.x||0,n=this.attrs.y||0,i=this.attrs.offsetX||0,o=this.attrs.offsetY||0;t.translate(e-i,n-o)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var e,t,n=this._cache.get(TRANSFORM)||new Util_1$c.Transform;n.reset();var i=this.x(),o=this.y(),r=Global_1$m.Konva.getAngle(this.rotation()),a=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,s=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,l=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return 0===i&&0===o||n.translate(i,o),0!==r&&n.rotate(r),0===l&&0===c||n.skew(l,c),1===a&&1===s||n.scale(a,s),0===u&&0===d||n.translate(-1*u,-1*d),n.dirty=!1,n}clone(e){var t,n,i,o,r,a=Util_1$c.Util.cloneObject(this.attrs);for(t in e)a[t]=e[t];var s=new this.constructor(a);for(t in this.eventListeners)for(i=(n=this.eventListeners[t]).length,o=0;o<i;o++)(r=n[o]).name.indexOf(KONVA)<0&&(s.eventListeners[t]||(s.eventListeners[t]=[]),s.eventListeners[t].push(r));return s}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),n=this.getStage(),i=void 0!==e.x?e.x:Math.floor(t.x),o=void 0!==e.y?e.y:Math.floor(t.y),r=e.pixelRatio||1,a=new Canvas_1$1.SceneCanvas({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:r}),s=a.getContext();return!1===e.imageSmoothingEnabled&&(s._context.imageSmoothingEnabled=!1),s.save(),(i||o)&&s.translate(-1*i,-1*o),this.drawScene(a),s.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,n=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(i),i}toImage(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,Util_1$c.Util._urlToImage(this.toDataURL(e),(function(e){t(e),null==n||n(e)}))}catch(err){n(err)}}))}toBlob(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob((e=>{t(e),null==n||n(e)}))}catch(err){n(err)}}))}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Global_1$m.Konva.dragDistance}_off(e,t,n){var i,o,r,a=this.eventListeners[e];for(i=0;i<a.length;i++)if(o=a[i].name,r=a[i].handler,!("konva"===o&&"konva"!==t||t&&o!==t||n&&n!==r)){if(a.splice(i,1),0===a.length){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,t,n){this._fire(e+CHANGE,{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){var t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){var t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){var n=this[SET+Util_1$c.Util._capitalize(e)];return Util_1$c.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(Global_1$m.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){var n=this.attrs[e];(n!==t||Util_1$c.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){var i;void 0!==n&&((i=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,i,n))}_fireAndBubble(e,t,n){if(t&&this.nodeType===SHAPE&&(t.target=this),!((e===MOUSEENTER||e===MOUSELEAVE)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);var i=(e===MOUSEENTER||e===MOUSELEAVE)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,i;const o=null!==(t=this._cache.get(ALL_LISTENERS))&&void 0!==t?t:{};let r=null==o?void 0:o[e];if(void 0===r){r=[];let t=Object.getPrototypeOf(this);for(;t;){const o=null!==(i=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==i?i:[];r.push(...o),t=Object.getPrototypeOf(t)}o[e]=r,this._cache.set(ALL_LISTENERS,o)}return r}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,t);const o=this.eventListeners[e];if(o)for(i=0;i<o.length;i++)o[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition();if(n){var o=n._getPointerById(t)||n._changedPointerPositions[0]||i;DragAndDrop_1.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:t})}}startDrag(e,t=!0){DragAndDrop_1.DD._dragElements.has(this._id)||this._createDragElement(e);DragAndDrop_1.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(n){var i={x:n.x-t.offset.x,y:n.y-t.offset.y},o=this.dragBoundFunc();if(void 0!==o){const t=o.call(this,i,e);t?i=t:Util_1$c.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const t=DragAndDrop_1.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),DragAndDrop_1.DD._endDragBefore(e),DragAndDrop_1.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=DragAndDrop_1.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(e){if((!(void 0!==e.evt.button)||Global_1$m.Konva.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;DragAndDrop_1.DD._dragElements.forEach((e=>{this.isAncestorOf(e.node)&&(t=!0)})),t||this._createDragElement(e)}}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=DragAndDrop_1.DD._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&DragAndDrop_1.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return Util_1$c.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return Util_1$c.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,n){var i,o,r,a=t.prototype.getClassName.call(e),s=e.children;n&&(e.attrs.container=n),Global_1$m.Konva[a]||(Util_1$c.Util.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");if(i=new(0,Global_1$m.Konva[a])(e.attrs),s)for(o=s.length,r=0;r<o;r++)i.add(t._createNode(s[r]));return i}};Node$2.Node=Node$1,Node$1.prototype.nodeType="Node",Node$1.prototype._attrsAffectingSize=[],Node$1.prototype.eventListeners={},Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM))})),Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(VISIBLE)})),Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(LISTENING)})),Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)}));const addGetterSetter=Factory_1$y.Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex"),addGetterSetter(Node$1,"absolutePosition"),addGetterSetter(Node$1,"position"),addGetterSetter(Node$1,"x",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"y",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"globalCompositeOperation","source-over",(0,Validators_1$x.getStringValidator)()),addGetterSetter(Node$1,"opacity",1,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"name","",(0,Validators_1$x.getStringValidator)()),addGetterSetter(Node$1,"id","",(0,Validators_1$x.getStringValidator)()),addGetterSetter(Node$1,"rotation",0,(0,Validators_1$x.getNumberValidator)()),Factory_1$y.Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]),addGetterSetter(Node$1,"scaleX",1,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"scaleY",1,(0,Validators_1$x.getNumberValidator)()),Factory_1$y.Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]),addGetterSetter(Node$1,"skewX",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"skewY",0,(0,Validators_1$x.getNumberValidator)()),Factory_1$y.Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]),addGetterSetter(Node$1,"offsetX",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"offsetY",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"dragDistance",null,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"width",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"height",0,(0,Validators_1$x.getNumberValidator)()),addGetterSetter(Node$1,"listening",!0,(0,Validators_1$x.getBooleanValidator)()),addGetterSetter(Node$1,"preventDefault",!0,(0,Validators_1$x.getBooleanValidator)()),addGetterSetter(Node$1,"filters",null,(function(e){return this._filterUpToDate=!1,e})),addGetterSetter(Node$1,"visible",!0,(0,Validators_1$x.getBooleanValidator)()),addGetterSetter(Node$1,"transformsEnabled","all",(0,Validators_1$x.getStringValidator)()),addGetterSetter(Node$1,"size"),addGetterSetter(Node$1,"dragBoundFunc"),addGetterSetter(Node$1,"draggable",!1,(0,Validators_1$x.getBooleanValidator)()),Factory_1$y.Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Container$1={};Object.defineProperty(Container$1,"__esModule",{value:!0}),Container$1.Container=void 0;const Factory_1$x=Factory,Node_1$h=Node$2,Validators_1$w=Validators;class Container extends Node_1$h.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var n=[];return t.forEach((function(t){e(t)&&n.push(t)})),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.destroy()})),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var n=[];return this._descendants((i=>{const o=i._isMatch(e);return o&&n.push(i),!(!o||!t)})),n}_descendants(e){let t=!1;const n=this.getChildren();for(const i of n){if(t=e(i),t)return!0;if(i.hasChildren()&&(t=i._descendants(e),t))return!0}return!1}toObject(){var e=Node_1$h.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach((t=>{e.children.push(t.toObject())})),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=Node_1$h.Node.prototype.clone.call(this,e);return this.getChildren().forEach((function(e){t.add(e.clone())})),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach((n=>{n.isVisible()&&n.intersects(e)&&t.push(n)})),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach((function(t){t._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach((function(e,t){e.index=t})),this._requestDraw()}drawScene(e,t){var n=this.getLayer(),i=e||n&&n.getCanvas(),o=i&&i.getContext(),r=this._getCanvasCache(),a=r&&r.scene,s=i&&i.isCache;if(!this.isVisible()&&!s)return this;if(a){o.save();var l=this.getAbsoluteTransform(t).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var n=this.getLayer(),i=e||n&&n.hitCanvas,o=i&&i.getContext(),r=this._getCanvasCache();if(r&&r.hit){o.save();var a=this.getAbsoluteTransform(t).getMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,n){var i,o=t&&t.getContext(),r=this.clipWidth(),a=this.clipHeight(),s=this.clipFunc(),l=r&&a||s;const c=n===this;if(l){o.save();var u=this.getAbsoluteTransform(n),d=u.getMatrix();let e;if(o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.beginPath(),s)e=s.call(this,o,this);else{var h=this.clipX(),p=this.clipY();o.rect(h,p,r,a)}o.clip.apply(o,e),d=u.copy().invert().getMatrix(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var f=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;f&&(o.save(),o._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach((function(i){i[e](t,n)})),f&&o.restore(),l&&o.restore()}getClientRect(e={}){var t,n,i,o,r,a=e.skipTransform,s=e.relativeTo,l={x:1/0,y:1/0,width:0,height:0},c=this;null===(t=this.children)||void 0===t||t.forEach((function(t){if(t.visible()){var a=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===a.width&&0===a.height||(void 0===n?(n=a.x,i=a.y,o=a.x+a.width,r=a.y+a.height):(n=Math.min(n,a.x),i=Math.min(i,a.y),o=Math.max(o,a.x+a.width),r=Math.max(r,a.y+a.height)))}}));for(var u=this.find("Shape"),d=!1,h=0;h<u.length;h++){if(u[h]._isVisible(this)){d=!0;break}}return l=d&&void 0!==n?{x:n,y:i,width:o-n,height:r-i}:{x:0,y:0,width:0,height:0},a?l:this._transformedRect(l,s)}}Container$1.Container=Container,Factory_1$x.Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]),Factory_1$x.Factory.addGetterSetter(Container,"clipX",void 0,(0,Validators_1$w.getNumberValidator)()),Factory_1$x.Factory.addGetterSetter(Container,"clipY",void 0,(0,Validators_1$w.getNumberValidator)()),Factory_1$x.Factory.addGetterSetter(Container,"clipWidth",void 0,(0,Validators_1$w.getNumberValidator)()),Factory_1$x.Factory.addGetterSetter(Container,"clipHeight",void 0,(0,Validators_1$w.getNumberValidator)()),Factory_1$x.Factory.addGetterSetter(Container,"clipFunc");var Stage={},PointerEvents={};Object.defineProperty(PointerEvents,"__esModule",{value:!0}),PointerEvents.releaseCapture=PointerEvents.setPointerCapture=PointerEvents.hasPointerCapture=PointerEvents.createEvent=PointerEvents.getCapturedShape=void 0;const Global_1$l=Global,Captures=new Map,SUPPORT_POINTER_EVENTS=void 0!==Global_1$l.Konva._global.PointerEvent;function getCapturedShape(e){return Captures.get(e)}function createEvent(e){return{evt:e,pointerId:e.pointerId}}function hasPointerCapture(e,t){return Captures.get(e)===t}function setPointerCapture(e,t){releaseCapture(e);t.getStage()&&(Captures.set(e,t),SUPPORT_POINTER_EVENTS&&t._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(e,t){const n=Captures.get(e);if(!n)return;const i=n.getStage();i&&i.content,Captures.delete(e),SUPPORT_POINTER_EVENTS&&n._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}PointerEvents.getCapturedShape=getCapturedShape,PointerEvents.createEvent=createEvent,PointerEvents.hasPointerCapture=hasPointerCapture,PointerEvents.setPointerCapture=setPointerCapture,PointerEvents.releaseCapture=releaseCapture,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Util,n=Factory,i=Container$1,o=Global,r=Canvas$1,a=DragAndDrop,s=Global,l=PointerEvents;var c="mouseleave",u="mouseover",d="mouseenter",h="mousemove",p="mousedown",f="mouseup",g="pointermove",m="pointerdown",_="pointerup",v="pointercancel",b="pointerout",T="pointerleave",A="pointerover",y="pointerenter",E="contextmenu",S="touchstart",C="touchend",w="touchmove",x="touchcancel",M="wheel",R=[[d,"_pointerenter"],[p,"_pointerdown"],[h,"_pointermove"],[f,"_pointerup"],[c,"_pointerleave"],[S,"_pointerdown"],[w,"_pointermove"],[C,"_pointerup"],[x,"_pointercancel"],[u,"_pointerover"],[M,"_wheel"],[E,"_contextmenu"],[m,"_pointerdown"],[g,"_pointermove"],[_,"_pointerup"],[v,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const I={mouse:{[b]:"mouseout",[T]:c,[A]:u,[y]:d,[g]:h,[m]:p,[_]:f,[v]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[b]:"touchout",[T]:"touchleave",[A]:"touchover",[y]:"touchenter",[g]:w,[m]:S,[_]:C,[v]:x,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[b]:b,[T]:T,[A]:A,[y]:y,[g]:g,[m]:m,[_]:_,[v]:v,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},D=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",k=e=>{const t=D(e);return"pointer"===t?o.Konva.pointerEventsEnabled&&I.pointer:"touch"===t?I.touch:"mouse"===t?I.mouse:void 0};function L(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}e.stages=[];class O extends i.Container{constructor(t){super(L(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{L(this.attrs)})),this._checkVisibility()}_validateAdd(e){const n="Layer"===e.getType(),i="FastLayer"===e.getType();n||i||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){if("."===e.charAt(0)){var t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var n;n="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e,t=this.children,n=t.length;for(e=0;e<n;e++)t[e].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),i.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var n=this.content;n&&t.Util._isInDocument(n)&&this.container().removeChild(n);var i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(t.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find((t=>t.id===e))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new r.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,i=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),i.forEach((function(t){if(t.isVisible()){var i=t._toKonvaCanvas(e);n.drawImage(i._canvas,e.x,e.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}})),t}getIntersection(e){if(!e)return null;var t,n=this.children;for(t=n.length-1;t>=0;t--){const i=n[t].getIntersection(e);if(i)return i}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach((n=>{n.setSize({width:e,height:t}),n.draw()}))}add(e,...n){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}super.add(e);var r=this.children.length;return r>5&&t.Util.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),o.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return l.hasPointerCapture(e,this)}setPointerCapture(e){l.setPointerCapture(e,this)}releaseCapture(e){l.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&R.forEach((([e,t])=>{this.content.addEventListener(e,(e=>{this[t](e)}),{passive:!1})}))}_pointerenter(e){this.setPointersPositions(e);const t=k(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=k(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=k(e.type),n=D(e.type);if(t){this.setPointersPositions(e);var i=this._getTargetShape(n),r=!a.DD.isDragging||o.Konva.hitOnDragEnabled;i&&r?(i._fireAndBubble(t.pointerout,{evt:e}),i._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){const t=k(e.type),n=D(e.type);if(t){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach((r=>{var s=this.getIntersection(r);if(a.DD.justDragged=!1,o.Konva["_"+n+"ListenClick"]=!0,!s||!s.isListening())return;o.Konva.capturePointerEventsEnabled&&s.setPointerCapture(r.id),this[n+"ClickStartShape"]=s,s._fireAndBubble(t.pointerdown,{evt:e,pointerId:r.id}),i=!0;const l=e.type.indexOf("touch")>=0;s.preventDefault()&&e.cancelable&&l&&e.preventDefault()})),i||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const t=k(e.type),n=D(e.type);if(!t)return;if(a.DD.isDragging&&a.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!a.DD.isDragging||o.Konva.hitOnDragEnabled))return;var i={};let r=!1;var s=this._getTargetShape(n);this._changedPointerPositions.forEach((o=>{const a=l.getCapturedShape(o.id)||this.getIntersection(o),c=o.id,u={evt:e,pointerId:c};var d=s!==a;if(d&&s&&(s._fireAndBubble(t.pointerout,_objectSpread({},u),a),s._fireAndBubble(t.pointerleave,_objectSpread({},u),a)),a){if(i[a._id])return;i[a._id]=!0}a&&a.isListening()?(r=!0,d&&(a._fireAndBubble(t.pointerover,_objectSpread({},u),s),a._fireAndBubble(t.pointerenter,_objectSpread({},u),s),this[n+"targetShape"]=a),a._fireAndBubble(t.pointermove,_objectSpread({},u))):s&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[n+"targetShape"]=null)})),r||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=k(e.type),n=D(e.type);if(!t)return;this.setPointersPositions(e);const i=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var s={};let c=!1;this._changedPointerPositions.forEach((u=>{const d=l.getCapturedShape(u.id)||this.getIntersection(u);if(d){if(d.releaseCapture(u.id),s[d._id])return;s[d._id]=!0}const h=u.id,p={evt:e,pointerId:h};let f=!1;o.Konva["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):a.DD.justDragged||(o.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout((function(){o.Konva["_"+n+"InDblClickWindow"]=!1}),o.Konva.dblClickWindow),d&&d.isListening()?(c=!0,this[n+"ClickEndShape"]=d,d._fireAndBubble(t.pointerup,_objectSpread({},p)),o.Konva["_"+n+"ListenClick"]&&i&&i===d&&(d._fireAndBubble(t.pointerclick,_objectSpread({},p)),f&&r&&r===d&&d._fireAndBubble(t.pointerdblclick,_objectSpread({},p)))):(this[n+"ClickEndShape"]=null,o.Konva["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),f&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))})),c||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(E,{evt:e}):this._fire(E,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(M,{evt:e}):this._fire(M,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=l.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(_,l.createEvent(e)),l.releaseCapture(e.pointerId)}_lostpointercapture(e){l.releaseCapture(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),i=null,o=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,(e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})})),Array.prototype.forEach.call(e.changedTouches||e.touches,(e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-n.left)/n.scaleX,y:(e.clientY-n.top)/n.scaleY})}))):(i=(e.clientX-n.left)/n.scaleX,o=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:o},this._pointerPositions=[{x:i,y:o,id:t.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:o,id:t.Util._getFirstPointerId(e)}])}_setPointerPosition(e){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),o.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(e){e.batchDraw()})),this}}e.Stage=O,O.prototype.nodeType="Stage",(0,s._registerNode)(O),n.Factory.addGetterSetter(O,"container")}(Stage);var Layer$1={},Shape={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const n=Global,i=Util,o=Factory,r=Node$2,a=Validators,s=Global,l=PointerEvents;var c="hasShadow",u="shadowRGBA",d="patternImage",h="linearGradient",p="radialGradient";let f;function g(){return f||(f=i.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};class m extends r.Node{constructor(e){let n;for(super(e);n=i.Util.getRandomColor(),!n||n in t.shapes;);this.colorKey=n,t.shapes[n]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new i.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(n.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=t.getMatrix(),r="undefined"==typeof DOMMatrix?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(h,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=g(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=t.createLinearGradient(n.x,n.y,i.x,i.y),r=0;r<e.length;r+=2)o.addColorStop(e[r],e[r+1]);return o}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=g(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),r=0;r<e.length;r+=2)o.addColorStop(e[r],e[r+1]);return o}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=i.Util.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;n.getContext().clear(),this.drawHit(n,void 0,!0);return n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage())return!1;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),i=this.hasStroke(),o=1!==this.getAbsoluteOpacity();if(n&&i&&o)return!0;const r=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(n&&i&&r&&a)}setStrokeHitEnabled(e){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const t=e.skipTransform,n=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,r=i.width+o,a=i.height+o,s=!e.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=r+Math.abs(l),d=a+Math.abs(c),h=s&&this.shadowBlur()||0,p={width:u+2*h,height:d+2*h,x:-(o/2+h)+Math.min(l,0)+i.x,y:-(o/2+h)+Math.min(c,0)+i.y};return t?p:this._transformedRect(p,n)}drawScene(e,t){var n,i,o=this.getLayer(),r=e||o.getCanvas(),a=r.getContext(),s=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),u=r.isCache,d=t===this;if(!this.isVisible()&&!d)return this;if(s){a.save();var h=this.getAbsoluteTransform(t).getMatrix();return a.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!l)return this;if(a.save(),this._useBufferCanvas()&&!u){(i=(n=this.getStage().bufferCanvas).getContext()).clear(),i.save(),i._applyLineJoin(this);var p=this.getAbsoluteTransform(t).getMatrix();i.transform(p[0],p[1],p[2],p[3],p[4],p[5]),l.call(this,i,this),i.restore();var f=n.pixelRatio;c&&a._applyShadow(this),a._applyOpacity(this),a._applyGlobalCompositeOperation(this),a.drawImage(n._canvas,0,0,n.width/f,n.height/f)}else{if(a._applyLineJoin(this),!d){p=this.getAbsoluteTransform(t).getMatrix();a.transform(p[0],p[1],p[2],p[3],p[4],p[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}c&&a._applyShadow(this),l.call(this,a,this)}return a.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;var o=this.getLayer(),r=e||o.hitCanvas,a=r&&r.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){a.save();var u=this.getAbsoluteTransform(t).getMatrix();return a.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!s)return this;a.save(),a._applyLineJoin(this);if(!(this===t)){var d=this.getAbsoluteTransform(t).getMatrix();a.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return s.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var n,o,r,a,s,l=this._getCanvasCache(),c=this._getCachedSceneCanvas(),u=l.hit,d=u.getContext(),h=u.getWidth(),p=u.getHeight();d.clear(),d.drawImage(c._canvas,0,0,h,p);try{for(r=(o=(n=d.getImageData(0,0,h,p)).data).length,a=i.Util._hexToRgb(this.colorKey),s=0;s<r;s+=4)o[s+3]>t?(o[s]=a.r,o[s+1]=a.g,o[s+2]=a.b,o[s+3]=255):o[s+3]=0;d.putImageData(n,0,0)}catch(e){i.Util.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return l.hasPointerCapture(e,this)}setPointerCapture(e){l.setPointerCapture(e,this)}releaseCapture(e){l.releaseCapture(e,this)}}t.Shape=m,m.prototype._fillFunc=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},m.prototype._strokeFunc=function(e){e.stroke()},m.prototype._fillFuncHit=function(e){e.fill()},m.prototype._strokeFuncHit=function(e){e.stroke()},m.prototype._centroid=!1,m.prototype.nodeType="Shape",(0,s._registerNode)(m),m.prototype.eventListeners={},m.prototype.on.call(m.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(c)})),m.prototype.on.call(m.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(u)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(d)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(h)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(p)})),o.Factory.addGetterSetter(m,"stroke",void 0,(0,a.getStringOrGradientValidator)()),o.Factory.addGetterSetter(m,"strokeWidth",2,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillAfterStrokeEnabled",!1),o.Factory.addGetterSetter(m,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),o.Factory.addGetterSetter(m,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),o.Factory.addGetterSetter(m,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),o.Factory.addGetterSetter(m,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),o.Factory.addGetterSetter(m,"lineJoin"),o.Factory.addGetterSetter(m,"lineCap"),o.Factory.addGetterSetter(m,"sceneFunc"),o.Factory.addGetterSetter(m,"hitFunc"),o.Factory.addGetterSetter(m,"dash"),o.Factory.addGetterSetter(m,"dashOffset",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"shadowColor",void 0,(0,a.getStringValidator)()),o.Factory.addGetterSetter(m,"shadowBlur",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"shadowOpacity",1,(0,a.getNumberValidator)()),o.Factory.addComponentsGetterSetter(m,"shadowOffset",["x","y"]),o.Factory.addGetterSetter(m,"shadowOffsetX",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"shadowOffsetY",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillPatternImage"),o.Factory.addGetterSetter(m,"fill",void 0,(0,a.getStringOrGradientValidator)()),o.Factory.addGetterSetter(m,"fillPatternX",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillPatternY",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillLinearGradientColorStops"),o.Factory.addGetterSetter(m,"strokeLinearGradientColorStops"),o.Factory.addGetterSetter(m,"fillRadialGradientStartRadius",0),o.Factory.addGetterSetter(m,"fillRadialGradientEndRadius",0),o.Factory.addGetterSetter(m,"fillRadialGradientColorStops"),o.Factory.addGetterSetter(m,"fillPatternRepeat","repeat"),o.Factory.addGetterSetter(m,"fillEnabled",!0),o.Factory.addGetterSetter(m,"strokeEnabled",!0),o.Factory.addGetterSetter(m,"shadowEnabled",!0),o.Factory.addGetterSetter(m,"dashEnabled",!0),o.Factory.addGetterSetter(m,"strokeScaleEnabled",!0),o.Factory.addGetterSetter(m,"fillPriority","color"),o.Factory.addComponentsGetterSetter(m,"fillPatternOffset",["x","y"]),o.Factory.addGetterSetter(m,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),o.Factory.addComponentsGetterSetter(m,"fillPatternScale",["x","y"]),o.Factory.addGetterSetter(m,"fillPatternScaleX",1,(0,a.getNumberValidator)()),o.Factory.addGetterSetter(m,"fillPatternScaleY",1,(0,a.getNumberValidator)()),o.Factory.addComponentsGetterSetter(m,"fillLinearGradientStartPoint",["x","y"]),o.Factory.addComponentsGetterSetter(m,"strokeLinearGradientStartPoint",["x","y"]),o.Factory.addGetterSetter(m,"fillLinearGradientStartPointX",0),o.Factory.addGetterSetter(m,"strokeLinearGradientStartPointX",0),o.Factory.addGetterSetter(m,"fillLinearGradientStartPointY",0),o.Factory.addGetterSetter(m,"strokeLinearGradientStartPointY",0),o.Factory.addComponentsGetterSetter(m,"fillLinearGradientEndPoint",["x","y"]),o.Factory.addComponentsGetterSetter(m,"strokeLinearGradientEndPoint",["x","y"]),o.Factory.addGetterSetter(m,"fillLinearGradientEndPointX",0),o.Factory.addGetterSetter(m,"strokeLinearGradientEndPointX",0),o.Factory.addGetterSetter(m,"fillLinearGradientEndPointY",0),o.Factory.addGetterSetter(m,"strokeLinearGradientEndPointY",0),o.Factory.addComponentsGetterSetter(m,"fillRadialGradientStartPoint",["x","y"]),o.Factory.addGetterSetter(m,"fillRadialGradientStartPointX",0),o.Factory.addGetterSetter(m,"fillRadialGradientStartPointY",0),o.Factory.addComponentsGetterSetter(m,"fillRadialGradientEndPoint",["x","y"]),o.Factory.addGetterSetter(m,"fillRadialGradientEndPointX",0),o.Factory.addGetterSetter(m,"fillRadialGradientEndPointY",0),o.Factory.addGetterSetter(m,"fillPatternRotation",0),o.Factory.addGetterSetter(m,"fillRule",void 0,(0,a.getStringValidator)()),o.Factory.backCompat(m,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Shape),Object.defineProperty(Layer$1,"__esModule",{value:!0}),Layer$1.Layer=void 0;const Util_1$b=Util,Container_1$1=Container$1,Node_1$g=Node$2,Factory_1$w=Factory,Canvas_1=Canvas$1,Validators_1$v=Validators,Shape_1$g=Shape,Global_1$k=Global;var HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;class Layer extends Container_1$1.Container{constructor(e){super(e),this.canvas=new Canvas_1.SceneCanvas,this.hitCanvas=new Canvas_1.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node_1$g.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node_1$g.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node_1$g.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node_1$g.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return Node_1$g.Node.prototype.remove.call(this),e&&e.parentNode&&Util_1$b.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Util_1$b.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),Node_1$g.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util_1$b.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util_1$b.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util_1$b.Util.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,n=!1;;){for(let i=0;i<INTERSECTION_OFFSETS_LEN;i++){const o=INTERSECTION_OFFSETS[i],r=this._getIntersection({x:e.x+o.x*t,y:e.y+o.y*t}),a=r.shape;if(a)return a;if(n=!!r.antialiased,!r.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,i=n[3];if(255===i){const e=Util_1$b.Util._rgbToHex(n[0],n[1],n[2]),t=Shape_1$g.shapes[HASH+e];return t?{shape:t}:{antialiased:!0}}return i>0?{antialiased:!0}:{}}drawScene(e,t){var n=this.getLayer(),i=e||n&&n.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Container_1$1.Container.prototype.drawScene.call(this,i,t),this._fire(DRAW,{node:this}),this}drawHit(e,t){var n=this.getLayer(),i=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Container_1$1.Container.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Util_1$b.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Util_1$b.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Util_1$b.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Layer$1.Layer=Layer,Layer.prototype.nodeType="Layer",(0,Global_1$k._registerNode)(Layer),Factory_1$w.Factory.addGetterSetter(Layer,"imageSmoothingEnabled",!0),Factory_1$w.Factory.addGetterSetter(Layer,"clearBeforeDraw",!0),Factory_1$w.Factory.addGetterSetter(Layer,"hitGraphEnabled",!0,(0,Validators_1$v.getBooleanValidator)());var FastLayer$1={};Object.defineProperty(FastLayer$1,"__esModule",{value:!0}),FastLayer$1.FastLayer=void 0;const Util_1$a=Util,Layer_1=Layer$1,Global_1$j=Global;class FastLayer extends Layer_1.Layer{constructor(e){super(e),this.listening(!1),Util_1$a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer$1.FastLayer=FastLayer,FastLayer.prototype.nodeType="FastLayer",(0,Global_1$j._registerNode)(FastLayer);var Group$1={};Object.defineProperty(Group$1,"__esModule",{value:!0}),Group$1.Group=void 0;const Util_1$9=Util,Container_1=Container$1,Global_1$i=Global;class Group extends Container_1.Container{_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&Util_1$9.Util.throw("You may only add groups and shapes to groups.")}}Group$1.Group=Group,Group.prototype.nodeType="Group",(0,Global_1$i._registerNode)(Group);var Animation$1={};Object.defineProperty(Animation$1,"__esModule",{value:!0}),Animation$1.Animation=void 0;const Global_1$h=Global,Util_1$8=Util,now=Global_1$h.glob.performance&&Global_1$h.glob.performance.now?function(){return Global_1$h.glob.performance.now()}:function(){return(new Date).getTime()};class Animation{constructor(e,t){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let i=0;i<n;i++)if(t[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=Animation.animations,t=e.length;for(let n=0;n<t;n++)if(e[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,i=n.length;for(let o=0;o<i;o++)if(n[o].id===t){this.animations.splice(o,1);break}}static _runFrames(){const e={},t=this.animations;for(let n=0;n<t.length;n++){const i=t[n],o=i.layers,r=i.func;i._updateFrameObject(now());const a=o.length;let s;if(s=!r||!1!==r.call(i,i.frame),s)for(let t=0;t<a;t++){const n=o[t];void 0!==n._id&&(e[n._id]=n)}}for(let n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const e=Animation;e.animations.length?(e._runFrames(),Util_1$8.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util_1$8.Util.requestAnimFrame(this._animationLoop))}}Animation$1.Animation=Animation,Animation.animations=[],Animation.animIdCounter=0,Animation.animRunning=!1;var Tween={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Util,n=Animation$1,i=Node$2,o=Global;var r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=0,s=["fill","stroke","shadowColor"];class l{constructor(e,t,n,i,o,r,a){this.prop=e,this.propFunc=t,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()}fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class c{constructor(i){var s,u,d=this,h=i.node,p=h._id,f=i.easing||e.Easings.Linear,g=!!i.yoyo;s=void 0===i.duration?.3:0===i.duration?.001:i.duration,this.node=h,this._id=a++;var m=h.getLayer()||(h instanceof o.Konva.Stage?h.getLayers():null);for(u in m||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation((function(){d.tween.onEnterFrame()}),m),this.tween=new l(u,(function(e){d._tweenFunc(e)}),f,0,1,1e3*s,g),this._addListeners(),c.attrs[p]||(c.attrs[p]={}),c.attrs[p][this._id]||(c.attrs[p][this._id]={}),c.tweens[p]||(c.tweens[p]={}),i)void 0===r[u]&&this._addAttr(u,i[u]);this.reset(),this.onFinish=i.onFinish,this.onReset=i.onReset,this.onUpdate=i.onUpdate}_addAttr(e,n){var i,o,r,a,l,u,d,h,p=this.node,f=p._id;if((r=c.tweens[f][e])&&delete c.attrs[f][r][e],i=p.getAttr(e),t.Util._isArray(n))if(o=[],l=Math.max(n.length,i.length),"points"===e&&n.length!==i.length&&(n.length>i.length?(d=i,i=t.Util._prepareArrayForTween(i,n,p.closed())):(u=n,n=t.Util._prepareArrayForTween(n,i,p.closed()))),0===e.indexOf("fill"))for(a=0;a<l;a++)if(a%2==0)o.push(n[a]-i[a]);else{var g=t.Util.colorToRGBA(i[a]);h=t.Util.colorToRGBA(n[a]),i[a]=g,o.push({r:h.r-g.r,g:h.g-g.g,b:h.b-g.b,a:h.a-g.a})}else for(a=0;a<l;a++)o.push(n[a]-i[a]);else-1!==s.indexOf(e)?(i=t.Util.colorToRGBA(i),o={r:(h=t.Util.colorToRGBA(n)).r-i.r,g:h.g-i.g,b:h.b-i.b,a:h.a-i.a}):o=n-i;c.attrs[f][this._id][e]={start:i,diff:o,end:n,trueEnd:u,trueStart:d},c.tweens[f][e]=this._id}_tweenFunc(e){var n,i,o,r,a,l,u,d,h=this.node,p=c.attrs[h._id][this._id];for(n in p){if(o=(i=p[n]).start,r=i.diff,d=i.end,t.Util._isArray(o))if(a=[],u=Math.max(o.length,d.length),0===n.indexOf("fill"))for(l=0;l<u;l++)l%2==0?a.push((o[l]||0)+r[l]*e):a.push("rgba("+Math.round(o[l].r+r[l].r*e)+","+Math.round(o[l].g+r[l].g*e)+","+Math.round(o[l].b+r[l].b*e)+","+(o[l].a+r[l].a*e)+")");else for(l=0;l<u;l++)a.push((o[l]||0)+r[l]*e);else a=-1!==s.indexOf(n)?"rgba("+Math.round(o.r+r.r*e)+","+Math.round(o.g+r.g*e)+","+Math.round(o.b+r.b*e)+","+(o.a+r.a*e)+")":o+r*e;h.setAttr(n,a)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,t=this.node._id,n=this._id,i=c.tweens[t];for(e in this.pause(),i)delete c.tweens[t][e];delete c.attrs[t][n]}}e.Tween=c,c.attrs={},c.tweens={},i.Node.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new c(e).play()},e.Easings={BackEaseIn(e,t,n,i){var o=1.70158;return n*(e/=i)*e*((o+1)*e-o)+t},BackEaseOut(e,t,n,i){var o=1.70158;return n*((e=e/i-1)*e*((o+1)*e+o)+1)+t},BackEaseInOut(e,t,n,i){var o=1.70158;return(e/=i/2)<1?n/2*(e*e*((1+(o*=1.525))*e-o))+t:n/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+t},ElasticEaseIn(e,t,n,i,o,r){var a=0;return 0===e?t:1==(e/=i)?t+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/r)+t)},ElasticEaseOut(e,t,n,i,o,r){var a=0;return 0===e?t:1==(e/=i)?t+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/r)+n+t)},ElasticEaseInOut(e,t,n,i,o,r){var a=0;return 0===e?t:2==(e/=i/2)?t+n:(r||(r=i*(.3*1.5)),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/r)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/r)*.5+n+t)},BounceEaseOut:(e,t,n,i)=>(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(t,n,i,o)=>i-e.Easings.BounceEaseOut(o-t,0,i,o)+n,BounceEaseInOut:(t,n,i,o)=>t<o/2?.5*e.Easings.BounceEaseIn(2*t,0,i,o)+n:.5*e.Easings.BounceEaseOut(2*t-o,0,i,o)+.5*i+n,EaseIn:(e,t,n,i)=>n*(e/=i)*e+t,EaseOut:(e,t,n,i)=>-n*(e/=i)*(e-2)+t,EaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,i)=>n*(e/=i)*e*e*e*e+t,StrongEaseOut:(e,t,n,i)=>n*((e=e/i-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,i)=>n*e/i+t}}(Tween),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Global,n=Util,i=Node$2,o=Container$1,r=Stage,a=Layer$1,s=FastLayer$1,l=Group$1,c=DragAndDrop,u=Shape,d=Animation$1,h=Tween,p=Context$1,f=Canvas$1;e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:i.Node,Container:o.Container,Stage:r.Stage,stages:r.stages,Layer:a.Layer,FastLayer:s.FastLayer,Group:l.Group,DD:c.DD,Shape:u.Shape,shapes:u.shapes,Animation:d.Animation,Tween:h.Tween,Easings:h.Easings,Context:p.Context,Canvas:f.Canvas}),e.default=e.Konva}(_CoreInternals);var Arc$1={};Object.defineProperty(Arc$1,"__esModule",{value:!0}),Arc$1.Arc=void 0;const Factory_1$v=Factory,Shape_1$f=Shape,Global_1$g=Global,Validators_1$u=Validators,Global_2$2=Global;class Arc extends Shape_1$f.Shape{_sceneFunc(e){var t=Global_1$g.Konva.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),i=Global_1$g.Konva.getAngle(n?360-this.angle():this.angle()),o=Math.cos(Math.min(i,Math.PI)),r=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),a=Math.sin(Math.min(i,Math.PI/2)),s=o*(o>0?e:t),l=r*(r>0?e:t),c=a*(a>0?t:e);return{x:s,y:n?-1*c:l,width:1*t-s,height:c-l}}}Arc$1.Arc=Arc,Arc.prototype._centroid=!0,Arc.prototype.className="Arc",Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Global_2$2._registerNode)(Arc),Factory_1$v.Factory.addGetterSetter(Arc,"innerRadius",0,(0,Validators_1$u.getNumberValidator)()),Factory_1$v.Factory.addGetterSetter(Arc,"outerRadius",0,(0,Validators_1$u.getNumberValidator)()),Factory_1$v.Factory.addGetterSetter(Arc,"angle",0,(0,Validators_1$u.getNumberValidator)()),Factory_1$v.Factory.addGetterSetter(Arc,"clockwise",!1,(0,Validators_1$u.getBooleanValidator)());var Arrow$1={},Line$1={};Object.defineProperty(Line$1,"__esModule",{value:!0}),Line$1.Line=void 0;const Factory_1$u=Factory,Shape_1$e=Shape,Validators_1$t=Validators,Global_1$f=Global;function getControlPoints(e,t,n,i,o,r,a){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2)),c=a*s/(s+l),u=a*l/(s+l);return[n-c*(o-e),i-c*(r-t),n+u*(o-e),i+u*(r-t)]}function expandPoints(e,t){var n,i,o=e.length,r=[];for(n=2;n<o-2;n+=2)i=getControlPoints(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),isNaN(i[0])||(r.push(i[0]),r.push(i[1]),r.push(e[n]),r.push(e[n+1]),r.push(i[2]),r.push(i[3]));return r}class Line extends Shape_1$e.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(e){var t,n,i,o=this.points(),r=o.length,a=this.tension(),s=this.closed(),l=this.bezier();if(r){if(e.beginPath(),e.moveTo(o[0],o[1]),0!==a&&r>4){for(n=(t=this.getTensionPoints()).length,i=s?0:4,s||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);i<n-2;)e.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);s||e.quadraticCurveTo(t[n-2],t[n-1],o[r-2],o[r-1])}else if(l)for(i=2;i<r;)e.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);else for(i=2;i<r;i+=2)e.lineTo(o[i],o[i+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,n=this.tension(),i=getControlPoints(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),o=getControlPoints(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),r=expandPoints(e,n);return[i[2],i[3]].concat(r).concat([o[0],o[1],e[t-2],e[t-1],o[2],o[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var t,n,i=(e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points())[0],o=e[0],r=e[1],a=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],i=Math.min(i,t),o=Math.max(o,t),r=Math.min(r,n),a=Math.max(a,n);return{x:i,y:r,width:o-i,height:a-r}}}Line$1.Line=Line,Line.prototype.className="Line",Line.prototype._attrsAffectingSize=["points","bezier","tension"],(0,Global_1$f._registerNode)(Line),Factory_1$u.Factory.addGetterSetter(Line,"closed",!1),Factory_1$u.Factory.addGetterSetter(Line,"bezier",!1),Factory_1$u.Factory.addGetterSetter(Line,"tension",0,(0,Validators_1$t.getNumberValidator)()),Factory_1$u.Factory.addGetterSetter(Line,"points",[],(0,Validators_1$t.getNumberArrayValidator)());var Path$1={},BezierFunctions={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];e.getCubicArcLength=(n,i,o)=>{let r,a,s;r=o/2,a=0;for(let l=0;l<20;l++)s=r*e.tValues[20][l]+r,a+=e.cValues[20][l]*t(n,i,s);return r*a};function t(e,t,i){const o=n(1,i,e),r=n(1,i,t),a=o*o+r*r;return Math.sqrt(a)}e.getQuadraticArcLength=(e,t,n)=>{void 0===n&&(n=1);const i=e[0]-2*e[1]+e[2],o=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],a=2*t[1]-2*t[0],s=4*(i*i+o*o),l=4*(i*r+o*a),c=r*r+a*a;if(0===s)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const u=l/(2*s),d=n+u,h=c/s-u*u,p=d*d+h>0?Math.sqrt(d*d+h):0,f=u*u+h>0?Math.sqrt(u*u+h):0,g=u+Math.sqrt(u*u+h)!==0?h*Math.log(Math.abs((d+p)/(u+f))):0;return Math.sqrt(s)/2*(d*p-u*f+g)};const n=(t,i,o)=>{const r=o.length-1;let a,s;if(0===r)return 0;if(0===t){s=0;for(let t=0;t<=r;t++)s+=e.binomialCoefficients[r][t]*Math.pow(1-i,r-t)*Math.pow(i,t)*o[t];return s}a=new Array(r);for(let e=0;e<r;e++)a[e]=r*(o[e+1]-o[e]);return n(t-1,i,a)};e.t2length=(e,t,n)=>{let i=1,o=e/t,r=(e-n(o))/t,a=0;for(;i>.001;){const s=n(o+r),l=Math.abs(e-s)/t;if(l<i)i=l,o+=r;else{const a=n(o-r),s=Math.abs(e-a)/t;s<i?(i=s,o-=r):r/=2}if(a++,a>500)break}return o}}(BezierFunctions),Object.defineProperty(Path$1,"__esModule",{value:!0}),Path$1.Path=void 0;const Factory_1$t=Factory,Shape_1$d=Shape,Global_1$e=Global,BezierFunctions_1=BezierFunctions;class Path extends Shape_1$d.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute()}))}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var n=!1,i=0;i<t.length;i++){var o=t[i].command,r=t[i].points;switch(o){case"L":e.lineTo(r[0],r[1]);break;case"M":e.moveTo(r[0],r[1]);break;case"C":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var a=r[0],s=r[1],l=r[2],c=r[3],u=r[4],d=r[5],h=r[6],p=r[7],f=l>c?l:c,g=l>c?1:l/c,m=l>c?c/l:1;e.translate(a,s),e.rotate(h),e.scale(g,m),e.arc(0,0,f,u,u+d,1-p),e.scale(1/g,1/m),e.rotate(-h),e.translate(-a,-s);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach((function(t){if("A"===t.command){var n=t.points[4],i=t.points[5],o=t.points[4]+i,r=Math.PI/180;if(Math.abs(n-o)<r&&(r=Math.abs(n-o)),i<0)for(let i=n-r;i>o;i-=r){const n=Path.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);e.push(n.x,n.y)}else for(let i=n+r;i<o;i+=r){const n=Path.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],i,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let a=0;a<=1;a+=.01){const n=Path.getPointOnCubicBezier(a,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(n.x,n.y)}else e=e.concat(t.points)}));for(var t,n,i=e[0],o=e[0],r=e[1],a=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],isNaN(t)||(i=Math.min(i,t),o=Math.max(o,t)),isNaN(n)||(r=Math.min(r,n),a=Math.max(a,n));return{x:i,y:r,width:o-i,height:a-r}}getLength(){return this.pathLength}getPointAtLength(e){return Path.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}static getPathLength(e){let t=0;for(var n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){var n,i=0,o=t.length;if(!o)return null;for(;i<o&&e>t[i].pathLength;)e-=t[i].pathLength,++i;if(i===o)return{x:(n=t[i-1].points.slice(-2))[0],y:n[1]};if(e<.01)return{x:(n=t[i].points.slice(0,2))[0],y:n[1]};var r=t[i],a=r.points;switch(r.command){case"L":return Path.getPointOnLine(e,r.start.x,r.start.y,a[0],a[1]);case"C":return Path.getPointOnCubicBezier((0,BezierFunctions_1.t2length)(e,Path.getPathLength(t),(e=>(0,BezierFunctions_1.getCubicArcLength)([r.start.x,a[0],a[2],a[4]],[r.start.y,a[1],a[3],a[5]],e))),r.start.x,r.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Path.getPointOnQuadraticBezier((0,BezierFunctions_1.t2length)(e,Path.getPathLength(t),(e=>(0,BezierFunctions_1.getQuadraticArcLength)([r.start.x,a[0],a[2]],[r.start.y,a[1],a[3]],e))),r.start.x,r.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],c=a[2],u=a[3],d=a[4],h=a[5],p=a[6];return d+=h*e/r.pathLength,Path.getPointOnEllipticalArc(s,l,c,u,d,p)}return null}static getPointOnLine(e,t,n,i,o,r,a){void 0===r&&(r=t),void 0===a&&(a=n);var s=(o-n)/(i-t+1e-8),l=Math.sqrt(e*e/(1+s*s));i<t&&(l*=-1);var c,u=s*l;if(i===t)c={x:r,y:a+u};else if((a-n)/(r-t+1e-8)===s)c={x:r+l,y:a+u};else{var d,h,p=this.getLineLength(t,n,i,o),f=(r-t)*(i-t)+(a-n)*(o-n);d=t+(f/=p*p)*(i-t),h=n+f*(o-n);var g=this.getLineLength(r,a,d,h),m=Math.sqrt(e*e-g*g);l=Math.sqrt(m*m/(1+s*s)),i<t&&(l*=-1),c={x:d+l,y:h+(u=s*l)}}return c}static getPointOnCubicBezier(e,t,n,i,o,r,a,s,l){function c(e){return e*e*e}function u(e){return 3*e*e*(1-e)}function d(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}return{x:s*c(e)+r*u(e)+i*d(e)+t*h(e),y:l*c(e)+a*u(e)+o*d(e)+n*h(e)}}static getPointOnQuadraticBezier(e,t,n,i,o,r,a){function s(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:r*s(e)+i*l(e)+t*c(e),y:a*s(e)+o*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,i,o,r){var a=Math.cos(r),s=Math.sin(r),l=n*Math.cos(o),c=i*Math.sin(o);return{x:e+(l*a-c*s),y:t+(l*s+c*a)}}static parsePathData(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)t=t.replace(new RegExp(n[i],"g"),"|"+n[i]);var o,r=t.split("|"),a=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<r.length;i++){var d=r[i],h=d.charAt(0);for(d=d.slice(1),s.length=0;o=u.exec(d);)s.push(o[0]);for(var p=[],f=0,g=s.length;f<g;f++)if("00"!==s[f]){var m=parseFloat(s[f]);isNaN(m)?p.push(0):p.push(m)}else p.push(0,0);for(;p.length>0&&!isNaN(p[0]);){var _,v,b,T,A,y,E,S,C,w,x="",M=[],R=l,I=c;switch(h){case"l":l+=p.shift(),c+=p.shift(),x="L",M.push(l,c);break;case"L":l=p.shift(),c=p.shift(),M.push(l,c);break;case"m":var D=p.shift(),k=p.shift();if(l+=D,c+=k,x="M",a.length>2&&"z"===a[a.length-1].command)for(var L=a.length-2;L>=0;L--)if("M"===a[L].command){l=a[L].points[0]+D,c=a[L].points[1]+k;break}M.push(l,c),h="l";break;case"M":l=p.shift(),c=p.shift(),x="M",M.push(l,c),h="L";break;case"h":l+=p.shift(),x="L",M.push(l,c);break;case"H":l=p.shift(),x="L",M.push(l,c);break;case"v":c+=p.shift(),x="L",M.push(l,c);break;case"V":c=p.shift(),x="L",M.push(l,c);break;case"C":M.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),c=p.shift(),M.push(l,c);break;case"c":M.push(l+p.shift(),c+p.shift(),l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),x="C",M.push(l,c);break;case"S":v=l,b=c,"C"===(_=a[a.length-1]).command&&(v=l+(l-_.points[2]),b=c+(c-_.points[3])),M.push(v,b,p.shift(),p.shift()),l=p.shift(),c=p.shift(),x="C",M.push(l,c);break;case"s":v=l,b=c,"C"===(_=a[a.length-1]).command&&(v=l+(l-_.points[2]),b=c+(c-_.points[3])),M.push(v,b,l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),x="C",M.push(l,c);break;case"Q":M.push(p.shift(),p.shift()),l=p.shift(),c=p.shift(),M.push(l,c);break;case"q":M.push(l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),x="Q",M.push(l,c);break;case"T":v=l,b=c,"Q"===(_=a[a.length-1]).command&&(v=l+(l-_.points[0]),b=c+(c-_.points[1])),l=p.shift(),c=p.shift(),x="Q",M.push(v,b,l,c);break;case"t":v=l,b=c,"Q"===(_=a[a.length-1]).command&&(v=l+(l-_.points[0]),b=c+(c-_.points[1])),l+=p.shift(),c+=p.shift(),x="Q",M.push(v,b,l,c);break;case"A":T=p.shift(),A=p.shift(),y=p.shift(),E=p.shift(),S=p.shift(),C=l,w=c,l=p.shift(),c=p.shift(),x="A",M=this.convertEndpointToCenterParameterization(C,w,l,c,E,S,T,A,y);break;case"a":T=p.shift(),A=p.shift(),y=p.shift(),E=p.shift(),S=p.shift(),C=l,w=c,l+=p.shift(),c+=p.shift(),x="A",M=this.convertEndpointToCenterParameterization(C,w,l,c,E,S,T,A,y)}a.push({command:x||h,points:M,start:{x:R,y:I},pathLength:this.calcLength(R,I,x||h,M)})}"z"!==h&&"Z"!==h||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(e,t,n,i){var o,r,a,s,l=Path;switch(n){case"L":return l.getLineLength(e,t,i[0],i[1]);case"C":return(0,BezierFunctions_1.getCubicArcLength)([e,i[0],i[2],i[4]],[t,i[1],i[3],i[5]],1);case"Q":return(0,BezierFunctions_1.getQuadraticArcLength)([e,i[0],i[2]],[t,i[1],i[3]],1);case"A":o=0;var c=i[4],u=i[5],d=i[4]+u,h=Math.PI/180;if(Math.abs(c-d)<h&&(h=Math.abs(c-d)),r=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),u<0)for(s=c-h;s>d;s-=h)a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),o+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;else for(s=c+h;s<d;s+=h)a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),o+=l.getLineLength(r.x,r.y,a.x,a.y),r=a;return a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),o+=l.getLineLength(r.x,r.y,a.x,a.y)}return 0}static convertEndpointToCenterParameterization(e,t,n,i,o,r,a,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-i)/2,d=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-i)/2,h=u*u/(a*a)+d*d/(s*s);h>1&&(a*=Math.sqrt(h),s*=Math.sqrt(h));var p=Math.sqrt((a*a*(s*s)-a*a*(d*d)-s*s*(u*u))/(a*a*(d*d)+s*s*(u*u)));o===r&&(p*=-1),isNaN(p)&&(p=0);var f=p*a*d/s,g=p*-s*u/a,m=(e+n)/2+Math.cos(c)*f-Math.sin(c)*g,_=(t+i)/2+Math.sin(c)*f+Math.cos(c)*g,v=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(v(e)*v(t))},T=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},A=T([1,0],[(u-f)/a,(d-g)/s]),y=[(u-f)/a,(d-g)/s],E=[(-1*u-f)/a,(-1*d-g)/s],S=T(y,E);return b(y,E)<=-1&&(S=Math.PI),b(y,E)>=1&&(S=0),0===r&&S>0&&(S-=2*Math.PI),1===r&&S<0&&(S+=2*Math.PI),[m,_,a,s,A,S,c,r]}}Path$1.Path=Path,Path.prototype.className="Path",Path.prototype._attrsAffectingSize=["data"],(0,Global_1$e._registerNode)(Path),Factory_1$t.Factory.addGetterSetter(Path,"data"),Object.defineProperty(Arrow$1,"__esModule",{value:!0}),Arrow$1.Arrow=void 0;const Factory_1$s=Factory,Line_1$1=Line$1,Validators_1$s=Validators,Global_1$d=Global,Path_1$2=Path$1;class Arrow extends Line_1$1.Line{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,n=this.points(),i=n,o=0!==this.tension()&&n.length>4;o&&(i=this.getTensionPoints());var r,a,s=this.pointerLength(),l=n.length;if(o){const e=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[l-2],n[l-1]],t=Path_1$2.Path.calcLength(i[i.length-4],i[i.length-3],"C",e),o=Path_1$2.Path.getPointOnQuadraticBezier(Math.min(1,1-s/t),e[0],e[1],e[2],e[3],e[4],e[5]);r=n[l-2]-o.x,a=n[l-1]-o.y}else r=n[l-2]-n[l-4],a=n[l-1]-n[l-3];var c=(Math.atan2(a,r)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[l-2],n[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),o?(r=(i[0]+i[2])/2-n[0],a=(i[1]+i[3])/2-n[1]):(r=n[2]-n[0],a=n[3]-n[1]),e.rotate((Math.atan2(-a,-r)+t)%t),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}}Arrow$1.Arrow=Arrow,Arrow.prototype.className="Arrow",(0,Global_1$d._registerNode)(Arrow),Factory_1$s.Factory.addGetterSetter(Arrow,"pointerLength",10,(0,Validators_1$s.getNumberValidator)()),Factory_1$s.Factory.addGetterSetter(Arrow,"pointerWidth",10,(0,Validators_1$s.getNumberValidator)()),Factory_1$s.Factory.addGetterSetter(Arrow,"pointerAtBeginning",!1),Factory_1$s.Factory.addGetterSetter(Arrow,"pointerAtEnding",!0);var Circle$1={};Object.defineProperty(Circle$1,"__esModule",{value:!0}),Circle$1.Circle=void 0;const Factory_1$r=Factory,Shape_1$c=Shape,Validators_1$r=Validators,Global_1$c=Global;class Circle extends Shape_1$c.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Circle$1.Circle=Circle,Circle.prototype._centroid=!0,Circle.prototype.className="Circle",Circle.prototype._attrsAffectingSize=["radius"],(0,Global_1$c._registerNode)(Circle),Factory_1$r.Factory.addGetterSetter(Circle,"radius",0,(0,Validators_1$r.getNumberValidator)());var Ellipse$1={};Object.defineProperty(Ellipse$1,"__esModule",{value:!0}),Ellipse$1.Ellipse=void 0;const Factory_1$q=Factory,Shape_1$b=Shape,Validators_1$q=Validators,Global_1$b=Global;class Ellipse extends Shape_1$b.Shape{_sceneFunc(e){var t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ellipse$1.Ellipse=Ellipse,Ellipse.prototype.className="Ellipse",Ellipse.prototype._centroid=!0,Ellipse.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,Global_1$b._registerNode)(Ellipse),Factory_1$q.Factory.addComponentsGetterSetter(Ellipse,"radius",["x","y"]),Factory_1$q.Factory.addGetterSetter(Ellipse,"radiusX",0,(0,Validators_1$q.getNumberValidator)()),Factory_1$q.Factory.addGetterSetter(Ellipse,"radiusY",0,(0,Validators_1$q.getNumberValidator)());var Image$2={};Object.defineProperty(Image$2,"__esModule",{value:!0}),Image$2.Image=void 0;const Util_1$7=Util,Factory_1$p=Factory,Shape_1$a=Shape,Global_1$a=Global,Validators_1$p=Validators;let Image$1=class e extends Shape_1$a.Shape{constructor(e){super(e),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image;let r;if(o){const e=this.attrs.cropWidth,i=this.attrs.cropHeight;r=e&&i?[o,this.cropX(),this.cropY(),e,i,0,0,t,n]:[o,0,0,t,n]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?Util_1$7.Util.drawRoundedRectPath(e,t,n,i):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),o&&(i&&e.clip(),e.drawImage.apply(e,r))}_hitFunc(e){var t=this.width(),n=this.height(),i=this.cornerRadius();e.beginPath(),i?Util_1$7.Util.drawRoundedRectPath(e,t,n,i):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(t,n,i=null){var o=Util_1$7.Util.createImageElement();o.onload=function(){var t=new e({image:o});n(t)},o.onerror=i,o.crossOrigin="Anonymous",o.src=t}};Image$2.Image=Image$1,Image$1.prototype.className="Image",(0,Global_1$a._registerNode)(Image$1),Factory_1$p.Factory.addGetterSetter(Image$1,"cornerRadius",0,(0,Validators_1$p.getNumberOrArrayOfNumbersValidator)(4)),Factory_1$p.Factory.addGetterSetter(Image$1,"image"),Factory_1$p.Factory.addComponentsGetterSetter(Image$1,"crop",["x","y","width","height"]),Factory_1$p.Factory.addGetterSetter(Image$1,"cropX",0,(0,Validators_1$p.getNumberValidator)()),Factory_1$p.Factory.addGetterSetter(Image$1,"cropY",0,(0,Validators_1$p.getNumberValidator)()),Factory_1$p.Factory.addGetterSetter(Image$1,"cropWidth",0,(0,Validators_1$p.getNumberValidator)()),Factory_1$p.Factory.addGetterSetter(Image$1,"cropHeight",0,(0,Validators_1$p.getNumberValidator)());var Label$1={};Object.defineProperty(Label$1,"__esModule",{value:!0}),Label$1.Tag=Label$1.Label=void 0;const Factory_1$o=Factory,Shape_1$9=Shape,Group_1$1=Group$1,Validators_1$o=Validators,Global_1$9=Global;var ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group_1$1.Group{constructor(e){super(e),this.on("add.konva",(function(e){this._addListeners(e.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,n=this,i=function(){n._sync()};for(t=0;t<attrChangeListLen$1;t++)e.on(ATTR_CHANGE_LIST$2[t]+CHANGE_KONVA$1,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,n,i,o,r,a,s=this.getText(),l=this.getTag();if(s&&l){switch(e=s.width(),t=s.height(),n=l.pointerDirection(),i=l.pointerWidth(),a=l.pointerHeight(),o=0,r=0,n){case UP:o=e/2,r=-1*a;break;case RIGHT$1:o=e+i,r=t/2;break;case DOWN:o=e/2,r=t+a;break;case LEFT$1:o=-1*i,r=t/2}l.setAttrs({x:-1*o,y:-1*r,width:e,height:t}),s.setAttrs({x:-1*o,y:-1*r})}}}Label$1.Label=Label,Label.prototype.className="Label",(0,Global_1$9._registerNode)(Label);class Tag extends Shape_1$9.Shape{_sceneFunc(e){var t=this.width(),n=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),r=this.pointerHeight(),a=this.cornerRadius();let s=0,l=0,c=0,u=0;"number"==typeof a?s=l=c=u=Math.min(a,t/2,n/2):(s=Math.min(a[0]||0,t/2,n/2),l=Math.min(a[1]||0,t/2,n/2),u=Math.min(a[2]||0,t/2,n/2),c=Math.min(a[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(s,0),i===UP&&(e.lineTo((t-o)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+o)/2,0)),e.lineTo(t-l,0),e.arc(t-l,l,l,3*Math.PI/2,0,!1),i===RIGHT$1&&(e.lineTo(t,(n-r)/2),e.lineTo(t+o,n/2),e.lineTo(t,(n+r)/2)),e.lineTo(t,n-u),e.arc(t-u,n-u,u,0,Math.PI/2,!1),i===DOWN&&(e.lineTo((t+o)/2,n),e.lineTo(t/2,n+r),e.lineTo((t-o)/2,n)),e.lineTo(c,n),e.arc(c,n-c,c,Math.PI/2,Math.PI,!1),i===LEFT$1&&(e.lineTo(0,(n+r)/2),e.lineTo(-1*o,n/2),e.lineTo(0,(n-r)/2)),e.lineTo(0,s),e.arc(s,s,s,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,n=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),r=this.width(),a=this.height();return o===UP?(t-=i,a+=i):o===DOWN?a+=i:o===LEFT$1?(e-=1.5*n,r+=n):o===RIGHT$1&&(r+=1.5*n),{x:e,y:t,width:r,height:a}}}Label$1.Tag=Tag,Tag.prototype.className="Tag",(0,Global_1$9._registerNode)(Tag),Factory_1$o.Factory.addGetterSetter(Tag,"pointerDirection",NONE$1),Factory_1$o.Factory.addGetterSetter(Tag,"pointerWidth",0,(0,Validators_1$o.getNumberValidator)()),Factory_1$o.Factory.addGetterSetter(Tag,"pointerHeight",0,(0,Validators_1$o.getNumberValidator)()),Factory_1$o.Factory.addGetterSetter(Tag,"cornerRadius",0,(0,Validators_1$o.getNumberOrArrayOfNumbersValidator)(4));var Rect$1={};Object.defineProperty(Rect$1,"__esModule",{value:!0}),Rect$1.Rect=void 0;const Factory_1$n=Factory,Shape_1$8=Shape,Global_1$8=Global,Util_1$6=Util,Validators_1$n=Validators;class Rect extends Shape_1$8.Shape{_sceneFunc(e){var t=this.cornerRadius(),n=this.width(),i=this.height();e.beginPath(),t?Util_1$6.Util.drawRoundedRectPath(e,n,i,t):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}}Rect$1.Rect=Rect,Rect.prototype.className="Rect",(0,Global_1$8._registerNode)(Rect),Factory_1$n.Factory.addGetterSetter(Rect,"cornerRadius",0,(0,Validators_1$n.getNumberOrArrayOfNumbersValidator)(4));var RegularPolygon$1={};Object.defineProperty(RegularPolygon$1,"__esModule",{value:!0}),RegularPolygon$1.RegularPolygon=void 0;const Factory_1$m=Factory,Shape_1$7=Shape,Validators_1$m=Validators,Global_1$7=Global;class RegularPolygon extends Shape_1$7.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(var i=0;i<e;i++)n.push({x:t*Math.sin(2*i*Math.PI/e),y:-1*t*Math.cos(2*i*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();var t=e[0].x,n=e[0].y,i=e[0].x,o=e[0].y;return e.forEach((e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.y)})),{x:t,y:i,width:n-t,height:o-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}RegularPolygon$1.RegularPolygon=RegularPolygon,RegularPolygon.prototype.className="RegularPolygon",RegularPolygon.prototype._centroid=!0,RegularPolygon.prototype._attrsAffectingSize=["radius"],(0,Global_1$7._registerNode)(RegularPolygon),Factory_1$m.Factory.addGetterSetter(RegularPolygon,"radius",0,(0,Validators_1$m.getNumberValidator)()),Factory_1$m.Factory.addGetterSetter(RegularPolygon,"sides",0,(0,Validators_1$m.getNumberValidator)());var Ring$1={};Object.defineProperty(Ring$1,"__esModule",{value:!0}),Ring$1.Ring=void 0;const Factory_1$l=Factory,Shape_1$6=Shape,Validators_1$l=Validators,Global_1$6=Global;var PIx2=2*Math.PI;class Ring extends Shape_1$6.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,PIx2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),PIx2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ring$1.Ring=Ring,Ring.prototype.className="Ring",Ring.prototype._centroid=!0,Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Global_1$6._registerNode)(Ring),Factory_1$l.Factory.addGetterSetter(Ring,"innerRadius",0,(0,Validators_1$l.getNumberValidator)()),Factory_1$l.Factory.addGetterSetter(Ring,"outerRadius",0,(0,Validators_1$l.getNumberValidator)());var Sprite$1={};Object.defineProperty(Sprite$1,"__esModule",{value:!0}),Sprite$1.Sprite=void 0;const Factory_1$k=Factory,Shape_1$5=Shape,Animation_1=Animation$1,Validators_1$k=Validators,Global_1$5=Global;class Sprite extends Shape_1$5.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Animation_1.Animation((()=>{var e=this._updated;return this._updated=!1,e})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(e){var t=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[t],r=this.frameOffsets(),a=o[i+0],s=o[i+1],l=o[i+2],c=o[i+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),u)if(r){var d=r[t],h=2*n;e.drawImage(u,a,s,l,c,d[h+0],d[h+1],l,c)}else e.drawImage(u,a,s,l,c,0,0,l,c)}_hitFunc(e){var t=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[t],r=this.frameOffsets(),a=o[i+2],s=o[i+3];if(e.beginPath(),r){var l=r[t],c=2*n;e.rect(l[c+0],l[c+1],a,s)}else e.rect(0,0,a,s);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval((function(){e._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}Sprite$1.Sprite=Sprite,Sprite.prototype.className="Sprite",(0,Global_1$5._registerNode)(Sprite),Factory_1$k.Factory.addGetterSetter(Sprite,"animation"),Factory_1$k.Factory.addGetterSetter(Sprite,"animations"),Factory_1$k.Factory.addGetterSetter(Sprite,"frameOffsets"),Factory_1$k.Factory.addGetterSetter(Sprite,"image"),Factory_1$k.Factory.addGetterSetter(Sprite,"frameIndex",0,(0,Validators_1$k.getNumberValidator)()),Factory_1$k.Factory.addGetterSetter(Sprite,"frameRate",17,(0,Validators_1$k.getNumberValidator)()),Factory_1$k.Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Star$1={};Object.defineProperty(Star$1,"__esModule",{value:!0}),Star$1.Star=void 0;const Factory_1$j=Factory,Shape_1$4=Shape,Validators_1$j=Validators,Global_1$4=Global;class Star extends Shape_1$4.Shape{_sceneFunc(e){var t=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var o=1;o<2*i;o++){var r=o%2==0?n:t,a=r*Math.sin(o*Math.PI/i),s=-1*r*Math.cos(o*Math.PI/i);e.lineTo(a,s)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Star$1.Star=Star,Star.prototype.className="Star",Star.prototype._centroid=!0,Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,Global_1$4._registerNode)(Star),Factory_1$j.Factory.addGetterSetter(Star,"numPoints",5,(0,Validators_1$j.getNumberValidator)()),Factory_1$j.Factory.addGetterSetter(Star,"innerRadius",0,(0,Validators_1$j.getNumberValidator)()),Factory_1$j.Factory.addGetterSetter(Star,"outerRadius",0,(0,Validators_1$j.getNumberValidator)());var Text$1={};Object.defineProperty(Text$1,"__esModule",{value:!0}),Text$1.Text=Text$1.stringToArray=void 0;const Util_1$5=Util,Factory_1$i=Factory,Shape_1$3=Shape,Validators_1$i=Validators,Global_1$3=Global;function stringToArray(e){return Array.from(e)}Text$1.stringToArray=stringToArray;var AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="…",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length,dummyContext;function normalizeFontFamily(e){return e.split(",").map((e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e})).join(", ")}function getDummyContext(){return dummyContext||(dummyContext=Util_1$5.Util.createCanvasElement().getContext(CONTEXT_2D))}function _fillFunc$1(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}class Text extends Shape_1$3.Shape{constructor(e){super(checkDefaultFill(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<attrChangeListLen;t++)this.on(ATTR_CHANGE_LIST$1[t]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,n=t.length;if(this.text()){var i,o=this.padding(),r=this.fontSize(),a=this.lineHeight()*r,s=this.verticalAlign(),l=this.direction(),c=0,u=this.align(),d=this.getWidth(),h=this.letterSpacing(),p=this.fill(),f=this.textDecoration(),g=-1!==f.indexOf("underline"),m=-1!==f.indexOf("line-through"),_=0,v=(_=a/2,0),b=0;for((l=l===INHERIT?e.direction:l)===RTL&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",MIDDLE),e.setAttr("textAlign",LEFT),s===MIDDLE?c=(this.getHeight()-n*a-2*o)/2:s===BOTTOM&&(c=this.getHeight()-n*a-2*o),e.translate(o,c+o),i=0;i<n;i++){v=0,b=0;var T,A,y,E=t[i],S=E.text,C=E.width,w=E.lastInParagraph;if(e.save(),u===RIGHT?v+=d-C-2*o:u===CENTER&&(v+=(d-C-2*o)/2),g){e.save(),e.beginPath(),e.moveTo(v,_+b+Math.round(r/2)),A=0===(T=S.split(" ").length-1),y=u!==JUSTIFY||w?C:d-2*o,e.lineTo(v+Math.round(y),_+b+Math.round(r/2)),e.lineWidth=r/15;const t=this._getLinearGradient();e.strokeStyle=t||p,e.stroke(),e.restore()}if(m){e.save(),e.beginPath(),e.moveTo(v,_+b),A=0===(T=S.split(" ").length-1),y=u===JUSTIFY&&w&&!A?d-2*o:C,e.lineTo(v+Math.round(y),_+b),e.lineWidth=r/15;const t=this._getLinearGradient();e.strokeStyle=t||p,e.stroke(),e.restore()}if(l===RTL||0===h&&u!==JUSTIFY)0!==h&&e.setAttr("letterSpacing",`${h}px`),this._partialTextX=v,this._partialTextY=_+b,this._partialText=S,e.fillStrokeShape(this);else{T=S.split(" ").length-1;for(var x=stringToArray(S),M=0;M<x.length;M++){var R=x[M];" "!==R||w||u!==JUSTIFY||(v+=(d-2*o-C)/T),this._partialTextX=v,this._partialTextY=_+b,this._partialText=R,e.fillStrokeShape(this),v+=this.measureSize(R).width+h}}e.restore(),n>1&&(_+=a)}}}_hitFunc(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=Util_1$5.Util._isString(e)?e:null==e?"":e+"";return this._setAttr(TEXT,t),this}getWidth(){return this.attrs.width===AUTO||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===AUTO||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util_1$5.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n=getDummyContext(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:i}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(e){this.align()===JUSTIFY&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),n=e.length;return getDummyContext().measureText(e).width+(n?t*(n-1):0)}_setTextData(){var e=this.text().split("\n"),t=+this.fontSize(),n=0,i=this.lineHeight()*t,o=this.attrs.width,r=this.attrs.height,a=o!==AUTO&&void 0!==o,s=r!==AUTO&&void 0!==r,l=this.padding(),c=o-2*l,u=r-2*l,d=0,h=this.wrap(),p=h!==CHAR&&h!==NONE,f=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();for(var g=f?this._getTextWidth(ELLIPSIS):0,m=0,_=e.length;m<_;++m){var v=e[m],b=this._getTextWidth(v);if(a&&b>c)for(;v.length>0;){for(var T=0,A=v.length,y="",E=0;T<A;){var S=T+A>>>1,C=v.slice(0,S+1),w=this._getTextWidth(C)+g;w<=c?(T=S+1,y=C,E=w):A=S}if(!y)break;if(p){var x,M=v[y.length];(x=(M===SPACE||M===DASH)&&E<=c?y.length:Math.max(y.lastIndexOf(SPACE),y.lastIndexOf(DASH))+1)>0&&(T=x,y=y.slice(0,T),E=this._getTextWidth(y))}if(y=y.trimRight(),this._addTextLine(y),n=Math.max(n,E),d+=i,this._shouldHandleEllipsis(d)){this._tryToAddEllipsisToLastLine();break}if((v=(v=v.slice(T)).trimLeft()).length>0&&(b=this._getTextWidth(v))<=c){this._addTextLine(v),d+=i,n=Math.max(n,b);break}}else this._addTextLine(v),d+=i,n=Math.max(n,b),this._shouldHandleEllipsis(d)&&m<_-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&d+i>u)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){var t=+this.fontSize(),n=this.lineHeight()*t,i=this.attrs.height,o=i!==AUTO&&void 0!==i,r=i-2*this.padding();return!(this.wrap()!==NONE)||o&&e+n>r}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=e!==AUTO&&void 0!==e,n=e-2*this.padding(),i=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(o&&i){if(t)this._getTextWidth(o.text+ELLIPSIS)<n||(o.text=o.text.slice(0,o.text.length-3));this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+ELLIPSIS)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}}Text$1.Text=Text,Text.prototype._fillFunc=_fillFunc$1,Text.prototype._strokeFunc=_strokeFunc$1,Text.prototype.className=TEXT_UPPER,Text.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,Global_1$3._registerNode)(Text),Factory_1$i.Factory.overWriteSetter(Text,"width",(0,Validators_1$i.getNumberOrAutoValidator)()),Factory_1$i.Factory.overWriteSetter(Text,"height",(0,Validators_1$i.getNumberOrAutoValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"direction",INHERIT),Factory_1$i.Factory.addGetterSetter(Text,"fontFamily","Arial"),Factory_1$i.Factory.addGetterSetter(Text,"fontSize",12,(0,Validators_1$i.getNumberValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"fontStyle",NORMAL$1),Factory_1$i.Factory.addGetterSetter(Text,"fontVariant",NORMAL$1),Factory_1$i.Factory.addGetterSetter(Text,"padding",0,(0,Validators_1$i.getNumberValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"align",LEFT),Factory_1$i.Factory.addGetterSetter(Text,"verticalAlign",TOP),Factory_1$i.Factory.addGetterSetter(Text,"lineHeight",1,(0,Validators_1$i.getNumberValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"wrap",WORD),Factory_1$i.Factory.addGetterSetter(Text,"ellipsis",!1,(0,Validators_1$i.getBooleanValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"letterSpacing",0,(0,Validators_1$i.getNumberValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"text","",(0,Validators_1$i.getStringValidator)()),Factory_1$i.Factory.addGetterSetter(Text,"textDecoration","");var TextPath$1={};Object.defineProperty(TextPath$1,"__esModule",{value:!0}),TextPath$1.TextPath=void 0;const Util_1$4=Util,Factory_1$h=Factory,Shape_1$2=Shape,Path_1$1=Path$1,Text_1$1=Text$1,Validators_1$h=Validators,Global_1$2=Global;var EMPTY_STRING="",NORMAL="normal";function _fillFunc(e){e.fillText(this.partialText,0,0)}function _strokeFunc(e){e.strokeText(this.partialText,0,0)}class TextPath extends Shape_1$2.Shape{constructor(e){super(e),this.dummyCanvas=Util_1$4.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path_1$1.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;return e-1>this.pathLength?null:Path_1$1.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Path_1$1.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),n=this.fill(),i=this.fontSize(),o=this.glyphInfo;"underline"===t&&e.beginPath();for(var r=0;r<o.length;r++){e.save();var a=o[r].p0;e.translate(a.x,a.y),e.rotate(o[r].rotation),this.partialText=o[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var n=t[0].p0;e.moveTo(n.x,n.y)}for(var i=0;i<t.length;i++){var o=t[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util_1$4.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Text_1$1.Text.prototype.setText.call(this,e)}_getContextFont(){return Text_1$1.Text.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),o=this.align(),r=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let s=0;"center"===o&&(s=Math.max(0,this.pathLength/2-a/2)),"right"===o&&(s=Math.max(0,this.pathLength-a));const l=(0,Text_1$1.stringToArray)(this.text());let c=s;for(var u=0;u<l.length;u++){const t=this._getPointAtLength(c);if(!t)return;let n=this._getTextSize(l[u]).width+i;if(" "===l[u]&&"justify"===o){const e=this.text().split(" ").length-1;n+=(this.pathLength-a)/e}const s=this._getPointAtLength(c+n);if(!s)return;const d=Path_1$1.Path.getLineLength(t.x,t.y,s.x,s.y);let h=0;if(r)try{h=r(l[u-1],l[u])*this.fontSize()}catch(e){h=0}t.x+=h,s.x+=h,this.textWidth+=h;const p=Path_1$1.Path.getPointOnLine(h+d/2,t.x,t.y,s.x,s.y),f=Math.atan2(s.y-t.y,s.x-t.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:l[u],rotation:f,p0:t,p1:s}),c+=n}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach((function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)}));for(var t,n,i=e[0]||0,o=e[0]||0,r=e[1]||0,a=e[1]||0,s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],i=Math.min(i,t),o=Math.max(o,t),r=Math.min(r,n),a=Math.max(a,n);var l=this.fontSize();return{x:i-l/2,y:r-l/2,width:o-i+l,height:a-r+l}}destroy(){return Util_1$4.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath$1.TextPath=TextPath,TextPath.prototype._fillFunc=_fillFunc,TextPath.prototype._strokeFunc=_strokeFunc,TextPath.prototype._fillFuncHit=_fillFunc,TextPath.prototype._strokeFuncHit=_strokeFunc,TextPath.prototype.className="TextPath",TextPath.prototype._attrsAffectingSize=["text","fontSize","data"],(0,Global_1$2._registerNode)(TextPath),Factory_1$h.Factory.addGetterSetter(TextPath,"data"),Factory_1$h.Factory.addGetterSetter(TextPath,"fontFamily","Arial"),Factory_1$h.Factory.addGetterSetter(TextPath,"fontSize",12,(0,Validators_1$h.getNumberValidator)()),Factory_1$h.Factory.addGetterSetter(TextPath,"fontStyle",NORMAL),Factory_1$h.Factory.addGetterSetter(TextPath,"align","left"),Factory_1$h.Factory.addGetterSetter(TextPath,"letterSpacing",0,(0,Validators_1$h.getNumberValidator)()),Factory_1$h.Factory.addGetterSetter(TextPath,"textBaseline","middle"),Factory_1$h.Factory.addGetterSetter(TextPath,"fontVariant",NORMAL),Factory_1$h.Factory.addGetterSetter(TextPath,"text",EMPTY_STRING),Factory_1$h.Factory.addGetterSetter(TextPath,"textDecoration",null),Factory_1$h.Factory.addGetterSetter(TextPath,"kerningFunc",null);var Transformer$1={};Object.defineProperty(Transformer$1,"__esModule",{value:!0}),Transformer$1.Transformer=void 0;const Util_1$3=Util,Factory_1$g=Factory,Node_1$f=Node$2,Shape_1$1=Shape,Rect_1$1=Rect$1,Group_1=Group$1,Global_1$1=Global,Validators_1$g=Validators,Global_2$1=Global;var EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((e=>e+`.${EVENTS_NAME}`)).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const TOUCH_DEVICE="ontouchstart"in Global_1$1.Konva._global;function getCursor(e,t,n){if("rotater"===e)return n;t+=Util_1$3.Util.degToRad(ANGLES[e]||0);var i=(Util_1$3.Util.radToDeg(t)%360+360)%360;return Util_1$3.Util._inRange(i,337.5,360)||Util_1$3.Util._inRange(i,0,22.5)?"ns-resize":Util_1$3.Util._inRange(i,22.5,67.5)?"nesw-resize":Util_1$3.Util._inRange(i,67.5,112.5)?"ew-resize":Util_1$3.Util._inRange(i,112.5,157.5)?"nwse-resize":Util_1$3.Util._inRange(i,157.5,202.5)?"ns-resize":Util_1$3.Util._inRange(i,202.5,247.5)?"nesw-resize":Util_1$3.Util._inRange(i,247.5,292.5)?"ew-resize":Util_1$3.Util._inRange(i,292.5,337.5)?"nwse-resize":(Util_1$3.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function getCenter$1(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function rotateAroundPoint(e,t,n){const i=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),o=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return _objectSpread(_objectSpread({},e),{},{rotation:e.rotation+t,x:i,y:o})}function rotateAroundCenter(e,t){return rotateAroundPoint(e,t,getCenter$1(e))}function getSnap(e,t,n){let i=t;for(let o=0;o<e.length;o++){const r=Global_1$1.Konva.getAngle(e[o]),a=Math.abs(r-t)%(2*Math.PI);Math.min(a,2*Math.PI-a)<n&&(i=r)}return i}class Transformer extends Group_1.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Util_1$3.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter((e=>!e.isAncestorOf(this)||(Util_1$3.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));return this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},n=e._attrsAffectingSize.map((e=>e+"Change."+this._getEventNamespace())).join(" ");e.on(n,t),e.on(TRANSFORM_CHANGE_STR.map((e=>e+`.${this._getEventNamespace()}`)).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,(n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)})),e.on(`dragmove.${this._getEventNamespace()}`,(n=>{if(!t)return;const i=e.getAbsolutePosition(),o=i.x-t.x,r=i.y-t.y;this.nodes().forEach((t=>{if(t===e)return;if(t.isDragging())return;const i=t.getAbsolutePosition();t.setAbsolutePosition({x:i.x+o,y:i.y+r}),t.startDrag(n)})),t=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((e=>{e.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(n),r=e.getAbsolutePosition(n),a=i.x*o.x-e.offsetX()*o.x,s=i.y*o.y-e.offsetY()*o.y;const l=(Global_1$1.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return rotateAroundPoint({x:r.x+a*Math.cos(l)+s*Math.sin(-l),y:r.y+s*Math.cos(l)+a*Math.sin(l),width:i.width*o.x,height:i.height*o.y,rotation:l},-Global_1$1.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map((t=>{const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var i=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],o=t.getAbsoluteTransform();i.forEach((function(t){var n=o.point(t);e.push(n)}))}));const t=new Util_1$3.Transform;t.rotate(-Global_1$1.Konva.getAngle(this.rotation()));var n=1/0,i=1/0,o=-1/0,r=-1/0;e.forEach((function(e){var a=t.point(e);void 0===n&&(n=o=a.x,i=r=a.y),n=Math.min(n,a.x),i=Math.min(i,a.y),o=Math.max(o,a.x),r=Math.max(r,a.y)})),t.invert();const a=t.point({x:n,y:i});return{x:a.x,y:a.y,width:o-n,height:r-i,rotation:Global_1$1.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach((e=>{this._createAnchor(e)})),this._createAnchor("rotater")}_createAnchor(e){var t=new Rect_1$1.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),n=this;t.on("mousedown touchstart",(function(e){n._handleMouseDown(e)})),t.on("dragstart",(e=>{t.stopDrag(),e.cancelBubble=!0})),t.on("dragend",(e=>{e.cancelBubble=!0})),t.on("mouseenter",(()=>{var n=Global_1$1.Konva.getAngle(this.rotation()),i=this.rotateAnchorCursor(),o=getCursor(e,n,i);t.getStage().content&&(t.getStage().content.style.cursor=o),this._cursorChange=!0})),t.on("mouseout",(()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(t)}_createBack(){var e=new Shape_1$1.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,t){var n=t.getParent(),i=n.padding();e.beginPath(),e.rect(-i,-i,t.width()+2*i,t.height()+2*i),e.moveTo(t.width()/2,-i),n.rotateEnabled()&&e.lineTo(t.width()/2,-n.rotateAnchorOffset()*Util_1$3.Util._sign(t.height())-i),e.fillStrokeShape(t)},hitFunc:(e,t)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(e=>{e.cancelBubble=!0})),e.on("dragmove",(e=>{e.cancelBubble=!0})),e.on("dragend",(e=>{e.cancelBubble=!0})),this.on("dragmove",(e=>{this.update()}))}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),n=t.width,i=t.height,o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(n/o),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var r=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-r.x,y:a.y-r.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach((t=>{t._fire("transformstart",{evt:e.evt,target:t})}))}_handleMouseMove(e){var t,n,i,o=this.findOne("."+this._movingAnchorName),r=o.getStage();r.setPointersPositions(e);const a=r.getPointerPosition();let s={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const l=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,e)),o.setAbsolutePosition(s);const c=o.getAbsolutePosition();if(l.x!==c.x||l.y!==c.y)if("rotater"!==this._movingAnchorName){var u,d=this.shiftBehavior();u="inverted"===d?this.keepRatio()&&!e.shiftKey:"none"===d?this.keepRatio():this.keepRatio()||e.shiftKey;var h=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(u){var p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(p.x-o.x(),2)+Math.pow(p.y-o.y(),2));var f=this.findOne(".top-left").x()>p.x?-1:1,g=this.findOne(".top-left").y()>p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".top-left").x(p.x-t),this.findOne(".top-left").y(p.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(o.y());else if("top-right"===this._movingAnchorName){if(u){p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-p.x,2)+Math.pow(p.y-o.y(),2));f=this.findOne(".top-right").x()<p.x?-1:1,g=this.findOne(".top-right").y()>p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".top-right").x(p.x+t),this.findOne(".top-right").y(p.y-n)}var m=o.position();this.findOne(".top-left").y(m.y),this.findOne(".bottom-right").x(m.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(o.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(o.x());else if("bottom-left"===this._movingAnchorName){if(u){p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(p.x-o.x(),2)+Math.pow(o.y()-p.y,2));f=p.x<o.x()?-1:1,g=o.y()<p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,o.x(p.x-t),o.y(p.y+n)}m=o.position(),this.findOne(".top-left").x(m.x),this.findOne(".bottom-right").y(m.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(o.y());else if("bottom-right"===this._movingAnchorName){if(u){p=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-p.x,2)+Math.pow(o.y()-p.y,2));f=this.findOne(".bottom-right").x()<p.x?-1:1,g=this.findOne(".bottom-right").y()<p.y?-1:1;t=i*this.cos*f,n=i*this.sin*g,this.findOne(".bottom-right").x(p.x+t),this.findOne(".bottom-right").y(p.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(h=this.centeredScaling()||e.altKey){var _=this.findOne(".top-left"),v=this.findOne(".bottom-right"),b=_.x(),T=_.y(),A=this.getWidth()-v.x(),y=this.getHeight()-v.y();v.move({x:-b,y:-T}),_.move({x:A,y:y})}var E=this.findOne(".top-left").getAbsolutePosition();t=E.x,n=E.y;var S=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:S,height:C,rotation:Global_1$1.Konva.getAngle(this.rotation())},e)}else{var w=this._getNodeRect();t=o.x()-w.width/2,n=-o.y()+w.height/2;let i=Math.atan2(-n,t)+Math.PI/2;w.height<0&&(i-=Math.PI);const r=Global_1$1.Konva.getAngle(this.rotation())+i,a=Global_1$1.Konva.getAngle(this.rotationSnapTolerance()),s=rotateAroundCenter(w,getSnap(this.rotationSnaps(),r,a)-w.rotation);this._fitNodesInto(s,e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach((t=>{t._fire("transformend",{evt:e,target:t})})),this._movingAnchorName=null}}_fitNodesInto(e,t){var n=this._getNodeRect();if(Util_1$3.Util._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(Util_1$3.Util._inRange(e.height,2*-this.padding()-1,1))return void this.update();const i=this.flipEnabled();var o=new Util_1$3.Transform;if(o.rotate(Global_1$1.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const t=o.point({x:2*-this.padding(),y:0});if(e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,!i)return void this.update()}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const t=o.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const t=o.point({x:0,y:2*-this.padding()});if(e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const t=o.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){const t=this.boundBoxFunc()(n,e);t?e=t:Util_1$3.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const r=1e7,a=new Util_1$3.Transform;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/r,n.height/r);const s=new Util_1$3.Transform;s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.width/r,e.height/r);const l=s.multiply(a.invert());this._nodes.forEach((e=>{var n;const i=e.getParent().getAbsoluteTransform(),o=e.getTransform().copy();o.translate(e.offsetX(),e.offsetY());const r=new Util_1$3.Transform;r.multiply(i.copy().invert()).multiply(l).multiply(i).multiply(o);const a=r.decompose();e.setAttrs(a),this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e}),null===(n=e.getLayer())||void 0===n||n.batchDraw()})),this.rotation(Util_1$3.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(Util_1$3.Util._getRotation(t.rotation));var n=t.width,i=t.height,o=this.enabledAnchors(),r=this.resizeEnabled(),a=this.padding(),s=this.anchorSize();const l=this.find("._anchor");l.forEach((e=>{e.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+a,offsetY:s/2+a,visible:r&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+a,visible:r&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-a,offsetY:s/2+a,visible:r&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:s/2+a,visible:r&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:s/2-a,visible:r&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:s/2+a,offsetY:s/2-a,visible:r&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:s/2-a,visible:r&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:s/2-a,offsetY:s/2-a,visible:r&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*Util_1$3.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&l.forEach((e=>{c(e)})),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group_1.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node_1$f.Node.prototype.toObject.call(this)}clone(e){return Node_1$f.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function validateAnchors(e){return e instanceof Array||Util_1$3.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach((function(e){-1===ANCHORS_NAMES.indexOf(e)&&Util_1$3.Util.warn("Unknown anchor name: "+e+". Available names are: "+ANCHORS_NAMES.join(", "))})),e||[]}Transformer$1.Transformer=Transformer,Transformer.prototype.className="Transformer",(0,Global_2$1._registerNode)(Transformer),Factory_1$g.Factory.addGetterSetter(Transformer,"enabledAnchors",ANCHORS_NAMES,validateAnchors),Factory_1$g.Factory.addGetterSetter(Transformer,"flipEnabled",!0,(0,Validators_1$g.getBooleanValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"resizeEnabled",!0),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorSize",10,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"rotateEnabled",!0),Factory_1$g.Factory.addGetterSetter(Transformer,"rotationSnaps",[]),Factory_1$g.Factory.addGetterSetter(Transformer,"rotateAnchorOffset",50,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"rotateAnchorCursor","crosshair"),Factory_1$g.Factory.addGetterSetter(Transformer,"rotationSnapTolerance",5,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"borderEnabled",!0),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStroke","rgb(0, 161, 255)"),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStrokeWidth",1,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorFill","white"),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorCornerRadius",0,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"borderStroke","rgb(0, 161, 255)"),Factory_1$g.Factory.addGetterSetter(Transformer,"borderStrokeWidth",1,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"borderDash"),Factory_1$g.Factory.addGetterSetter(Transformer,"keepRatio",!0),Factory_1$g.Factory.addGetterSetter(Transformer,"shiftBehavior","default"),Factory_1$g.Factory.addGetterSetter(Transformer,"centeredScaling",!1),Factory_1$g.Factory.addGetterSetter(Transformer,"ignoreStroke",!1),Factory_1$g.Factory.addGetterSetter(Transformer,"padding",0,(0,Validators_1$g.getNumberValidator)()),Factory_1$g.Factory.addGetterSetter(Transformer,"node"),Factory_1$g.Factory.addGetterSetter(Transformer,"nodes"),Factory_1$g.Factory.addGetterSetter(Transformer,"boundBoxFunc"),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorDragBoundFunc"),Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStyleFunc"),Factory_1$g.Factory.addGetterSetter(Transformer,"shouldOverdrawWholeArea",!1),Factory_1$g.Factory.addGetterSetter(Transformer,"useSingleNodeRotation",!0),Factory_1$g.Factory.backCompat(Transformer,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Wedge$1={};Object.defineProperty(Wedge$1,"__esModule",{value:!0}),Wedge$1.Wedge=void 0;const Factory_1$f=Factory,Shape_1=Shape,Global_1=Global,Validators_1$f=Validators,Global_2=Global;class Wedge extends Shape_1.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Global_1.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Wedge$1.Wedge=Wedge,Wedge.prototype.className="Wedge",Wedge.prototype._centroid=!0,Wedge.prototype._attrsAffectingSize=["radius"],(0,Global_2._registerNode)(Wedge),Factory_1$f.Factory.addGetterSetter(Wedge,"radius",0,(0,Validators_1$f.getNumberValidator)()),Factory_1$f.Factory.addGetterSetter(Wedge,"angle",0,(0,Validators_1$f.getNumberValidator)()),Factory_1$f.Factory.addGetterSetter(Wedge,"clockwise",!1),Factory_1$f.Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Blur$1={};Object.defineProperty(Blur$1,"__esModule",{value:!0}),Blur$1.Blur=void 0;const Factory_1$e=Factory,Node_1$e=Node$2,Validators_1$e=Validators;function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(e,t){var n,i,o,r,a,s,l,c,u,d,h,p,f,g,m,_,v,b,T,A,y,E,S,C,w=e.data,x=e.width,M=e.height,R=t+t+1,I=x-1,D=M-1,k=t+1,L=k*(k+1)/2,O=new BlurStack,P=null,N=O,$=null,B=null,F=mul_table[t],U=shg_table[t];for(o=1;o<R;o++)N=N.next=new BlurStack,o===k&&(P=N);for(N.next=O,l=s=0,i=0;i<M;i++){for(_=v=b=T=c=u=d=h=0,p=k*(A=w[s]),f=k*(y=w[s+1]),g=k*(E=w[s+2]),m=k*(S=w[s+3]),c+=L*A,u+=L*y,d+=L*E,h+=L*S,N=O,o=0;o<k;o++)N.r=A,N.g=y,N.b=E,N.a=S,N=N.next;for(o=1;o<k;o++)r=s+((I<o?I:o)<<2),c+=(N.r=A=w[r])*(C=k-o),u+=(N.g=y=w[r+1])*C,d+=(N.b=E=w[r+2])*C,h+=(N.a=S=w[r+3])*C,_+=A,v+=y,b+=E,T+=S,N=N.next;for($=O,B=P,n=0;n<x;n++)w[s+3]=S=h*F>>U,0!==S?(S=255/S,w[s]=(c*F>>U)*S,w[s+1]=(u*F>>U)*S,w[s+2]=(d*F>>U)*S):w[s]=w[s+1]=w[s+2]=0,c-=p,u-=f,d-=g,h-=m,p-=$.r,f-=$.g,g-=$.b,m-=$.a,r=l+((r=n+t+1)<I?r:I)<<2,c+=_+=$.r=w[r],u+=v+=$.g=w[r+1],d+=b+=$.b=w[r+2],h+=T+=$.a=w[r+3],$=$.next,p+=A=B.r,f+=y=B.g,g+=E=B.b,m+=S=B.a,_-=A,v-=y,b-=E,T-=S,B=B.next,s+=4;l+=x}for(n=0;n<x;n++){for(v=b=T=_=u=d=h=c=0,p=k*(A=w[s=n<<2]),f=k*(y=w[s+1]),g=k*(E=w[s+2]),m=k*(S=w[s+3]),c+=L*A,u+=L*y,d+=L*E,h+=L*S,N=O,o=0;o<k;o++)N.r=A,N.g=y,N.b=E,N.a=S,N=N.next;for(a=x,o=1;o<=t;o++)s=a+n<<2,c+=(N.r=A=w[s])*(C=k-o),u+=(N.g=y=w[s+1])*C,d+=(N.b=E=w[s+2])*C,h+=(N.a=S=w[s+3])*C,_+=A,v+=y,b+=E,T+=S,N=N.next,o<D&&(a+=x);for(s=n,$=O,B=P,i=0;i<M;i++)w[(r=s<<2)+3]=S=h*F>>U,S>0?(S=255/S,w[r]=(c*F>>U)*S,w[r+1]=(u*F>>U)*S,w[r+2]=(d*F>>U)*S):w[r]=w[r+1]=w[r+2]=0,c-=p,u-=f,d-=g,h-=m,p-=$.r,f-=$.g,g-=$.b,m-=$.a,r=n+((r=i+k)<D?r:D)*x<<2,c+=_+=$.r=w[r],u+=v+=$.g=w[r+1],d+=b+=$.b=w[r+2],h+=T+=$.a=w[r+3],$=$.next,p+=A=B.r,f+=y=B.g,g+=E=B.b,m+=S=B.a,_-=A,v-=y,b-=E,T-=S,B=B.next,s+=x}}const Blur=function(e){var t=Math.round(this.blurRadius());t>0&&filterGaussBlurRGBA(e,t)};Blur$1.Blur=Blur,Factory_1$e.Factory.addGetterSetter(Node_1$e.Node,"blurRadius",0,(0,Validators_1$e.getNumberValidator)(),Factory_1$e.Factory.afterSetFilter);var Brighten$1={};Object.defineProperty(Brighten$1,"__esModule",{value:!0}),Brighten$1.Brighten=void 0;const Factory_1$d=Factory,Node_1$d=Node$2,Validators_1$d=Validators,Brighten=function(e){var t,n=255*this.brightness(),i=e.data,o=i.length;for(t=0;t<o;t+=4)i[t]+=n,i[t+1]+=n,i[t+2]+=n};Brighten$1.Brighten=Brighten,Factory_1$d.Factory.addGetterSetter(Node_1$d.Node,"brightness",0,(0,Validators_1$d.getNumberValidator)(),Factory_1$d.Factory.afterSetFilter);var Contrast$1={};Object.defineProperty(Contrast$1,"__esModule",{value:!0}),Contrast$1.Contrast=void 0;const Factory_1$c=Factory,Node_1$c=Node$2,Validators_1$c=Validators,Contrast=function(e){var t,n=Math.pow((this.contrast()+100)/100,2),i=e.data,o=i.length,r=150,a=150,s=150;for(t=0;t<o;t+=4)r=i[t],a=i[t+1],s=i[t+2],r/=255,r-=.5,r*=n,r+=.5,a/=255,a-=.5,a*=n,a+=.5,s/=255,s-=.5,s*=n,s+=.5,r=(r*=255)<0?0:r>255?255:r,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,i[t]=r,i[t+1]=a,i[t+2]=s};Contrast$1.Contrast=Contrast,Factory_1$c.Factory.addGetterSetter(Node_1$c.Node,"contrast",0,(0,Validators_1$c.getNumberValidator)(),Factory_1$c.Factory.afterSetFilter);var Emboss$1={};Object.defineProperty(Emboss$1,"__esModule",{value:!0}),Emboss$1.Emboss=void 0;const Factory_1$b=Factory,Node_1$b=Node$2,Util_1$2=Util,Validators_1$b=Validators,Emboss=function(e){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),o=this.embossBlend(),r=0,a=0,s=e.data,l=e.width,c=e.height,u=4*l,d=c;switch(i){case"top-left":r=-1,a=-1;break;case"top":r=-1,a=0;break;case"top-right":r=-1,a=1;break;case"right":r=0,a=1;break;case"bottom-right":r=1,a=1;break;case"bottom":r=1,a=0;break;case"bottom-left":r=1,a=-1;break;case"left":r=0,a=-1;break;default:Util_1$2.Util.error("Unknown emboss direction: "+i)}do{var h=(d-1)*u,p=r;d+p<1&&(p=0),d+p>c&&(p=0);var f=(d-1+p)*l*4,g=l;do{var m=h+4*(g-1),_=a;g+_<1&&(_=0),g+_>l&&(_=0);var v=f+4*(g-1+_),b=s[m]-s[v],T=s[m+1]-s[v+1],A=s[m+2]-s[v+2],y=b,E=y>0?y:-y;if((T>0?T:-T)>E&&(y=T),(A>0?A:-A)>E&&(y=A),y*=t,o){var S=s[m]+y,C=s[m+1]+y,w=s[m+2]+y;s[m]=S>255?255:S<0?0:S,s[m+1]=C>255?255:C<0?0:C,s[m+2]=w>255?255:w<0?0:w}else{var x=n-y;x<0?x=0:x>255&&(x=255),s[m]=s[m+1]=s[m+2]=x}}while(--g)}while(--d)};Emboss$1.Emboss=Emboss,Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossStrength",.5,(0,Validators_1$b.getNumberValidator)(),Factory_1$b.Factory.afterSetFilter),Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossWhiteLevel",.5,(0,Validators_1$b.getNumberValidator)(),Factory_1$b.Factory.afterSetFilter),Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossDirection","top-left",null,Factory_1$b.Factory.afterSetFilter),Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossBlend",!1,null,Factory_1$b.Factory.afterSetFilter);var Enhance$1={};Object.defineProperty(Enhance$1,"__esModule",{value:!0}),Enhance$1.Enhance=void 0;const Factory_1$a=Factory,Node_1$a=Node$2,Validators_1$a=Validators;function remap(e,t,n,i,o){var r=n-t,a=o-i;return 0===r?i+a/2:0===a?i:a*((e-t)/r)+i}const Enhance=function(e){var t,n,i,o,r=e.data,a=r.length,s=r[0],l=s,c=r[1],u=c,d=r[2],h=d,p=this.enhance();if(0!==p){for(o=0;o<a;o+=4)(t=r[o+0])<s?s=t:t>l&&(l=t),(n=r[o+1])<c?c=n:n>u&&(u=n),(i=r[o+2])<d?d=i:i>h&&(h=i);var f,g,m,_,v,b,T,A,y;for(l===s&&(l=255,s=0),u===c&&(u=255,c=0),h===d&&(h=255,d=0),p>0?(g=l+p*(255-l),m=s-p*(s-0),v=u+p*(255-u),b=c-p*(c-0),A=h+p*(255-h),y=d-p*(d-0)):(g=l+p*(l-(f=.5*(l+s))),m=s+p*(s-f),v=u+p*(u-(_=.5*(u+c))),b=c+p*(c-_),A=h+p*(h-(T=.5*(h+d))),y=d+p*(d-T)),o=0;o<a;o+=4)r[o+0]=remap(r[o+0],s,l,m,g),r[o+1]=remap(r[o+1],c,u,b,v),r[o+2]=remap(r[o+2],d,h,y,A)}};Enhance$1.Enhance=Enhance,Factory_1$a.Factory.addGetterSetter(Node_1$a.Node,"enhance",0,(0,Validators_1$a.getNumberValidator)(),Factory_1$a.Factory.afterSetFilter);var Grayscale$1={};Object.defineProperty(Grayscale$1,"__esModule",{value:!0}),Grayscale$1.Grayscale=void 0;const Grayscale=function(e){var t,n,i=e.data,o=i.length;for(t=0;t<o;t+=4)n=.34*i[t]+.5*i[t+1]+.16*i[t+2],i[t]=n,i[t+1]=n,i[t+2]=n};Grayscale$1.Grayscale=Grayscale;var HSL$1={};Object.defineProperty(HSL$1,"__esModule",{value:!0}),HSL$1.HSL=void 0;const Factory_1$9=Factory,Node_1$9=Node$2,Validators_1$9=Validators;Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"hue",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter),Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"saturation",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter),Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"luminance",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter);const HSL=function(e){var t,n,i,o,r,a=e.data,s=a.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),d=1*l*Math.cos(c*Math.PI/180),h=1*l*Math.sin(c*Math.PI/180),p=.299+.701*d+.167*h,f=.587-.587*d+.33*h,g=.114-.114*d-.497*h,m=.299-.299*d-.328*h,_=.587+.413*d+.035*h,v=.114-.114*d+.293*h,b=.299-.3*d+1.25*h,T=.587-.586*d-1.05*h,A=.114+.886*d-.2*h;for(t=0;t<s;t+=4)n=a[t+0],i=a[t+1],o=a[t+2],r=a[t+3],a[t+0]=p*n+f*i+g*o+u,a[t+1]=m*n+_*i+v*o+u,a[t+2]=b*n+T*i+A*o+u,a[t+3]=r};HSL$1.HSL=HSL;var HSV$1={};Object.defineProperty(HSV$1,"__esModule",{value:!0}),HSV$1.HSV=void 0;const Factory_1$8=Factory,Node_1$8=Node$2,Validators_1$8=Validators,HSV=function(e){var t,n,i,o,r,a=e.data,s=a.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=l*c*Math.cos(u*Math.PI/180),h=l*c*Math.sin(u*Math.PI/180),p=.299*l+.701*d+.167*h,f=.587*l-.587*d+.33*h,g=.114*l-.114*d-.497*h,m=.299*l-.299*d-.328*h,_=.587*l+.413*d+.035*h,v=.114*l-.114*d+.293*h,b=.299*l-.3*d+1.25*h,T=.587*l-.586*d-1.05*h,A=.114*l+.886*d-.2*h;for(t=0;t<s;t+=4)n=a[t+0],i=a[t+1],o=a[t+2],r=a[t+3],a[t+0]=p*n+f*i+g*o,a[t+1]=m*n+_*i+v*o,a[t+2]=b*n+T*i+A*o,a[t+3]=r};HSV$1.HSV=HSV,Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"hue",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter),Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"saturation",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter),Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"value",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter);var Invert$1={};Object.defineProperty(Invert$1,"__esModule",{value:!0}),Invert$1.Invert=void 0;const Invert=function(e){var t,n=e.data,i=n.length;for(t=0;t<i;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]};Invert$1.Invert=Invert;var Kaleidoscope$1={};Object.defineProperty(Kaleidoscope$1,"__esModule",{value:!0}),Kaleidoscope$1.Kaleidoscope=void 0;const Factory_1$7=Factory,Node_1$7=Node$2,Util_1$1=Util,Validators_1$7=Validators;var ToPolar=function(e,t,n){var i,o,r,a,s=e.data,l=t.data,c=e.width,u=e.height,d=n.polarCenterX||c/2,h=n.polarCenterY||u/2,p=0,f=0,g=0,m=0,_=Math.sqrt(d*d+h*h);o=c-d,r=u-h,_=(a=Math.sqrt(o*o+r*r))>_?a:_;var v,b,T,A,y=u,E=c,S=360/E*Math.PI/180;for(b=0;b<E;b+=1)for(T=Math.sin(b*S),A=Math.cos(b*S),v=0;v<y;v+=1)o=Math.floor(d+_*v/y*A),p=s[(i=4*((r=Math.floor(h+_*v/y*T))*c+o))+0],f=s[i+1],g=s[i+2],m=s[i+3],l[(i=4*(b+v*c))+0]=p,l[i+1]=f,l[i+2]=g,l[i+3]=m},FromPolar=function(e,t,n){var i,o,r,a,s,l,c=e.data,u=t.data,d=e.width,h=e.height,p=n.polarCenterX||d/2,f=n.polarCenterY||h/2,g=0,m=0,_=0,v=0,b=Math.sqrt(p*p+f*f);o=d-p,r=h-f,b=(l=Math.sqrt(o*o+r*r))>b?l:b;var T,A,y,E=h,S=d;for(o=0;o<d;o+=1)for(r=0;r<h;r+=1)a=o-p,s=r-f,T=Math.sqrt(a*a+s*s)*E/b,A=(A=(180*Math.atan2(s,a)/Math.PI+360+0)%360)*S/360,y=Math.floor(A),g=c[(i=4*(Math.floor(T)*d+y))+0],m=c[i+1],_=c[i+2],v=c[i+3],u[(i=4*(r*d+o))+0]=g,u[i+1]=m,u[i+2]=_,u[i+3]=v};const Kaleidoscope=function(e){var t,n,i,o,r,a,s,l,c,u=e.width,d=e.height,h=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),f=Math.floor(u*(p%360)/360);if(!(h<1)){var g=Util_1$1.Util.createCanvasElement();g.width=u,g.height=d;var m=g.getContext("2d").getImageData(0,0,u,d);Util_1$1.Util.releaseCanvas(g),ToPolar(e,m,{polarCenterX:u/2,polarCenterY:d/2});for(var _=u/Math.pow(2,h);_<=8;)_*=2,h-=1;var v=_=Math.ceil(_),b=0,T=v,A=1;for(f+_>u&&(b=v,T=0,A=-1),n=0;n<d;n+=1)for(t=b;t!==T;t+=A)l=4*(u*n+Math.round(t+f)%u),o=m.data[l+0],r=m.data[l+1],a=m.data[l+2],s=m.data[l+3],c=4*(u*n+t),m.data[c+0]=o,m.data[c+1]=r,m.data[c+2]=a,m.data[c+3]=s;for(n=0;n<d;n+=1)for(v=Math.floor(_),i=0;i<h;i+=1){for(t=0;t<v+1;t+=1)l=4*(u*n+t),o=m.data[l+0],r=m.data[l+1],a=m.data[l+2],s=m.data[l+3],c=4*(u*n+2*v-t-1),m.data[c+0]=o,m.data[c+1]=r,m.data[c+2]=a,m.data[c+3]=s;v*=2}FromPolar(m,e,{})}};Kaleidoscope$1.Kaleidoscope=Kaleidoscope,Factory_1$7.Factory.addGetterSetter(Node_1$7.Node,"kaleidoscopePower",2,(0,Validators_1$7.getNumberValidator)(),Factory_1$7.Factory.afterSetFilter),Factory_1$7.Factory.addGetterSetter(Node_1$7.Node,"kaleidoscopeAngle",0,(0,Validators_1$7.getNumberValidator)(),Factory_1$7.Factory.afterSetFilter);var Mask$1={};Object.defineProperty(Mask$1,"__esModule",{value:!0}),Mask$1.Mask=void 0;const Factory_1$6=Factory,Node_1$6=Node$2,Validators_1$6=Validators;function pixelAt(e,t,n){var i=4*(n*e.width+t),o=[];return o.push(e.data[i++],e.data[i++],e.data[i++],e.data[i++]),o}function rgbDistance(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function rgbMean(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function backgroundMask(e,t){var n=pixelAt(e,0,0),i=pixelAt(e,e.width-1,0),o=pixelAt(e,0,e.height-1),r=pixelAt(e,e.width-1,e.height-1),a=t||10;if(rgbDistance(n,i)<a&&rgbDistance(i,r)<a&&rgbDistance(r,o)<a&&rgbDistance(o,n)<a){for(var s=rgbMean([i,n,r,o]),l=[],c=0;c<e.width*e.height;c++){var u=rgbDistance(s,[e.data[4*c],e.data[4*c+1],e.data[4*c+2]]);l[c]=u<a?0:255}return l}}function applyMask(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function erodeMask(e,t,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<o;d++)for(var h=0;h<o;h++){var p=s+d-r,f=l+h-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[d*o+h];u+=e[p*t+f]*g}}a[c]=2040===u?255:0}return a}function dilateMask(e,t,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<o;d++)for(var h=0;h<o;h++){var p=s+d-r,f=l+h-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[d*o+h];u+=e[p*t+f]*g}}a[c]=u>=1020?255:0}return a}function smoothEdgeMask(e,t,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<o;d++)for(var h=0;h<o;h++){var p=s+d-r,f=l+h-r;if(p>=0&&p<n&&f>=0&&f<t){var g=i[d*o+h];u+=e[p*t+f]*g}}a[c]=u}return a}const Mask=function(e){var t=backgroundMask(e,this.threshold());return t&&applyMask(e,t=smoothEdgeMask(t=dilateMask(t=erodeMask(t,e.width,e.height),e.width,e.height),e.width,e.height)),e};Mask$1.Mask=Mask,Factory_1$6.Factory.addGetterSetter(Node_1$6.Node,"threshold",0,(0,Validators_1$6.getNumberValidator)(),Factory_1$6.Factory.afterSetFilter);var Noise$1={};Object.defineProperty(Noise$1,"__esModule",{value:!0}),Noise$1.Noise=void 0;const Factory_1$5=Factory,Node_1$5=Node$2,Validators_1$5=Validators,Noise=function(e){var t,n=255*this.noise(),i=e.data,o=i.length,r=n/2;for(t=0;t<o;t+=4)i[t+0]+=r-2*r*Math.random(),i[t+1]+=r-2*r*Math.random(),i[t+2]+=r-2*r*Math.random()};Noise$1.Noise=Noise,Factory_1$5.Factory.addGetterSetter(Node_1$5.Node,"noise",.2,(0,Validators_1$5.getNumberValidator)(),Factory_1$5.Factory.afterSetFilter);var Pixelate$1={};Object.defineProperty(Pixelate$1,"__esModule",{value:!0}),Pixelate$1.Pixelate=void 0;const Factory_1$4=Factory,Util_1=Util,Node_1$4=Node$2,Validators_1$4=Validators,Pixelate=function(e){var t,n,i,o,r,a,s,l,c,u,d,h,p,f,g=Math.ceil(this.pixelSize()),m=e.width,_=e.height,v=Math.ceil(m/g),b=Math.ceil(_/g),T=e.data;if(g<=0)Util_1.Util.error("pixelSize value can not be <= 0");else for(h=0;h<v;h+=1)for(p=0;p<b;p+=1){for(o=0,r=0,a=0,s=0,c=(l=h*g)+g,d=(u=p*g)+g,f=0,t=l;t<c;t+=1)if(!(t>=m))for(n=u;n<d;n+=1)n>=_||(o+=T[(i=4*(m*n+t))+0],r+=T[i+1],a+=T[i+2],s+=T[i+3],f+=1);for(o/=f,r/=f,a/=f,s/=f,t=l;t<c;t+=1)if(!(t>=m))for(n=u;n<d;n+=1)n>=_||(T[(i=4*(m*n+t))+0]=o,T[i+1]=r,T[i+2]=a,T[i+3]=s)}};Pixelate$1.Pixelate=Pixelate,Factory_1$4.Factory.addGetterSetter(Node_1$4.Node,"pixelSize",8,(0,Validators_1$4.getNumberValidator)(),Factory_1$4.Factory.afterSetFilter);var Posterize$1={};Object.defineProperty(Posterize$1,"__esModule",{value:!0}),Posterize$1.Posterize=void 0;const Factory_1$3=Factory,Node_1$3=Node$2,Validators_1$3=Validators,Posterize=function(e){var t,n=Math.round(254*this.levels())+1,i=e.data,o=i.length,r=255/n;for(t=0;t<o;t+=1)i[t]=Math.floor(i[t]/r)*r};Posterize$1.Posterize=Posterize,Factory_1$3.Factory.addGetterSetter(Node_1$3.Node,"levels",.5,(0,Validators_1$3.getNumberValidator)(),Factory_1$3.Factory.afterSetFilter);var RGB$1={};Object.defineProperty(RGB$1,"__esModule",{value:!0}),RGB$1.RGB=void 0;const Factory_1$2=Factory,Node_1$2=Node$2,Validators_1$2=Validators,RGB=function(e){var t,n,i=e.data,o=i.length,r=this.red(),a=this.green(),s=this.blue();for(t=0;t<o;t+=4)n=(.34*i[t]+.5*i[t+1]+.16*i[t+2])/255,i[t]=n*r,i[t+1]=n*a,i[t+2]=n*s,i[t+3]=i[t+3]};RGB$1.RGB=RGB,Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"blue",0,Validators_1$2.RGBComponent,Factory_1$2.Factory.afterSetFilter);var RGBA$1={};Object.defineProperty(RGBA$1,"__esModule",{value:!0}),RGBA$1.RGBA=void 0;const Factory_1$1=Factory,Node_1$1=Node$2,Validators_1$1=Validators,RGBA=function(e){var t,n,i=e.data,o=i.length,r=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(t=0;t<o;t+=4)n=1-l,i[t]=r*l+i[t]*n,i[t+1]=a*l+i[t+1]*n,i[t+2]=s*l+i[t+2]*n};RGBA$1.RGBA=RGBA,Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"blue",0,Validators_1$1.RGBComponent,Factory_1$1.Factory.afterSetFilter),Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"alpha",1,(function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}));var Sepia$1={};Object.defineProperty(Sepia$1,"__esModule",{value:!0}),Sepia$1.Sepia=void 0;const Sepia=function(e){var t,n,i,o,r=e.data,a=r.length;for(t=0;t<a;t+=4)n=r[t+0],i=r[t+1],o=r[t+2],r[t+0]=Math.min(255,.393*n+.769*i+.189*o),r[t+1]=Math.min(255,.349*n+.686*i+.168*o),r[t+2]=Math.min(255,.272*n+.534*i+.131*o)};Sepia$1.Sepia=Sepia;var Solarize$1={};Object.defineProperty(Solarize$1,"__esModule",{value:!0}),Solarize$1.Solarize=void 0;const Solarize=function(e){var t=e.data,n=e.width,i=4*n,o=e.height;do{var r=(o-1)*i,a=n;do{var s=r+4*(a-1),l=t[s],c=t[s+1],u=t[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),t[s]=l,t[s+1]=c,t[s+2]=u}while(--a)}while(--o)};Solarize$1.Solarize=Solarize;var Threshold$1={};Object.defineProperty(Threshold$1,"__esModule",{value:!0}),Threshold$1.Threshold=void 0;const Factory_1=Factory,Node_1=Node$2,Validators_1=Validators,Threshold=function(e){var t,n=255*this.threshold(),i=e.data,o=i.length;for(t=0;t<o;t+=1)i[t]=i[t]<n?0:255};Threshold$1.Threshold=Threshold,Factory_1.Factory.addGetterSetter(Node_1.Node,"threshold",.5,(0,Validators_1.getNumberValidator)(),Factory_1.Factory.afterSetFilter),Object.defineProperty(_FullInternals,"__esModule",{value:!0}),_FullInternals.Konva=void 0;const _CoreInternals_1=_CoreInternals,Arc_1=Arc$1,Arrow_1=Arrow$1,Circle_1=Circle$1,Ellipse_1=Ellipse$1,Image_1=Image$2,Label_1=Label$1,Line_1=Line$1,Path_1=Path$1,Rect_1=Rect$1,RegularPolygon_1=RegularPolygon$1,Ring_1=Ring$1,Sprite_1=Sprite$1,Star_1=Star$1,Text_1=Text$1,TextPath_1=TextPath$1,Transformer_1=Transformer$1,Wedge_1=Wedge$1,Blur_1=Blur$1,Brighten_1=Brighten$1,Contrast_1=Contrast$1,Emboss_1=Emboss$1,Enhance_1=Enhance$1,Grayscale_1=Grayscale$1,HSL_1=HSL$1,HSV_1=HSV$1,Invert_1=Invert$1,Kaleidoscope_1=Kaleidoscope$1,Mask_1=Mask$1,Noise_1=Noise$1,Pixelate_1=Pixelate$1,Posterize_1=Posterize$1,RGB_1=RGB$1,RGBA_1=RGBA$1,Sepia_1=Sepia$1,Solarize_1=Solarize$1,Threshold_1=Threshold$1;_FullInternals.Konva=_CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva,{Arc:Arc_1.Arc,Arrow:Arrow_1.Arrow,Circle:Circle_1.Circle,Ellipse:Ellipse_1.Ellipse,Image:Image_1.Image,Label:Label_1.Label,Tag:Label_1.Tag,Line:Line_1.Line,Path:Path_1.Path,Rect:Rect_1.Rect,RegularPolygon:RegularPolygon_1.RegularPolygon,Ring:Ring_1.Ring,Sprite:Sprite_1.Sprite,Star:Star_1.Star,Text:Text_1.Text,TextPath:TextPath_1.TextPath,Transformer:Transformer_1.Transformer,Wedge:Wedge_1.Wedge,Filters:{Blur:Blur_1.Blur,Brighten:Brighten_1.Brighten,Contrast:Contrast_1.Contrast,Emboss:Emboss_1.Emboss,Enhance:Enhance_1.Enhance,Grayscale:Grayscale_1.Grayscale,HSL:HSL_1.HSL,HSV:HSV_1.HSV,Invert:Invert_1.Invert,Kaleidoscope:Kaleidoscope_1.Kaleidoscope,Mask:Mask_1.Mask,Noise:Noise_1.Noise,Pixelate:Pixelate_1.Pixelate,Posterize:Posterize_1.Posterize,RGB:RGB_1.RGB,RGBA:RGBA_1.RGBA,Sepia:Sepia_1.Sepia,Solarize:Solarize_1.Solarize,Threshold:Threshold_1.Threshold}});var lib=lib$1.exports;Object.defineProperty(lib,"__esModule",{value:!0});const _FullInternals_1=_FullInternals;lib$1.exports=_FullInternals_1.Konva;var libExports=lib$1.exports;const Konva=getDefaultExportFromCjs(libExports);function genLayerBg(e){const t=new Konva.Layer({name:"layerBg"});let n=null;const i=ref({width:0,height:0,scale:1});let o,r=null,a=null,s=!1,l=!1;function c(t){var n,i,o,r;if(!t)return null;const a=null===(n=e.value)||void 0===n?void 0:n.getRelativePointerPosition(),s=null===(i=e.value)||void 0===i?void 0:i.position(),l=null===(o=t.evt)||void 0===o||null===(o=o.changedTouches)||void 0===o?void 0:o[0],c=(null===(r=e.value)||void 0===r?void 0:r.scaleX())||1;let u={x:0,y:0};if(a)u=a;else{if(!s||!l)return null;u={x:(l.clientX-s.x)/c,y:(l.clientY-s.y)/c}}return u}function u(e){r||(r=function(e){const n=new Konva.Group({x:Math.floor(100*e.x)/100,y:Math.floor(100*e.y)/100}),i=new Konva.Circle({radius:6,fill:"#7cfbe8",listening:!1}),o=new Konva.Circle({radius:6,fill:"#7cfbe8",opacity:.4,hitStrokeWidth:23}),r=new Konva.Circle({radius:6,fill:"#7cfbe8",opacity:.4,hitStrokeWidth:23,listening:!1}),s=new Konva.Line({points:[8,-4,12,0,8,4],stroke:"#7cfbe8",strokeWidth:2,lineCap:"round",lineJoin:"round",listening:!1,visible:!0});return n.add(s),n.add(i),n.add(o),n.add(r),i.zIndex(2),o.zIndex(1),null==t||t.add(n),n.rotate(0),n.zIndex(2),o.setAttr("dir",void 0),a=new Konva.Animation((e=>{null==o||o.radius(3*Math.cos(2*((null==e?void 0:e.time)||0)*Math.PI/2e3)+3+6),null==r||r.radius(3*Math.cos(2*((null==e?void 0:e.time)||0)*Math.PI/2e3)+3+10),t.batchDraw()}),t),a.start(),o}(e||{x:0,y:0}))}let d=0;return{layerBg:t,mapImgSize:i,drawBg:function(e){const{width:o,height:r,scale:a}=calculateScaledDimensions(e.width,e.height);return i.value.width=o,i.value.height=r,i.value.scale=a,n?(n.image(e),n.width(o),n.height(r)):(n=new Konva.Image({image:e,x:0,y:0,width:o,height:r,listening:!1}),null==t||t.add(n),n.zIndex(0)),null==t||t.batchDraw(),{mapWidth:o,mapHeight:r}},genRobotPoint:u,removeRobotPoint:function(){var e;r&&(r.getParent().destroy(),r=null,null===(e=a)||void 0===e||e.stop(),a=null)},updateRobotPoint:function(e,t){if(!r)return;const n=r.getParent();null==n||n.position(e),null==n||n.rotation(t)},bindLayerBgEvent:()=>{l||(t.on("touchstart",(function(n){n.cancelBubble=!0;const i=c(n);i&&(d&&window.clearTimeout(d),d=window.setTimeout((()=>{var n,a,l;if(null!==(n=e.value)&&void 0!==n&&n.isDragging())return;if(null===(a=e.value)||void 0===a||a.draggable(!1),null===(l=e.value)||void 0===l||l.stopDrag(),r){r.getParent().position(i);r.getParent().getChildren((e=>"Line"===e.getClassName()))[0].visible(!1)}else u(i);const c=function(e,n){const i=new Konva.Arrow({points:[e.x,e.y,...n?[null==n?void 0:n.x,null==n?void 0:n.y]:[]],pointerLength:10,pointerWidth:10,fill:"#7cfbe8",stroke:"#7cfbe8",strokeWidth:2});return null==t||t.add(i),i.zIndex(1),i}(i,{x:i.x+50,y:i.y});o&&o.destroy(),o=c,s=!0}),500))})),t.on("touchmove",(function(e){var t,n;if(e.cancelBubble=!0,!s)return;if(!o)return;const i=c(e);if(!i)return;const r=null===(t=o)||void 0===t?void 0:t.points().slice(0,2);null===(n=o)||void 0===n||n.points([...r||[],i.x,i.y])})),t.on("touchend",(function(t){var n,i;if(t.cancelBubble=!0,null===(n=e.value)||void 0===n||n.draggable(!0),d&&window.clearTimeout(d),!s)return;s=!1,null===(i=o)||void 0===i||i.destroy(),o=void 0;const a=c(t);if(!a)return;const l=r.getParent(),u=calculateAngle$1(l.position(),a);l.getChildren((e=>"Line"===e.getClassName()))[0].visible(!0),l.rotation(u),r.setAttr("dir",u)})),l=!0)},removeLayerBgEvent:()=>{t.off("touchstart"),t.off("touchmove"),t.off("touchend"),l=!1},getRobotDirPoints:()=>{if(!r)return console.error("未找到目标点位置"),null;const e=r.getAttr("dir")||0;return{robotPoint:r.getParent().position(),deg:e}},handleResizeBg:function(){if(n){const{width:e,height:t}=calculateScaledDimensions(n.width(),n.height());n.width(e),n.height(t),i.value.width=e,i.value.height=t}},clearLayerBg:()=>{t.destroyChildren(),n=null,r=null}}}function calculateScaledDimensions(e,t){const n=document.getElementById("slam_page"),i=(null==n?void 0:n.offsetWidth)||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=i/e,r=((null==n?void 0:n.offsetHeight)||window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)/t,a=Math.max(o,r),s=Math.round(e*a),l=Math.round(t*a);return{width:s,height:l,scale:a,screenWidth:i,scaledHeight:l}}function calculateAngle$1(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.atan2(i,n)*(180/Math.PI)}function genLayerMain(e,n,i){const o=new Konva.Layer({name:"layerMain"});let r=0,a=0;const s=[],l=new Map,c=[];let u,d,h=!1,p="edge",f=performance.now(),g=null,m=null,_=null,v=!1;function b(t){var n,i,o,r;if(!t)return null;const a=null===(n=e.value)||void 0===n?void 0:n.getRelativePointerPosition(),s=null===(i=e.value)||void 0===i?void 0:i.position(),l=null===(o=t.evt)||void 0===o||null===(o=o.changedTouches)||void 0===o?void 0:o[0],c=(null===(r=e.value)||void 0===r?void 0:r.scaleX())||1;let u={x:0,y:0};if(a)u=a;else{if(!s||!l)return null;u={x:(l.clientX-s.x)/c,y:(l.clientY-s.y)/c}}return u}const T=e=>{n.value=e},A=e=>{if(g&&g.node._id===e._id)return;C();const n=e.getParent();n.getChildren((e=>"Circle"===e.getClassName())).forEach((e=>{e.fill("red")}));const i=function(e,n){const i=new Konva.Group({x:Math.floor(100*e.x)/100+6+12,y:Math.floor(100*e.y)/100-12}),r=new Konva.Rect({x:0,y:0,width:48,height:24,fill:"rgba(229, 49, 49, 0.22)",stroke:"#E53131",strokeWidth:2,cornerRadius:8}),a=new Konva.Text({x:0,y:0,width:48,height:24,text:t("Slam.del"),fontSize:14,fontFamily:"Calibri",fill:"#BB1D1D",align:"center",verticalAlign:"middle"});a.on("tap",(e=>{e.cancelBubble=!0,S(n)}));const s=new Konva.Line({points:[0,6,-6,12,0,18],fill:"red",stroke:"red",strokeWidth:1,closed:!0,lineCap:"round",lineJoin:"round"});return i.add(r),i.add(a),i.add(s),null==o||o.add(i),i}(n.position(),e);g={node:e,delGroup:i}};let y=0,E=0;const S=e=>{const t=e.getParent(),o=t.id(),r=s.findIndex((t=>t._id===e._id));s.splice(r,1),console.log(s),s.forEach(((e,t)=>{var n;const i=e.getParent();if(!i)return;const o=i.getChildren((e=>"Text"===e.getClassName()));null===(n=o[0])||void 0===n||n.text(`${t+1}`)}));for(const n of l.keys()){if(n.split("&")[0].split("_").includes(o)){const e=l.get(n);l.delete(n),null==e||e.destroy()}}t.destroy(),C(),null==e||e.destroy(),Number(o)===n.value&&T(),i(Number(o))};function C(){if(g){if(g.delGroup&&g.delGroup.destroy(),g.node){const e=g.node.getParent(),t=null==e?void 0:e.getChildren((e=>"Circle"===e.getClassName()));null==t||t.forEach((e=>e.fill("#ffa726")))}g=null}}new Konva.Animation((function(e){s.forEach((t=>t.radius(3*Math.cos(2*((null==e?void 0:e.time)||0)*Math.PI/2e3)+3+6))),o.batchDraw()}),o).start();let w=!1;function x(e,t,n){n.on("touchstart",(t=>{t.cancelBubble=!0,w=!0,e.isDragging()&&e.stopDrag(),e.draggable(!1)})),n.on("touchmove",(i=>{if(i.cancelBubble=!0,!w)return;const r=b(i);if(r){const i=e.position(),a={x:r.x-i.x,y:r.y-i.y};t.points([0,0,a.x,a.y]),n.position(a),o.batchDraw()}})),n.on("touchend",(i=>{if(!w)return;w=!1,e.draggable(!0);const r=b(i);if(r){const i=e.position(),a={x:r.x-i.x,y:r.y-i.y},s=Math.sqrt(Math.pow(a.x-0,2)+Math.pow(a.y-0,2)),l=Math.atan2(a.y-0,a.x-0);if(s>30){const i=30*Math.cos(l),o=30*Math.sin(l);t.points([0,0,i,o]),n.position({x:i,y:o}),e.setAttr("dir",l)}else t.points([0,0,a.x,a.y]),n.position(a);e.setAttr("dir",l),o.batchDraw()}})),n.on("tap",(e=>{e.cancelBubble=!0}))}const M=()=>{o.destroyChildren(),s.splice(0,s.length),l.clear(),u=void 0,m=null,_=null};return{layerMain:o,tCirclePoints:s,tLineEdge:l,bindLayerMainEvent:()=>{v||(o.on("tap",(e=>{e.cancelBubble=!0;const t=b(e);if(!t)return;const i=e.target;if(s.some((e=>e._id===i._id))){var a;if((null===(a=i.getParent())||void 0===a?void 0:a.id())!==n.value&&T(),g){if(g.node._id===i._id)return;C()}y&&window.clearTimeout(y),y=window.setTimeout(T.bind(null,Number(i.getParent().id())),300)}else{if(u)return;if(n.value)return void T();if(g)return void C();!function(e){const t=new Konva.Group({id:(++r).toString(),x:Math.floor(100*e.x)/100,y:Math.floor(100*e.y)/100}),n=new Konva.Circle({radius:6,fill:"#ffa726",listening:!1}),i=new Konva.Circle({radius:6,fill:"#ffa726",opacity:.4,hitStrokeWidth:23}),a=new Konva.Line({points:[8,-4,12,0,8,4],stroke:"#ffa726",strokeWidth:2,lineCap:"round",lineJoin:"round",listening:!1,visible:!1}),l=new Konva.Text({x:0,y:0,text:`${s.length+1}`,fontSize:8,fontFamily:"Calibri",fill:"black",width:12,height:12,align:"center",verticalAlign:"middle",listening:!1,offset:{x:6,y:6}});t.add(a),t.add(n),t.add(i),t.add(l),n.zIndex(2),i.zIndex(1),null==o||o.add(t),t.rotate(0),t.zIndex(2),s.push(i),c.push({type:"point",id:i.id()}),i.setAttr("dir",void 0)}(t)}})),o.on("touchstart",(function(e){e.cancelBubble=!0;const t=e.target;if(!s.some((e=>e._id===t._id)))return;var i;(p="edge",performance.now()-f<300)&&(p="dir",y&&window.clearTimeout(y),(null===(i=t.getParent())||void 0===i?void 0:i.id())!==n.value&&T());f=performance.now(),d=t,g&&g.node._id!==t._id&&C(),E=window.setTimeout((()=>{A(t)}),1e3);const r="edge"===p?function(e){const t=new Konva.Line({points:[e.x,e.y],stroke:"#ffa726",strokeWidth:2,dash:[10,5],opacity:.6});return null==o||o.add(t),t.zIndex(0),t}(d.getParent().position()):function(e,t){const n=new Konva.Arrow({points:[e.x,e.y,...t?[null==t?void 0:t.x,null==t?void 0:t.y]:[]],pointerLength:10,pointerWidth:10,fill:"#ffa726",stroke:"#ffa726",strokeWidth:2});return null==o||o.add(n),n.zIndex(0),n}(d.getParent().position(),{x:d.getParent().position().x+50,y:d.getParent().position().y});u&&u.destroy(),u=r,h=!0})),o.on("touchmove",(function(e){var t,i,o,r;if(_&&_.fire("touchmove",e),e.cancelBubble=!0,!h)return;const a=b(e);if(!a)return;const s=null===(t=u)||void 0===t?void 0:t.points().slice(0,2);null===(i=u)||void 0===i||i.points([...s||[],a.x,a.y]),n.value&&Number(null===(o=e.target.getParent())||void 0===o?void 0:o.id())!=n.value&&(y&&window.clearTimeout(y),T()),e.target._id!==(null===(r=d)||void 0===r?void 0:r._id)&&E&&window.clearTimeout(E)})),o.on("touchend",(function(e){var t,n,i,o,r,f;if(_&&_.fire("touchend",e),e.cancelBubble=!0,E&&window.clearTimeout(E),!h)return;if(h=!1,"dir"===p){var g,m;null===(g=u)||void 0===g||g.destroy(),u=void 0;const t=b(e);if(!t)return;const n=d.getParent(),i=calculateAngle(n.position(),t),o=n.getChildren((e=>"Line"===e.getClassName())),r=n.getChildren((e=>"Text"===e.getClassName()));return o[0].visible(!0),n.rotation(i),null===(m=r[0])||void 0===m||m.rotation(-i),void d.setAttr("dir",i)}const v=e.target;var T;if(!s.some((e=>e._id===v._id))||v._id===(null===(t=d)||void 0===t?void 0:t._id))return null===(T=u)||void 0===T||T.destroy(),void(u=void 0);const A=v,y=d.getParent().position(),S=v.getParent().position(),C=null===(n=u)||void 0===n?void 0:n.points().slice(0,2);null===(i=u)||void 0===i||i.points([...C||[],S.x,S.y]);const w=`${d.getParent().id()}_${null==A?void 0:A.getParent().id()}&${y.x}_${y.y}&${S.x}_${S.y}`,x=`${A.getParent().id()}_${null===(o=d)||void 0===o?void 0:o.getParent().id()}&${S.x}_${S.y}&${y.x}_${y.y}`;var M;if(l.get(w)||l.get(x))return null===(M=u)||void 0===M||M.destroy(),void(u=void 0);null===(r=u)||void 0===r||r.opacity(1),null===(f=u)||void 0===f||f.setAttr("id",(++a).toString()),u&&l.set(w,u),c.push({type:"line",id:w}),u=void 0,d=void 0})),v=!0)},removeLayerMainEvent:()=>{o.off("tap"),o.off("touchstart"),o.off("touchmove"),o.off("touchend"),v=!1},getAllPointNodeData:()=>{const e=s.map((e=>{var t;return{name:Number(null===(t=e.getParent())||void 0===t?void 0:t.getAttr("id")),position:e.getParent().position(),yaw:e.getAttr("dir"),task:""}}));if(m){const t=m.position(),n=m.getChildren((e=>"Circle"===e.getClassName()))[0].position();n.x=n.x+t.x,n.y=n.y+t.y,e.push({name:9001,position:t,yaw:void 0,task:""},{name:9e3,position:n,yaw:void 0,task:""})}return e},getAllEdgeData:()=>{const e=[];for(const n of l.keys()){var t;const i=n.split("&"),o=i[0].split("_"),r=i[1].split("_"),a=i[2].split("_");e.push({name:Number(null===(t=l.get(n))||void 0===t?void 0:t.getAttr("id")),startNodeName:Number(o[0]),endNodeName:Number(o[1]),startNodePosition:{x:Number(r[0]),y:Number(r[1])},endNodePosition:{x:Number(a[0]),y:Number(a[1])}})}if(m){const t=m.position(),n=m.getChildren((e=>"Circle"===e.getClassName()))[0].position();n.x=n.x+t.x,n.y=n.y+t.y,e.push({name:1e3,startNodeName:9e3,endNodeName:9001,startNodePosition:t,endNodePosition:n})}return e},getNodeEdgeJsonData:()=>o.toJSON(),loadNodeEdgeJsonData:(e,t=1,n=1)=>{M();const i=JSON.parse(e),u=i.children;console.log("回显路网数据",i,t,n),u.forEach((e=>{const i=Konva.Node.create(e);if(o.add(i),"Group"===e.className){const{x:o,y:a}=i.position();if(i.position({x:o/t*n,y:a/t*n}),e.attrs.isCharge){var c,d;m=i,i.draggable(!1);null===(c=i.getChildren((e=>e.attrs.isDirCircle))[0])||void 0===c||c.visible(!1);null===(d=i.getChildren((e=>e.attrs.isDirLine))[0])||void 0===d||d.visible(!1)}else{const e=i.getChildren((e=>"Circle"===e.getClassName()&&.4==e.opacity()));e.length>0&&s.push(e[0]);const t=Number(i.getAttr("id")||0);t>r&&(r=t)}}else if("Line"===e.className){const e=i.points(),[o,r,s,c]=e.map((e=>e/t*n));i.points([o,r,s,c]);const d=u.find((e=>"Group"===e.className&&e.attrs.x/t*n==o&&e.attrs.y/t*n==r)),h=u.find((e=>"Group"===e.className&&e.attrs.x/t*n==s&&e.attrs.y/t*n==c)),p=`${d.attrs.id}_${h.attrs.id}&${o}_${r}&${s}_${c}`;l.set(p,i);const f=Number(i.getAttr("id")||0);f>a&&(a=f)}})),s.sort(((e,t)=>Number(e.getParent().id())-Number(t.getParent().id()))),c.length>0&&c.splice(0,c.length)},getCurrentPointNode:()=>{if(!n.value)return null;{const e=s.filter((e=>Number(e.getParent().id())==n.value));if(e.length>0)return e[0]}},genChargePoint:function(e){if(m)m.position(e);else{const t=new Konva.Group(_objectSpread(_objectSpread({},e),{},{draggable:!0,isCharge:!0})),n=new Konva.Line({y:2.5,points:[0,0,-2,0,-6,0,2,-15,2,-5,6,-5,-2,10,-2,0],fill:"#2AC2DC",strokeWidth:5,closed:!0,hitStrokeWidth:5}),i=new Konva.Arc({x:0,y:0,innerRadius:9,outerRadius:12,angle:90,fill:"#44E3E6",rotation:-45,strokeWidth:4,hitStrokeWidth:10}),r=new Konva.Arc({x:0,y:0,innerRadius:9,outerRadius:12,angle:90,fill:"#44E3E6",rotation:135,strokeWidth:4,hitStrokeWidth:10}),a=new Konva.Arc({x:0,y:0,innerRadius:16,outerRadius:19,angle:90,fill:"#44E3E6",rotation:-45,strokeWidth:4,hitStrokeWidth:10}),s=new Konva.Arc({x:0,y:0,innerRadius:16,outerRadius:19,angle:90,fill:"#44E3E6",rotation:135,strokeWidth:4,hitStrokeWidth:10}),l=new Konva.Line({points:[0,0,0,30],stroke:"#44E3E6",strokeWidth:2,dash:[10,5],isDirLine:!0}),u=new Konva.Circle({x:0,y:30,radius:6,fill:"red",hitStrokeWidth:20,isDirCircle:!0});t.add(n),t.add(i),t.add(r),t.add(a),t.add(s),t.add(l),t.add(u),l.zIndex(0),o.add(t),m=t,_=u,c.push({type:"charge"}),x(t,l,u)}},getChargePointPos:function(){if(m){const e=m.position(),t=m.getChildren((e=>"Circle"===e.getClassName()))[0].position();return t.x=t.x+e.x,t.y=t.y+e.y,{chargePointPos:e,readyPointPos:t,readyPointYaw:m.getAttr("dir")}}return null},removeChargePoint:function(){m&&(m.destroy(),m=null)},setChargePointEdit:function(){if(m){var e,t;m.draggable(!0);const n=m.getChildren((e=>e.attrs.isDirCircle));null===(e=n[0])||void 0===e||e.visible(!0);const i=m.getChildren((e=>e.attrs.isDirLine));null===(t=i[0])||void 0===t||t.visible(!0),_=n[0],x(m,i[0],n[0])}},clearLayerMain:M,undo:()=>{if(c.length>0){const e=c.pop();if(!e)return;if("point"===e.type){const t=s[s.length-1];t&&t.id()==e.id&&(s.pop(),t.getParent().destroy())}else if("charge"===e.type)m&&(m.destroy(),m=null,_=null);else if("line"===e.type){const t=l.get(e.id);t&&(t.destroy(),l.delete(e.id))}return C(),e}}}}function calculateAngle(e,t){const n=t.x-e.x,i=t.y-e.y;let o=Math.atan2(i,n)*(180/Math.PI);return o<0&&(o+=360),o}function genLayerNav(e){const t=new Konva.Layer({name:"layerNav"});let n=null,i=!1;return{layerNav:t,bindLayerNavEvent:()=>{i||(t.on("tap",(i=>{i.cancelBubble=!0;const o=function(t){var n,i,o,r;if(!t)return null;const a=null===(n=e.value)||void 0===n?void 0:n.getRelativePointerPosition(),s=null===(i=e.value)||void 0===i?void 0:i.position(),l=null===(o=t.evt)||void 0===o||null===(o=o.changedTouches)||void 0===o?void 0:o[0],c=(null===(r=e.value)||void 0===r?void 0:r.scaleX())||1;let u={x:0,y:0};if(a)u=a;else{if(!s||!l)return null;u={x:(l.clientX-s.x)/c,y:(l.clientY-s.y)/c}}return u}(i);o&&function(e){if(n)n.position(e);else{const i=new Konva.Group(_objectSpread({},e)),o=new Konva.Ring({x:0,y:-15,innerRadius:5,outerRadius:10,fill:"#ffa726",strokeWidth:4}),r=new Konva.RegularPolygon({x:0,y:-5,sides:3,radius:10,fill:"#ffa726",strokeWidth:4,rotation:180});i.add(o),i.add(r),t.add(i),n=i}}(o)})),i=!0)},removeLayerNavEvent:()=>{t.off("tap"),i=!1},getNavPointPosition:function(){return n?n.position():null},removeSingleNavPoint:function(){n&&(n.destroy(),n=null)},clearLayerNav:()=>{t.destroyChildren(),n=null}}}function useKonvaHook(e,t){const n=ref(void 0),i=ref(null),o=ref(0),r=ref(1),a=ref(!1);let s=!0,l=!1,c=0;const u={layerMain:!1,layerBg:!1,layerNav:!1},{layerMain:d,bindLayerMainEvent:h,removeLayerMainEvent:p,getAllPointNodeData:f,getAllEdgeData:g,getNodeEdgeJsonData:m,loadNodeEdgeJsonData:_,genChargePoint:v,getChargePointPos:b,removeChargePoint:T,setChargePointEdit:A,clearLayerMain:y,undo:E}=genLayerMain(n,e,t),{layerBg:S,mapImgSize:C,drawBg:w,genRobotPoint:x,removeRobotPoint:M,updateRobotPoint:R,bindLayerBgEvent:I,removeLayerBgEvent:D,getRobotDirPoints:k,clearLayerBg:L}=genLayerBg(n),{layerNav:O,bindLayerNavEvent:P,removeLayerNavEvent:N,getNavPointPosition:$,removeSingleNavPoint:B,clearLayerNav:F}=genLayerNav(n),U=debounce((()=>{a.value=!1}),300);function G(){const e=document.getElementById("container");return{width:(null==e?void 0:e.offsetWidth)||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:(null==e?void 0:e.offsetHeight)||window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function V(){var e;if(!n.value)return;if(null!==(e=n.value)&&void 0!==e&&e.isDragging())return;if(!s)return;const{width:t,height:i}=G(),o=(t-C.value.width*r.value)/2,a=(i-C.value.height*r.value)/2,l=o>0?0:o,c=a>0?0:a;if(o===n.value.x()&&a===n.value.y())return;s=!1;new Konva.Tween({node:n.value,x:l,y:c,easing:Konva.Easings.EaseIn,duration:.3,onFinish:function(){var e;null!==(e=n.value)&&void 0!==e&&e.isDragging()||(s=!0)}}).play()}return throttle((()=>{var e;null!==(e=n.value)&&void 0!==e&&e.isDragging()||s&&V()}),500,{trailing:!1}),{mapImgSize:C,initKonva:()=>{var e,t,s,u,h;const{width:p,height:f}=G();n.value=new Konva.Stage({container:"container",width:p,height:f,draggable:!0,dragBoundFunc(e){const{width:t,height:n}=G(),i=t-Math.round(r.value*C.value.width),o=n-Math.round(r.value*C.value.height);return{x:e.x>0?0:e.x<i?i:e.x,y:e.y>0?0:e.y<o?o:e.y}}}),n.value.add(S),n.value.add(d),n.value.add(O),null===(e=n.value)||void 0===e||e.on("dragstart",(function(e){l=!0})),null===(t=n.value)||void 0===t||t.on("dragend",(function(e){l=!0,c&&window.clearTimeout(c),c=window.setTimeout((()=>{l=!1}),5e3)})),null===(s=n.value)||void 0===s||s.on("touchstart.event1",(function(e){})),null===(u=n.value)||void 0===u||u.on("touchmove.event1",(e=>{e.evt.preventDefault();const t=e.evt.touches[0],s=e.evt.touches[1];if(t&&s&&n.value){var l,c,u,d,h;n.value.draggable(!1),null!==(l=n.value)&&void 0!==l&&l.isDragging()&&(null===(c=n.value)||void 0===c||c.stopDrag());const e={x:t.clientX,y:t.clientY},p={x:s.clientX,y:s.clientY};if(!i.value)return void(i.value=getCenter(e,p));const f=getCenter(e,p),g=getDistance(e,p);o.value||(o.value=g);const m={x:(f.x-n.value.x())/n.value.scaleX(),y:(f.y-n.value.y())/n.value.scaleX()};let _=n.value.scaleX()*(g/o.value);_=_>2.5?2.5:_<1?1:_;const{width:v,height:b}=G(),T=C.value.width*_,A=C.value.height*_;if(T<v||A<b)return;null===(u=n.value)||void 0===u||u.scaleX(_),null===(d=n.value)||void 0===d||d.scaleY(_);const y=f.x-i.value.x,E=f.y-i.value.y,S={x:f.x-m.x*_+y,y:f.y-m.y*_+E};let w=0,x=S.y>0?0:S.y;w=S.x>0?0:S.x+T<v?v-T:S.x,x=S.y>0?0:S.y+A<b?b-A:S.y,null===(h=n.value)||void 0===h||h.position({x:w,y:x}),o.value=g,i.value=f,r.value=_,a.value||(a.value=!0)}})),null===(h=n.value)||void 0===h||h.on("touchend.event1",(function(e){var t;o.value=0,i.value=null,null===(t=n.value)||void 0===t||t.draggable(!0),U()})),n.value.on("wheel",(function(e){var t,o,a;if(!n.value)return;let s=1.04;const l=e.evt,{wheelDelta:c,clientX:u,clientY:d}=l;c<0?s=1/s:s*=1;let h=n.value.scaleX()*s;if(h=h>2.5?2.5:h<1?1:h,!i.value)return void(i.value={x:u,y:d});const p={x:u,y:d},f=(p.x-n.value.x())/n.value.scaleX(),g=(p.y-n.value.y())/n.value.scaleX(),{width:m,height:_}=G(),v=C.value.width*h,b=C.value.height*h;if(v<m||b<_)return;null===(t=n.value)||void 0===t||t.scaleX(h),null===(o=n.value)||void 0===o||o.scaleY(h);const T=p.x-i.value.x,A=p.y-i.value.y,y={x:p.x-f*h+T,y:p.y-g*h+A};let E=0,S=y.y>0?0:y.y;E=y.x>0?0:y.x+v<m?m-v:y.x,S=y.y>0?0:y.y+b<_?_-b:y.y,null===(a=n.value)||void 0===a||a.position({x:E,y:S}),i.value=p,r.value=h}))},drawMapBg:function(e,t){w(e),t&&"loadMap"===t&&V()},bindStageEvent:e=>{if(console.logBlue("绑定事件",e),u[e])return;const t="layerMain"===e?d:"layerBg"===e?S:O,i="layerMain"===e?h:"layerBg"===e?I:P;var o,r,s,l;["layerMain","layerBg"].includes(e)&&(null===(o=n.value)||void 0===o||o.on(`touchstart.${e}`,(function(n){const i=n.evt.touches[0],o=n.evt.touches[1];i&&o||"layerBg"!==e||t.fire("touchstart",{evt:n.evt,pointerId:n.pointerId,target:n.target})})),null===(r=n.value)||void 0===r||r.on(`touchmove.${e}`,(e=>{e.evt.preventDefault();const n=e.evt.touches[0],i=e.evt.touches[1];n&&i||t.fire("touchmove",{evt:e.evt,pointerId:e.pointerId})})),null===(s=n.value)||void 0===s||s.on(`touchend.${e}`,(function(e){t.fire("touchend",{evt:e.evt,pointerId:e.pointerId,target:e.target})})));["layerMain","layerNav"].includes(e)&&(null===(l=n.value)||void 0===l||l.on("tap",(e=>{a.value||t.fire("tap",{evt:e.evt,pointerId:e.pointerId,target:e.target})})));i(),u[e]=!0},removeStageEvent:e=>{if(console.logBlue("解除事件",e),"all"===e){var t,i,o,r,a,s,l,c,d,h;null===(t=n.value)||void 0===t||t.off("touchstart.layerMain"),null===(i=n.value)||void 0===i||i.off("touchmove.layerMain"),null===(o=n.value)||void 0===o||o.off("touchend.layerMain"),null===(r=n.value)||void 0===r||r.off("touchstart.layerBg"),null===(a=n.value)||void 0===a||a.off("touchmove.layerBg"),null===(s=n.value)||void 0===s||s.off("touchend.layerBg"),null===(l=n.value)||void 0===l||l.off("touchstart.layerNav"),null===(c=n.value)||void 0===c||c.off("touchmove.layerNav"),null===(d=n.value)||void 0===d||d.off("touchend.layerNav"),null===(h=n.value)||void 0===h||h.off("tap"),u.layerMain=!1,u.layerBg=!1,u.layerNav=!1,p(),D(),N()}else{var f,g,m,_;null===(f=n.value)||void 0===f||f.off(`touchstart.${e}`),null===(g=n.value)||void 0===g||g.off(`touchmove.${e}`),null===(m=n.value)||void 0===m||m.off(`touchend.${e}`),null===(_=n.value)||void 0===_||_.off("tap");("layerMain"===e?p:"layerBg"===e?D:N)(),u[e]=!1}},getAllPointNodeData:f,getAllEdgeData:g,getNodeEdgeJsonData:m,clearStage:()=>{var e,t;null===(e=n.value)||void 0===e||e.x(0),null===(t=n.value)||void 0===t||t.y(0),y(),L(),F()},clearLayerMain:y,clearLayerBg:L,clearLayerNav:F,genRobotPoint:x,removeRobotPoint:M,updateRobotPoint:R,updateRobotPointPlus:function(e,t,i=!0){R(e,t),i&&!l&&function(e){var t;if(!n.value)return;if(null!==(t=n.value)&&void 0!==t&&t.isDragging())return;const{x:i,y:o}=e,a=i*r.value,s=o*r.value,{width:l,height:c}=G(),u=C.value.width*r.value,d=C.value.height*r.value,h=a-l/2,p=s-c/2;let f=0;f=h<0?0:u-h<l?0-(u-l):-h;let g=0;g=p<0?0:d-p<c?0-(d-c):-p,n.value.x(f),n.value.y(g)}(e)},getRobotDirPoints:k,loadNodeEdgeJsonData:_,handleCenterStage:V,getNavPointPosition:$,removeSingleNavPoint:B,genChargePoint:v,getChargePointPos:b,removeChargePoint:T,setChargePointEdit:A,undo:E,initKonvaStageState:function(){var e;l=!1,null===(e=n.value)||void 0===e||e.scale({x:1,y:1}),r.value=1},initDragState:function(){var e;null===(e=n.value)||void 0===e||e.stopDrag(),u.layerMain&&d.fire("touchend",{evt:new TouchEvent("touchend"),pointerId:0,target:null}),u.layerBg&&S.fire("touchend",{evt:new TouchEvent("touchend"),pointerId:0,target:null}),u.layerNav&&O.fire("touchend",{evt:new TouchEvent("touchend"),pointerId:0,target:null})}}}function getCenter(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function getDistance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}const _hoisted_1$2={class:"alert_modal_wrapper"},_hoisted_2$2={key:0,class:"title"},_hoisted_3$2={class:"icon_wrap"},_hoisted_4$1={key:1,class:"title"},_hoisted_5$1={key:2,class:"input_wrap"},_hoisted_6$1=["placeholder"],_hoisted_7$1={key:3,class:"input_wrap"},_hoisted_8$1={key:4,class:"content"},_hoisted_9={class:"opera"},_sfc_main$2=defineComponent({__name:"AlertModal",props:{type:{default:"ask"},title:{default:"提示"},iconType:{default:"info"},content:{default:"提示内容"},sureBtnText:{type:[String,Function],default:()=>t("sure")},cancelBtnText:{type:[String,Function],default:()=>t("cancel")},verifyFn:{type:Function,default:()=>!0},onSure:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}}},setup(e){const n=e,i={save:createVNode(_sfc_main$L,{name:"slam/icon_modal_save",style:"width: 42px; height: 42px"},null),edit:createVNode(_sfc_main$L,{name:"slam/icon_modal_edit",style:"width: 35px; height: 37px"},null),mark:createVNode(_sfc_main$L,{name:"slam/icon_modal_mark",style:"width: 42px; height: 42px"},null),tick:createVNode(_sfc_main$L,{name:"slam/icon_modal_tick",style:"width: 42px; height: 30px"},null),question:createVNode(_sfc_main$L,{name:"slam/icon_modal_question",style:"width: 36px; height: 42px"},null),info:createVNode(_sfc_main$L,{name:"slam/icon_modal_info",style:"width: 36px; height: 42px"},null)},o=computed((()=>i[n.iconType])),r=ref(),a=ref("1"),s=()=>t("Slam.mapNamePlaceholder"),l=()=>{n.onSure&&("input"===n.type?r.value.value?n.verifyFn(r.value.value)?n.onSure(r.value.value):console.log("校验不通过"):ToastMsg(t("Slam.msg_26")):"select"===n.type?Number(a.value)<=0?ToastMsg(t("Slam.msg_27")):n.onSure(a.value):n.onSure())};return(e,t)=>{var n,i;return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",{class:normalizeClass(["modal",e.type])},[["ask","alert"].includes(e.type)?(openBlock(),createElementBlock("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[(openBlock(),createBlock(resolveDynamicComponent(unref(o))))])])):(openBlock(),createElementBlock("div",_hoisted_4$1,toDisplayString$1(e.title),1)),"input"===e.type?(openBlock(),createElementBlock("div",_hoisted_5$1,[createBaseVNode("input",{ref_key:"inputRef",ref:r,type:"text",placeholder:null==s?void 0:s()},null,8,_hoisted_6$1)])):"select"===e.type?(openBlock(),createElementBlock("div",_hoisted_7$1,[createVNode(_sfc_main$8,{value:unref(a),"onUpdate:value":t[0]||(t[0]=e=>isRef(a)?a.value=e:null)},null,8,["value"])])):(openBlock(),createElementBlock("div",_hoisted_8$1,toDisplayString$1(e.content),1)),createBaseVNode("div",_hoisted_9,["alert"!=e.type?(openBlock(),createElementBlock("div",{key:0,class:"btn cancel",onClick:t[1]||(t[1]=()=>e.onCancel&&e.onCancel())},toDisplayString$1("string"!=typeof e.cancelBtnText?null===(n=e.cancelBtnText)||void 0===n?void 0:n.call(e):e.cancelBtnText),1)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["btn","sure","alert"===e.type&&"long"]),onClick:l},toDisplayString$1("string"!=typeof e.sureBtnText?null===(i=e.sureBtnText)||void 0===i?void 0:i.call(e):e.sureBtnText),3)])],2)])}}}),AlertModal=_export_sfc(_sfc_main$2,[["__scopeId","data-v-c2c1c615"]]),_sfc_main$1={},_withScopeId=e=>(pushScopeId("data-v-d1f2bff2"),e=e(),popScopeId(),e),_hoisted_1$1={id:"slamLoadingWrapper",class:"loading_wrapper"},_hoisted_2$1={class:"cont"},_hoisted_3$1=_withScopeId((()=>createBaseVNode("span",null,"loading",-1)));function _sfc_render(e,t){const n=_sfc_main$L;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createVNode(n,{name:"slam/img_loading"}),_hoisted_3$1])])}const Loading=_export_sfc(_sfc_main$1,[["render",_sfc_render],["__scopeId","data-v-d1f2bff2"]]);function useOperationHook(e,n,i){const{sportState:o,bmsState:r,series:a,sportMode:s}=storeToRefs(useDeviceStore()),l=ref(),c=ref(),u=computed((()=>i.value.length<=0&&n.value<SLAM_STATE_MACHINE.buildingMap)),d=computed((()=>[SLAM_STATE_MACHINE.buildingMap,SLAM_STATE_MACHINE.sendStopBuild,SLAM_STATE_MACHINE.settingRoadNetwork].includes(n.value))),p=computed((()=>!![SLAM_STATE_MACHINE.navigation,SLAM_STATE_MACHINE.navigationOpen].includes(n.value)||n.value===SLAM_STATE_MACHINE.Idle&&i.value.length>0)),f=computed((()=>!(n.value===SLAM_STATE_MACHINE.Idle&&i.value.length<=0))),g=computed((()=>{let e=-1;switch(n.value){case SLAM_STATE_MACHINE.Idle:case SLAM_STATE_MACHINE.navigation:case SLAM_STATE_MACHINE.navigationOpen:e=0;break;case SLAM_STATE_MACHINE.sendStartBuild:case SLAM_STATE_MACHINE.buildingMap:case SLAM_STATE_MACHINE.sendStopBuild:case SLAM_STATE_MACHINE.sendLoadMap:e=1;break;case SLAM_STATE_MACHINE.mapLoaded:case SLAM_STATE_MACHINE.readySettingRoadNetwork:case SLAM_STATE_MACHINE.enableRelocation:e=2;break;case SLAM_STATE_MACHINE.settingRoadNetwork:e=3;break;default:e=-1}return e})),m=computed((()=>[SLAM_STATE_MACHINE.sendStartBuild,SLAM_STATE_MACHINE.buildingMap,SLAM_STATE_MACHINE.sendStopBuild,SLAM_STATE_MACHINE.readySettingRoadNetwork,SLAM_STATE_MACHINE.settingRoadNetwork,SLAM_STATE_MACHINE.enableRelocation,SLAM_STATE_MACHINE.initRelocationCompleted,SLAM_STATE_MACHINE.sendLoadMap,SLAM_STATE_MACHINE.mapLoaded,SLAM_STATE_MACHINE.Idle].includes(n.value))),[_,v]=useToggle(!0),[b,T]=useToggle(!0),[A,y]=useToggle(!0),[E,S]=useToggle(!1),[C,w]=useToggle(void 0),[x,M]=useToggle(!1),[R,I]=useToggle(!1),D=ref(t("Slam.chargeBtnText_1")),[k,L]=useToggle(!0),O=n=>new Promise(((i,o)=>{const r=promiseAbort(null==e?void 0:e.publishReqNew(n,{api_id:1001}));r.then((e=>{var t;if(window.clearTimeout(a),null===(t=e.data)||void 0===t||!t.data)return void i(null);const n=e.data.data,o=new Uint8Array(n);let r="";for(let i=0;i<o.length;i++)r+=String.fromCharCode(o[i]);webToApp("takePhoto",{data:window.btoa(r)}),i("")}));const a=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_1")),null===(e=r.abort)||void 0===e||e.call(r,"拍照超时"),o("拍照超时")}),16e3)})),P=window.videoTransformWorker,N={front:null,back:null};let $="start";const B=ref({angle:0,percentage:0,stop:!0}),F=ref({angle:0,percentage:0,stop:!0});listerJoystickChange(e,B,F);const U=["站立",SPORT_STATE.BalanceStand,t("model_stand"),"active/icon_model_stand_white","model",SPORT_CMD.BalanceStand],G=["站立",SPORT_STATE.BalanceStand,t("model_stand"),"active/icon_model_stand_white","model",SPORT_CMD.StandUp],V=["卧倒",SPORT_STATE.LieDown,t("active_lieDown"),"active/icon_active_lieDown_white","model",SPORT_CMD.StandDown],H=["经典",SPORT_STATE.WalkStair,t("model_walkStair"),"active/icon_model_walk_white","model",SPORT_CMD.WalkStair,!0],W=n=>new Promise(((i,o)=>{const[r,a,s,l,c,u,d]=n,h=window.setTimeout((()=>{var e;ToastMsg(t("toastMsg_12")),null==f||null===(e=f.abort)||void 0===e||e.call(f,null),o("timeout"),console.error(`[error] ${r} 命令执行超时`)}),[SPORT_CMD.Dance1,SPORT_CMD.Dance2].includes(u)?6e4:2e4);let p={};void 0!==d&&(p={data:d}),console.log(`%c 发送${n[0]}指令 ${n[5]}`,"color: red",void 0===n[6]?"":n[6]);const f=promiseAbort(null==e?void 0:e.publishReqNew(RTC_TOPIC.SPORT_MOD,{api_id:u,data:p}));f.then((e=>{e?(console.log(`%c ${n[0]}指令返回结果:`,"color: red",e.data.header.status),window.clearTimeout(h),i(e.data),0!==e.data.header.status.code&&(ToastMsg(`${t("toastMsg_15")}【${s}】${t("toastMsg_16")}`),console.error(`[Error] 指令${r}执行失败, 返回结果code为${e.data.header.status.code}`))):o()})).catch((e=>{console.log("报错了"),o(e)}))})),z=ref("idle");watch((()=>o.value),(e=>{7===e.mode?z.value="damp":5===e.mode?z.value="lieDown":1===e.mode?z.value="balanceStand":z.value="other"}),{deep:!0});return{tipComponentRef:c,showJoystick:m,hideJoystick:_,showTaskWindow:b,hideTaskWindow:A,setHideJoystick:v,setHideTaskWindow:y,delPointNode:e=>{var t,n;null===(t=l.value)||void 0===t||null===(n=t.delPoint)||void 0===n||n.call(t,e)},taskComponentRef:l,getAllPointNodeTask:()=>{var e,t;return null===(e=l.value)||void 0===e||null===(t=e.getAllTaskJson)||void 0===t?void 0:t.call(e)},initPointNodeTask:e=>{var t,n;null===(t=l.value)||void 0===t||null===(n=t.initTaskList)||void 0===n||n.call(t,e)},queryPointNodeTask:e=>{var t,n;return null===(t=l.value)||void 0===t||null===(n=t.queryPointTask)||void 0===n?void 0:n.call(t,e)},showMapListPage:E,setMapPageState:S,showModal:(e,t)=>new Promise(((n,i)=>{const o=document.getElementById(t||"slamPage"),r=()=>{o&&Array.from(o.children).forEach((e=>{e.className.includes("alert_modal_wrapper")&&e.remove()}))},a=h(createVNode(AlertModal,{key:Math.random().toString(),type:e.type,title:e.title,iconType:e.iconType,content:e.content,sureBtnText:e.sureBtnText,cancelBtnText:e.cancelBtnText,verifyFn:e.verifyFn,onSure:e=>{n(e),r()},onCancel:()=>{i(),r()}},null));o&&render(a,o)})),unmountAllModal:()=>{["slamPage","slamMapPage"].forEach((e=>{const t=document.getElementById(e);t&&Array.from(t.children).forEach((e=>{e.className.includes("alert_modal_wrapper")&&e.remove()}))}))},showEmpty:u,showSaveBtn:d,showVideoBtn:p,showOperaBar:f,operaBarContentType:g,slamWorkModel:C,handleSelectWorkModel:e=>{"map"===e?S(!0):C.value===e?(w(void 0),v(!0)):(w(e),v(!1))},setHideOperaBar:M,showVideo:R,setShowVideo:I,hideOperaBar:x,showLoading:e=>{const t=document.getElementById(e||"slamPage"),n=h(createVNode(Loading,{key:Math.random().toString()},null));t&&render(n,t)},closeLoading:e=>{const t=document.getElementById(e||"slamPage");t&&Array.from(t.children).forEach((e=>{"slamLoadingWrapper"==e.id&&e.remove()}))},showInitRelocationPlus:k,setShowInitRelocationPlus:L,markChargeBtnText:D,leftJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;B.value.angle=e,B.value.percentage=a,B.value.stop=!1},leftJoystickStop:()=>{B.value.angle=0,B.value.percentage=0,B.value.stop=!0},rightJoystickAction:(e,t,...n)=>{const[i,o]=n,r=2.5*o,a=i<r?i/r:1;F.value.angle=e,F.value.percentage=a,F.value.stop=!1},rightJoystickStop:()=>{F.value.angle=0,F.value.percentage=0,F.value.stop=!0},takePhoto:()=>new Promise(function(){var e=_asyncToGenerator((function*(e){Promise.all([O(RTC_TOPIC.FRONT_PHOTO_REQ),O(RTC_TOPIC.BACK_PHOTO_REQ)]).then((()=>{e("")})).catch((t=>{console.log(t),e(null)}))}));return function(t){return e.apply(this,arguments)}}()),actionVideo:t=>{var n,i;"connected"===(null==e?void 0:e.getConnectionState())?($=t,"start"===t?function(t){N[t]&&(N[t]=null);const n=null==e?void 0:e.getVideoStream("unitreeFrontVideoStream");if(!n)return;const i=new MediaRecorder(n,{videoBitsPerSecond:1e6});console.log("码率",i.videoBitsPerSecond),i.ondataavailable=function(e){"cancel"!==$?(console.log("录屏数据",e.data.size),e.data.size>0?null==P||P.postMessage(e.data):(null==i||i.stop(),console.log("视频源为空，无法录制"))):console.log("取消录屏")},i.start(),N[t]=i,console.log("开始录制前置摄像头")}("front"):("recording"===(null===(n=N.front)||void 0===n?void 0:n.state)&&(null===(i=N.front)||void 0===i||i.stop()),console.log("录制结束"))):console.error("未连接完成")},sendStandUp:()=>{"B2"===a.value&&s.value.includes("-w")?W(G):W(U)},sendLieDown:()=>W(V),sendWalkStair:()=>"ai"==s.value?W(H):Promise.resolve(""),currSportState:z,showHelpTip:(e,t=3)=>{c.value&&c.value.showTip(e,t)},switchVideoTrack:t=>{["G1","H1"].includes(a.value)?t?null==e||e.publish(RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB,"on",DataChannelType.VID):null==e||e.publish(RTC_TOPIC.NORMAL_FRONT_VIDEO_HUB,"off",DataChannelType.VID):t?null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,"on",DataChannelType.VID):null==e||e.publish(RTC_TOPIC.FRONT_VIDEO_HUB,"off",DataChannelType.VID)},getPowerState:()=>({isCharge:r.value.current&&r.value.current>0,soc:r.value.soc})}}function listerJoystickChange(e,n,i){const o=useDeviceStore(),r=throttle((()=>{ToastMsg(t("toastMsg_2"))}),5e3),a={lx:0,ly:0,rx:0,ry:0};let s=0,l=!1;const c=useRTC((e=>{o.emergencyStopState?r():"open"===e.getChannelState()&&e.publish(RTC_TOPIC.WIRELESS_CONTROLLER,a)}),e,!0),u=()=>{l||(l=!0,s=window.setInterval((()=>{c(),n.value.stop&&i.value.stop&&d()}),50))},d=()=>{l=!1,window.clearInterval(s),a.lx=a.ly=a.rx=a.ry=0,c()};watch((()=>n.value),(e=>{if(e.stop)a.lx=0,a.ly=0;else{const{currHSpeedScale:t,currVSpeedScale:n}=disassembleMoveActiveSpeed(e);a.lx=t,a.ly=n,l||u()}}),{deep:!0}),watch((()=>i.value),(e=>{if(e.stop)a.rx=0,a.ry=0;else{const{yawSpeed:t,eulerZ:n}=disassembleViewActiveSpeed(e);a.rx=t,a.ry=n,l||u()}}),{deep:!0})}function useSlamHook(e,t){const{sendSlamReq:n,dealMsg:i}=slamReqProcessor$1(e),{genParam_deletePcdMap:o,genParam_deleteTopMap:r,genParam_queryPcdMapList:a,genParam_queryTopMapList:s,genParam_queryCurrMapInfo:l,genParam_queryNodeEdgeList:c,genParam_startBuildMap:u,genParam_endBuildMap:d,genParam_loadMap:h,genParam_saveNodeEdgeToMap:p,genParam_loadTopMap:f,genParam_enableRelocation:g,genParam_initRelocation:m,genParam_turnOnNavigation:_,genParam_singlePointNavigation:v,genParam_anyPointNavigation:b,genParam_multiPointCircularNavigation:T,genParam_multiPointCircularNavigationPlus:A,genParam_returnCharge:y,genParam_pauseNavigation:E,genParam_recoverNavigation:S,genParam_returnToStartPoint:C,genParam_closeAll:w,genParam_addNode:x,genParam_addEdge:M,genParam_editPCDMapName:R,genParam_getPCDMapForIndex:I,genParam_setChunksSetting:D,genParam_mapTypeSetting:k,genParam_queryVersion:L}=slamReqParamsFactory$1();return{queryVersionReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,L()),deletePcdMapReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,o(e,t)),deleteTopMapReq:(e,t,i)=>n(RTC_TOPIC.SLAM_QT_COMMAND,r(e,t,i)),startBuildMapReq:()=>(t.value=SLAM_STATE_MACHINE.sendStartBuild,n(RTC_TOPIC.SLAM_QT_COMMAND,u()).then((e=>(t.value=SLAM_STATE_MACHINE.buildingMap,e)))),loadMapReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,h(e,t)).then((e=>e)),endBuildMapReq:(e,i)=>(t.value=SLAM_STATE_MACHINE.sendStopBuild,n(RTC_TOPIC.SLAM_QT_COMMAND,d(e,i))),addNodeReq:(e,t,i,o,r)=>n(RTC_TOPIC.SLAM_ADD_NODE,x(e,t,i,o,r)),addEdgeReq:(e,t,i,o)=>n(RTC_TOPIC.SLAM_ADD_EDGE,M(e,t,i,o)),queryPcdMapListReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,a()),queryCurrMapInfoReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,l()),queryTopMapListReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,s()),queryNodeEdgeList:(e,t,i)=>n(RTC_TOPIC.SLAM_QT_COMMAND,c(e,t,i)),saveNodeEdgeToMapReq:(e,t,i)=>n(RTC_TOPIC.SLAM_QT_COMMAND,p(e,t,i)),loadTopMapReq:(e,t,i)=>n(RTC_TOPIC.SLAM_QT_COMMAND,f(e,t,i)),enableRelocationReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,g()),initRelocationReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,m(e,t)),turnOnNavigationReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,_()),singlePointNavigationReq:e=>n(RTC_TOPIC.SLAM_QT_COMMAND,v(e)),anyPointNavigationReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,b(e,t)),multiPointCircularNavigationReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,T()),multiPointCircularNavigationPlusReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,A(e,t)),returnChargeReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,y()),pauseNavigationReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,E()),recoverNavigationReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,S()),returnToStartPointReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,C()),editPCDMapNameReq:(e,t,i)=>n(RTC_TOPIC.SLAM_QT_COMMAND,R(e,t,i)),getPCDMapForIndexReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,I(e,t)),setChunksSettingReq:(e,t)=>n(RTC_TOPIC.SLAM_QT_COMMAND,D(e,t)),mapTypeSettingReq:(e,t)=>1===e&&1==t?Promise.reject("不可同时发送两种地图"):n(RTC_TOPIC.SLAM_QT_COMMAND,k(e,t)),closeAllReq:()=>n(RTC_TOPIC.SLAM_QT_COMMAND,w()),dealMsg:i,sleepPromise:function(e){return new Promise((t=>{window.setTimeout(t,e)}))}}}function useHook(){const{webRtc:e}=storeToRefs(useMainStore()),t=null==e?void 0:e.value;provide("webRTC",t);const n=ref(SLAM_STATE_MACHINE.Idle),i=ref(),o=ref([]);let r=!1;const a=useSlamHook(t,n),s=useOperationHook(t,n,o),{delPointNode:l}=s,c=useKonvaHook(i,l),{initKonva:u,removeStageEvent:d,clearStage:h,handleCenterStage:p,initKonvaStageState:f,initDragState:g}=c,m=useCoreHook(a,c,s,n,o),{currMapInfo:_,isOutCharge:v,init:b,closeAllFunc:T,closeLoadingModal:A,messageListen:y,reconnectionDealState:E}=m,S=useRTC(_asyncToGenerator((function*(){yield b(),r=!0})),t);watch((()=>i.value),(e=>{s.setHideTaskWindow(!e)}));const C=e=>{x.value||(console.log("slam页面响应",e),"0"===e&&(v.value=!1,T(),h(),f(),g(),A(),d("all"),s.unmountAllModal(),s.setShowVideo(!1),s.slamWorkModel.value=void 0,s.setHideJoystick(!0),s.setHideTaskWindow(!0),s.setHideOperaBar(!1),s.setMapPageState(!1),n.value=SLAM_STATE_MACHINE.Idle,_.value={}),"1"===e&&(!x.value&&M(),r&&useRTC((()=>b()),t)()))},w=()=>{g()},x=ref(!1),M=()=>{webToApp("webSendHideBackBtn",{data:!0}),x.value=!0};return _objectSpread(_objectSpread(_objectSpread({exitSlamPage:()=>{window.setTimeout((()=>webToApp("webSendHideBackBtn",{data:!1})),300),x.value=!1},enterSlamPage:M,initSlamData:S,selectedNodeId:i,pcdMapList:o,initKonva:u},s),m),{},{handleShowVideo:()=>{s.switchVideoTrack(!s.showVideo.value),s.setShowVideo(),window.setTimeout((()=>{p()}),300)},listenWebState:()=>{listenAppToWeb("appSendWebviewState",C),listenAppToWeb("appSendStatusBarShow",w),t.onMessage(y),t.onValidationOK(E)},removeWebStateLister:()=>{removeAppToWebLister("appSendWebviewState",C),removeAppToWebLister("appSendStatusBarShow",w),t.removeMessageListen(y),t.removeValidationOKListen(E)}})}const _hoisted_1={class:"wrap"},_hoisted_2={key:1,class:"btn_container between",style:{height:"66px"}},_hoisted_3={class:"slam_model"},_hoisted_4={key:2,class:"btn_container start"},_hoisted_5={key:3,class:"btn_container between morePadding"},_hoisted_6={key:4,class:"btn_container start"},_hoisted_7={class:"empty_text"},_hoisted_8={class:"patrol_situation"},_sfc_main=defineComponent({__name:"Slam",setup(e){const t=ref(),{enterSlamPage:n,exitSlamPage:i,initSlamData:o,tipComponentRef:r,taskComponentRef:a,selectedNodeId:s,pcdMapList:l,initKonva:c,handleNextToSettingRoute:u,handleInitRelocation:d,showJoystick:h,hideJoystick:p,showTaskWindow:f,hideTaskWindow:g,showMapListPage:m,setMapPageState:_,handleAddMap:v,handleEditTopMap:b,handleEditPCDName:T,handleSelectMap:A,handleDelMap:y,handleSave:E,showEmpty:S,showSaveBtn:C,showOperaBar:w,operaBarContentType:x,slamWorkModel:M,handleSelectWorkModelPro:R,handleStartWork:I,handleInitRelocationPlus:D,showVideo:k,hideOperaBar:L,currModeTaskState:O,handleActive:P,handleStop:N,handleMarkCharge:$,handleShowVideo:B,showInitRelocationPlus:F,markChargeBtnText:U,handleClearRouteNet:G,handleCancelRouteNet:V,leftJoystickAction:H,leftJoystickStop:W,rightJoystickAction:z,rightJoystickStop:j,listenWebState:X,removeWebStateLister:Y,patrolSituation:q,currMapInfo:K}=useHook(),Q=()=>{if(t.value){const e=t.value,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let a=Math.floor(e.offsetWidth)==Math.floor(i)&&Math.floor(e.offsetHeight)==Math.floor(r);i>0&&r>0&&a?(c(),o(),X(),n()):window.setTimeout(Q,100)}else window.setTimeout(Q,100)};return onMounted((()=>{Q()})),onUnmounted((()=>{Y()})),window.onblur=function(){console.log("浏览器失焦了")},(e,n)=>{var o;const c=_sfc_main$L;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"slamPage",class:normalizeClass(["slam_page",unref(m)?"hide":"show"])},[createVNode(TopBar,{title:(null===(o=unref(K))||void 0===o?void 0:o.pcdMapName)||"",onClose:unref(i)},null,8,["title","onClose"]),createVNode(VideoSlam,{class:normalizeClass(["video_window",unref(k)&&"show"]),visible:unref(k),"video-id":"unitreeFrontVideoStream_slam"},null,8,["class","visible"]),createBaseVNode("div",{id:"container",ref_key:"slamRenderDiv",ref:t,class:normalizeClass(["renderDiv",unref(k)&&"half"]),onContextmenu:n[0]||(n[0]=e=>e.preventDefault())},null,34),unref(w)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["operation_wrapper",(unref(k),"")])},[createBaseVNode("div",_hoisted_1,[unref(h)?(openBlock(),createBlock(Joystick2,{key:0,class:normalizeClass(["joystick-component","left",unref(p)&&"hide"]),onAngleChange:unref(H),onActionStop:unref(W)},null,8,["class","onAngleChange","onActionStop"])):createCommentVNode("",!0),0===unref(x)?(openBlock(),createElementBlock("div",_hoisted_2,[createBaseVNode("div",{class:normalizeClass(["btn_container_child",unref(L)&&"hide"]),style:{"justify-content":"space-between"}},[createBaseVNode("div",{class:normalizeClass(["btn",unref(M)&&unref(F)?"":"hide"]),onClick:n[1]||(n[1]=(...e)=>unref(D)&&unref(D)(...e))},toDisplayString$1(e.$t("Slam.initialization")),3),createBaseVNode("div",_hoisted_3,[withDirectives(createBaseVNode("div",{class:"btn_task",onClick:n[2]||(n[2]=()=>unref(R)("map"))},[createVNode(c,{name:"slam/img_map"}),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_1")),1)],512),[[vShow,!unref(M)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["btn_task","patrol"===unref(M)&&"noMargin"]),onClick:n[3]||(n[3]=()=>unref(R)("patrol"))},[createVNode(c,{name:"slam/img_patrol"+("patrol"===unref(M)?"_on":"")},null,8,["name"]),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_2")),1)],2),[[vShow,!unref(M)||"patrol"===unref(M)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["btn_task","singlePoint"===unref(M)&&"noMargin"]),onClick:n[4]||(n[4]=()=>unref(R)("singlePoint"))},[createVNode(c,{name:"slam/img_singlePoint"+("singlePoint"===unref(M)?"_on":"")},null,8,["name"]),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_3")),1)],2),[[vShow,!unref(M)||"singlePoint"===unref(M)]]),withDirectives(createBaseVNode("div",{class:normalizeClass(["btn_task","returnCharge"===unref(M)&&"noMargin"]),onClick:n[5]||(n[5]=()=>unref(R)("returnCharge"))},[createVNode(c,{name:"slam/img_returnCharge"+("returnCharge"===unref(M)?"_on":"")},null,8,["name"]),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.menu_4")),1)],2),[[vShow,!unref(M)||"returnCharge"===unref(M)]])]),unref(M)?(openBlock(),createElementBlock("div",{key:0,class:"btn",onClick:n[6]||(n[6]=(...e)=>unref(I)&&unref(I)(...e))},toDisplayString$1("patrol"===unref(M)?e.$t("Slam.btn_1"):"singlePoint"===unref(M)?e.$t("Slam.btn_3"):e.$t("Slam.btn_2")),1)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["btn_container_child",!unref(L)&&"hide"]),style:{"justify-content":"flex-end"}},[createBaseVNode("div",{class:"btn small",style:{"margin-right":"12px"},onClick:n[7]||(n[7]=()=>unref(P)(!unref(O)))},[createVNode(c,{name:"slam/icon_"+(unref(O)?"pause":"play"),style:{width:"16px",height:"16px"}},null,8,["name"])]),createBaseVNode("div",{class:"btn small",onClick:n[8]||(n[8]=(...e)=>unref(N)&&unref(N)(...e))},[createVNode(c,{name:"slam/icon_stop"})])],2)])):createCommentVNode("",!0),1===unref(x)?(openBlock(),createElementBlock("div",_hoisted_4)):createCommentVNode("",!0),2===unref(x)?(openBlock(),createElementBlock("div",_hoisted_5,[createBaseVNode("div",{class:"btn",onClick:n[9]||(n[9]=(...e)=>unref(d)&&unref(d)(...e))},toDisplayString$1(e.$t("Slam.initialization")),1),createBaseVNode("div",{class:"btn",onClick:n[10]||(n[10]=(...e)=>unref(u)&&unref(u)(...e))},toDisplayString$1(e.$t("Slam.next")),1)])):createCommentVNode("",!0),3===unref(x)?(openBlock(),createElementBlock("div",_hoisted_6,[createBaseVNode("div",{class:"btn",style:{"margin-right":"12px"},onClick:n[11]||(n[11]=(...e)=>unref($)&&unref($)(...e))},toDisplayString$1(unref(U)),1),createBaseVNode("div",{class:"btn small",style:{"margin-right":"12px"},onClick:n[12]||(n[12]=(...e)=>unref(V)&&unref(V)(...e))},[createVNode(c,{name:"slam/btn_revoke"})]),createBaseVNode("div",{class:"btn small",onClick:n[13]||(n[13]=(...e)=>unref(G)&&unref(G)(...e))},[createVNode(c,{name:"slam/btn_clear"})])])):createCommentVNode("",!0),unref(h)?(openBlock(),createBlock(Joystick2,{key:5,class:normalizeClass(["joystick-component","right",unref(p)&&"hide"]),onAngleChange:unref(z),onActionStop:unref(j)},null,8,["class","onAngleChange","onActionStop"])):createCommentVNode("",!0)])],2)):createCommentVNode("",!0),unref(C)?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["btn_opera","save",!unref(g)&&"moreRight"]),onClick:n[14]||(n[14]=(...e)=>unref(E)&&unref(E)(...e))},[createVNode(c,{name:"slam/btn_save"})],2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["btn_opera",!unref(g)&&"moreRight"]),onClick:n[15]||(n[15]=(...e)=>unref(B)&&unref(B)(...e))},[createVNode(c,{name:"slam/img_video_show"})],2),unref(S)?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["empty_show",unref(k)?"half":""])},[createVNode(c,{class:"empty_img",name:"slam/icon_empty"}),createBaseVNode("span",_hoisted_7,toDisplayString$1(e.$t("Slam.noMap")),1),createBaseVNode("div",{class:"btn_add_map",onClick:n[16]||(n[16]=()=>unref(v)())},[createVNode(c,{name:"slam/icon_add"}),createTextVNode(),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.goToAddMap")),1)])],2)):createCommentVNode("",!0),unref(f)?(openBlock(),createBlock(Task,{key:3,ref_key:"taskComponentRef",ref:a,class:normalizeClass(["task-component",unref(g)?"hide":"show"]),"curr-point-id":unref(s)},null,8,["class","curr-point-id"])):createCommentVNode("",!0),withDirectives(createBaseVNode("div",_hoisted_8,[createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_1"))+"：X("+toDisplayString$1(unref(q).position.x)+") Y("+toDisplayString$1(unref(q).position.y)+") "+toDisplayString$1(e.$t("Slam.yaw"))+"("+toDisplayString$1(unref(q).yaw)+"°) ",1),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_2"))+"："+toDisplayString$1(unref(q).timeShowText),1),createBaseVNode("span",null,toDisplayString$1(e.$t("Slam.text_show_3"))+"："+toDisplayString$1(unref(q).progress)+"%",1)],512),[[vShow,unref(w)&&0===unref(x)&&"patrol"===unref(M)&&unref(L)]])],2),createVNode(Tip,{ref_key:"tipComponentRef",ref:r},null,512),createVNode(MapList,{class:normalizeClass(["map_page",unref(m)?"show":"hide"]),visible:unref(m),"map-list":unref(l),onAdd:unref(v),onEdit:unref(b),onDel:unref(y),onBack:n[17]||(n[17]=()=>unref(_)(!1)),onEditName:unref(T),onSelectMap:unref(A)},null,8,["class","visible","map-list","onAdd","onEdit","onDel","onEditName","onSelectMap"])],64)}}}),Slam=_export_sfc(_sfc_main,[["__scopeId","data-v-36242e12"]]),routes=[{path:"/",component:Index},{path:"/remoteControl",component:RemoteControl},{path:"/programming",component:()=>__vitePreload((()=>module.import("../js/Programming/Programming-legacy.DrxAjtoK.js")),void 0)},{path:"/operation",meta:{keepAlive:!0},component:Operation},{path:"/bluetooth",component:()=>__vitePreload((()=>module.import("../js/pages/Bluetooth-legacy.CQ1aHfKo.js")),void 0)},{path:"/slam",component:Slam},{path:"/newSlam",component:NewSlam},{path:"/:catchAll(.*)*",name:"NotFound",redirect:"/"}],router=createRouter({history:createWebHashHistory(),routes:routes,scrollBehavior:(e,t,n)=>n||{top:0}});router.beforeEach(((e,t,n)=>{document.title=e.meta.title||"B2App",n()})),window.vconsole=new VConsole({theme:"dark"}),window.vconsole.hideSwitch();const store=createPinia(),app=createApp(_sfc_main$N);app.use(store),app.use(router),app.use(i18n),(new APPCommunication).onInitOver((()=>{app.mount("#app")})),getPackageTime().then((e=>{console.log(`打包时间：${e}`)})),registerAppErrorLister(app)}}}))})();
